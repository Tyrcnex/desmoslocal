;(function () {
var desmosEnabledFeatures = {"GraphingCalculator":true,"FourFunctionCalculator":true,"ScientificCalculator":true};
var desmosCommit = 'f4a3b9f7c128fe4c55ac4f4f407e1de6b86a744f';
;(function (global) {
  var elt = document.createElement('style');
  
  elt.innerHTML = "@charset \"UTF-8\";.dcg-calculator-api-container img{height:auto}.dcg-aria-alert,.dcg-calculator-api-container .dcg-sr-only{position:absolute;left:-1000px;top:-1000px;width:1px;height:1px;text-align:left;overflow:hidden}@font-face{font-family:Symbola;src:url(data:font/woff2;base64,d09GMgABAAAAAB+0ABIAAAAAREgAAB9OAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP0ZGVE0cGh4bQByCQAZWAINaCFoJhGURDArsKN8gC4EaAAE2AiQDgi4EIAWECgeDHQxAG+M7BdzxbgeIil5+IrL/ywPusPjkajTjiY1Gq6TAV2Of4Cs0/3u0vopiRzm8B6hPNwLhU3A0YvQOnEa6rIYKUYKhRRiNUVLMdvP9jPfLsxGSzP7Ab7P3KVFMwAxADFQMxKSNpKzGDtyMPp3brFqFus46ePj+3jz3/fvSqn9NwQB1kFiz1jETL41WAxZaDkjAItw1e6jTdLZTkJw8IUyAo6EM07MdLVLLuvYnIpyBDY8wbPT3OlUygmyWLvnqj2WSEicsE6i2HIKvIN3e8tychqnL+AyFEYeJaBo7qasUWGyQZKJ9e4F9L+/dPVDJ3Tf9N22wbDNbZ/oNd5m08T9lqmSzHMuWAmRihajluR2nrtt7Xz84dZmAbs8wOgENbP3/t5lWOec+gf2/ggqysQpwtesAYJ2iHv3Z2Z35M+MdzcqxNGsQOUfS7hokw67MMsnmAHCFoA0hlUnRpAKuuUyqVH3KJkWVZem6QEPoGixlC/q+/2UzX5DSU8k4KgYJPwZRZHN6ujUAACnAVfG2+5frnUzRnwYSBU0gAxNVMMJWE4NMyB6/Bj8B0Dt15YVAPihXFIDFaXplMdjvcdmgUoGboey+eaL9Vj2cRDRzeTXyXx9kAQ+yDAwMIvz7dRVwiEp1WGWzk6COzAIVg5cAIpFi+MMg0KJJAI2AiPO0kp6AlXSIViLzW0mf70ok3itpY+V1oeCYzS0ZDEyg4ctDjQQRsHnb/GxTl1mLv6yVtoP38gtN4lY7JDYQMLToievQpYcESQdZCAOwV1gygJNPtVCPJPFV05jQ4JSZyX0KNr0K/1EVQEtYMvD3XzWBw3rmFU70vwIUQ3avAVqdhgOos1YzSNG4KkwEhTF2vt4OrGBosBYgkZpkaIAf2hH0XfRBK7INykbHhmhjYkO1cbQJtlHQDtNetXXrMLDfj+r9h/0k0vNTKAsv/0xSPVbdVR1UHVAtUzn8S/ub+1fxkHSfet/kvvF94n38J8zHl/fO3Sy7GQ4IXCszcEHggBqQRhDQjzawOLUusLEzPL9GxiZ4ADrCpswcyeatpRU4bgvQy36eTnE5BDhxDVFnYD070Bfy/wyAfql+9QCJUNGcuWLba9qUPvaW88MUaCUPLF3q9RhUab5IBeKE22iJViK1hu1wCATKOJjtwhYSgQp0wbtKQH2gAYUrUbBkSUlbfs2fa+gr0IHxqAS0iH6DKyuBQeyukxbWeAmM4k0UQXWV8FDVJDCJh3XDY/4J+cee09ieJPlfv7NK4oA5uxYoDzTleP5RCcyie39XAovYu0ffrRJAd/v7LFCaBFaxN7bYszq6TWT8SJ6wabuInlN4zJ/YcxoCY6KDEZgEFahVol/oJwiVLrA8r7F6IbAuqFkOxuI+1hcqPOMU0WdedJd9AhNgze4ThO5j5eQWEXR+erjYR7prjaCD9Bp0B+vWxLQkrtiBKkWaIm9alRdppN/01NJt6XvUmmfRd727TuaODgJqiy2T36XDK2L0nbLi4qS7UaoBtEZ0SKGDm5VR75A8idRMfVRW6WsCYqQfPDEDYqQe6xirj4UQhzEI6PomX8jMUc/XuBWQTBTZd8X7DYoDqkq/q9fpT2991Bn1IHZ0twjqZp3gUwQUrrMIWtdAr6bd9SlENc7qfRrRbHxAZxC74OpJhEQoJDAAkMd0ttgODFRPZaVm+AONdm0HhA+g+/xGDANBTG+nk2CAqnRTjXoilESTE1hRlfaaD7qMAk1Yu1ajBACmExj1AdimGz8miAXySUij18jJLu7sLPY2nfPN2J+9HxZvBvFgxzUmbRe2tprNK3e965yrVkdj56ati/6ec6t5u+37nWLHj+f4edGh3gkc32LRjc6SPB+fexa/Gl/ditX70i121htXfPUt75xxjvIKGx14fQfhG9HC8R4e7+pzEVC1jFDdDRmCLHOXhnboiRdUvQL5muHL7y+vIsOzAzU4LUFOuMNw3ikiiLd3raBqfvROb3zvZu6NiLE/jKbKU5sb3lg3qeoa83eiueo0yN7PVviWHxN3Ve+yXKEA8ku2qvtyTHnZcfkAe5XmSSSElO/Ae2JkCRc0ZQiqIJFSIFmXhGRIjC5YfldFMsaQCMim+sQg22T37Uv0QIBtXPT0dl46fM+e4mGT1drZiZrduNPXpdU7wk5ESNhh5/iauzZO2QPZAQV0GfbaRrJEv302IiORM5XFQE6ojkFGVAXWDoaEwmMGGXeGhPXQqkjiA5flcPGlw4mALZF06h2GDN24kU9CqZJzboyJS7dYmAiZ6i57CDtsCKww5JSIfucYNQ+uMTCPFVLA92C/bSSDmZkejzvfNvygKpKi+bL+JvKCKSELISFnVBirAOVCYWV9CbxRIKPL967K1Ho9hgyIE/jMdJ6FHFRCOS7GVgThY9GEgsb8fFPdtGg+29XrHEsKp38b2ssfOVEj58pee1FYJCMVCPuUHRc6N3JkmsWYN6haZTMs5p5UE4XuCoKOd42/GdphTq1aC9i83ZRm1zvZvsszjIik6p0+Di1jOF/5kZ5/jCu5NVZSsVaRei825lpBTZ5EBd9da2qEk+RzhLm+gJJz9oMuoet1eWNMDLocMtdmKEYG1l1rL9HExD0c2udWGBQuco/l6p7kJpfn4urIoNQ6MLDO9TFfjf7APQC6nGLDkXN+hcHRYve4FClq7+tSlH7ti9JAfaPK2jm7rhi/MnSPMDRU+UdLVCGb/+NueBo48XzugZP+4dEIZK1VRFg0hmxmCFIMJYSL6k5vsUka7HNEqDmu04IpB3LA+3wqrHlCMJou6+ZEqv0Iur503xx5g/XGlI2iZ0ObxQYgNBsvV1ev5AzROCJhDwO13XT/R5+pQBx4youYarLUKimtVlwpziTbIi1F24jof4FcqeNerYQ4pS1GlcMd8XiN64vmnjEDZQsXYkd69OsctblM5dW1yvfsZfhCTD0rILTI1vgVN1b9IobP8Q252BlCT700mqQbu9+skrK4m0mPqtZCDzTJ9omQfBCbeEMJCmmGsn6DAAWj2rqxeKV59cpxIzoX57raWe8xVp0GCP0x6yTaVdhjOoIgmkhBuQAYglJetLHxYMDtB/P81qGzUjdVqKOq1s84smuyzlnfLM3MRlBDm67Oc0APyObeEUR6IzFvIC+7vRB6XJBm6tBZ9cFBuOBsYrlQ12QUd9WDSI2A4YzEYmAF1jaEAX+ksW8p7OoJu5HYHG7rDVtZREoKX1E3mpnXu2UbAYTzNQIylrjWIvsPhK4f797aEg7SKs48FDSQna3KXcjU5p295KqVcGYb8ERtzzVSE3kORgvddKXK2NjbIdE+NXOt58aZHl0dHSzsDdYXdVmVFUDt1PWLNF9h9SsWot6JFm+VOAtR6wVSdT3XWr4R/WpDH21qBLBz6w6+GleJXmcks7e/SYHbtZ7YDfUHLU4lw5UpzTzz2unQ2N0xw7NTkZ1SVtQwTsAumTVCuNqaY07HXK0vsUgrG3W20JjDipk9VzMbGheyiJhsalu1d/Y2ypaciqCpYJ6AN2IXvxr7dEunI7x3nZ5ghMAA3DIGlhoN2P+777eGIb2nXPTfHGfT+6VUkWe8MWNmcNtcf73i3JUmJaHzU/WXe9vZ2CVl0HxTFa+SnLNXYpVxAObLCizW/papk5PpLXssFvNllZ+LfxiRRHB6tOvAcjqdKXsNJwKJiK9xpIaFwXnU2EUKVwzE7/yM7Nxbf06wcNSdyDbzALcyN6wZG7adpBiwZixaz4lmvQwpJ2GztZs0ZyPbd1LVvCbvODHusohOsbWh0ek0mwdmR3m+FDtbSrjQCrK8ObFsTqmwInN09KsN2QB/f2DyiEXgAXIkOdsIxdBJoLv2tB06gutt0fE3z5pGf/7URnldbZOsUEYsrvr09fHGi0nLe8MWV35/Cle8MTftSv32if3225XdoMNS+w9WtT534v2uWNfI9wWGIWMJzbaBhZ7LOb+b2jTMkynWU9alDxU4Nb4/R4TlDj7/J2fkE62VC/be+nwbF57sSB+pskpO16grYjxglFROvbgTq/q3vTq8aH9t1cyiJV2lxms8vPOGfZdmzRKeRtSLe5JGPAP5OTyeQhDI1FjoHL5JnDbXv8IlwYQZF1DaUWjt/A0+cbXqQwuzs9oyD0ubUeg5eYyZlGnXNmV0gci4RNQsxqw+Mcd+odnp83f8y+IvHrVotluFxXAkWF9zbwmW81Cv2LPJ8qgjxx59+ad7tL7V1otZ6pZX1Nv1MlGFeSF3yWV44r6Je48mShROp5ycTjsRv5plzbbn9kV2usrq7aQ+7TXxFUJJKt6c3mVDVseu9P3R778VRzbUZS1Ycj8m3uQ4eUZ6LueVft0nwz2fi79LtpPOLc5dnFrMfT5aXugUIsuhJ+dgcd6yBnEI41KbxXJS7hJKREBTS4ugwTu79zwl1ZhXGi+Yx+20DVnmN+Rq5WDSndxi/dBg2KH8QHmTasGL4C9V42brPQTrPEh7H93/0+C7NHka80COO7bsjdNgSUZUQobR42P0Z2vnHf7blMQKYwYrSvuDSmcH7myuOJAXfu1x34Uax6rwqMyx3C2FX9pvtRybVZ3tU2F9l21ou3O1o2VNbQQz0ac8K5VeLSestsOlBYb1RogYNZEOh01qLosv5r8yaENpbMuWebwb2O9x2jrBf1V3t6jVIWp1zFK78MBWrKDJK3u+kTvO+b32KdRmqDAbTtXYZ+VefmWs+4cl2YDwoGU4N+6iJZ2Ol4QQ7WeNjGa1I8GHeROlwAZ1XYayJO6yaM1Ak70fYYmPB13QCWrBnQKxwBNwKz0FLuxkL0anpxH+aeu0dt8UZEhfXxwRzCRxThWwqxY0VuERqid8GnyPXXCKxAlmFoZvpNNJY3iJbJwg4qbqx4cyUsedxp0YqSHx+qlcgmhcIhvDk2q/edEPD3B/resShiymSI/A5RRHrKcbktIeIfVCFXnKjYXhQH4BtYGXB0rmr75IfRnT5dCSRAwiWrCLFq65QH0VM2G3o8nALNqlO/PV+LxkHtfF5daTXZaB+tKUWIxVnVjCjXv43OtuPHc5lv2of8gPlwj7e4MVYtifEp+GEyufgxKu6x5ZSvVKWVNc1sOb0pO8e3Ytg3az3diBkXeLmxefavMa/EdzEFAiZxA5a5J/hEVYVlxwVKjDW2p31LChr+Zp1AGdnqEAwpTCi7vuAPtkJgZBdHVpDQ0K6jwfoohO+Q4z/Z0CyhdeSRpkEf35oADniAO78fMiB7Mdv/4pmyeWHHxWONVhmY/SaY05EdaZsnrHxYClaWpUeVh2RIjANurWu4ErrXsu/ujsPtS8O32bBfVTcmv76satikPiKUj7qMKm901tbU3FwSzAab2GtFjB4oumNYOw189OJZYD2Wcb3K9ly23RGrHa2nWJr9eYjbu9Dg+5xBzYllgKemSckMZXo/FzY9mkxDQYHHOPuv4jbIIBRV7mGiTfzh3NLlphxq3NTek4c3P1js87qvSTDb7QvHI0W0zo8GEwSHugtv2RG71oKpSDP5lHzD/1cVecjvOtfZDeXkP3yg0ke5renJMfTlaK9a3B3E/VIrI9MJ+LIhqlg6NhQh7+WUgMrco8TnuznoFRTaitwQpeYeyCBZFzJUNjYUIh/ntIhnMVTeH+wfSRe4/hjG9uRBc4s6gOhgGGT6quTQcYOlD1yg3dE85eDkPJhWq9Pe4akrd1asXxvrcuMbK3f/7niUAlTdYSg/vnqOE4ERjaNbsIDGdh+JZ4vdol3g/nPTW2dSmcTP28hocU3QjWPxplMSfgUFqcJtWZSAxZsUINz+FhnBnOPEwkKvdu6h2VW2/LXqcedUUA4O8QE9FPAxOBI23xVG98TkNql091OiK2jaKmxBZtHcEfG22Q+IX/SIxyRJmn95MqfJ0xqoUYnxmfJ2m15ychhVXEyU9IdyilSpIwIbK+OIcgevzdjWJb963q8vrE/nn1gTy5WlD0FnFKGkviejPGVeGdGlXYLLXKNGnvsP+yR9DyIcPlQod78nsO94vBk+9/qHS31Jt8uZJYkWC4VCt5e4xEEoM6pEkOnEqXTenX+rHcvHWz3Zd1QM7FbrU1C7PjWpIOh9AlEWLbX1Z+XMKHTufWcAyRV1Ddu3U/4cT2nkie3Y6slI+rmdgdMelnAuIpoHEf9DjmHHETXyz2yVvsJE5KAoHu2p20LqB4nU9+wsrKhMX4DAmkpWTKBEtb1kXt3190PyfonsXax5HGPRMhkq+NZ7E/cbjGU9dqb+BlTijgr1+sx6LO6X3/n7mjMTtRIIuh+NrY+FI0/qsOFeWw5JQfg3TpjpBguboVdb21scaWObSFGSabUMYm2veKi6b97r+J8hH+JOxjUjt1zcFqAS5CkDbrpSfxW3qTHMfMx+SMuUjpfuYk5MWwfRxaHsq4Wv36g+6m3tGIX/fQdPv5W/ejdx/o2yNfG1DPr/um5MicNtdFRUZKJKGcYNxgS3KfGKvDz9f6Wkjjpwe6/Ycwe7NjdGJiQl9i56xjximGbDFIuabkzkImulXs/RbpvjouDAXQrMrhNyC+70VU5O1TY9izHeVTVzNtOAwR/+iGrmdbKjObNsUaob6+tp0/RbOshcqkxXODK0Jd9Edj+sJ39InnFe3uSxooEzA6g2fkkFGaVOFJfKDCDM9Ctww8qH8Z7ynSKiclDiOrM8oQ2vWAxz4votY9pfb0/UqSvB498H6wvD72wnJlbNkySf8RfMzjeUZmgaP33w9VzIk9v7w+tkTeW24V9YRQb2QOSZd0OiW6aWCbSLhH8e7lXhIFdGfAB/yz1ThjLJuhnlZ5aTUUhdOFsDqgUMJS6Ni/dNdgBLZH/+7gdU0+PguEAQDUIuh+AgCAtQC5RkfBdEixvQ3bdDGvvaUEKuTWY2lj+j8gvTkcP/cKgH2vMvi5Ih40WRXEBErJopnAbgicInp1FHLciS1M5uzc1H2Zo1Yi/qXFMpcysKaeEDrmZ1ABEFKAq2rPqLYU2GQxzJoQk8dOWDtEE3AYsDngLLb4asob4/riQhk1iVJit7m44A4mMhlipv7BYLL7xjCxIcrmvXnzplpO4XOUE9DMkLwidRJKl/K70NaTRTGB35hwPFpGEvI484An3PvGuD+IJUSJFBOkiJPmplwi44opswIwzYgySu2UTEqKQhTAA4xi4ImMvN7FLeTbUgSnU3cF1fukNm+c91BmqIoCoK8i5cmBfJUYwYSH6uX1L/9TzXZyJcizh7gSkTXw1WSE6+7kiFpxOMngXWXr9zUgJHAfw/oE9BBIES1BqhlAGBTFQvFlKmmuyklD2yylGfJCfbIrd9lVCICKuDTU3pVCtQffT5UXtKpBYMB6QoyyGRGtAA4xQ8aEem7Igb198xzCgD6HstBXPoAecWE+qtxQGUPD2Ow1tSZFrEvTG4BTfdIttCaFSStqwkE3S4dK60hNa8iNEzeQSy1SGPv9LqAme2J3T5ZjtFg9N+wZAS6KjXjjZPs4oRWaHuibvDCBFYR24Emt8HrgIIhBhZYEnLGRQfbwqo3eVNGtnZXGYfEj6N1CwezdpId4EqWZwaRABDlsNx/PPRkeJceGTpSvJVN3hcyj+TFk92AYvf3BflZH+wfdOL28emMnURE0rAloaxsVMuWDg+cqfzZcPNIGG8vhLrMyeOCL6nb4kxpx7oA65BPArGMx1zuLJXYz3JA67ajhxgJ00g1ssc444EFo6Piwmy0cV/q69v3Pf3+jYvTyWuYo1lPxcC1IUY7QyVmOM7kGkTzMoGMg042DoiBaC+mx2yI6vB3qcwZ7GZUzHjACGC/rHIxhAKY7ADonwPuk4iIrJg1xDmhWsAQPEYePczlHEaIos9nw9wsMnjxnFYaoCFZ2umplJkvQK2tQUlx6goFxlHI/h4h7WcrISAINaOCMlYWWkaCQYcBwkNZOXwGyO80FHLGQ9jSMJvgzB9kv3FBlopllu+J7GFY605OsaGEEJS3QSi4jcXHgtnx1XgN7zngsEkdTmfOVVuBcblDKiQX1qMS5IotqgnVc1WlWN5pxTJMCEpIWY8CqG3jNC/vzEkUwtPlXIumTIHJjhsw2mtMiHuDm0oloJyIcQLCmVHqtUfMNRU0oq8bW2k0QUcO3AEAqxiOUNf9p+dWwLw+mMbBG3U58zabZ3EzZPvi6SC2VRzby5TIyJCMH/6JWoD7ENwFJ4YYUxYuHGp+bz4KFTm8SN0fjk+v52hVCwCJmdYj3IrcsljrDyl1HJsDZCp98gbElIetNmhgHNCSF0eCpT8AFXeAkOa9WkKdOmsvdrZzoFMZ9bZ54iJT2zRsuA1eiXjJYnNXOpE4LD6Kesu3Tjgza3gEj3IfQFAC2eWhFjRAkYJsBXt1qlZQpyEmkdUQm82I2MFGG+hbm7e0RhtpnpbGTLYI3WyTdX4xpW61dfz3OQ0Ayw9r19eXf2VWjl+GdPQjCKuVyXYO5mnsiRNFaYPCD93J6HZOEVgDXB6qhEgYyBNSRSQ+lUy5ruoc1yBoWqE6DITzghhgDQDoQWnpXTjAluIle3I9hSkEdQ5h2BSQCHlSgAE0bs2hSZxzwrQijqSpNAmFgk9tocrglrdNjRDgzODkOXOSRJiqhGXwTMl/rRhnuxfghh8hgA3qzs3hUxx+Qfk+9sxUU+AENFJixDu5wP3Z2Q++UUscUyijPfGHjQHWoaDRTeuCgdvEcc6Q5zTGjxpr3kypTD3LulahkEiVQ0Uud7aAy/o0xQW5aVLDYd4H8NGHG/AQj4mIgJmUWXTQC2qDNQRjZsbGjQw2NjJgRyrHnXQeNRHVPA8ctGFrclA5ZfjvWipfpoTDV9pf/Mo7tai8BAxYdSmZGPJCMQFTWpMYPHtlOQBPR2iMkhAhz2NYDJd6ZCNc2cEIMCgcU4IorzPmtpGeVOEdLxGWJWzMW3I9oZLIoZothQvSdAbjJIByshu+TLG4wZPnYtfqHAOE9rGoBVVXfUDTy3JpshAJs9Y3GdDtCyGI45mIaloHN8gSZ7IgA5YkI/IsLi9EvorIyFbNGWU1hUDPhOA3MIKSYHtaZgkBUlwIwKELCi5YyNCEi6dTz6XMiERT4c8NML2NNxwY+ibFJTJfzVOhklbhy78vxYFRY6OGePdxFBeQGo/Ttm2idvj9N7prOu9lpHR4+w+GVMfJbyL1i7qYcJ4dXmh+hHTu6rwEVIXKy/3jC917PgtDHPf+4HLFy/DLeOsXv/3NDKcMEKDt/9ydhFVa3vb6W+SlbJz5eDfehLDb7kli2UP21H5PLLvoJbl0YU/X3uXpDdukMA9R3ZIg5YPa7jPnBKvek9oAUZs2ioqRNJgF7yG7jduXjkIFi8HtIyTBFdSCfwSxiDrAOFFXSgSmYbiW7EmMJZvKKHyvqeBWAl4rIYJ4i+nyEnDOsSYqP3Z2Cmm+ojmLOVZ3oLasKCQg0OlH7jsojowlBHhrWZMG8ZgecIl/090JhUTzPDKTZsjL8Ks75B+PcdGWcxWuqsTgxJfPAIMmQ98O4DLNML1eT5e96TK+E5n2sT+7xGEfsOCUMq4LxtPaKqR+y/DmvX8z5V16cNRvSNCt8xYZbduyqW5tcdfXHYZxk174Pl6WSXvbBgkTltO6rI2i5gMXKsXpV+jCUdpHtOQhiXr9NGHLbLbM8dV/vaF7vyH8UPNoJT33HPY7qH9U9Zgtr+f5sflGmx7Tsh5wMbabqmIr1hmL9uLm11wb8SIpzMogZaStvFCFB0fdUVmWA6CylZSjoRG7Khd75hwAga49NP7R/hwGgbtrf528Wpur4/Q2MDsDEsjHhf9HAH5wiwngoAgsmI42mvg6guvGh8gSfDcPyMolE3YVfvaTEOy9sjirvY5kuAF1PXQcKG2CmSYE2Uz7FV/vlFOqLTxVba3vldLnGeI0yrbRrSXNDVoxbYQqTaYOyPpWtaOxeKJkGHlkMzARIHfi73Qxk1VcJir4VbEnc27SBBGQiAVyaPwBpdQX5fEUZl8i3XFgAAPemXfJZaSwOHpSsq456Iv68nJHNz6UnWYVU1RnhpgOLA3W0Q/8GAIF0JgCgbb2Ch3opznsh1GwjVPAcoYPPemHoRLIXlmbMGR1HLSxAE8/soYUA9UJoW0mo4D5CB6/1wrDwrheWUZg/WhztWAJyxfJkKpFFwYpI5ItVqgDKNsoXg5sYmR2mYm3CijQwysks3cfwpdYgiszMKU8CoyqwS7YkmFzPoWww0V98buRp/lNF7S01tK/wYPu+Y1ZeUFJVXuKLo48fGECqTpEMJQqlgy9/ELGlEgo5qtYMLQdfDSEBUENDM2TzkYaavYwjVSuSmKdVWY1ks1WEmAh4FfIuVC4SDJ7KhjeaOJ9MhicTmo2aIHaeTEB2zcJdNwIFg0BzCqJBpP8GMn0GDBkxZsKUGXMWLFmxFoAjRao06XYGCnQyYsJmW4waN+YDrAwMJMik1QYNBQ4yIYugfYOv8B2xAwUGJiQhBV2ga+gFMUhBDv0wCMMwCuMw6a8qznNl8plPPvd1mEymp99LsrYJtKzQ22Orp0+4zRQq8tIvhrp5uqKgWxsTX1KsmIybUa+sKUntitW2ZxT0CrKC3kF2G1e9pFgxEbklV3Oyb0PuVhCODl7K1JzkrKW22rHL89V628/HtBNU7UB6hXWzouM2AbJlY9OyI9DG3NhVC9vYc90mRbz5xuQBtuNgY7Va26g7riIb+1A6fmPPLAAAAA==) format(\"woff2\")}.dcg-mq-aria-alert,.dcg-calculator-api-container .dcg-mq-mathspeak{position:absolute;left:-1000px;top:-1000px;width:0px;height:0px;text-align:left;overflow:hidden}.dcg-calculator-api-container .dcg-mq-editable-field{display:-moz-inline-box;display:inline-block}.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-cursor{border-left:1px solid currentColor;margin-left:-1px;position:relative;z-index:1;padding:0;display:-moz-inline-box;display:inline-block}.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-cursor.dcg-mq-blink{visibility:hidden}.dcg-calculator-api-container .dcg-mq-editable-field,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-editable-field{border:1px solid gray}.dcg-calculator-api-container .dcg-mq-editable-field.dcg-mq-focused,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-editable-field.dcg-mq-focused{-webkit-box-shadow:#8bd 0 0 1px 2px,inset #6ae 0 0 2px 0;-moz-box-shadow:#8bd 0 0 1px 2px,inset #6ae 0 0 2px 0;box-shadow:#8bd 0 0 1px 2px,inset #6ae 0 0 2px;border-color:#709ac0}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-editable-field{margin:1px}.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-latex-command-input{color:inherit;font-family:Courier New,monospace;border:1px solid gray;padding-right:1px;margin-right:1px;margin-left:2px}.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-latex-command-input.dcg-mq-empty{background:transparent}.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-latex-command-input.dcg-mq-hasCursor{border-color:ActiveBorder}.dcg-calculator-api-container .dcg-mq-editable-field.dcg-mq-empty:after,.dcg-calculator-api-container .dcg-mq-editable-field.dcg-mq-text-mode:after,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-empty:after{visibility:hidden;content:\"c\"}.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-cursor:only-child:after,.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-textarea+.dcg-mq-cursor:last-child:after{visibility:hidden;content:\"c\"}.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-text-mode .dcg-mq-cursor:only-child:after{content:\"\"}.dcg-calculator-api-container .dcg-mq-editable-field.dcg-mq-text-mode{overflow-x:auto;overflow-y:hidden}.dcg-calculator-api-container .dcg-mq-root-block,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block{display:-moz-inline-box;display:inline-block;width:100%;padding:2px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;overflow:hidden;vertical-align:middle}.dcg-calculator-api-container .dcg-mq-root-block .dcg-mq-digit,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-digit{margin-left:.009em;margin-right:.009em}.dcg-calculator-api-container .dcg-mq-root-block .dcg-mq-group-start,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-group-start{margin-left:.11em;margin-right:-.01em}.dcg-calculator-api-container .dcg-mq-root-block .dcg-mq-group-other,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-group-other{margin-left:-.01em;margin-right:-.01em}.dcg-calculator-api-container .dcg-mq-root-block .dcg-mq-group-leading-1,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-group-leading-1,.dcg-calculator-api-container .dcg-mq-root-block .dcg-mq-group-leading-2,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-group-leading-2{margin-left:0;margin-right:-.01em}.dcg-calculator-api-container .dcg-mq-root-block .dcg-mq-group-leading-3,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-group-leading-3{margin-left:.036em;margin-right:-.01em}.dcg-calculator-api-container .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-start,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-start,.dcg-calculator-api-container .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-other,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-other,.dcg-calculator-api-container .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-1,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-1,.dcg-calculator-api-container .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-2,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-2,.dcg-calculator-api-container .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-3,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-3{margin-left:.009em;margin-right:.009em}.dcg-calculator-api-container .dcg-mq-math-mode{font-variant:normal;font-weight:400;font-style:normal;font-size:115%;line-height:1;display:-moz-inline-box;display:inline-block}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-non-leaf,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-scaled{display:-moz-inline-box;display:inline-block}.dcg-calculator-api-container .dcg-mq-math-mode var,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-text-mode,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-nonSymbola{font-family:Times New Roman,Symbola,serif;line-height:.9}.dcg-calculator-api-container .dcg-mq-math-mode svg{fill:currentColor;position:absolute;top:0;left:0;width:100%;height:100%}.dcg-calculator-api-container .dcg-mq-math-mode *{font-size:inherit;line-height:inherit;margin:0;padding:0;border-color:#000;-webkit-user-select:none;-moz-user-select:none;user-select:none;box-sizing:border-box}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-empty{background:rgba(0,0,0,.2)}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-empty.dcg-mq-root-block,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-empty.dcg-mq-quiet-delimiter,.dcg-calculator-api-container .dcg-mq-math-mode.dcg-mq-empty{background:transparent}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-text-mode{display:inline-block;white-space:pre}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-text-mode.dcg-mq-hasCursor{box-shadow:inset #a9a9a9 0 .1em .2em;padding:0 .1em;margin:0 -.1em;min-width:1ex}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-font{font:1em Times New Roman,Symbola,serif}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-font *{font-family:inherit;font-style:inherit}.dcg-calculator-api-container .dcg-mq-math-mode b,.dcg-calculator-api-container .dcg-mq-math-mode b.dcg-mq-font{font-weight:bolder}.dcg-calculator-api-container .dcg-mq-math-mode var,.dcg-calculator-api-container .dcg-mq-math-mode i,.dcg-calculator-api-container .dcg-mq-math-mode i.dcg-mq-font{font-style:italic}.dcg-calculator-api-container .dcg-mq-math-mode var.dcg-mq-f{margin-right:.2em;margin-left:.1em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-roman var.dcg-mq-f{margin:0}.dcg-calculator-api-container .dcg-mq-math-mode big{font-size:200%}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-int>big{display:inline-block;-webkit-transform:scaleX(.7);-moz-transform:scaleX(.7);-ms-transform:scaleX(.7);-o-transform:scaleX(.7);transform:scaleX(.7);vertical-align:-.16em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-int>.dcg-mq-supsub{font-size:80%;vertical-align:-1.1em;padding-right:.2em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-int>.dcg-mq-supsub>.dcg-mq-sup>.dcg-mq-sup-inner{vertical-align:1.3em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-int>.dcg-mq-supsub>.dcg-mq-sub{margin-left:-.35em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-roman{font-style:normal}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-sans-serif{font-family:sans-serif,Symbola,serif}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-monospace{font-family:monospace,Symbola,serif}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-overline{border-top:1px solid;margin-top:1px}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-underline{border-bottom:1px solid;margin-bottom:1px}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-binary-operator{padding:0 .2em;display:-moz-inline-box;display:inline-block}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub{text-align:left;font-size:90%;vertical-align:-.5em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub.dcg-mq-sup-only{vertical-align:.5em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub.dcg-mq-sup-only>.dcg-mq-sup{display:inline-block;vertical-align:text-bottom}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub .dcg-mq-sup{display:block}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub .dcg-mq-sub{display:block;float:left}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub .dcg-mq-binary-operator{padding:0 .1em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub .dcg-mq-fraction{font-size:70%}.dcg-calculator-api-container .dcg-mq-math-mode sup.dcg-mq-nthroot{font-size:80%;vertical-align:.8em;margin-right:-.6em;margin-left:.2em;min-width:.5em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-ghost svg{opacity:.2}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-bracket-middle{margin-top:.1em;margin-bottom:.1em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-bracket-l,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-bracket-r{position:absolute;top:0;bottom:2px}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-bracket-l{left:0}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-bracket-r{right:0}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-bracket-container{position:relative}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-array{vertical-align:middle;text-align:center}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-array>span{display:block}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-operator-name{font-family:Symbola,Times New Roman,serif;line-height:.9;font-style:normal}.dcg-calculator-api-container .dcg-mq-math-mode var.dcg-mq-operator-name.dcg-mq-first{padding-left:.2em}.dcg-calculator-api-container .dcg-mq-math-mode var.dcg-mq-operator-name.dcg-mq-last,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub.dcg-mq-after-operator-name{padding-right:.2em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-fraction{font-size:90%;text-align:center;vertical-align:-.4em;padding:0 .2em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-fraction,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator,.dcg-calculator-api-container .dcg-mq-math-mode x:-moz-any-link{display:-moz-groupbox}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-fraction,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator,.dcg-calculator-api-container .dcg-mq-math-mode x:-moz-any-link,.dcg-calculator-api-container .dcg-mq-math-mode x:default{display:inline-block}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-numerator,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-denominator,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-dot-recurring{display:block}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-numerator{padding:0 .1em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-denominator{border-top:1px solid;float:right;width:100%;padding:.1em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-dot-recurring{text-align:center;height:.3em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-sqrt-prefix{position:absolute;top:1px;bottom:.15em;width:.95em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-sqrt-container{position:relative}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-sqrt-stem{border-top:1px solid;margin-top:1px;margin-left:.9em;padding-left:.15em;padding-right:.2em;margin-right:.1em;padding-top:1px}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-diacritic-above{display:block;text-align:center;line-height:.4em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-diacritic-stem{display:block;text-align:center}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-hat-prefix{display:block;text-align:center;line-height:.95em;margin-bottom:-.7em;transform:scaleX(1.5);-moz-transform:scaleX(1.5);-o-transform:scaleX(1.5);-webkit-transform:scaleX(1.5)}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-hat-stem{display:block}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator{vertical-align:-.2em;padding:.2em;text-align:center}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator .dcg-mq-from,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator big,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator .dcg-mq-to{display:block}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator .dcg-mq-from,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator .dcg-mq-to{font-size:80%}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator .dcg-mq-from{float:right;width:100%}.dcg-calculator-api-container .dcg-mq-math-mode,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-editable-field{cursor:text;font-family:Symbola,Times New Roman,serif}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-overarc{border-top:1px solid black;-webkit-border-top-right-radius:50% .3em;-moz-border-radius-topright:50% .3em;border-top-right-radius:50% .3em;-webkit-border-top-left-radius:50% .3em;-moz-border-radius-topleft:50% .3em;border-top-left-radius:50% .3em;margin-top:1px;padding-top:.15em}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-overarrow{min-width:.5em;border-top:1px solid black;margin-top:1px;padding-top:.2em;text-align:center;position:relative}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-overarrow:after{position:absolute;right:-.1em;top:-.48em;font-size:.5em;content:\"\\27a4\"}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-overarrow.dcg-mq-arrow-left:after{content:\"\";display:none}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-overarrow.dcg-mq-arrow-left:before,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-overarrow.dcg-mq-arrow-leftright:before{position:absolute;top:-.48em;left:-.1em;font-size:.5em;content:\"\\27a4\";-moz-transform:scaleX(-1);-o-transform:scaleX(-1);-webkit-transform:scaleX(-1);transform:scaleX(-1);filter:FlipH;-ms-filter:\"FlipH\"}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-selection,.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-selection,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-selection .dcg-mq-non-leaf,.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-selection .dcg-mq-non-leaf,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-selection .dcg-mq-scaled,.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-selection .dcg-mq-scaled{background:#B4D5FE!important}.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-selection.dcg-mq-blur,.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-selection.dcg-mq-blur,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-selection.dcg-mq-blur .dcg-mq-non-leaf,.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-selection.dcg-mq-blur .dcg-mq-non-leaf,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-selection.dcg-mq-blur .dcg-mq-scaled,.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-selection.dcg-mq-blur .dcg-mq-scaled{background:#D4D4D4!important;color:#000;border-color:#000}html.dcg-calculator-api-container body .dcg-mq-math-mode .dcg-mq-selection .dcg-mq-nthroot-container *,html body .dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-selection .dcg-mq-nthroot-container *,html.dcg-calculator-api-container body .dcg-mq-editable-field .dcg-mq-selection .dcg-mq-nthroot-container *,html body .dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-selection .dcg-mq-nthroot-container *{background:transparent!important}.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-textarea,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-textarea{position:relative;-webkit-user-select:text;-moz-user-select:text;user-select:text}.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-textarea *,.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-textarea *{-webkit-user-select:text;-moz-user-select:text;user-select:text;position:absolute;clip:rect(1em 1em 1em 1em);-webkit-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);-o-transform:scale(0);transform:scale(0);resize:none;width:1px;height:1px;box-sizing:content-box}@media (prefers-reduced-motion){.dcg-calculator-api-container .dcg-container *,.dcg-calculator-api-container .dcg-container *:after,.dcg-calculator-api-container .dcg-container *:before{transition:none!important;animation-duration:0ms!important;animation-delay:0ms!important}}.dcg-aria-alert{position:absolute;left:-1000px;top:-1000px;width:1px;height:1px;text-align:left;overflow:hidden}.dcg-calculator-api-container .dcg-container.dcg-default-border{border:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container .dcg-container a,.dcg-calculator-api-container .dcg-container a:hover{text-decoration:none}.dcg-calculator-api-container .dcg-container.dcg-no-graphpaper .dcg-grapher,.dcg-calculator-api-container .dcg-container.dcg-no-graphpaper .dcg-resize-list-btn{display:none}.dcg-calculator-api-container .dcg-container .dcg-grapher.dcg-scale-horizontal{cursor:ew-resize}.dcg-calculator-api-container .dcg-container .dcg-grapher.dcg-scale-vertical{cursor:ns-resize}.dcg-calculator-api-container .dcg-container .dcg-grapher.dcg-scale-both{cursor:nesw-resize}.dcg-calculator-api-container .dcg-grapher-focused{box-shadow:inset 0 0 0 3px #2f72dc99}.dcg-calculator-api-container .dcg-graph-outer{overflow:hidden;position:absolute;top:0;left:0;right:0;bottom:0;outline:none}.dcg-calculator-api-container .dcg-container.dcg-no-expression-topbar .dcg-expression-top-bar{display:none}.dcg-calculator-api-container .dcg-container.dcg-no-expression-topbar .dcg-exppanel-container{padding-top:0}.dcg-calculator-api-container .dcg-container.dcg-no-hyperlinks a[target=_blank]{display:none!important}.dcg-calculator-api-container .dcg-container.dcg-inverted-colors{filter:invert(100%)}.dcg-calculator-api-container .dcg-container.dcg-inverted-swatches .dcg-grapher-3d,.dcg-calculator-api-container .dcg-container.dcg-inverted-swatches .dcg-colored-icon,.dcg-calculator-api-container .dcg-container.dcg-inverted-swatches .dcg-color-swatch,.dcg-calculator-api-container .dcg-container.dcg-inverted-swatches .dcg-color-tile>.dcg-icon-check{filter:invert(100%)}.dcg-calculator-api-container .dcg-container{width:100%;height:100%;position:relative;background:white;z-index:0;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;overflow:hidden;font-family:arial,sans-serif;font-size:16px;color:#000}.dcg-calculator-api-container .dcg-container.dcg-is-interactive,.dcg-calculator-api-container .dcg-container.dcg-is-interactive .dcg-grapher{touch-action:none}.dcg-calculator-api-container .dcg-container *{box-sizing:border-box}.dcg-calculator-api-container .dcg-container .dcg-text-selectable{-webkit-user-select:text;user-select:text}.dcg-calculator-api-container .dcg-expressions-branding{position:absolute;bottom:0;left:50%}.dcg-calculator-api-container .dcg-graphpaper-branding{position:absolute;bottom:0;right:-8px;display:none;z-index:21}.dcg-calculator-api-container .dcg-fullscreen .dcg-graphpaper-branding{display:block;opacity:1}.dcg-calculator-api-container .dcg-fullscreen .dcg-graphpaper-branding .dcg-powered-by,.dcg-calculator-api-container .dcg-fullscreen .dcg-graphpaper-branding i{position:relative;text-shadow:-1px -1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,1px 1px 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,1px 0 0 #fff,-1px 0 0 #fff}.dcg-calculator-api-container .dcg-expressions-branding,.dcg-calculator-api-container .dcg-graphpaper-branding{text-align:center;font-size:75%;width:110px;margin-left:-55px;text-decoration:none;line-height:1em;height:45px;overflow:hidden}.dcg-calculator-api-container .dcg-expressions-branding.dcg-unclickable,.dcg-calculator-api-container .dcg-graphpaper-branding.dcg-unclickable{pointer-events:none;z-index:-1}.dcg-calculator-api-container .dcg-expressions-branding .dcg-powered-by,.dcg-calculator-api-container .dcg-graphpaper-branding .dcg-powered-by{color:#0003;text-decoration:none;transition:color .3s;display:block}.dcg-calculator-api-container .dcg-expressions-branding i,.dcg-calculator-api-container .dcg-graphpaper-branding i{color:#0003;font-size:650%;margin-right:2px;line-height:18px;transition:color .3s;height:18px}.dcg-calculator-api-container .dcg-expressions-branding a,.dcg-calculator-api-container .dcg-expressions-branding .dcg-edit-branding,.dcg-calculator-api-container .dcg-graphpaper-branding a,.dcg-calculator-api-container .dcg-graphpaper-branding .dcg-edit-branding{cursor:pointer;display:block;height:50px}.dcg-calculator-api-container .dcg-expressions-branding a.dcg-hovered .dcg-powered-by,.dcg-calculator-api-container .dcg-expressions-branding .dcg-edit-branding.dcg-hovered .dcg-powered-by,.dcg-calculator-api-container .dcg-graphpaper-branding a.dcg-hovered .dcg-powered-by,.dcg-calculator-api-container .dcg-graphpaper-branding .dcg-edit-branding.dcg-hovered .dcg-powered-by{color:#aaa}.dcg-calculator-api-container .dcg-expressions-branding a.dcg-hovered i,.dcg-calculator-api-container .dcg-expressions-branding .dcg-edit-branding.dcg-hovered i,.dcg-calculator-api-container .dcg-graphpaper-branding a.dcg-hovered i,.dcg-calculator-api-container .dcg-graphpaper-branding .dcg-edit-branding.dcg-hovered i{color:#127a3d}.dcg-calculator-api-container .dcg-narrow .dcg-graphpaper-branding,.dcg-calculator-api-container .dcg-no-branding .dcg-expressions-branding,.dcg-calculator-api-container .dcg-no-branding .dcg-graphpaper-branding{display:none}.dcg-calculator-api-container .dcg-button,.dcg-calculator-api-container .dcg-btn-blue,.dcg-calculator-api-container .dcg-btn-red,.dcg-calculator-api-container .dcg-btn-light-gray,.dcg-calculator-api-container .dcg-btn-gray-outline,.dcg-calculator-api-container .dcg-btn-primary,.dcg-calculator-api-container .dcg-btn-secondary,.dcg-calculator-api-container .dcg-btn-pink,.dcg-calculator-api-container .dcg-btn-white-outline{text-decoration:none;padding:0 20px;-webkit-appearance:none;appearance:none;-webkit-user-select:none;user-select:none;border-radius:3px;font:inherit;line-height:2.125rem;border:none;cursor:pointer;white-space:nowrap;text-align:center}.dcg-calculator-api-container .dcg-button.dcg-focus-visible,.dcg-calculator-api-container .dcg-btn-blue.dcg-focus-visible,.dcg-calculator-api-container .dcg-btn-red.dcg-focus-visible,.dcg-calculator-api-container .dcg-btn-light-gray.dcg-focus-visible,.dcg-calculator-api-container .dcg-btn-gray-outline.dcg-focus-visible,.dcg-calculator-api-container .dcg-btn-primary.dcg-focus-visible,.dcg-calculator-api-container .dcg-btn-secondary.dcg-focus-visible,.dcg-calculator-api-container .dcg-btn-pink.dcg-focus-visible,.dcg-calculator-api-container .dcg-btn-white-outline.dcg-focus-visible{outline:2px solid #8c29be;outline-offset:3px}.dcg-calculator-api-container .dcg-btn-red,.dcg-calculator-api-container .dcg-btn-blue,.dcg-calculator-api-container .dcg-btn-primary,.dcg-calculator-api-container .dcg-btn-gray-outline,.dcg-calculator-api-container .dcg-btn-secondary{color:#fff;box-shadow:inset 0 1px #ffffff1a,inset 0 -1px #0000000d}.dcg-calculator-api-container .dcg-btn-red,.dcg-calculator-api-container .dcg-btn-blue,.dcg-calculator-api-container .dcg-btn-primary{white-space:nowrap}.dcg-calculator-api-container .dcg-btn-red.dcg-hovered:not(.dcg-disabled),.dcg-calculator-api-container .dcg-btn-red.dcg-focus-visible:not(.dcg-disabled),.dcg-calculator-api-container .dcg-btn-blue.dcg-hovered:not(.dcg-disabled),.dcg-calculator-api-container .dcg-btn-blue.dcg-focus-visible:not(.dcg-disabled),.dcg-calculator-api-container .dcg-btn-primary.dcg-hovered:not(.dcg-disabled),.dcg-calculator-api-container .dcg-btn-primary.dcg-focus-visible:not(.dcg-disabled){transition:background .2s}.dcg-calculator-api-container .dcg-btn-red.dcg-depressed:not(.dcg-disabled),.dcg-calculator-api-container .dcg-btn-blue.dcg-depressed:not(.dcg-disabled),.dcg-calculator-api-container .dcg-btn-primary.dcg-depressed:not(.dcg-disabled){box-shadow:none}.dcg-calculator-api-container .dcg-btn-red{background:#ce4945;border:1px solid #aa3a37}.dcg-calculator-api-container .dcg-btn-red.dcg-hovered:not(.dcg-disabled),.dcg-calculator-api-container .dcg-btn-red.dcg-focus-visible:not(.dcg-disabled){background:#bc433f}.dcg-calculator-api-container .dcg-btn-red.dcg-depressed:not(.dcg-disabled){background:#b03936}.dcg-calculator-api-container .dcg-btn-blue,.dcg-calculator-api-container .dcg-btn-primary{background:#2f72dc;border:1px solid #4380e0}.dcg-calculator-api-container .dcg-btn-blue.dcg-disabled,.dcg-calculator-api-container .dcg-btn-primary.dcg-disabled{opacity:.5;pointer-events:none}.dcg-calculator-api-container .dcg-btn-blue.dcg-hovered,.dcg-calculator-api-container .dcg-btn-blue.dcg-focus-visible,.dcg-calculator-api-container .dcg-btn-primary.dcg-hovered,.dcg-calculator-api-container .dcg-btn-primary.dcg-focus-visible{background:#2457a8}.dcg-calculator-api-container .dcg-btn-blue.dcg-depressed,.dcg-calculator-api-container .dcg-btn-primary.dcg-depressed{background:#193d75}.dcg-calculator-api-container .dcg-btn-secondary{background:#fff;border:1px solid #2f72dc;color:#2f72dc}.dcg-calculator-api-container .dcg-btn-secondary.dcg-hovered,.dcg-calculator-api-container .dcg-btn-secondary.dcg-focus-visible{border-color:#2457a8;box-shadow:0 0 0 1px #2457a8;color:#2253a1}.dcg-calculator-api-container .dcg-btn-secondary.dcg-depressed{border-color:#193d75;box-shadow:0 0 0 1px #193d75;color:#17396e;background:rgba(47,114,220,.1)}.dcg-calculator-api-container .dcg-btn-pink{background:#b92a73;color:#fff}.dcg-calculator-api-container .dcg-btn-pink.dcg-disabled{opacity:.5;pointer-events:none}.dcg-calculator-api-container .dcg-btn-pink.dcg-hovered,.dcg-calculator-api-container .dcg-btn-pink.dcg-focus-visible{background:linear-gradient(0deg,rgba(0,0,0,.05) 0%,rgba(0,0,0,.05) 100%),#b92a73}.dcg-calculator-api-container .dcg-btn-pink.dcg-depressed{box-shadow:0 3px 3px inset #0003}.dcg-calculator-api-container .dcg-btn-gray-outline{background:#fff;border:1px solid #666;color:#666}.dcg-calculator-api-container .dcg-btn-gray-outline.dcg-hovered,.dcg-calculator-api-container .dcg-btn-gray-outline.dcg-focus-visible{border-color:#454545;box-shadow:0 0 0 1px #454545;color:#454545}.dcg-calculator-api-container .dcg-btn-gray-outline.dcg-depressed{border-color:#000;box-shadow:0 0 0 1px #000;color:#000;background:rgba(0,0,0,.1)}.dcg-calculator-api-container .dcg-btn-white-outline{border:1px solid rgba(250,250,250,.8);color:#fafafae6}.dcg-calculator-api-container .dcg-btn-white-outline.dcg-hovered,.dcg-calculator-api-container .dcg-btn-white-outline.dcg-depressed,.dcg-calculator-api-container .dcg-btn-white-outline.dcg-focus-visible{border-color:#fafafae6;box-shadow:0 0 0 1px #fafafae6;color:#fff}.dcg-calculator-api-container .dcg-btn-white-outline.dcg-depressed{background:rgba(250,250,250,.1)}.dcg-calculator-api-container .dcg-btn-light-gray{box-shadow:inset 0 1px #ffffff40,inset 0 -1px #00000005;background:linear-gradient(#f6f6f6,#f0f0f0);border:1px solid rgba(0,0,0,.1)}.dcg-calculator-api-container .dcg-btn-light-gray.dcg-hovered,.dcg-calculator-api-container .dcg-btn-light-gray.dcg-focus-visible{background:#ededed;border:1px solid rgba(0,0,0,.13)}.dcg-calculator-api-container .dcg-btn-light-gray.dcg-depressed{background:#e0e0e0;border:1px solid rgba(0,0,0,.15);box-shadow:none}.dcg-calculator-api-container .dcg-primary-link{color:#2f72dc;cursor:pointer;text-decoration:underline}.dcg-calculator-api-container .dcg-primary-link.dcg-hovered,.dcg-calculator-api-container .dcg-primary-link.dcg-focus-visible{color:#2253a1}.dcg-calculator-api-container .dcg-primary-link.dcg-depressed{color:#17396e}.dcg-calculator-api-container .dcg-inverted-colors .dcg-btn-red,.dcg-calculator-api-container .dcg-inverted-colors .dcg-btn-blue,.dcg-calculator-api-container .dcg-inverted-colors .dcg-btn-primary{box-shadow:inset 0 -1px #ffffff26,inset 0 1px #0000001a}.dcg-calculator-api-container input.dcg-input-blue-outline,.dcg-calculator-api-container textarea.dcg-input-blue-outline{outline:none;border-radius:3px;border:1px solid #ccc;padding:7px;-webkit-appearance:none;appearance:none;font-size:inherit;box-sizing:border-box}.dcg-calculator-api-container input.dcg-input-blue-outline:focus,.dcg-calculator-api-container textarea.dcg-input-blue-outline:focus{border:1px solid #2f72dc;box-shadow:0 0 0 1px #2f72dc}.dcg-calculator-api-container input.dcg-input-blue-outline::-ms-clear,.dcg-calculator-api-container textarea.dcg-input-blue-outline::-ms-clear{display:none}.dcg-calculator-api-container .dcg-navigation-arrow{color:#999;font-size:170%;text-decoration:none;margin:0 -5px -5px;padding:10px}.dcg-calculator-api-container .dcg-navigation-arrow.dcg-hovered,.dcg-calculator-api-container .dcg-navigation-arrow.dcg-focus-visible{color:#666}.dcg-calculator-api-container .dcg-navigation-arrow.dcg-depressed{color:#000}.dcg-calculator-api-container .dcg-blue-link{color:#2f72dc;cursor:pointer;text-decoration:underline}.dcg-calculator-api-container .dcg-blue-link.dcg-hovered,.dcg-calculator-api-container .dcg-blue-link.dcg-focus-visible{color:#2253a1}.dcg-calculator-api-container .dcg-blue-link.dcg-focus-visible{outline:2px solid #8c29be;outline-offset:3px}.dcg-calculator-api-container .dcg-blue-link.dcg-depressed{color:#17396e}.dcg-calculator-api-container .dcg-red-link{color:#c0504d;cursor:pointer;text-decoration:underline}.dcg-calculator-api-container .dcg-red-link.dcg-hovered,.dcg-calculator-api-container .dcg-red-link.dcg-focus-visible{color:#ad1a1a}.dcg-calculator-api-container .dcg-red-link.dcg-depressed{color:#860606}.dcg-calculator-api-container .dcg-gray-link{color:#666;cursor:pointer;text-decoration:underline}.dcg-calculator-api-container .dcg-gray-link.dcg-hovered,.dcg-calculator-api-container .dcg-gray-link.dcg-focus-visible{color:#333}.dcg-calculator-api-container .dcg-gray-link.dcg-depressed{color:#000}.dcg-calculator-api-container .dcg-shared-tab-gray-underline{text-align:center;display:inline-block;padding:5px 0;margin:5px 0;color:#666;text-decoration:none}.dcg-calculator-api-container .dcg-shared-tab-gray-underline.dcg-shared-tab-always-underline{border-bottom:3px solid #e2e2e2}.dcg-calculator-api-container .dcg-shared-tab-gray-underline:not(.dcg-shared-tab-always-underline).dcg-hovered,.dcg-calculator-api-container .dcg-shared-tab-gray-underline:not(.dcg-shared-tab-always-underline).dcg-depressed,.dcg-calculator-api-container .dcg-shared-tab-gray-underline:not(.dcg-shared-tab-always-underline).dcg-selected{padding-bottom:2px}.dcg-calculator-api-container .dcg-shared-tab-gray-underline.dcg-hovered,.dcg-calculator-api-container .dcg-shared-tab-gray-underline.dcg-focus-visible{border-bottom:3px solid #bbb}.dcg-calculator-api-container .dcg-shared-tab-gray-underline.dcg-depressed{color:#000;border-bottom:3px solid #999}.dcg-calculator-api-container .dcg-shared-tab-gray-underline.dcg-selected{color:#2f72dc;border-bottom:3px solid #2f72dc;cursor:pointer}.dcg-calculator-api-container input.dcg-shared-input-blue-outline,.dcg-calculator-api-container textarea.dcg-shared-input-blue-outline{outline:none;border-radius:3px;border:1px solid #ccc;padding:7px;-webkit-appearance:none;appearance:none;font:inherit;box-sizing:border-box}.dcg-calculator-api-container input.dcg-shared-input-blue-outline:focus,.dcg-calculator-api-container textarea.dcg-shared-input-blue-outline:focus{border:1px solid #2f72dc;box-shadow:0 0 0 1px #2f72dc}.dcg-calculator-api-container input.dcg-shared-input-blue-outline::-ms-clear,.dcg-calculator-api-container textarea.dcg-shared-input-blue-outline::-ms-clear{display:none}.dcg-calculator-api-container .dcg-background--light-blue{background:#d7e6ff}.dcg-calculator-api-container .dcg-text--dark-blue{color:#17396e}.dcg-calculator-api-container .dcg-text--centered{text-align:center}.dcg-calculator-api-container .dcg-text--uppercase{text-transform:uppercase}.dcg-calculator-api-container .dcg-unstyled-list{list-style-type:none;margin:0;padding:0}.dcg-calculator-api-container .dcg-unstyled-list li{margin:0;text-indent:0}.dcg-calculator-api-container .dcg-unstyled-button{font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none;-webkit-appearance:button;border:none;background-color:unset;padding:0}.dcg-calculator-api-container .dcg-unstyled-link{text-decoration:none!important;color:unset}.dcg-calculator-api-container .dcg-unstyled-heading{margin:0;font-size:inherit;font:inherit;font-weight:inherit}.dcg-calculator-api-container .dcg-container{text-align:left;transform-origin:0 0}.dcg-calculator-api-container .dcg-container pre{white-space:pre-wrap}.dcg-calculator-api-container .dcg-container img{border:0;outline:none}.dcg-calculator-api-container .dcg-container input::-ms-clear{display:none}.dcg-calculator-api-container .dcg-container button,.dcg-calculator-api-container .dcg-container input,.dcg-calculator-api-container .dcg-container select,.dcg-calculator-api-container .dcg-container textarea{font-family:inherit}.dcg-calculator-api-container .dcg-container button,.dcg-calculator-api-container .dcg-container select{text-transform:none}.dcg-calculator-api-container .dcg-container button,.dcg-calculator-api-container .dcg-container input[type=button],.dcg-calculator-api-container .dcg-container input[type=reset],.dcg-calculator-api-container .dcg-container input[type=submit]{-webkit-appearance:button;appearance:button;cursor:pointer;color:inherit}.dcg-calculator-api-container .dcg-container button[disabled],.dcg-calculator-api-container .dcg-container input[disabled]{cursor:default}.dcg-calculator-api-container .dcg-container input[type=search]{-webkit-appearance:textfield;appearance:textfield;box-sizing:content-box}.dcg-calculator-api-container .dcg-container input[type=search]::-webkit-search-cancel-button,.dcg-calculator-api-container .dcg-container input[type=search]::-webkit-search-decoration{-webkit-appearance:none;appearance:none}.dcg-calculator-api-container .dcg-container button::-moz-focus-inner,.dcg-calculator-api-container .dcg-container input::-moz-focus-inner{border:0;padding:0}.dcg-calculator-api-container .dcg-container table{border-collapse:collapse;border-spacing:0}.dcg-calculator-api-container .dcg-container input::-webkit-outer-spin-button,.dcg-calculator-api-container .dcg-container input::-webkit-inner-spin-button{-webkit-appearance:none;appearance:none;margin:0}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem textarea.dcg-smart-textarea,.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-displayTextarea{font-size:113%}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionimage .dcg-image-loaded .dcg-mq-math-mode{font-size:130%}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-poi-label{font-size:150%}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-poi-label .dcg-pt{border-width:8px;border-radius:8px;margin-left:-4px;margin-top:-4px}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-poi-label.dcg-hole .dcg-pt{border-width:4px;padding:5px;border-radius:9px}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-poi-label:not(.dcg-tracept) .dcg-pt{border-width:8px;border-radius:8px;margin-left:-4px;margin-top:-4px}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-mq-editable-field,.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-mq-math-mode,.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-slider-container .dcg-mq-math-mode,.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-mathquill-braille{font-size:150%}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-mq-placeholder{margin-top:-.88em}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-fade-container .dcg-evaluation{font-size:135%}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-fade-container .dcg-evaluation .dcg-mq-editable-field,.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-fade-container .dcg-evaluation .dcg-mq-math-mode,.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-fade-container .dcg-evaluation .dcg-mathquill-braille{font-size:100%}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-fade-container .dcg-main:after{width:2px}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-create-sliders{height:30px;line-height:30px}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-create-sliders .dcg-msg{font-size:100%;padding:2px 0}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-create-sliders .dcg-btn-slider{font-size:120%;height:30px;line-height:30px}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-slider{bottom:30px}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-display-domain{bottom:12px;font-size:110%}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-slider_menu{bottom:6px}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-slider_menu .dcg-mq-editable-field,.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-slider_menu .dcg-mq-math-mode{font-size:120%}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-slider_menu table{border-collapse:collapse;font-size:20px;margin:0 auto}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-slider_menu table input{font-size:81%}@font-face{font-family:dcg-icons-2023-11-14;src:url(data:font/woff2;base64,d09GMgABAAAAAEgMAAsAAAAAlBQAAEe7AAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAAgTwRCAqCmFSB30EBNgIkA4QUC4IMAAQgBYQiByAbtHVFB3LYOBDwmHkNUVSRGrP/Lwf0EKlFbX5Jt/K0bCSULxIgmrenpn2EU3zKQfDym9ivw7F95SVtzXK9eagsEsgEkP+8k34T74y3djPyUbFyODqvtjxCSx/x/jyvm3/uexkvk/cSxhKSEMIQMAlh7GxWgBBImCrCFnGwIlariCy1jgmuhaCbOipoXahVXHV0ObHtt78KWjsmXOUsuwXr1IxkCDB8r/Il0Gjs9YFhmRXo/vZUfpK8B7wQIPwRqaQDk1a73WT7kms5WMJh7LAA8gP+pNtXZtfJqlemFvnm7KnmhGmTdmZeIMiXCEG/gi+3LkBT3xXNDdNl0BEqU9whOeHEPEl9smXoj8tvrlr63B387fLaZLgqlXiepuOZaU4hBb/wGI1FqNetRFIC9UiwdCIVli77YcksuvRW7/gT0dLwKbXtgSRAUMFmZmOSwblN7e7piDUIlSmdlt0m7SHT9F8V2na3JcmcWGIDJbHfkhUEw8Lfm6q1fyGsBJKmQ6R0ib5MV7FoFC7F6WOVqsv7375d7P+7S+0uSBpYkBIIShZAOoAgPQOQTgB5MrSCEx1T5S5UdxmAJA8oyXMgKXmgkGhfyKnKsczllS6vvaa7przc56Ktz5cx7XkJWHHUEhzXU5aj3p8WY1o/ICakmTPnmWZZBZUomlzFL6UdYzPzK1atrqw1pcQduC0AnIahNUAHwLqxYQBYvbot6GcIRSxYPTlEQqYa4CcZfnHiYs9whvJ50AQiE0ePJ6D4EBzQQTTYxaRXGM3tKwSiEc8RvxH5SPyIZkQ3YhxJHpk+Uj4yc6RmZM5Pson/xk8A6I5JH/EeCRgJG1GXM4wkjaSOzBipGpml5sDOcuITMvznuY5tmYauKXMIOa3tl5QR1DcGOGS+1gDaCaB3pkg7Igi6aBea8lVbARQwIAHriOskikiIPcOBQJHEXZSAqqVbAvWwrsmWSzGJtcC8ISgK3WR1shG4gHRYgrp4xTirSRMyhM60TWynznYCBcMsgYDA5gEJAjhpktawBtrnKtBmtfDyhVYxt3TlLvg7atmRuCcEThLJgyQeHnRGgo8qNFQ1OTg0Ws61gjmvQDKK775pJGkFCmH+4VmqWjASBgsKGzZ5SjynCYUyQqGTcBp+LhC4GhkBJ6rBmarHjfaZUyMNtT7/O70Nu6rwdncXKNgDb3Pw1yFJp42VjTbXiThz/t7K3qIExsgiCgsTqGcWSQoXN+G6TddmQDCBqShhZaUeX706jRi6JkSIa6EoIqVHEkWk3DmmJLpvPFDV37LoDITUXLuZYh4sGw1dePYbE+PFq/iVWMRPPI0tDfIne3szuRiu3IzUa/KRmdKGMEfm6UR76VSoOJCa0Er5eTFobyMUTjqbdM67MKb4ll+wdBMXPx8er3Ib75TVYErgwRFciFItN5J0dfWbktAwUc1ORkgLeotu7tVkHmAZE0lvkJqlZa2byQNab8V8JJTIzGNHAIRve2Z+7XGnLB+8C93Eg9U/P7WZm8psnF5o7fGoGAERrznGkKmpVFyQ5y4g+39MbyTtdOwugik29JFQHXSktPkPb6Zr1Z14sGqO7wc8VllEX2jSIyvnHLbhjhqCIncxufdMyLEwhkBjSCklNDFgSYmq2Qrb88nBCsg1MivMiCSiQ24BjOCuQ0FCpJq86q1cnyQSdDk0aOTH3d3iKEsn+Upq2M2MtQjb0Dd+cw6T0VzBWMEGdIwX4gRvuRuL5BddFSyzvd0kNpEVrk0WjeaSy26RYmxxLvqrPNBh7hBhk+DtLwig5lg53dN3wAIQR1UgLB8GYzJEu53QbOA01Mrhj0xioJbap08y9vCD479F31sWKVJJRXBwn8iSYCVmw/e71/Ss3RpxIBKUlQwsMc3fzXDwRyuctsTh9Q1YGQtJzd+omdn1WwNlAAKl3hrnuat4fAfXHNsLmx7NA4ndzapn3JaHbUUl8bNGMxXpx4D8pyaxstyiNpHod5WUWpw6iYWFu90pSJNT2eS7NszXz7J8eKHaaJJvjqndy+LeP2d1JJEqZN/EBagnlakfWwY+ver4u4q93wsaSZ/OzLrP/GSmfXQnIyX1wuNpVvWKeq8/rShn6IaG8CvLAR4m7uX4/JEz2/K2zFVGWhmIC9L1Rs/16L2NoTwPz1nIAtP2e3MxBlY09qVngmbVQEwROyW10rV1bxzgvnsIjhFw7a4rHAviggGQTrUSjx2jmW3uaFBoUXsKjfL18jcSCe+XOIIaihwqPrhwI4gvsJXE3ZbF7raissAxRutYUhOsjZtjh+Az37FpI45HiTtWWzYlAeTmLfV5KenSS2tpFqxiZCrR2BpwejEMUuM2cvFk1HoQTKvpWCSndmUMKEO3tpwgpwCbUw2N4V8MCVk45gr3KudiWfGw+dym0sYdAWHXenlm3blfLOvmLlGyZFiUEUWlWKLmw9d8keO75aa3F7vSje7c+aKs8Oah8LZCMbeoYu7OcnjXB85JBMcGAAo1jYWoBSLxmAalg5juU9+81CHkEXaD9+mFwGhuZbUPaIDdCPIQrZ8UBDWDARTeVzExsg0xPuW9Ngu9TfD+mKG8kpFO+AfVRC5gd0pCnGSgZKk+ElCIMt3dqCBOy63xvhpM0OHQoDHhfCuPjEiSj4SHzcw/VT6HcJx4XsaWfTDpZOR8aVv3myfqFp78Ur6cFNZAIitpUnJbeN4SQuEFJbJBzYkgSe48IB9rSnrBYC+MVvkp3zIzxT81TR/4huNKGVMjo+su2pOCSoobuVP1zBZldApnNUzLuSgX9eR2ScP8rtqDFeLLkO9plYHC6ITkCro8JLBrLuGcSTo2EawPo0TP+Hck5ZRM8YGAjGNj82ibyQjOGyueNdEOhSeLVaohzdVZk/xNWcZGXqhXRGNC0250o9kfno+wRL3DtMJkrstslO0XiWvzIJONQaktR4iusmCp9WAhx3cdKywKXBSaq8vFgT4Nz0A+LDJLGNo8x44uAlJoyIC413tuT3ZkbHjImmiIuPbqwNK52Xn1kl2B4oqcJQn5C5Mi+Kp2/LHelX6xK96jfY5uQvyUrLg6n1TY74cPWAJCSIXpVn9a7FzB0uxy66iRz1q1b/eRVuyi+sSWZgxjlbEioEw1WwvB0qch+z4Bn0zgx51YRx9vspaQutdZimDX/vDYGbBO0pDCmaNCu/zIxwkwN/NoVUyI0bIUPDwvQCjdFHisM+4UtqMM4yAMiJ7i+T3grf6U0bfOaLotjE6zrMOsc7hlexmQa+Jz5NQPOlbupVlkQhy4Wf3I2IoqwKdZc94XYaeVrHo+rRSzPZnTuVm8fPDKExeikYyWLAjMJfedkHzZkszixQNlrhvV83HezrXL4dUvvRplBVUPr17rMqzofa9xzsi6+lE7caVYUbheFB8WVSv79ul4QnTy513dOkeTh0O9XA1eulghd2uczx/Na+sX41dplspAd3Wmghox0FcoC/y/GlUU5BupYEI50vV2uiXqi8gcaOEyKxLwpRQ9K20TU0QHGSHPVj6rWUENkC5iGuG4KfJ7qs8JFlc2Ax4MTXryaC4enZtCBGsRZoCoD/PITONucGyMcuOhSSzGGvWCdOa41mx8jOlNcuAUB3QHD22MkVQAzInlkMi4WBWsYo9lsFGulUghMk1WlHq5EvnoGkpPc4e8QO8QQsAuEygIXATAl6VN+RtutZG+S60zCdbTnQxWF8wzCtVXJ6iigKHemMMKAGBilIhVxlT1TfKKtk69ZAAq2JpWJaUMliDXViI4kWEGEnJNbYFWWY6WMSQxQ0CLQHbV/eLqbo/F1JZA7qMZuLH+oHQIkxWQDi+VUk8SKfFCI9URPUstlaNkANk4RyQDSZpDoWI1EVzUOZsa0kNVSYapoBkJYpG9xDyOeV5xIDkyA0SIAlDvwAMje7sRzJbXWowXvCUd0iSK1fwLOlQ68OZBXQykLZuhWX62NmkkGBQw36wbOTMwn2Nz+1PufOGhCV5oZx2WGXa3ia7PsUCwxqo/ZP+50yyHvEmpV8Imdyye+lPd5z0dgmeTuxo0WArvQHaMWm6PIelgpXVF3iMRlHdSH3g0MCF5HIM8x3yRMhdDhJMSicHetTk7M79sROAN58HLLk4UAwNbQMvjWklKjLn2LMLf5S6XoK4stUAAgWLGM7DQ0bWTr0XcFOhQWY92oYer6bq2yRyZgjfmzjUTU90IQHmAO0CR6n1SuC6PS1DyVnOFmSOFm6CEYWMe5GJd5vBX31FsohiSKf2Zt8f9S5dg0xOgAbaEI8C+GmA11wiwgqUxcHcRzyyFgDGAlwuF7Thow5SydLCFZiZxaCgXEQqgkbQi7sGIWPjEoJTev+AUnUChwyGBMxz21wduwJwoM5kfa4zhI2GJ6R2pb15G4CT5tCU2z2+fkAc5qVEHwcPBGXRJKZRWRsTB++YxK2rFQOIMV4OHBIytjvJJ+XU7i6LhRCAE8BrJE3mxV9VMVvI+8mZm7ECCdC03OaiBDUNOT44IkIrhi7y8PfmKyMdVAuIGL2q/ac6pa1fRzurpPTv53fCwiLbQsvV1RFeRkvWY+Un6KG4dRymed5oh4Dmq2Jt/cYaYE17josCcAFpUHSFenHCR+bQwI6yPiLPah7xs+B5MyiHPFD6GBxpqSPl5yOdbMH+ER7K8YGpxjxRaSKlzd/kzBEqi6CY2dCj+gMMWNFAngSpmxerXt5wx4E7LqiES4b9u5CieQp+q9rwzl/jNUNLwL9aS+Io+m6qUP/u0V6RpVvS6Bo8NqaAJ+NnnM8NoJNBQq8yBsgeVbzEGNeK1QY1WfY1xoLKtN+D2a7TsjY+rz+Fkr9vLjmVfYuPmdcE4lEnyc4crDYuREArxqoCwf4yJaXsUB0MwC39PORFemWf3jtTtfwA5eTq+zldF8bg4dEMb/zg6rPBCkPPMenzuvJUfQO0SlBdyeZi11EO06KVTdQTy2Td74+maJZXMJ6Mmg76+jdvb7hqbcG2/juHz7pZIcz/xgRR2KLGE3QpHOaBM00LCElELxFAbVGEy3974U9PxDRg5tc53rEgsoUiCtMO+BBkiyzMZ6E5jeSKnfOYVGttY8fk1RRpO1gGUNU+mpLK6DKHPI9xwA+BR/0/Vb3SjNSP+Mqsb/DyIC67mlXPVycxfgKfyF2lZE2IkxFuX8Y1RuX2R5d0zVIYToCSE16AP97lnCiMcYTKIsrckqgpPA1JJi8LNLUl+rX0hnOGiXhJpKXh4v4DOVe1kAHCJY8r7kHyXPdc5CTERj1dn5sI8S2oEqt7tKEgmgc6aXjvEr3q4e9lO2KJcDXJAE8OyB4Jc7BHVi++0BPlofTACuRNLzM0LZcPruS1UlxV6FuuuSsxY2Jsao6XjfIXjUXBrqHVoUOaTCrW0ceV+kPAqlvCOiijIk+PK+wRUaMF+O7rJFHXsJ6jkTU2l56Pw0JRQdHW+Ex+dGu5dmz7tokpLPZyfwEjrlv7nvHajzYYalXmbikdwIIyaGH0tt0EhKyU96p0y200vHOLFNS7DXJ8ZLib67LTT7UaRyuddhYFX4pfpPAzlrtVWCJ3evpA+CxrstNyu93DdkDsqSLvduxL5mSLZ0WdVdVAsT8qKtj4ZYA5pazrhCksT7UQV7JcOSSdxVGsJyfzMFTrrZMKloCCqB8jR52GqHWo9pUYL8OJPlyRl4Fg/J4lz0Xs5zsZfPUKtZnyhcCUl9fCJwZNDKktfjKteUa2ezh6bdzKeFT7eFTkqN+wW7mQWXdIGzblXbencurTQZhgNG+EcVQRKy8ZOAtXegEHasiVZkiEzFaYKclz+z2s6kyFmxlRQ0SQr3H48e8zD6xNcfGBTdrsckNAtom0uc6kT2oGYrHZa8bVFwmv2MI49uSel9ULuUYmHH0V5mtpL1jtqjM6En1YUGRdTEw9iQzm82RjEV61BVH5cFlHyfPGhH34aV+nocrjRIX0zjB6j5LledwDaH5wYVFnayXVqeFvnAzgvI/8EQr1weQdoZwjxrl1JKXcvx5dP1pkHhWGaOtJZNZnDPip3LMmaREXnWujW0EEnf1uxpy0nqekyqgUpuMzWudNsXyA3MrA0Lj3TpBNml1QyFQ03ooe/POAGUneg2Zo4LrcmGkApQBAw46jfKqe7Bpp3kmRlQDatjHyHABepbHVm6pQM6QxURsNfC86SGScg1FjYA2dO/o9uqXqoUr9PZn02SfQ2gfE/V6KbKKUepyIhxKshPfN/WoNBQ79Q+/l8XKJIePOJ7EF93nbqCmWJda5jpzWZ7anslyIli6IugEfaVUvh2K0okOvgVDx+QbJxiM6UF0D2sWkdJJnopZp6Zm08GwtfUOMw57fcuBf5fHJIGZGD7xIB59QrS3wGkuA5P5s4HWVn0Y2PjChnMYnk3nhfTeANkz5Zv9Dw3hO9ABIde3q5MYqv/hGBf+HNWDx/Py9QYvmmVzB8c5R43ajpxCpZvsiCnLnXJjuctqLd3f3x8DZWTxdZ0KTCY0uExM6a1+hac48mVRi1TyR7BKZifdq+ypPxCL64H1u+eNtycwuU4JJLNqEDGh9gJHhk3bpD29N9LFraSrC0Xh2dm+N+7zhaGJCNFKPAT6gi7lrjeN/p4ebv7FVWgVWk2NMqC+THwHRKm4/7CdUZkF+j1+x319V8cHyQ6XDgd9Ju6lAm3O1rzGmZJWEA0sVr3KgwwdeSndT4aERl6YfUi1+6/+kNk11eYldhe1BMZlrlAe/pEBfksoYNVV7VOfiEXMh1FBFhj/42K9kjfomFbGhEmA/34wErxF9SWKvDY7wl6pHOQtupjLy2HPfFFG7si74yT2Tija9EvWWOsv1oR6hTwu3d8R0k4xgNTWQc09oQ/IpCRLo8JnO3LAYCLrogVESK9rQQW72kdIuS7PFEGqVjvjZVQ4KOh3zh0NCF+Kls+CLsKLiSrDeRkk74VIWWm740YIaL7atfnSNhdyz9wAts21eVrqpllFWmHq9Mc7Ap8u1dRTvJeWUv7xtqcX43GCXhilhirpCYccimgJrYDhqHqWInKermNnofBu3O2zexio47t1Fd99adwaVdqZu3xjAYFSlSsRrEhVxAF7UJltP1t2A3Wo82hcOQbbUivsOcJrmxAKQ8L4JYO1id2xoGvUU4EZOl5pNKCi2UoENBTqLnslcUr6aVM2eFTFMPdlNsNTq1hr+Hj4oeF5fTMdldHBtXzmP4xwdJHZbNBp25sH99p7Pfg1vnO4J+it1wIux9pfi3gIE065FZ/86Z+TfTO6qdMXBajqPd1TaBmDa+5rf+X8iPoLQfGSKgaLdihsd6Bl5q52ojY63nCqtksWqfT3yzXmQMFN7UTlw9GQNic18CupwUkfuf5JvF8PFc17pJEuZYG1cwmlzHt2UqBSkwfZPtNORTOXzsSFjK/bRS20gJJ1JgejIzg6jXWsMypCKuZ2JAlq5LOUZu/NnounadgYqiMWKaTUa6BDQYnUZPXmNERQh52F836zO54tnzSqkue9q/UTpVczyxl8TxVgRxJ4Ni0mCaE2EtmKuF1WDcU36Esa+9GKbdpBaeNmA3JWD+PqCq21XfzFoyTlPjJZSgDjNFKtaFQsBIFVA0qsw6RRvalY2dyxL3R6Ij72Buacd1xaU/WcwabzegjpMHPgTgnyD7OfBI4H6CiCnon8vwBd1NiHVIS1WfDOEm9a9BPeVs+J6RlwnmEJHwITYcKsxY6RB0GqszRqL9saE6Qn0Dle7iQmi8fu/I2WHE7iT83iL9CcxsxzxCaELsb/sDEubxx3+UdMsKqyD9NM767j0oyGbm1m5BfLBp38vnhc5er3t1su9qfuUj0sqmbO420u2prBJ1tRaUxatsZ7M3nODlyazL2ry9lzYx8NF+u9c7GCfpbMfq7pjCxKC+btxIpeol2ek8zEg2vhlGa4cY1JA6vY3NrXFIKKGSZfde8qZy+HiOkZOwMFQa6xZWEV3B2bZVJtzMPODRNkU1IDau6L7jKAPuWk9KpsAqKeiXCDNCoEvnp5Rg6aa9WB5sPhcahqyySQw8UznmmWP9XE1cGoYGqTiYhSW4Pub6R4la9iP53lIKcB4BKqTZBwqkWxhD9Oy4QuxcRMxvBUWdwyLUii0G2ONLXtdAoKpgtxAvTa65MSBEbFVFZCWILg6VsrAu8h/MLM2soQ95f6594xscESp7IFDkhLgRVGwg/sqQaFcgOfdqy1UAC5BJtJIeYw/hWU24GwBP6qzc0Wi21gLNQSmhktDjgaEMU9xPyzl4Dq7GqKHDNYdwGNacCRVDjvrtGAuGX3lDvzdj4NYX25HQ9CuludSAnOH+QfEso6gPWFUZAu6g+NCHGyxvkjiEKtth/JSYV5bhdcXq02SgsI4+OMtw9+PTL5SQ0/Hd5IvALnkB5Lq7Y42ogIt4SUg0qMRBxJkXU5s6l0HKlZeYaun6gBZHAu7e9HRn1AvGn1rrdPjgoPMM1Pv+/xfmj8TCL35MvqMY29FyuGtYu41k6eehwwOiOnLdXx98mNjyULv0HSmnriDmd+AJ5EaeEmZVcXHIEXLSEfZtAoN3hkvgdxBaBbZ1wlBc2ejbbIREqHWnaeTw+vnrAZYVajQJpqBQWdNEDTpJdapBQWphvdvBmRpUsQ82hf+e9Fur7iw40c2LjnrdWvY9FX1Q93Rv4ugH5btCX5XUvSBkvMDl+1JalKtL0S3ALFtdzYOOOBGLmh7r7xI6SXSJ2rnJaZ5ufw2PJaOfU3jZTdgKJ7c1qpPr3TPand0ce2ShQKhci6tDega/SY5AUA7ftVKUCZwVysmlHFsy8i7AuYzBJrXEPNDXePNKYvm0soPNEcwTnOi1hgg0BjG4iqEzqFXtJzZn1ASZ5yGhUSNUQEZZwpiqTKVwEabc0f1HWA+wjSDRYhhWqVmYG5rFgAYEgNZqdC0iEzLPFalSoEuA2HE/bEi7NMJ3cEj1QnOWo8AIe3S2lItIlZSjQIJSIKBVsWi8bHEfIFcQBQQt0gSuFNhVzsex/E3Nc0DTXNluui1gbEHG6oPKXQ4LglcwkuuSiQIdrUwBhro2NLBwNmhLoZVgkVEJGchvg856eA9ajAQRYbDHVd9whyv4hG6EHJx1Rln6r4qlvPlOW29L5Dt+h1M2e9hhpPumZ7dmwju87uHocRA4FI1WF1dfkkJchia5iMxklk13r9qxV9XoIb3oa7KsTqNMH3s2ztlhqEr14fSwtD39XG1Gw6kaO92dkU1zpbMaz/Kkdhv5PnRy6Er64ImarozGlBzhzkVVFqFEB4/UY8CqokY3YFe3xPs4lWWPnVF2vIkkBZUvXUMOpqKHdJ+r+DnaakAdOfcL4XIj9ZazzJ+z6xH5Dplvhq6PiM3z4j6+jPpYEk437tdobNxh5x4z9QW97JaN9alyxcaK9kK4sP3b5Vsr7W83b22YfIISn6Y8m9isla+m1ezhAqsLFhI+FOSueQXLWGI5avMKIE0Y89I4Ay+VXuqochuLAsF68M/f/9SEgVXini+//JtS0PPY049CQc/LT/8E3w9XGoz+qz5opTHH+02gQaBBqTxV/AZ6GAeJDwyVsC3C+xE9LXbSRpLWcFoOOW79Q+2s7wgp9UYkeiORsgeJ4730I/sJAYfDKTkYkKnEIHWg9YFEKsBfYbLzTo7zdFci3SRurjjQTeLKNpt2NzwwV+Ia6lrVTdCYtXOnxCoHEiGEgabYMVwjBgBJEKtqMj6DLlssFC72FTPpk8sINwF2u0oG1NoxZRuUU62YPFSyc+cm5yZgNwbNKepiMIKDGL93v7XgwG++Sxnd5jlBvoV0K13C6KTfny1macQqYa7AvVaxCDAKPJlNNIeTl9as8clWdEaEJq1oRkRxHX2dBtun87lFI2WmqirTvFLpwxaBEUUriSid4HbsrvbDEK/tXLO2lwvDlU8mykyaxUGBAPvj6BARBrfoZr8V27zOezQIkXn7KwRPkZlVqXPukV0NP16zpmKK47M1KGpJqbC2RS8ZpvtTu90F6LI+WhItwDBKK7i92yaoP+3p6f4+01LDnTalLjMqTWAUiGdGx/jKMoMPHiQRiWZyp1ksv7f3HLTWMInp1uiRHS928L2/fiGqqzX5BbiFp4V/Ev5PaKTeqg4erwiQCJZEvzD1HFy8i07llSAM8Gk1c5PUCZr4qJK46r6+qeGPHuIvv/Hir3qJ0TDh6/8tSUpJTk1OaSaSo3TRL+9HlnGnWTJ/6zh40FrIJKZZIdpcvnr1ssBF2iyvRK+kWdVj2Nti0Ykkr+pqL7iJWRZBSzSp26JulIWtWWuP4HAi7PY6DqfO3rssJrskLd0QHhsbblgSJaUxsaVdY5pRMyJRkh3bFvxhRNgtlPVUzxL0CYS9glmzOJll9Qrtn0dIeNlLLyyp2VQcdDdHnaHpOelnvH3g0Zq1m3mvrjywCL1C5glffchxnDvXt0qvlxc2VoQghG2YVvQwTuyVnjK0cnuF7Mx1DWNXPbHEZcMRp5wPy0xzzU13/92ZXFFFm45pE4vH0KKARCyHtsp3SUJ2BT0FxuowGimIE+Xcm/z+5N7G+aNoy9w5vN9/vzen/2gUd/duY8XIh8SFIXUO8CKpjTPKWeUFZrh6lG20VkTYc6qDk+FacfUc6Rs1mWpCW6z+hOWRm6VlrqOWJ5bRx28tWRY48E6ZFhuqSA7TfFudZLP9YVPn6ewQPqM1hvz95CnaGdr+yOHzSf5nbjR8+5uLa8DwcGNOQbItGeQFICim0YoFt+udxa4JS5VYU1NCPBTK9IJsllNQD1Xb0617r8oBpdZwS3SSckrd8JStE0oDIXZobzCrptq6HMol6+/V3pi0oRZoWLnALdkKOa7uFDbjxFRCLKQNS9wwmHIliVX7F0RL83QgW1tN9eMdwBQM2XhND4VyKN3a+cSahkbthSv3IAdMc1JbSZy4K4kIALC1rBHj/xmMdl/embUmlQR7YbLxPD2HYKLfu+c2fw+iAOBMqg1i+0lNdcOnuiXJCZDKOU94u6CJ0q1P6wiWVMP8X442u/XxMHbEFVwaXV0GXBSTOGN52jjsiecoWGB2TXP0Efp8AkN+dNWBXIModHktwdCB/PgOCglUKJbIHup6qVnInstVusCF55CIcbaxcZhzs/h0eHh+cd3+8Ij8khkRBQQEiHe5uJAhd5WxKadLTl0JFZSg63nMCallN4pWRPg9Xhwlm6+V7Jedaa3bHy6rlqtJg0axS3U5W6OctgS0BKQ2evIoHle0xplxbWRSo6lhz3GQKXPSCTxEzs3c5G1dl26vT5cPWHcEPQsKGg3DzyyfGBYcUiLBMQU3+GkHkND9NPIBhWqpME004F7m4ZvK3Z+Lh/URk15OH+jm9LPojjJ3vSu3eZxTiHsvbOWcR4NzUx4+1g1IBqw/EMQP1o9eGNAYAjpL3HxrAWa/dJho8U+I17/64O//4ZU+PsE/cSt+qikazZTNs4Luz9V5eeqykHDpYpVfoV9BZ2eB3bdVKhYrT7pggej2HepgjzRvzRoVxI9EYzhCeMXNVNOYyYQQyu6y6pfrwZYnUX//kuYO25Il5fdAa1b+B2O7C0ajpEwp0UsAoGyLNTFxFGLFF49IZ0iLP5qRyTVz8jSpZAq5LPH1a4a5+YR/ZsutqMVT/pju5NzrqfZNc/GTZszg9LjIEoo23VDNH9OuoZvjfMFm43p4iHSDh2AubfVmW0uih97DXddcHzyx+L+56cEFB47Ea1UQqTfvzfBJEnzxi77Tgd9zg3YTtKG6s+S4Bv38yWw/S/LcX3f25LQYI4xpuzNl6U5w/rwkcVIwbyUNwHGvVjX9EvGdRWdCChfeP33GlJ+q3yTpu1YpWq6jBQvJnrm+JpJsu95DLlhAnTmQs8R4ScocsSxAPRMPPg8ZHHmRevOV7Q7rz7wfduXMYu80oVCa9f9jL6kuH+JVycIvry+NW3XYIOR15s37/1UL/rd68XsSHPfiZhHNIhZZKLEyFKyYQCrAGALciYbTMZovJvClsFAJlS0Wa0Vis8LMM+PFeP36qRClF2I+AgEDw+k4zhDiTgKhFAlCfUiDXKwUy81ijE4zxnnoPWAD04prs19XLHh/Bs6QCyHOWPxeAMTl4mWrex16sk3oegbjy1rOpDMvF9SJ4B7oGeGzWkaYgN7P819Zk/+idQYKmFc+xhY6QMTaXDk9Cc6MBLzOCC/Jq5dJvV+8eJ9buKctdR1XDfngTDFukYstSKSTUAZM4CPEnDCaE14aJcBlmMCXxPsfFinFVapoBncGnqk4GQCxRAFcEMCc5ziHfTEhhmEqCWkV4c0qZuLgu6pus2YnhJg4HPdFUZkNjcJlF/bPz5dtMks3ZyromInL8WCzgg5cvVxtIoJOX5WrkayVw3U/1HS5IJUVe/qKRo7p39Fuiko6mZ9MLkT2JOVLvTM7rh0tKsIXxLFe+83sHEr0OdAxK3/+UJJUVEQ/aGE3s+pH+soo35nt+y/UryJYq2ov+BTRLSZ6sejX/fPzC9pPf9jfNDPiNbHRSpuh4Fr+JSBjAT+y4YbL4gTauafiltPzZ8nOzsUxq5zDcceCTn96udqEBZ36VENHk0rSPJWn0zTYpDIOF86Vfo30A1dFajwnxOpSHYzJBy+v+9VKSZEueVo+N03Gfp04c/4prM4uqO4YQvNws18iVEf2txfuD9Ay8XR/oZ0mxHwmzey7d2QOfoBBfvup+lVs1qo6uQXPkeO1Cmz//PyZ7fv3NxX6viZsaFwqpoOEUbN8vyZyQvF5/KDq9gONfj/4mkkBOT28WvYVAd0PL3CodtOtNKst/X/VryKI1XWaneoiPKHOIvupNrYfwh+kHKY6KMF8yiboFlxFqwUdgviUZDVfYwkoYbFPKZd+VdApsAnaBb1Kpw/2dtBLpyWzHQZvOX92011njGxOZMwfPod34zHn1OsmxxF6q0E8nkRle/tHV3wSSifLGz2IbxVN2i3fr42KVsnpy9zRsD2zLW5jltH9ztaigTK+zG9N4oI1d1Z8kC5YcUY/pZqxLHNBoa5A25ugp+sZUkw+gd/50o10Q8JhHX2QTV1oyWdVBms+OtsDeOigOWKUev6GcHJM9ertEpFfXTN7+IT+eG3robuOwp4vEjIY0w5vk4mTymsM/vjsxbkkQFQif3S0tDAlVWhwjvQUTL9y5W1clNbxviLDa3NTlDUTmuIPDUcvSs+I/bjv0LrvMyClNOAdHhB3MH0ES508QzynLMPefixwUmaGOU8SQtilkYEBiro1cGiQogYPDdxSEgGqDrSw/SrstRxubbndhctxASsGqZiMsyaV3kiLaE86jhCGUKPjk8MQiU5cSjTCOiKgEBJ55TyEtQEa0KvZAevsklKJCBDolCSh+BciRwMCHOLtOZ7cxkB4uZymrqCfYdgZ/GZOsb3CmUNfotDI1rT6ZBc643RaIWF3YXOY0wyLOfcxDMeI6YnCHElH6m4MSITwru0jGsbxbQUxkBJACAYGKSJE5rfSBhKS0pGkmNQsVSMSGQOGgPtRAC9WdAtUlIV3IY4YdgbNIqB8KLsLh+PSiAQkAgHCZDQ7kttogBAsZeMRAlRK2LNr98lxBBwrfcMupHcw6I30qYxola5FDQgxNoTqoxgIQQF9PoNhp6NC4yMCAFRIt4FREolmTL3cy5hP7+Sp0UqFgMDygMmRNQIChBBQIFMul3EQjpYwyhAF9mXcp9GOhxyjGHaGqhLJGiBY51hugIHjoFB1OUZS4UMsAnCBK7vT12qG/sf3dhwQRtMLXHoUUaGFcEOIDAvDnfPpDVHbiwAQTUUx9Aef+4voY7DYjPK29ouOA47S5vO2tqd+Tyf56mugECUmAWCf6z5rk+JQgxwtZ0j/ilfn5asfXmVCm/XQTeIa7ypx2zY4CiF/b4HTU+b32Y/PlM1lseeWPT79neTwecnNE5tPbLolGcxhsB6yGDmDkluQJ5c7Iv5WbXayv2dGzsXNOI0v35Ghvo/TvNTbM+KL+PB3Yrkzi8Uob2+7JLSzQXjJ5y983QTkIfvdNgZI8H2d/DuAcVJbqKw9yaA+lMar8/PVj4SrVOEjN4lbgquHY8GROeTrBU6/KBNn7NEiADKTvCg0BnFOrF8zg1TJ83g1NWTJVWuZNetPcIKMgk6BP4wtca2fCf8ysnz9Etl/PSISCZmvgUk8KoW/wqV+WU3GErb5XUrx+8DDrMWl2nV0WqY8OIsfEpjO9SAzSVEmjmeKvjSP0AoMKU0juAXVly5mHQ58f1wECNH3KhWmZhZBpGRR9QWXcedLLqMu52cFTwRv822+D3N66nTNDisPMraGjAenHFjX05Xsur6+ZV3Ll+08Ca9sXxglz1gt7ZUgvphH44n5QRBD9V+xUHQKABOnMPzOnZVyzoWZL0XzA8dt9+3jSM+e8uX0WVbGGPfx9koVy6MsfRzfU+dkjH4cAO4kLFdS+ClwMRoaIaa8j+F37pwfI0BCMkRXLPv4+x6/Bg2xzDG7877NdMdWwhf3k6+XtGo0uYQUl9EiJYOSAIYfJiUma7pRunY5x+9cIt/KdzDwE5eWbAe+9eSzfpxeWSuWrHfXOnsu0vr0zCzrufsgEt3DzfjcD8XyEgUAICfVByRAnBaLHOwTbYeNUrB55kU2s05ZqtT36gEyidCKUGtf/9bNvEaKyb+iRXJCXfSiCBAgEQY4ACCQY8WPszaONwIFEqsYUdBOdYXadQAACCFAAE9hOcAcdQ/obnVZo1IGqXdrSLWo+c8yjZntbHhi+/fkHv48by/ccO/4fYyGQc+Z026moUcPe5vesHp9GiXWJ2WA0GeZDb9de+xq2rBvrY5bXJLqG5cGkDZuj29JiZ7jYpuyzk3zpyyrDUkFCFDZT3WKZpoVBNupwYC87394/Ng17cCpDUB3vLTmnlQJjIKqvFYXdRdtUskZSJIlUZb5kG4FUKr4ASgTmjgKUoeTeQQxpA0yH/Zy+rRob92lNU4tw5clin3/euMtlH1ILzGIkYQEClTt2tBN2pIRYslvJQCgKBPr5oeWvy0/1PZF1o1iUkHKX5xTrVyWZH3tK2J3yd7A3OC4gjShpGXfZ2fnzoq2Rdl8PyZFJFpR6uiOPGSbBhYcRQDWJ+UqSokAEOwI7xqmO/KabiCAdu4yyiJGgAAUl8arOdM0mQ87duzQpxGMNOu2bR1DxdpCTnVsNSdNm/mDfft2ayGDSLNu397xMFMzlVP97Gk15wdHpzT1BQ+Joof3L5RJh44veCh1mrZgqIh4GEtzcnyUXf1tXMsQt1e8XuMu/Yv1cAo16iH7ho3aAoLIN27YYB9Sa6ayyzFGB8PGWA6O/7fRZhJYuUpAV9hUqP9Q1RayS7HsFTQIn5EGABGvXbPzWYFaTX/F4sWqKCYjRrl4cdkptWYyOycbIQyISzMAoDPSGIz7uToRXFoOLY3ewHCvYSBj6tzX0ZYZLxnEJZhNUrdcb0WbboPe2Lf1PdXbZzTCbVP0LdfbFA943/s3F0ypow3eZHAjXg3e11+VV1ZWVHAq1h0bRe91NV1MduDbw1WVf01k+pcP2j0YJMjTPEucpoR5TzZ12He1YtXX6flEJ9NKHGRMNCZpQ627nDGeoqz9y2UIgPWyYeIQcUOpGNyz20r0EbngObgBfZD4NxWwMdccLx3EPEdE/PWlYRk3pYUcugHjcH8Ov5nTMPOfnPoBl+Fc1ORyE9TYCneN1bny97JMyMoGy8GRZYd1v86ixc1LYwtCVZVqlcoxyQzYg+p9fKtDioOVv8/BMNwoqXconpOSe2U7pPJr5qeSOgd4/KmKr8psOe/4JuGJ9vbKm7f9OePGbe2ThDeO53NZnXq+3txyW7p1teeXF/Quv3Fee86S3uZ3Ykj6iP0uIrGUTfy3WfIPgFvg4qo1O3++2ZfZ8LRWgyHy2kHQaAIzM0loR0paBQ8LIO1mLilpMkCXr8AnwLEtOyFdR6qCCOKC0fDxEhpDrDZgFnWYO1rnvFmFGKaNeI/d3aoP10XI6UaKIk5QWyhwddMhHyfclSKX0JcKRBtE5xxT2M5DHCdHxqkGHZtCGFCYZdbC5ipTKnJ04Vx3ZKcIB0T7xIKLECVf6+9XIbsoq/CLq/mXqX6J5L7j/MN5x93IAUX90f03rWR2EmHMrgbGcnKQb0zBFgC5bAPEcDn2XI/O6ZuX7eHMXF8RuBDG14GHkqqnY8Vnz0wYN+Ok9oJJ8M2ni7CgGigsB1QkGEzh4Xp9eISaDMjQfoPnx5IOybh4m2RU/c9m9qTE/lORaWWWLFNJdL8aEjIb8FYUmRLdTJOuRXM30Vqx6H2THw5umLMeSG+fVZddk/df2/33P3mOPN/S7GoGM0+vv8xmnJRIIul0mQATY5iCXuxjPx7tu/HjhN8n7+UIdNrBaO/YoODtzg6GUmsNm4jV6dczmOv1oRFM3J8mpWMIpxCOsScvf9+1OXhfVsKAeY7P99N90p+95dr83c4eUmz2nxMuuvv21ylqj/o9XuLdswSPtaYfP87ZNim7+BWDuKJXxRBEtEq/h6CfyCxaiphXshqjrt7ObTK00enFYu3dbQd+2P5FaySL/SG7dDA58q7N+cTAcs/irF+IGf16fQyDKNTrTxH0dZradTi9WK05V6b68PkPLtoFxusEnZ0Z/XhZEffnC+e3fHEzedEZVrLU7cZhdXvAnHDR86e/OszasC4eYgTfhqrklapQQSo7fl427bWzVbNNbXMu/73c7GrOlUJRPMQnTCy5uGQi4m/3D6t9zoTPJ/5v/54OsL7/x/f6F4XX3jOnrvVfQz+cetD/AP166nr/9XvfHrt2THTswTHJsevHYG/fkV0dkdyM66hIE5U3ecne/YKMCZRtOuPXmn4DFc95Pjh79wyJ0yZQKViuspGN1DayguJbbxDscCgj1audJMso+N3tyc6tT5NstmRs6myijMAz0axZpBNOlAc1ieg+LS4uISGurgmXxgR3bs6e7ezs6xoeFlD/Dm7ffusuBbFrL3ONe0sjSsKLw4dqisMe0rvKfqdryyKdIjwhq+lp3/VEm+HcsCvV8d4sjhjSciBByVk/ez3egiJPBcIa3eS02wFzouSoPbL/VGQzTdqMzd0gXLZD+t9lVutD2borjOnsS9MFTnyq9up3kKAYia1v9Slsa7t7d3JMVuC//5W05CRN9emY/y9v7GSA5fnd8KkNDZKCjW3Pn6vDDtSXe9ZfybX/z1xZ+fN3J/sDs1/cCw+SjXX1BKrVJXvG//tjkHRoXbE1lkP0Kk/k0to37KjXcnNDcENHeQAplLURmqb2prebbZ15pNhUa2Ds/4W5mB/Q2V1HOuzOa5Lx4OQMU0qGKiNstzyDyCDSlT2JdjLNGDy3sdHssayhtjZtalWoMaf0WmXOWHzaeZyhcVShimhXulmW+t41ohJFUmn4vjUTaGHNhoS5qZO8304UrN2Th0/k+To9QqPeJKnViimJPlytt8DhCXdu3jrJmFhiMCDq9rcAeoOE4ovW5tRXkBNHUxvcMCBBo514N3t7g0ZLIbEqRq3Xvhsm5xeZVmsnBPN1BgpNpFmafi8QN/mEGRzKvUI2bPDyzgwZ/0+rp929UBxts3Uc9Z2P6TGtX82/xwZHBzePPXXIfKM1vnd6OXz0MOflyypuaRl2LDd3rLX1H3NdioPB2eBSVEYlkYleZpEmdf+RNHLEzKzJmTvB3zGDmS41Bn03xEtkujbdpaUpqXEfHV93bMHk7vyCrpM9ennPyL69rkFUoopr4S3h1XL1lVJP/337fjijk/ec7Mp5W9Y5ecGlJbs+8gpMWXLJp013UcZfwvO9bOFeWpqSkl5tRvpk5u49l/bsIzyllXpuMf9jnoUrrTJ4yvbtvUyvPNlVUNDQcUKiU+be17bpK6ouv/RMra5OTa2qToup/4cEsdiRZ4Xz9C3PyVFx30Xpr8Ti0nww8zP4i3T79zuku89judBzBcwcTbNXgr19uvf8Cg008dd+WRL19Nl/AkdzFDF9c39G8j5LFuav9TdjiYFp2f4mWofBQGtPxbX5OQ/7G/CYt95e1IZTNp8StTSbJs0IurXNjmeKXMNnftxVRvPaEPTZ0YyqLOegMm0KnA95gey7MXdYb31hzVaY/own2tudBb2dw7e1QRD5XFAj9mMj9tuFsTviJ3FRc/dCvSYy0mHa/tNvbLvXaaJzq/qt7WXpuo+2eS7BbOemo8IW49o96kDOlfuXp2sXbv2nEaix8eG7v/7CNu9rXRNvZ/gETzZP7/iNvoUnC/zl4sXZEb//sfjMq0nhioLBtf/mY2nT5yU6XDnJZ2vXps+06HNbpqTw3Hb7ZprNLgc2Bq+dHTYnfNMhWZWsqtLze0MG7ORTY2v2pCEqshJFuH6Ic8bNrtGoQuU87dfzaenPK3Kv1Scaq1RT0+bVttabPRob505KN5L2xJ700Awig7VbnhGeHpaWorXmwGThHvEM+kIb5x1qoGqQBRk8dq6yNDknOSeZJ08KjPMMXpka2xsluyq8AhLsTi52p2y4of6gUqGnsOuC6+JSDVgQqRARVbs0xXT/FGKNV8WGeRZHQ7AhpKzZM8MjIy/LNdUlJXfRs7vJ7huu3PwumPNHfvLwt9EuyUXPy7XbalPeJz2UYb/OEeM5ge1/67YYwjK+0WdH1af8V6zs3HlccNpkGrwxN7ggwKnTpZsZKnMp0GuBIfsSJxbQOf21v1ceJ05oxLXrf9JOfoVjP5zc/276xKKFOSZRqmhe7dhrsuWINva8eVWHKIfyzfvbkKPYdsTP0t/vOaSpgZd0t1K29vH/ipI1PDUvgzw7/CQ///bTAbtxirOfYWJzsPXY14/tMD76dmLc+eV+bge5NI1itjCiIuphFr0mrCfJdYVK5+I0i2lgsF+2TuT/8Rja7jr1m0jPmSAum1nV1+LnFymIZ/nbG5u5UYK6pbV+A1Uzo6ImVXPJGK5zhX0pN0bQUlsbflj9JYf4k3Vnznbuzhn4vMQlw3ftrim6CIhds2uD1CU9e+DziN29p05HBOtdIUI45Ted9tlbAfcJ6uvurqvr7u6mnrp6xRuop2/fPhkbfTHc7eQR9HSUdrnI/01fcuKwZAdOf2F/OjBoyxk89N2dUCks+G98lzMFw91dHZmWru4tDopm7Ztn45/jXs3PHJ4+Gxh9NnFu9O3Y+NiTiam848Vnt7/56sOr4b6Oboulu3sAwsXj48dl1Lsn3R0dFktH3bZrtU9GR+86BibeNj4b1Sam+PCoWYVjfvG/Vx+Gt3R1ZtVxCBJ29QYFvPiyECybh0N95swbvg0w9ry2Ya31TBsFlQhG/QY+SUlu7VzemWLqaO/oUFZH60szsYRqy6FYxyw0ZF9lElf1VhNmZso2XCWYV636QqIwkzPMfswe5rCFVWhMwvrsof2WIX22KZaWrR9iMjSVqcxBZzsqrxCW9/WVCyvKBRW9j4PLy0VElI3sfb2NX7Fvs6U1K4v9hA3IkxyEpjxmP2UT3ux18C0Rvruw1nncZdB5zGXt+wtnF/KX8lee7QI2K2dhzdfH/hCJ/jj2dc3CRY+vfxFaENqNyL+pWEoHj5Yqj0eX0dJNDcQj6xZ+7z+hjRqN38Z/evlbtr44d3NxkVdSW6O/f2Obd1LRnJu6K0x7HvOHUyX7eBvW+5iXrwgOXrF8ia3fwOs7XaXvRW/x/78JmLZnT1jYnr3YxDfflmQNMUHUInx/Ya1zZ9o4r/3lwsGVh2w7uPngRTc+P/DzG4vIj4KSKH2a+cwfDH2CyqcifUft+3ZOkXdSo6+x8rehVwhwk992fJPwRvmaF/d/HYwpgyk43ja3qPgqSDUtWpsaC7DhUyXFqpbvpngjDLGpJwKm1N+i7iW7xcumV3wXtHx27bVP3TZ93SDZd2X2i69opuA+MWvPxNEtPkbC9tj/5wVOcf2sryaWeQeukQT3flEL0SUyd4OHu9XdI9vdQ7+q9+hSXnOIrAKbnLlVncow+abNkjCBvFTx5k1NTbyQkJwGH1VWZxM3KIiX18XJhnqfMHzn1PqGrjxeXefePQJiStkQXRKBe/V5FXpOZ6m8Pu/2J7+87Wp+EHc0P8uS9WfRRPe9Pp1m4t+3v/+W/vr7qDk6nN4yqdfLq3cSyOl8Dh/XRFprarzjbTkJ8Tk58d6LkimzCyu3JnxOWamnwhbFdE1N/671VpgN4R+QKH3OqbmwUl54NuZI3H1bGD5G5m/50gZRuzannzdBWi2q8dl57ZprUt/WnA2X/fICU/yyEjbVTnMxvqqt/ONIvH2uvyVEgAs6axLOFCRHE5F5+ofa+D6n9B973PKdhY+qlatdUqrcMdwXG/i8rgu3jIKpIqg14R/jY3sXT7ms0U/LncwynqkiSL6irgtfbrgS3u3SsrXb2Rb2gtXbZZbf4sS8Bbf3nUMiOzE+jh0XtwCev2Uyu+f+8+afx46Xv3S1Npmm+k8t9i+e5T8r1x92sJ8Gjwc/5Y56FrRIayZxly/gPeUJ+NQo4YXFutM5ae+gJ8FjbGwJj7IqKcp/wmfIsgRxfaI+tXrRFb77E0FTbeRunpi/KIn0eZ8rlmluzn7EZD7Kbm7ebB/ErtmXG3Jom09WY+PIb3/14QPD0sMtq7oiU1PTuO8R1EhdbRKfiFzOSPmYy4fAwIPX3YHUwYUHjhxMTYDq5O143Zubm3BxOCj+cgIm51wO8PPKv2m+KJVIL0uV0nh9QjFLH6+Q+KrUjzPzLm6ZNt5H6XsR6K+KEQIpAkAYrHhLrSF9p2aVFUCiXORr9V0hM/hKfYNsxRSlkkJDlCGyLmddmmq/6gDYaA56B61CaefPMUxCyOyCUGLLSeezCL+qdWUfE7JIYSvKnoJ18sMclnZubc/mepTR/D/5WgZf2S7IXpi/V6RdtaBiSlLYnzpQLL1fkdloFUUgAdBmVtuk//v6l5CPFh6b4jHXXpHkzWQe/TqLeWwhAZdnOe9LS4u8qSxM9pi9c8lZj5kFqUV1XOmsmoIkUaXSLdfxpsRjZpBXFdjEDcdYmx8H/EgDjxKolC7JA/szv5eRY/KPxgCwKbQvuF0/Wl9d8EigB0YNjw033apjxT6SM275NsVPLtRPj/EPuQ3eq9Urfpr/tMwK2mdNgYkoIPLqiuXPs1uELduiZwhvdvBqc9SurFVlibac1JCcHFtEZMRsVcbRlUZzFUZHRdWpN9JXVANtrddM049jBKtmWga93a5M9DXOL20RtPTG5ca91PE1J9JEPJ4spdopfe3rnENhtkPNPxELl3AQT5C1Jdyhny/gxnondEr2SnhnHo79Fyk+VxyUKHCJCzGdBwQNvd0AZpdjfC6mONHg799+FJX8x+NFIaXPKSElRBS0czZo1tE/gDo1Z+UsbjDfYdLUp3eGoe9jH6Z6mQIZfNe5D3B9MCDYBOe/UdB360kJBXa+nd1ZCXn2/IvjkRu1rcq22HX90zaDGMqGrW+Znz6lo0Cgl9ielA/s+1OkJGMOF5mP05eI1gjkA5gcI/HT1SgnlxL1BzQdgmyxrksPJJSds4L+rVHuQZJsCUCUAuigDwjCY5PcKr5iLxOzgNS1u6nq+BzKNsS4bBHPoO1OaQOocFYSvuu9DY1jjbpRsZ7SS0UlCELtoTIlFXonCorXrWdLl/aXcBwePyY1pPoiWv4u/efW0/Z3dkrfpQcrp0gCCboGJQJYJtu1xLGu5Iw+qzu7Rm8oJaFAUi5Ri4RS4NaBxCh7ixVG/w7sDH7oBhhC9TcM+23HXz54eKXl4sW9n5aoUXACtWVZgCgMqO7EyIvCRdtllIY6k3CsKoxEIQoEuvl66NZZxCi0XaksU9bnCn2YvQwSbSjeo2lRdADDYCpIFKDTg98jzpZ0awY2Zm7mEmkLKGrlmf1aUEz62ZqjInmJeFN678i/v3Nwm8k/V31ptuMdBruDHSh0//h/330nRqLPzsJPzwee3/MuFeDa7m2jaAh3c+O4PbQ9FBACbJLxDof3n9fU0ed3kXaZ1uTqDqDEzGqekhfgwJPw3/Al28094gICRiNDfIQ+n2Fu92oPPsKj+OvoQaPBnwaPBtHX8SkeQ8MT8y54SnW/9XKkCwcdP3UcFNLhRX9xTPGU4dRh05SjT2bEzJhiutnZM7e2Prk75dO/yqrfMt1KnQKPgrk1XPuPq623o6k++MsSdl13PT9Mi/X15eSv2Ko3HN6Wn3/zC6Phi2+Xstu2GcLMk4xehsoqo46ZMw1ekFbmRTM3Z0wyeBrKKvVeeq80DB4+jmH9xznMfsZhMc7TVV0b4S15DsjkvCXnJ3KesS8Zzsa6WRPb5JMgznMW+15IEvVk/mNd/CsLbmMAwNjkG1xU2oDZjFT9KeVauaZBKLN00H03MpayhlnEMKthk0h6gPH6ZybuhBpz271YXk7sLQRvOt3D3wOMl1fGEkUIAjxpXDqtjc6lIQA4KTT1dKxsJHAnyaLno3xWepjhFMHYE6owCuZ1EjQ/iaSYxj7E5rZ0tCdyefb2ro18Vmai6lCHKIQ1F4GrJ05JPuU02xtkbDatvnUVmyajPrZXpz6u+KNYDGIApUjRTKfXS6UeTOZkoXQZg0tT4ZjUjDAcM9f7OE5m0l0Eghk05jolEgPlRMOdBGILTrOIKWectag++xWL9aq0/hMWMdUosSo0DaG22Sy4P9TNLAlgvijCMOhxt7LqZvwPACEAhMnFivr73PbCw7TWB27mOylcmxLApkjmbXDP/it1oAYBKMslj/kZA6DFd6e+9swaAIRhc18QuIn86F1oY2U5SCiXyZHIdZrxp/ByxvrQMW8N5CNXH30g2ohDxfpuvUNJVmmhm7WSWoVTkT3EVskJOUnH2GGtQELJZ9kSq0QQ6mA1SbAOSkEp1quZp7LQ4qGUHboOqgcZeHhtkYp6B+bRAce655wb4IPDwJPy2zkAIGn0EYNAY9O5h/TlHhzmw1IA0LVrQOGGO1em2s/Fsp+UkJTSCa5E3T5nB4c+QR7UsNThNgHywZDM+2bGOm1JrrtMrf+5HCRWH29QH9Hyl0usElNZIvE8Or1OAQgoJUnpqdCK0LJbZYpSBSIBSGS5zKSvVcvn0YpOZIYU1ZnXaz5Z9N3ouKMBkQByaqf6I4lObRcFK275dGzirW2TJqV2yvrF7ZtvikTg+LDgaW/kqqhbf75fOLQgyIM1yCpgbJI+7RWyhI4N6ohV6rVKZSQtyii/cX5Ofw4bRHhZjklkeouJYOI5kbRCppgcqprNXJnvVyBrb5cV+OVXVnppkVYplNJiKim3Yp7ZbUgx85q52ZFoxpUZTTFmKi0j16vXy/s1Gs3b1s8Z6rWQ9dA1aY4i7dyjhwNpl1y0TY5NLtpLaQMPH51LU2R/h0NXvYXsvfw4KKjm8lpJN6wVX64JCnp8Gc7XhH/kbFGKsVJL5iXKmLDQByjUprTb1VWzXnv5aX3XM03xU/j0qdNnLylvV2abErMq6Js247e0yQalSEmOZi310sd2eulThKcePklJD5iW7pTvhOEIwXbVb06/bdjYTr0mobqS87NTvbZeuDCR/zE2Z98807EtyeXlyYljXcYvbpaGHN5mNG477H7zJRN9GSkeamcXFVnXIyVFSCtkikmhppd/ChwhliF9NZG69sN49Ou7muLCTze2h7JNoSvVWManeO3m/q+f+OpZMb7ZrFSR2lXi6uV7PvE+teg/qHnHNX66LwCyaSsha3YI7Druq9mx+hIkL78Hy4TWfujRweTJUUaJ2kctroSINKkBElYxC4FGj7HV1l6BfO+IqQCLJxbG/8b5AayJi7hI/KJoDp3iB3FM/Ju8D0yMt0dd8ZQ47ldP4F8iEKoC42c74zHKfIBFfNkcpvgXN/vn4mnxqrmFi/+aoyCXAxOPHjmKhPumtI75BIv6WzUh1nj8geBQxc/EN+YAxD/FMfGE2C/uWMTbTj8Er58hjokbxW/FD15/3AVev7Xp9Z557dLx/ztBBATvYq9/2zLH4fUF5f3hUuWB1782efwd59iem/T6ly3qZ/FvcaXXCiYavYpNisf8Ds3+R/GGeMBrIxPfi6sXtW/OvCu7QPPWFR/4v2+ORq/bpr1CbRQX+482h1fichHzMj/FzM8gFpu/w+OzZNCUkK68qF3XnJ/i+qc7xP5G8LRnJ75s+v1anD5+dmKEdgznywjAXtWXv69hBGjPDsit3KUAF2ylHUGFtdM2gYnxcdHN42dXF5onHhn3cY/HH/bEuCnzGR5esLZkiI0qjHI8OnxToQ9yqbGHcuj3UeoAelCswt1BOM27Xs6Ho29kNjoCavUw4dGB4SVxKqNB/P+D6MCBWMaA2J1kgzuS3TgI0VjMv0f+IAz48IThLM5jNIjjD6KDMyQyBsQjI9mgQurSkorgH0/q1AV/L91wsEIh5VRQCiVQAcFQtSTnwGyo44gS5J6FdkzRQWSqvst5tiJEDjYog9pTepVyqwgUEHKONXyO1VN+MfsvY2CBMqiABpgFM6C2Mfjl0nK+I7+bXDLnv3YWAmOdwfUgggooe8M5YDPCSBmUIlIMTZOebJiledCTrl98HNYA) format(\"woff2\");font-weight:400;font-style:normal;font-display:block}.dcg-calculator-api-container [class^=dcg-icon-],.dcg-calculator-api-container [class*=\" dcg-icon-\"]{font-family:dcg-icons-2023-11-14!important;speak:never;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.dcg-calculator-api-container .dcg-icon-sound-wave:before{content:\"\\e914\"}.dcg-calculator-api-container .dcg-icon-map:before{content:\"\\e90b\"}.dcg-calculator-api-container .dcg-icon-3d-cube:before{content:\"\\e906\"}.dcg-calculator-api-container .dcg-icon-xy-plane:before{content:\"\\e90e\"}.dcg-calculator-api-container .dcg-icon-3d:before{content:\"\\e926\"}.dcg-calculator-api-container .dcg-icon-translation:before{content:\"\\e925\"}.dcg-calculator-api-container .dcg-icon-cartesian:before{content:\"\\e923\"}.dcg-calculator-api-container .dcg-icon-polar:before{content:\"\\e924\"}.dcg-calculator-api-container .dcg-icon-curved-arrow:before{content:\"\\e922\"}.dcg-calculator-api-container .dcg-icon-accessibility:before{content:\"\\e921\"}.dcg-calculator-api-container .dcg-icon-polygon-token:before{content:\"\\e920\"}.dcg-calculator-api-container .dcg-icon-dilation:before{content:\"\\e919\"}.dcg-calculator-api-container .dcg-icon-3d-reorient:before{content:\"\\e915\"}.dcg-calculator-api-container .dcg-icon-reflection:before{content:\"\\e91f\"}.dcg-calculator-api-container .dcg-icon-test-mode:before{content:\"\\e91e\"}.dcg-calculator-api-container .dcg-icon-four-function:before{content:\"\\e900\"}.dcg-calculator-api-container .dcg-icon-geometry:before{content:\"\\e916\"}.dcg-calculator-api-container .dcg-icon-graphing:before{content:\"\\e917\"}.dcg-calculator-api-container .dcg-icon-matrix:before{content:\"\\e91c\"}.dcg-calculator-api-container .dcg-icon-scientific:before{content:\"\\e91d\"}.dcg-calculator-api-container .dcg-icon-rotation:before{content:\"\\e91b\"}.dcg-calculator-api-container .dcg-icon-vector:before{content:\"\\e91a\"}.dcg-calculator-api-container .dcg-icon-play-outline:before{content:\"\\e913\"}.dcg-calculator-api-container .dcg-icon-trashcan:before{content:\"\\e918\"}.dcg-calculator-api-container .dcg-icon-replace:before{content:\"\\e90f\"}.dcg-calculator-api-container .dcg-icon-metronome-2:before{content:\"\\e90d\"}.dcg-calculator-api-container .dcg-icon-metronome:before{content:\"\\e90c\"}.dcg-calculator-api-container .dcg-icon-mail:before{content:\"\\e90a\"}.dcg-calculator-api-container .dcg-icon-line-dotted:before{content:\"\\e907\"}.dcg-calculator-api-container .dcg-icon-line-dashed:before{content:\"\\e908\"}.dcg-calculator-api-container .dcg-icon-line-solid:before{content:\"\\e909\"}.dcg-calculator-api-container .dcg-icon-angle:before{content:\"\\e910\"}.dcg-calculator-api-container .dcg-icon-line-thickness:before{content:\"\\e911\"}.dcg-calculator-api-container .dcg-icon-opacity:before{content:\"\\e912\"}.dcg-calculator-api-container .dcg-icon-thin-arrow-right:before{content:\"\\e904\"}.dcg-calculator-api-container .dcg-icon-thin-arrow-left:before{content:\"\\e905\"}.dcg-calculator-api-container .dcg-icon-volume:before{content:\"\\e903\"}.dcg-calculator-api-container .dcg-icon-volume-down:before{content:\"\\e901\"}.dcg-calculator-api-container .dcg-icon-volume-up:before{content:\"\\e902\"}.dcg-calculator-api-container .dcg-icon-clipboard:before{content:\"\\e205\"}.dcg-calculator-api-container .dcg-icon-arrow-infinite:before{content:\"\\e206\"}.dcg-calculator-api-container .dcg-icon-arrow-once:before{content:\"\\e207\"}.dcg-calculator-api-container .dcg-icon-arrow-two-way:before{content:\"\\e208\"}.dcg-calculator-api-container .dcg-icon-arrow-one-way:before{content:\"\\e209\"}.dcg-calculator-api-container .dcg-icon-randomize:before{content:\"\\e20a\"}.dcg-calculator-api-container .dcg-icon-zoom-fit:before{content:\"\\e20b\"}.dcg-calculator-api-container .dcg-icon-comments:before{content:\"\\e20c\"}.dcg-calculator-api-container .dcg-icon-lines-solid:before{content:\"\\e20d\"}.dcg-calculator-api-container .dcg-icon-histogram-fill:before{content:\"\\e20e\"}.dcg-calculator-api-container .dcg-icon-histogram:before{content:\"\\e20f\"}.dcg-calculator-api-container .dcg-icon-distribution-fill:before{content:\"\\e210\"}.dcg-calculator-api-container .dcg-icon-distribution:before{content:\"\\e211\"}.dcg-calculator-api-container .dcg-icon-dotplot-cross:before{content:\"\\e212\"}.dcg-calculator-api-container .dcg-icon-dotplot-open:before{content:\"\\e213\"}.dcg-calculator-api-container .dcg-icon-dotplot-default:before{content:\"\\e214\"}.dcg-calculator-api-container .dcg-icon-boxplot:before{content:\"\\e215\"}.dcg-calculator-api-container .dcg-icon-points:before{content:\"\\e216\"}.dcg-calculator-api-container .dcg-icon-fraction:before{content:\"\\e217\"}.dcg-calculator-api-container .dcg-icon-cross:before{content:\"\\e218\"}.dcg-calculator-api-container .dcg-icon-open:before{content:\"\\e219\"}.dcg-calculator-api-container .dcg-icon-point:before{content:\"\\e21a\"}.dcg-calculator-api-container .dcg-icon-shaded-inequality-shade2:before{content:\"\\e21b\"}.dcg-calculator-api-container .dcg-icon-shaded-inequality-dash:before{content:\"\\e21c\"}.dcg-calculator-api-container .dcg-icon-parametric-filled:before{content:\"\\e21f\"}.dcg-calculator-api-container .dcg-icon-parametric-solid:before{content:\"\\e220\"}.dcg-calculator-api-container .dcg-icon-parametric-dashed:before{content:\"\\e221\"}.dcg-calculator-api-container .dcg-icon-parametric-dotted:before{content:\"\\e222\"}.dcg-calculator-api-container .dcg-icon-polygon-filled:before{content:\"\\e223\"}.dcg-calculator-api-container .dcg-icon-polygon-dashed:before{content:\"\\e224\"}.dcg-calculator-api-container .dcg-icon-polygon-dotted:before{content:\"\\e225\"}.dcg-calculator-api-container .dcg-icon-polygon-solid:before{content:\"\\e226\"}.dcg-calculator-api-container .dcg-icon-title:before{content:\"\\e227\"}.dcg-calculator-api-container .dcg-icon-rocket:before{content:\"\\e229\"}.dcg-calculator-api-container .dcg-icon-reset:before{content:\"\\e22a\"}.dcg-calculator-api-container .dcg-icon-desmos:before{content:\"\\e22b\"}.dcg-calculator-api-container .dcg-icon-download:before{content:\"\\e22c\"}.dcg-calculator-api-container .dcg-icon-embed:before{content:\"\\e22d\"}.dcg-calculator-api-container .dcg-icon-export:before{content:\"\\e22e\"}.dcg-calculator-api-container .dcg-icon-book:before{content:\"\\e22f\"}.dcg-calculator-api-container .dcg-icon-print:before{content:\"\\e230\"}.dcg-calculator-api-container .dcg-icon-arrows-two:before{content:\"\\e235\"}.dcg-calculator-api-container .dcg-icon-arrows-one:before{content:\"\\e236\"}.dcg-calculator-api-container .dcg-icon-desmos-badge:before{content:\"\\e237\"}.dcg-calculator-api-container .dcg-icon-move:before{content:\"\\e238\"}.dcg-calculator-api-container .dcg-icon-move-horizontal:before{content:\"\\e239\"}.dcg-calculator-api-container .dcg-icon-move-vertical:before{content:\"\\e23a\"}.dcg-calculator-api-container .dcg-icon-arrow-left:before{content:\"\\e23b\"}.dcg-calculator-api-container .dcg-icon-arrow-right:before{content:\"\\e23c\"}.dcg-calculator-api-container .dcg-icon-arrow-enter:before{content:\"\\e23d\"}.dcg-calculator-api-container .dcg-icon-shift:before{content:\"\\e23e\"}.dcg-calculator-api-container .dcg-icon-duplicate:before{content:\"\\e240\"}.dcg-calculator-api-container .dcg-icon-error:before{content:\"\\e241\"}.dcg-calculator-api-container .dcg-icon-film:before{content:\"\\e243\"}.dcg-calculator-api-container .dcg-icon-folder:before{content:\"\\e245\"}.dcg-calculator-api-container .dcg-icon-hamburger:before{content:\"\\e246\"}.dcg-calculator-api-container .dcg-icon-hide:before{content:\"\\e248\"}.dcg-calculator-api-container .dcg-icon-home:before{content:\"\\e249\"}.dcg-calculator-api-container .dcg-icon-keyboard:before{content:\"\\e24b\"}.dcg-calculator-api-container .dcg-icon-lock:before{content:\"\\e24c\"}.dcg-calculator-api-container .dcg-icon-minus:before{content:\"\\e24d\"}.dcg-calculator-api-container .dcg-icon-new-expression:before{content:\"\\e24e\"}.dcg-calculator-api-container .dcg-icon-new-folder:before{content:\"\\e24f\"}.dcg-calculator-api-container .dcg-icon-new-image:before{content:\"\\e250\"}.dcg-calculator-api-container .dcg-icon-new-table:before{content:\"\\e251\"}.dcg-calculator-api-container .dcg-icon-new-text:before{content:\"\\e252\"}.dcg-calculator-api-container .dcg-icon-pause:before{content:\"\\e253\"}.dcg-calculator-api-container .dcg-icon-pencil:before{content:\"\\e254\"}.dcg-calculator-api-container .dcg-icon-play:before{content:\"\\e255\"}.dcg-calculator-api-container .dcg-icon-plus:before{content:\"\\e256\"}.dcg-calculator-api-container .dcg-icon-question-sign:before{content:\"\\e257\"}.dcg-calculator-api-container .dcg-icon-redo:before{content:\"\\e258\"}.dcg-calculator-api-container .dcg-icon-remove:before{content:\"\\e259\"}.dcg-calculator-api-container .dcg-icon-search:before{content:\"\\e25a\"}.dcg-calculator-api-container .dcg-icon-settings:before{content:\"\\e25b\"}.dcg-calculator-api-container .dcg-icon-share:before{content:\"\\e25c\"}.dcg-calculator-api-container .dcg-icon-show:before{content:\"\\e25d\"}.dcg-calculator-api-container .dcg-icon-table:before{content:\"\\e25e\"}.dcg-calculator-api-container .dcg-icon-text:before{content:\"\\e25f\"}.dcg-calculator-api-container .dcg-icon-twitter:before{content:\"\\e261\"}.dcg-calculator-api-container .dcg-icon-undo:before{content:\"\\e262\"}.dcg-calculator-api-container .dcg-icon-world:before{content:\"\\e263\"}.dcg-calculator-api-container .dcg-icon-wrench:before{content:\"\\e264\"}.dcg-calculator-api-container .dcg-icon-zoom:before{content:\"\\e265\"}.dcg-calculator-api-container .dcg-icon-caret-down:before{content:\"\\e266\"}.dcg-calculator-api-container .dcg-icon-caret-up:before{content:\"\\e269\"}.dcg-calculator-api-container .dcg-icon-check:before{content:\"\\e26a\"}.dcg-calculator-api-container .dcg-icon-chevron-left:before{content:\"\\e26c\"}.dcg-calculator-api-container .dcg-icon-chevron-right:before{content:\"\\e26d\"}.dcg-calculator-api-container .dcg-icon-delete:before{content:\"\\e26f\"}.dcg-calculator-api-container .dcg-icon-art-contest:before{content:\"\\1f3c6\"}.dcg-calculator-api-container .dcg-constrained-height-popover{position:absolute;top:40px;bottom:2px;right:4px;pointer-events:none}.dcg-calculator-api-container .dcg-constrained-height-popover .dcg-popover-interior{max-height:100%;pointer-events:auto}.dcg-calculator-api-container .dcg-popover{z-index:80}.dcg-calculator-api-container .dcg-popover .dcg-popover-interior{padding:20px;background-color:#fff;border:1px solid rgba(0,0,0,.2);border-radius:6px;box-shadow:0 5px 10px #0003;margin:-1px;overflow:auto}.dcg-calculator-api-container .dcg-popover.dcg-top{margin-bottom:10px}.dcg-calculator-api-container .dcg-popover.dcg-right{margin-left:10px}.dcg-calculator-api-container .dcg-popover.dcg-bottom{margin-top:10px}.dcg-calculator-api-container .dcg-popover.dcg-left{margin-right:10px}.dcg-calculator-api-container .dcg-popover .dcg-popover-interior{overflow:auto}.dcg-calculator-api-container .dcg-popover .dcg-popover-content{font-size:85%;color:#444;line-height:1.5em;position:relative}.dcg-calculator-api-container .dcg-popover .dcg-language-picker .dcg-language-header{color:#2f72dc;border-bottom:2px solid #2f72dc}.dcg-calculator-api-container .dcg-popover .dcg-popover-title{margin-bottom:10px;font-size:115%;border-bottom:2px solid #2f72dc;color:#2f72dc;font-weight:400;background-color:#fff}.dcg-calculator-api-container .dcg-popover .dcg-popover-title:not(:first-of-type){padding-top:20px}.dcg-calculator-api-container .dcg-popover .dcg-arrow,.dcg-calculator-api-container .dcg-popover .dcg-arrow:after{position:absolute;display:inline-block;width:0;height:0;border-color:transparent;border-style:solid}.dcg-calculator-api-container .dcg-popover .dcg-arrow:after{content:\"\";z-index:-1}.dcg-calculator-api-container .dcg-popover.dcg-top .dcg-arrow{bottom:-10px;left:50%;margin-left:-10px;border-width:10px 10px 0;border-top-color:#fff}.dcg-calculator-api-container .dcg-popover.dcg-top .dcg-arrow:after{border-width:11px 11px 0;border-top-color:#00000040;bottom:-1px;left:-11px}.dcg-calculator-api-container .dcg-popover.dcg-right .dcg-arrow{top:50%;left:-10px;margin-top:-10px;border-width:10px 10px 10px 0;border-right-color:#fff}.dcg-calculator-api-container .dcg-popover.dcg-right .dcg-arrow:after{border-width:11px 11px 11px 0;border-right-color:#00000040;bottom:-11px;left:-1px}.dcg-calculator-api-container .dcg-popover.dcg-bottom .dcg-arrow{top:-14px;margin-left:-14px;border-width:0 14px 14px;border-bottom-color:#fff}.dcg-calculator-api-container .dcg-popover.dcg-bottom .dcg-arrow:after{border-width:0 14px 14px;border-bottom-color:#00000040;top:-1px;left:-14px}.dcg-calculator-api-container .dcg-popover.dcg-left .dcg-arrow{top:50%;right:-10px;margin-top:-10px;border-width:10px 0 10px 10px;border-left-color:#fff;border-top-color:transparent}.dcg-calculator-api-container .dcg-popover.dcg-left .dcg-arrow:after{border-width:11px 0 11px 11px;border-left-color:#00000040;bottom:-11px;right:-1px}.dcg-calculator-api-container .dcg-tap-container [ontap]{cursor:pointer}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem{display:block;position:relative;margin-top:-1px;border-top:1px solid rgba(206,206,206,.8);border-bottom:1px solid transparent;font-size:100%}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem:not(.dcg-expressionimage){cursor:text}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container{width:100%}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-selected,.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-dragging{border-color:#6a93d2;border-width:2px 0;border-right:1px solid #6a93d2}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-selected .dcg-fade-container,.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-dragging .dcg-fade-container{margin-top:-1px;margin-bottom:-1px}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-selected .dcg-tab,.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-dragging .dcg-tab{color:#fff;border-right:1px solid transparent;background:#6a93d2}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-expression-bottom.dcg-fadein-bottom{position:relative;animation:dcg-fadeIn .8s;cursor:default;z-index:1}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-expression-footer-checkbox{margin:2px 0 4px;font-size:.9rem;color:#666}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-indent-in-folder{margin-left:53px}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-inFolder .dcg-fade-container:after{position:absolute;top:5px;bottom:5px;left:56px;content:\"\";border-left:1px solid rgba(0,0,0,.2);animation:dcg-fadeIn .3s}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-inFolder .dcg-main{margin-left:20px}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-inFolder .dcg-indent-in-folder{margin-left:73px}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-shell{height:54px;background:#fff}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container{position:relative;padding-bottom:6px}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-main{position:relative;padding:15px 35px 9px 53px;white-space:nowrap;font-size:110%;vertical-align:middle}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-main .dcg-mq-container,.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-main .dcg-math-field{width:100%}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-expression-warning{font-size:80%;color:#666;cursor:default}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-expression-warning i{font-size:85%}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-expression-warning a{color:#666;margin-left:5px;text-decoration:underline}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-expression-warning a.dcg-hovered{color:#000}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-expression-warning .dcg-btn{padding:2px 5px;margin-top:4px}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-tab{display:block;position:absolute;top:0;left:0;bottom:0;padding:1px 2px;font-size:65%;text-align:left;color:#00000080;background:#eee;border-right:1px solid rgba(0,0,0,.06);cursor:move;width:38px;touch-action:none}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-readonly .dcg-tab{cursor:default}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontext .dcg-icon-text{position:absolute;top:50%;left:50%;margin:-7px 0 0 -7px;font-size:140%;opacity:.25}.dcg-calculator-api-container .dcg-expressiontable{cursor:default}.dcg-calculator-api-container .dcg-expressiontable .dcg-fade-container.dcg-hovered{box-shadow:none}.dcg-calculator-api-container .dcg-expressionitem.dcg-readonly{background:#eee}.dcg-calculator-api-container .dcg-expressionitem.dcg-readonly .dcg-parameter-suggestion-container{pointer-events:none}.dcg-calculator-api-container .dcg-expressionitem.dcg-readonly .dcg-lock-indicator{opacity:1;color:#bbb;text-shadow:-1px -1px 0 #eee,-1px 1px 0 #eee,1px -1px 0 #eee,1px 1px 0 #eee,0 -1px 0 #eee,0 1px 0 #eee,1px 0 0 #eee,-1px 0 0 #eee;pointer-events:none}.dcg-calculator-api-container .dcg-expressionitem.dcg-readonly .dcg-mathquill-wrapper{pointer-events:none}.dcg-calculator-api-container .dcg-expressionitem.dcg-readonly .dcg-mathquill-wrapper .dcg-tooltip-hit-area-container{pointer-events:auto}.dcg-calculator-api-container .dcg-expressionitem.dcg-readonly .dcg-mathquill-wrapper .dcg-tooltip-hit-area-container .dcg-braille-input{pointer-events:none}.dcg-calculator-api-container .dcg-expressionitem.dcg-readonly .dcg-tabledata .dcg-row .dcg-cell,.dcg-calculator-api-container .dcg-expressionitem.dcg-readonly .dcg-fade-container{cursor:default}.dcg-calculator-api-container .dcg-expressionitem.dcg-readonly .dcg-fade-container .dcg-main .dcg-table-container:before,.dcg-calculator-api-container .dcg-expressionitem.dcg-readonly .dcg-fade-container .dcg-main .dcg-tabledata:before{background:transparent}.dcg-calculator-api-container .dcg-expressionitem.dcg-readonly .dcg-fade-container .dcg-main .dcg-table-container:after,.dcg-calculator-api-container .dcg-expressionitem.dcg-readonly .dcg-fade-container .dcg-main .dcg-tabledata:after{background:transparent}.dcg-calculator-api-container .dcg-exppanel:not(.dcg-edit-list-mode) .dcg-expressionitem.dcg-readonly{cursor:default}.dcg-calculator-api-container .dcg-exppanel:not(.dcg-edit-list-mode) .dcg-expressionitem.dcg-readonly .dcg-edit-list-mathquill,.dcg-calculator-api-container .dcg-exppanel:not(.dcg-edit-list-mode) .dcg-expressionitem.dcg-readonly .dcg-main{cursor:default}.dcg-calculator-api-container .dcg-exppanel:not(.dcg-edit-list-mode) .dcg-expressionitem.dcg-readonly .dcg-evaluation{z-index:1}.dcg-calculator-api-container .dcg-exppanel:not(.dcg-edit-list-mode) .dcg-expressionitem.dcg-readonly:after{content:\"\";position:absolute;top:0;right:0;bottom:0;width:18px;background:linear-gradient(to right,rgba(238,238,238,0),#eeeeee 40%)}.dcg-calculator-api-container .dcg-exppanel:not(.dcg-edit-list-mode) .dcg-expressionitem.dcg-readonly:before{content:\"\";position:absolute;top:0;left:38px;bottom:0;width:18px;background:linear-gradient(to left,rgba(238,238,238,0),#eeeeee 40%);z-index:1}.dcg-calculator-api-container .dcg-exppanel:not(.dcg-edit-list-mode) .dcg-expressionitem.dcg-readonly .dcg-main{overflow-x:auto}.dcg-calculator-api-container .dcg-exppanel:not(.dcg-edit-list-mode) .dcg-expressionitem.dcg-readonly .dcg-main .dcg-table-container{overflow:visible}.dcg-calculator-api-container .dcg-exppanel:not(.dcg-edit-list-mode) .dcg-expressionitem.dcg-readonly .dcg-edit-list-mathquill .dcg-static-mathquill-view{padding-right:20px}.dcg-calculator-api-container .dcg-exppanel:not(.dcg-edit-list-mode) .dcg-mathquill-braille-overflow-right .dcg-tooltip-hit-area-container:after{display:none}.dcg-calculator-api-container .dcg-expressionitem:not(.dcg-mathitem).dcg-selected .dcg-top-level-delete{padding-bottom:0;padding-left:0}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-selected .dcg-top-level-delete,.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-selected .dcg-icon-lock{right:-1px}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-selected .dcg-expression-bottom{margin-right:-1px}.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-top-level-delete,.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-lock-indicator{display:none}.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-expressionitem.dcg-expressiontext .dcg-displayTextarea,.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-expressionitem.dcg-expressionfolder .dcg-displayTextarea{pointer-events:none;opacity:0}.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-expressionitem.dcg-expressiontext textarea,.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-expressionitem.dcg-expressionfolder textarea{opacity:1}.dcg-calculator-api-container .dcg-drag-container{position:absolute;top:0;left:0;right:0;z-index:1000}.dcg-calculator-api-container .dcg-drag-container .dcg-expressionitem{background:#fff;overflow:hidden;box-shadow:0 0 10px #888;border-color:#6a93d2;border-right:1px solid #6a93d2}.dcg-calculator-api-container .dcg-drag-container .dcg-expressionitem .dcg-indent-in-folder,.dcg-calculator-api-container .dcg-drag-container .dcg-expressionitem .dcg-fade-container:after,.dcg-calculator-api-container .dcg-drag-container .dcg-expressionitem .dcg-main{transition:.3s}.dcg-calculator-api-container .dcg-drag-container .dcg-expressionitem .dcg-tab{background:#6a93d2}.dcg-calculator-api-container .dcg-drag-container .dcg-expressionitem .dcg-num{display:none}.dcg-calculator-api-container .dcg-template-expressioneach .dcg-expressionitem.dcg-dragging{visibility:hidden}.dcg-calculator-api-container .dcg-exppanel.dcg-isDragging .dcg-expressionitem.dcg-new-expression{opacity:0}.dcg-calculator-api-container .dcg-container .dcg-mq-editable-field{border:none;box-shadow:none!important}.dcg-calculator-api-container .dcg-container .dcg-mq-editable-field textarea{resize:none}.dcg-calculator-api-container .dcg-tap-container .dcg-mq-math-mode .dcg-mq-supsub{margin-bottom:-.2em}.dcg-calculator-api-container .dcg-tap-container .dcg-mq-math-mode .dcg-mq-sub{font-size:80%}.dcg-calculator-api-container .dcg-tap-container .dcg-mq-math-mode .dcg-mq-int .dcg-mq-sub{font-size:100%}.dcg-calculator-api-container .dcg-clear{clear:both}.dcg-calculator-api-container .dcg-has-background-color .dcg-expressionitem{border-top-color:#0003}.dcg-calculator-api-container .dcg-expression-icon-container{position:absolute;top:28px;left:50%;height:29px;width:29px;margin-top:-14.5px;margin-left:-14.5px;text-align:center;line-height:29px;border-radius:50%}.dcg-calculator-api-container .dcg-selected .dcg-expression-icon-container{top:27px}.dcg-calculator-api-container .dcg-mouse-over-closed-poi,.dcg-calculator-api-container .dcg-mouse-over-opened-poi,.dcg-calculator-api-container .dcg-mouse-over-interactive-label,.dcg-calculator-api-container .dcg-mouse-over-clickable-object{cursor:pointer}.dcg-calculator-api-container .dcg-mouse-over-movable-point{cursor:move}.dcg-calculator-api-container .dcg-mouse-over-movable-point-ew{cursor:ew-resize}.dcg-calculator-api-container .dcg-mouse-over-movable-point-ns{cursor:ns-resize}.dcg-calculator-api-container .dcg-mouse-over-closed-poi .dcg-tracept{display:none}.dcg-calculator-api-container .dcg-poi-label.dcg-show-border .dcg-label{border:1px solid #ddd;background:#fff;border-radius:5px;box-shadow:0 0 5px #0003;padding:8px 6px}.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-math-field{padding:3px 10px}.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-resizing-text-input-container input,.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-text-input-content{padding:5px 10px}.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-editable-label-border{background:rgba(255,255,255,.75);border-radius:4px;border-width:1px;border-style:solid;padding:1px}.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-editable-label-border:not(.dcg-focus):not(.dcg-hovered){border-color:#bbb!important}.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-editable-label-border.dcg-empty-label:not(.dcg-focus):not(.dcg-hovered){border-color:#999!important}.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-editable-label-border.dcg-empty-label,.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-editable-label-border.dcg-focus{background:#fff}.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-editable-label-border.dcg-hovered:not(.dcg-focus){border-style:solid;padding:0;border-width:2px}.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-editable-label-border.dcg-focus{padding:0;border-width:2px}.dcg-calculator-api-container .dcg-poi-label .dcg-static-mathquill-view *{-webkit-user-select:none!important;user-select:none!important}.dcg-calculator-api-container .dcg-poi-label{display:inline-block;position:absolute;top:0;left:0;font-size:100%;color:#222}.dcg-calculator-api-container .dcg-poi-label .dcg-pt{display:inline-block;position:absolute;top:-4px;left:-4px;border:4px solid #000;border-radius:4px;width:0;height:0;z-index:0}.dcg-calculator-api-container .dcg-poi-label .dcg-label{position:absolute;z-index:3;white-space:nowrap}.dcg-calculator-api-container .dcg-poi-label .dcg-label.dcg-enable-transition{transition-property:transform;transition-duration:.3s}.dcg-calculator-api-container .dcg-poi-label .dcg-label .dcg-static-mathquill-view{pointer-events:none}.dcg-calculator-api-container .dcg-poi-label .dcg-label .dcg-mq-sqrt-prefix{text-shadow:none}.dcg-calculator-api-container .dcg-poi-label .dcg-label-raw-text{pointer-events:none}.dcg-calculator-api-container .dcg-poi-label.dcg-underlined-label .dcg-label-raw-text{text-decoration:underline}.dcg-calculator-api-container .dcg-poi-label.dcg-has-outline .dcg-label{text-shadow:-1px -1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,1px 1px 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,1px 0 0 #fff,-1px 0 0 #fff}.dcg-calculator-api-container .dcg-poi-label:not(.dcg-tracept) .dcg-pt{border-width:5px;border-color:transparent!important;border-radius:5px;opacity:1;top:-5px!important;left:-5px!important;cursor:pointer}.dcg-calculator-api-container .dcg-poi-label:not(.dcg-tracept).dcg-opened .dcg-pt{border-color:#000!important}.dcg-calculator-api-container .dcg-poi-label:not(.dcg-tracept).dcg-opened .dcg-label{opacity:1}.dcg-calculator-api-container .dcg-poi-label.dcg-hole .dcg-pt{top:-5px;left:-5px;border-width:2px;padding:3px;background:#fff!important;border-radius:6px}.dcg-calculator-api-container .dcg-poi-label.dcg-hide-dot .dcg-pt{display:none}.dcg-calculator-api-container .dcg-resizing-text-input-container{position:relative;overflow:hidden}.dcg-calculator-api-container .dcg-resizing-text-input-container input{position:absolute;top:1px;left:1px;right:1px;font:inherit;border:0;outline:0;background:transparent;color:inherit}.dcg-calculator-api-container .dcg-resizing-text-input-container:not(.dcg-focus) input::selection{background:transparent}.dcg-calculator-api-container .dcg-resizing-text-input-container.dcg-focus input,.dcg-calculator-api-container .dcg-resizing-text-input-container.dcg-hovered input{position:absolute;top:0;left:0}.dcg-calculator-api-container .dcg-resizing-text-input-container .dcg-text-input-content{min-width:35px;display:inline-block;color:transparent;white-space:pre}.dcg-calculator-api-container .dcg-poi-label.dcg-focus.dcg-naked-label .dcg-label{border:2px solid #5a87cd;padding:3px 10px;border-radius:3px}@keyframes dcg-pulse-cursor{0%{opacity:1}to{opacity:0;transform:scale(2)}}.dcg-calculator-api-container .dcg-geo-keyboard-cursor{position:absolute;pointer-events:none}.dcg-calculator-api-container .dcg-geo-keyboard-cursor:before{content:\"\";position:absolute;width:20px;height:20px;margin-left:-12px;margin-top:-12px;border-radius:50%;border:2px solid gray;animation:dcg-pulse-cursor 2s infinite}.dcg-calculator-api-container .dcg-geo-keyboard-cursor:after{content:\"\";position:absolute;width:20px;height:20px;margin-left:-12px;margin-top:-12px;border-radius:50%;border:2px solid gray;animation:dcg-pulse-cursor 2s infinite;animation-delay:1s}.dcg-calculator-api-container .dcg-tap-container:not(body){position:relative}.dcg-calculator-api-container .dcg-focus-by-tap:focus{outline:none}.dcg-calculator-api-container .dcg-static-mathquill-view *{-webkit-user-select:text!important;user-select:text!important;-moz-user-selection:text!important}.dcg-calculator-api-container .dcg-static-mathquill-view * .dcg-mq-cursor{display:none}.dcg-calculator-api-container .dcg-geo-token-view{cursor:pointer;outline:none;border:2px solid #2f72dc;color:#000;padding:.2em .4em;display:inline-block;border-radius:4px;margin-right:.15em;margin-left:.15em;margin-bottom:2px;width:26px;height:26px;vertical-align:middle;border-color:currentColor;background:#fff;position:relative;font-size:16px;touch-action:none}.dcg-calculator-api-container .dcg-geo-token-view.dcg-static-token{cursor:text}.dcg-calculator-api-container .dcg-geo-token-view:not(.dcg-static-token).dcg-focus-visible{box-shadow:0 0 0 3px #2f72dc80!important}.dcg-calculator-api-container .dcg-geo-token-view.dcg-graph-interactions-disabled{border-style:dashed;opacity:.6}.dcg-calculator-api-container .dcg-geo-token-view>*{pointer-events:none}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-label{position:absolute;right:1px;bottom:-1px;font-family:sans-serif;font-size:75%;padding-right:1px;padding-bottom:1px}.dcg-calculator-api-container .dcg-geo-token-view i{font-style:normal}.dcg-calculator-api-container .dcg-geo-token-view.dcg-assignment-token{border:1px solid #999;padding:0;text-align:center;width:auto;min-width:26px}.dcg-calculator-api-container .dcg-geo-token-view.dcg-assignment-token .dcg-token-background{display:none}.dcg-calculator-api-container .dcg-geo-token-view.dcg-assignment-token.dcg-hovered:not(.dcg-static-token),.dcg-calculator-api-container .dcg-geo-token-view.dcg-assignment-token:focus-within:not(.dcg-static-token){border:1px solid #999;box-shadow:0 0 0 1px #999}.dcg-calculator-api-container .dcg-geo-token-view.dcg-assignment-token.dcg-selected-token:not(.dcg-static-token){background-color:#fff;border:1px solid #666;box-shadow:0 0 0 1px #666}.dcg-calculator-api-container .dcg-geo-token-view.dcg-token-has-label .dcg-token-point,.dcg-calculator-api-container .dcg-geo-token-view.dcg-token-has-label .dcg-token-midpoint,.dcg-calculator-api-container .dcg-geo-token-view.dcg-token-has-label .dcg-token-intersection,.dcg-calculator-api-container .dcg-geo-token-view.dcg-token-has-label .dcg-token-glider{position:relative;top:-6px;left:-9px}.dcg-calculator-api-container .dcg-geo-token-view.dcg-token-has-label .dcg-token-point:after,.dcg-calculator-api-container .dcg-geo-token-view.dcg-token-has-label .dcg-token-midpoint:after,.dcg-calculator-api-container .dcg-geo-token-view.dcg-token-has-label .dcg-token-intersection:after,.dcg-calculator-api-container .dcg-geo-token-view.dcg-token-has-label .dcg-token-glider:after{display:none}.dcg-calculator-api-container .dcg-geo-token-view.dcg-token-has-label .dcg-token-point:before,.dcg-calculator-api-container .dcg-geo-token-view.dcg-token-has-label .dcg-token-midpoint:before,.dcg-calculator-api-container .dcg-geo-token-view.dcg-token-has-label .dcg-token-intersection:before,.dcg-calculator-api-container .dcg-geo-token-view.dcg-token-has-label .dcg-token-glider:before{display:none}.dcg-calculator-api-container .dcg-geo-token-view.dcg-selected-token .dcg-token-label{color:#fff}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-background{opacity:.25;display:block;width:100%;height:100%;background:currentColor;position:absolute;top:0;left:0;bottom:0;right:0}.dcg-calculator-api-container .dcg-geo-token-view.dcg-hovered:not(.dcg-static-token) .dcg-token-background,.dcg-calculator-api-container .dcg-geo-token-view:focus-within:not(.dcg-static-token) .dcg-token-background{opacity:.4}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-icon{position:absolute;top:0;left:0;bottom:0;right:0;overflow:hidden;text-align:center;line-height:24px}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-polygon,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-point,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-glider,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-intersection,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-midpoint{font-size:140%}.dcg-calculator-api-container .dcg-geo-token-view .dcg-icon-angle{font-size:110%}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-vector,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-translate{font-size:130%;padding-top:1px}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-translate{transform:rotate(-45deg)}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-vector{transform:rotate(var(--dcg-icon-angle, -45deg))}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-line:before{transform:rotate(var(--dcg-icon-angle, 20deg))}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-segment:before{transform:rotate(var(--dcg-icon-angle, -20deg))}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-ray:before{transform:rotate(var(--dcg-icon-angle, -60deg))}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-rotate,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-dilate,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-reflect,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-transformation{font-size:130%;color:#000}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-transformation{font-size:100%}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-rotate{margin-top:1px}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-translate{margin-left:1px}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-dilate{font-size:140%;margin-left:-1px}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-reflect:before{position:absolute;top:2px;bottom:2px;left:50%;border-right:1px solid rgba(0,0,0,.3);margin-left:-.5px;content:\"\"}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-glider:before,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-line:before,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-segment:before,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-ray:before,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-intersection:before,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-midpoint:before,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-parallel:before,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-perpendicular:before{content:\"\";height:2px;background:currentColor;position:absolute;top:50%;left:50%;margin-top:-1px}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-intersection:after,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-midpoint:after,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-parallel:after,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-perpendicular:after{content:\"\";height:2px;background:currentColor;position:absolute;top:50%;left:50%;margin-top:-1px}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-glider:before{width:16px;margin-left:-8px;opacity:.7}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-intersection:before{transform:rotate(-45deg);width:20px;margin-left:-10px;opacity:.6}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-intersection:after{transform:rotate(45deg);width:20px;margin-left:-10px;opacity:.6}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-midpoint:before{transform:rotate(0);width:20px;margin-left:-10px;opacity:.6}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-segment:before{width:16px;margin-left:-8px}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-ray:before{width:20px;margin-left:-5px;transform-origin:25% 25%}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-line:before{width:40px;margin-left:-20px}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-parallel:before,.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-perpendicular:before{width:40px;margin-left:-20px;transform:rotate(-20deg)}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-parallel:after{width:40px;margin-left:-20px;transform:rotate(-20deg);opacity:.4;transform-origin:5px 0}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-perpendicular:after{width:40px;margin-left:-20px;transform:rotate(70deg);opacity:.4}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-circle{border:2px solid currentColor;width:16px;height:16px;margin-top:3px;margin-left:3px;border-radius:50%}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-arc{position:absolute;top:-6px;left:-4px;width:22px;height:20px;transform:rotate(-45deg);background:transparent;overflow:hidden}.dcg-calculator-api-container .dcg-geo-token-view .dcg-token-arc:after{content:\"\";position:absolute;top:50%;left:0%;border:2px solid currentColor;border-radius:50%;width:14px;height:14px}.dcg-calculator-api-container .dcg-geo-token-view.dcg-selected-token{background-color:currentColor}.dcg-calculator-api-container .dcg-geo-token-view.dcg-selected-token .dcg-token-icon{color:#fff}.dcg-calculator-api-container .dcg-geo-token-view.dcg-child-of-hovered-token:not(.dcg-static-token):after{content:\"\";position:absolute;bottom:100%;left:50%;margin-left:-8px;border:1px solid transparent;border-width:6px 8px;border-bottom-color:#0003}.dcg-calculator-api-container .dcg-geo-token-view.dcg-parent-of-hovered-token:not(.dcg-static-token):after{content:\"\";position:absolute;top:100%;left:50%;margin-left:-8px;border:1px solid transparent;border-width:6px 8px;border-top-color:#0003}.dcg-calculator-api-container .dcg-geo-token-view .dcg-icon-lock{font-size:.7rem;color:#666;text-shadow:-1px -1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,1px 1px 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,1px 0 0 #fff,-1px 0 0 #fff;opacity:1;position:absolute;bottom:0;right:0}.dcg-calculator-api-container .dcg-mq-container{position:relative;display:inline-block}.dcg-calculator-api-container .dcg-mq-container .dcg-mq-placeholder{position:absolute;top:50%;left:0;right:0;line-height:1em;height:1em;margin-top:-.67em;font-size:95%;pointer-events:none;font-family:Symbola,Times New Roman,serif;padding-left:2px;color:#00000078}.dcg-calculator-api-container .dcg-mq-container .dcg-mq-placeholder .dcg-mq-math-mode{font-size:inherit}.dcg-calculator-api-container .dcg-container .dcg-suffix-degree .dcg-mq-root-block:after{content:\"\\b0\";vertical-align:top;opacity:.6;margin-left:1px}.dcg-calculator-api-container .dcg-container .dcg-suffix-radian .dcg-mq-root-block:after{content:\"rad\";font-size:90%;opacity:.6;margin-left:3px}.dcg-calculator-api-container .dcg-container .dcg-mq-editable-field:not(.dcg-no-fadeout){position:relative}.dcg-calculator-api-container .dcg-container .dcg-mq-editable-field:not(.dcg-no-fadeout):after{content:\"\";position:absolute;top:0;right:0;bottom:0;width:14px;background:linear-gradient(to right,rgba(255,255,255,0),#fff);pointer-events:none}.dcg-calculator-api-container .dcg-container .dcg-mq-editable-field:not(.dcg-no-fadeout) .dcg-mq-root-block{padding-right:10px}.dcg-calculator-api-container .dcg-container .dcg-mq-editable-field:not(.dcg-no-fadeout) .dcg-mq-root-block.dcg-mq-editing-overflow-left:before{content:\"\";position:absolute;top:0;left:0;bottom:0;width:14px;background:linear-gradient(to left,rgba(255,255,255,0),#fff);pointer-events:none}.dcg-calculator-api-container .dcg-has-background-color .dcg-mq-editable-field:after{display:none}.dcg-calculator-api-container .dcg-has-background-color .dcg-mq-editable-field:after .dcg-mq-editing-overflow-left:before{display:none}.dcg-calculator-api-container .dcg-audio-trace-line{position:absolute;opacity:50%;background:var(--dcg-trace-color, #aaa)}.dcg-calculator-api-container .dcg-audio-trace-line.dcg-audio-trace-line--horizontal{left:0;right:0;height:4px;top:var(--dcg-trace-coord, -10px)}.dcg-calculator-api-container .dcg-audio-trace-line:not(.dcg-audio-trace-line--horizontal){bottom:0;width:4px;top:0;left:var(--dcg-trace-coord, -10px)}.dcg-calculator-api-container .dcg-multi-select-header{display:flex;align-items:center;padding:3px;position:relative}.dcg-calculator-api-container .dcg-multi-select-header .dcg-circular-icon{margin-right:8px;float:left}.dcg-calculator-api-container .dcg-multi-select-header .dcg-btn-light-gray{border-color:#bbb;padding:3px 5px;font-size:90%;margin-right:4px}.dcg-calculator-api-container .dcg-multi-select-header .dcg-btn-outline{display:inline-block;padding-left:10px;padding-right:10px;border:1px solid #666;color:#666;border-radius:5px;height:32px;line-height:30px;cursor:pointer}.dcg-calculator-api-container .dcg-multi-select-header .dcg-btn-outline.dcg-hovered:not(.dcg-disabled){color:#666;border:1px solid #666;box-shadow:0 0 0 1px #666}.dcg-calculator-api-container .dcg-multi-select-header .dcg-btn-outline.dcg-depressed:not(.dcg-disabled){border:1px solid #000;box-shadow:0 0 0 1px #000;color:#000}.dcg-calculator-api-container .dcg-multi-select-header .dcg-btn-outline[role=button].dcg-focus-visible,.dcg-calculator-api-container .dcg-multi-select-header .dcg-navigate-back[role=button].dcg-focus-visible,.dcg-calculator-api-container .dcg-multi-select-header .dcg-delete-btn[role=button].dcg-focus-visible,.dcg-calculator-api-container .dcg-multi-select-header .dcg-more-options[role=button].dcg-focus-visible{outline:none;box-shadow:0 0 0 2px #2f72dc80!important;border-radius:5px}.dcg-calculator-api-container .dcg-multi-select-header .dcg-delete-btn{margin-right:12px}.dcg-calculator-api-container .dcg-multi-select-header .dcg-transformations-button{margin-left:7px;margin-right:5px}.dcg-calculator-api-container .dcg-multi-select-header .dcg-transformations-button .dcg-icon-caret-down{font-size:75%;color:#999;margin-left:4px}.dcg-calculator-api-container .dcg-multi-select-header .dcg-transformations-button.dcg-hovered .dcg-icon-caret-down,.dcg-calculator-api-container .dcg-multi-select-header .dcg-transformations-button.dcg-transformations-open .dcg-icon-caret-down{color:#666}.dcg-calculator-api-container .dcg-multi-select-header .dcg-show-hide-btn{text-align:center;overflow:hidden}.dcg-calculator-api-container .dcg-multi-select-header .dcg-show-hide-btn div{transition:transform .2s;max-height:30px;overflow:hidden}.dcg-calculator-api-container .dcg-multi-select-header .dcg-show-hide-btn:not(.dcg-any-visible-objects) div{transform:translateY(-30px)}.dcg-calculator-api-container .dcg-multi-select-header .dcg-multi-select-icon-button{color:#999;font-size:22px;padding:5px}.dcg-calculator-api-container .dcg-multi-select-header .dcg-multi-select-icon-button.dcg-more-options{margin:0;position:relative;top:2px}.dcg-calculator-api-container .dcg-multi-select-header .dcg-multi-select-icon-button.dcg-transformations-button{margin:0;position:relative;top:2px;background:#f00}.dcg-calculator-api-container .dcg-multi-select-header .dcg-multi-select-icon-button.dcg-hovered{color:#666}.dcg-calculator-api-container .dcg-multi-select-header .dcg-multi-select-icon-button.dcg-depressed{color:#222}.dcg-calculator-api-container .dcg-tooltip-hit-area-container{position:relative;cursor:default!important;line-height:initial}.dcg-calculator-api-container .dcg-tooltip-hit-area-container.dcg-display-block{width:100%}.dcg-calculator-api-container .dcg-tooltip-hit-area-container:not(.dcg-display-block){display:inline-block}.dcg-calculator-api-container .dcg-tooltip-mount-pt{position:absolute;top:0;left:0}.dcg-calculator-api-container .dcg-tooltip-positioning-container{position:absolute;pointer-events:none;z-index:10000}.dcg-calculator-api-container .dcg-tooltip-positioning-container .dcg-tooltip-message-container{position:absolute;z-index:10000;animation:dcg-fadeIn .3s}.dcg-calculator-api-container .dcg-tooltip-positioning-container .dcg-tooltip-message{max-width:100%;border-radius:4px;padding:5px 8px;font-size:14px;line-height:1.1em;display:inline-block;pointer-events:all;text-align:center;position:relative}.dcg-calculator-api-container .dcg-tooltip-positioning-container .dcg-tooltip-message.dcg-sticky-not-stuck{cursor:pointer}.dcg-calculator-api-container .dcg-tooltip-positioning-container.dcg-tooltip-theme-dark .dcg-tooltip-message{background:#000;color:#fff}.dcg-calculator-api-container .dcg-tooltip-positioning-container.dcg-tooltip-theme-dark.dcg-sticky-not-stuck{background:#666}.dcg-calculator-api-container .dcg-tooltip-positioning-container.dcg-tooltip-theme-light .dcg-tooltip-message{background:#fff;color:#000;border:1px solid #bbb;border-radius:5px}.dcg-calculator-api-container .dcg-tooltip-positioning-container.dcg-tooltip-theme-light .dcg-tooltip-message .dcg-static-mathquill-view{width:100%}.dcg-calculator-api-container .dcg-tooltip-positioning-container.dcg-tooltip-theme-light .dcg-tooltip-message .dcg-mq-root-block *{-webkit-user-select:none!important;user-select:none!important;cursor:default}.dcg-calculator-api-container .dcg-tooltip-positioning-container.dcg-tooltip-theme-light .dcg-tooltip-arrow{transform:rotate(45deg)}.dcg-calculator-api-container .dcg-tooltip-positioning-container.dcg-tooltip-theme-light.dcg-tooltip-gravity-n-s .dcg-tooltip-arrow{transform:translate(-50%) rotate(45deg)}.dcg-calculator-api-container .dcg-tooltip-positioning-container.dcg-tooltip-theme-light.dcg-tooltip-gravity-e-w .dcg-tooltip-arrow{transform:translateY(-50%) rotate(45deg)}.dcg-calculator-api-container .dcg-tooltip-positioning-container .dcg-tooltip-arrow{position:absolute;animation:dcg-fadeIn .3s;z-index:10000}.dcg-calculator-api-container .dcg-dot-dot-dropdown{position:relative;height:1em;width:1em;display:inline-block}.dcg-calculator-api-container .dcg-dot-dot-dropdown span{display:inline-block;width:5px;height:5px;background:currentcolor;border-radius:50%;position:absolute;left:50%;top:50%;margin-left:-3px;margin-top:-3px}.dcg-calculator-api-container .dcg-dot-dot-dropdown span:first-of-type{top:15%}.dcg-calculator-api-container .dcg-dot-dot-dropdown span:last-of-type{top:85%}.dcg-calculator-api-container .dcg-navigate-back{font-size:120%;margin-right:12px;border-right:1px solid rgba(0,0,0,.1);text-align:left;height:34px;padding-left:5px;padding-right:10px;display:flex;align-items:center}.dcg-calculator-api-container .dcg-navigate-back .dcg-navigate-back-message{font-size:75%;text-align:center;color:#666;line-height:1em}.dcg-calculator-api-container .dcg-navigate-back i{width:34px;color:#999}.dcg-calculator-api-container .dcg-navigate-back.dcg-hovered i{color:#666}.dcg-calculator-api-container .dcg-navigate-back.dcg-depressed i{color:#222}.dcg-calculator-api-container .dcg-multi-select-options-menu{width:230px;margin-left:-200px;margin-top:35px}.dcg-calculator-api-container .dcg-multi-select-options-menu:after{content:\"\";position:absolute;top:-10px;right:5px;border-width:10px;border-top-width:0;border-style:solid;border-color:transparent transparent #fff;line-height:0}.dcg-calculator-api-container .dcg-multi-select-options-menu:before{content:\"\";position:absolute;top:-11px;right:4px;border-width:11px;border-top-width:0;border-style:solid;border-color:transparent transparent #ccc;line-height:0}.dcg-calculator-api-container .dcg-multi-select-options-menu .dcg-label-container input.dcg-label-input{margin-top:6px;font-size:90%}.dcg-calculator-api-container .dcg-multi-select-options-menu .dcg-checkbox-section{margin-top:5px}.dcg-calculator-api-container .dcg-multi-select-options-menu .dcg-selected-objects-header{border-bottom:1px solid rgba(0,0,0,.2);padding-bottom:10px;margin-bottom:10px}.dcg-calculator-api-container .dcg-component-checkbox{cursor:pointer;position:relative}.dcg-calculator-api-container .dcg-component-checkbox .dcg-checkbox{border:1px solid #bbb;margin-right:.5em;width:1.1em;height:1.1em;border-radius:3px;vertical-align:middle;display:inline-block;position:relative}.dcg-calculator-api-container .dcg-component-checkbox .dcg-checkbox i{display:none;font-size:115%;position:absolute;top:-.15em;left:.1em;text-shadow:-1px -1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,1px 1px 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,1px 0 0 #fff,-1px 0 0 #fff}.dcg-calculator-api-container .dcg-component-checkbox .dcg-checkbox-children{position:relative;top:.1em}.dcg-calculator-api-container .dcg-component-checkbox.dcg-hovered:not(.dcg-checked) .dcg-checkbox{border:1px solid #999}.dcg-calculator-api-container .dcg-component-checkbox.dcg-hovered:not(.dcg-checked) .dcg-checkbox i{display:block;color:#e2e2e2}.dcg-calculator-api-container .dcg-component-checkbox.dcg-checked .dcg-checkbox i{display:block;color:#2f72dc}.dcg-calculator-api-container .dcg-component-checkbox.dcg-checked.dcg-hovered .dcg-checkbox{border:1px solid #999}.dcg-calculator-api-container .dcg-component-checkbox.dcg-disabled{pointer-events:none;opacity:.5}.dcg-calculator-api-container .dcg-component-checkbox.dcg-disabled .dcg-checkbox{background:rgba(0,0,0,.15)}.dcg-calculator-api-container .dcg-component-checkbox.dcg-disabled.dcg-checked i{display:block;color:#999}.dcg-calculator-api-container .dcg-component-checkbox.dcg-small{font-size:85%}.dcg-calculator-api-container .dcg-move-to-folder{border-top:1px solid rgba(0,0,0,.2);margin-top:10px;padding-top:10px}.dcg-calculator-api-container .dcg-move-to-folder .dcg-move-to-folder-title{font-size:90%;color:#666;margin-bottom:3px}.dcg-calculator-api-container .dcg-move-to-folder .dcg-move-to-folder-flex{display:flex}.dcg-calculator-api-container .dcg-move-to-folder .dcg-btn-blue{margin-left:5px;padding:0 8px;font-size:90%;height:30px;line-height:28px}.dcg-calculator-api-container .dcg-move-to-folder .dcg-btn-blue.dcg-disabled{pointer-events:none;opacity:.5}.dcg-calculator-api-container .dcg-move-to-folder input{padding:0 5px;border:1px solid rgba(0,0,0,.2);outline:none;border-radius:4px;width:100%;font-size:90%}.dcg-calculator-api-container .dcg-move-to-folder input.dcg-hovered{border:1px solid rgba(0,0,0,.2);box-shadow:0 0 0 1px #0003}.dcg-calculator-api-container .dcg-move-to-folder input:focus{border:1px solid #2f72dc;box-shadow:0 0 0 1px #2f72dc}.dcg-calculator-api-container .dcg-expressions-options-menu,.dcg-calculator-api-container .dcg-table-column-menu,.dcg-calculator-api-container .dcg-image-options-menu,.dcg-calculator-api-container .dcg-generic-options-menu{min-width:222px}.dcg-calculator-api-container .dcg-expressions-options-menu.dcg-options-menu,.dcg-calculator-api-container .dcg-table-column-menu.dcg-options-menu,.dcg-calculator-api-container .dcg-image-options-menu.dcg-options-menu,.dcg-calculator-api-container .dcg-generic-options-menu.dcg-options-menu{padding-left:0;padding-right:0}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-options-menu-content,.dcg-calculator-api-container .dcg-table-column-menu .dcg-options-menu-content,.dcg-calculator-api-container .dcg-image-options-menu .dcg-options-menu-content,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-options-menu-content{animation:dcg-fadeIn .3s}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-options-flex-container,.dcg-calculator-api-container .dcg-table-column-menu .dcg-options-flex-container,.dcg-calculator-api-container .dcg-image-options-menu .dcg-options-flex-container,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-options-flex-container{display:flex;margin:5px 0 10px;max-width:200px}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-options-left-side,.dcg-calculator-api-container .dcg-table-column-menu .dcg-options-left-side,.dcg-calculator-api-container .dcg-image-options-menu .dcg-options-left-side,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-options-left-side{flex:1}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-options-menu-section,.dcg-calculator-api-container .dcg-table-column-menu .dcg-options-menu-section,.dcg-calculator-api-container .dcg-image-options-menu .dcg-options-menu-section,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-options-menu-section{padding-left:10px;padding-right:10px}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-options-menu-section:not(:first-of-type),.dcg-calculator-api-container .dcg-table-column-menu .dcg-options-menu-section:not(:first-of-type),.dcg-calculator-api-container .dcg-image-options-menu .dcg-options-menu-section:not(:first-of-type),.dcg-calculator-api-container .dcg-generic-options-menu .dcg-options-menu-section:not(:first-of-type){border-top:1px solid #e2e2e2;padding-top:10px;margin-top:10px}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-options-menu-section:not(:first-of-type).dcg-section-without-title,.dcg-calculator-api-container .dcg-table-column-menu .dcg-options-menu-section:not(:first-of-type).dcg-section-without-title,.dcg-calculator-api-container .dcg-image-options-menu .dcg-options-menu-section:not(:first-of-type).dcg-section-without-title,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-options-menu-section:not(:first-of-type).dcg-section-without-title{padding-top:3px}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-options-menu-section .dcg-toggle-view,.dcg-calculator-api-container .dcg-table-column-menu .dcg-options-menu-section .dcg-toggle-view,.dcg-calculator-api-container .dcg-image-options-menu .dcg-options-menu-section .dcg-toggle-view,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-options-menu-section .dcg-toggle-view{margin-top:3px}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-point-segmented-option,.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-line-segmented-option,.dcg-calculator-api-container .dcg-table-column-menu .dcg-point-segmented-option,.dcg-calculator-api-container .dcg-table-column-menu .dcg-line-segmented-option,.dcg-calculator-api-container .dcg-image-options-menu .dcg-point-segmented-option,.dcg-calculator-api-container .dcg-image-options-menu .dcg-line-segmented-option,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-point-segmented-option,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-line-segmented-option{width:33px;height:30px;line-height:30px;color:#999}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-point-segmented-option.dcg-hovered:not(.dcg-selected),.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-line-segmented-option.dcg-hovered:not(.dcg-selected),.dcg-calculator-api-container .dcg-table-column-menu .dcg-point-segmented-option.dcg-hovered:not(.dcg-selected),.dcg-calculator-api-container .dcg-table-column-menu .dcg-line-segmented-option.dcg-hovered:not(.dcg-selected),.dcg-calculator-api-container .dcg-image-options-menu .dcg-point-segmented-option.dcg-hovered:not(.dcg-selected),.dcg-calculator-api-container .dcg-image-options-menu .dcg-line-segmented-option.dcg-hovered:not(.dcg-selected),.dcg-calculator-api-container .dcg-generic-options-menu .dcg-point-segmented-option.dcg-hovered:not(.dcg-selected),.dcg-calculator-api-container .dcg-generic-options-menu .dcg-line-segmented-option.dcg-hovered:not(.dcg-selected){color:#666}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-point-segmented-option i,.dcg-calculator-api-container .dcg-table-column-menu .dcg-point-segmented-option i,.dcg-calculator-api-container .dcg-image-options-menu .dcg-point-segmented-option i,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-point-segmented-option i{font-size:150%}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-line-segmented-option i,.dcg-calculator-api-container .dcg-table-column-menu .dcg-line-segmented-option i,.dcg-calculator-api-container .dcg-image-options-menu .dcg-line-segmented-option i,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-line-segmented-option i{font-size:130%}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-iconed-mathquill-row,.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-clickable-menu-row,.dcg-calculator-api-container .dcg-table-column-menu .dcg-iconed-mathquill-row,.dcg-calculator-api-container .dcg-table-column-menu .dcg-clickable-menu-row,.dcg-calculator-api-container .dcg-image-options-menu .dcg-iconed-mathquill-row,.dcg-calculator-api-container .dcg-image-options-menu .dcg-clickable-menu-row,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-iconed-mathquill-row,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-clickable-menu-row{padding:7px 0 1px}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-iconed-mathquill-row i,.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-iconed-mathquill-row .dcg-font-size,.dcg-calculator-api-container .dcg-table-column-menu .dcg-iconed-mathquill-row i,.dcg-calculator-api-container .dcg-table-column-menu .dcg-iconed-mathquill-row .dcg-font-size,.dcg-calculator-api-container .dcg-image-options-menu .dcg-iconed-mathquill-row i,.dcg-calculator-api-container .dcg-image-options-menu .dcg-iconed-mathquill-row .dcg-font-size,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-iconed-mathquill-row i,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-iconed-mathquill-row .dcg-font-size{color:#999;margin-right:5px;cursor:pointer;width:13px;display:inline-block;position:relative;top:2px;line-height:1em}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-iconed-mathquill-row .dcg-math-field,.dcg-calculator-api-container .dcg-table-column-menu .dcg-iconed-mathquill-row .dcg-math-field,.dcg-calculator-api-container .dcg-image-options-menu .dcg-iconed-mathquill-row .dcg-math-field,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-iconed-mathquill-row .dcg-math-field{border-bottom:1px solid rgba(0,0,0,.2);padding:1px 2px;margin:1px;min-width:42px;max-width:60px;font-size:95%}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-focus,.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-invalid,.dcg-calculator-api-container .dcg-table-column-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-focus,.dcg-calculator-api-container .dcg-table-column-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-invalid,.dcg-calculator-api-container .dcg-image-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-focus,.dcg-calculator-api-container .dcg-image-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-invalid,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-focus,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-invalid{border-bottom:2px solid #2f72dc;margin-bottom:0}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-invalid,.dcg-calculator-api-container .dcg-table-column-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-invalid,.dcg-calculator-api-container .dcg-image-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-invalid,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view),.dcg-calculator-api-container .dcg-table-column-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view),.dcg-calculator-api-container .dcg-image-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view),.dcg-calculator-api-container .dcg-generic-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-line-thickness-row-3d,.dcg-calculator-api-container .dcg-table-column-menu .dcg-line-thickness-row-3d,.dcg-calculator-api-container .dcg-image-options-menu .dcg-line-thickness-row-3d,.dcg-calculator-api-container .dcg-generic-options-menu .dcg-line-thickness-row-3d{margin-bottom:8px}.dcg-calculator-api-container .dcg-color-picker-container{max-height:185px;overflow-y:auto;margin-right:-10px;padding-right:10px;margin-left:-2px;padding-left:2px;margin-bottom:-2px;padding-bottom:2px}.dcg-calculator-api-container .dcg-color-picker-container .dcg-color-picker-menu{display:grid;grid-template-columns:repeat(6,30px);gap:4px;grid-auto-flow:row;grid-auto-rows:30px;padding-top:2px}.dcg-calculator-api-container .dcg-color-picker-container .dcg-color-picker-menu:first-of-type{margin-top:0}.dcg-calculator-api-container .dcg-color-picker-container .dcg-color-picker-menu .dcg-color-tile{position:relative;outline:none}.dcg-calculator-api-container .dcg-color-picker-container .dcg-color-picker-menu .dcg-color-tile.dcg-focus-visible{box-shadow:0 0 0 2px #2f72dc80!important}.dcg-calculator-api-container .dcg-color-picker-container .dcg-color-picker-menu .dcg-color-tile i{position:absolute;top:50%;left:0;right:0;pointer-events:none;height:20px;line-height:20px;color:#fff;margin-top:-10px;text-align:center}.dcg-calculator-api-container .dcg-color-picker-container .dcg-color-picker-menu .dcg-color-tile i.dcg-light-color{color:#444}.dcg-calculator-api-container .dcg-color-picker-container .dcg-color-picker-menu .dcg-color-tile i.dcg-mixed-color{text-shadow:0 0 3px rgba(0,0,0,.8)}.dcg-calculator-api-container .dcg-color-swatch{width:30px;height:30px;border-radius:3px;overflow:hidden}.dcg-calculator-api-container .dcg-color-swatch.dcg-light-color{box-shadow:0 0 0 1px #0003 inset}.dcg-calculator-api-container .dcg-container.dcg-inverted-swatches .dcg-color-swatch.dcg-light-color{box-shadow:0 0 0 1px #fff3 inset}.dcg-calculator-api-container .dcg-color-swatch.dcg-hovered:not(.dcg-color-evaluation){box-shadow:0 0 0 2px #00000026}.dcg-calculator-api-container .dcg-color-swatch.dcg-hovered:not(.dcg-color-evaluation).dcg-light-color{box-shadow:0 0 0 2px #00000026,0 0 0 1px #0003 inset}.dcg-calculator-api-container .dcg-container.dcg-inverted-swatches .dcg-color-swatch.dcg-hovered:not(.dcg-color-evaluation).dcg-light-color{box-shadow:0 0 0 1px #fff3 inset}.dcg-calculator-api-container .dcg-color-swatch.dcg-depressed:not(.dcg-color-evaluation){box-shadow:0 0 0 2px #00000040}.dcg-calculator-api-container .dcg-color-swatch.dcg-depressed:not(.dcg-color-evaluation).dcg-light-color{box-shadow:0 0 0 2px #00000040,0 0 0 1px #0003 inset}.dcg-calculator-api-container .dcg-container.dcg-inverted-swatches .dcg-color-swatch.dcg-depressed:not(.dcg-color-evaluation).dcg-light-color{box-shadow:0 0 0 1px #fff3 inset}.dcg-calculator-api-container .dcg-color-swatch.dcg-has-background-image{background:#fff;width:30px;height:30px;overflow:hidden;background-size:30px 30px!important;content:\"\"}.dcg-calculator-api-container .dcg-container .dcg-editable-mode-toggle{padding-left:5px}.dcg-calculator-api-container .dcg-container .dcg-label-container{cursor:default;display:flex}.dcg-calculator-api-container .dcg-container .dcg-label-container input{outline:none;border:1px solid #bbb;border-top:0!important;border-right:0!important;border-left:0!important;color:#000;padding:1px 2px;-webkit-appearance:none;appearance:none;border-radius:0;min-width:5px;font-size:inherit;margin-left:5px;flex:1}.dcg-calculator-api-container .dcg-container .dcg-label-container input.dcg-hovered{border-color:#ccc;box-shadow:0 1px #ccc}.dcg-calculator-api-container .dcg-container .dcg-label-container input:focus:not([disabled]){border-color:#2f72dc;box-shadow:0 1px #2f72dc}.dcg-calculator-api-container .dcg-container .dcg-label-container input.dcg-disabled-editable-input{opacity:0;pointer-events:none}.dcg-calculator-api-container .dcg-container .dcg-label-container input.dcg-readonly{pointer-events:none}.dcg-calculator-api-container .dcg-container .dcg-label-container:not(.dcg-label-visible) input.dcg-disabled-input:not(:focus){border-bottom-color:transparent;pointer-events:none}.dcg-calculator-api-container .dcg-container .dcg-label-container.dcg-label-visible .dcg-checkbox{color:#666}.dcg-calculator-api-container .dcg-container .dcg-editable-mode-toggle{position:relative;top:-3px}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expression-bottom .dcg-label-container{font-size:100%}.dcg-calculator-api-container .dcg-expression-bottom .dcg-label-container{font-size:80%;color:#00000080;padding-right:10px}.dcg-calculator-api-container .dcg-segmented-control-container{display:flex}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn{color:#000000d9;text-align:center;display:flex;justify-content:center;align-items:center;border:1px solid rgba(0,0,0,.42)}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn .dcg-segmented-control-interior{cursor:pointer}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn i{position:relative;top:1px}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn:not(:last-of-type){border-right:0}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-hovered:not(.dcg-selected){color:#000}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-depressed:not(.dcg-selected){background:rgba(0,0,0,.05)}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn:first-of-type{border-top-left-radius:3px;border-bottom-left-radius:3px}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn:last-of-type{border-top-right-radius:3px;border-bottom-right-radius:3px}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-selected{color:#fff;position:relative}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-theme-default{flex:1}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-theme-default .dcg-segmented-control-interior{height:34px;line-height:34px;padding:0 8px}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-theme-default.dcg-hovered:not(.dcg-selected){border-color:#0000009e}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-theme-default.dcg-selected{border:1px solid rgba(0,0,0,.65);background:rgba(0,0,0,.65)}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-theme-mini{border-color:#ccc}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-theme-mini .dcg-segmented-control-interior{padding:4px 6px}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-theme-mini.dcg-hovered:not(.dcg-selected){background:rgba(0,0,0,.05)}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-theme-mini.dcg-depressed:not(.dcg-selected){background:rgba(0,0,0,.2)}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-theme-mini.dcg-selected{background:rgba(47,114,220,.15);border-color:#2f72dc;color:#2f72dc;cursor:default!important}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-theme-mini.dcg-selected+.dcg-segmented-control-btn{border-left:1px solid #2f72dc}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-theme-mini.dcg-disabled{pointer-events:none}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-theme-mini.dcg-disabled.dcg-selected+.dcg-segmented-control-btn{border-left:1px solid #666}.dcg-calculator-api-container .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-theme-mini.dcg-disabled.dcg-selected{background:rgba(0,0,0,.1);border-color:#666;color:#000}.dcg-calculator-api-container .dcg-multi-select-transformations-menu{width:300px;margin-left:-190px;margin-top:35px}.dcg-calculator-api-container .dcg-multi-select-transformations-menu:after{content:\"\";position:absolute;top:-10px;right:5px;border-width:10px;border-top-width:0;border-style:solid;border-color:transparent transparent #fff;line-height:0}.dcg-calculator-api-container .dcg-multi-select-transformations-menu:before{content:\"\";position:absolute;top:-11px;right:4px;border-width:11px;border-top-width:0;border-style:solid;border-color:transparent transparent #ccc;line-height:0}.dcg-calculator-api-container .dcg-multi-select-transformations-menu.dcg-options-menu{padding:10px 10px 0}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-new-transformations-container{display:flex;margin-bottom:10px}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-new-transformations-container .dcg-new-transformation{border:1px solid rgba(0,0,0,.2);padding:5px;text-align:center;width:64px;font-size:70%;border-radius:5px;color:#999}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-new-transformations-container .dcg-new-transformation:not(:last-of-type){margin-right:8px}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-new-transformations-container .dcg-new-transformation.dcg-will-be-hidden-or-disabled{opacity:.5;border:1px dashed rgba(0,0,0,.2)}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-new-transformations-container .dcg-new-transformation i{display:block;text-align:center;font-size:40px;margin:5px 0;position:relative}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-new-transformations-container .dcg-new-transformation i.dcg-icon-rotation:after,.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-new-transformations-container .dcg-new-transformation i.dcg-icon-dilation:after{position:absolute;top:50%;left:50%;width:4px;height:4px;background:#7d69b3;margin-left:-2px;margin-top:-2px;border-radius:50%;content:\"\"}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-new-transformations-container .dcg-new-transformation i.dcg-icon-vector{transform:rotate(-45deg)}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-new-transformations-container .dcg-new-transformation i.dcg-icon-reflection:after{position:absolute;top:2px;bottom:2px;left:50%;border-right:2px dashed rgba(47,114,220,.5);content:\"\";margin-left:-1px}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-new-transformations-container .dcg-new-transformation.dcg-hovered{border:1px solid #999;box-shadow:0 0 0 1px #999;color:#666}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-new-transformations-container .dcg-new-transformation.dcg-depressed{border:1px solid #666;box-shadow:0 0 0 1px #666;color:#000}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-new-transformations-container .dcg-new-transformation.dcg-disabled{opacity:.25}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-existing-transformations-container{max-height:200px;overflow-y:auto;padding:0 1px 5px;margin:0 -1px}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-existing-transformation{padding:5px 10px 2px;border:1px solid rgba(0,0,0,.2);border-radius:5px;margin-top:5px;margin-bottom:5px;opacity:.8;color:#666;text-align:left}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-existing-transformation.dcg-hovered{opacity:1;color:#444;border:1px solid #aaa;box-shadow:0 0 0 1px #aaa}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-existing-transformation.dcg-depressed{opacity:1;color:#000;border:1px solid #888;box-shadow:0 0 0 1px #888}.dcg-calculator-api-container .dcg-multi-select-transformations-menu .dcg-existing-transformation>div{pointer-events:none}.dcg-calculator-api-container .dcg-options-menu-container{position:absolute;display:none;z-index:61;pointer-events:none}.dcg-calculator-api-container .dcg-options-menu-container .dcg-options-menu{pointer-events:auto}.dcg-calculator-api-container .dcg-options-menu{padding:10px;position:relative;border:1px solid #d3d3d3;border-radius:7px;box-shadow:0 0 6px #00000026;background:#fff}.dcg-calculator-api-container .dcg-options-menu button{margin:unset;padding:unset;border:unset;background:unset;font-size:inherit;color:inherit}.dcg-calculator-api-container .dcg-options-menu button.dcg-focus-visible,.dcg-calculator-api-container .dcg-options-menu button.dcg-hovered:not(.dcg-disabled){outline:none;box-shadow:0 0 0 2px #2f72dc80}.dcg-calculator-api-container .dcg-options-menu button.dcg-disabled,.dcg-calculator-api-container .dcg-options-menu button[aria-disabled=true]{cursor:unset}.dcg-calculator-api-container .dcg-options-menu .dcg-dividing-line-after{padding-bottom:10px;border-bottom:1px solid #e2e2e2;margin-bottom:10px}.dcg-calculator-api-container .dcg-options-menu .dcg-triangle{width:0;height:0;border-style:solid}.dcg-calculator-api-container .dcg-options-menu .dcg-triangle:before{content:\"\";width:0;height:0;border-style:solid}.dcg-calculator-api-container .dcg-options-menu .dcg-title{margin-bottom:5px;opacity:.65;font-weight:500}.dcg-calculator-api-container .dcg-options-menu .dcg-style-icons,.dcg-calculator-api-container .dcg-options-menu .dcg-component-checkbox{margin-top:5px}.dcg-calculator-api-container .dcg-options-menu .dcg-component-checkbox .dcg-checkbox-children{font-size:90%;color:#333}.dcg-calculator-api-container .dcg-options-menu .dcg-style-icon-container{display:inline-block;width:29px;height:29px;border-radius:50%}.dcg-calculator-api-container .dcg-options-menu .dcg-style-icon-container:not(:last-of-type){margin-right:4px}.dcg-calculator-api-container .dcg-options-menu .dcg-style-icon-container.dcg-disabled{cursor:default!important}.dcg-calculator-api-container .dcg-options-menu .dcg-style-icon-container:not(.dcg-disabled).dcg-hovered:not(.dcg-disabled){box-shadow:0 0 0 2px #0000001a}.dcg-calculator-api-container .dcg-options-menu .dcg-style-icon-container:not(.dcg-disabled).dcg-depressed:not(.dcg-disabled){box-shadow:0 0 0 2px #00000040}.dcg-calculator-api-container .dcg-options-menu textarea{width:100%;height:3em;border:1px solid rgba(0,0,0,.2);border-radius:4px;font:inherit;font-size:90%;padding:5px;margin-top:5px;outline:none;position:relative;top:3px}.dcg-calculator-api-container .dcg-options-menu textarea.dcg-hovered{border:1px solid #bbb;box-shadow:0 0 0 1px #bbb}.dcg-calculator-api-container .dcg-options-menu textarea:focus{border:1px solid #2f72dc;box-shadow:0 0 0 1px #2f72dc}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-triangle,.dcg-calculator-api-container .dcg-slider-options-view .dcg-triangle,.dcg-calculator-api-container .dcg-table-column-menu .dcg-triangle,.dcg-calculator-api-container .dcg-image-options-menu .dcg-triangle{position:absolute;top:12px;left:-9px;border-width:9px 9px 9px 0;border-color:transparent #d3d3d3 transparent transparent}.dcg-calculator-api-container .dcg-expressions-options-menu .dcg-triangle:before,.dcg-calculator-api-container .dcg-slider-options-view .dcg-triangle:before,.dcg-calculator-api-container .dcg-table-column-menu .dcg-triangle:before,.dcg-calculator-api-container .dcg-image-options-menu .dcg-triangle:before{position:absolute;top:-8px;left:1px;border-width:8px 8px 8px 0;border-color:transparent #fff transparent transparent}.dcg-calculator-api-container .dcg-expressions-options-menu,.dcg-calculator-api-container .dcg-slider-options-view,.dcg-calculator-api-container .dcg-image-options-menu{left:38px}.dcg-calculator-api-container .dcg-expressions-options-menu,.dcg-calculator-api-container .dcg-slider-options-view{top:-7px}.dcg-calculator-api-container .dcg-image-options-menu{min-width:185px;top:-10px}.dcg-calculator-api-container .dcg-image-options-menu .dcg-triangle{position:absolute;top:15px;left:-9px}.dcg-calculator-api-container .dcg-table-column-menu .dcg-triangle{position:absolute;top:-9px;left:14px}@font-face{font-family:Abraham;src:url(data:font/woff2;base64,d09GMgABAAAAAArwAA0AAAAAeWQAAAqVAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP0ZGVE0cGhgGYACCYhEICoHWFIGlFguCSgABNgIkA4QWBCAFiB0HhnQbtF4RlaOBR1GaNk3yZQI3B7YOliFCqWPJhLGMZWhifaqyq2o95GjH/zNVXBL8//9+/5trX7XvFg1IZlYag8ygxJfQVn5CG1XtHP+dNq/yNt2C3pL4S+6clNLJDAzYNFYB91q8EtLut8xTjmIJrIusoXVe+2wOwt9AJDikbwstrP99yLFHAPzz3Kv8zsnN5Bxfj0MY4zVxDermbpqDSlLwlBquUEUKWLKC/ZTqUiAv/D/t978qcBFrJFoxien5xgafh3ry5nPPW2d49/v9Hw2JVH4uSCjEZJZIEf9/TP1e6LRjmpSm8IJIGEpw5KQa/5jvAgTw0rfxI2D948NgeQsBOVTLOj7e9uyLvhKAPWRYBnhUfoneIQzwFPdI+Oj8cmCFe8mSUZEe8FbhFFixwJtglARgCiJ+ox4wBgFwGSMCxjCxHZATY/hAwX0dypZ0AAqmdCgD3cF9d7e9OECwuUJ4vyszdYLtFfgBC2t3WO0Yq4dI/4HIyMrJKygqKauoqqlraGpp6+jq6RsYGhkTJqZm5haWVtYWrFRr9Uaz1e50e/3BcDSeTGfzxXK13mx3+8PxBM7yccuOHAr1vgzaD8LDYGoDzC8AgCAGPGX6fFspovrttY4kxKvIokJxNrafYC3wFQXzMoDa3imAyj7PuH0j8qnRPkDKA1me2uIZck2ci/P3LZ8eCYTQ2dHAgYJD4t0c57oCXMgMXiwMVcTz7cFF6mXKFdrV8uNPyAPUIcow7bqog/BwU4sWfq33xFUv5KpeyNimSmmCgXAd4Wl5+I4e6RUf1B5BNBwGA0LFdXgCmOaszGXOsalSjuHOEeMsZaiJbB7elCdblK7hDvY/4HZe2DbYTHIYJKWFBSlD1AHyIC2Zh5X35/ruazK7L8mG5+XiRrjDwhtMNJwWnmwKzwFcGsQ+EG7K5ILNewxDoRw45boM5BCncUz59T7Brb8i9nKXBjTlnqs+/dVokUHF4cPmbNhy+WjYPjwOERc4p2yKWGwUn6rYW92anaBbixCV440aah2lXq4rCg/Lpfz+V9Qaci2tntJy9bpB8m2+scd873PfY8tkeAhMRuT8adg+4KIb3A8uBH7whzv77EwyjGWkYZdAE/Ew+IfOvTMF9mHaDyIHr93Fr1m+FHnPRrSx+xV2D4qqrtGm9s5BnW1znv7RfabE/WggXINmNgYQaSakNTviPiiH9FmVEv2CbQ7TSmdzikfFnbHgLoo7VXdM9Wa0JhoWwqo7Lvk1UaajFf8ZZ++DGf9ZNg5iis9KYXk3Rl0SANz7O0BzziGlf9Vt8CYyTYHcLIXybsg/38isq/+RrsmwS6UugH7PfRHBffY49ywoZ2rWNF1A3+o/4zzZdPlSUSWteegYNPSifx9ER9VtW8Rh0wjhRgiH/BbjQAr6LyYlY5A4wfuaWP9Yvke4ZlCoPzjwu0IlFwv03HJf8DuQam40vLpI70RDhL30GD++ueym8F+8sZsYpKPjohdvLjtNPBd88i+YfnqTRtN6dSKQ0/wB+juSGt4Lzf6LUfedjnsZp/7l9PJzfGO6spDY+RE+ET5RTORcKoyxfxzSC/poN/a6B9QvS/piIs/78ZVjFF3p7pYigav1cYxuVq2KpJ5u0cZ+ztpGnKhDEfwEVxVS72rtkvoErucAZhio41AJKSQtuqp25mltuiQBqoPGBaFSwQ2n7or5M+4rHGTEYK1BdAk9Pk1YOyOhZ2gFiM0VPhEMN9aHlS0s55hu2VG6a5HAFfvnMssOnNMQktYaWN84dcIEN29kUIq47MYPLf44Xyt6WO3gDAe//czw6eEzseeVJhs90xH2nWwsebJFlTVZi66BOm5nlg1wz4pzslf27+ZgthdYiXECJUtBGAnOumlppur+eSUzuXsu3tfygYXvsJ3exlDo2YvYGVwuDAKIF8MtneDy3QWwgIWbW88dzxY0nJjcbpDRAKAAoKPx1L60XYnyfBfG7tPRpuAy2oPRxtacy3ZaTU61uOASIwl//xzPVJui4FlhFOZZqT1stCuXmDuw5ef9BbsdnN4dKWxXVmcuA98ugHcfMCm5nzhsaXc6Zyn8D/0F/4PLtJZZkbrhN5rlr7W5RXic46/uP3Lzrgb6KnuQMw4m2Gqu/kPnkfsEkH4p81fgnNNhu1fvY7/Vt1b1j3ptsC5JepoMTJ/V4nwTMgrUGXgqvGbU68kxXXI3z9zTS2eOy+pWsiaznuL/dBNNhfmJnReiussqc7f7K1x+baL9PAdOCLuql+Z5/Y4Fh3c7LZ/MaoTks3qK3mHi7Ng35bef2ML8msShaUEvJmH/jSniU6QzYsZ1nF1xcRovOtl8HMx4XLHY/CxD3J6vDnY7TW0ctzRXPRraHrfsxjL2Zrt1e9NlTc7J5SlaVYPG+TSr4MuFHBPTDMBtx4ZWTj5XvWD457P2wNr7ZIDKwajVQnvvVeb3NAUiU8WtyuMT9P5clQNdAFjCoLGSEPgb0AFSF3tTCJVY1zlEZHNyfD1Il223bP9TNcg0HKKkLl84DcpqIWo+218lQ0fOUzwyzmk2wspKaftVNJNRcTmn/40zQ2cOps/PwBP5gDxL5cVEqc7JTiUXjm55Pq1eEawZeraYT8cnHme740pH5HRLtPhwHqtZJjDo6WklfIaH15vssNPvs2352Fd9gthu77bMrxew1/l+HPlK5n//uLgPyw2+OYtzmMbGMeeyrVIc0mzjuU6U86iLXs3ZneQ75WtE3GlktntAXjirqwAAY5QvJAS+Au6CLpsNybZpXmQ6QT2D1T2FD+XDH8F/zW1q/JDC6K4tUn8OdLI5bZKOLzL/mg5BoY5Ta/Tgfj3RVwV/oXTULyk+RgQI3r8LabzGa/Ytzhhf/n7Sy3RuU7MfJkaH1PnNom/D/jiwOxBP6+6VCvfoCNCLm3/Zfp/9hf2xIeqFebEKVvXpuIAe3MYHWa4QsN1zmQNNhb9u0dG0EXHSHhMa7NN54ICZEA4ZSpkjpGHFTCphXimrythWzikVXFDJNddIobvBanKLWqT6YkQ+u+tlWCxgsVGy0x6bhdhnwbwDdvvikOWEOcLUr5hRJUwrZVEZ68rZVcEZlVxyTTE33OAx0ke0FKsG0mAK7BAjR7Qk0dJpyJApg4Z8GZLFyhQnHvxu8CP+jMynPz/j8guSlwM4KV6ifGmi5YD/6/BzAKzQpE2bPlMTlcuTl6dq2rUytbX1TU0WzivntQqurNY6u5MjVzLtpnRtWw7iRp5EKl6ahB130VJJJekKoQN/oqJc2+Lfzy/+hvriX5xvfD8oXD0yOH5Olx9l6iWYUb1Cvc8wnl7rAQgTA3i/cP+vTkxCSkZOQUlFDcOPRABOkBBhIkSJESdBkhRpMmTJkadAkRJlKlSpUadBkxZtOnTp0WfAkBFjBBOmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4MmLNx++/PgLEChIsBChwoSLEClKtBHEiJgQM2JBrIgNsSMORplyFSpVqUYxnCApmmE5XhAlWVE13TAdTpfb4/X5A8FQOBKNxRPJVDqTzeULxZLKspLfcz6EI4StRVJjlAGJycbOwcnFzcPLxx9aHWwAAAAAAAAAAEREREREREREIiIiIiIiIlVCcwEAAA==) format(\"woff2\");font-display:block}.dcg-calculator-api-container .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input{background:none;width:100%;border:none;font-family:Abraham,serif;font-size:125%;padding:1px 0}.dcg-calculator-api-container .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input:focus{outline:none}.dcg-calculator-api-container .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-inline-braille{position:absolute;left:-1000px;top:-1000px;width:0;height:0;overflow:hidden}.dcg-calculator-api-container .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-mathquill-braille-overflow-left .dcg-tooltip-hit-area-container:before{content:\"\";position:absolute;top:0;left:0;bottom:0;width:14px;background:linear-gradient(to left,rgba(255,255,255,0),#fff);pointer-events:none}.dcg-calculator-api-container .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-mathquill-braille-overflow-right .dcg-tooltip-hit-area-container:after{content:\"\";position:absolute;top:0;right:0;bottom:0;width:14px;background:linear-gradient(to right,rgba(255,255,255,0),#fff);pointer-events:none}.dcg-calculator-api-container .dcg-drop-image{position:absolute;top:0;right:0;left:0;bottom:0;z-index:42;text-align:center;vertical-align:middle;background:rgba(255,255,255,.5);border:8px dashed #bbb;font-family:sans-serif;color:#bbb;font-size:370%}.dcg-calculator-api-container .dcg-drop-image span{position:absolute;bottom:0;left:0;right:0;top:0;height:3.6em;line-height:1.2em;margin:auto;padding:0 20px}.dcg-calculator-api-container .dcg-exppanel-outer{display:inline-block;overflow-x:visible;margin-left:0}.dcg-calculator-api-container .dcg-exppanel-outer .dcg-exppanel-container{width:100%;-webkit-transform:translateZ(0);position:absolute;top:0;bottom:0;transition:transform .25s ease-out;display:flex;flex-direction:column}.dcg-calculator-api-container .dcg-exppanel-outer .dcg-exppanel-container.dcg-add-shadow{box-shadow:0 -4px 6px #0003;z-index:1}.dcg-calculator-api-container .dcg-exppanel-outer .dcg-explist-3d-getting-started-container{position:absolute;bottom:55px;left:10px;right:10px;z-index:10}.dcg-calculator-api-container .dcg-show-expressions-tab{opacity:0;animation:dcg-fadeIn .3s forwards;animation-delay:.4s}.dcg-calculator-api-container .dcg-exppanel{flex:1;overflow-x:hidden;overflow-y:auto;overflow-anchor:none;border-right:1px solid rgba(0,0,0,.2);z-index:0;-webkit-overflow-scrolling:touch}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionlist{position:relative;padding-bottom:50px;min-height:100%}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionlist.dcg-has-footer-notice{padding-bottom:250px}.dcg-calculator-api-container .dcg-narrow .dcg-exppanel-container{z-index:40}.dcg-calculator-api-container .dcg-narrow .dcg-exppanel{border-right:0}.dcg-calculator-api-container .dcg-tooltipped-error{color:#e66b3c;font-size:22px;cursor:pointer;display:inline-block;width:26px;height:26px;text-align:center;animation:dcg-delayed-fadeIn 1s;position:relative;top:3px}.dcg-calculator-api-container .dcg-tooltipped-error.dcg-small{font-size:14px;width:16px;height:16px;position:relative;top:1px}.dcg-calculator-api-container .dcg-tooltipped-error.dcg-white{color:#fff}.dcg-calculator-api-container .dcg-circular-icon-container{width:29px;height:29px;border-radius:50%}.dcg-calculator-api-container .dcg-circular-icon-container .dcg-graph-interaction-disabled{position:absolute;bottom:-1px;right:-1px;font-size:.8rem;color:#999;z-index:10;text-shadow:-1px -1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,1px 1px 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,1px 0 0 #fff,-1px 0 0 #fff}.dcg-calculator-api-container .dcg-circular-icon{display:inline-block;width:29px;height:29px;line-height:29px;border-radius:50%;position:relative;overflow:hidden}.dcg-calculator-api-container .dcg-circular-icon.dcg-semi-transparent{opacity:.4}.dcg-calculator-api-container .dcg-circular-icon.dcg-hidden{box-shadow:inset 0 0 3px #00000040}.dcg-calculator-api-container .dcg-circular-icon.dcg-hidden:before{position:absolute;top:0;left:0;bottom:0;right:0;border:5px solid #999;border-radius:50%;opacity:.25;content:\"\"}.dcg-calculator-api-container .dcg-circular-icon.dcg-hidden.dcg-white-icon:before{border-color:#fff;opacity:.4}.dcg-calculator-api-container .dcg-circular-icon.dcg-hidden.dcg-hovered:before{opacity:.3125}.dcg-calculator-api-container .dcg-circular-icon.dcg-hidden.dcg-hovered.dcg-white-icon:before{opacity:.5}.dcg-calculator-api-container .dcg-circular-icon.dcg-hidden.dcg-depressed:before{opacity:.375}.dcg-calculator-api-container .dcg-circular-icon.dcg-hidden.dcg-depressed.dcg-white-icon:before{opacity:.6}.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline{border:2px solid #000;opacity:.5;color:#000;text-align:center}.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline.dcg-hovered{opacity:.7}.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline.dcg-depressed{opacity:.9}.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline .dcg-icon-folder{position:relative;top:-1px;font-size:110%}.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline .dcg-icon-sound-wave{position:relative;font-size:180%;top:2.5px}.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline .dcg-icon-pause{position:relative;top:-1px;left:.25px}.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline .dcg-icon-volume-up{position:relative;left:.25px;font-size:125%}.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline .dcg-icon-play{position:relative;top:-1px;left:1.5px}.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline .dcg-icon-fraction{font-size:20px;position:relative;top:2px}.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline.dcg-white-icon{color:#fff;border-color:#fff;opacity:.9}.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline.dcg-white-icon.dcg-hovered,.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline.dcg-white-icon.dcg-depressed{opacity:1}.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image{background:#fff}.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image:after{position:absolute;top:0;left:0;bottom:0;right:0;content:\"\";border-radius:50%;overflow:hidden;box-shadow:inset 0 0 4px #000000b3}.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image .dcg-background-image{width:29px;height:29px;display:inline-block;border-radius:50%;background-size:29px 29px!important}.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i{text-shadow:0 0 6px rgba(0,0,0,.2),0 0 1px rgba(0,0,0,.5)}.dcg-calculator-api-container .dcg-circular-icon .dcg-spinner{position:absolute;left:50%;top:50%;margin-top:-10px;margin-left:-10px}.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon{box-shadow:inset 0 0 3px #00000040;overflow:hidden}.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon{text-shadow:0 0 3px rgba(0,0,0,.25)}.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon{font-size:35px}.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image.dcg-modifier-size-medium,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon.dcg-modifier-size-medium{font-size:42.25px}.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image.dcg-modifier-size-large,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon.dcg-modifier-size-large{font-size:56.75px}.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image.dcg-modifier-size-small,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon.dcg-modifier-size-small{font-size:32.1px}.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image.dcg-modifier-rotated,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon.dcg-modifier-rotated{transform:rotate(90deg)}.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon{position:absolute;top:-3px;left:-30px;right:-30px;bottom:-3px;color:#fff;line-height:35px;text-align:center}.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-check,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-check{font-size:50%}.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-move,.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-move-vertical,.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-move-horizontal,.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-arrow-right,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-move,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-move-vertical,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-move-horizontal,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-arrow-right{font-size:55%}.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-point,.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-cross,.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-open,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-point,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-cross,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-open{font-size:75%}.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-points,.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-lines-solid,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-points,.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-lines-solid{font-size:68%}.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-circular-icon-container.dcg-disabled{opacity:.5;pointer-events:none}.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-container{position:absolute;top:100%;left:-5px;right:-5px;margin-top:4px}.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener{margin-left:1px;padding:5px;text-align:center;font-size:140%;cursor:pointer;opacity:.75}.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener:before{content:\"\";width:24px;height:24px;border-radius:50%;display:inline-block;position:absolute;top:50%;left:50%;margin-left:-12px;margin-top:-13px;background:currentColor;opacity:0}.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-hovered{opacity:.9}.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-hovered:before{opacity:.15}.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-menu-open{opacity:1}.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-menu-open:before{opacity:.3}.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-depressed{opacity:1}.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-depressed:before{opacity:.4}.dcg-calculator-api-container .dcg-action-icon-view i.dcg-icon-chevron-right{font-size:115%;display:inline-block}.dcg-calculator-api-container .dcg-action-icon-view i.dcg-icon-minus{transform:translate(3.5px,-1px);font-size:90%;display:inline-block}.dcg-calculator-api-container .dcg-action-icon-view.dcg-action-icon-view-animating i.dcg-icon-chevron-right{transition:.15s;transform:rotate(360deg)}@keyframes dcg-throb{0%{background:#00b21d;box-shadow:0 0 2px 2px #00b21d}25%{background:#00b21d;box-shadow:0 0 2px 2px #00b21d}to{box-shadow:none}}.dcg-calculator-api-container .dcg-global-mute-button--initial-mute i{border-radius:100%;padding:4px;animation:dcg-throb .5s alternate infinite}.dcg-calculator-api-container .dcg-evaluation-container{display:flex;flex-direction:column;align-items:flex-end;margin-right:5px;padding:1px}.dcg-calculator-api-container .dcg-evaluation-container .dcg-color-swatch{margin-right:-2px}.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation{margin-top:-3px}.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation.dcg-hidden{opacity:0}.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation .dcg-static-mathquill-view{cursor:pointer}.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation .dcg-mathquill-wrapper .dcg-mathquill-braille{padding:5px 0}.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input{text-align:right;color:#666}.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation .dcg-mathquill-wrapper .dcg-typeset-math{padding:3px 6px 3px 3px;display:table;border:1px solid rgba(206,206,206,.8);background:rgba(0,0,0,.04);color:#222;border-radius:4px}.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation .dcg-evaluation-label-container{font-weight:400;cursor:pointer;white-space:nowrap;display:table-cell;vertical-align:middle}.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation .dcg-evaluation-label-container .dcg-mq-math-mode{cursor:pointer;padding-right:2px}.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation .dcg-evaluation-html{white-space:nowrap;border-top-right-radius:5px;border-bottom-right-radius:5px;display:table-cell}.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation .dcg-evaluation-html.dcg-color-evaluation{line-height:0}.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation .dcg-evaluation-html .dcg-evaluation-list{position:relative;top:2px}.dcg-calculator-api-container .dcg-display-domain{padding:5px 0 13px;font-size:95%;white-space:nowrap;margin-bottom:-5px;margin-top:-5px}.dcg-calculator-api-container .dcg-inline-math-input-view{display:inline-block;font-size:95%}.dcg-calculator-api-container .dcg-inline-math-input-view .dcg-math-field{border-bottom:1px solid rgba(0,0,0,.2);padding:1px 2px;margin:1px;min-width:35px;max-width:70px;font-size:100%}.dcg-calculator-api-container .dcg-inline-math-input-view .dcg-math-field.dcg-focus,.dcg-calculator-api-container .dcg-inline-math-input-view .dcg-math-field.dcg-invalid{border-bottom:2px solid #2f72dc;margin-bottom:0}.dcg-calculator-api-container .dcg-inline-math-input-view .dcg-math-field.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container .dcg-inline-math-input-view .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container .dcg-inline-math-input-view.dcg-large-font-inline-math-input{font-size:115%}.dcg-calculator-api-container .dcg-inline-math-input-view.dcg-log-scale .dcg-math-field{max-width:100px}.dcg-calculator-api-container .dcg-inline-math-input-view .dcg-mathquill-braille{border-bottom:1px solid rgba(0,0,0,.2);padding:1px 2px;margin:1px;min-width:35px;max-width:35px;font-size:95%}.dcg-calculator-api-container .dcg-inline-math-input-view .dcg-mathquill-braille.dcg-focus,.dcg-calculator-api-container .dcg-inline-math-input-view .dcg-mathquill-braille.dcg-invalid{border-bottom:2px solid #2f72dc;margin-bottom:0}.dcg-calculator-api-container .dcg-inline-math-input-view .dcg-mathquill-braille.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container .dcg-inline-math-input-view .dcg-mathquill-braille.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container .dcg-inline-math-input-view .dcg-mathquill-braille .dcg-tooltip-hit-area-container{width:100%}.dcg-calculator-api-container .dcg-inline-math-input-view.dcg-full-width-inline-math-input .dcg-math-field,.dcg-calculator-api-container .dcg-inline-math-input-view.dcg-full-width-inline-math-input .dcg-mathquill-braille{width:100%;max-width:100%}.dcg-calculator-api-container .dcg-inline-math-input-view.dcg-no-border-inline-math-input .dcg-math-field,.dcg-calculator-api-container .dcg-inline-math-input-view.dcg-no-border-inline-math-input .dcg-mathquill-braille{border-bottom:1px solid transparent}.dcg-calculator-api-container .dcg-learn-more-link{display:inline-block;color:#999;text-decoration:none;padding:5px;font-size:85%;position:relative;top:1px}.dcg-calculator-api-container .dcg-learn-more-link.dcg-hovered{color:#666}.dcg-calculator-api-container .dcg-learn-more-link.dcg-active{color:#333}.dcg-calculator-api-container .dcg-regression-container{font-size:80%;color:#222;cursor:default}.dcg-calculator-api-container .dcg-regression-container .dcg-statistics{display:inline-block;width:130px;float:left;margin-bottom:10px}.dcg-calculator-api-container .dcg-regression-container .dcg-residuals{float:left;width:130px;margin-bottom:10px}.dcg-calculator-api-container .dcg-regression-container .dcg-residuals>.dcg-mathquill-wrapper{display:inline-block}.dcg-calculator-api-container .dcg-regression-container .dcg-r-value{padding-left:.5em}.dcg-calculator-api-container .dcg-regression-container .dcg-residual-suggestion{padding:2px 8px;margin-left:7px;line-height:16px;display:inline-block}.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle{clear:both}.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle.dcg-visible{display:block}.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-action-log-mode-toggle{cursor:pointer;padding:5px 0;color:#444;border-radius:4px;display:inline-block;margin-bottom:12px}.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-action-log-mode-toggle .dcg-log-mode-checkbox{display:inline-block;width:15px;height:15px;border:1px solid rgba(0,0,0,.2);float:left;margin-right:6px;border-radius:3px;position:relative}.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-action-log-mode-toggle .dcg-log-mode-checkbox i{color:transparent}.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-action-log-mode-toggle.dcg-no-hover-styling{cursor:default}.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-action-log-mode-toggle.dcg-hovered .dcg-log-mode-checkbox{border-color:#aaa}.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-action-log-mode-toggle.dcg-depressed .dcg-log-mode-checkbox{border-color:#666}.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-log-mode-toggle-help{text-decoration:none;color:#0003;padding:10px 6px}.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-log-mode-toggle-help.dcg-hovered{color:#aaa}.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-log-mode-toggle-help.dcg-depressed{color:#666}.dcg-calculator-api-container .dcg-regression-container .dcg-parameters-container{clear:both;padding-bottom:4px}.dcg-calculator-api-container .dcg-regression-container .dcg-parameters-container .dcg-parameter{float:left;min-width:130px;padding-right:5px}.dcg-calculator-api-container .dcg-regression-container .dcg-parameters-container .dcg-parameter:nth-of-type(odd){clear:both}.dcg-calculator-api-container .dcg-regression-container .dcg-parameter-warning{color:#666;cursor:default;margin-top:10px}.dcg-calculator-api-container .dcg-regression-container .dcg-parameter-warning i{font-size:85%}.dcg-calculator-api-container .dcg-regression-container .dcg-parameter-warning a{color:#666;text-decoration:underline}.dcg-calculator-api-container .dcg-regression-container .dcg-parameter-warning a.dcg-hovered{color:#000}.dcg-calculator-api-container .dcg-regression-container .dcg-parameter-warning .dcg-btn{padding:2px 5px;margin-top:4px}.dcg-calculator-api-container .dcg-disable-slider{opacity:.3}.dcg-calculator-api-container .dcg-slider-interior{flex:1;position:relative;top:-4px;margin-left:7px;margin-right:7px;touch-action:none}.dcg-calculator-api-container .dcg-slider-interior .dcg-thumb{cursor:pointer;z-index:3;border-radius:8px;position:absolute;top:-8px;margin-left:-19px;width:38px;height:38px}.dcg-calculator-api-container .dcg-slider-interior .dcg-thumb:focus{outline:none}.dcg-calculator-api-container .dcg-slider-interior .dcg-thumb:focus:after{position:absolute;top:-4px;left:4px;content:\"\";pointer-events:none;border:2px solid rgba(47,114,220,.35);border-radius:50%;width:26px;height:26px}.dcg-calculator-api-container .dcg-slider-interior .dcg-thumb .dcg-graphic{position:absolute;top:0;left:8px;border-radius:12px;width:22px;height:22px;background:rgba(47,114,220,.35)}.dcg-calculator-api-container .dcg-slider-interior .dcg-thumb .dcg-center{position:absolute;top:0;left:8px;border-radius:12px;width:22px;height:22px;background:#2f72dc;transform:scale(.25);transition:transform .2s}.dcg-calculator-api-container .dcg-slider-interior .dcg-thumb.dcg-hovered .dcg-center,.dcg-calculator-api-container .dcg-slider-interior .dcg-thumb.dcg-down .dcg-center{transform:scale(1)}.dcg-calculator-api-container .dcg-slider-interior .dcg-zeroMarker{position:absolute;top:2px;z-index:2;width:2px;height:2px;background:rgba(0,0,0,.3);border-radius:2px}.dcg-calculator-api-container .dcg-slider-interior .dcg-track{cursor:pointer;height:22px;position:absolute;left:0;right:0}.dcg-calculator-api-container .dcg-slider-interior .dcg-track .dcg-ticks{position:absolute;top:2px;bottom:0;width:100%}.dcg-calculator-api-container .dcg-slider-interior .dcg-track .dcg-ticks .dcg-tick{position:absolute;top:0;width:2px;height:2px;background-color:#fff;margin-left:0;z-index:1;border-radius:2px}.dcg-calculator-api-container .dcg-slider-interior .dcg-track .dcg-graphic{height:6px;background-color:#0000001a;border-radius:3px;margin-bottom:6px;width:100%}.dcg-calculator-api-container .dcg-slider-container .dcg-minLabel{padding:10px 4px 10px 8px}.dcg-calculator-api-container .dcg-slider-container .dcg-maxLabel{padding:10px 8px 10px 4px}.dcg-calculator-api-container .dcg-slider-container .dcg-minLabel,.dcg-calculator-api-container .dcg-slider-container .dcg-maxLabel{z-index:4;color:#00000080;margin:-10px 0;min-width:26px;text-align:center}.dcg-calculator-api-container .dcg-slider-container .dcg-minLabel .dcg-mq-math-mode,.dcg-calculator-api-container .dcg-slider-container .dcg-maxLabel .dcg-mq-math-mode{font-family:arial,sans-serif;cursor:pointer;font-size:80%;position:relative;top:-1px}.dcg-calculator-api-container .dcg-slider-container .dcg-minLabel.dcg-hovered,.dcg-calculator-api-container .dcg-slider-container .dcg-maxLabel.dcg-hovered{color:#333}.dcg-calculator-api-container .dcg-slider-container .dcg-minLabel.dcg-depressed,.dcg-calculator-api-container .dcg-slider-container .dcg-maxLabel.dcg-depressed{color:#000}.dcg-calculator-api-container .dcg-slider-container{min-height:22px;display:block;position:relative}.dcg-calculator-api-container .dcg-slider{display:flex;margin-left:-15px;justify-content:center;align-items:center}.dcg-calculator-api-container .dcg-create-sliders{white-space:nowrap;height:26px;line-height:26px}.dcg-calculator-api-container .dcg-create-sliders .dcg-msg{display:inline-block;margin-right:5px;font-size:80%;color:#0009}.dcg-calculator-api-container .dcg-create-sliders .dcg-all .dcg-btn-slider{font-style:normal}.dcg-calculator-api-container .dcg-create-sliders .dcg-btn-slider{padding:0 10px!important;font-family:times;font-size:90%;font-style:italic}.dcg-calculator-api-container .dcg-create-sliders .dcg-slider-btn-container{display:inline-block;position:relative;margin-right:3px;height:16px;margin-bottom:4px;margin-top:1px}.dcg-calculator-api-container .dcg-create-sliders .dcg-slider-btn-container .dcg-btn-slider{height:25px;line-height:25px}.dcg-calculator-api-container .dcg-prompt-rename{display:inline-block;font-size:90%;margin-bottom:-3px}.dcg-calculator-api-container .dcg-prompt-rename .dcg-btn-light-gray{padding:2px 5px;margin-left:6px;margin-right:6px}.dcg-calculator-api-container .dcg-prompt-rename .dcg-reference-count{color:#999}.dcg-calculator-api-container .dcg-distribution-parameters-container .dcg-component-checkbox{font-size:85%}.dcg-calculator-api-container .dcg-cdf-footer-container{margin-top:5px}.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-component-checkbox{margin-bottom:4px}.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-parameter-name{font-size:85%}.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-cdf-evaluation-container{margin-top:5px}.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-inline-math-input-view{margin-left:10px;margin-right:10px}.dcg-calculator-api-container .dcg-parameter-suggestion-container{font-size:80%;position:relative;top:-9px;margin-left:2px;white-space:nowrap;width:100%;padding-right:5px;text-overflow:ellipsis;overflow:hidden;color:#666;cursor:default}.dcg-calculator-api-container .dcg-parameter-suggestion-container.dcg-parameter-suggestion-braille{top:-6px}.dcg-calculator-api-container .dcg-parameter-suggestion-container.dcg-hovered .dcg-default-marker{color:#666}.dcg-calculator-api-container .dcg-parameter-suggestion-container.dcg-depressed .dcg-default-marker{color:#333}.dcg-calculator-api-container .dcg-parameter-suggestion-container .dcg-default-marker{color:#00000080;margin-left:.3em}.dcg-calculator-api-container .dcg-parameter-suggestion-container .dcg-parameter-name:not(:last-of-type):after{content:\",\";margin-right:5px}.dcg-calculator-api-container .dcg-visualization-parameters-container{margin-bottom:5px}.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-smaller-font{font-size:85%;margin-left:2px}.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-mathquill-wrapper{margin-left:10px;margin-right:10px}.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-parameter-name{font-size:105%}.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-component-checkbox{margin-top:4px}.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-toggle-container{display:inline-block;margin-bottom:5px;margin-right:15px}.dcg-calculator-api-container .dcg-ttest-footer-container{cursor:text;padding-right:5px}.dcg-calculator-api-container .dcg-ttest-footer-container table{margin-left:auto}.dcg-calculator-api-container .dcg-ttest-footer-container .dcg-value{-webkit-user-select:text;user-select:text;margin-top:3px;border:1px solid rgba(206,206,206,.8);border-radius:4px;background:rgba(0,0,0,.04);opacity:.75}.dcg-calculator-api-container .dcg-ttest-footer-container .dcg-value .dcg-operator .dcg-static-mathquill-view{border-right:1px solid rgba(206,206,206,.8);margin-right:5px;min-width:35px;text-align:center;padding:3px}.dcg-calculator-api-container .dcg-ttest-footer-container .dcg-value .dcg-evaluation .dcg-static-mathquill-view{padding:3px 6px 3px 3px}.dcg-calculator-api-container .dcg-stats-footer-container{cursor:text;padding-right:5px}.dcg-calculator-api-container .dcg-stats-footer-container table{margin-left:auto}.dcg-calculator-api-container .dcg-stats-footer-container .dcg-value{-webkit-user-select:text;user-select:text;margin-top:3px;border:1px solid rgba(206,206,206,.8);border-radius:4px;background:rgba(0,0,0,.04);opacity:.75}.dcg-calculator-api-container .dcg-stats-footer-container .dcg-value .dcg-row-header{display:inline-block;border-right:1px solid rgba(206,206,206,.8);margin-right:5px;width:68px;padding:5px}.dcg-calculator-api-container .dcg-stats-footer-container .dcg-value .dcg-evaluation .dcg-static-mathquill-view{padding:3px 6px 3px 3px}.dcg-calculator-api-container .dcg-action-info{cursor:default;color:#666;font-size:85%}.dcg-calculator-api-container .dcg-action-info .dcg-click-edit{margin-left:5px;opacity:.6}.dcg-calculator-api-container .dcg-action-info .dcg-click-edit.dcg-hovered{opacity:.8}.dcg-calculator-api-container .dcg-action-info .dcg-click-edit.dcg-depressed{opacity:1}.dcg-calculator-api-container .dcg-expression-edit-actions{padding-left:5px;padding-right:7px;white-space:nowrap;position:absolute;top:0;right:0;bottom:0}.dcg-calculator-api-container .dcg-expression-edit-actions:not(.dcg-limited-height){bottom:0}.dcg-calculator-api-container .dcg-expression-edit-actions .dcg-graphic{height:100%;background:linear-gradient(to right,rgba(255,255,255,0),#fff);position:absolute;top:0;right:100%;width:40px;cursor:default;pointer-events:none}.dcg-calculator-api-container .dcg-expression-edit-actions .dcg-exp-action-button{margin-left:2px;width:44px;height:44px;padding:12px 10px;text-align:center;margin-top:4px;display:inline-block;font-size:125%;line-height:20px;opacity:.6;border-radius:5px}.dcg-calculator-api-container .dcg-expression-edit-actions .dcg-exp-action-button.dcg-hovered{background:rgba(0,0,0,.1)}.dcg-calculator-api-container .dcg-expression-edit-actions .dcg-exp-action-button.dcg-depressed{opacity:1}.dcg-calculator-api-container .dcg-expression-edit-actions .dcg-exp-action-button.dcg-selected{background:rgba(0,0,0,.8);color:#fff}.dcg-calculator-api-container .dcg-suggested-zoom-view{position:absolute;bottom:7px;left:50%;font-size:20px;line-height:20px;margin-left:-10px;text-align:center;animation:dcg-fadeIn .3s}.dcg-calculator-api-container .dcg-suggested-zoom-view i{padding:5px;margin-left:-5px;opacity:.75}.dcg-calculator-api-container .dcg-suggested-zoom-view i.dcg-hovered{opacity:.9}.dcg-calculator-api-container .dcg-suggested-zoom-view i.dcg-depressed{opacity:1}.dcg-calculator-api-container .dcg-slider_menu{position:relative;top:-3px}.dcg-calculator-api-container .dcg-expression-footer-title{text-transform:uppercase;font-size:80%;color:#00000080;margin-bottom:4px}.dcg-calculator-api-container .dcg-expression-footer-title-help{padding:10px;color:#00000080;margin:-10px -10px -10px -6px;cursor:pointer;text-decoration:none}.dcg-calculator-api-container .dcg-expression-footer-title-help.dcg-hovered{color:#888}.dcg-calculator-api-container .dcg-expression-footer-title-help.dcg-depressed{color:#000}.dcg-calculator-api-container .dcg-expression-bottom .dcg-expression-braille-error{color:#666;margin:10px 10px 10px 0;font-size:90%}.dcg-calculator-api-container .dcg-expression-bottom .dcg-expression-braille-error .dcg-icon-error{font-size:80%;margin-right:5px;color:#fa824c}.dcg-calculator-api-container .dcg-expression-bottom .dcg-slider-step-container{margin-left:10px}.dcg-calculator-api-container .dcg-expression-bottom .dcg-slider-step-container.dcg-disabled-input .dcg-math-field,.dcg-calculator-api-container .dcg-expression-bottom .dcg-slider-step-container.dcg-disabled-input .dcg-mathquill-braille{opacity:.3;pointer-events:none}.dcg-calculator-api-container .dcg-expression-bottom .dcg-slider-step-label{font-size:85%}.dcg-calculator-api-container .dcg-expression-bottom .dcg-mq-editable-field{outline:none}.dcg-calculator-api-container .dcg-top-level-icon{position:absolute;top:0;right:0;width:calc(1.15rem + 12px);height:calc(1.15rem + 16px);overflow:visible;outline-offset:-4px}.dcg-calculator-api-container .dcg-top-level-icon:not(.dcg-tappable){cursor:default!important}.dcg-calculator-api-container .dcg-top-level-icon i{position:absolute;top:0;right:0;padding:8px 7px 20px 20px;z-index:2;opacity:.2;font-size:115%}.dcg-calculator-api-container .dcg-top-level-icon .dcg-top-level-delete,.dcg-calculator-api-container .dcg-top-level-icon .dcg-icon-replace{cursor:pointer}.dcg-calculator-api-container .dcg-top-level-icon .dcg-top-level-delete.dcg-hovered,.dcg-calculator-api-container .dcg-top-level-icon .dcg-icon-replace.dcg-hovered{opacity:.6}.dcg-calculator-api-container .dcg-top-level-icon .dcg-top-level-delete.dcg-depressed,.dcg-calculator-api-container .dcg-top-level-icon .dcg-icon-replace.dcg-depressed{opacity:.8}.dcg-calculator-api-container .dcg-smart-textarea-container{position:relative;font-size:90%}.dcg-calculator-api-container .dcg-smart-textarea-container textarea.dcg-smart-textarea,.dcg-calculator-api-container .dcg-smart-textarea-container .dcg-displayTextarea{border:0;font:inherit;resize:none;background:transparent;overflow:hidden;outline:none;color:#000;white-space:pre-wrap;word-wrap:break-word;width:100%;padding:3px;margin:-1px}.dcg-calculator-api-container .dcg-smart-textarea-container textarea.dcg-smart-textarea{opacity:0;position:absolute;top:1px;left:0;bottom:0;right:0;height:100%}.dcg-calculator-api-container .dcg-smart-textarea-container textarea.dcg-smart-textarea.dcg-empty{opacity:1}.dcg-calculator-api-container .dcg-smart-textarea-container .dcg-displayTextarea:after{content:\"|\";opacity:0;width:0;overflow:hidden;display:inline-block;height:1px}.dcg-calculator-api-container .dcg-smart-textarea-container .dcg-displayTextarea a{z-index:1;position:relative;color:#2f72dc}.dcg-calculator-api-container .dcg-smart-textarea-container .dcg-displayTextarea a.dcg-hovered,.dcg-calculator-api-container .dcg-smart-textarea-container .dcg-displayTextarea a .dcg-depressed{color:#2253a1}.dcg-calculator-api-container .dcg-selected .dcg-smart-textarea-container .dcg-displayTextarea{pointer-events:none;opacity:0}.dcg-calculator-api-container .dcg-selected .dcg-smart-textarea-container textarea{opacity:1}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-table-icon-container{position:absolute;top:50%;left:5px;margin-top:-14.5px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-drag-icon{opacity:.4;vertical-align:middle;pointer-events:none;font-size:95%;position:absolute;top:50%;right:4px;margin-top:-10px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-cell-math-content,.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-mathquill-braille{outline:none}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-cell:not(.dcg-non-editable) .dcg-cell-math-content,.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-cell:not(.dcg-non-editable) .dcg-mathquill-braille{max-width:100px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-table-container{overflow:hidden;padding-left:15px;padding-right:15px;position:relative}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-table-container:before{position:absolute;top:0;left:0;bottom:0;z-index:1;background:linear-gradient(to left,rgba(255,255,255,0),#fff);width:20px;content:\"\"}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-table-container:after{position:absolute;top:0;right:0;bottom:0;background:linear-gradient(to right,rgba(255,255,255,0),#fff);width:20px;content:\"\"}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-table-container .dcg-table-sliding-container{transition:transform .15s}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-main{padding-top:20px;padding-bottom:5px;position:relative}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-show-more-row td{border-top:1px solid #e5e5e5;text-align:center;font-size:80%;color:#00000080;padding:8px 0;font-style:italic}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-show-more-row td .dcg-show-more{color:#2f72dc;font-style:normal;text-decoration:underline;font-size:90%}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-show-more-row td .dcg-show-more.dcg-hovered{color:#2253a1}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-show-more-row td .dcg-show-more.dcg-depressed{color:#17396e}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata{position:relative;display:table}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row{display:table-row}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell{display:table-cell}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:not(:first-of-type) .dcg-cell{border-top:1px solid rgba(0,0,0,.15);padding:7px 10px 7px 20px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:not(:first-of-type) .dcg-cell.dcg-non-editable{padding:7px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:not(:first-of-type).dcg-braille-row .dcg-cell{padding:7px 20px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:nth-of-type(2) .dcg-cell{border-top:1px solid #444}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:first-of-type .dcg-cell{vertical-align:bottom;padding:7px 5px 3px 15px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:first-of-type .dcg-cell.dcg-error{padding-left:33px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:first-of-type .dcg-cell.dcg-leave-space-for-icon{padding-left:40px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:first-of-type .dcg-cell .dcg-math-field{min-height:29px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:first-of-type.dcg-braille-row .dcg-cell.dcg-leave-space-for-icon{padding:7px 15px 3px 40px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-static-mathquill-view{padding-right:8px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell{position:relative;text-align:center;vertical-align:middle;font-size:72%;min-height:34px;min-width:40px;cursor:text}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell .dcg-braille-input{text-align:center;min-width:40px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell:not(:first-of-type){border-left:1px solid rgba(0,0,0,.15)}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell:nth-of-type(2){border-left:1px solid #444}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-non-editable{cursor:default}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-non-editable .dcg-mq-math-mode{pointer-events:none}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell:not(.dcg-non-editable):not(.dcg-selected).dcg-empty .dcg-empty-line{position:absolute;width:26px;left:50%;margin-left:-13px;border-top:1px dashed #bbb;bottom:10px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-selected:not(.dcg-non-editable) .dcg-inner-border{position:absolute;left:-1px;top:-1px;bottom:-1px;right:-1px;z-index:1;pointer-events:none}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-selected.dcg-non-editable{background:#f5f5f5}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-selected.dcg-non-editable .dcg-mathquill-braille-overflow-left .dcg-tooltip-hit-area-container:before{background:linear-gradient(to left,rgba(245,245,245,0),whitesmoke)}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-selected.dcg-non-editable .dcg-mathquill-braille-overflow-right .dcg-tooltip-hit-area-container:after{background:linear-gradient(to right,rgba(245,245,245,0),whitesmoke)}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-selected:not(.dcg-non-editable) .dcg-inner-border{border:2px solid #2f72dc}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell .dcg-mq-math-mode{position:relative}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell .dcg-table-icon-error-container{position:absolute;top:50%;left:4px;margin-top:-7px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header{font-size:85%;min-height:37px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header .dcg-mathquill-braille{min-height:30px;display:flex;align-items:center}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header:not(:first-of-type):not(:last-of-type) .dcg-mq-editable-field,.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header:not(:first-of-type):not(:last-of-type) .dcg-static-mathquill-view,.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header:not(:first-of-type):not(:last-of-type) .dcg-mathquill-braille,.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header.dcg-error .dcg-mq-editable-field,.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header.dcg-error .dcg-static-mathquill-view,.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header.dcg-error .dcg-mathquill-braille{text-align:center}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable.dcg-faded-h .dcg-tabledata:after{content:\"\";position:absolute;top:0;bottom:0;right:0;background:linear-gradient(to left,#fff,rgba(255,255,255,0));width:60px;pointer-events:none}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable.dcg-faded-v .dcg-tabledata:before{content:\"\";position:absolute;bottom:0;left:0;right:0;height:30px;pointer-events:none;background:linear-gradient(to top,#fff,rgba(255,255,255,0));z-index:1}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable.dcg-faded-v .dcg-tabledata .dcg-row:last-of-type .dcg-cell .dcg-empty-line{display:none}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable:not(.dcg-selected).dcg-faded-v .dcg-tabledata .dcg-row:last-of-type{visibility:hidden}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable:not(.dcg-selected).dcg-faded-v .dcg-tabledata .dcg-row:last-of-type .dcg-cell{border-color:transparent}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable:not(.dcg-selected).dcg-faded-v .dcg-tabledata .dcg-row .dcg-cell:last-of-type{border-color:transparent;visibility:hidden}.dcg-calculator-api-container .dcg-expressionitem .dcg-caret-container{font-size:95%;position:absolute;top:-1px;left:38px;width:32px;height:48px;color:#999;padding-left:10px;padding-top:18px;text-align:left;z-index:2}.dcg-calculator-api-container .dcg-expressionitem .dcg-caret-container i{transition:.2s;width:16px;height:16px}.dcg-calculator-api-container .dcg-expressionitem .dcg-caret-container.dcg-hovered{color:#666;cursor:pointer}.dcg-calculator-api-container .dcg-expressionitem.dcg-collapsed .dcg-caret-container i{display:inline-block;transform:rotate(-90deg)}.dcg-calculator-api-container .dcg-expressionitem.dcg-secretFolder{display:none}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder .dcg-action-toggle-secret-folder{cursor:pointer;color:#00000080;font-size:75%;padding:5px;margin:0 -5px -10px 15px;position:relative;z-index:1}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder .dcg-fade-container:after{transition:0}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder:not(.dcg-collapsed).dcg-has-items .dcg-fade-container:after{position:absolute;top:35px;bottom:5px;left:56px;content:\"\";border-left:1px solid rgba(0,0,0,.2);animation:dcg-fadeIn .3s}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder .dcg-main textarea.dcg-smart-textarea,.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder .dcg-main .dcg-displayTextarea{padding-left:20px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-loading,.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-failed{font-size:100%;padding:1px;color:#888;font-style:italic;line-height:37px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-retry-loading-image{color:#407bb5;text-decoration:underline}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid{font-size:80%;display:grid;grid-template-columns:min-content 2fr min-content 1fr;width:calc(100% + 20px);max-width:450px;color:#00000080}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-mathquill-wrapper{width:100%;padding-right:5px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-image-input-name,.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-image-input-mathquill{display:flex;align-self:center;padding-right:5px;overflow:hidden;padding-top:2px;padding-bottom:2px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-mq-editable-field:not(.dcg-focus){cursor:pointer}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage.dcg-input-focused .dcg-image-input-grid,.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage.dcg-input-focused .dcg-braille-input{color:#000}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-image-title-row{display:flex;justify-content:flex-start}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-image-title-row .dcg-smart-textarea-container{margin-bottom:8px;font-size:85%}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-image-title-row .dcg-smart-textarea-container textarea,.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-image-title-row .dcg-smart-textarea-container .dcg-displayTextarea{padding-top:0;padding-bottom:0;margin:0 10px 0 -1px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-image-title-row .dcg-smart-textarea-container textarea:empty,.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-image-title-row .dcg-smart-textarea-container .dcg-displayTextarea:empty{min-width:8rem}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-action-changeimage{color:#00000080;text-decoration:underline;font-size:80%}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-action-changeimage.dcg-hovered{color:#0009}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-action-changeimage.dcg-depressed{color:#000000b3}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage.dcg-selected .dcg-smart-textarea-container{position:relative;top:-1px}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage.dcg-selected .dcg-main{margin-right:-1px}@keyframes dcg-fade-pulse{0%{opacity:.2}50%{opacity:1}to{opacity:.2}}.dcg-calculator-api-container .dcg-expressionitem.dcg-new-expression{height:54px;position:relative;border-bottom:1px solid transparent;overflow:visible!important}.dcg-calculator-api-container .dcg-expressionitem.dcg-new-expression .dcg-new-math-div{position:absolute;top:0;left:0;bottom:0;right:0;cursor:pointer}.dcg-calculator-api-container .dcg-expressionitem.dcg-new-expression .dcg-new-math-div .dcg-new-expression-fade{background:linear-gradient(to top,#fff,rgba(255,255,255,0) 50%);width:44px;position:absolute;top:0;bottom:0;z-index:3}.dcg-calculator-api-container .dcg-has-background-color .dcg-new-expression-fade{display:none}.dcg-calculator-api-container .dcg-container.dcg-narrow .dcg-expression-top-bar{border-right:0}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn,.dcg-calculator-api-container .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn{width:40px;height:40px;line-height:40px;font-size:1.1rem;display:inline-block;border-radius:5px;text-align:center;margin:-1px;overflow:hidden}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-constructions-count-link,.dcg-calculator-api-container .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn.dcg-constructions-count-link{margin-right:4px}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-rotated,.dcg-calculator-api-container .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn.dcg-rotated{transform:rotate(-90deg)}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn i.dcg-icon-pause,.dcg-calculator-api-container .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn i.dcg-icon-pause{font-size:80%}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn i.dcg-icon-undo,.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn i.dcg-icon-redo,.dcg-calculator-api-container .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn i.dcg-icon-undo,.dcg-calculator-api-container .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn i.dcg-icon-redo{font-size:120%}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn i,.dcg-calculator-api-container .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn i{opacity:.6}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn:not(:last-of-type),.dcg-calculator-api-container .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn:not(:last-of-type){margin-right:-2px}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-disabled,.dcg-calculator-api-container .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn.dcg-disabled{opacity:.3;pointer-events:none}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-hovered,.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-active,.dcg-calculator-api-container .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn.dcg-hovered,.dcg-calculator-api-container .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn.dcg-active{background:rgba(0,0,0,.1)}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-hovered i,.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-active i,.dcg-calculator-api-container .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn.dcg-hovered i,.dcg-calculator-api-container .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn.dcg-active i{opacity:.8}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-depressed,.dcg-calculator-api-container .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn.dcg-depressed{background:rgba(0,0,0,.2)}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-depressed i,.dcg-calculator-api-container .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn.dcg-depressed i{opacity:1}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar{border-right:1px solid rgba(0,0,0,.2);height:48px;border-bottom:1px solid rgba(0,0,0,.2);line-height:37px;width:100%;transition:box-shadow .2s ease;padding:5px;display:flex;background:linear-gradient(#fcfcfc,#eaeaea)}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar.dcg-expressions-scrolled{box-shadow:-2px 2px 4px #00000026;z-index:4}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-btn-red,.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-btn-primary{padding:0 15px;display:inline-block;align-self:center;height:35px;line-height:35px}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-center-buttons{text-align:center;flex:1;white-space:nowrap}.dcg-calculator-api-container .dcg-add-expression-container{position:relative;float:left;height:37px}.dcg-calculator-api-container .dcg-in-api-action-opendrawer{float:left}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover{width:auto}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover.dcg-bottom{position:absolute;top:43px;left:-3px}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover.dcg-bottom .dcg-arrow{left:23px}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover.dcg-right{position:absolute;top:-40px;left:40px}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover.dcg-right .dcg-arrow{top:60px}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-popover-interior{padding:4px 0}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item{cursor:pointer;font-size:80%;text-align:left;white-space:nowrap;opacity:.5;padding:8px;line-height:0}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item i{margin:0 8px 0 4px;font-size:205%;vertical-align:middle;width:30px;display:inline-block;text-align:right}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item i.dcg-icon-new-expression{font-size:210%}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item i.dcg-icon-new-table{font-size:200%}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item i.dcg-icon-new-folder{font-size:190%}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item.dcg-action-newexpression{padding:10px 12px 4px 8px}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item.dcg-hovered{opacity:.8}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item.dcg-depressed{opacity:1}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item.dcg-disabled{opacity:.25}.dcg-calculator-api-container .dcg-constructions-count-link{position:relative}.dcg-calculator-api-container .dcg-constructions-count-link i.dcg-icon-geometry{font-size:40px;position:relative;top:-2px}.dcg-calculator-api-container .dcg-constructions-count-link .dcg-construction-count{position:absolute;bottom:1px;right:1px;background:#999;box-shadow:0 0 0 1px #eee;color:#fff;border-radius:8px;height:16px;min-width:16px;line-height:16px;padding-left:4px;padding-right:4px;text-align:center;font-size:65%;font-family:arial,sans-serif}.dcg-calculator-api-container .dcg-expression-top-bar .dcg-icon-volume{font-size:22px;position:relative;top:2px}@keyframes dcg-fadeOut-indicator{0%{opacity:.5}99%{opacity:.5}to{opacity:0}}@keyframes dcg-animate-mute-bar{0%{transform:rotate(-45deg) scaleX(0)}to{transform:rotate(-45deg) scale(1)}}.dcg-calculator-api-container .dcg-global-mute-button .dcg-first-time-animation{visibility:hidden}.dcg-calculator-api-container .dcg-global-mute-button.dcg-has-never-interacted .dcg-first-time-animation{visibility:visible;opacity:.5;animation:dcg-fadeOut-indicator 16s forwards}.dcg-calculator-api-container .dcg-global-mute-button.dcg-has-never-interacted .dcg-first-time-animation:before{content:\"\";position:absolute;top:4px;left:3.5px;bottom:3px;right:3.5px;border-radius:20%;z-index:0;background:#999;animation:dcg-loading-pulse 2s infinite;pointer-events:none}.dcg-calculator-api-container .dcg-circular-icon-container.dcg-show-globally-muted{opacity:.6}.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-is-muted .dcg-icon-volume:after{content:\"\";background:currentColor;width:1em;height:2px;position:absolute;top:50%;left:50%;border:1px solid #fff;margin-top:-2px;margin-left:-.55em;transform:rotate(-45deg) scaleX(0);animation:dcg-animate-mute-bar .2s forwards;animation-delay:.1s}.dcg-calculator-api-container .dcg-exp-list-resizer{position:absolute;top:0;right:-12px;bottom:0;width:15px;cursor:ew-resize;z-index:1}.dcg-calculator-api-container .dcg-exp-list-resizer.dcg-depressed{width:215px;right:-112px}.dcg-calculator-api-container .dcg-expression-search-bar{padding:5px;background:#d8d8d8;position:relative}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-search-row{display:flex;align-items:center}.dcg-calculator-api-container .dcg-expression-search-bar.dcg-expressions-scrolled{box-shadow:-2px 2px 4px #00000026;z-index:4}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-search-mathquill-container{flex:1;position:relative;overflow:hidden}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-search-placeholder{opacity:.3;position:absolute;top:50%;left:35px;margin-top:-.5em;pointer-events:none}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-mq-container{width:100%}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-math-field{padding:6px 30px 6px 6px;margin:1px;border-radius:8px;background:#fff;width:100%;font-size:100%;color:#888;border:1px solid #bbb}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-math-field.dcg-hovered{color:#444;border:2px solid #999;margin:0}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-math-field.dcg-mq-focused{color:#000;border:2px solid #2f72dc;margin:0}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-search-mathquill-container .dcg-math-field{padding-left:30px}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-caret-container{font-size:95%;width:25px;padding-left:5px;color:#999;text-align:left}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-caret-container i{transition:.2s;width:16px;height:16px}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-caret-container.dcg-hovered{color:#666;cursor:pointer}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-caret-container.dcg-collapsed i{display:inline-block;transform:rotate(-90deg)}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-icon-remove,.dcg-calculator-api-container .dcg-expression-search-bar .dcg-icon-search,.dcg-calculator-api-container .dcg-expression-search-bar .dcg-icon-replace{opacity:.2}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-icon-remove.dcg-hovered,.dcg-calculator-api-container .dcg-expression-search-bar .dcg-icon-search.dcg-hovered,.dcg-calculator-api-container .dcg-expression-search-bar .dcg-icon-replace.dcg-hovered{opacity:.6}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-icon-remove.dcg-depressed,.dcg-calculator-api-container .dcg-expression-search-bar .dcg-icon-search.dcg-depressed,.dcg-calculator-api-container .dcg-expression-search-bar .dcg-icon-replace.dcg-depressed{opacity:.8}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-icon-replace.dcg-disabled{opacity:0}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-icon-remove,.dcg-calculator-api-container .dcg-expression-search-bar .dcg-icon-replace{font-size:90%;padding:10px 7px 10px 12px}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-icon-search{pointer-events:none;left:5px;position:absolute;top:50%;right:5px;height:20px;line-height:20px;margin-top:-15px;padding:5px}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-search-replace-icon-container{position:absolute;top:50%;right:5px;margin-top:-9px;font-size:110%}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-search-replace-icon-container .dcg-tooltipped-error{position:relative;top:-1px;left:-2px}.dcg-calculator-api-container .dcg-expression-search-bar .dcg-search-replace-icon-container .dcg-icon-check{color:#2f72dc;margin-right:5px}@keyframes dcg-tick-metronome{0%{transform:scale(.5) rotate(-20deg)}50%{transform:scale(.5) rotate(20deg)}to{transform:scale(.5) rotate(-20deg)}}.dcg-calculator-api-container .dcg-ticker{padding:5px;position:relative;background:#eee;border-bottom:1px solid rgba(0,0,0,.2);border-right:1px solid rgba(0,0,0,.2);overflow:hidden}.dcg-calculator-api-container .dcg-ticker.dcg-expressions-scrolled{box-shadow:-2px 2px 4px #00000026;z-index:4}.dcg-calculator-api-container .dcg-ticker .dcg-circular-icon-container{position:relative}.dcg-calculator-api-container .dcg-ticker .dcg-icon-remove{position:absolute;top:0;right:0;opacity:.2;font-size:115%;padding:10px 7px 10px 12px}.dcg-calculator-api-container .dcg-ticker .dcg-icon-remove.dcg-hovered{opacity:.6}.dcg-calculator-api-container .dcg-ticker .dcg-icon-remove.dcg-depressed{opacity:.8}.dcg-calculator-api-container .dcg-ticker .dcg-mini-play-pause{transform:scale(.5);transform-origin:bottom right;position:absolute;bottom:-5px;right:-4px;background:#eee;border-radius:50%;border:1px solid #eee}.dcg-calculator-api-container .dcg-ticker .dcg-icon-metronome-2{font-size:130%;position:relative;left:1px}.dcg-calculator-api-container .dcg-ticker .dcg-metronome-bar{width:2px;height:24px;transform:scale(.5) rotate(-20deg);transform-origin:bottom center;background:#777;border-radius:2px;position:absolute;bottom:10px;left:50%;box-shadow:0 0 0 1px #eee}.dcg-calculator-api-container .dcg-ticker .dcg-metronome-bar.dcg-metronome-playing{animation:dcg-tick-metronome infinite .5s ease-in-out}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-container{display:flex;width:calc(100% - 30px)}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-container .dcg-circular-icon-container{font-size:65%;margin-right:10px!important;order:1}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-container .dcg-circular-icon-container.dcg-disabled{opacity:.4;pointer-events:none}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-container .dcg-create-sliders{margin-top:5px;width:100%}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-internal{display:flex;flex:1;order:2;align-items:center;color:#666;flex-wrap:wrap;padding:3px 0;overflow:hidden;font-size:95%}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-internal .dcg-mq-container{color:#000;margin-left:4px;font-size:95%}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition{max-width:100%;display:flex;align-items:baseline}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-mq-container{margin-right:5px;overflow:hidden;flex:1}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-math-field{border-bottom:1px solid rgba(0,0,0,.2);padding:1px 20px 1px 2px;margin:1px;min-width:75px;max-width:100%}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-math-field.dcg-focus,.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-math-field.dcg-invalid{border-bottom:2px solid #2f72dc;margin-bottom:0}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-math-field.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-math-field{border-bottom:1px solid rgba(0,0,0,.2);padding:1px 2px;margin:1px;min-width:30px;max-width:90px}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-math-field.dcg-focus,.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-math-field.dcg-invalid{border-bottom:2px solid #2f72dc;margin-bottom:0}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-math-field.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-settings-internal .dcg-clickable-info-error-container{margin-left:-20px;width:20px;display:inline-block}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-toggle-help{text-decoration:none;color:#aaa;padding:10px 6px;font-size:85%;position:relative;top:1px;flex:1}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-toggle-help.dcg-hovered{color:#666}.dcg-calculator-api-container .dcg-ticker .dcg-ticker-toggle-help.dcg-depressed{color:#444}.dcg-calculator-api-container .dcg-geo-show-constructions-pane{position:relative;background:#eee}.dcg-calculator-api-container .dcg-geo-show-constructions-pane.dcg-transient-error,.dcg-calculator-api-container .dcg-geo-show-constructions-pane.dcg-cant-drag-item{opacity:.5}.dcg-calculator-api-container .dcg-geo-show-constructions-pane:after{content:\"\";background:linear-gradient(to bottom,rgba(238,238,238,0),#eee);height:10px;position:absolute;bottom:0;left:0;right:0;pointer-events:none}.dcg-calculator-api-container .dcg-geo-show-constructions-pane:before{content:\"\";background:linear-gradient(to top,rgba(238,238,238,0),#eee);height:10px;position:absolute;top:0;left:0;right:0;z-index:1;pointer-events:none}.dcg-calculator-api-container .dcg-geo-show-constructions-pane .dcg-token-being-dragged-container{opacity:.3}.dcg-calculator-api-container .dcg-displayed-sections-container{max-height:300px;overflow:auto}.dcg-calculator-api-container .dcg-displayed-sections-container .dcg-displayed-section-level{text-align:left;margin:0 8px;padding:8px 0}.dcg-calculator-api-container .dcg-displayed-sections-container .dcg-displayed-section-level:not(:last-of-type){border-bottom:1px solid rgba(0,0,0,.2);position:relative}.dcg-calculator-api-container .dcg-empty-constructions{padding:12px;text-align:center;color:#666;font-style:italic;font-size:90%}.dcg-calculator-api-container .dcg-3d-getting-started-container{text-align:center}.dcg-calculator-api-container .dcg-3d-getting-started-container i.dcg-icon-remove{position:absolute;top:5px;right:5px;width:30px;height:30px;border-radius:50%;line-height:30px;margin-left:5px;font-size:90%;opacity:.8}.dcg-calculator-api-container .dcg-3d-getting-started-container i.dcg-icon-remove.dcg-hovered,.dcg-calculator-api-container .dcg-3d-getting-started-container i.dcg-icon-remove:focus{background:rgba(255,255,255,.2);opacity:1}.dcg-calculator-api-container .dcg-3d-getting-started-container i.dcg-icon-remove.dcg-depressed{background:rgba(255,255,255,.4);opacity:1}.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-3d-getting-started{background:linear-gradient(to bottom,#ee74b5,#b92a73);position:relative;max-width:350px;margin:0 auto;padding:20px 10px;border-radius:5px;color:#fff}.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-3d-getting-started-message{margin-bottom:12px}.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-3d-getting-started-message a{text-decoration:underline;color:#fff}.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-3d-getting-started-message a.dcg-hovered{text-decoration:underline;color:#e2e2e2}.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-3d-getting-started-message a.dcg-depressed{text-decoration:underline;color:#fff}.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-3d-getting-started-title{font-size:1.15rem;padding:0 20px;margin-bottom:10px;margin-top:0;overflow:hidden;height:1.15em;font-weight:inherit}.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-getting-started-primary-btn,.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-getting-started-secondary-btn{text-decoration:none;display:inline-block;height:2.25em;line-height:2.25em;padding:0 10px;border-radius:3px;white-space:nowrap;flex:1;max-width:160px}.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-getting-started-primary-btn.dcg-hovered,.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-getting-started-primary-btn.dcg-focus-visible,.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-getting-started-secondary-btn.dcg-hovered,.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-getting-started-secondary-btn.dcg-focus-visible{box-shadow:0 5px 5px #0000004d}.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-getting-started-primary-btn.dcg-depressed,.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-getting-started-secondary-btn.dcg-depressed{box-shadow:0 3px 3px #0003 inset}.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-getting-started-primary-btn{color:#cb5497;background:#fff}.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-getting-started-secondary-btn{color:#fff;border:1px solid #fff;background:#b92a73;position:relative;z-index:1}.dcg-calculator-api-container .dcg-3d-getting-started-container .dcg-getting-started-footer-links{display:flex;padding:5px 0;margin:auto;justify-content:center;flex-wrap:wrap;width:100%;gap:10px;max-width:250px}.dcg-calculator-api-container .dcg-toggle-view{float:right;padding:5px;margin-top:5px;display:inline-block;width:30px;height:8px;background:#ddd;border-radius:8px;position:relative;transition:all .2s}.dcg-calculator-api-container .dcg-toggle-view .dcg-toggle-switch{position:absolute;top:-4px;left:0;width:18px;height:18px;background:#f5f5f5;border-radius:50%;transition:all .2s;box-shadow:0 2px 2px #0003,0 0 3px #0003}.dcg-calculator-api-container .dcg-toggle-view:not(.dcg-toggled).dcg-hovered .dcg-toggle-switch{background:#ebebeb}.dcg-calculator-api-container .dcg-toggle-view:not(.dcg-toggled).dcg-depressed .dcg-toggle-switch{background:#e0e0e0}.dcg-calculator-api-container .dcg-toggle-view.dcg-toggled{transition:all .2s}.dcg-calculator-api-container .dcg-toggle-view.dcg-toggled .dcg-toggle-switch{transition:all .2s;left:12px;background:#666}.dcg-calculator-api-container .dcg-toggle-view.dcg-toggled.dcg-hovered .dcg-toggle-switch{background:#555}.dcg-calculator-api-container .dcg-toggle-view.dcg-toggled.dcg-depressed .dcg-toggle-switch{background:#444}.dcg-calculator-api-container .dcg-clickable-image-info-view{display:flex;margin-top:20px;justify-content:space-evenly;align-items:center}.dcg-calculator-api-container .dcg-clickable-image-info-view .dcg-tooltip-hit-area-container{margin-left:5px;margin-right:10px}.dcg-calculator-api-container .dcg-clickable-image-info-view .dcg-clickable-image-state-container{position:relative;color:#666;text-align:center}.dcg-calculator-api-container .dcg-clickable-image-info-view .dcg-clickable-image-state-container .dcg-clickable-image-state{background:#fff;background-size:cover;background-repeat:no-repeat;width:60px;height:60px;border-radius:10px;border:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container .dcg-clickable-image-info-view .dcg-clickable-image-state-container .dcg-clickable-image-state-close{position:absolute;top:-10px;right:-2px;width:25px;height:25px;padding-top:5px;font-size:14px;background:#666;color:#fff;border-radius:50%;opacity:.6}.dcg-calculator-api-container .dcg-clickable-image-info-view .dcg-clickable-image-state-container .dcg-clickable-image-state-close.dcg-hovered{opacity:.8}.dcg-calculator-api-container .dcg-clickable-image-info-view .dcg-clickable-image-state-container .dcg-clickable-image-state-close.dcg-depressed{opacity:1}.dcg-calculator-api-container .dcg-clickable-section .dcg-clickable-menu-row{font-size:90%;display:flex;align-items:baseline;margin-right:2px}.dcg-calculator-api-container .dcg-clickable-section .dcg-clickable-menu-row .dcg-input-label{color:#666}.dcg-calculator-api-container .dcg-clickable-section .dcg-clickable-menu-row .dcg-mq-container{flex:1;overflow:hidden}.dcg-calculator-api-container .dcg-clickable-section .dcg-clickable-menu-row .dcg-math-field{border-bottom:1px solid rgba(0,0,0,.2);padding:1px 2px;margin:1px;min-width:100%;max-width:100%;font-size:95%}.dcg-calculator-api-container .dcg-clickable-section .dcg-clickable-menu-row .dcg-math-field.dcg-focus,.dcg-calculator-api-container .dcg-clickable-section .dcg-clickable-menu-row .dcg-math-field.dcg-invalid{border-bottom:2px solid #2f72dc;margin-bottom:0}.dcg-calculator-api-container .dcg-clickable-section .dcg-clickable-menu-row .dcg-math-field.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container .dcg-clickable-section .dcg-clickable-menu-row .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container .dcg-clickable-section .dcg-clickable-menu-row .dcg-clickable-info-error-container{margin-left:-20px;width:20px;display:inline-block}.dcg-calculator-api-container .dcg-clickable-section .dcg-clickable-list-index-notice{font-size:90%;color:#444;padding-top:5px;line-height:1.2em;width:200px}.dcg-calculator-api-container .dcg-clickable-section .dcg-clickable-list-index-notice .dcg-btn-light-gray{line-height:inherit}.dcg-calculator-api-container .dcg-clickable-section .dcg-index-variable-marker{padding-left:4px;padding-right:4px;font-size:90%;border:1px solid rgba(0,0,0,.2);border-radius:4px}.dcg-calculator-api-container .dcg-clickable-section .dcg-index-variable-marker:not(.dcg-mathquill-has-focus){background:transparent;pointer-events:none;opacity:.75}.dcg-calculator-api-container .dcg-label-orientation-view{width:78px;height:78px;display:inline-block;position:relative;transition:transform .1s}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-orientation-option{display:inline-block;width:26px;height:26px;line-height:26px;text-align:center;border-radius:50%;color:#bbb}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-orientation-option.dcg-hovered{color:#666}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-orientation-option.dcg-selected{color:#2f72dc}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-orientation-option.dcg-selected.dcg-hovered{color:#2253a1}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-orientation-option i{position:relative;top:2px}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-label-orientation-below-right,.dcg-calculator-api-container .dcg-label-orientation-view .dcg-label-orientation-above-right,.dcg-calculator-api-container .dcg-label-orientation-view .dcg-label-orientation-below-left,.dcg-calculator-api-container .dcg-label-orientation-view .dcg-label-orientation-above-left{color:#e2e2e2}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-orientation-disabled{pointer-events:none}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-label-orientation-below-right{position:absolute;bottom:0;right:0;transform:rotate(225deg)}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-label-orientation-below-left{position:absolute;bottom:0;left:0;transform:rotate(315deg)}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-label-orientation-above-right{position:absolute;top:0;right:0;transform:rotate(135deg)}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-label-orientation-above-left{position:absolute;top:0;left:0;transform:rotate(45deg)}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-label-orientation-left{position:absolute;top:26px;left:0}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-label-orientation-right{position:absolute;top:26px;right:0;transform:rotate(180deg)}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-label-orientation-above{position:absolute;top:0;left:26px;transform:rotate(90deg)}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-label-orientation-below{position:absolute;bottom:0;left:26px;transform:rotate(270deg)}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-label-orientation-center{position:absolute;top:26px;left:26px;font-size:200%}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-label-orientation-center:after{content:\"\";width:12px;height:12px;border-radius:50%;position:absolute;top:50%;left:50%;background:currentColor;margin-top:-6px;margin-left:-6px;box-shadow:0 0 2px #0003}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-label-orientation-center.dcg-orientation-disabled:not(.dcg-selected):after{background:#fff;width:10px;height:10px;margin-top:-5px;margin-left:-5px;box-shadow:0 0 2px #0003,inset 0 0 0 1px #00000026}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-vertical-orientation-indicator{width:0;height:0;border:4px solid transparent;border-bottom:15px solid #ddd;position:absolute;top:50%;left:50%;margin-top:-19px;margin-left:-4px}.dcg-calculator-api-container .dcg-label-orientation-view .dcg-vertical-orientation-indicator:after{content:\"\";width:0;height:0;border:4px solid transparent;border-top:15px solid #ddd;position:absolute;top:50%;left:50%;margin-top:15px;margin-left:-4px}.dcg-calculator-api-container .dcg-image-options-menu .dcg-options-menu-section-title{color:#666}.dcg-calculator-api-container .dcg-image-options-menu .dcg-opacities-menu-flex{display:flex;gap:5px;margin-top:5px}.dcg-calculator-api-container .dcg-image-options-menu .dcg-opacities-menu-flex .dcg-opacity-option{height:29px}.dcg-calculator-api-container .dcg-image-options-menu .dcg-image-aria-container{padding:0 10px}.dcg-calculator-api-container .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row:first-of-type{margin-top:10px}.dcg-calculator-api-container .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row .dcg-input-label{color:#666}.dcg-calculator-api-container .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row .dcg-math-field{border-bottom:1px solid rgba(0,0,0,.2);padding:1px 2px;margin:1px;min-width:100%;max-width:100%;font-size:95%}.dcg-calculator-api-container .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row .dcg-math-field.dcg-focus,.dcg-calculator-api-container .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row .dcg-math-field.dcg-invalid{border-bottom:2px solid #2f72dc;margin-bottom:0}.dcg-calculator-api-container .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row .dcg-math-field.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row input{outline:none;border:1px solid #bbb;border-top:0!important;border-right:0!important;border-left:0!important;color:#000;-webkit-appearance:none;appearance:none;border-radius:0;padding:5px 0;font-size:95%;width:120px;margin-top:5px}.dcg-calculator-api-container .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row input.dcg-hovered{border-color:#ccc;box-shadow:0 1px #ccc}.dcg-calculator-api-container .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row input:focus:not([disabled]){border-color:#2f72dc;box-shadow:0 1px #2f72dc}.dcg-calculator-api-container .dcg-slider-options-view{top:-11px;left:42px;width:200px;padding:15px 15px 10px}.dcg-calculator-api-container .dcg-slider-options-view .dcg-title{font-size:110%}.dcg-calculator-api-container .dcg-slider-options-view .dcg-slider-speed-menu{margin-top:10px}.dcg-calculator-api-container .dcg-slider-options-view .dcg-slider-speed-menu .dcg-title,.dcg-calculator-api-container .dcg-slider-options-view .dcg-slider-speed-menu .dcg-slider-speed-container{display:inline-block}.dcg-calculator-api-container .dcg-slider-speed-container{float:right;position:relative;top:-1px;font-size:95%}.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster,.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower{color:#666}.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster.dcg-hovered,.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower.dcg-hovered{color:#222}.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster.dcg-depressed,.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower.dcg-depressed{color:#000}.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster.dcg-disabled,.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower.dcg-disabled{opacity:.25;pointer-events:none}.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower{transform:rotate(180deg)}.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower i{position:relative;top:1px}.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster,.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower{cursor:pointer;font-size:70%;display:inline-block;width:26px;height:26px;text-align:center;line-height:26px;border:1px solid rgba(0,0,0,.2);border-radius:4px}.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster.dcg-hovered,.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower.dcg-hovered{background:rgba(0,0,0,.05)}.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster.dcg-depressed,.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower.dcg-depressed{background:rgba(0,0,0,.2)}.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster i,.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower i{position:relative;left:1px}.dcg-calculator-api-container .dcg-slider-speed-container .dcg-variable-speed{width:45px;font-size:90%;display:inline-block;text-align:center}.dcg-calculator-api-container .dcg-table-column-menu{left:-9px;top:34px}.dcg-calculator-api-container .dcg-table-column-menu .dcg-triangle{border-width:0 9px 9px 9px;border-color:transparent transparent #d3d3d3 transparent}.dcg-calculator-api-container .dcg-table-column-menu .dcg-triangle:before{position:absolute;top:1px;left:-8px;border-width:0 8px 8px 8px;border-color:transparent transparent #fff transparent}.dcg-calculator-api-container .dcg-explist-terms-notice-container{text-align:center;position:absolute;bottom:65px;left:10px;right:10px}.dcg-calculator-api-container .dcg-explist-terms-notice-container .dcg-explist-terms-notice{max-width:350px;border:1px solid rgba(0,0,0,.2);border-radius:10px;position:relative;margin:0 auto;padding:15px 30px;text-align:center}.dcg-calculator-api-container .dcg-explist-terms-notice-container .dcg-btn-gray-outline{margin-top:8px;display:inline-block;font-size:.9rem;line-height:1.8rem;padding:0 10px}.dcg-calculator-api-container .dcg-explist-terms-notice-container i.dcg-icon-remove{position:absolute;text-align:center;top:2px;right:2px;width:30px;height:30px;border-radius:50%;line-height:30px;margin-left:5px;font-size:.9rem;color:#bbb}.dcg-calculator-api-container .dcg-explist-terms-notice-container i.dcg-icon-remove.dcg-hovered,.dcg-calculator-api-container .dcg-explist-terms-notice-container i.dcg-icon-remove.dcg-focus-visible{color:#666;background:rgba(0,0,0,.1)}.dcg-calculator-api-container .dcg-explist-terms-notice-container i.dcg-icon-remove.dcg-depressed{color:#000;background:rgba(0,0,0,.2)}@keyframes dcg-fadeIn-show-keypad{0%{transform:translateY(10px);opacity:0}50%{transform:translateY(10px);opacity:0}to{transform:translate(0);opacity:1}}.dcg-calculator-api-container .dcg-keypad .dcg-keys-container{position:absolute;bottom:0;z-index:60;width:100%;margin:0 auto;padding:0;transition:opacity .3s}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover{position:absolute;right:8px}.dcg-calculator-api-container .dcg-keypad .dcg-minimize-keypad .dcg-icon-keyboard,.dcg-calculator-api-container .dcg-keypad .dcg-show-keypad .dcg-icon-keyboard{font-size:175%;float:left;margin-right:8px}.dcg-calculator-api-container .dcg-keypad .dcg-minimize-keypad .dcg-icon-caret-down,.dcg-calculator-api-container .dcg-keypad .dcg-minimize-keypad .dcg-icon-caret-up,.dcg-calculator-api-container .dcg-keypad .dcg-show-keypad .dcg-icon-caret-down,.dcg-calculator-api-container .dcg-keypad .dcg-show-keypad .dcg-icon-caret-up{font-size:75%;line-height:2rem}.dcg-calculator-api-container .dcg-keypad .dcg-minimize-keypad-container{position:absolute;top:-2.5rem;left:-1px}.dcg-calculator-api-container .dcg-keypad .dcg-show-keypad-container{z-index:60;position:absolute;bottom:5px;left:5px;animation:dcg-fadeIn-show-keypad .6s}.dcg-calculator-api-container .dcg-keypad .dcg-minimize-keypad{padding:.25rem 1.25rem;border-top-left-radius:5px;border-top-right-radius:5px}.dcg-calculator-api-container .dcg-keypad .dcg-show-keypad{padding:4px 14px}.dcg-calculator-api-container .dcg-keypad .dcg-keys{position:relative;width:100%;max-width:835px;margin:auto;text-align:center}.dcg-calculator-api-container .dcg-keypad .dcg-keys{font-size:110%}.dcg-calculator-api-container .dcg-keypad .dcg-keys-background{background:#f0f0f0;border-top:1px solid rgba(0,0,0,.1);box-shadow:0 -1px 3px #0000001a}.dcg-calculator-api-container .dcg-keypad .dcg-keys-background .dcg-minimize-keypad{background:#f0f0f0;color:#000000b3;border:1px solid rgba(0,0,0,.1);border-bottom:1px solid #f0f0f0;box-shadow:0 -1px 3px #0000001a}.dcg-calculator-api-container .dcg-keypad .dcg-keys-background .dcg-minimize-keypad.dcg-hovered{color:#000000e6}.dcg-calculator-api-container .dcg-keypad .dcg-keys-background .dcg-minimize-keypad.dcg-depressed{color:#000}.dcg-calculator-api-container .dcg-narrow .dcg-keypad .dcg-functions-popover:not(.dcg-left){position:absolute;margin-left:-70px}.dcg-calculator-api-container .dcg-narrow .dcg-keypad .dcg-functions-popover.dcg-left{right:18%}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container{height:40px;display:inline-block;position:relative;flex-grow:1}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container.dcg-disabled{opacity:.5}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container.dcg-disabled .dcg-keypad-btn{cursor:default}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn{position:absolute;top:2px;left:2px;right:2px;bottom:2px;display:flex;flex-flow:row;align-items:center;padding:0}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn .dcg-keypad-btn-content{text-align:center;flex:1;pointer-events:none}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-large-operator,.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-int{font-size:80%}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-large-operator .dcg-mq-sup,.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-large-operator .dcg-mq-sub,.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-large-operator .dcg-mq-to,.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-large-operator .dcg-mq-from,.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-int .dcg-mq-sup,.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-int .dcg-mq-sub,.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-int .dcg-mq-to,.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-int .dcg-mq-from{display:none}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-supsub{font-size:80%}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-sqrt-stem{width:4px;padding:0;background:transparent}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=shift]{padding-top:2px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=\"/\"],.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=\"-\"]{padding-top:1px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=\"*\"]{padding-top:2px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=left],.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=right],.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=backspace]{font-size:110%;padding-top:2px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=enter]{font-size:140%;padding-top:3px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn .dcg-keypad-btn-content{font-size:90%}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-on-gray{box-shadow:inset 0 1px #ffffff40,inset 0 -1px #00000005;background:linear-gradient(#fff,#fafafa);border:1px solid #d8d8d8;border-radius:2px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-dark-on-gray{box-shadow:inset 0 1px #ffffff1a,inset 0 -1px #00000005;background:linear-gradient(rgba(0,0,0,.13),rgba(0,0,0,.16));border:1px solid #bbb;border-radius:2px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-tall-blue,.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-short-blue{box-sizing:border-box;border-radius:2px;color:#fff;background:#2f72dc;border:1px solid #4380e0;box-shadow:inset 0 1px #ffffff1a,inset 0 -1px #0000000d}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-tall-blue.dcg-hovered:not(.dcg-disabled),.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-short-blue.dcg-hovered:not(.dcg-disabled){background:#2457a8;transition:background .2s}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-tall-blue.dcg-depressed:not(.dcg-disabled),.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-short-blue.dcg-depressed:not(.dcg-disabled){background:#193d75;border:1px solid #193d75;box-shadow:none}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-tall-blue{height:76px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container:not(.dcg-disabled) .dcg-keypad-btn.dcg-btn-light-on-gray.dcg-hovered{background:#f5f5f5;border-color:#d8d8d8}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container:not(.dcg-disabled) .dcg-keypad-btn.dcg-btn-light-on-gray.dcg-depressed{background:#ebebeb;border-color:#cfcfcf;box-shadow:none}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container:not(.dcg-disabled) .dcg-keypad-btn.dcg-btn-dark-on-gray.dcg-hovered{background:rgba(0,0,0,.16)}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container:not(.dcg-disabled) .dcg-keypad-btn.dcg-btn-dark-on-gray.dcg-depressed{box-shadow:none;background:rgba(0,0,0,.19)}.dcg-calculator-api-container .dcg-inverted-colors .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-on-gray{box-shadow:inset 0 -1px #ffffff40,inset 0 1px #00000005;background:linear-gradient(#fafafa,#fff)}.dcg-calculator-api-container .dcg-inverted-colors .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-dark-on-gray{box-shadow:inset 0 -1px #ffffff1a,inset 0 1px #00000005;background:linear-gradient(rgba(0,0,0,.16),rgba(0,0,0,.13))}.dcg-calculator-api-container .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-btn-light-on-gray{background:rgba(255,255,255,.3);border:0}.dcg-calculator-api-container .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-btn-light-on-gray.dcg-hovered{background:rgba(255,255,255,.25)}.dcg-calculator-api-container .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-btn-light-on-gray.dcg-depressed{background:rgba(255,255,255,.15)}.dcg-calculator-api-container .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-btn-dark-on-gray{background:rgba(0,0,0,.15);border:0}.dcg-calculator-api-container .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-btn-dark-on-gray.dcg-hovered{background:rgba(0,0,0,.18)}.dcg-calculator-api-container .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-btn-dark-on-gray.dcg-depressed{background:rgba(0,0,0,.22)}.dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow [dcg-command=\"/\"] .dcg-keypad-btn-content,.dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow [dcg-command=\"=\"] .dcg-keypad-btn-content,.dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow [dcg-command=\"<\"] .dcg-keypad-btn-content,.dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow [dcg-command=\"<=\"] .dcg-keypad-btn-content{position:relative;left:-1px}.dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow .dcg-basic-keypad .dcg-keypad-btn[dcg-command=sqrt]{font-size:80%}.dcg-calculator-api-container .dcg-PROJECTOR-MODE:not(.dcg-narrow) .dcg-keys-container.dcg-smaller-functions-text .dcg-keypad-btn[dcg-command=functions]{font-size:80%}.dcg-calculator-api-container .dcg-keys-container.dcg-small-ABC .dcg-abc-audio-container .dcg-keypad-btn[dcg-command=ABC]{font-size:90%}.dcg-calculator-api-container .dcg-keys-container.dcg-smaller-ABC .dcg-abc-audio-container .dcg-keypad-btn[dcg-command=ABC]{font-size:80%}.dcg-calculator-api-container .dcg-keys-container.dcg-smallest-ABC .dcg-abc-audio-container .dcg-keypad-btn[dcg-command=ABC]{font-size:70%}.dcg-calculator-api-container .dcg-basic-keypad-container{background:rgba(0,0,0,.07);border:1px solid rgba(0,0,0,.2);border-top:none}.dcg-calculator-api-container .dcg-basic-keypad{margin:0;padding:4px 3px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-mq-large-operator .dcg-mq-to,.dcg-calculator-api-container .dcg-basic-keypad .dcg-mq-large-operator .dcg-mq-from{display:none!important}.dcg-calculator-api-container .dcg-basic-keypad .dcg-mq-int .dcg-mq-supsub{display:none}.dcg-calculator-api-container .dcg-basic-keypad .dcg-mq-large-operator,.dcg-calculator-api-container .dcg-basic-keypad .dcg-mq-int{font-size:70%;position:relative;top:-1px}.dcg-calculator-api-container .dcg-basic-keypad *{-webkit-user-select:none;user-select:none;-webkit-touch-callout:none}.dcg-calculator-api-container .dcg-basic-keypad .dcg-half-width-placeholder{flex-grow:.5}.dcg-calculator-api-container .dcg-basic-keypad .dcg-partition-placeholder{width:4%}.dcg-calculator-api-container .dcg-projector-mode .dcg-basic-keypad,.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-basic-keypad{font-size:150%}.dcg-calculator-api-container .dcg-projector-mode .dcg-basic-keypad .dcg-keypad-btn-container{height:52px}.dcg-calculator-api-container .dcg-projector-mode.dcg-classroom-large-projector-mode .dcg-basic-keypad .dcg-keypad-btn-container{height:64px}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-basic-keypad .dcg-keypad-row .dcg-keypad-btn-container{height:46px}.dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-classroom-large-projector-mode .dcg-basic-keypad .dcg-keypad-row .dcg-keypad-btn-container{height:58px}.dcg-calculator-api-container .dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow .dcg-basic-keypad .dcg-keypad-row{font-size:90%}.dcg-calculator-api-container .dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow .dcg-basic-keypad .dcg-keypad-row .dcg-keypad-btn-container{height:44px}@media screen and (max-width: 470px){.dcg-calculator-api-container .dcg-projector-mode .dcg-sci-func-keypad .dcg-basic-keypad{font-size:115%}}@media screen and (max-width: 330px){.dcg-calculator-api-container .dcg-calculator-api-container .dcg-either-or-btn{font-size:85%;white-space:nowrap}.dcg-calculator-api-container .dcg-calculator-api-container .dcg-projector-mode .dcg-basic-keypad{font-size:125%}.dcg-calculator-api-container .dcg-calculator-api-container .dcg-projector-mode .dcg-sci-func-keypad .dcg-basic-keypad{font-size:90%}.dcg-calculator-api-container .dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow .dcg-basic-keypad .dcg-keypad-row{font-size:70%}}.dcg-calculator-api-container .dcg-keypad-row{padding:0;display:flex;flex-flow:row nowrap;align-items:stretch;margin:0}.dcg-calculator-api-container .dcg-keypad-row .dcg-abc-audio-container{flex-grow:2;display:flex}.dcg-calculator-api-container .dcg-basic-keypad .dcg-audio-keypad-container{display:flex}.dcg-calculator-api-container .dcg-basic-keypad .dcg-audio-keypad-column{display:flex;flex:1;flex-direction:column}.dcg-calculator-api-container .dcg-basic-keypad .dcg-audio-keypad-column .dcg-keypad-btn-container{max-height:40px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-audio-keypad-column .dcg-keypad-btn-container .dcg-keypad-btn:not(.dcg-btn-short-blue){color:#333}.dcg-calculator-api-container .dcg-basic-keypad .dcg-playback-column .dcg-btn-playback{height:40px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-playback-column .dcg-btn-playback .dcg-keypad-btn-container{width:100%}.dcg-calculator-api-container .dcg-basic-keypad .dcg-playback-column .dcg-key-nav-section-container{height:40px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-playback-column .dcg-key-nav-section-container .dcg-tooltip-hit-area-container{width:100%}.dcg-calculator-api-container .dcg-basic-keypad .dcg-playback-column .dcg-key-nav-section-container .dcg-key-nav-section-title-container.dcg-disabled{opacity:.5}.dcg-calculator-api-container .dcg-basic-keypad .dcg-key-section-title{text-align:left;color:#666;line-height:40px;font-size:90%}.dcg-calculator-api-container .dcg-basic-keypad .dcg-key-section-title .dcg-tooltip-hit-area-container{margin-left:3px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-key-section-title .dcg-tooltip-hit-area-container i{font-size:80%;cursor:pointer;display:inline-block;padding:5px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-key-section-title .dcg-tooltip-hit-area-container.dcg-hovered{color:#333}.dcg-calculator-api-container .dcg-basic-keypad .dcg-key-section-title .dcg-tooltip-hit-area-container.dcg-depressed{color:#000}.dcg-calculator-api-container .dcg-basic-keypad .dcg-audio-keypad-spacer{flex:.25}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-content{display:flex;align-items:center;justify-content:center}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-content .dcg-play-icon-container,.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-content .dcg-stop-icon-container{border:2px solid #fff;border-radius:50%;width:22px;height:22px;line-height:22px;text-align:center;font-size:50%;margin-right:5px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-content .dcg-icon-play{position:relative;top:-1px;left:1.5px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-content .dcg-stop-icon{background:#fff;display:inline-block;border-radius:1px;width:8px;height:8px;position:relative;top:-1px}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-content .dcg-button-icon:not(.dcg-icon-only){font-size:70%}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-content .dcg-button-icon.dcg-icon-only{font-size:120%}.dcg-calculator-api-container .dcg-basic-keypad .dcg-key-nav-section{flex:1;display:flex;align-items:center}.dcg-calculator-api-container .dcg-basic-keypad .dcg-key-nav-section .dcg-keypad-btn-container{width:40px;font-size:80%}.dcg-calculator-api-container .dcg-basic-keypad .dcg-key-nav-section .dcg-keypad-btn-container i.dcg-icon-volume-up,.dcg-calculator-api-container .dcg-basic-keypad .dcg-key-nav-section .dcg-keypad-btn-container i.dcg-icon-volume-down{font-size:115%}.dcg-calculator-api-container .dcg-basic-keypad .dcg-key-nav-section .dcg-key-nav-section-title-container{display:flex;flex-direction:column;justify-content:center;width:70px;padding:0 5px;font-size:90%}.dcg-calculator-api-container .dcg-basic-keypad .dcg-key-nav-section .dcg-key-nav-section-title-container .dcg-key-nav-section-title{font-size:75%;color:#666}.dcg-calculator-api-container .dcg-basic-keypad .dcg-key-nav-section .dcg-key-nav-section-title-container.dcg-poi-section-container .dcg-key-nav-section-title{display:block}@media screen and (max-width: 550px){.dcg-calculator-api-container .dcg-audio-keypad-spacer{max-width:20px}.dcg-calculator-api-container .dcg-audio-keypad-column .dcg-key-nav-section .dcg-key-nav-section-title-container{font-size:80%;width:60px}}@media screen and (max-width: 430px){.dcg-calculator-api-container .dcg-audio-keypad-container{font-size:90%}.dcg-calculator-api-container .dcg-audio-keypad-container .dcg-audio-keypad-column.dcg-playback-column .dcg-key-nav-section .dcg-key-nav-section-title-container{width:40px}.dcg-calculator-api-container .dcg-audio-keypad-container .dcg-audio-keypad-column.dcg-navigation-column .dcg-key-nav-section .dcg-key-nav-section-title-container{width:55px}}@media screen and (max-width: 340px){.dcg-calculator-api-container .dcg-audio-keypad-column.dcg-navigation-column .dcg-key-nav-section .dcg-key-nav-section-title-container{display:none}}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover{top:-306px}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-interior{height:306px!important}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover{padding:0;text-align:left}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-interior{padding:0;width:310px}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-interior .dcg-keypad-btn-container{width:33.3%;float:left;height:42px;float:none;margin-bottom:-5px;overflow:hidden}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-interior .dcg-keypad-btn-container .dcg-keypad-btn{font-size:80%!important;white-space:nowrap}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-section-separator{display:block;clear:both;border-bottom:1px solid #e2e2e2;margin:0 2px 4px;padding-top:4px}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-keypad-keys-section,.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-keypad-keys-buttons{margin-bottom:-42px}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-keypad-keys-section:last-of-type .dcg-keypad-keys-buttons{margin-bottom:7px}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-keypad-keys-section{border:1px solid transparent}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-keypad-keys-section+.dcg-keypad-keys-section{margin-top:100px}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-section-heading{color:#666;text-transform:uppercase;font-size:75%;text-align:left;padding:5px;position:sticky;top:0;background:#fff;z-index:2}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-section-heading .dcg-beta-tag{font-size:70%;background:#8c29be;color:#fff;position:relative;top:-.6em;padding:1px 3px;border-radius:4px;margin-left:2px}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-section-heading a{color:#000;margin-left:5px;opacity:.5}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-section-heading a.dcg-hovered{opacity:.6}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-section-heading a.dcg-depressed{opacity:.9}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-interior-buttons{padding:5px}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-option{border-bottom:1px solid rgba(0,0,0,.2);cursor:pointer;margin:4px 1px 0 3px!important;width:60px;height:38px;line-height:28px;text-align:center;line-height:38px;padding:0}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover.dcg-left{top:auto;bottom:5px;right:18%;left:auto}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover.dcg-left .dcg-arrow{top:auto}.dcg-calculator-api-container .dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-functions-popover .dcg-popover-interior{width:330px}.dcg-calculator-api-container .dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-functions-popover .dcg-interior-buttons{font-size:80%}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover.dcg-two-column .dcg-popover-interior{width:calc(100% + 2px)}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover.dcg-two-column .dcg-popover-interior .dcg-keypad-btn-container{width:50%}@keyframes dcg-fadeIn-zoomRestore{0%{transform:scale(.75);opacity:0}to{transform:scale(1);opacity:1}}.dcg-calculator-api-container .dcg-left-pillboxes{position:absolute;left:5px;top:5px;z-index:21;display:flex;gap:5px}.dcg-calculator-api-container .dcg-left-pillboxes.dcg-geometry-toolbar-present{top:53px}.dcg-calculator-api-container .dcg-left-pillboxes .dcg-icon-redo,.dcg-calculator-api-container .dcg-left-pillboxes .dcg-icon-undo{font-size:1.1rem}.dcg-calculator-api-container .dcg-overgraph-pillbox-elements{pointer-events:none;display:flex;gap:5px}.dcg-calculator-api-container .dcg-overgraph-pillbox-elements .dcg-tooltip-hit-area-container{pointer-events:auto}.dcg-calculator-api-container .dcg-overgraph-pillbox-elements .dcg-right-pillbox-elements{display:flex;flex-direction:column;gap:5px}.dcg-calculator-api-container .dcg-overgraph-pillbox-elements .dcg-icon-plus,.dcg-calculator-api-container .dcg-overgraph-pillbox-elements .dcg-icon-minus{font-size:75%}.dcg-calculator-api-container .dcg-overgraph-pillbox-elements .dcg-icon-xy-plane,.dcg-calculator-api-container .dcg-overgraph-pillbox-elements .dcg-icon-3d-cube{font-size:150%;line-height:35px}.dcg-calculator-api-container .dcg-overgraph-pillbox-elements .dcg-icon-wrench{position:relative;top:-1px}.dcg-calculator-api-container .dcg-pillbox-btn-interior{height:37px;width:37px;line-height:37px;text-align:center;transition:opacity .3s}.dcg-calculator-api-container .dcg-pillbox-btn-interior.dcg-disabled{opacity:.3;pointer-events:none}.dcg-calculator-api-container .dcg-action-settings .dcg-icon-lock{position:absolute;bottom:2px;right:2px;font-size:8px;padding:3px;border-radius:50%;color:#fff;background:rgba(0,0,0,.75);text-shadow:none}.dcg-calculator-api-container .dcg-pillbox-container{position:absolute;right:5px;top:5px;bottom:0;width:0;z-index:21}.dcg-calculator-api-container .dcg-pillbox-container.dcg-geometry-toolbar-present{top:53px}.dcg-calculator-api-container .dcg-pillbox-container .dcg-overgraph-pillbox-elements{position:absolute;top:0;right:0}.dcg-calculator-api-container .dcg-btn-flat-gray-group .dcg-pillbox-btn-interior{width:100%;height:35px}.dcg-calculator-api-container .dcg-btn-flat-gray-group.dcg-group-vertical{width:37px}.dcg-calculator-api-container .dcg-btn-flat-gray-group.dcg-group-vertical .dcg-tooltip-hit-area-container:not(:last-of-type){border-bottom:1px solid rgba(0,0,0,.1)}.dcg-calculator-api-container .dcg-btn-flat-gray-group.dcg-group-horizontal.dcg-group-horizontal .dcg-tooltip-hit-area-container:not(:last-of-type){border-right:1px solid rgba(0,0,0,.1)}.dcg-calculator-api-container .dcg-action-zoomrestore{animation:dcg-fadeIn-zoomRestore .25s}.dcg-calculator-api-container .dcg-group-horizontal{display:flex;flex-direction:row;width:77px;height:37px}.dcg-calculator-api-container .dcg-btn-flat-gray{box-shadow:0 0 5px #00000026;border:1px solid rgba(0,0,0,.1);border-radius:5px;text-shadow:0 1px #fff}.dcg-calculator-api-container .dcg-btn-flat-gray i{opacity:.6}.dcg-calculator-api-container .dcg-btn-flat-gray:not(.dcg-btn-flat-gray-group).dcg-hovered i,.dcg-calculator-api-container .dcg-btn-flat-gray.dcg-btn-flat-gray-group .dcg-tooltip-hit-area-container:not(.dcg-tooltip-disabled).dcg-hovered i{opacity:.9}.dcg-calculator-api-container .dcg-btn-flat-gray:not(.dcg-btn-flat-gray-group).dcg-depressed,.dcg-calculator-api-container .dcg-btn-flat-gray:not(.dcg-btn-flat-gray-group).dcg-active,.dcg-calculator-api-container .dcg-btn-flat-gray.dcg-btn-flat-gray-group .dcg-tooltip-hit-area-container:not(.dcg-tooltip-disabled).dcg-depressed,.dcg-calculator-api-container .dcg-btn-flat-gray.dcg-btn-flat-gray-group .dcg-tooltip-hit-area-container:not(.dcg-tooltip-disabled).dcg-active{background:#e8e8e8}.dcg-calculator-api-container .dcg-btn-flat-gray:not(.dcg-btn-flat-gray-group).dcg-depressed i,.dcg-calculator-api-container .dcg-btn-flat-gray:not(.dcg-btn-flat-gray-group).dcg-active i,.dcg-calculator-api-container .dcg-btn-flat-gray.dcg-btn-flat-gray-group .dcg-tooltip-hit-area-container:not(.dcg-tooltip-disabled).dcg-depressed i,.dcg-calculator-api-container .dcg-btn-flat-gray.dcg-btn-flat-gray-group .dcg-tooltip-hit-area-container:not(.dcg-tooltip-disabled).dcg-active i{opacity:1}.dcg-calculator-api-container .dcg-has-background-color .dcg-btn-flat-gray{text-shadow:none}.dcg-calculator-api-container .dcg-settings-view-container{line-height:0}.dcg-calculator-api-container .dcg-settings-view-container .dcg-settings-container{position:absolute;top:2px;right:38px;line-height:1em}.dcg-calculator-api-container .dcg-settings-container{bottom:auto;z-index:61;width:290px}.dcg-calculator-api-container .dcg-settings-container .dcg-arrow{top:18px!important}.dcg-calculator-api-container .dcg-settings-container .dcg-popover-interior{padding:10px}.dcg-calculator-api-container .dcg-settings-container .dcg-visual-settings{padding-bottom:10px;border-bottom:1px solid #ddd}.dcg-calculator-api-container .dcg-settings-container .dcg-step-label{font-size:85%;color:#444}.dcg-calculator-api-container .dcg-settings-container .dcg-top-section-flex{display:flex;padding-top:10px}.dcg-calculator-api-container .dcg-settings-container .dcg-top-section-flex .dcg-component-checkbox{margin-top:3px}.dcg-calculator-api-container .dcg-settings-container .dcg-top-section-flex .dcg-grid-settings{min-width:110px}.dcg-calculator-api-container .dcg-settings-container .dcg-top-section-flex .dcg-grid-settings .dcg-component-checkbox{margin-bottom:2px}.dcg-calculator-api-container .dcg-settings-container .dcg-top-section-flex .dcg-top-checkboxes-container .dcg-component-checkbox{margin-bottom:3px}.dcg-calculator-api-container .dcg-settings-container .dcg-action-zoom-square{float:left;clear:left;font-size:80%;margin:3px 0;padding:3px 10px;line-height:1.5em}.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container{border-top:1px solid #ddd;margin-top:10px}.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-component-checkbox{float:left}.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-lock-viewport-option{font-size:95%;height:1.5em;line-height:2em;margin-bottom:2px;margin-top:10px}.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title,.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title{display:grid;grid-template-columns:55% 45%;font-size:95%;line-height:normal;margin-bottom:2px;margin-top:5px}.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title .dcg-component-checkbox,.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title .dcg-component-checkbox{margin-top:1em}.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title.dcg-y-axis-title,.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title.dcg-y-axis-title{margin-top:12px}.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title .dcg-axis-label,.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title .dcg-axis-label{position:relative;margin-bottom:-10px}.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title .dcg-axis-label:focus-within label,.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title .dcg-axis-label:focus-within label{color:#2f72dc}.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title .dcg-axis-label label,.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title .dcg-axis-label label{position:absolute;padding:0 3px;font-size:85%;color:#666;left:4px;top:2px;background:white;margin:0;line-height:normal}.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title .dcg-axis-label input,.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title .dcg-axis-label input{outline:none;margin-top:.7em;border-radius:5px;width:100%;color:#444;font-size:90%;padding:7px;-webkit-appearance:none;appearance:none;border:1px solid rgba(0,0,0,.42)}.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title .dcg-axis-label input.dcg-hovered,.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title .dcg-axis-label input.dcg-hovered{border:1px solid rgba(0,0,0,.42);box-shadow:0 0 0 1px #0000006b}.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title .dcg-axis-label input:focus,.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title .dcg-axis-label input:focus{border:1px solid #2f72dc;box-shadow:0 0 0 1px #2f72dc}.dcg-calculator-api-container .dcg-settings-container .dcg-radiangroup,.dcg-calculator-api-container .dcg-settings-container .dcg-dimensiongroup{border-top:1px solid #ddd;padding-top:10px;margin-top:10px}.dcg-calculator-api-container .dcg-settings-container .dcg-displaysizegroup{padding-bottom:10px}.dcg-calculator-api-container .dcg-settings-container .dcg-arrows{text-align:center}.dcg-calculator-api-container .dcg-settings-container .dcg-arrows i{font-size:26px;line-height:28px}.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon-group{margin-left:24px;margin-bottom:4px}.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon{display:inline-block;cursor:pointer;width:28px;height:28px;border-radius:14px;box-shadow:0 0 2px #00000040 inset;background-color:#f9f9f9;background-size:contain;background-position:center center;background-repeat:no-repeat;color:#777}.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-selected{background-color:#666;color:#ffffffe6;cursor:default}.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon:not(.dcg-selected).dcg-hovered{box-shadow:inset 0 0 0 2px #00000026}.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon:not(.dcg-selected).dcg-depressed{box-shadow:inset 0 0 0 2px #00000040}.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-action-cartesian,.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-action-polar{border:1px solid rgba(0,0,0,.42);overflow:hidden;font-size:26px}.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-action-cartesian.dcg-selected,.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-action-polar.dcg-selected{color:#fff}.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container{margin-top:10px}.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-braille-options-container{padding-left:28px}.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-braille-options-container .dcg-braille-options-buttons{margin-top:5px}.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-braille-options-container .dcg-six-key-checkbox{align-items:center;display:flex;margin-top:10px;margin-bottom:10px}.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-braille-options-container .dcg-six-key-checkbox .dcg-six-key-info{color:#999;text-decoration:none;margin-left:.5em;font-size:85%}.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-braille-options-container .dcg-six-key-checkbox .dcg-six-key-info.dcg-hovered{color:#666}.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-braille-options-container .dcg-six-key-checkbox .dcg-six-key-info.dcg-depressed{color:#333}.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-braille-options-container .dcg-six-key-checkbox .dcg-six-key-info i{display:block}.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-refreshable-braille-note a{text-decoration:underline;color:#2f72dc}.dcg-calculator-api-container .dcg-settings-container .dcg-interval-interior{margin:0 -6px}.dcg-calculator-api-container .dcg-settings-container .dcg-editable-mathquill-container{margin-top:12px;position:relative;white-space:nowrap}.dcg-calculator-api-container .dcg-settings-container .dcg-editable-mathquill-container .dcg-step-container{float:right;margin-bottom:10px}.dcg-calculator-api-container .dcg-settings-container .dcg-editable-mathquill-container .dcg-mathquill-wrapper{display:inline-block}.dcg-calculator-api-container .dcg-settings-container .dcg-editable-mathquill-container .dcg-mathquill-wrapper .dcg-braille-input{max-width:50px;font-size:100%}.dcg-calculator-api-container .dcg-displaysize-large{font-size:150%}.dcg-calculator-api-container .dcg-2dplane-opacity{max-width:50px;margin-left:5px}.dcg-calculator-api-container .dcg-narrow .dcg-settings-container{right:35px;width:260px}.dcg-calculator-api-container .dcg-advanced-viewport-settings-view .dcg-log-axes-container{display:grid;grid-template-columns:auto 1fr;grid-template-rows:1fr 1fr;align-items:center;grid-column-gap:5px;grid-row-gap:10px;font-size:90%}.dcg-calculator-api-container .dcg-advanced-viewport-settings-view .dcg-advanced-toggle{color:#000;padding-top:5px;font-size:95%}.dcg-calculator-api-container .dcg-advanced-viewport-settings-view .dcg-advanced-toggle.dcg-disabled{pointer-events:none}.dcg-calculator-api-container .dcg-advanced-viewport-settings-view .dcg-advanced-toggle.dcg-disabled .dcg-caret-container{opacity:.5}.dcg-calculator-api-container .dcg-advanced-viewport-settings-view .dcg-advanced-toggle.dcg-margin-top{margin-top:10px}.dcg-calculator-api-container .dcg-advanced-viewport-settings-view .dcg-advanced-toggle .dcg-caret-container{transition:transform .3s;display:inline-block;font-size:90%;margin-right:5px;color:#999;transform-origin:55% 35%}.dcg-calculator-api-container .dcg-advanced-viewport-settings-view .dcg-advanced-toggle:not(.dcg-opened) .dcg-caret-container{transform:rotate(-90deg)}.dcg-calculator-api-container .dcg-advanced-viewport-settings-view .dcg-advanced-toggle.dcg-hovered .dcg-caret-container{color:#666}.dcg-calculator-api-container .dcg-advanced-viewport-settings-view .dcg-advanced-toggle.dcg-depressed,.dcg-calculator-api-container .dcg-advanced-viewport-settings-view .dcg-advanced-toggle.dcg-depressed .dcg-caret-container{color:#222}.dcg-calculator-api-container .dcg-advanced-viewport-settings-view .dcg-advanced-contents{border-left:1px solid rgba(0,0,0,.2);padding:8px 10px 4px;margin-left:6px;animation:dcg-fadeIn .3s}.dcg-calculator-api-container .dcg-advanced-viewport-settings-view .dcg-advanced-contents .dcg-checkbox-title.dcg-lock-viewport-option{font-size:90%;margin-top:3px}.dcg-calculator-api-container .dcg-advanced-viewport-settings-view .dcg-editable-mathquill-container{margin-top:5px;margin-bottom:5px}.dcg-calculator-api-container .dcg-3d-settings-flex-container{display:flex;flex-direction:row;gap:8px}.dcg-calculator-api-container .dcg-settings-view-3d-container .dcg-show-axis-labels-section{display:flex;flex-wrap:wrap;justify-content:space-between;margin-top:7px;gap:7px}.dcg-calculator-api-container .dcg-settings-view-3d-container .dcg-inline-math-input-view .dcg-math-field{border-bottom:1px solid rgba(0,0,0,.2);padding:1px 2px;margin:1px;min-width:35px;max-width:60px}.dcg-calculator-api-container .dcg-settings-view-3d-container .dcg-inline-math-input-view .dcg-math-field.dcg-focus,.dcg-calculator-api-container .dcg-settings-view-3d-container .dcg-inline-math-input-view .dcg-math-field.dcg-invalid{border-bottom:2px solid #2f72dc;margin-bottom:0}.dcg-calculator-api-container .dcg-settings-view-3d-container .dcg-inline-math-input-view .dcg-math-field.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container .dcg-settings-view-3d-container .dcg-inline-math-input-view .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container .dcg-settings-view-3d-container .dcg-popover-interior{padding:10px 0}.dcg-calculator-api-container .dcg-settings-view-3d-container .dcg-popover-interior .dcg-displaysizegroup{padding-bottom:3px}.dcg-calculator-api-container .dcg-settings-view-3d-container .dcg-component-checkbox{font-size:95%;margin-top:5px;color:#666}.dcg-calculator-api-container .dcg-settings-view-3d-container .dcg-braille-options-buttons{margin-top:8px}.dcg-calculator-api-container .dcg-settings-view-3d-container .dcg-refreshable-braille-note{font-size:95%;color:#666;margin-top:3px}.dcg-calculator-api-container .dcg-three-d-domain .dcg-options-menu-section-title{height:1.2rem}.dcg-calculator-api-container .dcg-three-d-domain .dcg-axis-label{padding-right:5px;display:inline-block}.dcg-calculator-api-container .dcg-three-d-domain .dcg-axis-label .dcg-mq-math-mode{cursor:inherit}.dcg-calculator-api-container .dcg-three-d-domain .dcg-axis-label-to{margin-right:5px;font-size:95%;color:#666}.dcg-calculator-api-container .dcg-three-d-domain .dcg-three-d-domain-toggle-container{margin-top:4px;display:flex;margin-bottom:-5px}.dcg-calculator-api-container .dcg-three-d-domain.dcg-advanced-viewport-settings-view .dcg-advanced-contents{margin-top:-10px}.dcg-calculator-api-container .dcg-three-d-domain.dcg-advanced-viewport-settings-view .dcg-advanced-contents .dcg-editable-mathquill-container{margin-top:0}.dcg-calculator-api-container .dcg-three-d-domain .dcg-btn-light-gray,.dcg-calculator-api-container .dcg-three-d-domain .dcg-btn-primary{font-size:.8rem;padding:3px 10px;line-height:1.3rem;display:inline-block;animation:dcg-fadeIn .3s}.dcg-calculator-api-container .dcg-three-d-domain .dcg-action-zoom-recenter{position:relative;color:#000;top:-5px}.dcg-calculator-api-container .dcg-three-d-domain .dcg-z-axis-options.dcg-editable-mathquill-container{margin-bottom:0}.dcg-calculator-api-container .dcg-three-d-domain .dcg-action-zoom-square-3d{margin-top:8px}.dcg-calculator-api-container .dcg-three-d-domain .dcg-flex-container{display:flex}.dcg-calculator-api-container .dcg-three-d-domain .dcg-flex-container :first-child{flex:1}.dcg-calculator-api-container .dcg-geometry-toolbar-view{position:absolute;top:0;right:0;z-index:39;padding:5px;box-shadow:0 0 5px #00000026;height:48px;border-bottom:1px solid rgba(0,0,0,.2);background:linear-gradient(#fcfcfc,#eaeaea);display:flex}.dcg-calculator-api-container .dcg-geometry-toolbar-view .dcg-complex-tool-success{line-height:38px;color:#444}.dcg-calculator-api-container .dcg-geometry-toolbar-view .dcg-complex-tool-success i.dcg-icon-check{color:#127a3d;margin-right:10px}.dcg-calculator-api-container .dcg-geometry-toolbar-view .dcg-header-left .dcg-tooltip-hit-area-container{float:left}.dcg-calculator-api-container .dcg-geometry-toolbar-view.dcg-after-initial-load .dcg-animate-in-after-initial-load{animation:dcg-fadeIn .3s}.dcg-calculator-api-container .dcg-geometry-toolbar-view .dcg-flex-spacer{flex:1}.dcg-calculator-api-container .dcg-geometry-toolbar-view .dcg-geo-undo-redo-container{display:inline-block}.dcg-calculator-api-container .dcg-geometry-toolbar-view .dcg-geo-undo-redo-container.dcg-overgraph-undo-redo{position:absolute;top:53px;left:5px}.dcg-calculator-api-container .dcg-geo-basic-tools{display:flex;align-items:center;justify-content:space-between;padding:3px}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-3d-getting-started-pointer{position:absolute;top:70px;left:50%;transform:translate(-50%);min-height:50px;color:#999;font-size:1.1rem;padding-top:12px;pointer-events:none;animation:dcg-fadeIn .3s;white-space:nowrap}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-3d-getting-started-pointer .dcg-curved-icon-container{display:inline-block;font-size:2rem;transform:scaleY(-1) rotate(15deg)}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-3d-getting-started-pointer.dcg-3d-getting-started-has-tool .dcg-curved-icon-container{transform:rotate(15deg);position:relative;top:7px}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row{display:flex;align-items:center;justify-content:center;gap:4px}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row button{padding:0;background:none}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-icon,.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-dropdown{height:37px;display:flex;align-items:center;justify-content:center}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-icon{width:37px;position:relative}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-name{position:absolute;top:100%;left:0;right:0;text-align:center;font-size:1rem;color:#666;font-family:Arial,Helvetica,sans-serif;line-height:1em}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container{height:39px}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button{border-radius:5px;border:1px solid #ccc;outline:none}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-depressed{border:1px solid #999;box-shadow:0 0 0 1px #999}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-hovered,.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-depressed,.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-selected{background:#fff}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-hovered:not(.dcg-disabled):not(.dcg-selected){border:1px solid #999;box-shadow:0 0 0 1px #999}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-focus-visible{box-shadow:0 0 0 2px #2f72dc80!important}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-depressed:not(.dcg-disabled){border-color:#0000005c}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-selected{border:1px solid #2f72dc;box-shadow:0 0 0 1px #2f72dc}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-disabled{opacity:.25}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-will-be-hidden-or-disabled{border-style:dashed;opacity:.9;border-color:#ddd}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-will-be-hidden-or-disabled.dcg-selected{border-style:solid;border:1px solid #999;box-shadow:0 0 0 1px #999}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-geo-basic-tools-row canvas{width:50px;height:50px}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-split-btn{display:flex}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-split-btn .dcg-icon{border-radius:5px 0 0 5px;width:29px;padding-left:6px}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-split-btn .dcg-tool-dropdown{border-left:0;border-radius:0 5px 5px 0;color:#bbb;padding:5px}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-split-btn .dcg-tool-dropdown i{font-size:.65rem}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-split-btn .dcg-tool-dropdown.dcg-hovered{color:#333}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-split-btn .dcg-tool-dropdown.dcg-depressed{color:#000}.dcg-calculator-api-container .dcg-geo-basic-tools .dcg-mobile-construct-button{padding:10px 12px;text-align:center;float:left}.dcg-calculator-api-container .dcg-select-tools-dropdown{background:#fff;padding:0!important;position:absolute!important;top:38px;left:0}.dcg-calculator-api-container .dcg-select-tools-dropdown.dcg-shift-menu-left{left:auto;right:-94px}.dcg-calculator-api-container .dcg-select-tools-dropdown button.dcg-dropdown-tool{width:100%;display:flex;align-items:center;height:35px;outline:none;overflow-y:clip;padding-right:10px}.dcg-calculator-api-container .dcg-select-tools-dropdown button.dcg-dropdown-tool:first-of-type{height:40px;padding-top:5px}.dcg-calculator-api-container .dcg-select-tools-dropdown button.dcg-dropdown-tool:last-of-type{height:40px;padding-bottom:5px}.dcg-calculator-api-container .dcg-select-tools-dropdown button.dcg-dropdown-tool canvas{transform:scale(.75)}.dcg-calculator-api-container .dcg-select-tools-dropdown button.dcg-dropdown-tool span{white-space:nowrap}.dcg-calculator-api-container .dcg-select-tools-dropdown button.dcg-dropdown-tool:first-of-type{border-radius:5px 5px 0 0}.dcg-calculator-api-container .dcg-select-tools-dropdown button.dcg-dropdown-tool:last-of-type{border-radius:0 0 5px 5px}.dcg-calculator-api-container .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-focus-visible:not([aria-disabled=true]),.dcg-calculator-api-container .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-hovered:not([aria-disabled=true]),.dcg-calculator-api-container .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-selected-tool{text-decoration:underline}.dcg-calculator-api-container .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-hovered:not(.dcg-focus-visible){box-shadow:none}.dcg-calculator-api-container .dcg-select-tools-dropdown button.dcg-dropdown-tool[aria-disabled=true] span,.dcg-calculator-api-container .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-will-be-hidden-or-disabled span{color:#bbb;font-style:italic}.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-step-completed i,.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-step-upcoming span,.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-step-active-icon span{width:16px;height:16px;display:inline-block;border-radius:50%;margin:0 3px}.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-step-completed i{color:#2f72dc;font-size:70%;background:#999;color:#fff;line-height:16px;text-align:center;display:none}.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-step-upcoming span{border:1px solid rgba(0,0,0,.2);position:relative;top:2px;display:none}.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-step-active-icon span{display:none;background:#2f72dc;line-height:16px;text-align:center;font-size:80%;position:relative;top:-1px;color:#fff}.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-active-step{margin-right:5px}.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-step-completed i,.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-step-upcoming span,.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-active-step{animation:dcg-fadeIn .3s}.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-input-flex-container .dcg-btn-blue{padding:4px 6px;font-size:90%;position:relative;top:1px}.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-input-flex-container .dcg-btn-blue.dcg-disabled{pointer-events:none;opacity:.6}.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-mathquill-wrapper .dcg-mq-container .dcg-math-field{min-width:45px;max-width:45px;border:2px solid rgba(0,0,0,.2);border-radius:5px;padding:4px 0 4px 4px;margin:0 2px 0 4px;font-size:90%}.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-mathquill-wrapper .dcg-mq-container .dcg-math-field .dcg-mq-root-block{padding-right:5px}.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-mathquill-wrapper .dcg-mq-container .dcg-math-field:after{display:none}.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-mathquill-wrapper .dcg-mq-container .dcg-math-field.dcg-hovered{background:#fff}.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-mathquill-wrapper .dcg-mq-container .dcg-math-field.dcg-focus{border:2px solid #2f72dc;background:#fff}.dcg-calculator-api-container .dcg-complex-tool-instruction-view .dcg-mathquill-wrapper .dcg-mq-container .dcg-math-field.dcg-invalid{border:2px solid #e15855}.dcg-calculator-api-container .dcg-toast-view{position:absolute;top:7px;left:50px;right:50px;height:0;text-align:center;z-index:45;overflow:visible;text-shadow:none;color:#222;line-height:1em;transition:.3s opacity}.dcg-calculator-api-container .dcg-toast-view:not(.dcg-visible){opacity:0;pointer-events:none}.dcg-calculator-api-container .dcg-toast-view.dcg-below-geo-toolbar{top:55px}.dcg-calculator-api-container .dcg-toast-view .dcg-toast-wrapper{pointer-events:none}.dcg-calculator-api-container .dcg-toast-view .dcg-toast{display:inline-block;padding:6px 10px;background:#fef2ad;border:1px solid #fed973;border-radius:4px;font-size:85%;box-shadow:0 2px 6px #00000026;position:relative;pointer-events:auto}.dcg-calculator-api-container .dcg-toast-view .dcg-toast i.dcg-icon-error{display:none}.dcg-calculator-api-container .dcg-toast-view .dcg-toast a.dcg-undo{padding:8px;margin:-8px -8px -8px 0}.dcg-calculator-api-container .dcg-toast-view .dcg-toast i.dcg-icon-remove{font-size:87%;padding:8px;margin:-5px -10px -8px 2px;color:#0000004d;cursor:pointer;float:right}.dcg-calculator-api-container .dcg-toast-view .dcg-toast i.dcg-icon-remove.dcg-hovered,.dcg-calculator-api-container .dcg-toast-view .dcg-toast i.dcg-icon-remove:focus{color:#0009}.dcg-calculator-api-container .dcg-toast-view .dcg-toast i.dcg-icon-remove.dcg-depressed{color:#000c}.dcg-calculator-api-container .dcg-toast-view .dcg-toast a{margin-left:6px;text-decoration:underline;cursor:pointer;display:inline-block;color:#333;font-weight:600}.dcg-calculator-api-container .dcg-toast-view .dcg-toast a.dcg-hovered{color:#000}.dcg-calculator-api-container .dcg-toast-view .dcg-toast-cover{display:none}.dcg-calculator-api-container .dcg-toast-view[toast-style=error] .dcg-toast{padding-left:28px}.dcg-calculator-api-container .dcg-toast-view[toast-style=error] .dcg-toast i.dcg-icon-error{position:absolute;top:7px;left:10px;color:#fc944c;display:block}.dcg-calculator-api-container .dcg-toast-view[toast-style=cover]{position:absolute;top:0;left:0;right:0;padding-top:5px;height:100%;z-index:999}.dcg-calculator-api-container .dcg-toast-view[toast-style=cover] .dcg-toast-cover{position:absolute;top:0;left:0;bottom:0;right:0;opacity:.3;display:block;background-color:#000}.dcg-calculator-api-container .dcg-geometry-settings-container.dcg-constrained-height-popover{z-index:61;width:290px;top:53px;right:43px}.dcg-calculator-api-container .dcg-geometry-settings-container.dcg-constrained-height-popover.dcg-no-geometry-header{top:5px}.dcg-calculator-api-container .dcg-geometry-settings-container.dcg-constrained-height-popover .dcg-arrow{top:18px!important}.dcg-calculator-api-container .dcg-geometry-settings-container.dcg-constrained-height-popover .dcg-popover-interior{padding:10px 0}.dcg-calculator-api-container .dcg-geometry-settings-container.dcg-constrained-height-popover .dcg-component-checkbox{font-size:95%;margin-top:5px;color:#666;display:inline-block}.dcg-calculator-api-container .dcg-geometry-settings-container.dcg-constrained-height-popover .dcg-lock-viewport-option .dcg-learn-more-link{padding:0 5px}.dcg-calculator-api-container .dcg-geometry-settings-container.dcg-constrained-height-popover .dcg-braille-options-buttons{margin-top:8px}.dcg-calculator-api-container .dcg-geometry-settings-container.dcg-constrained-height-popover .dcg-refreshable-braille-note{font-size:95%;color:#666;margin-top:3px}.dcg-calculator-api-container .dcg-author-mode-section .dcg-toolbar-customization{display:flex;align-items:center;font-size:90%;margin-top:10px;white-space:nowrap;color:#666}.dcg-calculator-api-container .dcg-author-mode-section .dcg-toolbar-customization .dcg-segmented-control-container{margin-left:10px;width:100%}.dcg-calculator-api-container .dcg-author-mode-section .dcg-toolbar-customization .dcg-segmented-control-container .dcg-segmented-control-btn{flex:1}.dcg-calculator-api-container .dcg-author-mode-section .dcg-edit-configuration-link-container{text-align:center;padding-top:3px;font-size:90%}@keyframes dcgSharedFadeInDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1}}@keyframes dcgSharedFadeIn{0%{opacity:0}to{opacity:1}}.dcg-calculator-api-container .dcg-shared-modal-cover{position:fixed;top:0;left:0;width:100%;height:100%;z-index:100}.dcg-calculator-api-container .dcg-shared-modal-cover .dcg-shared-modal-background{position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,.7)}.dcg-calculator-api-container .dcg-shared-modal-cover .dcg-shared-modal-transition-container{display:flex;justify-content:center}.dcg-calculator-api-container .dcg-shared-modal-cover .dcg-shared-modal{position:relative}.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal,.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal,.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal{animation:dcgSharedFadeInDown .3s}.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-background,.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-fullscreen .dcg-shared-modal{animation:dcgSharedFadeIn .3s}.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal-transition-container,.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal-transition-container,.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal-transition-container{margin-top:80px}.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal-contents-wrapper,.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal-contents-wrapper,.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal-contents-wrapper{max-height:calc(100vh - 160px);overflow-y:auto}.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal{width:800px}.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal{width:650px}.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal{width:500px}.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-fullscreen .dcg-shared-modal{position:absolute;top:80px;bottom:80px;left:80px;right:80px}.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-fullscreen .dcg-shared-modal .dcg-shared-modal-contents-wrapper{overflow-y:auto;overflow-x:hidden;position:absolute;top:0;left:0;bottom:0;right:0}.dcg-calculator-api-container .dcg-shared-modal-cover .dcg-shared-close-cross-container{position:absolute;top:-28px;right:-28px}.dcg-calculator-api-container .dcg-shared-modal-cover .dcg-shared-close-cross{font-size:110%;width:32px;height:32px;border-radius:50%;color:#fff;opacity:.9;display:flex;align-items:center;justify-content:center}.dcg-calculator-api-container .dcg-shared-modal-cover .dcg-shared-close-cross.dcg-hovered{opacity:1;background:rgba(255,255,255,.15)}.dcg-calculator-api-container .dcg-shared-modal-cover .dcg-shared-close-cross.dcg-depressed{opacity:1;background:rgba(255,255,255,.3)}.dcg-calculator-api-container .dcg-shared-modal-cover .dcg-shared-modal-contents-wrapper{padding:30px;background:#fff;border-radius:6px;box-shadow:0 0 10px #00000080}.dcg-calculator-api-container .dcg-shared-modal-cover h1{padding:0;margin:0 0 10px;font-weight:400;font-size:24px}.dcg-calculator-api-container .dcg-shared-modal-cover h1:not(.dcg-shared-left-align-title){text-align:center}.dcg-calculator-api-container .dcg-shared-modal-cover h1.dcg-shared-left-align-title{text-align:left}@media screen and (max-width: 850px){.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal{width:auto;margin:0;position:absolute;top:80px;left:37px;right:37px}}@media screen and (max-width: 700px){.dcg-calculator-api-container .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal{width:auto;margin:0;position:absolute;top:80px;left:37px;right:37px}}@media screen and (max-width: 600px){.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover .dcg-shared-modal-background{background:#333}.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal-transition-container,.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal-transition-container,.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal-transition-container{margin-top:0}.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover .dcg-shared-modal-transition-container{height:100%}.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal,.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-fullscreen .dcg-shared-modal,.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal,.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal{position:absolute;top:42px;left:0;right:0;bottom:0;width:auto;margin:0}.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal .dcg-shared-close-cross-container,.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-fullscreen .dcg-shared-modal .dcg-shared-close-cross-container,.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal .dcg-shared-close-cross-container,.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal .dcg-shared-close-cross-container{right:5px;top:-38px}.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal .dcg-shared-modal-contents-wrapper,.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-fullscreen .dcg-shared-modal .dcg-shared-modal-contents-wrapper,.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal .dcg-shared-modal-contents-wrapper,.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal .dcg-shared-modal-contents-wrapper{border-radius:0;position:absolute;top:0;left:0;bottom:0;right:0;overflow-y:auto;overflow-x:hidden;max-height:none}.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover:not(.dcg-shared-has-close-button).dcg-shared-modal-wide .dcg-shared-modal,.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover:not(.dcg-shared-has-close-button).dcg-shared-modal-fullscreen .dcg-shared-modal,.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover:not(.dcg-shared-has-close-button).dcg-shared-modal-medium .dcg-shared-modal,.dcg-calculator-api-container .dcg-shared-modal-container .dcg-shared-modal-cover:not(.dcg-shared-has-close-button).dcg-shared-modal-narrow .dcg-shared-modal{top:0}}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-done-btn{float:right;position:relative;top:-4px}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal h1{font-weight:400;color:#666;padding-bottom:10px}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row{display:grid;grid-template-columns:1fr 2fr;border-bottom:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-first-column,.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-second-column{border-left:1px solid rgba(0,0,0,.2);padding:5px;display:grid;align-content:center}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-second-column{border-right:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-second-column.dcg-disabled{background:#eee}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-component-checkbox{white-space:nowrap;margin-left:2px;margin-top:0}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row.dcg-configuration-heading-row{background:rgba(0,0,0,.2);border-top:1px solid rgba(0,0,0,.2);align-self:center}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row.dcg-configuration-heading-row .dcg-first-column{text-transform:capitalize;font-family:Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;font-weight:500}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row.dcg-configuration-heading-row .dcg-first-column,.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row.dcg-configuration-heading-row .dcg-second-column{font-size:95%}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-latex-error-container{position:absolute;top:3px;right:3px;z-index:1}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-disabled-condition-wrapper{padding:6px;color:#999}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container{padding:0;overflow:hidden;position:relative}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container .dcg-math-field.dcg-invalid{padding-right:30px}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container .dcg-mq-container{width:100%}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container .dcg-math-field{width:100%;padding:6px}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container .dcg-math-field.dcg-mq-focused{box-shadow:inset 0 0 0 2px #2f72dc!important}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container .dcg-mathquill-braille .dcg-tooltip-hit-area-container{width:100%}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container .dcg-mathquill-braille .dcg-tooltip-hit-area-container .dcg-braille-input{width:100%;padding:7px}.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container .dcg-mathquill-braille .dcg-tooltip-hit-area-container .dcg-braille-input:focus{box-shadow:inset 0 0 0 2px #2f72dc!important}@media screen and (max-width: 480px){.dcg-calculator-api-container .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row{display:grid;grid-template-columns:1fr 1fr}}.dcg-calculator-api-container .dcg-overgraph-icon-container{z-index:40}.dcg-calculator-api-container .dcg-overgraph-icon-container:not(.dcg-bottom-right){position:absolute;top:5px;left:5px}.dcg-calculator-api-container .dcg-overgraph-icon-container.dcg-bottom-right{position:absolute;bottom:5px;right:5px}.dcg-calculator-api-container .dcg-overgraph-icon{width:37px;height:37px;line-height:40px;font-size:110%;text-shadow:-2px -2px 0 #fff,-2px 2px 0 #fff,2px -2px 0 #fff,2px 2px 0 #fff,0 -2px 0 #fff,0 2px 0 #fff,2px 0 0 #fff,-2px 0 0 #fff;text-align:center;border-radius:5px}.dcg-calculator-api-container .dcg-overgraph-icon.dcg-rotated{transform:rotate(-90deg)}.dcg-calculator-api-container .dcg-overgraph-icon i{opacity:.6}.dcg-calculator-api-container .dcg-overgraph-icon.dcg-hovered{background:rgba(0,0,0,.15);text-shadow:none}.dcg-calculator-api-container .dcg-overgraph-icon.dcg-hovered i{opacity:.8}.dcg-calculator-api-container .dcg-overgraph-icon.dcg-depressed{background:rgba(0,0,0,.3);text-shadow:none}.dcg-calculator-api-container .dcg-overgraph-icon.dcg-depressed i{opacity:1}.dcg-aria-alert{position:absolute;left:-1000px;top:-1000px;width:1px;height:1px;text-align:left;overflow:hidden}@media (prefers-reduced-motion){.dcg-calculator-api-container *,.dcg-calculator-api-container *:after,.dcg-calculator-api-container *:before{transition:none!important;animation-duration:0ms!important;animation-delay:0ms!important}}.dcg-calculator-api-container .dcg-calc-basic-main-wrapper{height:100%;width:100%;position:relative}.dcg-calculator-api-container .dcg-calc-basic-main{height:100%;width:100%;background:#fff;display:flex;flex-direction:column;flex-wrap:nowrap;border-radius:2px;font-family:Arial,sans-serif}.dcg-calculator-api-container .dcg-calc-basic-main *{box-sizing:border-box}.dcg-calculator-api-container .dcg-calc-basic-main.dcg-no-hyperlinks a[target=_blank]{display:none!important}.dcg-calculator-api-container .dcg-keypad-control-bar{height:40px;background-color:#00000012;border-left:1px solid rgba(0,0,0,.2);border-right:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-bar-contents{display:flex;flex-flow:row nowrap;align-items:stretch;flex-shrink:0;padding-top:2px}.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-spacer{flex-grow:1}.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-spacer-2{flex-grow:2}.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-bar{height:52px}.dcg-calculator-api-container .dcg-keypad-control-btn{flex-grow:1;min-width:40px;text-align:center;color:#0009;font-size:87.5%}.dcg-calculator-api-container .dcg-keypad-control-btn.dcg-narrow-control-btn{max-width:80px}.dcg-calculator-api-container .dcg-keypad-control-btn.dcg-selectable-btn{padding:0 5px;height:38px;line-height:40px}.dcg-calculator-api-container .dcg-keypad-control-btn:not(.dcg-selectable-btn){height:32px;line-height:32px;margin:5px;border-radius:5px}.dcg-calculator-api-container .dcg-keypad-control-btn.dcg-disabled{color:#00000026;cursor:default}.dcg-calculator-api-container .dcg-keypad-control-btn:not(.dcg-disabled):not(.dcg-selectable-btn).dcg-hovered{color:#000c;background:rgba(0,0,0,.1)}.dcg-calculator-api-container .dcg-keypad-control-btn:not(.dcg-disabled):not(.dcg-selectable-btn).dcg-depressed{color:#000;background:rgba(0,0,0,.18)}.dcg-calculator-api-container .dcg-keypad-control-btn[dcg-command=settings] i{font-size:120%;position:relative;top:1px}.dcg-calculator-api-container .dcg-keypad-control-btn[dcg-command=backspace] i,.dcg-calculator-api-container .dcg-keypad-control-btn[dcg-command=undo] i,.dcg-calculator-api-container .dcg-keypad-control-btn[dcg-command=redo] i{font-size:150%;position:relative;top:3px}.dcg-calculator-api-container .dcg-keypad-control-btn[dcg-command=clear]{width:50px;white-space:nowrap}.dcg-calculator-api-container .dcg-keypad-control-btn[dcg-command=clearall]{width:50px;line-height:inherit;display:flex;align-items:center;justify-content:center}.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn{position:relative}.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn:after{position:absolute;bottom:0;left:0;right:0;content:\"\";height:0;background:rgba(47,114,220,.5)}.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn.dcg-hovered:not(.dcg-selected){color:#000}.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn.dcg-hovered:not(.dcg-selected):after{height:4px;transition:height .2s}.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn.dcg-selected{color:#000}.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn.dcg-selected:after{height:4px;background:#2f72dc}.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn:first-of-type{margin-left:6px}.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-keypad-control-btn{min-width:25px}.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-keypad-control-btn[dcg-command=clearall],.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-keypad-control-btn[dcg-command=clear]{width:50px}.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn{font-size:150%;height:44px;line-height:44px}.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=clearall],.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=clear]{width:75px}.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=clearall]{line-height:20px}.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=settings] i{top:4px}.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=backspace] i,.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=undo] i,.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=redo] i{top:5px}.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-selectable-btn{top:4px}.dcg-calculator-api-container .dcg-basic-settings-container{position:relative;flex-grow:1}.dcg-calculator-api-container .dcg-basic-settings-container .dcg-keypad-control-btn.dcg-selected{color:#333;background:rgba(0,0,0,.1)}.dcg-calculator-api-container .dcg-settings-dropdown{font-size:95%;color:#333;width:280px;position:absolute;bottom:50px;right:5px;-webkit-user-select:none;user-select:none}.dcg-calculator-api-container .dcg-settings-dropdown .dcg-settings-menu-option{cursor:pointer}.dcg-calculator-api-container .dcg-settings-dropdown .dcg-settings-menu-option.dcg-reverse-contrast,.dcg-calculator-api-container .dcg-settings-dropdown .dcg-settings-menu-option.dcg-displaysize-container{margin-bottom:.5em}.dcg-calculator-api-container .dcg-settings-dropdown .dcg-displaysize-large{font-size:150%}.dcg-calculator-api-container .dcg-settings-dropdown .dcg-braille-container{padding-left:26px}.dcg-calculator-api-container .dcg-settings-dropdown .dcg-download-button.dcg-braille-equations{color:#2f72dc;display:flex;margin-top:5px}.dcg-calculator-api-container .dcg-settings-dropdown .dcg-download-button.dcg-braille-equations span{text-decoration:underline}.dcg-calculator-api-container .dcg-settings-dropdown .dcg-download-button.dcg-braille-equations.dcg-hovered:not(.dcg-disabled){color:#2253a1}.dcg-calculator-api-container .dcg-settings-dropdown .dcg-download-button.dcg-braille-equations.dcg-depressed:not(.dcg-disabled){color:#17396e}.dcg-calculator-api-container .dcg-settings-dropdown .dcg-download-button.dcg-braille-equations i{margin-right:10px}.dcg-calculator-api-container .dcg-settings-dropdown .dcg-six-key-info{display:inline-block;color:#999;text-decoration:none;margin-left:.5em;font-size:85%}.dcg-calculator-api-container .dcg-settings-dropdown .dcg-six-key-info.dcg-hovered{color:#666}.dcg-calculator-api-container .dcg-settings-dropdown .dcg-six-key-info.dcg-active{color:#333}.dcg-calculator-api-container .dcg-settings-dropdown .dcg-six-key-checkbox{display:inline-block;margin-top:5px}.dcg-calculator-api-container .dcg-settings-dropdown.dcg-popover .dcg-popover-interior{padding:15px}.dcg-calculator-api-container .dcg-settings-dropdown.dcg-popover .dcg-popover-interior:after{content:\"\";position:absolute;bottom:-7px;right:18px;border-width:7px;border-bottom-width:0;border-style:solid;border-color:#fff transparent transparent;line-height:0}.dcg-calculator-api-container .dcg-settings-dropdown.dcg-popover .dcg-popover-interior:before{content:\"\";position:absolute;bottom:-8px;right:17px;border-width:8px;border-bottom-width:0;border-style:solid;border-color:#ccc transparent transparent;line-height:0}.dcg-calculator-api-container .dcg-settings-dropdown.dcg-point-left{position:absolute;top:-30px;left:-280px}.dcg-calculator-api-container .dcg-settings-dropdown.dcg-point-left.dcg-popover .dcg-popover-interior:after{content:\"\";position:absolute;right:-7px;top:43px;border-width:7px;border-right-width:0;border-style:solid;border-color:transparent transparent transparent #fff;line-height:0}.dcg-calculator-api-container .dcg-settings-dropdown.dcg-point-left.dcg-popover .dcg-popover-interior:before{content:\"\";position:absolute;right:-8px;top:42px;border-width:8px;border-right-width:0;border-style:solid;border-color:transparent transparent transparent #ccc;line-height:0}.dcg-calculator-api-container .dcg-has-background-color .dcg-settings-dropdown.dcg-popover .dcg-popover-interior:after{border-top-color:#0003}.dcg-calculator-api-container .dcg-has-background-color .dcg-settings-dropdown.dcg-popover .dcg-popover-interior:before{display:none}.dcg-calculator-api-container .dcg-scientific-calculator.dcg-narrow .dcg-settings-dropdown.dcg-popover:not(.dcg-point-left) .dcg-popover-interior:after{right:10px}.dcg-calculator-api-container .dcg-scientific-calculator.dcg-narrow .dcg-settings-dropdown.dcg-popover:not(.dcg-point-left) .dcg-popover-interior:before{right:9px}.dcg-calculator-api-container .dcg-version-number{color:#666;font-size:90%;text-align:center;margin-top:15px}.dcg-calculator-api-container .dcg-download-button.dcg-disabled{pointer-events:none}.dcg-calculator-api-container .dcg-keypad-control-toggle{display:block;flex-grow:1;line-height:24px;height:25px;margin-top:7px;cursor:pointer;color:#0009;font-size:80%;text-transform:uppercase;background:#fff;border:1px solid rgba(0,0,0,.2);border-radius:5px;width:70px;min-width:50px;margin-left:20px;margin-right:20px;position:relative;box-shadow:inset 1px 1px 2px #00000026}.dcg-calculator-api-container .dcg-keypad-control-toggle .dcg-ctrl-toggle-option{text-align:center;display:inline-block;width:50%;font-size:80%}.dcg-calculator-api-container .dcg-keypad-control-toggle .dcg-ctrl-toggle-cover{position:absolute;top:-1px;right:-1px;bottom:-1px;left:50%;border-radius:5px;border:1px solid rgba(0,0,0,.2);transition:transform .2s}.dcg-calculator-api-container .dcg-keypad-control-toggle.dcg-hovered,.dcg-calculator-api-container .dcg-keypad-control-toggle.dcg-hovered .dcg-ctrl-toggle-cover{border-color:#0000004d}.dcg-calculator-api-container .dcg-keypad-control-toggle.dcg-depressed .dcg-ctrl-toggle-cover{border-color:#00000080}.dcg-calculator-api-container .dcg-keypad-control-toggle.dcg-toggled .dcg-ctrl-toggle-cover{transform:translate(-100%)}.dcg-calculator-api-container .dcg-has-background-color .dcg-keypad-control-toggle{background:rgba(255,255,255,.3)}.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-keypad-control-toggle{margin-left:5px;margin-right:5px}.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-toggle{font-size:150%;min-width:100px;margin:14px 15px 0;height:28px;line-height:26px}.dcg-calculator-api-container .dcg-braille-io-keypad-container{padding-top:4px}.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad{color:#666;border-top:1px solid rgba(0,0,0,.2);padding:10px;display:flex}.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad a{color:#2f72dc}.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad a.dcg-hovered{color:#2253a1}.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad a.dcg-depressed{color:#17396e}.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-examples-table-container{color:#444;padding:10px 10px 0}.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-examples-table-container .dcg-more-examples-link{text-align:center}.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-examples-table-container table{margin-bottom:10px;border:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-examples-table-container table th{background:rgba(0,0,0,.07)}.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-description{flex:1;display:flex;padding:10px 0 10px 10px}.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-title{font-size:130%;color:#333}.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-info-text{font-size:95%;margin-bottom:10px;line-height:1.2em}.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-description .dcg-btn-primary{padding:0 12px}.dcg-calculator-api-container .dcg-scientific-calculator .dcg-braille-io-keypad .dcg-braille-description,.dcg-calculator-api-container .dcg-four-function-calculator .dcg-braille-io-keypad .dcg-braille-description{flex-direction:column}.dcg-calculator-api-container .dcg-scientific-calculator .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-title,.dcg-calculator-api-container .dcg-four-function-calculator .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-title{margin-bottom:10px}.dcg-calculator-api-container .dcg-scientific-calculator .dcg-braille-io-keypad .dcg-braille-description .dcg-btn-primary,.dcg-calculator-api-container .dcg-four-function-calculator .dcg-braille-io-keypad .dcg-braille-description .dcg-btn-primary{margin-right:auto}.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad{flex-direction:column;text-align:center;align-items:center}.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description{flex-flow:row wrap;justify-content:center;align-items:center;padding:10px}.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-title{margin:0 10px}.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description .dcg-btn-primary{order:1;margin-right:0}.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-info-text{order:2;width:100%;margin:5px 0 0}.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container th,.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container td{padding:2px 5px}.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container tr:nth-of-type(3){display:none}.dcg-calculator-api-container .dcg-short.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad{height:170px;padding:3px}.dcg-calculator-api-container .dcg-short.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container table{margin-bottom:5px}.dcg-calculator-api-container .dcg-short.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container tr:last-of-type{display:none}.dcg-calculator-api-container .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad{font-size:90%}.dcg-calculator-api-container .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description{padding-bottom:5px}.dcg-calculator-api-container .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description .dcg-btn-primary{padding:5px 8px}.dcg-calculator-api-container .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-more-examples-link{display:none}.dcg-calculator-api-container .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container{padding-top:0}.dcg-calculator-api-container .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container td{height:35px}.dcg-calculator-api-container table.dcg-braille-examples-table{border-collapse:collapse}.dcg-calculator-api-container table.dcg-braille-examples-table tr:not(:last-of-type){border-bottom:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container table.dcg-braille-examples-table th{font-family:Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;font-weight:500}.dcg-calculator-api-container table.dcg-braille-examples-table th,.dcg-calculator-api-container table.dcg-braille-examples-table td{padding:5px 8px}.dcg-calculator-api-container table.dcg-braille-examples-table th:not(:last-of-type),.dcg-calculator-api-container table.dcg-braille-examples-table td:not(:last-of-type){border-right:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container table.dcg-braille-examples-table th:not(:first-of-type),.dcg-calculator-api-container table.dcg-braille-examples-table td:not(:first-of-type){text-align:center}.dcg-calculator-api-container table.dcg-braille-examples-table td{height:45px}.dcg-calculator-api-container table.dcg-braille-examples-table .dcg-braille-font{font-family:Abraham;font-size:110%}.dcg-calculator-api-container table.dcg-braille-examples-table .dcg-key-press{border:1px solid rgba(0,0,0,.2);background:rgba(255,255,255,.6);border-radius:3px;width:25px;height:25px;line-height:23px;text-align:center;display:inline-block;margin-right:2px;vertical-align:middle}@keyframes dcg-fadePulse{0%{opacity:0;transform:scale(.7)}50%{transform:scale(1.1)}to{opacity:1;transform:scale(1)}}.dcg-calculator-api-container .dcg-basic-list-container{flex:1;display:flex;flex-direction:column;overflow:auto;border-top:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list{width:100%}.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list.dcg-projector-mode{font-size:150%}.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list.dcg-projector-mode .dcg-braille-input input,.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list.dcg-projector-mode .dcg-braille-evaluation input{font-size:135%}.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list-placeholder{flex:1;border-right:1px solid rgba(0,0,0,.2);border-left:1px solid rgba(0,0,0,.2);position:relative;overflow:hidden}.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list-placeholder .dcg-answer-hint{transition:opacity 1s;padding:10px 30px 10px 10px;width:200px;opacity:.7;position:absolute;bottom:0;right:0;text-align:right;animation:dcg-fadePulse .3s}.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list-placeholder .dcg-answer-hint i{position:absolute;bottom:10px;right:-5px;font-size:2rem;color:#999}.dcg-calculator-api-container .dcg-inverted-colors .dcg-settings-dropdown .dcg-popover-interior{box-shadow:none}@media screen and (max-height: 350px){.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list-placeholder .dcg-answer-hint{width:100%}}@keyframes dcg-delayed-fadeIn{0%{opacity:0}80%{opacity:0}to{opacity:1}}@keyframes dcg-fadeIn{0%{opacity:0}to{opacity:1}}.dcg-calculator-api-container .dcg-container .dcg-basic-expression .dcg-mq-container .dcg-mq-editable-field{width:100%}.dcg-calculator-api-container .dcg-container .dcg-basic-expression .dcg-mq-container .dcg-mq-editable-field:after{position:absolute;top:1px;right:0;bottom:1px}.dcg-calculator-api-container .dcg-basic-expression{min-height:56px;border:1px solid rgba(0,0,0,.2);margin-top:-1px;position:relative;display:flex;align-items:center;width:100%}.dcg-calculator-api-container .dcg-basic-expression:not(:first-of-type){border-top-color:transparent}.dcg-calculator-api-container .dcg-basic-expression.dcg-focused{border-color:#2f72dc;box-shadow:inset 0 0 0 1px #2f72dc;z-index:1}.dcg-calculator-api-container .dcg-basic-expression:first-of-type{margin-top:0}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io{flex-wrap:wrap;padding:2px}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io input{background:transparent}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-mq-math-mode{padding:0}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-input input,.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation input,.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-error input{border:none;width:100%}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-input input{outline:none}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation input:focus{outline:1px dotted #000}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-error input{border:1px solid transparent}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-error input:focus{color:#000;outline:1px dotted #000}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-input input,.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation input{font-family:Abraham,serif;font-size:163%;padding:8px 8px 0}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-basic-expression-error{font-size:140%}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-error{position:absolute;top:-.8em;right:0;width:100%}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-error textarea{width:100%;text-align:right;color:#666;padding-right:5px;font-size:80%;border:none;resize:none;animation:dcg-delayed-fadeIn 1s}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-error textarea:focus{outline:dotted 1px #666;color:#000}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-input,.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation-container,.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-mathquill-container,.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-output-container{flex:1 1 40%}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation-container{position:relative}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation input,.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-output-container,.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-error{text-align:right}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-mathquill-container{padding:8px}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-mathquill-container,.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-output-container{font-size:90%;color:#666}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-output-container{padding:8px}.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-output-container .dcg-basic-expression-value{padding-right:8px}.dcg-calculator-api-container .dcg-basic-expression .dcg-exp-mathquill-container{flex:1;overflow:hidden;margin-right:1px}.dcg-calculator-api-container .dcg-basic-expression .dcg-exp-mathquill-container .dcg-mq-container{width:100%}.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-math-mode{padding:12px 5px 12px 15px;outline:none!important;box-shadow:none!important;border:0}.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-error{color:#e66b3c;font-size:130%;cursor:pointer;animation:dcg-delayed-fadeIn 1s;margin-right:15px;height:24px;line-height:24px}.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value{animation:dcg-fadeIn .5s;padding-right:5px}.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value.dcg-basic-evaluation-gray .dcg-static-mathquill-view{color:#666}.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle{font-size:20px;display:inline-block;width:29px;height:29px;border:2px solid #000;opacity:.5;color:#000;text-align:center;border-radius:50%;margin:0 5px}.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle i{position:relative;top:2px}.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle.dcg-hovered{opacity:.7}.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle.dcg-depressed{opacity:.9}.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle.dcg-selected{background:#000;opacity:.5;color:#fff}.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle.dcg-selected.dcg-hovered{opacity:.7}.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle.dcg-selected.dcg-depressed{opacity:.9}.dcg-calculator-api-container .dcg-basic-expression .dcg-slider-container{height:40px;width:250px;max-width:100%;padding-right:3px}.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-ans{border:2px solid #2f72dc;color:#2f72dc;background-color:#2f72dc26;padding:.2em .4em;display:inline-block;border-radius:4px;margin-right:1px;margin-bottom:2px;min-width:30px;text-align:center;text-overflow:ellipsis;vertical-align:middle;position:relative}.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-ans sup{font-size:80%}.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-ans:after{box-sizing:border-box;content:\"ans\";position:absolute;bottom:-.5em;left:50%;font-size:60%;width:1.9em;overflow:hidden;text-align:center;margin-left:-.95em;color:#2f72dc;border:1px solid #2f72dc;background:#fff;padding:0;border-radius:3px;height:1em;line-height:.9em}.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-ans.dcg-invalid{border-color:#e66b3c;background:rgba(230,107,60,.1);color:#e66b3c}.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-ans.dcg-invalid i{font-style:normal;font-size:80%}.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-ans.dcg-invalid:after{color:#e66b3c;border-color:#e66b3c}.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-selection .dcg-mq-ans{background:#2f72dc;color:#fff}.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-selection .dcg-mq-ans.dcg-invalid{background:#e66b3c}.dcg-calculator-api-container .dcg-calc-basic-main.dcg-projector-mode .dcg-mq-ans:after{position:absolute;bottom:-.3em;left:50%;height:.9em;line-height:.8em}.dcg-calculator-api-container .dcg-calc-basic-main.dcg-projector-mode .dcg-basic-expression.dcg-braille-io .dcg-braille-error{font-size:90%}.dcg-calculator-api-container .dcg-api-shared-keypad-root{background-color:#ededed}.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-keypad-control-bar{background-color:transparent;border-left-color:transparent;border-right-color:transparent}.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-fourfunction-keypad-container .dcg-basic-keypad{max-width:750px}.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-fourfunction-keypad-container.dcg-classroom-large-projector-mode .dcg-basic-keypad{max-width:875px}.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-scientific-keypad-container.dcg-classroom-large-projector-mode .dcg-basic-keypad{max-width:750px}.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-scientific-keypad-container.dcg-classroom-large-projector-mode .dcg-basic-keypad .dcg-keypad-btn,.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-fourfunction-keypad-container.dcg-classroom-large-projector-mode .dcg-basic-keypad .dcg-keypad-btn{position:absolute;top:4px;left:4px;right:4px;bottom:4px}.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-basic-keypad,.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-keypad-control-bar-contents{max-width:600px;margin:0 auto}.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-keypad-control-btn.dcg-selectable-btn{max-width:70px}.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-inline-hide-keypad-button{flex-grow:1;position:relative}.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-inline-hide-keypad-button-inner{position:absolute;top:0;right:0;bottom:0;left:0;margin:0;transform:rotate(-90deg);display:flex;justify-content:center;align-items:center}.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-hide-keypad-button{height:35px;width:35px;line-height:35px;margin:4px 4px 4px auto;transform:rotate(-90deg)}.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-hide-keypad-button .dcg-icon-hide{position:relative;top:2px}.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-hide-keypad-button,.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-inline-hide-keypad-button-inner{text-align:center;border-radius:5px;color:#666}.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-hide-keypad-button.dcg-hovered,.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-inline-hide-keypad-button-inner.dcg-hovered{color:#000c;background:rgba(0,0,0,.1)}.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-hide-keypad-button.dcg-depressed,.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-inline-hide-keypad-button-inner.dcg-depressed{color:#000;background:rgba(0,0,0,.18)}\n";
  document.getElementsByTagName('head')[0].appendChild(elt);

  var _Desmos;
  if ( typeof module === "object" && typeof module.exports === "object" ) {
    _Desmos = {};
    module.exports = _Desmos;
  } else {
    _Desmos = (typeof Desmos !== 'undefined') ? Desmos : {};
    global.Desmos = _Desmos;
  }

  ;(function () {
    
    var module = undefined;
    var exports = undefined;
    var Desmos = _Desmos;
    if (!Desmos.config) Desmos.config = {};
    
    if (typeof desmosEnabledFeatures === 'object') Desmos.enabledFeatures = desmosEnabledFeatures;
    
    if (typeof desmosLocales === 'object') Desmos.locales = desmosLocales;
    if (typeof desmosLocaleData === 'object') Desmos.localeData = desmosLocaleData;
    if (typeof desmosCommit === 'string') Desmos.commit = desmosCommit;
    (() => {
  const __dcg_shared_module_source__ = "// shared.js\n  (() => {\n    const __dcg_chunk_exports__ = {};var oA=Object.create;var Rf=Object.defineProperty,aA=Object.defineProperties,uA=Object.getOwnPropertyDescriptor,cA=Object.getOwnPropertyDescriptors,lA=Object.getOwnPropertyNames,Sf=Object.getOwnPropertySymbols,pA=Object.getPrototypeOf,kg=Object.prototype.hasOwnProperty,W0=Object.prototype.propertyIsEnumerable;var $0=(e,t,r)=>t in e?Rf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,q=(e,t)=>{for(var r in t||(t={}))kg.call(t,r)&&$0(e,r,t[r]);if(Sf)for(var r of Sf(t))W0.call(t,r)&&$0(e,r,t[r]);return e},Q=(e,t)=>aA(e,cA(t));var rz=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,r)=>(typeof require!=\"undefined\"?require:t)[r]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw Error('Dynamic require of \"'+e+'\" is not supported')});var J0=(e,t)=>{var r={};for(var n in e)kg.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Sf)for(var n of Sf(e))t.indexOf(n)<0&&W0.call(e,n)&&(r[n]=e[n]);return r};var nz=(e,t)=>()=>(e&&(t=e(e=0)),t);var iz=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ys=(e,t)=>{for(var r in t)Rf(e,r,{get:t[r],enumerable:!0})},fA=(e,t,r,n)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of lA(t))!kg.call(e,i)&&i!==r&&Rf(e,i,{get:()=>t[i],enumerable:!(n=uA(t,i))||n.enumerable});return e};var sz=(e,t,r)=>(r=e!=null?oA(pA(e)):{},fA(t||!e||!e.__esModule?Rf(r,\"default\",{value:e,enumerable:!0}):r,e));var oz=(()=>{for(var e=new Uint8Array(128),t=0;t<64;t++)e[t<26?t+65:t<52?t+71:t<62?t-4:t*4-205]=t;return r=>{for(var n=r.length,i=new Uint8Array((n-(r[n-1]==\"=\")-(r[n-2]==\"=\"))*3/4|0),s=0,o=0;s<n;){var a=e[r.charCodeAt(s++)],u=e[r.charCodeAt(s++)],c=e[r.charCodeAt(s++)],l=e[r.charCodeAt(s++)];i[o++]=a<<2|u>>4,i[o++]=u<<4|c>>2,i[o++]=c<<6|l}return i}})();var j0=function(){{var e=function(){},t=[\"log\",\"info\",\"warn\",\"error\",\"assert\",\"dir\",\"clear\",\"profile\",\"profileEnd\",\"time\",\"timeEnd\",\"group\",\"groupCollapsed\",\"groupEnd\",\"trace\"],r={},n=function(i){typeof window!=\"undefined\"&&window.console&&window.console[i]?r[i]=function(){Function.prototype.apply.call(window.console[i],window.console,arguments)}:r[i]=e};return t.forEach(n),r}}(),uz=j0,{log:cz,warn:lz,error:pz,assert:fz,dir:dz,clear:mz,profile:yz,profileEnd:gz,time:hz,timeEnd:bz,group:xz,groupCollapsed:Pz,groupEnd:Tz,trace:Iz}=j0;var Zf={};Ys(Zf,{getFrame:()=>dC});function ai(e,t,r){return{input:e,start:t,end:r}}function xs(e,t){return ai(e,t,t)}function An(e,t){if(e.input!==t.input)throw new Error(\"Programming Error: cannot form a span on different inputs\");return ai(e.input,e.start,t.end)}function xr(e){return e.input.slice(e.start,e.end)}var ca=()=>({type:\"empty\"}),In=()=>({type:\"unknown\"}),Ui=e=>isNaN(e[0])||isNaN(e[1])||e[1]<e[0]?ca():{type:\"known\",bounds:e},Mc=(e,t)=>{if(t===0)return e>0?Xs():ca();let r=-e/t,n=t<0?[-1/0,r]:[r,1/0];return Ui(n)},Xs=()=>Ui([-1/0,1/0]),qn=(e,t)=>{if(e.type===\"empty\"||t.type===\"empty\")return ca();if(e.type===\"unknown\"||t.type===\"unknown\")return In();let r=[Math.max(e.bounds[0],t.bounds[0]),Math.min(e.bounds[1],t.bounds[1])];return Ui(r)},K0=(e,t)=>{if(e.type===\"empty\")return t;if(t.type===\"empty\")return e;if(e.type===\"unknown\"||t.type===\"unknown\")return In();let r=[Math.min(e.bounds[0],t.bounds[0]),Math.max(e.bounds[1],t.bounds[1])];return Ui(r)};var Fe={};Ys(Fe,{Action:()=>Ke,AngleMarker:()=>Ne,Any:()=>Vt,Arc:()=>fe,Bool:()=>ge,Circle:()=>me,DirectedAngleMarker:()=>Te,Distribution:()=>at,EmptyList:()=>Be,ErrorType:()=>Zs,Line:()=>ye,ListOfAngleMarker:()=>ar,ListOfAny:()=>er,ListOfArc:()=>Ur,ListOfBool:()=>sn,ListOfCircle:()=>Hr,ListOfColor:()=>Wr,ListOfDirectedAngleMarker:()=>ur,ListOfDistribution:()=>Pr,ListOfLine:()=>qr,ListOfMapInterval2DPoint:()=>Dn,ListOfMapInterval2DPoint3D:()=>vn,ListOfMapIntervalPoint:()=>En,ListOfMapIntervalPoint3D:()=>Mn,ListOfNumber:()=>ie,ListOfPoint:()=>ft,ListOfPoint3D:()=>on,ListOfPolygon:()=>Nr,ListOfRay:()=>kr,ListOfRestriction:()=>kn,ListOfSegment:()=>Tr,ListOfSegment3D:()=>an,ListOfSphere3D:()=>_n,ListOfTone:()=>ui,ListOfTransformation:()=>Cn,ListOfTriangle3D:()=>un,ListOfVector:()=>Yr,ListOfVector3D:()=>cn,MapInterval2DPoint:()=>Jr,MapInterval2DPoint3D:()=>jr,MapIntervalPoint:()=>wr,MapIntervalPoint3D:()=>Fr,Number:()=>I,Point:()=>N,Point3D:()=>H,Polygon:()=>we,RGBColor:()=>Gt,Ray:()=>Le,Restriction:()=>Ot,SeedType:()=>ot,Segment:()=>De,Segment3D:()=>xt,Sphere3D:()=>Ar,Tone:()=>lr,Transformation:()=>He,Triangle3D:()=>Ir,Vector:()=>he,Vector3D:()=>ve,allListTypes:()=>Ps,allValueTypes:()=>dA,assertTypeIsOneOf:()=>_l,broadcastable:()=>Yn,broadcastableArg:()=>Ru,elementType:()=>We,hasListType:()=>qi,hasMapType:()=>$g,isGeometryType:()=>Al,isList:()=>W,isMapOrListOfMap:()=>la,isOneOf:()=>vc,isSubType:()=>$s,isSubTypeOrCoercible:()=>So,isTypeOrListOfType:()=>ne,isValidOnLogScales:()=>Cl,listType:()=>Ln,mapType:()=>Wg,maxArity:()=>Nl,minArity:()=>Va,prettyPrint:()=>le,repr:()=>Xn,straightTypes:()=>Nf,summableElementTypes:()=>Xg,valueTypes:()=>eE,vectorTypes:()=>Zg});function v(e,t){return{key:e,vars:t}}var Vt=0,I=1,ge=2,N=3,at=4,Ke=5,er=6,ie=7,sn=8,ft=9,Pr=10,Be=11,Zs=12,ot=13,Gt=14,Wr=15,we=16,Nr=17,De=18,Tr=19,me=20,Hr=21,fe=22,Ur=23,ye=24,qr=25,Le=26,kr=27,Ne=28,ar=29,Te=30,ur=31,He=32,Cn=33,he=34,Yr=35,Ot=36,kn=37,lr=50,ui=51,H=100,on=101,xt=102,an=103,Ir=104,un=105,Ar=106,_n=107,ve=108,cn=109,wr=200,Fr=201,Jr=202,jr=203,En=204,Mn=205,Dn=206,vn=207,eE={Any:Vt,Number:I,Bool:ge,Point:N,Point3D:H,Distribution:at,Action:Ke,ListOfAny:er,ListOfNumber:ie,ListOfBool:sn,ListOfPoint:ft,ListOfPoint3D:on,ListOfDistribution:Pr,EmptyList:Be,ErrorType:Zs,SeedType:ot,RGBColor:Gt,ListOfColor:Wr,Polygon:we,ListOfPolygon:Nr,Segment:De,ListOfSegment:Tr,Circle:me,ListOfCircle:Hr,Arc:fe,ListOfArc:Ur,Line:ye,ListOfLine:qr,Ray:Le,ListOfRay:kr,Vector:he,ListOfVector:Yr,Restriction:Ot,ListOfRestriction:kn,AngleMarker:Ne,ListOfAngleMarker:ar,DirectedAngleMarker:Te,ListOfDirectedAngleMarker:ur,Transformation:He,ListOfTransformation:Cn,Segment3D:xt,ListOfSegment3D:an,Triangle3D:Ir,ListOfTriangle3D:un,Sphere3D:Ar,ListOfSphere3D:_n,Vector3D:ve,ListOfVector3D:cn,Tone:lr,ListOfTone:ui,MapIntervalPoint:wr,MapIntervalPoint3D:Fr,MapInterval2ToPoint:Jr,MapInterval2DPoint3D:jr,ListOfMapIntervalPoint:En,ListOfMapIntervalPoint3D:Mn,ListOfMapInterval2ToPoint:Dn,ListOfMapInterval2DPoint3D:vn},dA=Object.values(eE);function Va(e){return Array.isArray(e)?e.length:e.initial.length}function Nl(e){return Array.isArray(e)?e.length:1/0}function Ru(e){if(typeof e==\"number\")return qi(e)?{meta:\"union\",types:[e,Ln(e)]}:e;let t=[];for(let r of e.types){let n=Ru(r);typeof n==\"number\"?t.push(n):t.push(...n.types)}return{meta:\"union\",types:t}}function Yn(e){return Array.isArray(e)?e.map(Ru):{type:\"variadic\",initial:e.initial.map(Ru),rest:Ru(e.rest)}}function Xn(e){switch(e){case Vt:return\"Any\";case I:return\"Number\";case ge:return\"Bool\";case N:return\"Point\";case H:return\"Point3D\";case at:return\"Distribution\";case Ke:return\"Action\";case er:return\"ListOfAny\";case ie:return\"ListOfNumber\";case sn:return\"ListOfBool\";case ft:return\"ListOfPoint\";case on:return\"ListOfPoint3D\";case Pr:return\"ListOfDistribution\";case Be:return\"EmptyList\";case Zs:return\"ErrorType\";case ot:return\"SeedType\";case Gt:return\"RGBColor\";case Wr:return\"ListOfColor\";case we:return\"Polygon\";case Nr:return\"ListOfPolygon\";case De:return\"Segment\";case Tr:return\"ListOfSegment\";case me:return\"Circle\";case Hr:return\"ListOfCircle\";case fe:return\"Arc\";case Ur:return\"ListOfArc\";case ye:return\"Line\";case qr:return\"ListOfLine\";case Le:return\"Ray\";case kr:return\"ListOfRay\";case he:return\"Vector\";case Yr:return\"ListOfVector\";case Ot:return\"Restriction\";case kn:return\"ListOfRestriction\";case Ne:return\"Angle\";case ar:return\"ListOfAngle\";case Te:return\"DirectedAngle\";case ur:return\"ListOfDirectedAngle\";case He:return\"Transformation\";case Cn:return\"ListOfTransformation\";case xt:return\"Segment3D\";case an:return\"ListOfSegment3D\";case ve:return\"Vector3D\";case cn:return\"ListOfVector3D\";case Ir:return\"Triangle3D\";case un:return\"ListOfTriangle3D\";case Ar:return\"Sphere3D\";case _n:return\"ListOfSphere3D\";case lr:return\"Tone\";case ui:return\"ListOfTone\";case wr:return\"MapIntervalPoint\";case Fr:return\"MapIntervalPoint3D\";case Jr:return\"MapInterval2ToPoint\";case jr:return\"MapInterval2DPoint3D\";case En:return\"ListOfMapIntervalPoint\";case Mn:return\"ListOfMapIntervalPoint3D\";case Dn:return\"ListOfMapInterval2ToPoint\";case vn:return\"ListOfMapInterval2DPoint3D\";default:let t=e;throw new Error(`Invalid type: ${t}`)}}function le(e){switch(e){case Vt:return v(\"shared-calculator-label-value-type-any\");case I:return v(\"shared-calculator-label-value-type-number\");case ge:return v(\"shared-calculator-label-value-type-bool\");case N:return v(\"shared-calculator-label-value-type-point\");case H:return v(\"shared-calculator-label-value-type-point3d\");case at:return v(\"shared-calculator-label-value-type-distribution\");case Ke:return v(\"shared-calculator-label-value-type-action\");case er:return v(\"shared-calculator-label-value-type-list-of-any\");case ie:return v(\"shared-calculator-label-value-type-list-of-numbers\");case sn:return v(\"shared-calculator-label-value-type-list-of-bool\");case ft:return v(\"shared-calculator-label-value-type-list-of-points\");case on:return v(\"shared-calculator-label-value-type-list-of-3d-points\");case Pr:return v(\"shared-calculator-label-value-type-list-of-distributions\");case Be:return v(\"shared-calculator-label-value-type-empty-list\");case Zs:return v(\"shared-calculator-label-value-type-error\");case ot:return v(\"shared-calculator-label-value-type-seed\");case Gt:return v(\"shared-calculator-label-value-type-color\");case Wr:return v(\"shared-calculator-label-value-type-list-of-colors\");case we:return v(\"shared-calculator-label-value-type-polygon\");case Nr:return v(\"shared-calculator-label-value-type-list-of-polygons\");case De:return v(\"shared-calculator-label-value-type-segment\");case Tr:return v(\"shared-calculator-label-value-type-list-of-segments\");case me:return v(\"shared-calculator-label-value-type-circle\");case Hr:return v(\"shared-calculator-label-value-type-list-of-circles\");case fe:return v(\"shared-calculator-label-value-type-arc\");case Ur:return v(\"shared-calculator-label-value-type-list-of-arcs\");case ye:return v(\"shared-calculator-label-value-type-line\");case qr:return v(\"shared-calculator-label-value-type-list-of-lines\");case Le:return v(\"shared-calculator-label-value-type-ray\");case kr:return v(\"shared-calculator-label-value-type-list-of-rays\");case he:return v(\"shared-calculator-label-value-type-vector\");case Yr:return v(\"shared-calculator-label-value-type-list-of-vectors\");case Ot:return v(\"shared-calculator-label-value-type-restriction\");case kn:return v(\"shared-calculator-label-value-type-list-of-restrictions\");case Ne:return v(\"shared-calculator-label-value-type-angle\");case ar:return v(\"shared-calculator-label-value-type-list-of-angles\");case Te:return v(\"shared-calculator-label-value-type-directed-angle\");case ur:return v(\"shared-calculator-label-value-type-list-of-directed-angles\");case He:return v(\"shared-calculator-label-value-type-transformation\");case Cn:return v(\"shared-calculator-label-value-type-list-of-transformations\");case xt:return v(\"shared-calculator-label-value-type-segment3d\");case an:return v(\"shared-calculator-label-value-type-list-of-segment3d\");case ve:return v(\"shared-calculator-label-value-type-vector3d\");case cn:return v(\"shared-calculator-label-value-type-list-of-vector3d\");case Ir:return v(\"shared-calculator-label-value-type-triangle3d\");case un:return v(\"shared-calculator-label-value-type-list-of-triangle3d\");case Ar:return v(\"shared-calculator-label-value-type-sphere3d\");case _n:return v(\"shared-calculator-label-value-type-list-of-sphere3d\");case lr:return v(\"shared-calculator-label-value-type-tone\");case ui:return v(\"shared-calculator-label-value-type-list-of-tone\");case wr:case Jr:return v(\"shared-calculator-label-value-type-lambda-point\");case Fr:case jr:return v(\"shared-calculator-label-value-type-lambda-point3d\");case En:case Dn:return v(\"shared-calculator-label-value-type-list-of-lambda-point\");case Mn:case vn:return v(\"shared-calculator-label-value-type-list-of-lambda-point3d\");default:let t=e;throw new Error(`Invalid type: ${t}`)}}var Ps=[er,ie,sn,kn,ft,on,Pr,Be,Wr,Nr,Tr,Hr,Ur,qr,kr,Yr,ar,ur,Cn,an,cn,un,_n,ui,En,Mn,Dn,vn],Mz={[er]:Vt,[Be]:I,[ie]:I,[sn]:ge,[kn]:Ot,[ft]:N,[on]:H,[Pr]:at,[Wr]:Gt,[Nr]:we,[Tr]:De,[Hr]:me,[Ur]:fe,[qr]:ye,[kr]:Le,[Yr]:he,[ar]:Ne,[ur]:Te,[Cn]:He,[an]:xt,[cn]:ve,[un]:Ir,[_n]:Ar,[ui]:lr,[En]:wr,[Mn]:Fr,[Dn]:Jr,[vn]:jr};function W(e){switch(e){case void 0:return!1;case er:case ie:case sn:case kn:case ft:case on:case Pr:case Wr:case Nr:case Tr:case Hr:case Ur:case qr:case kr:case Yr:case ar:case ur:case Cn:case an:case cn:case un:case _n:case ui:case En:case Mn:case Dn:case vn:return!0;case Be:return!0;case Vt:case I:case ge:case Ot:case N:case H:case at:case Zs:case ot:case Gt:case Ke:case we:case De:case me:case fe:case ye:case Le:case he:case Ne:case Te:case He:case xt:case ve:case Ir:case lr:case Ar:case wr:case Fr:case Jr:case jr:return!1;default:throw new Error(`Invalid type: ${e}`)}}function We(e){switch(e){case Be:case ie:return I;case sn:return ge;case kn:return Ot;case ft:return N;case on:return H;case Pr:return at;case Wr:return Gt;case Nr:return we;case an:return xt;case cn:return ve;case un:return Ir;case _n:return Ar;case er:return Vt;case Tr:return De;case Hr:return me;case Ur:return fe;case qr:return ye;case kr:return Le;case Yr:return he;case ar:return Ne;case ur:return Te;case Cn:return He;case ui:return lr;case En:return wr;case Mn:return Fr;case Dn:return Jr;case vn:return jr;case Vt:case I:case ge:case N:case H:case at:case Zs:case ot:case Gt:case Ke:case we:case De:case me:case fe:case ye:case Le:case he:case Ot:case Ne:case Te:case He:case xt:case ve:case Ir:case Ar:case lr:case wr:case Fr:case Jr:case jr:throw new Error(\"Type \"+Xn(e)+\" does not implement elementType.\");default:let t=e;throw new Error(`Invalid type: ${t}`)}}function Ln(e){switch(e){case Vt:return er;case I:return ie;case ge:return sn;case Ot:return kn;case N:return ft;case H:return on;case at:return Pr;case Gt:return Wr;case we:return Nr;case De:return Tr;case me:return Hr;case fe:return Ur;case ye:return qr;case Le:return kr;case he:return Yr;case Ne:return ar;case Te:return ur;case He:return Cn;case xt:return an;case ve:return cn;case Ir:return un;case Ar:return _n;case lr:return ui;case wr:return En;case Fr:return Mn;case Jr:return Dn;case jr:return vn;case Be:case ie:case sn:case kn:case ft:case on:case Pr:case Wr:case Nr:case Tr:case Hr:case Ur:case qr:case kr:case Yr:case ar:case ur:case Cn:case an:case cn:case un:case _n:case er:case ui:case Zs:case ot:case Ke:case En:case Mn:case Dn:case vn:throw new Error(\"Type \"+Xn(e)+\" does not implement listType.\");default:let t=e;throw new Error(`Invalid type: ${t}`)}}function qi(e){switch(e){case Vt:case I:case ge:case Ot:case N:case H:case at:case Gt:case we:case De:case me:case fe:case ye:case Le:case he:case Ne:case Te:case He:case xt:case ve:case Ir:case Ar:case lr:case wr:case Fr:case Jr:case jr:return!0;case Be:case ie:case sn:case kn:case ft:case on:case Pr:case Wr:case Nr:case Tr:case Hr:case Ur:case qr:case kr:case Yr:case ar:case ur:case Cn:case an:case cn:case un:case _n:case er:case ui:case En:case Mn:case Dn:case vn:case ot:case Ke:case Zs:return!1;default:throw new Error(`Invalid type: ${e}`)}}function Al(e){if(e===void 0)return!1;switch(e){case N:case we:case De:case me:case fe:case ye:case Le:case he:case Ne:case Te:case He:return!0;default:return!1}}function Cl(e){switch(e){case I:case Vt:case ge:case Ot:case N:case at:case Ke:case er:case ie:case sn:case kn:case ft:case Pr:case Be:case Zs:case ot:case Gt:case Wr:case lr:case ui:return!0;case H:case on:case xt:case an:case ve:case cn:case Ir:case un:case Ar:case _n:case we:case Nr:case De:case Tr:case me:case Hr:case fe:case Ur:case ye:case qr:case Le:case kr:case he:case Yr:case Ne:case ar:case Te:case ur:case He:case Cn:case wr:case Fr:case Jr:case jr:case En:case Mn:case Dn:case vn:return!1;default:let t=e;throw new Error(`Invalid type: ${t}`)}}function vc(e,t){for(let r of t)if(e===r)return!0;return!1}function $s(e,t){return e===Be&&W(t)||t===er&&W(e)||t===Vt&&!W(e)?!0:e===t}function So(e,t){return $s(e,t)||(e===Ne||e===Te||e===Ot)&&t===I?!0:(e===ar||e===ur||e===kn)&&t===ie}var Xg=[I,N,H],Nf=[ye,Le,De,he],Zg={meta:\"union\",types:[he,ve]};function ne(e,t){return e===t?!0:W(e)?e===Be?!0:We(e)===t:!1}function la(e){return vc(e,[wr,Fr,Jr,jr,En,Mn,Dn,vn])}var mA={[N]:wr,[H]:Fr},yA={[N]:Jr,[H]:jr};function $g(e){return vc(e,[N,H])}function Wg(e,t){if(e!==N&&e!==H)throw new Error(`Unexpected return type for map: ${Xn(e)}`);return t===1?mA[e]:yA[e]}function _l(e,t){if(!vc(e,t))throw new Error(`Programming error: expected one of ${t.map(le)} but found ${e} instead.`)}var Pt=class{constructor(){this.exportPenalty=0;this._dependencies=[],this._dummyDependencies=[],this._updateSymbols=[],this._substitutionSymbols=[],this._scope={definitions:[],dependencies:[],substitutionDependencies:[],scopes:[]},this._exports=[]}setInputSpan(t){this._inputSpan=t}getInputString(){return this._inputSpan===void 0?\"\":xr(this._inputSpan)}getInputSpan(){return this._inputSpan}shouldExportAns(){return!1}getAnsVariable(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty(\"index\")?[\"ans_\"+this.userData.index]:[]}addDependency(t){this._dependencies.indexOf(t)===-1&&this._dependencies.push(t),this._scope.dependencies.indexOf(t)===-1&&this._scope.dependencies.push(t)}addDependencies(t){for(var r=0;r<t.length;r++)this.addDependency(t[r])}addDummyDependency(t){this._dependencies.indexOf(t)===-1&&this._dependencies.push(t),this._dummyDependencies.indexOf(t)===-1&&this._dummyDependencies.push(t)}addDummyDependencies(t){for(var r=0;r<t.length;r++)this.addDummyDependency(t[r])}addUpdateSymbol(t){this._dependencies.indexOf(t)===-1&&this._dependencies.push(t),this._updateSymbols.indexOf(t)===-1&&this._updateSymbols.push(t)}addSubstitutionSymbol(t){this._dummyDependencies.indexOf(t)===-1&&this._dummyDependencies.push(t),this._substitutionSymbols.indexOf(t)===-1&&this._substitutionSymbols.push(t)}addSubstitutionDependencies(t){for(var r=0;r<t.length;r++){var n=t[r];if(this._dependencies.indexOf(n)===-1)throw new Error(\"Programming error: substitution dependency \"+n+\" must also be registered as a regular dependency\");this._scope.substitutionDependencies.indexOf(n)===-1&&this._scope.substitutionDependencies.push(n)}}mergeDependencies(...t){for(var r=0;r<t.length;r++){var n=t[r],i;for(i=0;i<n._dependencies.length;i++)this._dependencies.indexOf(n._dependencies[i])===-1&&this._dependencies.push(n._dependencies[i]);for(i=0;i<n._updateSymbols.length;i++)this._updateSymbols.indexOf(n._updateSymbols[i])===-1&&this._updateSymbols.push(n._updateSymbols[i]);for(i=0;i<n._substitutionSymbols.length;i++)this._substitutionSymbols.indexOf(n._substitutionSymbols[i])===-1&&this._substitutionSymbols.push(n._substitutionSymbols[i]);for(i=0;i<n._scope.dependencies.length;i++)this._scope.dependencies.indexOf(n._scope.dependencies[i])===-1&&this._scope.dependencies.push(n._scope.dependencies[i]);for(i=0;i<n._scope.substitutionDependencies.length;i++)this._scope.substitutionDependencies.indexOf(n._scope.substitutionDependencies[i])===-1&&this._scope.substitutionDependencies.push(n._scope.substitutionDependencies[i]);this.addDummyDependencies(n.getDummyDependencies()),Array.prototype.push.apply(this._scope.scopes,n._scope.scopes)}}mergeDependenciesInScope(t,r,n,i){this.addDummyDependencies(r);var s=n.getScope(),o={kind:t,definitions:r,dependencies:s.dependencies,substitutionDependencies:s.substitutionDependencies,scopes:s.scopes,functionDefinitionSymbol:i==null?void 0:i.functionDefinitionSymbol};this._scope.scopes.push(o);for(var a=0;a<n._dependencies.length;a++)this._dependencies.indexOf(n._dependencies[a])===-1&&this._dependencies.push(n._dependencies[a]);for(a=0;a<n._updateSymbols.length;a++)this._updateSymbols.indexOf(n._updateSymbols[a])===-1&&this._updateSymbols.push(n._updateSymbols[a]);for(a=0;a<n._substitutionSymbols.length;a++)this._substitutionSymbols.indexOf(n._substitutionSymbols[a])===-1&&this._substitutionSymbols.push(n._substitutionSymbols[a]);this.addDummyDependencies(n.getDummyDependencies())}getDependencies(){return this._dependencies}graphmodeDependencies(t,r){return this.getDependencies()}getDummyDependencies(){return this._dummyDependencies}getUpdateSymbols(){return this._updateSymbols}getSubstitutionSymbols(){return this._substitutionSymbols}getScope(){return this._scope}dependsOn(t){return this._dependencies.indexOf(t)>-1}getExports(t){var r=this._exports||[];if(this.userData&&\"id\"in this.userData){var n=this.userData.id;r=r.concat([\"idref_\"+n])}return t.ansEnabled()&&(r=r.concat(this.getAnsVariable())),r}getLegalExports(t){return this.getExports(t).filter(function(r){return!t.assignmentForbidden(r)})}exportsSymbol(t){return this._exports.indexOf(t)>-1}exportTo(t,r,n){for(var i=this.getLegalExports(t),s=0;s<i.length;s++){var o=i[s];if(n[o])return;n[o]=r.blocksExport?r:this}}getOperator(){return this.operator||\"=\"}isInequality(){return!1}isShadeBetween(){return!1}getAllIds(){return this.userData?[this.userData.id]:[]}getEvaluationInfo(){return!1}shouldPromoteToSlider(t){return!1}getSliderVariables(t,r,n){var i=t.sliderVariables(n!=null?n:r.getDependencies());return r.valueType===N||r.valueType===ft||r.valueType===H||r.valueType===on?t.is3dPolicy()?i.includes(\"t\")&&!i.includes(\"u\")&&!i.includes(\"v\")?i.filter(s=>s!=\"t\"):!i.includes(\"t\")&&(i.includes(\"u\")||i.includes(\"v\"))?i.filter(s=>s!=\"u\"&&s!=\"v\"):i:i.filter(function(s){return!t.validParametricVariable(s)}):i}getCompiledDerivative(){var t=this.getDependencies(),n=this.takeDerivative(t[0]||\"x\");return n.getCompiledFunction()}asValue(){}boundDomain(t){return In()}getCursorContext(){}polynomialOrder(t){}getPolynomialCoefficients(t){}asTypedValue(){}substitute(t){}getExpressionType(t,r){}tableInfo(t,r){}analyzeFourFunction(t,r,n){}analyzeScientific(t,r,n){}analyzeSingleExpressionScientific(t,r,n){}getGraphMode(t,r){}};var j=class extends Pt{constructor(r,n){if(!Array.isArray(r))throw new TypeError(\"Argument to expression constructor must be an Array.\");super();this.args=r,(!n||!n.skipRegisterDependencies)&&this.registerDependencies()}shouldExportAns(){return!0}registerDependencies(){for(var r=0;r<this.args.length;r++)this.mergeDependencies(this.args[r])}copyWithArgs(r){return new this.constructor(r)}};function pa(e,t=1e6){if(e===1/0)return{n:1/0,d:1};if(e===-1/0)return{n:-1/0,d:1};if(!isFinite(e))return{n:NaN,d:1};let r,n=0,i=1,s=1,o=0,a,u;for(;r=Math.floor(e),a=r*i+n,u=r*o+s,!(u>t||(n=i,s=o,i=a,o=u,e===r));)e=1/(e-r);return{n:i,d:o}}function tE(e,t,r){if(e=Oc(e),r>0){let n=Oc(t);return e<n&&(e+=2*Math.PI),(e-n)/r}else{let n=Oc(t+r);return e<n&&(e+=2*Math.PI),1+(e-n)/r}}function Af(e,t,r){e=Oc(e);let n=Oc(t),i=Oc(t+r);if(r<0){let s=n;n=i,i=s}return n<i?n<=e&&e<=i:n<=e||e<=i}function Oc(e){let t=2*Math.PI;return(e%t+t)%t}function Rz(e,t){if(!(isNaN(e)||isNaN(t)))return e>=0?Math.atan(t/e):Math.atan(t/e)+Math.PI}var Ts=Math.hypot;function fa(e,t){return e>0==t>0?e+.5*(t-e):.5*(e+t)}function hA(e,t,r,n,i,s){return e*n+t*i+r*s}function Ws(e,t,r,n,i,s,o,a,u){let c=Ts(o-n,a-i,u-s);return c===0?0:hA((e-n)/c,(t-i)/c,(r-s)/c,(o-n)/c,(a-i)/c,(u-s)/c)}function bA(e,t,r,n,i,s){let o=Ws(e,t,0,r,n,0,i,s,0);return o<=0?[r,n]:o>=1?[i,s]:[r+o*(i-r),n+o*(s-n)]}function Az(e,t,r,n,i,s,o,a){let u=Ws(e,t,0,r,n,0,i,s,0);return u<=0&&!o?[r,n]:u>=1&&!a?[i,s]:[r+u*(i-r),n+u*(s-n)]}function rE(e,t,r,n,i,s){let o=bA(e,t,r,n,i,s);return Ts(e-o[0],t-o[1])}function Cz(e,t,r,n,i,s,o){var a=Math.atan2(t-n,e-r);if(Af(a,s,o-s))return[i*Math.cos(a)+r,i*Math.sin(a)+n]}function Zn(e,t,r=1){if(e===t)return!0;if(!isFinite(e)||!isFinite(t))return!1;if(r>50)throw new Error(\"Within \"+(52-r)+\" bits isn't really approximate any more\");let n=Math.max(Math.max(Math.abs(e),Math.abs(t)),1),i=r===1?.5:Math.pow(.5,r);return n===n+i*Math.abs(t-e)}function _z(e){return Math.round(e-.5)+.5}function Nu(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e=Math.round(e),t=Math.round(t),e<0&&(e=-e),t<0&&(t=-t),t>e){let n=t;t=e,e=n}if(t===0)return e;let r=e%t;for(;r>0;)e=t,t=r,r=e%t;return t}function Au(e,t){if(!isFinite(e)&&t===0)return NaN;if(e>=0||t===Math.floor(t))return Math.pow(e,t);let r=pa(t,100);return Zn(r.n/r.d,t,2)&&r.d%2===1?(r.n%2===0?1:-1)*Math.pow(-e,t):NaN}function Sc(e,t){return{n:e,d:t}}function pr(e){return typeof e==\"object\"&&typeof e.n==\"number\"&&typeof e.d==\"number\"}var Ll=Math.pow(2,53)-1;function Cu(e){let t=e.match(/^(-)?(\\d*)?(?:\\.(\\d*))?$/);if(!t)return NaN;let r=t[1],n=t[2],i=t[3];if(!n&&!i)return NaN;let s=!!r;if(i){let o=i.replace(/0+$/,\"\"),a=o.length,u=Math.pow(10,a),c=parseInt(n||\"0\",10)*u+parseInt(o||\"0\",10);return c>Ll||u>Ll?parseFloat(e):Ve(s?-c:c,u)}else{let o=parseInt(n,10);return o>Ll?parseFloat(e):Ve(s?-o:o,1)}}function k(e){return pr(e)?e.n/e.d:+e}function ci(e){return pr(e)?!1:isNaN(e)}function Ve(e,t){if(!isFinite(e)||!isFinite(t)||t===0||Math.floor(e)!==e||Math.floor(t)!==t||Math.abs(e)>Ll||Math.abs(t)>Ll)return e/t;t<0&&(e=-e,t=-t);let r=Nu(e,t);return Sc(e/r,t/r)}function Ki(e){return pr(e)?Sc(-e.n,e.d):-e}function nE(e){return pr(e)?Sc(Math.abs(e.n),Math.abs(e.d)):Math.abs(e)}function wl(e){return pr(e)?e.n===0?e.d/e.n:Sc(e.n<0?-e.d:e.d,Math.abs(e.n)):1/e}function Ro(e,t){if(!pr(e)||!pr(t))return k(e)+k(t);var r=Nu(e.d,t.d);return Ve(e.n*(t.d/r)+t.n*(e.d/r),e.d/r*t.d)}function No(e,t){if(!pr(e)||!pr(t))return k(e)*k(t);var r=Nu(e.n,t.d),n=Nu(t.n,e.d);return Ve(e.n/r*(t.n/n),e.d/n*(t.d/r))}function Js(e,t){return Ro(e,Ki(t))}function js(e,t){return!pr(e)||!pr(t)?k(e)/k(t):No(e,wl(t))}function PA(e,t){let r=e,n=t;if(t.n<0&&(n=Ki(t),r=wl(e)),!pr(r)||!pr(n))return Au(k(e),k(t));if(e=r,t=n,t.d===1)return Ve(Math.pow(e.n,t.n),Math.pow(e.d,t.n));let i=e.n<0;if(i&&t.d%2!==1)return NaN;let o=(i?-1:1)*Math.round(Math.pow(Math.abs(e.n),1/t.d)),a=Math.round(Math.pow(Math.abs(e.d),1/t.d));return Math.pow(o,t.d)!==e.n||Math.pow(a,t.d)!==e.d?Au(k(e),k(t)):Ve(Math.pow(o,t.n),Math.pow(a,t.n))}function Jg(e,t){if(!pr(e)||!pr(t))return Au(k(e),k(t));let r=PA(e,t);return pr(r)?r:Au(k(e),k(t))}function iE(e){if(!pr(e))return Math.sqrt(e);let t=Math.round(Math.sqrt(e.n)),r=Math.round(Math.sqrt(e.d));return t*t!==e.n||r*r!==e.d?Math.sqrt(k(e)):Ve(t,r)}function Cf(e,t){return Jg(e,wl(t))}function sE(e,t){if(!pr(e)||!pr(t)){let r=k(e),n=k(t);return r-n*Math.floor(r/n)}return Js(e,No(t,Sc(Math.floor(k(js(e,t))),1)))}function oE(e){let t=Sc(0,1);for(let r of e)t=Ro(t,r);return t}var Gr=class extends j{constructor(r){super([]);this.isConstant=!0;typeof r==\"number\"&&(r=Ve(r,1)),this._constantValue=r}asValue(){let r=this._constantValue;return typeof r==\"boolean\"?r:k(r)}asCompilerValue(){return this._constantValue}scalarExprString(){return this.asValue()>0?String(this.asValue()):\"(\"+String(this.asValue())+\")\"}getEvaluationInfo(){return[{val:this.asValue()}]}isNaN(){let r=this.asValue();return typeof r==\"number\"&&isNaN(r)}};var ma={};Ys(ma,{canDisplayAsFraction:()=>wE,formatSymbol:()=>J,geoParentToLatex:()=>aC,identifierToHTML:()=>uC,identifierToLatex:()=>Qr,latexToIdentifier:()=>Co,numericLabel:()=>Uf,point:()=>tC,roundDecimal:()=>sC,trimLatex:()=>_o,truncatedHTMLLabel:()=>oC,truncatedLatexLabel:()=>oh,truncatedPlainmathLabel:()=>sh,value:()=>nh});var _f=typeof self==\"object\"&&self.self===self&&self||typeof global==\"object\"&&global.global===global&&global||Function(\"return this\")()||{},Ff=Array.prototype,Kg=Object.prototype,aE=typeof Symbol!=\"undefined\"?Symbol.prototype:null,Vz=Ff.push,dE=Ff.slice,Lf=Kg.toString,TA=Kg.hasOwnProperty,IA=Array.isArray,uE=Object.keys,cE=Object.create,mE=_f.isNaN,EA=_f.isFinite,jg=function(){};function ln(e){if(e instanceof ln)return e;if(!(this instanceof ln))return new ln(e);this._wrapped=e}var Gz=ln.VERSION=\"1.10.2\";function Vf(e,t,r){if(t===void 0)return e;switch(r==null?3:r){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,s){return e.call(t,n,i,s)};case 4:return function(n,i,s,o){return e.call(t,n,i,s,o)}}return function(){return e.apply(t,arguments)}}function yE(e,t,r){return e==null?jA:da(e)?Vf(e,t,r):_c(e)&&!Cc(e)?QA(e):OE(e)}ln.iteratee=gE;function gE(e,t){return yE(e,t,1/0)}function Qs(e,t,r){return ln.iteratee!==gE?ln.iteratee(e,t):yE(e,t,r)}function es(e,t){return t=t==null?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var s=Array(t+1);for(i=0;i<t;i++)s[i]=arguments[i];return s[t]=n,e.apply(this,s)}}function MA(e){if(!_c(e))return{};if(cE)return cE(e);jg.prototype=e;var t=new jg;return jg.prototype=null,t}function hE(e){return function(t){return t==null?void 0:t[e]}}function Nc(e,t){return e!=null&&TA.call(e,t)}function bE(e,t){for(var r=t.length,n=0;n<r;n++){if(e==null)return;e=e[t[n]]}return r?e:void 0}var DA=Math.pow(2,53)-1,Ba=hE(\"length\");function ts(e){var t=Ba(e);return typeof t==\"number\"&&t>=0&&t<=DA}function Ac(e,t,r){t=Vf(t,r);var n,i;if(ts(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var s=li(e);for(n=0,i=s.length;n<i;n++)t(e[s[n]],s[n],e)}return e}function Gf(e,t,r){t=Qs(t,r);for(var n=!ts(e)&&li(e),i=(n||e).length,s=Array(i),o=0;o<i;o++){var a=n?n[o]:o;s[o]=t(e[a],a,e)}return s}function xE(e){var t=function(r,n,i,s){var o=!ts(r)&&li(r),a=(o||r).length,u=e>0?0:a-1;for(s||(i=r[o?o[u]:u],u+=e);u>=0&&u<a;u+=e){var c=o?o[u]:u;i=n(i,r[c],c,r)}return i};return function(r,n,i,s){var o=arguments.length>=3;return t(r,Vf(n,s,4),i,o)}}var Bz=xE(1),zz=xE(-1);function vA(e,t,r){var n=[];return t=Qs(t,r),Ac(e,function(i,s,o){t(i,s,o)&&n.push(i)}),n}function Hz(e,t,r){t=Qs(t,r);for(var n=!ts(e)&&li(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(!t(e[o],o,e))return!1}return!0}function Uz(e,t,r){t=Qs(t,r);for(var n=!ts(e)&&li(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(t(e[o],o,e))return!0}return!1}function Rc(e,t,r,n){return ts(e)||(e=Fl(e)),(typeof r!=\"number\"||n)&&(r=0),_A(e,t,r)>=0}var qz=es(function(e,t,r){var n,i;return da(t)?i=t:Cc(t)&&(n=t.slice(0,-1),t=t[t.length-1]),Gf(e,function(s){var o=i;if(!o){if(n&&n.length&&(s=bE(s,n)),s==null)return;o=s[t]}return o==null?o:o.apply(s,r)})});function PE(e,t){return Gf(e,OE(t))}function OA(e,t,r){var n=-1/0,i=-1/0,s,o;if(t==null||typeof t==\"number\"&&typeof e[0]!=\"object\"&&e!=null){e=ts(e)?e:Fl(e);for(var a=0,u=e.length;a<u;a++)s=e[a],s!=null&&s>n&&(n=s)}else t=Qs(t,r),Ac(e,function(c,l,p){o=t(c,l,p),(o>i||o===-1/0&&n===-1/0)&&(n=c,i=o)});return n}function kz(e,t,r){var n=1/0,i=1/0,s,o;if(t==null||typeof t==\"number\"&&typeof e[0]!=\"object\"&&e!=null){e=ts(e)?e:Fl(e);for(var a=0,u=e.length;a<u;a++)s=e[a],s!=null&&s<n&&(n=s)}else t=Qs(t,r),Ac(e,function(c,l,p){o=t(c,l,p),(o<i||o===1/0&&n===1/0)&&(n=c,i=o)});return n}function Yz(e){return SA(e,1/0)}function SA(e,t,r){if(t==null||r)return ts(e)||(e=Fl(e)),e[pE(e.length-1)];var n=ts(e)?UA(e):Fl(e),i=Ba(n);t=Math.max(Math.min(t,i),0);for(var s=i-1,o=0;o<t;o++){var a=pE(o,s),u=n[o];n[o]=n[a],n[a]=u}return n.slice(0,t)}function Xz(e,t,r){var n=0;return t=Qs(t,r),PE(Gf(e,function(i,s,o){return{value:i,index:n++,criteria:t(i,s,o)}}).sort(function(i,s){var o=i.criteria,a=s.criteria;if(o!==a){if(o>a||o===void 0)return 1;if(o<a||a===void 0)return-1}return i.index-s.index}),\"value\")}function Bf(e,t){return function(r,n,i){var s=t?[[],[]]:{};return n=Qs(n,i),Ac(r,function(o,a){var u=n(o,a,r);e(s,o,u)}),s}}var Zz=Bf(function(e,t,r){Nc(e,r)?e[r].push(t):e[r]=[t]}),$z=Bf(function(e,t,r){e[r]=t}),Wz=Bf(function(e,t,r){Nc(e,r)?e[r]++:e[r]=1});function Jz(e){return e==null?0:ts(e)?e.length:li(e).length}var jz=Bf(function(e,t,r){e[r?0:1].push(t)},!0);function _u(e,t,r,n){n=n||[];for(var i=n.length,s=0,o=Ba(e);s<o;s++){var a=e[s];if(ts(a)&&(Cc(a)||wf(a)))if(t)for(var u=0,c=a.length;u<c;)n[i++]=a[u++];else _u(a,t,r,n),i=n.length;else r||(n[i++]=a)}return n}function Vl(e,t){return _u(e,t,!1)}var Qz=es(function(e,t){return eh(e,t)});function Gl(e,t,r,n){JA(t)||(n=r,r=t,t=!1),r!=null&&(r=Qs(r,n));for(var i=[],s=[],o=0,a=Ba(e);o<a;o++){var u=e[o],c=r?r(u,o,e):u;t&&!r?((!o||s!==c)&&i.push(u),s=c):r?Rc(s,c)||(s.push(c),i.push(u)):Rc(i,u)||i.push(u)}return i}var Kz=es(function(e){return Gl(_u(e,!0,!0))});var eh=es(function(e,t){return t=_u(t,!0,!0),vA(e,function(r){return!Rc(t,r)})});function RA(e){for(var t=e&&OA(e,Ba).length||0,r=Array(t),n=0;n<t;n++)r[n]=PE(e,n);return r}var eH=es(RA);function TE(e){return function(t,r,n){r=Qs(r,n);for(var i=Ba(t),s=e>0?0:i-1;s>=0&&s<i;s+=e)if(r(t[s],s,t))return s;return-1}}var NA=TE(1),AA=TE(-1);function CA(e,t,r,n){r=Qs(r,n,1);for(var i=r(t),s=0,o=Ba(e);s<o;){var a=Math.floor((s+o)/2);r(e[a])<i?s=a+1:o=a}return s}function IE(e,t,r){return function(n,i,s){var o=0,a=Ba(n);if(typeof s==\"number\")e>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(r&&s&&a)return s=r(n,i),n[s]===i?s:-1;if(i!==i)return s=t(dE.call(n,o,a),WA),s>=0?s+o:-1;for(s=e>0?o:a-1;s>=0&&s<a;s+=e)if(n[s]===i)return s;return-1}}var _A=IE(1,NA,CA),tH=IE(-1,AA);function rH(e,t){if(t==null||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(dE.call(e,n,n+=t));return r}function EE(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var s=MA(e.prototype),o=e.apply(s,i);return _c(o)?o:s}var LA=es(function(e,t,r){if(!da(e))throw new TypeError(\"Bind must be called on a function\");var n=es(function(i){return EE(e,n,t,this,r.concat(i))});return n}),zf=es(function(e,t){var r=zf.placeholder,n=function(){for(var i=0,s=t.length,o=Array(s),a=0;a<s;a++)o[a]=t[a]===r?arguments[i++]:t[a];for(;i<arguments.length;)o.push(arguments[i++]);return EE(e,n,this,this,o)};return n});zf.placeholder=ln;var nH=es(function(e,t){t=_u(t,!1,!1);var r=t.length;if(r<1)throw new Error(\"bindAll must be passed function names\");for(;r--;){var n=t[r];e[n]=LA(e[n],e)}});var ME=es(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)}),iH=zf(ME,ln,1);function sH(e,t,r){var n,i,s,o,a=0;r||(r={});var u=function(){a=r.leading===!1?0:fE(),n=null,o=e.apply(i,s),n||(i=s=null)},c=function(){var l=fE();!a&&r.leading===!1&&(a=l);var p=t-(l-a);return i=this,s=arguments,p<=0||p>t?(n&&(clearTimeout(n),n=null),a=l,o=e.apply(i,s),n||(i=s=null)):!n&&r.trailing!==!1&&(n=setTimeout(u,p)),o};return c.cancel=function(){clearTimeout(n),a=0,n=i=s=null},c}function oH(e,t,r){var n,i,s=function(a,u){n=null,u&&(i=e.apply(a,u))},o=es(function(a){if(n&&clearTimeout(n),r){var u=!n;n=setTimeout(s,t),u&&(i=e.apply(this,a))}else n=ME(s,t,this,a);return i});return o.cancel=function(){clearTimeout(n),n=null},o}function wA(e){return function(){return!e.apply(this,arguments)}}function FA(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}var aH=zf(FA,2),DE=!{toString:null}.propertyIsEnumerable(\"toString\"),lE=[\"valueOf\",\"isPrototypeOf\",\"toString\",\"propertyIsEnumerable\",\"hasOwnProperty\",\"toLocaleString\"];function vE(e,t){var r=lE.length,n=e.constructor,i=da(n)&&n.prototype||Kg,s=\"constructor\";for(Nc(e,s)&&!Rc(t,s)&&t.push(s);r--;)s=lE[r],s in e&&e[s]!==i[s]&&!Rc(t,s)&&t.push(s)}function li(e){if(!_c(e))return[];if(uE)return uE(e);var t=[];for(var r in e)Nc(e,r)&&t.push(r);return DE&&vE(e,t),t}function th(e){if(!_c(e))return[];var t=[];for(var r in e)t.push(r);return DE&&vE(e,t),t}function Fl(e){for(var t=li(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n}function VA(e){for(var t={},r=li(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t}function rh(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||r==null)return r;for(var i=1;i<n;i++)for(var s=arguments[i],o=e(s),a=o.length,u=0;u<a;u++){var c=o[u];(!t||r[c]===void 0)&&(r[c]=s[c])}return r}}var GA=rh(th),BA=rh(li);function zA(e,t,r){return t in r}var HA=es(function(e,t){var r={},n=t[0];if(e==null)return r;da(n)?(t.length>1&&(n=Vf(n,t[1])),t=th(e)):(n=zA,t=_u(t,!1,!1),e=Object(e));for(var i=0,s=t.length;i<s;i++){var o=t[i],a=e[o];n(a,o,e)&&(r[o]=a)}return r}),uH=es(function(e,t){var r=t[0],n;return da(r)?(r=wA(r),t.length>1&&(n=t[1])):(t=Gf(_u(t,!1,!1),String),r=function(i,s){return!Rc(t,s)}),HA(e,r,n)}),cH=rh(th,!0);function UA(e){return _c(e)?Cc(e)?e.slice():GA({},e):e}function qA(e,t){var r=li(t),n=r.length;if(e==null)return!n;for(var i=Object(e),s=0;s<n;s++){var o=r[s];if(t[o]!==i[o]||!(o in i))return!1}return!0}function Qg(e,t,r,n){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var i=typeof e;return i!==\"function\"&&i!==\"object\"&&typeof t!=\"object\"?!1:kA(e,t,r,n)}function kA(e,t,r,n){e instanceof ln&&(e=e._wrapped),t instanceof ln&&(t=t._wrapped);var i=Lf.call(e);if(i!==Lf.call(t))return!1;switch(i){case\"[object RegExp]\":case\"[object String]\":return\"\"+e==\"\"+t;case\"[object Number]\":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case\"[object Date]\":case\"[object Boolean]\":return+e==+t;case\"[object Symbol]\":return aE.valueOf.call(e)===aE.valueOf.call(t)}var s=i===\"[object Array]\";if(!s){if(typeof e!=\"object\"||typeof t!=\"object\")return!1;var o=e.constructor,a=t.constructor;if(o!==a&&!(da(o)&&o instanceof o&&da(a)&&a instanceof a)&&\"constructor\"in e&&\"constructor\"in t)return!1}r=r||[],n=n||[];for(var u=r.length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),s){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!Qg(e[u],t[u],r,n))return!1}else{var c=li(e),l;if(u=c.length,li(t).length!==u)return!1;for(;u--;)if(l=c[u],!(Nc(t,l)&&Qg(e[l],t[l],r,n)))return!1}return r.pop(),n.pop(),!0}function Ao(e,t){return Qg(e,t)}function lH(e){return e==null?!0:ts(e)&&(Cc(e)||YA(e)||wf(e))?e.length===0:li(e).length===0}function rs(e){return function(t){return Lf.call(t)===\"[object \"+e+\"]\"}}var Cc=IA||rs(\"Array\");function _c(e){var t=typeof e;return t===\"function\"||t===\"object\"&&!!e}var wf=rs(\"Arguments\"),da=rs(\"Function\"),YA=rs(\"String\"),XA=rs(\"Number\"),pH=rs(\"Date\"),fH=rs(\"RegExp\"),dH=rs(\"Error\"),ZA=rs(\"Symbol\"),mH=rs(\"Map\"),yH=rs(\"WeakMap\"),gH=rs(\"Set\"),hH=rs(\"WeakSet\");(function(){wf(arguments)||(wf=function(e){return Nc(e,\"callee\")})})();var $A=_f.document&&_f.document.childNodes;typeof/./!=\"function\"&&typeof Int8Array!=\"object\"&&typeof $A!=\"function\"&&(da=function(e){return typeof e==\"function\"||!1});function bH(e){return!ZA(e)&&EA(e)&&!mE(parseFloat(e))}function WA(e){return XA(e)&&mE(e)}function JA(e){return e===!0||e===!1||Lf.call(e)===\"[object Boolean]\"}function jA(e){return e}function OE(e){return Cc(e)?function(t){return bE(t,e)}:hE(e)}function QA(e){return e=BA({},e),function(t){return qA(t,e)}}function pE(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}var fE=Date.now||function(){return new Date().getTime()},SE={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"`\":\"&#x60;\"},KA=VA(SE);function RE(e){var t=function(s){return e[s]},r=\"(?:\"+li(e).join(\"|\")+\")\",n=RegExp(r),i=RegExp(r,\"g\");return function(s){return s=s==null?\"\":\"\"+s,n.test(s)?s.replace(i,t):s}}var NE=RE(SE),xH=RE(KA);var eC=0;function PH(e){var t=++eC+\"\";return e?e+t:t}var TH=ln.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};function AE(e,t){return e._chain?ln(t).chain():t}Ac([\"pop\",\"push\",\"reverse\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(e){var t=Ff[e];ln.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),(e===\"shift\"||e===\"splice\")&&r.length===0&&delete r[0],AE(this,r)}});Ac([\"concat\",\"join\",\"slice\"],function(e){var t=Ff[e];ln.prototype[e]=function(){return AE(this,t.apply(this._wrapped,arguments))}});ln.prototype.value=function(){return this._wrapped};ln.prototype.valueOf=ln.prototype.toJSON=ln.prototype.value;ln.prototype.toString=function(){return String(this._wrapped)};function nh(e,t=e,r=!1){if(isNaN(e)||!isFinite(e))return{string:\"undefined\",latex:\"undefined\",value:e};if(e===0)return{string:\"0\",latex:\"0\",value:e};Math.abs(e)>Math.abs(t)&&(t=e);let n=pa(e/Math.PI,24),i,s,o,a,u,c;if(CE(t)&&Zn(n.n/n.d*Math.PI,e,3))return n.n===0?(i=\"0\",a=\"0\"):n.n===1?(i=\"\\u03C0\",a=\"\\\\pi\"):n.n===-1?(i=\"-\\u03C0\",a=\"-\\\\pi\"):(i=n.n.toString()+\"\\u03C0\",a=n.n.toString()+\"\\\\pi\"),n.d===1?(s=\"\",u=\"\"):(s=\"/\"+n.d.toString(),u=n.d.toString()),o=i+s,u===\"\"?c=a:a[0]===\"-\"?c=`-\\\\frac{${a.slice(1)}}{${u}}`:c=`\\\\frac{${a}}{${u}}`,{string:o,latex:c,value:n.n/n.d*Math.PI};if(!r&&CE(t)||iC(t))return o=nC(_E(e.toFixed(Hf(t)))),{string:o,latex:o,value:parseFloat(o)};{let p=ih(e.toExponential(Hf(t/e))).split(\"e\"),f=p[0]===\"1\"&&r?\"10\":p[0]+\"\\xD710\",d=p[1].replace(\"+\",\"\");return o=ih(e.toExponential(Hf(t/e))).replace(\"+\",\"\"),c=`${p[0]}\\\\times10^{${d}}`,{string:o,latex:c,mantissa:f,superscript:d,value:parseFloat(o)}}}function tC(e,t,r,n){let i=nh(e,t),s=nh(n(i.value),r);return[i,s]}var rC=/\\.?0+$/;function _E(e){return e.indexOf(\".\")===-1?e:e.replace(rC,\"\")}function ih(e){let t=/\\.?0+e/;return e.replace(t,\"e\")}function nC(e){return e===\"-0\"?\"0\":e}function CE(e){return e=Math.abs(e),1e-4<e&&e<1e7}function iC(e){return e=Math.abs(e),.001<e&&e<1e4}function Hf(e){return e=Math.abs(e),e=Math.max(e,1e-16),Math.max(3,Math.floor(4.5-Math.log(e)/Math.LN10))}function sC(e){return Math.abs(e)>=1e-20?parseFloat(e.toFixed(Hf(e))):e}function LE(e){return 1e6/Math.sqrt(Math.abs(e))}function wE(e){let t=LE(e);if(t<1||t>1e12)return!1;let{n:r,d:n}=pa(e,t);return n===1?!1:e===e+Math.pow(2,-3)*Math.abs(r/n-e)}function Uf(e,t){if(t=t||{},isNaN(e)||!isFinite(e))return{type:\"undefined\"};if(e===0||t.zeroCutoff&&Math.abs(e)<t.zeroCutoff)return{type:\"decimal\",value:\"0\"};let r=t.smallCutoff||.001,n=t.bigCutoff||1e6,i=t.digits||10,o=ih(e.toExponential(i-2)).match(/([\\d\\.\\-]+)e\\+?([\\d\\-]+)/);if(!o)return{type:\"undefined\"};let a=parseInt(o[2],10)>=i;if(wE(e)&&t.displayAsFraction){let c=pa(e,LE(e));return{type:\"fraction\",numerator:c.n.toString(),denominator:c.d.toString()}}else{if(Math.abs(e)>n||Math.abs(e)<r||a)return{type:\"scientific\",mantissa:o[1],exponent:o[2]};{let c=_E(e.toPrecision(i));return e!==Number(c)&&t.addEllipses&&(c+=\"...\"),{type:\"decimal\",value:c}}}}function oC(e,t){let r=Uf(e,t);switch(r.type){case\"undefined\":return\"undefined\";case\"decimal\":return r.value;case\"scientific\":return r.mantissa+\"<span class='dcg-cross'>\\xD7</span>10<sup>\"+r.exponent+\"</sup>\";case\"fraction\":return r.denominator===\"1\"?r.numerator:`${r.numerator}/${r.denominator}`;default:return r}}function sh(e,t){let r=Uf(e,t);switch(r.type){case\"undefined\":return\"undefined\";case\"decimal\":return r.value;case\"scientific\":return r.mantissa+\" * 10^\"+r.exponent;case\"fraction\":return r.denominator===\"1\"?r.numerator:`${r.numerator}/${r.denominator}`;default:return r}}function oh(e,t){let r=Uf(e,t);switch(r.type){case\"undefined\":return\"undefined\";case\"decimal\":return r.value;case\"scientific\":return r.mantissa+\"\\\\times10^{\"+r.exponent+\"}\";case\"fraction\":return r.denominator===\"1\"?r.numerator:r.numerator[0]===\"-\"?`-\\\\frac{${r.numerator.slice(1)}}{${r.denominator}}`:`\\\\frac{${r.numerator}}{${r.denominator}}`;default:return r}}function J(e){e=e.replace(\"\\\\\",\"\");let t={pi:\"\\u03C0\",tau:\"\\u03C4\",theta:\"\\u03B8\",phi:\"\\u03D5\",div:\"\\xF7\",cdot:\"\\u22C5\",times:\"\\xD7\",lt:\"<\",gt:\">\",le:\"\\u2264\",ge:\"\\u2265\",sim:\"\\u223C\",ldots:\"\\u2026\",prime:\"\\u2032\",approx:\"\\u2248\",to:\"\\u2192\",\"->\":\"\\u2192\"};return t.hasOwnProperty(e)?t[e]:e}function aC(e){if(!e)return\"\";let t=Qr(e[0]);return e[1]!==void 0&&(t+=\"\\\\left[\"+e[1]+\"\\\\right]\"),t}function Qr(e){let t=e.match(/^\\$(\\d+)$/);if(t)return`\\\\token{${t[1]}}`;let r=e.split(\"_\"),n=\"\";return r[0].length>1&&(n+=\"\\\\\"),n+=r[0],r[1]&&(n+=\"_{\"+r[1]+\"}\"),n}function uC(e){if(!e)return\"\";let t=e.split(\"_\");t[0]=J(t[0]);let r=t.map(NE);return r[1]&&(r[1]=\"<sub>\"+r[1]+\"</sub>\"),r.join(\"\")}function Co(e){let t=e.match(/\\\\token\\{(\\d+)\\}/);return t?`$${t[1]}`:(e=e.replace(/\\\\operatorname\\{(.*)\\}/,\"$1\"),e.replace(/[{}\\\\]/g,\"\"))}function _o(e){return e.replace(/^(\\\\ | |\\\\space)+/,\"\").replace(/(\\\\ | |\\\\space)+$/,\"\")}var Tt=class extends j{constructor(r){super([]);this._symbol=Co(r),this._errorSymbol=this._symbol,this.addDependency(this._symbol)}setInputSpan(r){super.setInputSpan(r),this._errorSymbol=Co(this.getInputString())}getInputSpan(){return this._inputSpan===void 0?ai(this._symbol,0,this._symbol.length):this._inputSpan}};var bt={};Ys(bt,{Action:()=>Ct,Add:()=>Et,And:()=>wt,BeginBroadcast:()=>tt,BeginIntegral:()=>dt,BeginLoop:()=>lt,BeginMap:()=>pt,BlockVar:()=>et,BroadcastResult:()=>Ee,Constant:()=>U,DeferredListAccess:()=>nt,Distribution:()=>Dt,Divide:()=>zt,EndBroadcast:()=>Wt,EndIntegral:()=>Ht,EndLoop:()=>$t,EndMap:()=>qt,Equal:()=>gt,Exponent:()=>ut,ExtendSeed:()=>Jt,Greater:()=>Lt,GreaterEqual:()=>At,InboundsListAccess:()=>ht,Less:()=>Nt,LessEqual:()=>Mt,List:()=>rt,ListAccess:()=>mt,LoadArg:()=>It,MAX_LEAF_OPCODE:()=>ah,Multiply:()=>yt,NativeFunction:()=>ze,Negative:()=>Yt,Noop:()=>mr,Or:()=>Ut,OrderedPair:()=>St,OrderedPairAccess:()=>Xt,OrderedTriple:()=>Rt,OrderedTripleAccess:()=>Zt,Piecewise:()=>Ue,RawExponent:()=>ct,Subtract:()=>Bt,SymbolicVar:()=>Kr});var mr=0,U=1,It=2,Kr=3,ah=3,Et=8,Bt=9,yt=10,zt=11,ut=12,ct=13,Yt=14,St=15,Rt=16,Xt=17,Zt=18,lt=19,$t=20,dt=21,Ht=22,tt=23,Wt=24,gt=25,Nt=26,Lt=27,Mt=28,At=29,Ut=31,wt=32,Ue=33,ze=37,rt=38,mt=39,nt=40,ht=41,Dt=42,Jt=44,et=47,Ee=48,Ct=49,pt=50,qt=51;function cC(e){switch(e){case\"default\":case\"trig\":case\"inverseTrig\":case\"trig2\":case\"never-broadcast\":return[I];case\"reducer\":return[ie];case\"doubleReducer\":return[ie,ie];case\"parameterizedReducer\":return[ie,I];case\"color\":return[I,I,I]}}function lC(e){switch(e){case\"default\":case\"trig\":case\"inverseTrig\":case\"trig2\":case\"doubleReducer\":case\"color\":case\"never-broadcast\":return!1;case\"reducer\":case\"parameterizedReducer\":return!0}}function pC(e,t,r){return e===\"reducer\"?1/0:t+r}function _(e,t,r){var d,g,m,b,y;r===void 0&&(r={});let n=(d=r.tag)!=null?d:\"default\",i=(g=r.argumentTypes)!=null?g:cC(n),s=r.defaultArguments?r.defaultArguments.length:0,o=i.length-s,a=pC(n,o,s),u=(m=r.allowDotCall)!=null?m:lC(n),c=(b=r.noPeel)!=null?b:!1,{defaultArguments:l,minArityExampleArgs:p,maxArityExampleArgs:f}=r;return{module:e,symbol:t,argumentTypes:i,defaultArguments:l,returnType:(y=r.returnType)!=null?y:I,tag:n,minArity:o,maxArity:a,allowDotCall:u,noPeel:c,minArityExampleArgs:p,maxArityExampleArgs:f}}function ph(e){if(!pr(e))throw new Error(\"Programming Error: numeric constants should be rational\");return{type:1,valueType:I,value:e}}var Lu=ph(Ve(0,1)),wu=ph(Ve(1,1)),kf=ph(Ve(1,2));function za(e){let t;return e in yr&&(t=yr[e].tag),t===\"trig\"||t===\"trig2\"||t===\"inverseTrig\"?!0:e===\"angle\"||e===\"angles\"||e===\"directedangle\"||e===\"directedangles\"||e===\"rotate\"}var yr={sin:_(\"BuiltIn\",\"sin\",{tag:\"trig\"}),cos:_(\"BuiltIn\",\"cos\",{tag:\"trig\"}),tan:_(\"BuiltIn\",\"tan\",{tag:\"trig\"}),cot:_(\"BuiltIn\",\"cot\",{tag:\"trig\"}),sec:_(\"BuiltIn\",\"sec\",{tag:\"trig\"}),csc:_(\"BuiltIn\",\"csc\",{tag:\"trig\"}),arcsin:_(\"Math\",\"asin\",{tag:\"inverseTrig\"}),arccos:_(\"Math\",\"acos\",{tag:\"inverseTrig\"}),arctan:_(\"Math\",\"atan2\",{argumentTypes:[I,I],defaultArguments:[wu],tag:\"inverseTrig\"}),arccot:_(\"BuiltIn\",\"acot\",{tag:\"inverseTrig\"}),arcsec:_(\"BuiltIn\",\"asec\",{tag:\"inverseTrig\"}),arccsc:_(\"BuiltIn\",\"acsc\",{tag:\"inverseTrig\"}),sinh:_(\"BuiltIn\",\"sinh\"),cosh:_(\"BuiltIn\",\"cosh\"),tanh:_(\"BuiltIn\",\"tanh\"),coth:_(\"BuiltIn\",\"coth\"),sech:_(\"BuiltIn\",\"sech\"),csch:_(\"BuiltIn\",\"csch\"),arcsinh:_(\"BuiltIn\",\"asinh\"),arccosh:_(\"BuiltIn\",\"acosh\"),arctanh:_(\"BuiltIn\",\"atanh\"),arccoth:_(\"BuiltIn\",\"acoth\"),arcsech:_(\"BuiltIn\",\"asech\"),arccsch:_(\"BuiltIn\",\"acsch\"),sqrt:_(\"Math\",\"sqrt\"),rtxsqpone:_(\"BuiltIn\",\"sqrtxsqp1\"),rtxsqmone:_(\"BuiltIn\",\"sqrtxsqm1\"),nthroot:_(\"BuiltIn\",\"nthroot\",{argumentTypes:[I,I]}),hypot:_(\"BuiltIn\",\"hypot\",{argumentTypes:[I,I]}),log:_(\"BuiltIn\",\"common_log\"),logbase:_(\"BuiltIn\",\"log_base\",{argumentTypes:[I,I]}),ln:_(\"BuiltIn\",\"log\"),exp:_(\"Math\",\"exp\"),floor:_(\"Math\",\"floor\"),ceil:_(\"Math\",\"ceil\"),round:_(\"Math\",\"round\"),abs:_(\"Math\",\"abs\"),sign:_(\"BuiltIn\",\"sign\"),mod:_(\"BuiltIn\",\"mod\",{argumentTypes:[I,I]}),nCr:_(\"BuiltIn\",\"nCr\",{argumentTypes:[I,I]}),nPr:_(\"BuiltIn\",\"nPr\",{argumentTypes:[I,I]}),factorial:_(\"BuiltIn\",\"factorial\"),polyGamma:_(\"BuiltIn\",\"polyGamma\",{argumentTypes:[I,I]}),lcm:_(\"BuiltIn\",\"listLCM\",{tag:\"reducer\"}),gcd:_(\"BuiltIn\",\"listGCD\",{tag:\"reducer\"}),distance:_(\"BuiltIn\",\"distance\",{argumentTypes:[N,N]}),polygon:_(\"BuiltIn\",\"polygon\",{tag:\"reducer\",argumentTypes:[ft],returnType:we}),area:_(\"BuiltIn\",\"polygonArea\",{argumentTypes:[we]}),perimeter:_(\"BuiltIn\",\"polygonPerimeter\",{argumentTypes:[we]}),pointDet:_(\"BuiltIn\",\"pointDet\",{argumentTypes:[N,N]}),pointDot:_(\"BuiltIn\",\"pointDot\",{argumentTypes:[N,N]}),pointPerp:_(\"BuiltIn\",\"pointPerp\",{argumentTypes:[N],returnType:N}),segment:_(\"BuiltIn\",\"segment\",{argumentTypes:[N,N],returnType:De}),line:_(\"BuiltIn\",\"line\",{argumentTypes:[N,N],returnType:ye}),ray:_(\"BuiltIn\",\"ray\",{argumentTypes:[N,N],returnType:Le}),vector:_(\"BuiltIn\",\"vector\",{argumentTypes:[N,N],returnType:he}),vectorThreeD:_(\"BuiltIn\",\"vectorThreeD\",{argumentTypes:[H,H],returnType:ve}),mathVector:_(\"BuiltIn\",\"mathVector\",{argumentTypes:[N,N],returnType:he}),mathVectorThreeD:_(\"BuiltIn\",\"mathVectorThreeD\",{argumentTypes:[H,H],returnType:ve}),vectorDisplacementAsPoint:_(\"BuiltIn\",\"vectorDisplacementAsPoint\",{argumentTypes:[he],returnType:N}),vectorThreeDDisplacementAsPoint:_(\"BuiltIn\",\"vectorThreeDDisplacementAsPoint\",{argumentTypes:[ve],returnType:H}),basePointFromVector:_(\"BuiltIn\",\"basePointFromVector\",{argumentTypes:[he],returnType:N}),basePointFromVectorThreeD:_(\"BuiltIn\",\"basePointFromVectorThreeD\",{argumentTypes:[ve],returnType:H}),circle:_(\"BuiltIn\",\"circle\",{argumentTypes:[N,I],returnType:me}),center:_(\"BuiltIn\",\"center\",{argumentTypes:[me],returnType:N,allowDotCall:!0}),radius:_(\"BuiltIn\",\"radius\",{argumentTypes:[me],returnType:I,allowDotCall:!0}),arc:_(\"BuiltIn\",\"arc\",{argumentTypes:[N,N,N],returnType:fe}),arcCenter:_(\"BuiltIn\",\"arcCenter\",{argumentTypes:[fe],returnType:N}),arcOmega:_(\"BuiltIn\",\"arcOmega\",{argumentTypes:[fe],returnType:I}),undirectedAngleMarker:_(\"BuiltIn\",\"undirectedAngleMarker\",{argumentTypes:[Te],returnType:Ne}),directedAngleMarker:_(\"BuiltIn\",\"directedAngleMarker\",{argumentTypes:[N,I,I,I],returnType:Te}),directedCoterminalAngle:_(\"BuiltIn\",\"directedCoterminalAngle\",{argumentTypes:[Te],returnType:Te}),undirectedCoterminalAngle:_(\"BuiltIn\",\"undirectedCoterminalAngle\",{argumentTypes:[Ne],returnType:Ne}),supplement:_(\"BuiltIn\",\"supplementAngle\",{argumentTypes:[Te],returnType:Te}),directedAngleMarkerRawDelta:_(\"BuiltIn\",\"angleMarkerRawDelta\",{argumentTypes:[Te],returnType:I}),undirectedAngleMarkerRawDelta:_(\"BuiltIn\",\"angleMarkerRawDelta\",{argumentTypes:[Ne],returnType:I}),directedAngleMarkerMultiplier:_(\"BuiltIn\",\"angleMarkerMultiplier\",{argumentTypes:[Te],returnType:I}),undirectedAngleMarkerMultiplier:_(\"BuiltIn\",\"angleMarkerMultiplier\",{argumentTypes:[Ne],returnType:I}),polygonInteriorUndirectedAngles:_(\"BuiltIn\",\"polygonInteriorUndirectedAngles\",{argumentTypes:[we,I],returnType:ar,allowDotCall:!0,tag:\"never-broadcast\"}),polygonInteriorDirectedAngles:_(\"BuiltIn\",\"polygonInteriorDirectedAngles\",{argumentTypes:[we,I],returnType:ur,allowDotCall:!0,tag:\"never-broadcast\"}),vertices:_(\"BuiltIn\",\"vertices\",{argumentTypes:[we],returnType:ft,allowDotCall:!0,tag:\"never-broadcast\"}),segments:_(\"BuiltIn\",\"polygonEdges\",{argumentTypes:[we],returnType:Tr,allowDotCall:!0,tag:\"never-broadcast\"}),scaleTangentSegment:_(\"BuiltIn\",\"scaleTangentSegment\",{argumentTypes:[De,I],returnType:De}),scaleTangentLine:_(\"BuiltIn\",\"scaleTangentLine\",{argumentTypes:[ye,I],returnType:ye}),scaleTangentRay:_(\"BuiltIn\",\"scaleTangentRay\",{argumentTypes:[Le,I],returnType:Le}),scaleTangentCircle:_(\"BuiltIn\",\"scaleTangentCircle\",{argumentTypes:[me,I],returnType:me}),scaleTangentArc:_(\"BuiltIn\",\"scaleTangentArc\",{argumentTypes:[fe,I],returnType:me}),scaleTangentDirectedAngleMarker:_(\"BuiltIn\",\"scaleTangentAngle\",{argumentTypes:[Te,I],returnType:Te}),scaleTangentUndirectedAngleMarker:_(\"BuiltIn\",\"scaleTangentAngle\",{argumentTypes:[Ne,I],returnType:Ne}),addTangentSegment:_(\"BuiltIn\",\"addTangentSegment\",{argumentTypes:[De,De],returnType:De}),addTangentSegmentThreeD:_(\"BuiltIn\",\"addTangentSegmentThreeD\",{argumentTypes:[xt,xt],returnType:xt}),addTangentLine:_(\"BuiltIn\",\"addTangentLine\",{argumentTypes:[ye,ye],returnType:ye}),addTangentRay:_(\"BuiltIn\",\"addTangentRay\",{argumentTypes:[Le,Le],returnType:Le}),addTangentCircle:_(\"BuiltIn\",\"addTangentCircle\",{argumentTypes:[me,me],returnType:me}),addTangentArc:_(\"BuiltIn\",\"addTangentArc\",{argumentTypes:[fe,fe],returnType:fe}),addTangentDirectedAngleMarker:_(\"BuiltIn\",\"addTangentAngle\",{argumentTypes:[Te,Te],returnType:Te}),addTangentUndirectedAngleMarker:_(\"BuiltIn\",\"addTangentAngle\",{argumentTypes:[Ne,Ne],returnType:Ne}),segmentGlider:_(\"BuiltIn\",\"segmentGlider\",{argumentTypes:[De,I],returnType:N}),segmentThreeDGlider:_(\"BuiltIn\",\"segmentThreeDGlider\",{argumentTypes:[xt,I],returnType:H}),lineGlider:_(\"BuiltIn\",\"lineGlider\",{argumentTypes:[ye,I],returnType:N}),rayGlider:_(\"BuiltIn\",\"rayGlider\",{argumentTypes:[Le,I],returnType:N}),circleGlider:_(\"BuiltIn\",\"circleGlider\",{argumentTypes:[me,I],returnType:N}),arcGlider:_(\"BuiltIn\",\"arcGlider\",{argumentTypes:[fe,I],returnType:N}),polygonGlider:_(\"BuiltIn\",\"polygonGlider\",{argumentTypes:[we,I],returnType:N}),chooseNonIncidentPoint:_(\"BuiltIn\",\"chooseNonIncidentPoint\",{argumentTypes:[N,N,N],returnType:N}),circleCircleIntersection:_(\"BuiltIn\",\"circleCircleIntersection\",{argumentTypes:[me,me,I],returnType:N}),circleArcIntersection:_(\"BuiltIn\",\"circleArcIntersection\",{argumentTypes:[me,fe,I],returnType:N}),circleLineIntersection:_(\"BuiltIn\",\"circleLineIntersection\",{argumentTypes:[me,ye,I],returnType:N}),arcCircleIntersection:_(\"BuiltIn\",\"arcCircleIntersection\",{argumentTypes:[fe,me,I],returnType:N}),arcArcIntersection:_(\"BuiltIn\",\"arcArcIntersection\",{argumentTypes:[fe,fe,I],returnType:N}),arcLineIntersection:_(\"BuiltIn\",\"arcLineIntersection\",{argumentTypes:[fe,ye,I],returnType:N}),lineCircleIntersection:_(\"BuiltIn\",\"lineCircleIntersection\",{argumentTypes:[ye,me,I],returnType:N}),lineArcIntersection:_(\"BuiltIn\",\"lineArcIntersection\",{argumentTypes:[ye,fe,I],returnType:N}),lineLineIntersection:_(\"BuiltIn\",\"lineLineIntersection\",{argumentTypes:[ye,ye,I],returnType:N}),lineFromSegment:_(\"BuiltIn\",\"identity\",{argumentTypes:[De],returnType:ye}),lineFromRay:_(\"BuiltIn\",\"identity\",{argumentTypes:[Le],returnType:ye}),parallel:_(\"BuiltIn\",\"parallel\",{argumentTypes:[ye,N],returnType:ye}),perpendicular:_(\"BuiltIn\",\"perpendicular\",{argumentTypes:[ye,N],returnType:ye}),translation:_(\"BuiltIn\",\"translation\",{argumentTypes:[N],returnType:He}),dilation:_(\"BuiltIn\",\"dilation\",{argumentTypes:[N,I],returnType:He}),rotation:_(\"BuiltIn\",\"rotation\",{tag:\"trig2\",argumentTypes:[N,I],returnType:He}),reflection:_(\"BuiltIn\",\"reflection\",{argumentTypes:[ye],returnType:He}),compose:_(\"BuiltIn\",\"composeTransformation\",{argumentTypes:[He,He],returnType:He}),inverse:_(\"BuiltIn\",\"invertTransformation\",{argumentTypes:[He],returnType:He}),transformPoint:_(\"BuiltIn\",\"transformPoint\",{argumentTypes:[He,N],returnType:N}),transformSegment:_(\"BuiltIn\",\"transformSegment\",{argumentTypes:[He,De],returnType:De}),transformLine:_(\"BuiltIn\",\"transformLine\",{argumentTypes:[He,ye],returnType:ye}),transformRay:_(\"BuiltIn\",\"transformRay\",{argumentTypes:[He,Le],returnType:Le}),transformVector:_(\"BuiltIn\",\"transformVector\",{argumentTypes:[He,he],returnType:he}),transformCircle:_(\"BuiltIn\",\"transformCircle\",{argumentTypes:[He,me],returnType:me}),transformArc:_(\"BuiltIn\",\"transformArc\",{argumentTypes:[He,fe],returnType:fe}),transformPolygon:_(\"BuiltIn\",\"transformPolygon\",{argumentTypes:[He,we],returnType:we}),transformAngleMarker:_(\"BuiltIn\",\"transformAngleMarker\",{argumentTypes:[He,Ne],returnType:Ne}),transformDirectedAngleMarker:_(\"BuiltIn\",\"transformAngleMarker\",{argumentTypes:[He,Te],returnType:Te}),distanceThreeD:_(\"BuiltIn\",\"distanceThreeD\",{argumentTypes:[H,H]}),segmentThreeD:_(\"BuiltIn\",\"segmentThreeD\",{argumentTypes:[H,H],returnType:xt}),triangle:_(\"BuiltIn\",\"triangle\",{argumentTypes:[H,H,H],returnType:Ir}),sphere:_(\"BuiltIn\",\"sphere\",{argumentTypes:[H,I],returnType:Ar,minArityExampleArgs:\"((0,0,0), 1)\",maxArityExampleArgs:\"((0,0,0), 1)\"}),mean:_(\"BuiltIn\",\"mean\",{tag:\"reducer\"}),total:_(\"BuiltIn\",\"total\",{tag:\"reducer\"}),stdev:_(\"BuiltIn\",\"stdev\",{tag:\"reducer\"}),stdevp:_(\"BuiltIn\",\"stdevp\",{tag:\"reducer\"}),mad:_(\"BuiltIn\",\"mad\",{tag:\"reducer\"}),count:_(\"BuiltIn\",\"listLength\",{tag:\"reducer\",argumentTypes:[er],noPeel:!0}),min:_(\"BuiltIn\",\"listMin\",{tag:\"reducer\"}),max:_(\"BuiltIn\",\"listMax\",{tag:\"reducer\"}),argmin:_(\"BuiltIn\",\"argMin\",{tag:\"reducer\",noPeel:!0}),argmax:_(\"BuiltIn\",\"argMax\",{tag:\"reducer\",noPeel:!0}),median:_(\"BuiltIn\",\"median\",{tag:\"reducer\"}),var:_(\"BuiltIn\",\"variance\",{tag:\"reducer\"}),varp:_(\"BuiltIn\",\"varp\",{tag:\"reducer\"}),cov:_(\"BuiltIn\",\"cov\",{tag:\"doubleReducer\"}),covp:_(\"BuiltIn\",\"covp\",{tag:\"doubleReducer\"}),corr:_(\"BuiltIn\",\"corr\",{tag:\"doubleReducer\"}),spearman:_(\"BuiltIn\",\"spearman\",{tag:\"doubleReducer\"}),quantile:_(\"BuiltIn\",\"quantile\",{tag:\"parameterizedReducer\"}),quartile:_(\"BuiltIn\",\"quartile\",{tag:\"parameterizedReducer\"}),upperQuantileIndex:_(\"BuiltIn\",\"upperQuantileIndex\",{tag:\"parameterizedReducer\"}),lowerQuantileIndex:_(\"BuiltIn\",\"lowerQuantileIndex\",{tag:\"parameterizedReducer\"}),quartileIndex:_(\"BuiltIn\",\"quartileIndex\",{tag:\"parameterizedReducer\"}),upperQuartileIndex:_(\"BuiltIn\",\"upperQuartileIndex\",{tag:\"parameterizedReducer\"}),lowerQuartileIndex:_(\"BuiltIn\",\"lowerQuartileIndex\",{tag:\"parameterizedReducer\"}),normalcdf:_(\"BuiltIn\",\"normalcdf\",{argumentTypes:[I,I,I,I],defaultArguments:[Lu,wu]}),normalpdf:_(\"BuiltIn\",\"normalpdf\",{argumentTypes:[I,I,I],defaultArguments:[Lu,wu]}),binomcdf:_(\"BuiltIn\",\"binomcdf\",{argumentTypes:[I,I,I,I],defaultArguments:[kf]}),binompdf:_(\"BuiltIn\",\"binompdf\",{argumentTypes:[I,I,I],defaultArguments:[kf]}),poissoncdf:_(\"BuiltIn\",\"poissoncdf\",{argumentTypes:[I,I,I]}),poissonpdf:_(\"BuiltIn\",\"poissonpdf\",{argumentTypes:[I,I,I]}),uniformcdf:_(\"BuiltIn\",\"uniformcdf\",{argumentTypes:[I,I,I,I],defaultArguments:[Lu,wu]}),uniformpdf:_(\"BuiltIn\",\"uniformpdf\",{argumentTypes:[I,I,I],defaultArguments:[Lu,wu]}),invT:_(\"BuiltIn\",\"invT\",{argumentTypes:[I,I]}),invPoisson:_(\"BuiltIn\",\"invPoisson\",{argumentTypes:[I,I]}),invBinom:_(\"BuiltIn\",\"invBinom\",{argumentTypes:[I,I,I]}),invUniform:_(\"BuiltIn\",\"invUniform\",{argumentTypes:[I,I,I]}),tpdf:_(\"BuiltIn\",\"tpdf\",{argumentTypes:[I,I]}),tcdf:_(\"BuiltIn\",\"tcdf\",{argumentTypes:[I,I,I]}),erf:_(\"BuiltIn\",\"erf\"),invNorm:_(\"BuiltIn\",\"invNorm\"),tscore:_(\"BuiltIn\",\"tscore\",{tag:\"parameterizedReducer\",defaultArguments:[Lu]}),normalSample:_(\"BuiltIn\",\"normalSample\",{argumentTypes:[ot,I,I]}),uniformSample:_(\"BuiltIn\",\"uniformSample\",{argumentTypes:[ot,I,I]}),tSample:_(\"BuiltIn\",\"tSample\",{argumentTypes:[ot,I]}),poissonSample:_(\"BuiltIn\",\"poissonSample\",{argumentTypes:[ot,I]}),binomSample:_(\"BuiltIn\",\"binomSample\",{argumentTypes:[ot,I,I]}),rgb:_(\"BuiltIn\",\"rgb\",{returnType:Gt,tag:\"color\"}),hsv:_(\"BuiltIn\",\"hsv\",{returnType:Gt,tag:\"color\"}),tone:_(\"BuiltIn\",\"tone\",{argumentTypes:[I,I],returnType:lr,defaultArguments:[kf],minArityExampleArgs:\"(440)\",maxArityExampleArgs:\"(440, 0.5)\"}),validateRangeLength:_(\"BuiltIn\",\"validateRangeLength\",{returnType:I,argumentTypes:[ie,ie,I,I],tag:\"never-broadcast\",noPeel:!0}),validateSampleCount:_(\"BuiltIn\",\"validateSampleCount\",{returnType:I,argumentTypes:[I]}),select:_(\"BuiltIn\",\"select\",{argumentTypes:[er,sn],returnType:e=>e[0],tag:\"never-broadcast\",noPeel:!0}),shuffle:_(\"BuiltIn\",\"shuffle\",{argumentTypes:[ot,er],returnType:e=>e[1],tag:\"never-broadcast\"}),sortPerm:_(\"BuiltIn\",\"sortPerm\",{argumentTypes:[ie],returnType:ie,tag:\"never-broadcast\",noPeel:!0}),elementsAt:_(\"BuiltIn\",\"elementsAt\",{argumentTypes:[er,ie],returnType:e=>e[0],tag:\"never-broadcast\",noPeel:!0}),uniquePerm:_(\"BuiltIn\",\"uniquePerm\",{argumentTypes:[er],returnType:ie,tag:\"never-broadcast\",noPeel:!0}),restriction:_(\"BuiltIn\",\"restriction\",{argumentTypes:[ge],returnType:Ot}),restrictionToBoolean:_(\"BuiltIn\",\"restrictionToBoolean\",{argumentTypes:[Ot],returnType:ge})};function Ge(e,t){var g,m,b,y,h;let r=t==null?void 0:t.defaultArguments,n=1/0,i=0,s=(g=r==null?void 0:r.length)!=null?g:0;t!=null&&t.noBroadcast||(e=e.map(Yn));for(let x of e){let P=Va(x)-s;P<n&&(n=P);let E=Nl(x);E>i&&(i=E)}let o=(m=t==null?void 0:t.fallthroughUnlessDistribution)!=null?m:!1,a=(b=t==null?void 0:t.allowDotCall)!=null?b:!1,u=(y=t==null?void 0:t.isSeeded)!=null?y:!1,c=t==null?void 0:t.minArityExampleArgs,l=t==null?void 0:t.maxArityExampleArgs,p=t==null?void 0:t.dotMinArityExampleArgs,f=t==null?void 0:t.dotMaxArityExampleArgs,d=(h=t==null?void 0:t.noPeel)!=null?h:!1;return{minArity:n,argumentTypes:e,maxArity:i,defaultArguments:r,fallthroughUnlessDistribution:o,minArityExampleArgs:c,maxArityExampleArgs:l,dotMinArityExampleArgs:p,dotMaxArityExampleArgs:f,allowDotCall:a,isSeeded:u,noPeel:d}}function Ks(){return Ge([{type:\"variadic\",initial:[],rest:Vt}],{})}var qf={meta:\"union\",types:[De,me,ye,Le,fe]},uh={meta:\"union\",types:[De,ye,Le,he]},Lc={meta:\"union\",types:[N,De,me,ye,Le,he,fe,we,Ne,Te,He]},ch={meta:\"union\",types:[...Ps.filter(e=>e!==Pr),at]},eo={midpoint:Ge([[N,N],[H,H],[De],[xt]],{allowDotCall:!0}),segment:Ge([[N,N],[H,H]]),vector:Ge([[N,N],[H,H]]),distance:Ge([[N,N],[H,H]]),glider:Ge([[{meta:\"union\",types:[De,me,ye,Le,fe,we]},I]]),circle:Ge([[N,De],[N,N],[N,I]],{}),center:Ge([[me],[fe]],{allowDotCall:!0}),radius:Ge([[me],[fe]],{allowDotCall:!0}),intersection:Ge([[qf,qf]]),strictintersection:Ge([[qf,qf]]),parallel:Ge([[uh,N]]),perpendicular:Ge([[uh,N]]),start:Ge([[he],[ve]],{allowDotCall:!0}),end:Ge([[he],[ve]],{allowDotCall:!0}),length:Ge([[{meta:\"union\",types:Ps}],Yn([xt]),Yn([ve]),Yn([De]),Yn([fe]),{type:\"variadic\",initial:[Vt],rest:Vt}],{allowDotCall:!0,noBroadcast:!0,noPeel:!0}),translate:Ge([[Lc,he],[Lc,N,N]]),dilate:Ge([[Lc,N,I]]),rotate:Ge([[Lc,N,I]]),reflect:Ge([[Lc,uh]]),apply:Ge([[He,Lc]]),points:Ge([]),lines:Ge([]),circles:Ge([]),arcs:Ge([]),polygons:Ge([]),rays:Ge([]),vectors:Ge([]),angle:Ge([[N,N,N]]),directedangle:Ge([[N,N,N]]),angles:Ge([[we]],{allowDotCall:!0}),directedangles:Ge([[we]],{allowDotCall:!0}),coterminal:Ge([[Ne],[Te]]),round:Ge([[I],[I,I]]),sort:Ge([[ie],[{meta:\"union\",types:Ps},ie]],{minArityExampleArgs:\"([3,2,1])\",maxArityExampleArgs:\"([1,2,3],[3,2,1])\",dotMaxArityExampleArgs:\"([3,4])\",allowDotCall:!0}),shuffle:Ge([[ot,{meta:\"union\",types:Ps}],[ot,{meta:\"union\",types:Ps},I]],{minArityExampleArgs:\"([1,2,3])\",maxArityExampleArgs:\"([1,2,3],2)\",dotMaxArityExampleArgs:\"(2)\",allowDotCall:!0,isSeeded:!0,noBroadcast:!0}),join:Ge([{type:\"variadic\",initial:[Vt,Vt],rest:Vt}],{minArityExampleArgs:\"([1,2],[3,4])\",dotMinArityExampleArgs:\"([3,4])\",allowDotCall:!0}),unique:Ge([[{meta:\"union\",types:Ps.filter(e=>e!==Pr&&e!==er)}]],{minArityExampleArgs:\"([1,2,3])\",maxArityExampleArgs:\"([1,2,3])\",allowDotCall:!0}),normaldist:Ge([[I,I]],{defaultArguments:[Lu,wu]}),tdist:Ge([[I]]),binomialdist:Ge([[I,I]],{defaultArguments:[kf]}),poissondist:Ge([[I]]),uniformdist:Ge([[I,I]],{defaultArguments:[Lu,wu]}),pdf:Ge([[at,I]],{allowDotCall:!0}),cdf:Ge([[at,I],[at,I,I]],{allowDotCall:!0}),median:Ge([[at]],{fallthroughUnlessDistribution:!0,allowDotCall:!0}),stdev:Ge([[at]],{fallthroughUnlessDistribution:!0,allowDotCall:!0}),var:Ge([[at]],{fallthroughUnlessDistribution:!0,allowDotCall:!0}),quantile:Ge([[at,I]],{fallthroughUnlessDistribution:!0,allowDotCall:!0,minArityExampleArgs:\"([1,2,3], 1)\",maxArityExampleArgs:\"([1,2,3], 1)\",dotMinArityExampleArgs:\"(x)\",dotMaxArityExampleArgs:\"(x)\"}),random:Ge([[ot],[ot,I],[ot,I,I],[ot,ch],[ot,ch,I],[ot,ch,I,I]],{allowDotCall:!0,isSeeded:!0,noBroadcast:!0}),polygon:Ge([{type:\"variadic\",initial:[],rest:N},[ft],[ie,ie],[I,ie],[ie,I]]),total:Ge([I,N,H].map(lh),{allowDotCall:!0}),mean:Ge([[at],...[I,N,H].map(lh)],{allowDotCall:!0}),histogram:Ks(),dotplot:Ks(),boxplot:Ks(),ttest:Ks(),ittest:Ks(),stats:Ks(),det:Ks(),inv:Ks(),transpose:Ks(),rref:Ks(),trace:Ks()};function Fc(e){return!!eo[e]}function wc(e){return!!yr[e]}function zl(e){let t=Fc(e)?eo[e]:void 0;if(!t&&!wc(e))return;let r=[];return t&&(r=[...t.argumentTypes]),wc(e)&&(!t||t.fallthroughUnlessDistribution)&&r.push(...fh(e)),r}function lh(e){return Yn({type:\"variadic\",initial:[e],rest:e})}function fh(e){let t=[],r=yr[e];switch(r.tag){case\"reducer\":{if(Array.isArray(r.argumentTypes)&&typeof r.argumentTypes[0]==\"number\"&&W(r.argumentTypes[0])){let n=r.argumentTypes[0],i=We(n);t.push(lh(i))}else throw new Error(`Programming error: declared argumentTypes for built-in function ${e} is not consistent with \"reducer\"`);break}case\"parameterizedReducer\":{t.push(r.argumentTypes),Array.isArray(r.argumentTypes)&&r.argumentTypes.length===2&&t.push([r.argumentTypes[0],Ru(r.argumentTypes[1])]);break}case\"doubleReducer\":case\"never-broadcast\":{t.push(r.argumentTypes);break}default:{t.push(Yn(r.argumentTypes));break}}return t}var Cr=class extends j{constructor(r,n){super(n,{skipRegisterDependencies:!0});typeof r==\"string\"&&(r=new Tt(r)),this._identifier=r,this._symbol=r._symbol,this._errorSymbol=r._errorSymbol===\"logbase\"?\"log\":r._errorSymbol,this.registerDependencies()}registerDependencies(){this.addDependency(this._symbol),super.registerDependencies(),za(this._symbol)&&this.addDependency(\"trigAngleMultiplier\")}copyWithArgs(r){return new this.constructor(new Tt(this._symbol),r)}};var Is=class extends j{};var Yf={pi:new Gr(Math.PI),tau:new Gr(2*Math.PI),e:new Gr(Math.E),trigAngleMultiplier:new Gr(Ve(1,1)),infty:new Gr(1/0),identityTransformation:new Cr(\"translation\",[new Is([new Gr(0),new Gr(0)])])};var Xf=class extends Pt{constructor(){super(...arguments);this.isFunction=!0}},Lo,Xe={};for(Lo in Yf)Yf.hasOwnProperty(Lo)&&(Xe[Lo]=Yf[Lo]);for(Lo in yr)yr.hasOwnProperty(Lo)&&(Xe[Lo]=new Xf);for(Lo in eo)eo.hasOwnProperty(Lo)&&(Xe[Lo]=new Xf);function dC(e){var t={};return e.additionalFunctions&&e.additionalFunctions.indexOf(\"sqrt\")!==-1&&(t.sqrt=Xe.sqrt),e.width&&(t.width=e.width),e.height&&(t.height=e.height),t}var dh={};Ys(dh,{getFrame:()=>mC});var FE=[\"pi\",\"e\",\"trigAngleMultiplier\"],VE=[\"sqrt\",\"nthroot\",\"abs\",\"ln\",\"sin\",\"cos\",\"tan\",\"log\",\"arcsin\",\"arccos\",\"arctan\",\"mean\",\"round\",\"stdev\",\"stdevp\",\"nCr\",\"nPr\",\"exp\",\"factorial\"];function GE(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error(\"Programming Error: key '\"+n+`' does not exist in table. Must be one of:\n`+Object.keys(t).join(`\n`))}}GE(FE,Xe);GE(VE,Xe);function mC(e){var t={};return FE.forEach(function(r){t[r]=Xe[r]}),VE.forEach(function(r){e.replaceRoundWithReciprocal&&r===\"round\"||(t[r]=Xe[r])}),e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),e.width&&(t.width=e.width),e.height&&(t.height=e.height),t}var mh={};Ys(mh,{getFrame:()=>yC});var BE=[\"pi\",\"e\",\"trigAngleMultiplier\"],zE=[\"sqrt\",\"nthroot\",\"abs\",\"ln\",\"sin\",\"cos\",\"tan\",\"log\",\"arcsin\",\"arccos\",\"arctan\",\"exp\",\"factorial\"];function HE(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error(\"Programming Error: key '\"+n+`' does not exist in table. Must be one of:\n`+Object.keys(t).join(`\n`))}}HE(BE,Xe);HE(zE,Xe);function yC(e){var t={};return BE.forEach(function(r){t[r]=Xe[r]}),zE.forEach(function(r){t[r]=Xe[r]}),e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),e.width&&(t.width=e.width),e.height&&(t.height=e.height),t}var Hl={};Ys(Hl,{getFrame:()=>xC});var UE={segment:!0,line:!0,ray:!0,circle:!0,arc:!0,vector:!0,glider:!0,parallel:!0,perpendicular:!0,center:!0,radius:!0,area:!0,perimeter:!0,start:!0,end:!0,angles:!0,angle:!0,directedangles:!0,directedangle:!0,coterminal:!0,supplement:!0,vertices:!0,segments:!0,intersection:!0,translate:!0,dilate:!0,rotate:!0,reflect:!0,construction:!0,points:!0,lines:!0,circles:!0,arcs:!0,polygons:!0,rays:!0};var qE={segment:!0,triangle:!0,vector:!0,start:!0,end:!0,sphere:!0};var kE=[\"csc\",\"sec\",\"cot\",\"arccsc\",\"arcsec\",\"arccot\",\"csch\",\"sech\",\"coth\",\"arccsch\",\"arcsech\",\"arccoth\",\"mad\",\"cov\",\"covp\",\"distance\",\"midpoint\"],YE=[\"histogram\",\"dotplot\",\"boxplot\"],gC=[...YE,\"polygon\"],XE=[\"erf\",\"ttest\",\"tscore\",\"ittest\",\"normaldist\",\"tdist\",\"poissondist\",\"binomialdist\",\"pdf\",\"cdf\",\"random\",...YE],hC=[\"distance\",\"midpoint\"],bC=[\"det\",\"inv\",\"transpose\",\"rref\",\"trace\"],ZE=Object.keys(UE).filter(function(e){return e!==\"construction\"});function yh(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error(\"Programming Error: key '\"+n+`' does not exist in table. Must be one of:\n`+Object.keys(t).join(`\n`))}}yh(kE,Xe);yh(XE,Xe);yh(ZE,Xe);function xC(e){var t={},r;for(r in Xe){if(!Xe.hasOwnProperty(r)||e.restrictedFunctions===!0&&kE.indexOf(r)!==-1&&!(e.forceEnableGeometryFunctions===!0&&hC.indexOf(r)!==-1)||e.distributions===!1&&XE.indexOf(r)!==-1)continue;let n=ZE.indexOf(r)!==-1,i=r in qE;if(n&&i){if(!(e.isGeometryCalculator||e.is3DCalculator))continue}else if(n){if(!e.isGeometryCalculator)continue}else if(i){if(!e.is3DCalculator)continue}else if(gC.indexOf(r)!==-1&&e.is3DCalculator)continue;bC.indexOf(r)===-1&&(t[r]=Xe[r])}return e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),e.globalRandomSeed&&(t.globalRandomSeed=e.globalRandomSeed),e.initialEvaluation&&(t.initialEvaluation=e.initialEvaluation),e.globalEventCount&&(t.globalEventCount=e.globalEventCount),e.width&&(t.width=e.width),e.height&&(t.height=e.height),t}var YN={};Ys(YN,{parse:()=>Ns,setInput:()=>CO});function $E(e){let t=function(...i){return new e(...i)};t.prototype=e.prototype;var r=Object.getOwnPropertyNames(e);for(var n of r){let i=e[n];if(typeof i==\"function\")try{t[n]=i}catch(s){}}return t}var R=class extends Pt{constructor(r){super();this.isError=!0;this._msg=r,this.blocksExport=!0}evaluateOnce(r){return this._msg}getError(){return this._msg}setDependencies(r){return this.addDependencies(r),this}setActionValue(r){this.actionValue=r}allowExport(){return this.blocksExport=!1,this}setCursorContext(r){this.cursorContext=r}getCursorContext(){return this.cursorContext}};var $f=class extends Gr{constructor(){super(...arguments);this.is_mixed_number=!0}};var Wf=class extends Tt{};function PC(e){for(var t=1/0,r=0;r<e.length;r++)(e[r].isList||e[r].isBroadcast)&&(t=Math.min(t,e[r].length));return t}var Ul=class Ul extends j{constructor(r){super(r);this.isList=!0;this.length=r.length}asValue(){for(var r=[],n=0;n<this.args.length;n++)r.push(this.args[n].asValue());return r}asCompilerValue(){for(var r=[],n=0;n<this.args.length;n++)r.push(this.args[n].asCompilerValue());return r}getEvaluationInfo(){if(this.args.every(function(r){return r.isConstant}))return[{val:this.args.map(function(r){return r.asValue()})}]}};Ul.eachArgs=function(r,n){var i=PC(r);if(!isFinite(i)){n(r);return}for(var s=0;s<i;s++){for(var o=[],a=0;a<r.length;a++)o.push(r[a].isList||W(r[a].valueType)?r[a].elementAt(s):r[a]);n(o,s)}},Ul.wrap=function(r){return r.isList||W(r.valueType)?r:new Ul([r])};var Ha=Ul;var Jf=class extends j{constructor(r){super(r);this.beginning=r[0],this.end=r[1]}isHalfEmpty(){return this.end&&this.end.args&&this.end.args.length===0}};var Vc=class extends j{constructor(r){super(r);this.list=r[0],this.index=r[1]}};var ns=class extends j{registerDependencies(){if(super.registerDependencies(),this.args[1].type===\"Identifier\"){var t=this.args[1]._symbol;za(t)&&this.addDependency(\"trigAngleMultiplier\")}}};var jf=class extends j{constructor(t){var r=t.map(function(n){return new Tt(\"\\\\idref_{\"+n+\"}\")});super(r),this._exports.push(\"construction\")}};var Qf=class extends Is{constructor(r,n,i){super(r);this.isTypedConstant=!0;this.isMovablePoint=!0;this.moveStrategy=n,this.defaultDragMode=i,this.valueType=N}asValue(){return[+this.args[0].asValue(),+this.args[1].asValue()]}asTypedValue(){return{valueType:this.valueType,value:this.asValue()}}asCompilerValue(){return[this.args[0].asCompilerValue(),this.args[1].asCompilerValue()]}};var Kf=class e extends j{constructor(r,n){super(n);this.symbol=r}copyWithArgs(r){return new e(this.symbol,r)}};var Gc=class extends j{};var ed=class extends j{};var Es=class extends j{};var $n={\"<\":{inclusive:!1,direction:-1},\"!=\":{inclusive:!1,direction:0},\">\":{inclusive:!1,direction:1},\"<=\":{inclusive:!0,direction:-1},\"=\":{inclusive:!0,direction:0},\">=\":{inclusive:!0,direction:1}};function Fu(e,t){switch(t){case-1:return e?\"<=\":\"<\";case 0:return e?\"=\":\"!=\";case 1:return e?\">=\":\">\";default:throw\"Programming error.  Comparators must have a direction of -1, 0, or 1\"}}var wo=class e extends j{constructor(r){super(r);this._difference=$n[this.operator].direction===-1?new Es([r[1],r[0]]):new Es([r[0],r[1]])}static create(r){class n extends e{}return n.prototype.operator=r,n}asComparator(){return this}isInequality(){return $n[this.operator].direction!==0}};var Fo={\"<\":wo.create(\"<\"),\">\":wo.create(\">\"),\"<=\":wo.create(\"<=\"),\">=\":wo.create(\">=\"),\"=\":wo.create(\"=\")};var rd=class extends Pt{constructor(r){super();let[n,i,s,o,a]=r;this.args=r,this._symbol=s._symbol,this._operators=[i,o],this._expressions=[n,a];var u=Fu($n[i].inclusive&&$n[r[3]].inclusive,$n[r[1]].direction);this._indicator=new Fo[u]([r[0],r[4]]),this.addDependency(this._symbol),this.mergeDependencies(this._expressions[0],this._expressions[1])}isInequality(){return!0}isShadeBetween(){return!0}};var Ua=class extends j{constructor(r){super(r,{skipRegisterDependencies:!0});this._index=r[0],this.registerDependencies()}registerDependencies(){for(let r=1;r<=3;r++)this.mergeDependenciesInScope(this.type,[this._index._symbol],this.args[r])}};var nd=class extends Ua{constructor(){super(...arguments);this.in_place_operator=\"+=\";this.starting_value=0}evaluateConstant(r){var n=1+Math.round(r[1])-Math.round(r[0]);return n<=0?this.starting_value:n*r[2]}update(r,n){return r+n}};var id=class extends Ua{constructor(){super(...arguments);this.in_place_operator=\"*=\";this.starting_value=1}evaluateConstant(r){var n=1+Math.round(r[1])-Math.round(r[0]);return n<=0?this.starting_value:Math.pow(r[2],n)}update(r,n){return r*n}};var sd=class extends j{constructor(r){super(r,{skipRegisterDependencies:!0});this._differential=r[0],this.registerDependencies()}registerDependencies(){for(let r=1;r<=3;r++)this.mergeDependenciesInScope(this.type,[this._differential._symbol],this.args[r])}};var od=class extends j{constructor(t){super(t),this._symbol=t[0]._symbol}};var Bc=class extends j{constructor(r,n,i,s,o=[]){super([r,n].concat(i),{skipRegisterDependencies:!0});this.shouldCoerceToList=s;this.parameters=o;this._index=r,this._body=n,this._inputLists=i,this.registerDependencies()}registerDependencies(){var r=[];r.push(this._index._symbol);for(let n of this._inputLists){let i=n._symbol;this.addSubstitutionSymbol(i),r.push(i)}for(let n of this.parameters){let i=n.identifier._symbol;r.push(i),this.addDependency(i)}for(let n of this._inputLists)this.mergeDependenciesInScope(this.type,r,n.args[1]);for(let n of this.parameters)this.mergeDependenciesInScope(this.type,r,n.bounds[0]),this.mergeDependenciesInScope(this.type,r,n.bounds[1]);this.mergeDependenciesInScope(this.type,r,this._body)}};var Vu=class extends Cr{constructor(r,n){super(r,n);this.seed=n[0]}};var ad=class extends j{registerDependencies(){if(super.registerDependencies(),this.args[0].type===\"Identifier\"){var t=this.args[0]._symbol;za(t)&&this.addDependency(\"trigAngleMultiplier\")}}};var ud=class extends j{registerDependencies(){if(this.addDependency(\"factorial\"),super.registerDependencies(),this.args[0].type===\"Identifier\"){var t=this.args[0]._symbol;za(t)&&this.addDependency(\"trigAngleMultiplier\")}}};var cd=class extends j{constructor(r,n){super(n);this.order=r}copyWithArgs(r){return new this.constructor(this.order,r)}};var ya=class extends j{};var ld=class extends j{};var pd=class extends j{constructor(r,n){super(n);r instanceof Tt?this._symbol=r._symbol:this._symbol=new Tt(r)._symbol,this.addDependency(this._symbol)}};var fd=class extends j{constructor(r){super(r,{skipRegisterDependencies:!0});this._symbol=r[0]._symbol,this._expression=r[1],this.registerDependencies()}registerDependencies(){this.addUpdateSymbol(this._symbol),this.mergeDependencies(this._expression)}};var dd=class extends j{constructor(r,n){super([r].concat(n),{skipRegisterDependencies:!0});this._body=r,this._assignments=n,this.registerDependencies()}registerDependencies(){for(var r=[],n=0;n<this._assignments.length;n++){var i=this._assignments[n],s=i._symbol;this.addSubstitutionSymbol(s),r.push(s);var o=i.args[1];this.mergeDependencies(o),this.addSubstitutionDependencies(o.getDependencies())}this.mergeDependenciesInScope(this.type,r,this._body)}};var md=class extends j{constructor(t){super(t),this._symbol=\"histogram\"}};var yd=class extends j{constructor(t){super(t),this._symbol=\"dotplot\"}};var gd=class extends j{constructor(t){super(t),this._symbol=\"boxplot\"}};var hd=class extends j{constructor(t){super(t),this._symbol=\"ttest\"}};var bd=class extends j{constructor(t){super(t),this._symbol=\"ittest\"}};var xd=class extends j{constructor(t){super(t),this._symbol=\"stats\"}};var Vo=class extends Pt{constructor(r,n){super();this.mergeDependencies(r,n),this._lhs=r,this._rhs=n,this._difference=new Es([this._lhs,this._rhs])}asComparator(){return new Fo[\"=\"]([this._lhs,this._rhs])}};var ga=class extends Pt{constructor(r,n){super();r instanceof Tt?this._symbol=r._symbol:this._symbol=r,this.mergeDependencies(n),this._expression=n,this._exports=this.computeExports()}shouldExportAns(){return!0}computeExports(){for(var r=this._symbol,n=this.getDependencies(),i=0;i<n.length;i++)if(n[i]===r)return[];return[r]}isEquation(r,n){let i=this._symbol,s=i===\"x\"||i===\"y\",o=i===\"r\"||i===\"z\",a=i===\"rho\",u=this.getDependencies(),c=this.graphmodeDependencies(r,n);return a||o||s&&u.includes(\"z\")?c.includes(i):u.includes(i)}asEquation(){var r=new Vo(new Tt(this._symbol),this._expression);return r.userData=this.userData,r.metaData=this.metaData,r}shouldPromoteToSlider(r){if(!this._expression.isConstant||this._expression.is_mixed_number)return!1;let n=this._expression.asValue();return typeof n!=\"number\"||!isFinite(n)?!1:r.isValidSlider(this._symbol)}};var Pd=class extends Pt{constructor(r,n){super();this._symbols=r.args.map(i=>i._symbol),this._expression=n,this._concatenatedSymbol=this._symbols.join(\"\"),this.mergeDependencies(n)}asEquation(){let r=new Vo(new Is(this._symbols.map(n=>new Tt(n))),this._expression);return r.userData=this.userData,r.metaData=this.metaData,r}};var ir={};Ys(ir,{actionMergeFreeVariable:()=>Qh,addArgumentsToDefinition:()=>ap,addTypeError:()=>xh,adjacentMixedNumber:()=>Fd,adjacentNumbers:()=>xb,andTypeError:()=>Ed,ansUndefined:()=>Gx,assignmentsUnsupported:()=>dp,badEqualitySlice:()=>Go,badForInputListDependency:()=>qx,badForIntervalDependency:()=>kx,badImplicitCall:()=>wd,badIntegralBoundDependency:()=>wx,badLogExponent:()=>Gb,badProductBoundDependency:()=>vx,badSampleSize:()=>Vx,badSumBoundDependency:()=>Dx,badSymbolContext:()=>pp,badTrigExponent:()=>Vb,badTupleDimensions:()=>bb,binaryOperatorMissingOperand:()=>np,blankExpression:()=>sp,boxplotBreadthInvalid:()=>ob,boxplotOffsetInvalid:()=>sb,cannotAssignColor:()=>ox,cannotRedefine:()=>qc,cannotRestrict:()=>sx,cannotRestrictWithEquality:()=>ax,cannotSubscript:()=>Ub,cantCombineSphericalAndCylindrical:()=>qd,cdfMaxInvalid:()=>tx,cdfMaxLessThanMin:()=>rx,cdfMinInvalid:()=>ex,cdfRequiresArguments:()=>ub,cdfTooManyArguments:()=>cb,clickableObjectAlreadyAssigned:()=>SC,clickableObjectAssignmentNotDefined:()=>OC,clickableObjectAssignmentNotIdentifier:()=>RC,clickableObjectInvalidExpression:()=>NC,colonMissingCondition:()=>Hb,colorArity:()=>db,combineTypeError:()=>Rd,comparatorTypeError:()=>Mh,complicatedDoubleInequality:()=>Zd,complicatedPolarImplicit:()=>dx,constantUnsupported:()=>qu,cycle:()=>Ud,deeplyNested:()=>rb,dependsOnDeletedGeoObject:()=>jx,derivativeMissingBody:()=>_x,derivativeTypeError:()=>Hh,derivativeVariableTypeError:()=>Uh,differentialWithSuperscript:()=>Rx,distributionAsFunction:()=>Jd,divideTypeError:()=>Th,domainMaxInvalid:()=>Qb,domainMaxLessThanMin:()=>Kb,domainMinInvalid:()=>jb,dotLHSTypeError:()=>Ah,duplicateUpdateRules:()=>Wh,emptyParen:()=>Lb,emptyPipe:()=>Fb,emptyRadical:()=>Cb,emptyRadicalIndex:()=>_b,emptySquareBracket:()=>wb,emptySubscript:()=>Vd,emptySuperscript:()=>Ob,equalityAndOtherRestriction:()=>Nd,equationRequired:()=>$d,equationsUnsupported:()=>ha,eventHandlerTypeError:()=>Jl,exponentTypeError:()=>Ih,featureUnavailable:()=>yp,fractionEmpty:()=>vb,fractionMissingDenominator:()=>Db,fractionMissingNumerator:()=>Mb,fractionsUnavailable:()=>rm,functionDefinitionsUnsupported:()=>mp,functionFreeVariable:()=>IC,functionNotDefined:()=>zd,functionTypeError:()=>Oi,functionUnsupported:()=>ss,geometryLengthTypeError:()=>Rh,gpuLongProduct:()=>ib,gpuLongSum:()=>nb,gpuMaxListSize:()=>Hc,gpuUnsupportedFunction:()=>Kl,gpuUnsupportedIntegral:()=>_d,gpuVariableListLength:()=>zu,gpuVariableProduct:()=>Cd,gpuVariableSum:()=>Ad,heterogeneousList:()=>jl,identifierAsFunction:()=>Tb,illegalBinWidth:()=>lp,illegalDotCall:()=>Wl,implicitsDisabled:()=>fx,incorrectProductLowerBound:()=>Mx,incorrectSumLowerBound:()=>Ex,indexTypeError:()=>$l,inequalitiesDisabled:()=>kd,inequalitiesUnsupported:()=>ku,inequalityChainTooLong:()=>ip,integralArgumentTypeError:()=>zh,integralLowerBoundTypeError:()=>Gh,integralMissingBody:()=>Cx,integralMissingBound:()=>Ox,integralMissingDifferential:()=>Sx,integralUpperBoundTypeError:()=>Bh,internal:()=>te,invalidDependentFirstTableColumn:()=>TC,invalidDoubleInequality3d:()=>Yd,invalidDoubleInequalityVariables:()=>Xd,invalidFirstTableColumn:()=>gx,invalidFunctionName:()=>zx,invalidHalfEmptyRange:()=>Px,invalidImplicitVariables:()=>Uu,invalidInequalityVariables:()=>lx,invalidIntervalComprehensionArity:()=>Kx,invalidIntervalComprehensionParameter:()=>bp,invalidIntervalComprehensionReturnType:()=>Qx,invalidLHS:()=>ux,invalidNestedIntervalComprehension:()=>eP,invalidOperatorName:()=>Rb,invalidRegressionParameter:()=>hx,invalidSubscript:()=>Sb,invalidTableEntry:()=>Yc,invalidTableHeader:()=>yx,listComprehensionIncorrectInput:()=>Ux,listComprehensionInputListTypeError:()=>Hx,listTypeError:()=>Bu,logScaleBoxPlot:()=>tb,logScaleDotPlot:()=>eb,logScaleHistogram:()=>Kh,logScaleTypeError:()=>Ql,logbaseUnsupported:()=>Bx,malformedList:()=>hb,malformedPoint:()=>gb,matrixAddDimensions:()=>CC,matrixAssignment:()=>AC,matrixElementTypeError:()=>VC,matrixFractionalPower:()=>wC,matrixInvalidVariable:()=>GC,matrixMultiplyDimensions:()=>LC,matrixPowerDimensions:()=>FC,matrixSubtractDimensions:()=>_C,maxListSize:()=>ep,methodRequiresList:()=>Ms,mismatchedBraces:()=>Lx,mismatchedDoubleInequality:()=>mx,multiplyDefined:()=>kc,multiplyDefinedByTables:()=>qb,multiplyTypeError:()=>kl,multiplyTypeError2D:()=>Xl,multiplyTypeError3D:()=>Zl,multiplyTypeErrorCross:()=>Yl,negativeTypeError:()=>Eh,nonArithmeticRange:()=>cp,nonListDoubleReducer:()=>up,nonListParameterizedReducer:()=>xx,nonSquareDeterminant:()=>EC,nonSquareInverse:()=>DC,nonSquareTrace:()=>MC,opaque:()=>ql,optimizationError:()=>bx,orderedPairAccessTypeError:()=>vh,parameterAlreadyDefined:()=>Uc,pdfWrongArity:()=>ab,percentMissingOf:()=>Fx,piecewiseBranchTypeError:()=>qh,piecewiseConditionTypeError:()=>vd,piecewiseMissingCondition:()=>Bb,piecewisePartMissingCondition:()=>zb,pointTypeError:()=>Dh,pointsUnsupported:()=>Xu,polygonTwoNumbersError:()=>tp,polygonUnsupportedIn3d:()=>em,primeWithoutParen:()=>Bd,primedFunctionArity:()=>Hu,productArgumentTypeError:()=>Vh,productInfiniteBoundError:()=>Dd,productLowerBoundTypeError:()=>wh,productMissingBody:()=>Ax,productMissingBound:()=>Ix,productUpperBoundTypeError:()=>Fh,randomArity:()=>pb,randomFromBroadcastDistribution:()=>fb,regressionTypeError:()=>Xh,regressionsUnsupported:()=>Yu,selfReferentialFunction:()=>op,setLogInternalErrors:()=>hh,shadowedIndex:()=>Hd,shadowedIntegrationVariable:()=>jd,shadowedListComprehensionInput:()=>nm,singleVariableImplicitEquationsDisabled:()=>px,singularInverse:()=>vC,sliderLimitReferencesExport:()=>Xb,sliderMaxInvalid:()=>$b,sliderMaxLessThanMin:()=>Wb,sliderMinInvalid:()=>Zb,sliderStepInvalid:()=>Jb,substitutionAmbiguousComma:()=>qa,substitutionBodyAction:()=>zC,substitutionBodyDependsOnRegression:()=>Wx,substitutionDuplicateSymbol:()=>Jx,substitutionFunctionLHS:()=>$c,substitutionIllegalLHS:()=>Zc,substitutionInvalidAssignments:()=>$x,substitutionLocalLHS:()=>hp,substitutionNested:()=>im,substitutionTypeError:()=>BC,substitutionUnsupportedInterval:()=>sm,subtractTypeError:()=>Ph,sumArgumentTypeError:()=>Lh,sumInfiniteBoundError:()=>Md,sumLowerBoundTypeError:()=>Ch,sumMissingBody:()=>Nx,sumMissingBound:()=>Tx,sumUpperBoundTypeError:()=>_h,superscriptWithPrime:()=>Ab,tableCycleWithoutGlobalDefinition:()=>kb,tableEntryTypeError:()=>Yh,tableHeaderTypeError:()=>kh,tdistWrongArity:()=>lb,threeDLengthTypeError:()=>Nh,tickerMinStepNonNegativeNumber:()=>Yb,tokenWithSubscript:()=>Pb,tooManyArguments:()=>Ld,tooManyVariables:()=>tr,transformationDefinitionTypeError:()=>Oh,transformationTypeError:()=>Sh,ttestListTooShort:()=>Xc,unaryOperatorMissingLeft:()=>Ib,unaryOperatorMissingRight:()=>Eb,unexpectedInequality:()=>bh,unexpectedPrime:()=>Gd,unexpectedSubscript:()=>Nb,unexpectedSymbol:()=>On,unplottablePolarFunction:()=>cx,unrecognizedSymbol:()=>Id,updateRuleFunctionLHS:()=>Od,updateRuleIllegalLHS:()=>jh,updateRuleLocalLHS:()=>Sd,updateRuleNonIdentifierLHS:()=>$h,updateRuleTypeError:()=>Zh,updateRuleUndefinedLHS:()=>Jh,useRForCylindricalCoordinates:()=>ix,useRhoForSphericalCoordinates:()=>nx,variableAsFunction:()=>Wd,variableLengthDistributionList:()=>gp,variableLengthProductBodyDependsOnIndex:()=>Zx,variableLengthSumBodyDependsOnIndex:()=>Xx,variableLengthTopLevelList:()=>Yx,variableSeed:()=>Qd,variableUnsupported:()=>tm,variablesUnsupported:()=>fp,writeIntegral:()=>Kd,wrongArity:()=>is,wrongDoubleReducerArity:()=>rp,wrongParameterizedReducerArity:()=>mb,zeroArgReducer:()=>yb});var JE=!1;function hh(e){JE=e}function WE(...e){JE&&console.error(...e)}function te(e){if(WE){let t=e instanceof Error?e:new Error(`${e}`);WE(t.stack)}return new R(v(\"shared-calculator-error-parse-error\"))}function ql(){return new R(v(\"shared-calculator-error-parse-error\"))}function Id(e){return e=J(e),new R(v(\"shared-calculator-error-unrecognized-symbol\",{symbol:e}))}function bh(){return new R(v(\"shared-calculator-error-unexpected-inequality\"))}function On(e){return e=J(e),new R(v(\"shared-calculator-error-unexpected-symbol\",{symbol:e}))}function xh(e){return new R(v(\"shared-calculator-error-add-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function Ph(e){return new R(v(\"shared-calculator-error-subtract-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function kl(e){return new R(v(\"shared-calculator-error-multiply-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function Yl(e){return new R(v(\"shared-calculator-error-multiply-type-error-cross\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function Xl(e){return new R(v(\"shared-calculator-error-multiply-type-error-2d\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function Zl(e){return new R(v(\"shared-calculator-error-multiply-type-error-3d\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function Th(e){return new R(v(\"shared-calculator-error-divide-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function Ih(e){return new R(v(\"shared-calculator-error-exponent-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function Eh(e){return new R(v(\"shared-calculator-error-negative-type-error\",{symbol:e[0]})).allowExport()}function Mh(e){return new R(v(\"shared-calculator-error-comparator-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function Ed(e){return new R(v(\"shared-calculator-error-and-type-error\",{symbol:\"and\",symbol1:e[0],symbol2:e[1]})).allowExport()}function Bu(e){return new R(v(\"shared-calculator-error-list-type-error\",{symbol1:e[0]})).allowExport()}function Dh(e){return new R(v(\"shared-calculator-error-point-type-error\",{symbol1:e,symbol2:le(N)})).allowExport()}function $l(e){return new R(v(\"shared-calculator-error-index-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function vh(e){return new R(v(\"shared-calculator-error-ordered-pair-access-type-error\",{symbol:e[0]})).allowExport()}function Oi(e,t){switch(t.length){case 1:return new R(v(\"shared-calculator-error-function-type-error-1\",{fn:J(e),arg:t[0]})).allowExport();case 2:return new R(v(\"shared-calculator-error-function-type-error-2\",{fn:J(e),arg1:t[0],arg2:t[1]})).allowExport();default:return new R(v(\"shared-calculator-error-function-type-error-many\",{fn:J(e)})).allowExport()}}var gh={translate:\"translation\",rotate:\"rotation\",dilate:\"dilation\",reflect:\"reflection\"};function Oh(e,t,r){let n=[];if(!Array.isArray(r))return Oi(e,t);for(let s=1;s<r.length;s++){let o=r[s];typeof o==\"number\"?n.push(le(o)):n.push(le(o.types[0]))}let i=\"\";switch(n.length){case 1:i=v(t.length>n.length?\"shared-calculator-error-transformation-definition-expected-types-use-fewer-1\":\"shared-calculator-error-transformation-definition-expected-types-1\",{arg:n[0]});break;case 2:i=v(t.length>n.length?\"shared-calculator-error-transformation-definition-expected-types-use-fewer-2\":\"shared-calculator-error-transformation-definition-expected-types-2\",{arg1:n[0],arg2:n[1]});break}switch(t.length){case 1:return new R(v(t.length<n.length?\"shared-calculator-error-transformation-definition-type-error-use-more-1\":\"shared-calculator-error-transformation-definition-type-error-1\",{fn:J(gh[e]),arg:t[0],expectedTypeMessage:i}));case 2:return new R(v(t.length<n.length?\"shared-calculator-error-transformation-definition-type-error-use-more-2\":\"shared-calculator-error-transformation-definition-type-error-2\",{fn:J(gh[e]),arg1:t[0],arg2:t[1],expectedTypeMessage:i}));default:return new R(v(\"shared-calculator-error-transformation-definition-type-error-many\",{fn:J(gh[e])}))}}function Sh(e,t){switch(t.length){case 1:return new R(v(\"shared-calculator-error-transformation-type-error-1\",{fn:J(e),arg:t[0]})).allowExport();case 2:return new R(v(\"shared-calculator-error-transformation-type-error-2\",{fn:J(e),arg1:t[0],arg2:t[1]})).allowExport();default:return new R(v(\"shared-calculator-error-transformation-type-error-many\",{fn:J(e)})).allowExport()}}function Rh(e,t){let r=J(e),n=J(\"count\");return new R(v(\"shared-calculator-error-geometry-length-type-error\",{fn:r,alternativeFn:n,arg:t})).allowExport()}function Nh(e,t){let r=J(e),n=J(\"count\");return new R(v(\"shared-calculator-error-3d-length-type-error\",{fn:r,alternativeFn:n,arg:t})).allowExport()}function Wl(e){return new R(v(\"shared-calculator-error-illegal-dot-call\",{symbol:J(e)}))}function Ah(e,t){return new R(v(\"shared-calculator-error-dot-lhs-type-error\",{symbol:J(e),type:t})).allowExport()}function Ch(e){return new R(v(\"shared-calculator-error-sum-lower-bound-type-error\",{symbol:e[0]})).allowExport()}function _h(e){return new R(v(\"shared-calculator-error-sum-upper-bound-type-error\",{symbol:e[0]})).allowExport()}function Md(){return new R(v(\"shared-calculator-error-sum-infinite-bound-type-error\"))}function Lh(e){return new R(v(\"shared-calculator-error-sum-argument-type-error\",{symbol:e[0]})).allowExport()}function wh(e){return new R(v(\"shared-calculator-error-product-lower-bound-type-error\",{symbol:e[0]})).allowExport()}function Fh(e){return new R(v(\"shared-calculator-error-product-upper-bound-type-error\",{symbol:e[0]})).allowExport()}function Dd(){return new R(v(\"shared-calculator-error-product-infinite-bound-type-error\"))}function Vh(e){return new R(v(\"shared-calculator-error-product-argument-type-error\",{symbol:e[0]})).allowExport()}function Gh(e){return new R(v(\"shared-calculator-error-integral-lower-bound-type-error\",{symbol:e[0]})).allowExport()}function Bh(e){return new R(v(\"shared-calculator-error-integral-upper-bound-type-error\",{symbol:e[0]})).allowExport()}function zh(e){return new R(v(\"shared-calculator-error-integral-argument-type-error\",{symbol:e[0]})).allowExport()}function Hh(e){return new R(v(\"shared-calculator-error-derivative-type-error\",{symbol:e[0]})).allowExport()}function Uh(e,t){return new R(v(\"shared-calculator-error-derivative-variable-type-error\",{symbol1:J(e),symbol2:t[0]}))}function vd(e){return new R(v(\"shared-calculator-error-piecewise-condition-type-error\",{symbol1:le(ge),symbol2:e[0]})).allowExport()}function qh(e){return new R(v(\"shared-calculator-error-piecewise-branch-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function kh(e){return new R(v(\"shared-calculator-error-table-header-type-error\",{symbol:e[0]}))}function Yh(e){return new R(v(\"shared-calculator-error-table-entry-type-error\",{symbol:e[0]}))}function Xh(e){return new R(v(\"shared-calculator-error-regression-type-error\",{symbol1:e[0],symbol2:e[1]}))}function Zh(e){return new R(v(\"shared-calculator-error-update-rule-type-error\",{symbol:e}))}function $h(){return new R(v(\"shared-calculator-error-update-rule-non-identifier-lhs\",{arrow:\"\\u2192\",example:\"a\"}))}function Wh(e){return new R(v(\"shared-calculator-error-duplicate-update-rules\",{symbol:J(e)}))}function Jh(e){return new R(v(\"shared-calculator-error-update-rule-undefined-lhs\",{symbol:J(e)}))}function jh(e){return new R(v(\"shared-calculator-error-update-rule-illegal-lhs\",{symbol:J(e)}))}function Od(e){return new R(v(\"shared-calculator-error-update-rule-function-lhs\",{symbol:J(e)}))}function Sd(e){return new R(v(\"shared-calculator-error-update-rule-local-lhs\",{symbol:J(e)}))}function Qh(e){let t=e.filter(r=>r.scope===\"free\").map(r=>r.symbol);return new R(v(\"shared-calculator-error-action-merge-free-variable\",{symbol:J(t[0]||\"\")})).setDependencies(t).allowExport()}function Jl(e){return new R(v(\"shared-calculator-error-event-handler-type-error\",{example:\"a\\u2192a+1\"}))}function jl(){return new R(v(\"shared-calculator-error-heterogeneous-list\")).allowExport()}function Rd(e){return new R(v(\"shared-calculator-error-combine-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function Ql(e){return new R(v(\"shared-calculator-error-log-scale-type-error\",{symbol:e})).allowExport()}function Kh(){return new R(v(\"shared-calculator-error-log-scale-histogram\"))}function eb(){return new R(v(\"shared-calculator-error-log-scale-dot-plot\"))}function tb(){return new R(v(\"shared-calculator-error-log-scale-box-plot\"))}function rb(){return new R(v(\"shared-calculator-error-deeply-nested\")).allowExport()}function Nd(){return new R(v(\"shared-calculator-error-3d-equality-and-other-restriction\")).allowExport()}function Go(){return new R(v(\"shared-calculator-error-3d-bad-equality-slice\")).allowExport()}function zu(e){return new R(v(\"shared-calculator-error-gpu-variable-list-length\",{symbol:J(e.filter(t=>t.symbol!==\"globalRandomSeed\")[0].symbol)}))}function Ad(e){return new R(v(\"shared-calculator-error-gpu-variable-sum\",{symbol:J(e[0].symbol)}))}function Cd(e){return new R(v(\"shared-calculator-error-gpu-variable-product\",{symbol:J(e[0].symbol)}))}function Kl(e){return new R(v(\"shared-calculator-error-gpu-function-unsupported\",{symbol:J(e)}))}function _d(){return new R(v(\"shared-calculator-error-gpu-integral-unsupported\"))}function nb(){return new R(v(\"shared-calculator-error-gpu-long-sum\",{maxTermCount:1e3.toLocaleString()}))}function ib(){return new R(v(\"shared-calculator-error-gpu-long-product\",{maxTermCount:1e3.toLocaleString()}))}function Hc(){return new R(v(\"shared-calculator-error-gpu-max-list-size\",{maxListSize:100 .toLocaleString()}))}function ep(){return new R(v(\"shared-calculator-error-max-list-size\",{maxListSize:1e4.toLocaleString()})).allowExport()}function tp(){return new R(v(\"shared-calculator-error-two-numbers-error\"))}function sb(){return new R(v(\"shared-calculator-error-boxplot-offset-invalid\"))}function ob(){return new R(v(\"shared-calculator-error-boxplot-breadth-invalid\"))}function Ld(e,t){return new R(v(\"shared-calculator-error-too-many-arguments\",{symbol:e,max:t}))}function ab(){var e=v(\"shared-calculator-error-pdf-wrong-arity-recommendation\"),t=v(\"shared-calculator-error-pdf-wrong-arity\",{recommendation:e});return new R(t)}function ub(){var e=v(\"shared-calculator-error-cdf-wrong-arity-recommendation\"),t=v(\"shared-calculator-error-cdf-wrong-arity\",{recommendation:e});return new R(t)}function cb(){var e=v(\"shared-calculator-error-cdf-too-many-arguments-recommendation\"),t=v(\"shared-calculator-error-cdf-too-many-arguments\",{recommendation:e});return new R(t)}function lb(){return new R(v(\"shared-calculator-error-tdist-wrong-arity\"))}function pb(){return new R(v(\"shared-calculator-error-random-arity\"))}function fb(){return new R(v(\"shared-calculator-error-random-from-broadcast-distribution\"))}function db(e){var t=e===\"rgb\"?[150,30,100]:[180,.5,.5],r=v(\"shared-calculator-error-color-arity-recommendation\",{recommendation:J(e)+\"(\"+t.join(\", \")+\")\"}),n=v(\"shared-calculator-error-color-arity\",{symbol:e,recommendation:r});return new R(n)}function is(e,t,r,n){e=J(e);var i,s;if(t===1)n||(n=e+\"(x)\"),s=v(\"shared-calculator-error-wrong-arity-supplement\",{recommendation:n}),r>1?i=v(\"shared-calculator-error-wrong-arity-single-arg-too-many\",{dependency:e,supplement:s}):i=v(\"shared-calculator-error-wrong-arity-single-arg-too-few\",{dependency:e,supplement:s});else{var o=[];if(!n){for(var a=0;a<t;a++)o[a]=a+1;n=J(e)+\"(\"+o.join(\", \")+\")\"}s=v(\"shared-calculator-error-wrong-arity-supplement\",{recommendation:n}),i=v(\"shared-calculator-error-wrong-arity-many-arg\",{dependency:e,assignment_arity:t,supplement:s})}return new R(i)}function mb(e){return new R(v(\"shared-calculator-error-wrong-two-arg-arity\",{symbol:J(e),recommendation:J(e)+\"([1,2,3], 1)\"}))}function rp(e){return new R(v(\"shared-calculator-error-wrong-two-arg-arity\",{symbol:J(e),recommendation:J(e)+\"([1,2,3], [3,2,1])\"}))}function Hu(){return new R(v(\"shared-calculator-error-primed-function-arity\"))}function yb(e){return new R(v(\"shared-calculator-error-zero-arg-reducer\",{symbol:J(e)}))}function gb(){return new R(v(\"shared-calculator-error-malformed-point\"))}function hb(){return new R(v(\"shared-calculator-error-malformed-list\"))}function bb(e){return new R(v(\"shared-calculator-error-bad-tuple-dimensions\",{symbol:e}))}function wd(e){return e=J(e),new R(v(\"shared-calculator-error-bad-implicit-call\",{symbol:e}))}function xb(e,t){return new R(v(\"shared-calculator-error-adjacent-numbers\",{left:e,right:t}))}function Fd(e){return new R(v(\"shared-calculator-error-adjacent-mixed-number\",{mixedNumber:e}))}function Pb(){return new R(v(\"shared-calculator-error-token-with-subscript\"))}function Tb(e){return e=J(e),new R(v(\"shared-calculator-error-identifier-as-function\",{symbol:e}))}function np(e){return e=J(e),e===\"%\"&&(e=\"% of\"),new R(v(\"shared-calculator-error-binary-operator-missing-operand\",{symbol:e}))}function Ib(e){return e=J(e),new R(v(\"shared-calculator-error-unary-operator-missing-left\",{symbol:e}))}function Eb(e){return e=J(e),new R(v(\"shared-calculator-error-unary-operator-missing-right\",{symbol:e}))}function Mb(){return new R(v(\"shared-calculator-error-fraction-missing-numerator\"))}function Db(){return new R(v(\"shared-calculator-error-fraction-missing-denominator\"))}function vb(){return new R(v(\"shared-calculator-error-fraction-empty\"))}function Vd(){return new R(v(\"shared-calculator-error-empty-subscript\"))}function Ob(){return new R(v(\"shared-calculator-error-empty-superscript\"))}function Sb(e){return e=J(e),new R(v(\"shared-calculator-error-invalid-subscript\",{symbol:e}))}function Rb(){return new R(v(\"shared-calculator-error-invalid-operator-name\"))}function Nb(){return new R(v(\"shared-calculator-error-unexpected-subscript\"))}function Ab(){return new R(v(\"shared-calculator-error-superscript-with-prime\"))}function Gd(){return new R(v(\"shared-calculator-error-unexpected-prime\"))}function Bd(){return new R(v(\"shared-calculator-error-prime-without-paren\"))}function Cb(){return new R(v(\"shared-calculator-error-empty-radical\"))}function _b(){return new R(v(\"shared-calculator-error-empty-radical-index\"))}function Lb(){return new R(v(\"shared-calculator-error-empty-paren\"))}function wb(){return new R(v(\"shared-calculator-error-empty-square-bracket\"))}function Fb(){return new R(v(\"shared-calculator-error-empty-pipe\"))}function Vb(e){var t=e+\"^2\",r=e+\"^-1\";return new R(v(\"shared-calculator-error-bad-trig-exponent\",{form1:t,form2:r}))}function Gb(e){var t=e+\"^2\";return new R(v(\"shared-calculator-error-bad-log-exponent\",{form:t}))}function ip(){return new R(v(\"shared-calculator-error-inequality-chain-too-long\"))}function Bb(){return new R(v(\"shared-calculator-error-piecewise-missing-condition\"))}function zb(){return new R(v(\"shared-calculator-error-piecewise-part-missing-condition\"))}function Hb(){return new R(v(\"shared-calculator-error-colon-missing-condition\"))}function sp(){return new R(v(\"shared-calculator-error-blank-expression\"))}function zd(e){return e=J(e),new R(v(\"shared-calculator-error-function-not-defined\",{dependency:e}))}function Uc(e){return e=J(e),new R(v(\"shared-calculator-error-parameter-already-defined\",{dependency:e}))}function qc(e,t){return e=J(e),t===void 0?new R(v(\"shared-calculator-error-cannot-redefine\",{symbol:e})):new R(v(\"shared-calculator-error-cannot-redefine-root\",{symbol:e,symbolRoot:t}))}function Ub(e){return e=J(e),new R(v(\"shared-calculator-error-cannot-subscript\",{symbol:e}))}function kc(e){return e=J(e),new R(v(\"shared-calculator-error-multiply-defined\",{dependency:e}))}function qb(e){let t=kc(e);return t.isMultiplyDefinedByTables=!0,t}function Hd(e){return e=J(e),new R(v(\"shared-calculator-error-shadowed-index\",{symbol:e}))}function Ud(e){e=e.map(J);var t=e.pop()||\"\";return new R(v(\"shared-calculator-error-dependency-cycle\",{symbols:e.join(\"', '\"),lastSymbol:t}))}function kb(e){let t=Ud(e);return t.isTableCycleWithoutGlobalDefinition=!0,t}function op(e){return new R(v(\"shared-calculator-error-self-referential-function\",{symbol:J(e)}))}function Yb(){return new R(v(\"shared-calculator-error-ticker-min-step-nonnegative\"))}function Xb(e){return new R(v(\"shared-calculator-error-slider-limit-references-export\",{symbol:J(e)}))}function Zb(){return new R(v(\"shared-calculator-error-slider-min-invalid\"))}function $b(){return new R(v(\"shared-calculator-error-slider-max-invalid\"))}function Wb(){return new R(v(\"shared-calculator-error-slider-max-less-than-min\"))}function Jb(){return new R(v(\"shared-calculator-error-slider-step-invalid\"))}function jb(){return new R(v(\"shared-calculator-error-domain-min-invalid\"))}function Qb(){return new R(v(\"shared-calculator-error-domain-max-invalid\"))}function Kb(){return new R(v(\"shared-calculator-error-domain-max-less-than-min\"))}function ex(){return new R(v(\"shared-calculator-error-cdf-min-invalid\"))}function tx(){return new R(v(\"shared-calculator-error-cdf-max-invalid\"))}function rx(){return new R(v(\"shared-calculator-error-cdf-max-less-than-min\"))}function nx(){return new R(v(\"shared-calculator-error-use-rho-for-spherical-coordinates\"))}function ix(){return new R(v(\"shared-calculator-error-use-r-for-cylindrical-coordinates\"))}function qd(){return new R(v(\"shared-calculator-error-cant-combine-spherical-and-cylindrical\"))}function tr(e){if(e=e.map(J),e.length===0)return new R(v(\"shared-calculator-error-too-many-variables-no-symbols\"));var t=e.pop()||\"\";return e.length>0?new R(v(\"shared-calculator-error-too-many-variables-many-symbols\",{variables:e.join(\"', '\"),lastVariable:t})):new R(v(\"shared-calculator-error-too-many-variables-one-symbol\",{variable:t}))}function sx(e){return new R(v(\"shared-calculator-error-cannot-restrict\",{variable:J(e)}))}function ox(e){return new R(v(\"shared-calculator-error-cannot-assign-color\",{variable:J(e)}))}function ax(e){return new R(v(\"shared-calculator-error-cannot-restrict-with-equality\",{variable:J(e)}))}function ap(e,t,r){e=e.map(J),t=J(t),r=r.map(J);var n=t+\"(\"+r.join(\",\")+\",\"+e.join(\",\")+\")\",i=e.pop()||\"\",s={symbols:e.join(\"', '\"),lastSymbol:i,newSignature:n};return e.length?new R(v(\"shared-calculator-error-add-arguments-to-definition-many\",s)):new R(v(\"shared-calculator-error-add-arguments-to-definition-one\",s))}function ux(e){return e=J(e),new R(v(\"shared-calculator-error-invalid-lhs\",{symbol:e}))}function cx(){return new R(v(\"shared-calculator-error-unplottable-polar-function\"))}function lx(){return new R(v(\"shared-calculator-error-invalid-inequality-variables\"))}function Uu(){return new R(v(\"shared-calculator-error-invalid-implicit-variables\"))}function px(){return new R(v(\"shared-calculator-error-single-variable-implicit-equations-disabled\"))}function fx(){return new R(v(\"shared-calculator-error-implicits-disabled\"))}function kd(){return new R(v(\"shared-calculator-error-inequalities-disabled\"))}function dx(){return new R(v(\"shared-calculator-error-complicated-polar-implicit\"))}function Yd(){return new R(v(\"shared-calculator-error-invalid-double-inequality-3d\"))}function Xd(){return new R(v(\"shared-calculator-error-invalid-double-inequality-variables\"))}function mx(){return new R(v(\"shared-calculator-error-mismatched-double-inequality\",{example:\"1 < y < 2\"}))}function Zd(){return new R(v(\"shared-calculator-error-complicated-double-inequality\"))}function $d(e){return e?(e=J(e),new R(v(\"shared-calculator-error-equation-required-symbol\",{lhs:e+\"=\"}))):new R(v(\"shared-calculator-error-equation-required\"))}function Wd(e){return e=J(e),new R(v(\"shared-calculator-error-variable-as-function\",{dependency:e}))}function Jd(e){return e=J(e),new R(v(\"shared-calculator-error-distribution-as-function\",{symbol:e}))}function yx(e){return new R(v(\"shared-calculator-error-invalid-table-header\",{supplement:e}))}function Yc(e){return new R(v(\"shared-calculator-error-invalid-table-entry\",{supplement:e}))}function gx(){return new R(v(\"shared-calculator-error-invalid-first-table-column\",{most:\"'y', 'r',\",last:\"'\\u03B8'\"}))}function TC(){return new R(v(\"shared-calculator-error-invalid-dependent-first-table-column\"))}function hx(e){return new R(v(\"shared-calculator-error-invalid-regression-parameter\",{symbol:J(e)}))}function bx(){return new R(v(\"shared-calculator-error-optimization-error\"))}function up(e){return new R(v(\"shared-calculator-error-non-list-double-reducer\",{symbol:J(e),recommendation:J(e)+\"([1,2,3], [3,2,1])\"})).allowExport()}function xx(e){return new R(v(\"shared-calculator-error-non-list-parameterized-reducer\",{symbol:J(e),recommendation:J(e)+\"([1,2,3], 1)\"})).allowExport()}function Ms(e){return new R(v(\"shared-calculator-error-method-requires-list\",{symbol:J(e),recommendation:J(e)+\"([1,2,3])\"})).allowExport()}function IC(e,t){return new R(v(\"shared-calculator-error-variable-function-free-variable\",{functionSymbol:e,variableSymbol:t})).allowExport()}function cp(){return new R(v(\"shared-calculator-error-non-arithmetic-range\")).allowExport()}function Px(){return new R(v(\"shared-calculator-error-invalid-half-empty-range\"))}function Tx(){return new R(v(\"shared-calculator-error-sum-missing-bound\"))}function Ix(){return new R(v(\"shared-calculator-error-product-missing-bound\"))}function Ex(){return new R(v(\"shared-calculator-error-incorrect-sum-lower-bound\"))}function Mx(){return new R(v(\"shared-calculator-error-incorrect-product-lower-bound\"))}function Dx(e){return new R(v(\"shared-calculator-error-bad-sum-bound-dependency\",{symbol:J(e)}))}function vx(e){return new R(v(\"shared-calculator-error-bad-product-bound-dependency\",{symbol:J(e)}))}function Ox(){return new R(v(\"shared-calculator-error-integral-missing-bound\"))}function Sx(){return new R(v(\"shared-calculator-error-integral-missing-differential\"))}function Rx(){return new R(v(\"shared-calculator-error-differential-with-superscript\"))}function Nx(){return new R(v(\"shared-calculator-error-sum-missing-body\"))}function Ax(){return new R(v(\"shared-calculator-error-product-missing-body\"))}function Cx(){return new R(v(\"shared-calculator-error-integral-missing-body\"))}function _x(){return new R(v(\"shared-calculator-error-derivative-missing-body\"))}function Lx(e,t){return e=J(e),t=J(t),new R(v(\"shared-calculator-error-mismatched-braces\",{symbol1:e,symbol2:t}))}function jd(e){return new R(v(\"shared-calculator-error-shadowed-integration-variable\",{symbol:J(e)}))}function wx(e){return new R(v(\"shared-calculator-error-bad-integral-bound-dependency\",{symbol:J(e)}))}function Fx(){return new R(v(\"shared-calculator-error-percent-missing-of\"))}function lp(e){return e=J(e),new R(v(\"shared-calculator-error-illegal-bin-width\",{symbol:e}))}function Xc(e){return e=J(e),new R(v(\"shared-calculator-error-ttest-list-too-short\",{symbol:e}))}function Vx(){return new R(v(\"shared-calculator-error-bad-sample-size\"))}function Qd(e){return new R(v(\"shared-calculator-error-variable-seed\",{symbol:J(e[0].symbol)})).setDependencies(e.filter(t=>t.scope===\"free\").map(t=>t.symbol)).allowExport()}function pp(e){return new R(v(\"shared-calculator-error-bad-symbol-context\",{symbol:J(e)}))}function Kd(){return new R(v(\"shared-calculator-error-write-integral\",{command:\"integral\",symbol:\"\\u222B\"}))}function Gx(){return new R(v(\"shared-calculator-error-ans-undefined\"))}function fp(e){return new R(v(\"shared-calculator-error-variables-unsupported\",{variable:J(e)}))}function em(){return new R(v(\"shared-calculator-error-polygon-unsupported-in-3d\"))}function ss(e,t=!1){return t&&e===\"polygon\"?em():new R(v(\"shared-calculator-error-function-unsupported\",{symbol:J(e)}))}function Bx(){return new R(v(\"shared-calculator-error-logbase-unsupported\"))}function qu(e){return new R(v(\"shared-calculator-error-constant-unsupported\",{symbol:J(e)}))}function tm(e){return new R(v(\"shared-calculator-error-variable-unsupported\",{symbol:J(e)}))}function zx(e){return new R(v(\"shared-calculator-error-variable-invalid-function-name\",{symbol:J(e)}))}function dp(){return new R(v(\"shared-calculator-error-assignments-unsupported\"))}function mp(){return new R(v(\"shared-calculator-error-function-definition-unsupported\"))}function ha(){return new R(v(\"shared-calculator-error-equations-unsupported\"))}function ku(){return new R(v(\"shared-calculator-error-inequalities-unsupported\"))}function Yu(){return new R(v(\"shared-calculator-error-regressions-unsupported\"))}function Xu(){return new R(v(\"shared-calculator-error-points-unsupported\"))}function yp(){return new R(v(\"shared-calculator-error-feature-unavailable\"))}function rm(){return new R(v(\"basic-calculator-error-fractions-unavailable\"))}function EC(){return new R(v(\"shared-calculator-error-non-square-determinant\"))}function MC(){return new R(v(\"shared-calculator-error-non-square-trace\"))}function DC(){return new R(v(\"shared-calculator-error-non-square-inverse\"))}function vC(){return new R(v(\"shared-calculator-error-non-singular-inverse\"))}function OC(e){return new R(v(\"shared-calculator-error-clickable-object-assignment-not-defined\",{symbol:e}))}function SC(e){return new R(v(\"shared-calculator-error-multiply-defined\",{dependency:e}))}function RC(){return new R(v(\"shared-calculator-error-clickable-object-assignment-not-identifier\"))}function NC(){return new R(v(\"shared-calculator-error-clickable-object-invalid-expression\"))}function AC(){return new R(v(\"shared-calculator-error-matrix-assignment\"))}function CC(){return new R(v(\"shared-calculator-error-matrix-add-dimensions\"))}function _C(){return new R(v(\"shared-calculator-error-matrix-subtract-dimensions\"))}function LC(){return new R(v(\"shared-calculator-error-matrix-multiply-dimensions\"))}function wC(){return new R(v(\"shared-calculator-error-matrix-fractional-power\"))}function FC(){return new R(v(\"shared-calculator-error-matrix-power-dimensions\"))}function VC(e){return new R(v(\"shared-calculator-error-matrix-element-type-error\",{arg:e[0]}))}function GC(e){return new R(v(\"shared-calculator-error-matrix-invalid-variable\",{symbol:J(e)}))}function Hx(e,t,r){let n=\"[1...10]\";return r&&!/[\\\\]/.test(r)&&(n=`[${r}]`),new R(v(\"shared-calculator-error-list-comprehension-input-type-error\",{identifier:e,actual:t,example:n})).allowExport()}function Ux(){return new R(v(\"shared-calculator-error-incorrect-list-comprehension-input\"))}function nm(e){return e=J(e),new R(v(\"shared-calculator-error-shadowed-list-comprehension-input\",{symbol:e}))}function qx(e){return e=J(e),new R(v(\"shared-calculator-error-bad-for-input-list-dependency\",{symbol:e}))}function kx(e){return e=J(e),new R(v(\"shared-calculator-error-bad-for-interval-dependency\",{symbol:e}))}function Yx(e){let t=e.filter(r=>r.scope===\"free\").map(r=>r.symbol);return new R(v(\"shared-calculator-error-variable-length-top-level-list\",{symbol:J(t[0]||\"\")})).setDependencies(t).allowExport()}function gp(e){return new R(v(\"shared-calculator-error-variable-length-distribution-list\",{symbol:e[0].symbol})).setDependencies(e.filter(t=>t.scope===\"free\").map(t=>t.symbol))}function Xx(e){return new R(v(\"shared-calculator-error-variable-length-sum-body-depends-on-index\",{symbol:e}))}function Zx(e){return new R(v(\"shared-calculator-error-variable-length-product-body-depends-on-index\",{symbol:e}))}function BC(e,t){return new R(v(\"shared-calculator-error-substitution-type-error\",{actual:le(e),expected:le(t)}))}function $x(){return new R(v(\"shared-calculator-error-substitution-invalid-assignments\"))}function hp(e){return new R(v(\"shared-calculator-error-substitution-local-lhs\",{symbol:J(e)}))}function Zc(e){return new R(v(\"shared-calculator-error-substitution-illegal-lhs\",{symbol:J(e)}))}function $c(e){return new R(v(\"shared-calculator-error-substitution-function-lhs\",{symbol:J(e)}))}function Wx(e,t){return new R(v(\"shared-calculator-error-substitution-body-regression-parameter-dependency\",{symbol:J(e),operator:t}))}function zC(){return new R(v(\"shared-calculator-error-substitution-body-action\"))}function im(){return new R(v(\"shared-calculator-error-substitution-nested\"))}function qa(e){return new R(v(\"shared-calculator-error-substitution-ambiguous-comma\",{operation:e}))}function Jx(e){return new R(v(\"shared-calculator-error-substitution-duplicate-assignment\",{symbol:J(e)}))}function jx(){return new R(v(\"shared-calculator-error-depends-on-deleted-geo-object\"))}function Qx(e){return new R(v(\"shared-calculator-error-invalid-interval-comprehension-return-type\",{type:le(e)}))}function Kx(e,t){return new R(v(\"shared-calculator-error-bad-interval-comprehension-arity\",{type:le(e),count:t}))}function bp(e){return new R(v(\"shared-calculator-error-invalid-interval-comprehension-invalid-bound\",{identifier:e}))}function eP(){return new R(v(\"shared-calculator-error-nested-interval-comprehension\"))}function sm(){return new R(v(\"shared-calculator-error-substitution-unsupported-interval\"))}var ba=class extends Pt{constructor(r,n,i){super();this.isFunction=!0;this._symbol=r._symbol,this._argSymbols=n.map(function(s){return s._symbol}),this._exports=[this._symbol],this._expression=i,this.mergeDependenciesInScope(this.type,[this._symbol].concat(this._argSymbols),this._expression,{functionDefinitionSymbol:this._symbol})}getConcreteInvocationTree(r,n,i,s){if(i.length!==this._argSymbols.length)throw is(s,this._argSymbols.length,i.length);for(var o=Object.create(n),a=0;a<this._argSymbols.length;a++)o[this._argSymbols[a]]=i[a];return this._expression.getConcreteTree(r,o)}getSliderVariables(r,n){var i=this._argSymbols;return super.getSliderVariables(r,n).filter(function(s){return i.indexOf(s)===-1})}asEquation(){var r=this._argSymbols.map(function(i){return new Tt(i)}),n=new Vo(new Cr(new Tt(this._symbol),r),this._expression);return n.userData=this.userData,n.metaData=this.metaData,n}};var om=class extends Pt{constructor(r,n){super();this.isRegression=!0;this._lhs=r,this.isLhsSimple=r instanceof Tt,this._logLhs=new Cr(\"ln\",[r]),this._rhs=n,this._difference=new Es([r,n]),this._logDifference=new Es([new Cr(\"ln\",[r]),new Cr(\"ln\",[n])]),this.mergeDependencies(r,n)}exportTo(r,n,i){if(!n.isError){for(var s in n.parameters)n.parameters.hasOwnProperty(s)&&(r.assignmentForbidden(s)||(i[s]=i[s]?kc(s):n.parameters[s]));r.assignmentForbidden(n.residualVariable)||(i[n.residualVariable]=n.residuals)}}getSliderVariables(){return[]}};var am=class extends Pt{constructor(r,n){super();this.isImage=!0;this.center=r.center,this.radianAngle=r.radianAngle,this.width=r.width,this.height=r.height,this.opacity=r.opacity,this.moveStrategy=n,this.mergeDependencies(this.center,this.radianAngle,this.width,this.height,this.opacity)}};var um=class extends Pt{constructor(r){super();this.handler=r.handler,this.minStep=r.minStep,this.mergeDependencies(this.handler),this.mergeDependencies(this.minStep)}};var cm=class extends ga{constructor(r,n){super(new Tt(r._symbol),r._expression);this.isSlider=!0;this.setInputSpan(r._inputSpan),this.sliderAssignment=r,this.sliderMin=n.sliderMin,this.sliderMax=n.sliderMax,this.sliderSoftMin=n.sliderSoftMin,this.sliderSoftMax=n.sliderSoftMax,this.sliderStep=n.sliderStep,this.sliderIsPlayingOnce=n.sliderIsPlayingOnce,this.sliderMin&&this.mergeDependencies(this.sliderMin),this.sliderMax&&this.mergeDependencies(this.sliderMax),this.sliderStep&&this.mergeDependencies(this.sliderStep)}shouldPromoteToSlider(r){return!1}asAssignment(){return new ga(this._symbol,this._expression)}};var lm=class extends j{constructor(r){let n=new Gr(r);super([n]);this._constantNode=n}asValue(){return this._constantNode.asValue()}asCompilerValue(){return this._constantNode.asCompilerValue()}};var pm=class extends Pt{constructor(r){super();this.exportPenalty=1;this.isTable=!0;this.columns=r,this.mergeDependencies.apply(this,r)}getExports(r){let n=[];for(var i=0;i<this.columns.length;i++)Array.prototype.push.apply(n,this.columns[i].getExports(r));return n}exportTo(r,n,i){for(var s=0;s<this.columns.length;s++){var o=this.columns[s].getExports(r);if(o.length){var a=o[0];r.assignmentForbidden(a)||i[a]||(n.isError?i[a]=n:this.columns[s].exportTo(r,n.columns[s],i))}}}getAllIds(){return this.columns.map(function(r){return r.header.userData.id})}};function HC(e){return e.isConstant?new Gr(e.asCompilerValue()):new Gr(NaN)}var Zu=class extends Pt{constructor(r,n){super();this.header=r,this.values=n,this.isIndependent=!1,this.registerDependencies(),this._exports=this.computeExports()}registerDependencies(){this.mergeDependencies(this.header),this.mergeDependencies.apply(this,this.values)}computeExports(){return this.header instanceof Tt?[this.header._symbol]:[]}_exportSymbolsTo(r,n,i){if(r.length){var s=r[0];if(n.isError)i[s]=n;else try{i[s]=new Ha(n.values.map(HC))}catch(o){if(o instanceof Pt)i[s]=o;else throw o}}}exportTo(r,n,i){var s=this.getLegalExports(r);this._exportSymbolsTo(s,n,i)}exportToLocal(r,n,i){this._exportSymbolsTo(this.getExports(r),n,i)}};var fm=class extends Pt{constructor(r,n,i,s){super();this._symbol=r,this._expression=n,this.otherVariableSolutionData=i,this.mergeDependencies(n),this.branchMultiplier=s}};var dm=class extends Pt{constructor(r,n,i,s,o){super();this.parameters=r,this.residuals=n,this.statistics=i,this.model=s,this.isModelValid=o.isModelValid,this.residualVariable=o.residualVariable,this.residualSuggestionId=o.residualSuggestionId,this.shouldSuggestLogMode=o.shouldSuggestLogMode,this.isLinear=o.isLinear,this.parameterWarning=o.parameterWarning,this._exports=[this.residualVariable];for(var a in r)r.hasOwnProperty(a)&&this._exports.push(a);this.mergeDependencies(s)}getCompiledFunction(){return this.model.getCompiledFunction.apply(this.model,arguments)}getCompiledDerivative(){return this.model.getCompiledDerivative.apply(this.model,arguments)}};var mm=class extends j{constructor(r){typeof r!=\"string\"&&(r=\"\"+r);super([]);this.isString=!0;this._stringValue=r}asValue(){return this._stringValue}};var ym=class extends j{constructor(r,n){super(n);this.seed=n[0],this.userSeed=n[1],this.tag=r}asValue(){return this.seed.asValue()+\"::\"+this.tag+this.userSeed.asValue()}copyWithArgs(r){return new this.constructor(this.tag,r)}};function $u(e){return typeof e!=\"object\"||!e?!1:e.type===\"Action\"}function rr(e,t){let r=e.getInstruction(t);switch(r.type){case 1:return to(r.value);default:throw new Error(`Unexpected opcode ${r.type}.`)}}function to(e){if(Array.isArray(e))return e.map(to);switch(typeof e){case\"boolean\":case\"number\":case\"string\":return e;case\"object\":if($u(e)){let t={};for(let r in e.updateRules){let n=e.updateRules[r];t[r]={value:to(n.value),valueType:n.valueType}}return{type:\"Action\",updateRules:t}}else return k(e);default:throw new Error(\"Unexpected value: \"+e)}}var ka=[ge,Ot,I,N,H,xt,ve,Ir,Ar,Ke,Gt,we,De,me,fe,ye,Le,he,Ne,Te,He,lr],UC=new Set(ka);function Wc(e){return UC.has(e)}function ki(e){switch(e){case I:return NaN;case N:return[NaN,NaN];case H:return[NaN,NaN,NaN];case xt:case ve:return[[NaN,NaN,NaN],[NaN,NaN,NaN]];case Ir:return[[NaN,NaN,NaN],[NaN,NaN,NaN],[NaN,NaN,NaN]];case Ar:return[[[NaN,NaN,NaN],[NaN,NaN,NaN],[NaN,NaN,NaN]],NaN];case Gt:return[NaN,NaN,NaN];case Ke:return{type:\"Action\",updateRules:{}};case De:case Le:case ye:return[[NaN,NaN],[NaN,NaN]];case he:return[[NaN,NaN],[NaN,NaN]];case me:return[[NaN,NaN],NaN];case fe:return[[NaN,NaN],[NaN,NaN],[NaN,NaN]];case ge:case Ot:return!1;case we:return[];case He:return[[NaN,NaN],[NaN,NaN],!1];case Ne:case Te:return[[NaN,NaN],NaN,NaN,NaN];case lr:return[NaN,NaN];default:let t=e;throw new Error(`${t} does not have a NaN type.`)}}function jE(e,t){return Ao(ki(e),t)}function Me(e){return e.type<=3}function QE(e){return!Me(e)}function pi(e){switch(e.type){case 21:case 23:case 19:case 50:return!0;default:return!1}}function pn(e){switch(e.type){case 20:case 22:case 24:case 51:return!0;default:return!1}}function eM(e){let t=\"\",r=(e.instructionsLength()-1).toString().length,n=0,i=!1;for(let s=0;s<e.instructionsLength();s++){let o=e.getInstruction(s),a=e.comments[s]||\"\",u=o.type===0&&o.removedInstructionForDebuggingOnly;if((pn(o)||u&&pn(u))&&(n-=1),o.type===0&&!u)i||(t+=`${KE(s,r)}: ${rP(2*n)}...\n`),i=!0;else{i=!1;let c=u?\" [X]\":\"    \";t+=`${KE(s,r)}:${c} ${rP(2*n)}${Wu(e,s)}${a?`\t\t# ${a}`:\"\"}\n`}(pi(o)||u&&pi(u))&&(n+=1)}return t}function Wu(e,t){let r=e.getInstruction(t);switch(r.type===0&&r.removedInstructionForDebuggingOnly&&(r=r.removedInstructionForDebuggingOnly),r.type){case 0:return Yi(r.type);case 2:return`${Yi(r.type)} ${Xn(r.valueType)} ${e.argNames[t]}`;case 3:return`${Yi(r.type)} ${Xn(r.valueType)}`;case 1:return`${Yi(r.type)} ${Xn(r.valueType)} ${tP(r.value)}`;case 37:case 42:return`${Yi(r.type)} ${Xn(r.valueType)} ${r.symbol} ${r.args.join(\" \")}`;case 44:return`${Yi(r.type)} ${Xn(r.valueType)} ${r.tag} ${r.args.join(\" \")}`;case 48:return`${Yi(r.type)} ${Xn(r.valueType)} ${r.args.join(\" \")}${r.isConstantBroadcast?\" (constant)\":\"\"}`;case 8:case 9:case 10:case 11:case 13:case 12:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 32:case 31:case 33:case 38:case 39:case 40:case 41:case 47:case 49:case 50:case 51:return`${Yi(r.type)} ${Xn(r.valueType)} ${r.args.join(\" \")}`;default:let n=r;throw new Error(`Unexpected opcode ${n.type}`)}}function Yi(e){switch(e){case 0:return\"Noop\";case 1:return\"Constant\";case 8:return\"Add\";case 9:return\"Subtract\";case 10:return\"Multiply\";case 11:return\"Divide\";case 12:return\"Exponent\";case 13:return\"RawExponent\";case 14:return\"Negative\";case 15:return\"OrderedPair\";case 17:return\"OrderedPairAccess\";case 16:return\"OrderedTriple\";case 18:return\"OrderedTripleAccess\";case 19:return\"BeginLoop\";case 20:return\"EndLoop\";case 21:return\"BeginIntegral\";case 22:return\"EndIntegral\";case 23:return\"BeginBroadcast\";case 24:return\"EndBroadcast\";case 25:return\"Equal\";case 26:return\"Less\";case 27:return\"Greater\";case 28:return\"LessEqual\";case 29:return\"GreaterEqual\";case 31:return\"Or\";case 32:return\"And\";case 33:return\"Piecewise\";case 38:return\"List\";case 39:return\"ListAccess\";case 40:return\"DeferredListAccess\";case 41:return\"InboundsListAccess\";case 37:return\"NativeFunction\";case 42:return\"Distribution\";case 2:return\"LoadArg\";case 47:return\"BlockVar\";case 48:return\"BroadcastResult\";case 3:return\"SymbolicVar\";case 44:return\"ExtendSeed\";case 49:return\"Action\";case 50:return\"BeginMap\";case 51:return\"EndMap\";default:let t=e;throw new Error(`Unexpected opcode ${t.type}`)}}function tP(e){if(Array.isArray(e))return`[${e.map(tP).join(\",\")}]`;switch(typeof e){case\"string\":return e;case\"boolean\":case\"number\":return e.toString();case\"object\":if($u(e)){let t=[];for(let r in e.updateRules)t.push(`\"${r}\": ${tP(e.updateRules[r].value)}`);return`{${t.join(\", \")}}`}else return`${e.n}/${e.d}`;default:throw new Error(\"Unexpected value: \"+e)}}function KE(e,t){let r=e.toString();return rP(t-r.length)+r}function rP(e){let t=\"\";for(let r=0;r<e;r++)t+=\" \";return t}function gm(e){let t=[];for(let r=0;r<e.instructionsLength();r++){t.push(0);let n=e.getInstruction(r);if(!Me(n))if(pn(n)&&n.type!==22)for(let i of n.args)t[i]=1/0;else for(let i of n.args)t[i]+=1}return t}function ro(e,t,r){let n=fr(e,t);if(n===void 0)throw new Error(`${r}\nNon-constant instruction: \"${Wu(e,Sn(e,t))}\"`);return n}function fr(e,t){let r=Jc(e,t);if(!(r<0))return r}function Jc(e,t,r){var o;let n=r&&r[t];if(n)return n;let i=e.getInstruction(t),s;switch(i.type){case 38:s=i.args.length;break;case 1:s=i.value.length;break;case 48:{s=(o=i.constantLength)!=null?o:-1;break}}return s===void 0&&(r=r||{},s=kC(e,i,r)),r&&(r[t]=s),s}function kC(e,t,r){switch(t.type){case 33:{let n=Jc(e,t.args[1],r),i=Jc(e,t.args[2],r);return n===i?n:-1}case 37:switch(t.symbol){case\"elementsAt\":return Jc(e,t.args[1],r);case\"sortPerm\":return Jc(e,t.args[0],r);case\"shuffle\":return Jc(e,t.args[1],r);default:return-1}default:{if(W(t.valueType))return-1;throw new Error(`Programming Error: cannot find the list length of ${Yi(t.type)} ${le(t.valueType)}.`)}}}function Sn(e,t){let r=e.getInstruction(t);if(!W(r.valueType))throw new Error(`Programming Error: cannot find the list length of ${e.printInstruction(t)}`);switch(r.type){case 38:return e.Constant(r.args.length);case 1:return e.Constant(r.value.length);case 48:{let n=e.getInstruction(r.args[0]);return e.getInstruction(n.args[0]).args[0]}case 37:switch(r.symbol){case\"elementsAt\":return Sn(e,r.args[1]);case\"sortPerm\":return Sn(e,r.args[0]);case\"shuffle\":return Sn(e,r.args[1])}}return e.SyntheticNativeFunction(\"count\",[t])}function Pp(e,t){let r=[];for(let o of t)W(e.getInstruction(o).valueType)&&r.push(o);if(r.length===0)return;if(r.length===1)return Sn(e,r[0]);let n=[];for(let o of r)n.push(fr(e,o));let i,s=1/0;for(let o=0;o<n.length;o++){let a=r[o],u=n[o];if(u===void 0)return e.SyntheticNativeFunction(\"min\",[e.List(r.map(c=>Sn(e,c)))]);u<s&&(i=a,s=u)}return i!==void 0?Sn(e,i):e.Constant(s)}var xm=nP({sin:Er(\"isinf(x) || isnan(x) ? NaN : dcg_isPiMultiple(abs(x)) ? 0.0 : sin(x)\"),cos:Er(\"isinf(x) || isnan(x) ? NaN : dcg_isOddHalfPiMultiple(abs(x)) ? 0.0 : cos(x)\"),tan:Bo(je`float a=abs(x);\n    return isinf(x) || isnan(x) ? NaN\n      : dcg_isPiMultiple(a) ? 0.0\n      : dcg_isOddHalfPiMultiple(a) ? Infinity\n      : tan(x);`),cot:Bo(je`float a=abs(x);\n      return isinf(x) || isnan(x) ? NaN\n        : a < 0.03 ? 1.0/x - x/3.0\n        : dcg_isPiMultiple(a) ? Infinity\n        : dcg_isOddHalfPiMultiple(a) ? 0.0\n        : 1.0 / tan(x);`),sec:Er(\"isinf(x) || isnan(x) ? NaN : dcg_isOddHalfPiMultiple(abs(x)) ? Infinity: 1.0 / cos(x)\"),csc:Bo(je`float a=abs(x);\n      return isinf(x) || isnan(x) ? NaN\n        : a < 0.03 ? 1.0/x + x/6.0\n        : dcg_isPiMultiple(a) ? Infinity\n        : 1.0 / sin(x);`),arcsin:Bo(je`if (isinf(x) || isnan(x)) { return NaN; }\n    if (x == 1.0) { return dcg_PI/2.0; }\n    if (x == -1.0) { return -dcg_PI/2.0; }\n    if (x > 1.0 || x < -1.0) return NaN;\n    float y0 = asin(x);\n    return y0 + (x - sin(y0)) / cos(y0);`),arccos:Bo(je`if (isinf(x) || isnan(x)) { return NaN; }\n    if (x == 1.0) { return 0.0; }\n    if (x == -1.0) { return dcg_PI; }\n    if (x > 1.0 || x < -1.0) return NaN;\n    float y0 = acos(x);\n    return y0 + (cos(y0) - x) / sin(y0);`),arctan:hm(je`isnan(x) || isnan(y) ? NaN\n      : isinf(x) && isinf(y) ?\n        (y > 0.0 ? 0.25 : 0.75) * sign(x) * dcg_PI\n      : x == 0.0 && y == 0.0 ? y\n      : atan(x, y)\n    `),arccot:Er(\"isnan(x) ? NaN : dcg_PI/2.0 - atan(x)\"),arcsec:Er(\"isnan(x) ? NaN : dcg_arccos(1.0/x)\"),arccsc:Er(\"isnan(x) ? NaN : dcg_arcsin(1.0/x)\"),sinh:Er(\"isinf(x) ? x : isnan(x) ? NaN : sinh(x)\"),cosh:Er(\"isinf(x) ? Infinity : isnan(x) ? NaN : cosh(x)\"),tanh:Er(\"abs(x) > 10.0 ? sign(x) : isnan(x) ? NaN : tanh(x)\"),coth:Er(\"abs(x) > 10.0 ? sign(x) : isnan(x) ? NaN : x == 0.0 ? Infinity : abs(x) < 0.03 ? 1.0/x + x/3.0 : 1.0/tanh(x)\"),sech:Er(\"isinf(x) ? 0.0 : isnan(x) ? NaN : 1.0/cosh(x)\"),csch:Er(\"isinf(x) ? 0.0 : isnan(x) ? NaN : x == 0.0 ? Infinity : abs(x) < 0.03 ? 1.0/x - x/6.0 : 1.0/sinh(x)\"),arcsinh:Bo(je`float a=abs(x);\n      return isnan(x) ? NaN : sign(x) * (\n        1.0 + x * x == 1.0\n          ? dcg_log1p(a)\n          : log(a + dcg_rtxsqpone(a))\n      );`),arccosh:Er(\"x < 1.0 || isnan(x) ? NaN : log(x + dcg_rtxsqmone(x))\"),arctanh:Bo(je`if (isnan(x) || abs(x) > 1.0) { return NaN; }\n      if (x == 1.0) { return Infinity; }\n      if (x == -1.0) { return -Infinity; }\n      float y0 = 0.5*(dcg_log1p(x) - dcg_log1p(-x));\n      float c = cosh(y0);\n      return y0 + (x - tanh(y0)) * c * c;`),arccoth:Er(\"isnan(x) ? NaN : abs(x) >= 1.0 ? dcg_arctanh(1.0/x) : NaN\"),arcsech:Er(\"isnan(x) ? NaN : 0.0 < x && x <= 1.0 ? dcg_arccosh(1.0/x) : x == 0.0 ? Infinity : NaN\"),arccsch:Er(\"isinf(x) ? 0.0 : isnan(x) ? NaN : dcg_arcsinh(1.0/x)\"),sqrt:Er(\"isnan(x) ? NaN : x >= 0.0 ? sqrt(x) : NaN\"),rtxsqpone:Er(\"dcg_hypot(x, 1.0)\"),rtxsqmone:Bo(\"float t = x*x; return isnan(x) || t < 1.0 ? NaN : t - 1.0 == t ? abs(x) : sqrt(t - 1.0);\"),nthroot:hm(\"isnan(x) || isnan(y) ? NaN : dcg_pow(x, 1.0/y)\"),hypot:aM(je`if (isnan(x) || isnan(y)) return NaN;\n      if (isinf(x) || isinf(y)) return Infinity;\n      x = abs(x);\n      y = abs(y);\n      float m = max(x,y);\n      x /= m;\n      y /= m;\n      return m == 0.0 ? 0.0 : sqrt(x*x + y*y) * m;`),log:Er(\"isnan(x) ? NaN : x > 0.0 ? log(x)*0.4342944819 : x == 0.0 ? -Infinity : NaN\"),logbase:hm(je`isnan(x) || isnan(y) ? NaN\n      : y == 1.0 ?\n        (\n          x > 1.0 ? Infinity\n          : x == 1.0 ? NaN\n          : x < 0.0 ? NaN\n          : -Infinity\n        )\n      : y > 0.0 ?\n        (\n          x > 0.0 ? log(x)/log(y)\n          : x == 0.0 && !isinf(y) ? -Infinity\n          : NaN\n        )\n      : NaN`),ln:Er(\"isnan(x) ? NaN : x > 0.0 ? log(x) : x == 0.0 ? -Infinity : NaN\"),exp:Er(\"isnan(x) ? NaN : exp(x)\"),floor:Er(\"isnan(x) ? NaN : floor(x)\"),ceil:Er(\"isnan(x) ? NaN : ceil(x)\"),round:Er(\"isinf(x) || isnan(x) ? x : floor(0.5 + x)\"),abs:Er(\"isnan(x) ? NaN : abs(x)\"),sign:Er(\"isnan(x) ? NaN : sign(x)\"),mod:hm(\"isinf(x) || isinf(y) || isnan(x) || isnan(y) || y == 0.0 ? NaN : mod(x, y)\"),distance:Ya(\"float\",\"vec2 a, vec2 b\",je`\n      if (any(isnan(a)) || any(isnan(b))) return NaN;\n      vec2 d = a-b;\n      return dcg_hypot(d.x, d.y);`),distanceThreeD:Ya(\"float\",\"vec3 a, vec3 b\",je`\n      if (any(isnan(a)) || any(isnan(b))) return NaN;\n      vec3 d = a-b;\n      return dcg_hypot(dcg_hypot(d.x, d.y), d.z);`),hsv:Ya(\"vec3\",\"float h, float s, float v\",je`if (isnan(h) || isnan(s) || isnan(v)) {discard;}\n      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n      if (isinf(h)) h = 0.0;\n      vec3 p = abs(fract(h / 360.0 + K.xyz) * 6.0 - K.www);\n      return vec3(clamp(v, 0.0, 1.0) * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), clamp(s, 0.0, 1.0)));`),rgb:Ya(\"vec3\",\"float r, float g, float b\",je`if (isnan(r) || isnan(g) || isnan(b)) {discard;}\n    return clamp(vec3(r,g,b),0.0,255.0)/255.0;`),erf:Bo(je`if (isnan(x)) return NaN;\n      float t = abs(x);\n      float n = x*x;\n      float r = -n;\n      return sign(x) * (\n        r < -750.0\n          ? 1.0\n          : t >= 0.065\n          ? 1.0 - exp(r) * (\n            t > 50000000.0\n              ? r / t\n              : t > 50.0\n              ? (r * (n * (n + 4.5) + 2.0)) / (t * (n * (n + 5.0) + 3.75))\n              : ((0.9999999999999999+t*(2.224574423459406+t*(2.444115549920689+\n                t*(1.7057986861852539+t*(0.8257463703357973+\n                  t*(0.28647031042892007+t*(0.07124513844341643+\n                    t*(0.012296749268608364+t*(0.001347817214557592+\n                      0.00007263959403471071*t))))))))\n                )/(1.0+t*(3.352953590554884+t*(5.227518529742423+\n                  t*(5.003720878235473+t*(3.266590890998987+\n                    t*(1.5255421920765353+t*(0.5185887413188858+\n                      t*(0.12747319185915415+t*(0.02185979575963238+\n                        t*(0.0023889438122503674+0.00012875032817508128*t\n                ))))))))))\n              )\n          )\n          : t*(1.1283791670955126+r*(0.37612638903183754+\n              r*(0.11283791670955126+r*(0.026866170645131252+\n                0.005223977625442188*r))))\n      );`),restriction:Ya(\"bool\",\"bool x\",\"return x;\"),restrictionToBoolean:Ya(\"bool\",\"bool x\",\"return x;\")});function Ya(e,t,r){return{type:\"scalar\",value:`${e} dcg_[[name_here]](${t}){ ${r} }`}}function Bo(e){return Ya(\"float\",\"float x\",e)}function Er(e){return Bo(`return ${e};`)}function aM(e){return Ya(\"float\",\"float x, float y\",e)}function hm(e){return aM(`return ${e};`)}function Si(e,{outType:t,deps:r}={}){let n=t!=null?t:()=>\"float\";return{type:\"reducer\",value:i=>`${n(i)} dcg_[[name_here]](float[${i}] L) { ${e(i)} }`,deps:r!=null?r:[]}}function bm(e,t=()=>\"float\"){return{type:\"double-reducer\",value:(r,n)=>{let i=Math.min(r,n),s=t(i),o=e(i);return`${s} dcg_[[name_here]](float[${r}] X, float[${n}] Y) { ${o} }`}}}var YC=nP({lcm:Si(e=>je`float g = abs(dcg_round(L[0]));\n      if (isinf(g)) return Infinity;\n      if (isnan(g)) return NaN;\n      for (int i=1; i<${e}; i++) {\n        float v = abs(dcg_round(L[i]));\n        if (isinf(v)) return Infinity;\n        if (isnan(v)) return NaN;\n        g *= dcg_round(v / dcg_gcd2(g, v));\n      }\n      return g;`),gcd:Si(e=>je`float g = abs(dcg_round(L[0]));\n      if (isnan(g)) return NaN;\n      for (int i=1; i<${e}; i++) {\n        float x = L[i];\n        if (isnan(x)) return NaN;\n        g = dcg_gcd2(g, abs(dcg_round(x)));\n      }\n      return g;`),mean:Si(e=>je`float tot = 0.0;\n      for (int i=0; i<${e}; i++) {\n        float x = L[i];\n        if (isnan(x) || (isinf(x) && x == -tot)) return NaN;\n        tot += x;\n      }\n      return tot / ${e}.0;`),total:Si(e=>je`float tot = 0.0;\n      for (int i=0; i<${e}; i++) {\n        float x = L[i];\n        if (isnan(x) || (isinf(x) && x == -tot)) return NaN;\n        tot += x;\n      }\n      return tot;`),stdev:Si(e=>rM(e,e-1),{deps:[\"mean\"]}),stdevp:Si(e=>rM(e,e),{deps:[\"mean\"]}),mad:Si(e=>je`float mean = dcg_mean(L);\n      if (isnan(mean) || isinf(mean)) return NaN;\n      float tot = 0.0;\n      for (int i=0; i<${e}; i++) {\n        tot += abs(L[i] - mean);\n      }\n      return tot / ${e}.0;`,{deps:[\"mean\"]}),min:Si(e=>nM(e,\"min\")),max:Si(e=>nM(e,\"max\")),argmin:Si(e=>iM(e,\"<\")),argmax:Si(e=>iM(e,\">=\")),median:Si(e=>e%2===1?`return L[int(dcg_sortPerm(L)[${(e-1)/2}])-1];`:je`float[${e}] perm = dcg_sortPerm(L);\n          return 0.5*(L[int(perm[${e/2}])-1]+L[int(perm[${e/2-1}])-1]);`,{deps:[\"sortPerm\"]}),varp:Si(e=>tM(e,e),{deps:[\"mean\"]}),var:Si(e=>tM(e,e-1),{deps:[\"mean\"]}),sortPerm:Si(e=>{if(e>100)throw Hc();return je`int[${e}] perm;\n        int[${e}] nextPerm;\n        for (int i=0; i<${e}; i++)\n          perm[i] = i;\n        float lastMin = -Infinity;\n        int lastIndex = -1;\n        for (int i=0; i<${e}; i++) {\n          float currMin = Infinity;\n          int currIndex = -1;\n          int j;\n          for (j=0; j<${e}; j++) {\n            float e = L[j];\n            if (\n              (e > lastMin || (e == lastMin && j > lastIndex))\n              && e < currMin\n            ) {\n              currMin = e;\n              currIndex = j;\n            }\n          }\n          perm[i] = currIndex;\n          lastMin = currMin;\n          lastIndex = currIndex;\n        }\n        float[${e}] permFloat;\n        for (int i=0; i<${e}; i++)\n          permFloat[i] = float(perm[i] + 1);\n        return permFloat;`},{outType:e=>`float[${e}]`})});function tM(e,t){return t===0?\"return NaN;\":je`float mean = dcg_mean(L);\n    if (isnan(mean) || isinf(mean)) return NaN;\n    float tot = 0.0;\n    for (int i=0; i<${e}; i++) {\n      float delta = L[i] - mean;\n      tot += delta * delta;\n    }\n    return tot / ${t}.0;`}function rM(e,t){return t===0?\"return NaN;\":je`float mean = dcg_mean(L);\n    if (isnan(mean) || isinf(mean)) return NaN;\n    float tot = 0.0;\n    for (int i=0; i<${e}; i++) {\n      tot = dcg_hypot(tot, L[i] - mean);\n    }\n    return tot / ${Tm(Math.sqrt(t))};`}function nM(e,t){return je`float m = L[0];\n    if (isnan(m)) return NaN;\n    for (int i=1; i<${e}; i++) {\n      float x = L[i];\n      if (isnan(x)) return NaN;\n      m = ${t}(m, x);\n    }\n    return m;`}function iM(e,t){return je`if (isnan(L[0])) return 0.0;\n    int arg = 0;\n    float best = L[0];\n    for (int i=1; i<${e}; i++) {\n      float e = L[i];\n      if (isnan(e)) return 0.0;\n      if (e ${t} best) {\n        arg = i;\n        best = e;\n      }\n    }\n    return float(arg + 1);`}var XC=nP({elementsAt:bm(e=>`float[${e}] outList;\n      for (int i=0; i<${e}; i++) {\n        float y = Y[i];\n        outList[i] = isnan(y) || isinf(y) ? NaN : X[int(y)-1];\n      }\n      return outList;`,e=>`float[${e}]`),cov:bm(e=>sM(e,e-1)),covp:bm(e=>sM(e,e)),corr:bm(e=>je`${uM(e)}\n      float t1 = 0.0;\n      float t2 = 0.0;\n      float tc = 0.0;\n      for (int i=0; i<${e}; i++) {\n        float d1 = X[i] - m1;\n        float d2 = Y[i] - m2;\n        t1 = dcg_hypot(t1, d1);\n        t2 = dcg_hypot(t2, d2);\n        tc += d1 * d2;\n      }\n      return tc / (t1 * t2);`)}),ZC=q(q(q({},xm),YC),XC),Pm=ZC;function $C(e,t){switch(e.type){case\"scalar\":return e.value.replace(\"[[name_here]]\",t);case\"reducer\":{let r=e.value;return n=>r(n).replace(\"[[name_here]]\",t)}case\"double-reducer\":{let r=e.value;return(n,i)=>r(n,i).replace(\"[[name_here]]\",t)}}}function nP(e){for(let[t,r]of Object.entries(e))r.type!==\"omitted\"&&(r.value=$C(r,t));return e}function sM(e,t){return je`${uM(e)}\n    float tot = 0.0;\n    for (int i=0; i<${e}; i++) {\n      tot += (X[i] - m1) * (Y[i] - m2);\n    }\n    return tot / ${t}.0;`}function uM(e){return je`float m1 = 0.0;\n    for (int i=0; i<${e}; i++) {\n      float x = X[i];\n      if (isnan(x) || isinf(x)) return NaN;\n      m1 += x;\n    }\n    m1 /= ${e}.0;\n    float m2 = 0.0;\n    for (int i=0; i<${e}; i++) {\n      float y = Y[i];\n      if (isnan(y) || isinf(y)) return NaN;\n      m2 += y;\n    }\n    m2 /= ${e}.0;`}var WC=[je`float dcg_rawpow(float x, float y) {\n    if (isnan(x) || isnan(y)) return NaN;\n    if (isinf(y)) {${\"\"}\n      float a = abs(x);\n      if (a == 1.0) return NaN;\n      if (y > 0.0) {\n        return a > 1.0 ? Infinity : 0.0;\n      } else {\n        return a < 1.0 ? Infinity : 0.0;\n      }\n    }\n    if (x > 0.0) return pow(x, y);\n    else if (x == 0.0) {\n      if (y > 0.0) return 0.0;\n      else if (y == 0.0) return 1.0;\n      else return Infinity;\n    } else {\n      float m = mod(y, 2.0);\n      if (m == 1.0) return -pow(-x, y);\n      else return pow(-x, y);\n    }\n  }`,je`float dcg_pow(float x, float y) {\n    if (isnan(x) || isnan(y)) return NaN;\n    if (isinf(y)) {\n      float a = abs(x);\n      if (a == 1.0) return NaN;\n      if (y > 0.0) {\n        return a > 1.0 ? Infinity : 0.0;\n      } else {\n        return a < 1.0 ? Infinity : 0.0;\n      }\n    }\n    if (x > 0.0) return pow(x,y);\n    else if (x == 0.0) {\n      if (y > 0.0) return 0.0;\n      if (y == 0.0) return 1.0;\n      if (y < 0.0) return Infinity;\n    } else {\n      float m = mod(y, 2.0);\n      if (m == 0.0) return pow(-x, y);\n      else if (m == 1.0) return -pow(-x, y);\n      else {${\"\"}\n        vec2 a0 = vec2(0.0, 1.0);\n        vec2 a1 = vec2(1.0, 0.0);\n        float approx = y;\n        for (int i=0; i<12; i+=1) {\n          float whole = floor(approx);\n          vec2 a = whole * a1 + a0;\n          if (a.y > 100.0) break;\n          a0 = a1; a1 = a;\n          if (approx == whole) break;\n          approx = 1.0 / (approx - whole);\n        }${\"\"}\n        float r = a1.x / a1.y;\n        float m = max(max(abs(y), abs(r)), 1.0);\n        if (abs(mod(a1.y, 2.0) - 1.0) < 0.01 && abs((r - y)/y) < 0.00001) {\n          return (mod(a1.x, 2.0) == 0.0 ? 1.0 : -1.0) * pow(-x, y);\n        } else {\n          return NaN;\n        }\n      }\n    }\n  }`,je`float dcg_add(float x, float y) {\n    return isnan(x) || isnan(y) ? NaN\n      : isinf(x) && isinf(y) && x != y ? NaN\n      : x + y;\n  }`,je`float dcg_sub(float x, float y) {\n    return isnan(x) || isnan(y) ? NaN\n      : isinf(x) && isinf(y) && x != -y ? NaN\n      : x - y;\n  }`,je`float dcg_mul(float x, float y) {\n    return isnan(x) || isnan(y) ? NaN\n      : isinf(x) && y == 0.0 ? NaN\n      : x == 0.0 && isinf(y) ? NaN\n      : x * y;\n  }`,je`float dcg_div(float x, float y) {\n    return isnan(x) || isnan(y) ? NaN\n      : isinf(x) && isinf(y) ? NaN\n      : x == 0.0 && y == 0.0 ? NaN\n      : x / y;\n  }`,je`float dcg_neg(float x) {\n    return isnan(x) ? NaN : -x;\n  }`,je`bool dcg_equal(float x, float y) {\n    return isnan(x) || isnan(y) ? false : x == y;\n  }`,je`bool dcg_less(float x, float y) {\n    return isnan(x) || isnan(y) ? false : x < y;\n  }`,je`bool dcg_lessEqual(float x, float y) {\n    return isnan(x) || isnan(y) ? false : x <= y;\n  }`,je`bool dcg_greater(float x, float y) {\n    return isnan(x) || isnan(y) ? false : x > y;\n  }`,je`bool dcg_greaterEqual(float x, float y) {\n    return isnan(x) || isnan(y) ? false : x >= y;\n  }`,je`float dcg_gcd2(float u, float v) {\n    if (isinf(u)) return v;\n    if (isinf(v)) return u;\n    for (int i=0; i<95; i++) {\n      if (v == 0.0) break;\n      u = mod(u, v);\n      if (u == 0.0) break;\n      v = mod(v, u);\n    }\n    return u+v;\n  }`,je`float dcg_log1p(float x) {\n    return x - 0.5 * x * x == x ? x : log(1.0 + x);\n  }`,je`bool dcg_isPiMultiple(float absx) {\n    if (absx > 1.0e5) return false;\n    return floor(0.5 + dcg_PI_INV * absx) * dcg_PI == absx;\n  }`,je`bool dcg_isOddHalfPiMultiple(float absx) {\n    if (absx > 1.0e5) return false;\n    float n = floor(0.5 + 2.0 * dcg_PI_INV * absx);\n    return mod(n, 2.0) == 1.0 && n * dcg_PI == 2.0 * absx;\n  }`].join(`\n`),oM=[\"round\",\"hypot\",\"rtxsqpone\",\"rtxsqmone\"],JC=oM.map(e=>xm[e].value).join(`\n`)+Object.keys(xm).filter(e=>oM.indexOf(e)===-1).map(e=>xm[e].value).join(`\n`),Hk=je`uniform float NaN;\n    uniform float Infinity;\n    float dcg_const_bust = 1.0;\n    #define dcg_PI 3.141592653589793\n    #define dcg_PI_INV 0.3183098861837907\n    ${WC}\\n`+JC;function je(e,...t){let r=e[0];for(let n=0;n<t.length;n++)r+=t[n],r+=e[n+1];return jC(r)}function jC(e){let t=e.split(`\n`);if(/^\\s/.test(t[0][0]))throw new Error(\"Programming error: Expected un-indented first line\");if(t.length<=1)return e;let r=Math.min(...t.slice(1).map(n=>n.match(/^\\s*/)[0].length));return t[0]+`\n`+t.slice(1).map(n=>n.slice(r)).join(`\n`)}function Wn(e,t){let r=[],n=[];for(let i=0;i<t;i++)n.push(!1);n.push(!0);for(let i=t;i>=0;i--){if(!n[i])continue;let s=e.getInstruction(i);if(s.type===2)r.push({symbol:e.argNames[i],scope:\"free\"});else if(pi(s))switch(s.type){case 21:r.push({symbol:s.callData.indexSymbol,scope:\"integral\"});break;case 19:r.push({symbol:s.callData.indexSymbol,scope:s.callData.type});break;case 23:if(s.listComprehensionCallData)for(let a of s.listComprehensionCallData.inputListSymbols)r.push({symbol:a,scope:\"comprehension\"});break;case 50:for(let a of s.callData.parameterSymbols)r.push({symbol:a,scope:\"map\"});break;default:let o=s;throw new Error(`Programming Error: unexpected loop instruction ${o.type}`)}else s.type===3&&s.symbol&&r.push({symbol:s.symbol,scope:\"symbolic-var\"});if(!Me(s))for(let o of s.args)n[o]=!0}return r.reverse()}function Jn(e){return`_${e}`}function jt(e,t){let r=t[e];return r!==void 0?r:Jn(e)}function Em(e){return cM(e,!1)}function zo(e){return cM(e,!0)}function cM(e,t){let r=gm(e),n=[],i=[],s=pM(e,e.argNames.length,e.instructionsLength()-1,r,t),o=0;for(;o<e.instructionsLength();){let a=e.getInstruction(o),{source:u,nextIdx:c}=lM(e,a,o,r,n,i,t);s+=u,o=c}return s+=`return ${jt(e.getReturnIndex(),n)};`,{source:s,constants:i,shaderFunctions:t?e_(e):{}}}function lM(e,t,r,n,i,s,o){let a=r+1;switch(t.type){case 0:case 47:case 48:case 22:case 49:return{source:\"\",nextIdx:a};case 21:if(o)throw _d();return{source:KC(e,t,r,n,i,s),nextIdx:t.endIndex};case 2:return i[r]=e.argNames[r],{source:\"\",nextIdx:a};case 23:return{source:t_(e,t,r,i,o),nextIdx:a};case 24:return{source:r_(e,t,r,i,o),nextIdx:a};case 19:return{source:n_(e,t,r,i,o),nextIdx:a};case 20:return{source:i_(e,t,r,i),nextIdx:a};case 50:return{source:o_(e,t,r,i,o),nextIdx:a};case 51:return{source:a_(e,t,r,i),nextIdx:a};default:{let u=u_(e,t,i,s,o);return n[r]<=1?(i[r]=`(${u})`,{source:\"\",nextIdx:a}):{source:`${Jn(r)}=${u};\n`,nextIdx:a}}}}function QC(e,t,r,n,i,s){let{endIndex:o}=t,a=!1,u=`function(${Jn(r)}) {\n`;u+=pM(e,r+1,o-1,n,a);let c=r+1;for(;c<o;){let p=e.getInstruction(c),{source:f,nextIdx:d}=lM(e,p,c,n,i,s,a);u+=f,c=d}let l=e.getInstruction(o);return u+=`return ${jt(l.args[1],i)};\n}`,u}function KC(e,t,r,n,i,s){let o=\"BuiltIn.quad(\";o+=QC(e,t,r,n,i,s),o+=`,${jt(t.args[0],i)},${jt(t.args[1],i)})`;let{endIndex:a}=t;return n[a+1]<=1?(i[a+1]=o,\"\"):`${Jn(a+1)}=${o};`}function e_(e){let t=e.argNames.length,r=e.instructionsLength()-1,n={};for(let i=t;i<=r;i++){let s=e.getInstruction(i);if(s.type===33){if(W(s.valueType)){let o=mM(e,i),a=`${o} dcg_ternary(bool x, ${o} y, ${o} z) { if (x) return y; return z; }`;n[a]=!0}}else if(s.type===37){let o=Pm[s.symbol];if((o==null?void 0:o.type)===\"reducer\"){let a=s.args[0],u=fr(e,a);if(u===void 0)throw zu(Wn(e,a));for(let c of o.deps)n[Pm[c].value(u)]=!0;n[o.value(u)]=!0}else if((o==null?void 0:o.type)===\"double-reducer\"){let a=s.args[0],u=s.args[1],c=fr(e,a),l=fr(e,u);if(c===void 0)throw zu(Wn(e,a));if(l===void 0)throw zu(Wn(e,u));n[o.value(c,l)]=!0}}}return n}function pM(e,t,r,n,i){let s=\"\",o=!1;for(let a=t;a<=r;a++){let u=e.getInstruction(a);if(!(u.type===0||u.type===24||u.type===20)){if(u.type===21){if(i)throw _d();let{endIndex:c}=u;a=n[c+1]<=1?c+1:c;continue}n[a]<=1&&!pi(u)&&!pn(u)&&u.type!==47&&u.type!==48||(i?(o&&(s+=\";\"),s+=mM(e,a)+\" \"+Jn(a)):(s+=o?\",\":\"var \",s+=Jn(a)),o=!0)}}return o&&(s+=`;\n`),s}function t_(e,t,r,n,i){let s=Jn(r),o=e.getInstruction(t.endIndex),a=jt(t.args[0],n),u=\"\";for(let l=1;l<o.args.length;l++){let p=t.endIndex+l;if(e.getInstruction(p).type!==48)continue;let d=Jn(p);i||(u+=`${d}=[];\n`)}return i||(u+=`if(${a}>${1e4}) throw ErrorMsg.maxListSize();\n`),u+=`for(${s}=1${i?\".0\":\"\"};${s}<=${a};${s}++){\n`,u}function r_(e,t,r,n,i){let s=\"\";for(let o=1;o<t.args.length;o++){let a=r+o;if(a>=e.instructionsLength()||e.getInstruction(a).type!==48)continue;let u=Jn(r+o),c=jt(t.args[o],n);if(i){let l=jt(t.args[0],n);s+=`${u}[int(${l})-1]=${c};\n`}else s+=`${u}.push(${c});\n`}return s+=`}\n`,s}function n_(e,t,r,n,i){let s=Jn(r);if(i){let c=e.getInstruction(t.args[0]),l=e.getInstruction(t.args[1]),p=t.callData.type===\"sum\";if(c.type!==1){let g=Wn(e,t.args[0]);throw p?Ad(g):Cd(g)}if(l.type!==1){let g=Wn(e,t.args[1]);throw p?Ad(g):Cd(g)}if(c.valueType!==I||l.valueType!==I)throw new Error(\"Programming error: non-number in summation bounds\");let f=k(c.value),d=k(l.value);if(!isFinite(d-f)||d-f>=1e3)throw p?nb():ib()}let o=`${jt(t.args[0],n)}`,a=`${jt(t.args[1],n)}`,u=`if(${o}>${a}){\n`;for(let c=2;c<t.args.length;c++){let l=t.endIndex+c-1;if(l>=e.instructionsLength()||e.getInstruction(l).type!==47)continue;let p=Jn(l);u+=`${p}=${jt(t.args[c],n)};\n`}if(!i){u+=`}else if(!isFinite(${a}-${o})){\n`;for(let c=2;c<t.args.length;c++){let l=t.endIndex+c-1;if(l>=e.instructionsLength())continue;let p=e.getInstruction(l);if(p.type!==47)continue;let f=Jn(l);u+=`${f}=${iP(ki(p.valueType),i,t.valueType)};\n`}}u+=`}else{\n`;for(let c=2;c<t.args.length;c++){let l=r+c-1;if(e.getInstruction(l).type!==47)continue;let p=Jn(l);u+=`${p}=${jt(t.args[c],n)};\n`}return u+=`for(${s}=${o};${s}<=${a};${s}++){\n`,u}function i_(e,t,r,n){let i=\"\";for(let s=1;s<t.args.length;s++){let o=t.args[0]+s;if(e.getInstruction(o).type!==47)continue;let a=Jn(o);i+=`${a}=${jt(t.args[s],n)};\n`}i+=`}\n`;for(let s=1;s<t.args.length;s++){let o=r+s;if(o>=e.instructionsLength()||e.getInstruction(o).type!==47)continue;let a=Jn(o);i+=`${a}=${jt(t.args[s],n)};\n`}return i+=`}\n`,i}function s_(e,t,r){let n=jt(e.args[0],t),i=jt(e.args[1],t);switch(e.type){case 8:return r?`dcg_add(${n},${i})`:`${n}+${i}`;case 9:return r?`dcg_sub(${n},${i})`:`${n}-${i}`;case 10:return r?`dcg_mul(${n},${i})`:`${n}*${i}`;case 11:return r?`dcg_div(${n},${i})`:`${n}/${i}`;case 12:return`${r?\"dcg_\":\"BuiltIn.\"}pow(${n},${i})`;case 13:return`${r?\"dcg_rawpow\":\"Math.pow\"}(${n},${i})`;case 25:return r?`dcg_equal(${n},${i})`:`${n}===${i}`;case 26:return r?`dcg_less(${n},${i})`:`${n}<${i}`;case 28:return r?`dcg_lessEqual(${n},${i})`:`${n}<=${i}`;case 27:return r?`dcg_greater(${n},${i})`:`${n}>${i}`;case 29:return r?`dcg_greaterEqual(${n},${i})`:`${n}>=${i}`;case 31:return`${n}||${i}`;case 32:return`${n}&&${i}`;default:throw new Error(\"Programming Error: invalid binary opcode.\")}}function o_(e,t,r,n,i){if(i)throw te(\"GLSL map not implemented yet\");let s=Jn(t.endIndex+1),o=[];for(let u=0;u<t.callData.parameterSymbols.length;u++){let c=Jn(r+u+1);o.push(c)}let a=o.join(\",\");return`${s}=(${a}) => {\n`}function a_(e,t,r,n){let i=`return ${jt(t.args[1],n)}`;return i+=`}\n`,i}function u_(e,t,r,n,i){switch(t.type){case 1:return i||t.valueType===I||t.valueType===ge||t.valueType===N||t.valueType===H?iP(t.value,i,t.valueType):(n.push(to(t.value)),`_C[${n.length-1}]`);case 8:case 9:case 10:case 11:case 12:case 13:case 25:case 26:case 27:case 28:case 29:case 31:case 32:return s_(t,r,i);case 14:{let c=jt(t.args[0],r);return i?`dcg_neg(${c})`:`-${c}`}case 33:let s=jt(t.args[0],r),o=jt(t.args[1],r),a=jt(t.args[2],r);return i&&W(t.valueType)?`dcg_ternary(${s},${o},${a})`:`${s}?${o}:${a}`;case 15:return(i?\"vec2(\":\"[\")+jt(t.args[0],r)+\",\"+jt(t.args[1],r)+(i?\")\":\"]\");case 16:return(i?\"vec3(\":\"[\")+jt(t.args[0],r)+\",\"+jt(t.args[1],r)+\",\"+jt(t.args[2],r)+(i?\")\":\"]\");case 17:case 18:{let c=jt(t.args[0],r),l=jt(t.args[1],r);return i?`${c}.${l===\"(1.0)\"?\"x\":l===\"(2.0)\"?\"y\":\"z\"}`:`${c}[${l}-1]`}case 38:return(i?Im(t.valueType)+`[${t.args.length}](`:\"[\")+t.args.map(c=>jt(c,r)).join(\",\")+(i?\")\":\"]\");case 40:case 42:case 3:throw new Error(`Programming Error: expect ${Yi(t.type)} to be removed before emitting code.`);case 39:{let c=jt(t.args[0],r),l=jt(t.args[1],r),p=i?\"int\":\"Math.floor\",f=i?fr(e,t.args[0]):`${c}.length`;if(f===void 0)throw zu(Wn(e,t.args[0]));let d=t.valueType;return`(${p}(${l})>=1&&${p}(${l})<=${f})?${c}[${p}(${l})-1]:${iP(ki(d),i,d)}`}case 41:{let c=jt(t.args[0],r),l=jt(t.args[1],r);return i?`${c}[int(${l})-1]`:`${c}[${l}-1]`}case 37:{let c=t.args.map(l=>jt(l,r)).join(\",\");if(i){if(!Pm[t.symbol])throw Kl(t.symbol);return`dcg_${t.symbol}(${c})`}else{let l=yr[t.symbol];return`${l.module}.${l.symbol}(${c})`}}case 44:{if(i)throw Kl(\"random\");return`${jt(t.args[0],r)}+'::${t.tag}'+${jt(t.args[1],r)}`}case 2:case 0:case 21:case 22:case 19:case 20:case 23:case 24:case 47:case 48:case 49:case 50:case 51:throw new Error(`Unexpected opcode ${t.type}`);default:let u=t;throw new Error(`Unexpected opcode ${u.type}`)}}function iP(e,t,r){return t?dM(e,r):fM(e)}function fM(e){if(Array.isArray(e))return`[${e.map(fM).join(\",\")}]`;switch(typeof e){case\"boolean\":case\"number\":return e.toString();case\"string\":return`${JSON.stringify(e)}`;case\"object\":if($u(e))throw new Error(\"Action values cannot be compiled\");return k(e).toString();default:throw new Error(\"Unexpected value: \"+e)}}function dM(e,t){if(Array.isArray(e)){if(e.length>100)throw Hc();let r=W(t)?`[${e.length}]`:\"\",n=W(t)?We(t):t,i=\"dcg_const_bust*\"+e.map(s=>dM(s,n)).join(\",\");return Im(t)+r+\"(\"+i+\")\"}switch(typeof e){case\"boolean\":return e.toString();case\"number\":return Tm(e);case\"string\":throw Kl(\"random\");case\"object\":if($u(e))throw new Error(\"Action values cannot be compiled\");return Tm(k(e));default:throw new Error(\"Unexpected value: \"+e)}}function Tm(e){let t=e.toString();return/^-?\\d+$/.test(t)?t+\".0\":t}function Im(e){switch(W(e)?We(e):e){case ge:return\"bool\";case I:return\"float\";case N:return\"vec2\";case Gt:case H:return\"vec3\";default:throw new Error(\"Unexpected type: \"+Xn(e))}}function mM(e,t){let r=e.getInstruction(t);if(W(r.valueType)){let n=fr(e,t);if(n===void 0)throw zu(Wn(e,t));if(n>100)throw Hc();return`${Im(r.valueType)}[${n}]`}else return Im(r.valueType)}var oo={};Ys(oo,{acosh:()=>fD,acot:()=>X_,acoth:()=>eL,acsc:()=>Z_,acsch:()=>K_,addTangentAngle:()=>xw,addTangentArc:()=>bw,addTangentCircle:()=>hw,addTangentLine:()=>yw,addTangentRay:()=>gw,addTangentSegment:()=>XP,addTangentSegmentThreeD:()=>mw,angleMarkerMultiplier:()=>sw,angleMarkerRawDelta:()=>iw,arc:()=>rw,arcArcIntersection:()=>Ow,arcCenter:()=>al,arcCircleIntersection:()=>vw,arcGlider:()=>ZD,arcLineIntersection:()=>jD,arcOmega:()=>ul,argMax:()=>vL,argMin:()=>DL,asec:()=>$_,asech:()=>Q_,asinh:()=>dD,atanh:()=>mD,basePointFromVector:()=>$L,basePointFromVectorThreeD:()=>jL,bernoulliTable:()=>PD,binomSample:()=>fL,binomcdf:()=>mL,binompdf:()=>jm,center:()=>ew,chooseNonIncidentPoint:()=>Ew,circle:()=>KL,circleArcIntersection:()=>Dw,circleCircleIntersection:()=>Lp,circleGlider:()=>Tw,circleLineIntersection:()=>JP,clamp:()=>Zr,common_log:()=>H_,composeTransformation:()=>zw,corr:()=>Km,cos:()=>sr,cosh:()=>cD,cot:()=>Y_,cotDerivative:()=>TD,coth:()=>j_,cov:()=>SL,covp:()=>GD,csc:()=>k_,csch:()=>J_,dilation:()=>Vw,directedAngleMarker:()=>YD,directedCoterminalAngle:()=>XD,distance:()=>il,distanceThreeD:()=>CL,elementsAt:()=>jw,erf:()=>hL,erfcx:()=>Ea,expm1:()=>C_,factorial:()=>rc,frequency:()=>eF,gamma:()=>_p,gcd:()=>NP,getArcDetails:()=>ey,hsv:()=>_L,hypot:()=>so,identity:()=>QL,invBinom:()=>RD,invNorm:()=>FP,invPoisson:()=>SD,invT:()=>ND,invUniform:()=>xL,invertTransformation:()=>Hw,isDegenerateArc:()=>kP,itscore:()=>CD,ittest:()=>GP,lcm:()=>hD,line:()=>YL,lineArcIntersection:()=>JD,lineCircleIntersection:()=>WP,lineGlider:()=>ZP,lineLineIntersection:()=>WD,listGCD:()=>F_,listLCM:()=>V_,listLength:()=>PL,listMax:()=>LD,listMin:()=>_D,lnGamma:()=>B_,log:()=>z_,log1p:()=>wp,log_base:()=>ED,lowerQuantileIndex:()=>IL,lowerQuartileIndex:()=>ML,mad:()=>OL,mathVector:()=>UD,mathVectorThreeD:()=>qD,md5Spyable:()=>uD,mean:()=>Zo,median:()=>FD,mod:()=>gD,nCr:()=>Qa,nPr:()=>qm,normalSample:()=>lL,normalcdf:()=>uL,normalpdf:()=>CP,nthroot:()=>U_,parallel:()=>Aw,perpendicular:()=>Cw,pointDet:()=>ev,pointDot:()=>_w,pointPerp:()=>Lw,poissonSample:()=>dL,poissoncdf:()=>yL,poissonpdf:()=>nl,polyGamma:()=>ID,polygon:()=>LL,polygonArea:()=>UP,polygonEdges:()=>BL,polygonGlider:()=>Iw,polygonInteriorDirectedAngles:()=>kL,polygonInteriorUndirectedAngles:()=>qL,polygonPerimeter:()=>zL,pow:()=>yD,quad:()=>AL,quantile:()=>wD,quartile:()=>nc,quartileIndex:()=>Qm,radius:()=>tw,random:()=>_P,randomPerm:()=>LP,rank:()=>vP,ray:()=>XL,rayGlider:()=>OP,reflection:()=>Bw,restriction:()=>nF,restrictionToBoolean:()=>iF,rgb:()=>BD,rotation:()=>Gw,scaleTangentAngle:()=>dw,scaleTangentArc:()=>fw,scaleTangentCircle:()=>pw,scaleTangentLine:()=>cw,scaleTangentRay:()=>lw,scaleTangentSegment:()=>YP,sec:()=>q_,sech:()=>W_,segment:()=>qP,segmentGlider:()=>$P,segmentThreeD:()=>wL,segmentThreeDGlider:()=>Pw,select:()=>Jw,shuffle:()=>cL,sign:()=>RP,sin:()=>Ft,sinh:()=>lD,sortPerm:()=>ic,spearman:()=>RL,sphere:()=>VL,sqrtxsqm1:()=>w_,sqrtxsqp1:()=>L_,stats:()=>BP,stdev:()=>km,stdevp:()=>NL,supplementAngle:()=>aw,tSample:()=>pL,tan:()=>DD,tanh:()=>pD,tcdf:()=>Hm,toFraction:()=>__,tone:()=>Kw,total:()=>tL,tpdf:()=>Jm,transformAngleMarker:()=>Ww,transformArc:()=>Zw,transformCircle:()=>Xw,transformLine:()=>qw,transformPoint:()=>Xo,transformPolygon:()=>$w,transformRay:()=>kw,transformSegment:()=>ty,transformVector:()=>Yw,transformation:()=>ww,translation:()=>Fw,triangle:()=>FL,tscore:()=>AD,ttest:()=>VP,undirectedAngleMarker:()=>nw,undirectedCoterminalAngle:()=>ow,uniformSample:()=>Ka,uniformcdf:()=>gL,uniformpdf:()=>wP,uniquePerm:()=>Qw,upperQuantileIndex:()=>TL,upperQuartileIndex:()=>EL,validateRangeLength:()=>zP,validateSampleCount:()=>HP,variance:()=>VD,varp:()=>Fp,vector:()=>HD,vectorDisplacementAsPoint:()=>ZL,vectorThreeD:()=>WL,vectorThreeDDisplacementAsPoint:()=>JL,vertices:()=>GL,volume:()=>tF});var yM=function(){\"use strict\";function e(m,b){var y=(m&65535)+(b&65535),h=(m>>16)+(b>>16)+(y>>16);return h<<16|y&65535}function t(m,b){return m<<b|m>>>32-b}function r(m,b,y,h,x,P){return e(t(e(e(b,m),e(h,P)),x),y)}function n(m,b,y,h,x,P,E){return r(b&y|~b&h,m,b,x,P,E)}function i(m,b,y,h,x,P,E){return r(b&h|y&~h,m,b,x,P,E)}function s(m,b,y,h,x,P,E){return r(b^y^h,m,b,x,P,E)}function o(m,b,y,h,x,P,E){return r(y^(b|~h),m,b,x,P,E)}function a(m,b){m[b>>5]|=128<<b%32,m[(b+64>>>9<<4)+14]=b;var y,h,x,P,E,T=1732584193,M=-271733879,O=-1732584194,S=271733878;for(y=0;y<m.length;y+=16)h=T,x=M,P=O,E=S,T=n(T,M,O,S,m[y],7,-680876936),S=n(S,T,M,O,m[y+1],12,-389564586),O=n(O,S,T,M,m[y+2],17,606105819),M=n(M,O,S,T,m[y+3],22,-1044525330),T=n(T,M,O,S,m[y+4],7,-176418897),S=n(S,T,M,O,m[y+5],12,1200080426),O=n(O,S,T,M,m[y+6],17,-1473231341),M=n(M,O,S,T,m[y+7],22,-45705983),T=n(T,M,O,S,m[y+8],7,1770035416),S=n(S,T,M,O,m[y+9],12,-1958414417),O=n(O,S,T,M,m[y+10],17,-42063),M=n(M,O,S,T,m[y+11],22,-1990404162),T=n(T,M,O,S,m[y+12],7,1804603682),S=n(S,T,M,O,m[y+13],12,-40341101),O=n(O,S,T,M,m[y+14],17,-1502002290),M=n(M,O,S,T,m[y+15],22,1236535329),T=i(T,M,O,S,m[y+1],5,-165796510),S=i(S,T,M,O,m[y+6],9,-1069501632),O=i(O,S,T,M,m[y+11],14,643717713),M=i(M,O,S,T,m[y],20,-373897302),T=i(T,M,O,S,m[y+5],5,-701558691),S=i(S,T,M,O,m[y+10],9,38016083),O=i(O,S,T,M,m[y+15],14,-660478335),M=i(M,O,S,T,m[y+4],20,-405537848),T=i(T,M,O,S,m[y+9],5,568446438),S=i(S,T,M,O,m[y+14],9,-1019803690),O=i(O,S,T,M,m[y+3],14,-187363961),M=i(M,O,S,T,m[y+8],20,1163531501),T=i(T,M,O,S,m[y+13],5,-1444681467),S=i(S,T,M,O,m[y+2],9,-51403784),O=i(O,S,T,M,m[y+7],14,1735328473),M=i(M,O,S,T,m[y+12],20,-1926607734),T=s(T,M,O,S,m[y+5],4,-378558),S=s(S,T,M,O,m[y+8],11,-2022574463),O=s(O,S,T,M,m[y+11],16,1839030562),M=s(M,O,S,T,m[y+14],23,-35309556),T=s(T,M,O,S,m[y+1],4,-1530992060),S=s(S,T,M,O,m[y+4],11,1272893353),O=s(O,S,T,M,m[y+7],16,-155497632),M=s(M,O,S,T,m[y+10],23,-1094730640),T=s(T,M,O,S,m[y+13],4,681279174),S=s(S,T,M,O,m[y],11,-358537222),O=s(O,S,T,M,m[y+3],16,-722521979),M=s(M,O,S,T,m[y+6],23,76029189),T=s(T,M,O,S,m[y+9],4,-640364487),S=s(S,T,M,O,m[y+12],11,-421815835),O=s(O,S,T,M,m[y+15],16,530742520),M=s(M,O,S,T,m[y+2],23,-995338651),T=o(T,M,O,S,m[y],6,-198630844),S=o(S,T,M,O,m[y+7],10,1126891415),O=o(O,S,T,M,m[y+14],15,-1416354905),M=o(M,O,S,T,m[y+5],21,-57434055),T=o(T,M,O,S,m[y+12],6,1700485571),S=o(S,T,M,O,m[y+3],10,-1894986606),O=o(O,S,T,M,m[y+10],15,-1051523),M=o(M,O,S,T,m[y+1],21,-2054922799),T=o(T,M,O,S,m[y+8],6,1873313359),S=o(S,T,M,O,m[y+15],10,-30611744),O=o(O,S,T,M,m[y+6],15,-1560198380),M=o(M,O,S,T,m[y+13],21,1309151649),T=o(T,M,O,S,m[y+4],6,-145523070),S=o(S,T,M,O,m[y+11],10,-1120210379),O=o(O,S,T,M,m[y+2],15,718787259),M=o(M,O,S,T,m[y+9],21,-343485551),T=e(T,h),M=e(M,x),O=e(O,P),S=e(S,E);return[T,M,O,S]}function u(m){var b,y=\"\",h=m.length*32;for(b=0;b<h;b+=8)y+=String.fromCharCode(m[b>>5]>>>b%32&255);return y}function c(m){var b,y=[];for(y[(m.length>>2)-1]=void 0,b=0;b<y.length;b+=1)y[b]=0;var h=m.length*8;for(b=0;b<h;b+=8)y[b>>5]|=(m.charCodeAt(b/8)&255)<<b%32;return y}function l(m){return u(a(c(m),m.length*8))}function p(m){var b=\"0123456789abcdef\",y=\"\",h,x;for(x=0;x<m.length;x+=1)h=m.charCodeAt(x),y+=b.charAt(h>>>4&15)+b.charAt(h&15);return y}function f(m){return unescape(encodeURIComponent(m))}function d(m){return l(f(m))}function g(m){return p(d(m))}return g}();function xa(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Xa(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Uo(){}var Za=.7,Qu=1/Za,jc=\"\\\\s*([+-]?\\\\d+)\\\\s*\",Tp=\"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",Ho=\"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",c_=/^#([0-9a-f]{3,8})$/,l_=new RegExp(`^rgb\\\\(${jc},${jc},${jc}\\\\)$`),p_=new RegExp(`^rgb\\\\(${Ho},${Ho},${Ho}\\\\)$`),f_=new RegExp(`^rgba\\\\(${jc},${jc},${jc},${Tp}\\\\)$`),d_=new RegExp(`^rgba\\\\(${Ho},${Ho},${Ho},${Tp}\\\\)$`),m_=new RegExp(`^hsl\\\\(${Tp},${Ho},${Ho}\\\\)$`),y_=new RegExp(`^hsla\\\\(${Tp},${Ho},${Ho},${Tp}\\\\)$`),gM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xa(Uo,Ip,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hM,formatHex:hM,formatHex8:g_,formatHsl:h_,formatRgb:bM,toString:bM});function hM(){return this.rgb().formatHex()}function g_(){return this.rgb().formatHex8()}function h_(){return MM(this).formatHsl()}function bM(){return this.rgb().formatRgb()}function Ip(e){var t,r;return e=(e+\"\").trim().toLowerCase(),(t=c_.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?xM(t):r===3?new fn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Mm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Mm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=l_.exec(e))?new fn(t[1],t[2],t[3],1):(t=p_.exec(e))?new fn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=f_.exec(e))?Mm(t[1],t[2],t[3],t[4]):(t=d_.exec(e))?Mm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=m_.exec(e))?IM(t[1],t[2]/100,t[3]/100,1):(t=y_.exec(e))?IM(t[1],t[2]/100,t[3]/100,t[4]):gM.hasOwnProperty(e)?xM(gM[e]):e===\"transparent\"?new fn(NaN,NaN,NaN,0):null}function xM(e){return new fn(e>>16&255,e>>8&255,e&255,1)}function Mm(e,t,r,n){return n<=0&&(e=t=r=NaN),new fn(e,t,r,n)}function Ep(e){return e instanceof Uo||(e=Ip(e)),e?(e=e.rgb(),new fn(e.r,e.g,e.b,e.opacity)):new fn}function Ku(e,t,r,n){return arguments.length===1?Ep(e):new fn(e,t,r,n==null?1:n)}function fn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}xa(fn,Ku,Xa(Uo,{brighter(e){return e=e==null?Qu:Math.pow(Qu,e),new fn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Za:Math.pow(Za,e),new fn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fn(ju(this.r),ju(this.g),ju(this.b),vm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:PM,formatHex:PM,formatHex8:b_,formatRgb:TM,toString:TM}));function PM(){return`#${Ju(this.r)}${Ju(this.g)}${Ju(this.b)}`}function b_(){return`#${Ju(this.r)}${Ju(this.g)}${Ju(this.b)}${Ju((isNaN(this.opacity)?1:this.opacity)*255)}`}function TM(){let e=vm(this.opacity);return`${e===1?\"rgb(\":\"rgba(\"}${ju(this.r)}, ${ju(this.g)}, ${ju(this.b)}${e===1?\")\":`, ${e})`}`}function vm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ju(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ju(e){return e=ju(e),(e<16?\"0\":\"\")+e.toString(16)}function IM(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new no(e,t,r,n)}function MM(e){if(e instanceof no)return new no(e.h,e.s,e.l,e.opacity);if(e instanceof Uo||(e=Ip(e)),!e)return new no;if(e instanceof no)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(r-n)/a+(r<n)*6:r===s?o=(n-t)/a+2:o=(t-r)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new no(o,a,u,e.opacity)}function Om(e,t,r,n){return arguments.length===1?MM(e):new no(e,t,r,n==null?1:n)}function no(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}xa(no,Om,Xa(Uo,{brighter(e){return e=e==null?Qu:Math.pow(Qu,e),new no(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Za:Math.pow(Za,e),new no(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new fn(sP(e>=240?e-240:e+120,i,n),sP(e,i,n),sP(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new no(EM(this.h),Dm(this.s),Dm(this.l),vm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=vm(this.opacity);return`${e===1?\"hsl(\":\"hsla(\"}${EM(this.h)}, ${Dm(this.s)*100}%, ${Dm(this.l)*100}%${e===1?\")\":`, ${e})`}`}}));function EM(e){return e=(e||0)%360,e<0?e+360:e}function Dm(e){return Math.max(0,Math.min(1,e||0))}function sP(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}var Sm=Math.PI/180,Rm=180/Math.PI;var Nm=18,DM=.96422,vM=1,OM=.82521,SM=4/29,Qc=6/29,RM=3*Qc*Qc,x_=Qc*Qc*Qc;function NM(e){if(e instanceof qo)return new qo(e.l,e.a,e.b,e.opacity);if(e instanceof Pa)return CM(e);e instanceof fn||(e=Ep(e));var t=cP(e.r),r=cP(e.g),n=cP(e.b),i=oP((.2225045*t+.7168786*r+.0606169*n)/vM),s,o;return t===r&&r===n?s=o=i:(s=oP((.4360747*t+.3850649*r+.1430804*n)/DM),o=oP((.0139322*t+.0971045*r+.7141733*n)/OM)),new qo(116*i-16,500*(s-i),200*(i-o),e.opacity)}function lP(e,t,r,n){return arguments.length===1?NM(e):new qo(e,t,r,n==null?1:n)}function qo(e,t,r,n){this.l=+e,this.a=+t,this.b=+r,this.opacity=+n}xa(qo,lP,Xa(Uo,{brighter(e){return new qo(this.l+Nm*(e==null?1:e),this.a,this.b,this.opacity)},darker(e){return new qo(this.l-Nm*(e==null?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=DM*aP(t),e=vM*aP(e),r=OM*aP(r),new fn(uP(3.1338561*t-1.6168667*e-.4906146*r),uP(-.9787684*t+1.9161415*e+.033454*r),uP(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}}));function oP(e){return e>x_?Math.pow(e,1/3):e/RM+SM}function aP(e){return e>Qc?e*e*e:RM*(e-SM)}function uP(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function cP(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function P_(e){if(e instanceof Pa)return new Pa(e.h,e.c,e.l,e.opacity);if(e instanceof qo||(e=NM(e)),e.a===0&&e.b===0)return new Pa(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Rm;return new Pa(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function AM(e,t,r,n){return arguments.length===1?P_(e):new Pa(e,t,r,n==null?1:n)}function Pa(e,t,r,n){this.h=+e,this.c=+t,this.l=+r,this.opacity=+n}function CM(e){if(isNaN(e.h))return new qo(e.l,0,0,e.opacity);var t=e.h*Sm;return new qo(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}xa(Pa,AM,Xa(Uo,{brighter(e){return new Pa(this.h,this.c,this.l+Nm*(e==null?1:e),this.opacity)},darker(e){return new Pa(this.h,this.c,this.l-Nm*(e==null?1:e),this.opacity)},rgb(){return CM(this).rgb()}}));var FM=-.14861,pP=1.78277,fP=-.29227,Am=-.90649,Mp=1.97294,_M=Mp*Am,LM=Mp*pP,wM=pP*fP-Am*FM;function T_(e){if(e instanceof ec)return new ec(e.h,e.s,e.l,e.opacity);e instanceof fn||(e=Ep(e));var t=e.r/255,r=e.g/255,n=e.b/255,i=(wM*n+_M*t-LM*r)/(wM+_M-LM),s=n-i,o=(Mp*(r-i)-fP*s)/Am,a=Math.sqrt(o*o+s*s)/(Mp*i*(1-i)),u=a?Math.atan2(o,s)*Rm-120:NaN;return new ec(u<0?u+360:u,a,i,e.opacity)}function dP(e,t,r,n){return arguments.length===1?T_(e):new ec(e,t,r,n==null?1:n)}function ec(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}xa(ec,dP,Xa(Uo,{brighter(e){return e=e==null?Qu:Math.pow(Qu,e),new ec(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Za:Math.pow(Za,e),new ec(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Sm,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),n=Math.cos(e),i=Math.sin(e);return new fn(255*(t+r*(FM*n+pP*i)),255*(t+r*(fP*n+Am*i)),255*(t+r*(Mp*n)),this.opacity)}}));function Xr(e,t,r){return e>0==t>0?r===1?t:e+r*(t-e):e*(1-r)+t*r}function Rn(e,t,r){return[Xr(e[0],t[0],r),Xr(e[1],t[1],r)]}function ko(e,t,r){return[Xr(e[0],t[0],r),Xr(e[1],t[1],r),Xr(e[2],t[2],r)]}function Cm(e,t){return[e[0]+t[0],e[1]+t[1]]}function _m(e,t){return[e[0]-t[0],e[1]-t[1]]}function Lm(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]}function Ta(e,t){return Fm(Lm(e,t))}function wm(e,t,r){return[Xr(e[0],t[0],r[0]),Xr(e[1],t[1],r[1])]}function Fm(e){let[t,r,n]=e;return t*t+r*r+n*n}function Kc(e,t){let r=e[1]*t[2]-e[2]*t[1],n=e[2]*t[0]-e[0]*t[2],i=e[0]*t[1]-e[1]*t[0],s=Math.sqrt(r*r+n*n+i*i);return[r/s,n/s,i/s]}function $a(e,t,r){e=Math.fround(e),t=Math.fround(t),r=Math.fround(r);let n=Math.fround(e*e+t*t+r*r);return isFinite(n)&&n!=0}function Yo([e,t,r]){return isFinite(e)&&isFinite(t)&&isFinite(r)}function Xi(e,t){let r;e>t&&(r=e,e=t,t=r);let n=e>0,i=t>0,s=Math.abs(e)>.01,o=Math.abs(t)>.01;if(s||o)return fa(e,t);if(e===0)return t*Math.abs(t);if(t===0)return e*Math.abs(e);if(n!==i)return 0;let a=n?Math.sqrt(e*t):-Math.sqrt(e*t);return a>=e&&t>=a?a:fa(e,t)}function bP(e,t,r,n,i){if(!(isNaN(t)||isNaN(n)||t<0==n<0))for(;;){let s=Xi(e,r),o=i(s);if(!isFinite(o))return;if(s===e||s===r)return Math.abs(t)<=Math.abs(n)?[e,t]:[r,n];if(o===0)return vp(e,t,s,o,r,n,i);t<0!=o<0?(r=s,n=o):(e=s,t=o)}}function XM(e,t,r,n,i){if(!(mP(t)||mP(n))&&yP(t,n))for(;;){let s=Xi(e,r),o=i(s);if(mP(o))return;if(s===e||s===r)return s;if(yP(t,o))r=s,n=o;else if(yP(o,n))e=s,t=o;else return}}function mP(e){for(let t of e)if(isNaN(t))return!0;return!1}function yP(e,t){for(let r=0;r<e.length;r++)if(!I_(e[r],t[r]))return!1;return!0}function I_(e,t){return e<=0&&t>=0||e>=0&&t<=0}function vp(e,t,r,n,i,s,o){let a;if(!isFinite(n))return;isFinite(t)||(a=jn(e,t,r,n,o),a!==void 0&&(e=a,t=o(e))),isFinite(s)||(a=jn(r,n,i,s,o),a!==void 0&&(i=a,s=o(a)));let u,c;t===n?u=[e,t]:u=VM(e,t,r,n,o,n),s===n?c=[i,s]:c=VM(r,n,i,s,o,n);let l;return u&&c&&(l=Xi(u[0],c[0])),l!==void 0?[l,o(l)]:void 0}function jn(e,t,r,n,i){if(isFinite(t)!==isFinite(n))for(;;){let s=Xi(e,r),o=i(s);if(s===e||s===r)return isFinite(t)?e:r;isFinite(o)!==isFinite(t)?(r=s,n=o):(e=s,t=o)}}function Vm(e,t,r,n,i){if(Yo(t)!==Yo(n))for(;;){let s=Xi(e,r),o=i(s);if(s===e||s===r)return Yo(t)?e:r;Yo(o)!==Yo(t)?(r=s,n=o):(e=s,t=o)}}function VM(e,t,r,n,i,s){if(t===s!=(n===s))for(;;){let o=Xi(e,r),a=i(o);if(o===e||o===r)return t===s?[e,t]:[r,n];a===s!=(t===s)?(r=o,n=a):(e=o,t=a)}}function ZM(e,t,r,n,i,s,o){if(e<r&&r<i&&isFinite(t)&&isFinite(n)&&isFinite(s)&&t!==n&&n!==s&&n>t==n>s)for(;;){let a=Xi(e,r),u=o(a),c=Xi(r,i),l=o(c);if(!isFinite(u)||!isFinite(l))return;if(a===e||a===r||c===r||c===i)return u>n==n>t?[a,u]:l>n==n>t?[c,l]:[r,n];if(u===n||l===n)return vp(e,t,r,n,i,s,o);n>t&&u>t&&u>n||n<t&&u<t&&u<n?(i=r,s=n,r=a,n=u):n>t&&l>n&&l>s||n<t&&l<n&&l<s?(e=r,t=n,r=c,n=l):(e=a,t=u,i=c,s=l)}}function os([e,t],[r,n]){return(r-e)*(r-e)+(n-t)*(n-t)}function GM(e,t,r,n,i,s){let o=s(e),a=s(t),u=s(r),c=os(o,n),l=os(a,n),p=os(u,n);if(!(t<=e||r<=t)&&!(!isFinite(c)||!isFinite(l)||!isFinite(p))&&!(l>=c||l>=p))for(;;){if(Math.abs(u[0]-o[0])<i&&Math.abs(u[1]-o[1])<i)return[e,r];let f=Xi(e,t),d=s(f),g=os(d,n),m=Xi(t,r),b=s(m),y=os(b,n);if(!isFinite(g)||!isFinite(y))return;if(f===e||f===t||m===t||m===r)return g<l&&g<y?[f,f]:y<g&&y<l?[m,m]:[t,t];if((g===l||y===l)&&(t=.5*(f+t),a=s(t),l=os(a,n),g===l||y===l))return[e,r];g<l&&g<y?([r,t]=[t,f],[u,a]=[a,d],[p,l]=[l,g]):y<g&&y<l?([e,t]=[t,m],[o,a]=[a,b],[c,l]=[l,y]):([e,r]=[f,m],[o,u]=[d,b],[c,p]=[g,y])}}function BM(e,t,r){return t===void 0&&(t=-1/0),r===void 0&&(r=1/0),Math.min(r,Math.max(t,e))}function gP(e,t,r,n,i,s){let o;if(n!==void 0&&i!==void 0){let p=.5*(n+i);o=r+.01*(r<p?i-n:n-i)}else o=Math.abs(r)>1?r*1.00001:r+1e-5;let a=e(r),u=e(o),c=os(a,t),l=os(u,t);if(!(!isFinite(c)||!isFinite(l))){if(c===l)return[r,o];for(l>c&&([r,o]=[o,r],[a,u]=[u,a],[c,l]=[l,c]);isFinite(r)&&isFinite(o)&&r!==o;){if(i!==void 0&&o>i)return[i,i];if(n!==void 0&&o<n)return[n,n];let p=r+3*(o-r),f=e(p),d=os(f,t);if(!isFinite(d))return[r,o];if(d===l)return[r,o];if(d>l){let g=o>r?GM(r,o,p,t,s,e):GM(p,o,r,t,s,e);return g&&[BM(g[0],n,i),BM(g[1],n,i)]}[r,c,o,l]=[o,l,p,d]}return[r,o]}}function zM(e,t,r,n){return r?n?Math.min(os(e(n[0]),t),os(e(n[1]),t))<Math.min(os(e(r[0]),t),os(e(r[1]),t)):!1:!0}function C8(e,t,r,n,i,s){let o=gP(e,t,r,n,i,s);if(n!==void 0){let a=gP(e,t,n,n,i,s);zM(e,t,o,a)&&(o=a)}if(i!==void 0){let a=gP(e,t,i,n,i,s);zM(e,t,o,a)&&(o=a)}return o}function HM(e,t,r,n,i,s,o,a){let u=Math.abs(n-t),c=Math.abs(s-n),l=Math.abs(a-s);return u>c&&u>l?[e,r]:l>c&&l>u?[i,o]:[r,i]}function el(e,t,r,n,i,s,o,a=0){if(!((r-e)*(i-r)<=0)&&!(!isFinite(e)||!isFinite(r)||!isFinite(i))&&!(!isFinite(t)||!isFinite(s))){if(!isFinite(n)){let u=jn(e,t,r,n,o),c=jn(r,n,i,s,o);return u===void 0||c===void 0?void 0:[u,c]}if(!(Math.abs(n-((i-r)*t+(r-e)*s)/(i-e))<a))for(;;){let u=Xi(e,r),c=o(u),l=Xi(r,i),p=o(l),f=Math.abs(c-fa(t,n)),d=Math.abs(n-fa(c,p)),g=Math.abs(p-fa(n,s));if(f<=a&&d<=a&&g<=a)return;if(!isFinite(c)){let m=jn(e,t,u,c,o),b=jn(u,c,i,s,o);return m===void 0||b===void 0?void 0:[m,b]}if(!isFinite(p)){let m=jn(e,t,l,p,o),b=jn(l,p,i,s,o);return m===void 0||b===void 0?void 0:[m,b]}if((u===e||u===r)&&(l===r||l===i))return Math.abs(n-t)>Math.abs(s-n)?[e,r]:[r,i];if(u===e||u===r)return HM(e,t,r,n,l,p,i,s);if(l===r||l===i)return HM(e,t,u,c,r,n,i,s);f>g&&f>=d?(i=r,s=n,r=u,n=c):g>f&&g>=d?(e=r,t=n,r=l,n=p):(e=u,t=c,i=l,s=p)}}}var Ia=(Math.sqrt(5)-1)/2;function Dp(e,t){return e>0==t>0?e+Ia*(t-e):(1-Ia)*e+Ia*t}function Wa(e,t){let r;e>t&&(r=e,e=t,t=r);let n=e>0,i=t>0,s=Math.abs(e)>.01,o=Math.abs(t)>.01;if(s||o)return Dp(e,t);if(e===0)return t*Math.abs(t);if(t===0)return e*Math.abs(e);if(n!==i)return 0;let a=n?Math.sqrt(e*t):-Math.sqrt(e*t);return a>=e&&t>=a?a:Dp(e,t)}function $M(e,t,r,n,i,s){if(!isFinite(e)||!isFinite(r)||!isFinite(t)||!isFinite(n))return;e>r&&([e,t,r,n]=[r,n,e,t]);let o=Wa(e,r),a=i(o);if(Math.abs(a-Dp(t,n))<=s)return;let u=Wa(e,o),c=i(u);for(;;){let l=Math.abs(c-Dp(t,a)),p=Math.abs(a-Dp(n,c));if(l<=s&&p<=s)return;if(l>p){if(r=o,n=a,o=u,a=c,u=Wa(e,o),c=i(u),u===e||u===o)return qM(e,t,o,a,r,n);if(!isFinite(c))return UM(e,t,u,c,r,n,i)}else{if(e=u,t=c,u=o,c=a,o=Wa(r,o),a=i(o),o===r||o===u)return qM(e,t,u,c,r,n);if(!isFinite(a))return UM(e,t,o,a,r,n,i)}}}function UM(e,t,r,n,i,s,o){let a=jn(e,t,r,n,o),u=jn(r,n,i,s,o);if(!(a===void 0||u===void 0))return[a,u]}function qM(e,t,r,n,i,s){return Math.abs(n-t)>Math.abs(s-n)?[e,r]:[r,i]}function hP(e,t,r){let n=e[0]*(1-Ia)+t[0]*Ia-r[0],i=e[1]*(1-Ia)+t[1]*Ia-r[1],s=e[2]*(1-Ia)+t[2]*Ia-r[2];return n*n+i*i+s*s}function WM(e,t,r,n,i,s){if(!isFinite(e)||!isFinite(r)||!Yo(t)||!Yo(n))return;e>r&&([e,t,r,n]=[r,n,e,t]);let o=Wa(e,r),a=i(o),u=s*s;if(hP(t,n,a)<=u)return;let c=Wa(e,o),l=i(c);for(;;){let p=hP(t,a,l),f=hP(n,l,a);if(p<=u&&f<=u)return;if(p>f){if(r=o,n=a,o=c,a=l,c=Wa(e,o),l=i(c),c===e||c===o)return YM(e,t,o,a,r,n);if(!Yo(l))return kM(e,t,c,l,r,n,i)}else{if(e=c,t=l,c=o,l=a,o=Wa(r,o),a=i(o),o===r||o===c)return YM(e,t,c,l,r,n);if(!Yo(a))return kM(e,t,o,a,r,n,i)}}}function kM(e,t,r,n,i,s,o){let a=Vm(e,t,r,n,o),u=Vm(r,n,i,s,o);if(!(a===void 0||u===void 0))return[a,u]}function YM(e,t,r,n,i,s){return Ta(n,t)>Ta(s,n)?[e,r]:[r,i]}var M_=el,Gm=jn,D_=3.154019550531224,JM=Math.pow(2,-13),Ja=JM*JM,jM=Ja*Ja,xP=Ja,TP=32,io=[],ja=[];function v_(e,t){for(var r=TP;r>0;r--){var n=D_/TP*r,i=Math.sinh(n),s=Math.cosh(Math.PI/2*i),o=1/(Math.exp(Math.PI/2*i)*s),a=Math.cosh(n)/(s*s);e.push(o),t.push(a)}}v_(io,ja);var eD=0;for(Bm=0;Bm<ja.length;Bm++)eD+=ja[Bm];var Bm,zm=1/(1+2*eD);function fi(e,t,r){return .5*(t*(2-r)+e*r)}function O_(e,t,r){var n=.5*(t+r),i=M_(t,e(t),n,e(n),r,e(r),e);return i?.5*(i[0]+i[1]):n}function Op(e,t,r,n,i){return{x1:e,x2:t,value:r,error:n,minerror:i}}function QM(e,t,r){var n=Math.abs(e(fi(t,r,Ja))),i=Math.abs(e(fi(t,r,2*Ja))),s=Math.abs(e(fi(t,r,4*Ja)));return n<Ja||i<Ja?!1:n>1.95*i&&i>1.95*s}function PP(e,t,r){var n=fi(r,t,io[0]),i=fi(t,r,io[0]),s=e(n),o=e(i),a=fi(t,r,1),u=e(a),c,l;if(isFinite(u)&&!isFinite(s)){if(c=Gm(n,s,a,u,e),Math.abs((c-t)/(r-t))>xP)return Op(t,r,NaN,NaN,NaN);t=c,s=e(t)}if(isFinite(u)&&!isFinite(o)){if(l=Gm(a,u,i,o,e),Math.abs((l-r)/(r-t))>xP)return Op(t,r,NaN,NaN,NaN);r=l,o=e(r)}if(isFinite(s)&&isFinite(o)&&!isFinite(u)){if(c=Gm(n,s,a,u,e),l=Gm(a,u,i,o,e),Math.abs((l-c)/(r-t))>xP)return Op(t,r,NaN,NaN,NaN);u=.5*(c+l)}if(QM(e,t,r)||QM(e,r,t))return Op(t,r,NaN,NaN,NaN);for(var p=u,f=0,d=0,g=0,m=0,b=0,y=0,h=0;h<TP;h+=4)b=e(fi(t,r,io[h])),y=e(fi(r,t,io[h])),m=Math.max(m,Math.abs(b),Math.abs(y)),f+=ja[h]*(b+y),b=e(fi(t,r,io[h+1])),y=e(fi(r,t,io[h+1])),m=Math.max(m,Math.abs(b),Math.abs(y)),g+=ja[h+1]*(b+y),b=e(fi(t,r,io[h+2])),y=e(fi(r,t,io[h+2])),m=Math.max(m,Math.abs(b),Math.abs(y)),d+=ja[h+2]*(b+y),b=e(fi(t,r,io[h+3])),y=e(fi(r,t,io[h+3])),m=Math.max(m,Math.abs(b),Math.abs(y)),g+=ja[h+3]*(b+y);var x=p+f,P=x+d,E=P+g,T=Math.abs(d-x),M=Math.abs(g-P),O=zm*(r-t)*E,S=zm*Math.abs(r-t)*m*ja[0],C;return T===0?C=zm*Math.abs(r-t)*M:C=zm*Math.abs(r-t)*M*(M/T)*(M/T),C=Math.max(C,S),Op(t,r,O,C,S)}function KM(e){for(var t=-1/0,r=-1/0,n=-1,i=0,s=0;s<e.length;s++){var o=e[s];i+=o.value,o.error>t&&(t=o.error,n=s),o.minerror>r&&(r=o.minerror)}return{maxerror:t,maxminerror:r,maxindex:n,totalvalue:i}}function Sp(e,t,r,n=32){if(isNaN(t)||isNaN(r))return NaN;var i=1;if(t>r){var s=t;t=r,r=s,i=-1}if(t===1/0&&r===1/0)return NaN;if(t===-1/0&&r===-1/0)return NaN;if(t===-1/0&&r===1/0)return i*Sp(function(f){return e(f/((1+f)*(1-f)))*(1+f*f)/((1+f)*(1+f)*(1-f)*(1-f))},-1,1,n);if(t===-1/0)return i*Sp(function(f){return-e(r-f/(1-f))/((1-f)*(1-f))},1,0,n);if(r===1/0)return i*Sp(function(f){return e(t+f/(1-f))/((1-f)*(1-f))},0,1,n);for(var o=[PP(e,t,r)],a=KM(o),u=1;u<n&&!(Math.abs(a.maxerror/a.totalvalue)<=32*jM||a.maxerror<=32*jM||a.maxerror<=32*a.maxminerror||!isFinite(a.maxerror)||!isFinite(a.maxminerror));u++){var c=o[o.length-1];o[o.length-1]=o[a.maxindex],o[a.maxindex]=c;var l=o.pop(),p=O_(e,fi(l.x2,l.x1,.125),fi(l.x1,l.x2,.125));o.push(PP(e,l.x1,p)),o.push(PP(e,p,l.x2)),a=KM(o)}return!isFinite(a.maxerror)||!isFinite(a.maxminerror)?NaN:Math.abs(a.totalvalue)<=10*a.maxminerror?0:i*a.totalvalue}var Rp=class{constructor(t){this.comparator=t;this._data=[]}size(){return this._data.length}queue(t){let r=this._data.length;for(this._data.push(t);r>0;){let n=r-1>>>1;if(this.comparator(this._data[r],this._data[n])<0){let i=this._data[n];this._data[n]=this._data[r],this._data[r]=i,r=n}else break}}dequeue(){let t=this._data[0],r=this._data.pop();if(this._data.length>0&&r!==void 0){this._data[0]=r;let n=0,i=this._data.length-1;for(;;){let s=(n<<1)+1,o=s+1,a=n;if(s<=i&&this.comparator(this._data[s],this._data[a])<0&&(a=s),o<=i&&this.comparator(this._data[o],this._data[a])<0&&(a=o),a!==n){let u=this._data[a];this._data[a]=this._data[n],this._data[n]=u,n=a}else break}}return t}peek(){return this._data[0]}clear(){this._data.length=0}};function R_(e,t){let r=e.start[1]-e.end[1],n=e.end[0]-e.start[0],i=t.start[1]-t.end[1],s=t.end[0]-t.start[0],o=r*e.end[0]+n*e.end[1],a=i*t.end[0]+s*t.end[1],u=r*s-i*n;if(u!==0)return(r*a-i*o)/u}function N_(e,t,r){if(r.xSlope>=t.xSlope)return;if(t.scanlineX===r.scanlineX)return e;let n=t.start[1]>t.end[1]?t.start:t.end,i=r.start[1]>r.end[1]?r.start:r.end,s=n[1];if(i[1]<n[1]){if(s=i[1],IP(s,t)<i[0])return}else if(n[1]<i[1]){let a=IP(s,r);if(n[0]<a)return}else if(n[0]<i[0])return;let o=R_(t,r);if(o!==void 0)return Math.max(Math.min(o,s),e)}function IP(e,t){let r=t.end[0],n=t.start[0],i=t.end[1],s=t.start[1];if(i===e)return r;if(s===e)return n;{let o=(e-i)/(s-i),a=(1-o)*r+o*n;if(r<n){if(a<=r)return r;if(n<=a)return n}else{if(a<=n)return n;if(r<=a)return r}return a}}function EP(e){let t=0,r=0,n=!1,i=0;for(let{scanlineX:s,isClockwise:o}of e)o?i+=1:i-=1,i!==0&&!n?(n=!0,r=s):i===0&&n&&(n=!1,t+=s-r);return t}var Np=class{constructor(t){this.scanlineY=-1/0;let r=1;this.activeEdges=[],this.events=new Rp(function(n,i){return n.y-i.y}),this.scanlineY=-1/0,this.polygonLength=t.length-1;for(let n=t.length-1;n>=1;n--){let i=t[n],s=t[n-1],o={id:r++,index:n-1,end:i,start:s,scanlineX:0,xSlope:1/0,isClockwise:s[1]>i[1],skipIntersectionWith:{}};s[1]>i[1]?(this.events.queue({type:\"+\",y:i[1],edge:o}),this.events.queue({type:\"-\",y:s[1],edge:o}),o.xSlope=(s[0]-i[0])/(s[1]-i[1]),o.scanlineX=i[0]):i[1]>s[1]?(this.events.queue({type:\"+\",y:s[1],edge:o}),this.events.queue({type:\"-\",y:i[1],edge:o}),o.xSlope=(i[0]-s[0])/(i[1]-s[1]),o.scanlineX=s[0]):this.events.queue({type:\"h\",y:s[1],edge:o})}}nextScanline(){var s;let t,r=this.events.peek();if(!r)return;if(r.y<=this.scanlineY)throw new Error(\"Programming error: expected next event to begin a new scanline\");this.scanlineY=r.y,this.updateActiveEdgeScanlineIntersections();let n=EP(this.activeEdges),i=[];for(;t=this.events.dequeue();)if(t.type===\"x\"?this.swapActiveEdges(t):t.type===\"+\"?this.insertActiveEdge(t):t.type===\"-\"&&this.removeActiveEdge(t),i.push(t),((s=this.events.peek())==null?void 0:s.y)!==this.scanlineY)return{y:this.scanlineY,activeEdges:this.activeEdges,lengthBeforeProcessingEvents:n,events:i}}updateActiveEdgeScanlineIntersections(){let t=-1/0;for(let r of this.activeEdges){let n=IP(this.scanlineY,r);n<t?n=t:t=n,r.scanlineX=n}}insertActiveEdge(t){let r=this.activeEdges,n=t.edge,i=t.y,{xSlope:s,scanlineX:o}=n;for(var a=0;a<r.length;a++){let u=r[a];if(o<u.scanlineX||o===u.scanlineX&&s<=u.xSlope)break}r.splice(a,0,n),this.checkIntersection(i,r[a-1],n),this.checkIntersection(i,n,r[a+1])}checkIntersection(t,r,n){if(!r||!n||r.index===(n.index+1)%this.polygonLength||n.index===(r.index+1)%this.polygonLength)return;if(r.id<n.id){if(r.skipIntersectionWith[n.id])return}else if(n.skipIntersectionWith[r.id])return;let i=N_(t,r,n);if(i===void 0)return;r.id<n.id?r.skipIntersectionWith[n.id]=!0:n.skipIntersectionWith[r.id]=!0;let s={type:\"x\",y:i,edge1:r,edge2:n};this.events.queue(s)}removeActiveEdge(t){let r=this.activeEdges,n=t.edge,i=t.y,s=r.indexOf(n);r.splice(s,1),this.checkIntersection(i,r[s-1],r[s])}swapActiveEdges(t){let r=this.activeEdges,n=t.edge1,i=t.edge2,s=t.y,o=r.indexOf(n),a=o+1;o===-1||r[a]!==i?n.id<i.id?delete n.skipIntersectionWith[i.id]:delete i.skipIntersectionWith[n.id]:(r[o]=i,r[a]=n,this.checkIntersection(s,r[o-1],i),this.checkIntersection(s,n,r[a+1]))}static debugEvent(t){let r=`y=${t.y} `;return r+=t.type===\"x\"?`[x ${t.edge1.index}/${t.edge2.index}]`:`[${t.type} ${t.edge.index}] (${t.edge.end})-(${t.edge.start})`,r}debugState(){return`y=${this.scanlineY}\n${this.activeEdges.map(t=>`[${t.index}] ${t.scanlineX}`)}`}};function A_(e){let t=e.slice(0,2),r=e.slice(-2);return t[0]!==r[0]||t[1]!==r[1]?[...e,...t]:e}function V8(e,t){if(!e)return!1;let r=A_(e),[n,i]=t,s=0;for(var o=r.length-1;o>=3;o-=2){let a=r[o-3],u=r[o-2],c=r[o-1],l=r[o];u>i!=l>i&&n<(c-a)*(i-u)/(l-u)+a&&(u>l?s+=1:u<l&&(s-=1))}return s!==0}function rD(e){if(e.length<4||e[0][0]!==e[e.length-1][0]||e[0][1]!==e[e.length-1][1])return 0;let t=new Np(e),r,n=0,i;for(;i=t.nextScanline();){let s=i.lengthBeforeProcessingEvents;r&&(n+=.5*(i.y-r.y)*(s+r.length)),r={y:i.y,length:EP(i.activeEdges)}}return n}function nD(e){if(!e.length)return[];if(e[0][0]!==e[e.length-1][0]||e[0][1]!==e[e.length-1][1])throw new Error(\"Programming error: expected last point to be a duplicate of the first point.\");for(let f=0;f<e.length-1;f++)if(e[f][0]===e[f+1][0]&&e[f][1]===e[f+1][1])throw new Error(`Programming error: unexpected duplicate point at ${f+1}`);let t=new Np(e),r=e.slice(0,-1).map(()=>0),n;for(;n=t.nextScanline();)for(let f of n.events){let d={};if(f.type===\"h\"){let g=f.edge;d[g.index]={xMin:Math.min(g.end[0],g.start[0]),xMax:Math.max(g.end[0],g.start[0]),dx:g.end[0]-g.start[0]}}else if(f.type===\"x\"){let g=f.edge1,m=f.edge2,b=tD([g.start,g.end],[m.start,m.end]),y=b>0?-1:b<0?1:0;r[g.index]+=y,r[m.index]-=y}for(let g of n.activeEdges){let m=g.end[1]-g.start[1];for(let b in d){let{xMin:y,xMax:h,dx:x}=d[b];if(y<g.scanlineX&&g.scanlineX<h){let P=x*m,E=P>0?-1:P<0?1:0;r[b]+=E,r[g.index]-=E}}}}let i=e.slice(0,-1).map(()=>0),s=e[0][1],o=0;for(let f=1;f<e.length;f++)e[f][1]<s&&(s=e[f][1],o=f);let a=e.length-1,u=o>0?o-1:a-1,c=(o+1)%a,p=tD([e[u],e[o]],[e[o],e[c]])>0?1:0;i[o]=p>0?-1:1;for(let f=0;f<a-1;f++){let d=(o+f)%a;p+=r[d],i[(d+1)%a]=p>0?-1:1}return i}function tD(e,t){let r=e[1][0]-e[0][0],n=e[1][1]-e[0][1],i=t[1][0]-t[0][0],s=t[1][1]-t[0][1];return r*s-n*i}var uD={spy:yM},{cosh:cD,sinh:lD,tanh:pD,acosh:fD,asinh:dD,atanh:mD,expm1:C_,log1p:wp,sign:RP,hypot:so}=Math,__=pa,NP=Nu,yD=Au,L_=function(e){let t=e*e;return 1+t===1?1:1+t===t?Math.abs(e):Math.sqrt(t+1)},w_=function(e){let t=e*e;return t<1?NaN:t-1===t?Math.abs(e):Math.sqrt(t-1)};function Zr(e,t,r){return Math.max(t,Math.min(r,e))}function gD(e,t){let r=e%t;return e*t<0&&r!==0?r+t:r}function hD(e,t){e=Math.round(e),t=Math.round(t);let r=NP(e,t);return Math.abs(e/r*t)}function F_(e){if(e.length===0)return NaN;let t=e[0];for(let r=1;r<e.length;r++)t=NP(t,e[r]);return t}function V_(e){if(e.length===0)return NaN;let t=e[0];for(let r=1;r<e.length;r++)t=hD(t,e[r]);return t}function Qa(e,t){if(isNaN(e))return e;if(isNaN(t))return t;if(!isFinite(e)&&!isFinite(t))return NaN;if(t===0||e===t)return 1;if(e===0)return Ds(t);let r=isFinite(e)&&e===Math.round(e),n=isFinite(t)&&t===Math.round(t);if(e<0&&t<0&&e-t<0)return r&&n?0:Ds(e-t)*Ds(t)/(Ds(e)*Qa(-e,-t));if(e<0&&t>0&&e-t<0)return r&&n?Math.pow(-1,t)*Qa(t-e-1,t):Ds(e-t)/Ds(e)*Qa(-(e-t),t);if(e<0&&t<0&&e-t>0)return r&&n?Math.pow(-1,e-t)*Qa(-t-1,e-t):Ds(t)/Ds(e)*Qa(-t,-e);if(e>0&&t<0&&e-t>0){let a=Math.abs(e)>Math.abs(t)?-t:e;return Ds(t)/Qa(e-t,a)}if(e>0&&t>0&&e-t<0)return Ds(e-t)/Qa(t,e);if(e<0||t<0||e-t<0||e<15&&t<15&&e-t<15)return qm(e,t)/rc(t);let i=Zi(e)-Zi(t)-Zi(e-t)-(e-t)*wp(-t/e),s=Math.sqrt(e/(2*Math.PI*t*(e-t)))*Math.pow(e/t,t)*Math.exp(i);return r&&n&&e>0&&t>0&&e-t>0?Math.round(s):s}function qm(e,t){if(isNaN(e))return e;if(isNaN(t))return t;if(!isFinite(e)&&!isFinite(t))return NaN;if(t===0)return 1;if(e===0)return 1/rc(-t);let r=isFinite(e)&&e===Math.round(e),n=isFinite(t)&&t===Math.round(t);if(e<0&&e-t<0)return r&&n?Math.pow(-1,t)*qm(t-e-1,t):Ds(e-t)/Ds(e)*qm(-(e-t),t);if(e<0||e-t<0||e<15&&e-t<15)return rc(e)/rc(e-t);let i=Zi(e)-Zi(e-t)-(e-t)*wp(-t/e),s=Math.sqrt(e/(e-t))*Math.pow(e/Math.E,t)*Math.exp(i);return r&&n&&e>0&&t>0&&e-t>0?Math.round(s):s}function rc(e){return _p(e+1)}function _p(e){if(e===-1/0)return NaN;let t=Math.round(e)===e;if(e<0)return t?1/0:Math.PI/(vD(e)*_p(1-e));if(e>170)return 1/0;let r;return e<15?r=bD(e):e<120?r=G_(e):r=Math.exp(xD(e)),t?Math.round(r):r}function bD(e){let t=4.077131788261185,r=7.024675027156382,n=6.657107767450176,i=3.766266976716022,s=1.2792371666711133,o=.24304596436338005,a=.020049769312165774,u=4.154347453162709,c=7.270007565107539,l=6.97805297331391,p=3.989651532924167,f=1.367176195613119,d=.26175627691546965,g=.021742722739397567,m=1+e*(t+e*(r+e*(n+e*(i+e*(s+e*(o+e*a)))))),b=1+e*(u+e*(c+e*(l+e*(p+e*(f+e*(d+e*g))))));return Math.E*Math.pow((1+e)/Math.E,1+e)/(e*Math.sqrt(1+e))*(m/b)}function G_(e){let t=e-1;return Math.pow(t,t)*Math.exp(AP(t)-t)*Math.sqrt(2*Math.PI*t)}function xD(e){let t=e-1;return t*(Math.log(t)-1)+.5*Math.log(2*Math.PI*t)+AP(t)}function B_(e){return e<0?NaN:e<15?Math.log(bD(e)):xD(e)}var PD=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870];function TD(e,t){if(e!==Math.floor(e))return NaN;if(e<0)return NaN;if(e===0)return 1/DD(t);let r=Ft(t);if(e===1)return-1/(r*r);let n=sr(t);if(e===2)return 2*n/(r*r*r);let i=[0,2],s=[];for(let a=3;a<=e;a++){s=[];for(let u=0;u<a;u++){let c=0,l=0;u>0&&(c=(a-u+1)*i[u-1]),u+2<a&&(l=(u+1)*i[u+1]),s.push(-(c+l))}i=s}let o=0;for(let a=e-1;a>=0;a--)o=s[a]+n*o;return o/Math.pow(r,e+1)}function ID(e,t){if(e<0)return NaN;if(e!==Math.floor(e))return NaN;let r=e%2===0?-1:1;if(t<0)return-r*ID(e,1-t)-Math.pow(Math.PI,e+1)*TD(e,Math.PI*t);let n=rc(e),i=0,s=Math.pow(t,-(e+1));for(;t<10;)i+=s,t++,s=Math.pow(t,-(e+1));i+=e===0?-Math.log(t):s*t/e,i+=.5*s;let o=PD,a=e+1,u=2,c=s*t*a/u,l=1/(t*t);for(let p=1;p<=14;p++)c*=l,i+=c*o[p-1],a++,u++,c*=a/u,a++,u++,c*=a/u;return n*r*i}function z_(e){let t=Math.log(e);return Math.exp(Math.round(t))===e?Math.round(t):t}function ED(e,t){if(t===0)return NaN;let r;return t===Math.E?r=Math.log(e):t===2&&Math.log2?r=Math.log2(e):t===10&&Math.log10?r=Math.log10(e):r=Math.log(e)/Math.log(t),Math.pow(t,Math.round(r))===e?Math.round(r):r}function H_(e){return ED(e,10)}function U_(e,t){return yD(e,1/t)}var MD=1/Math.PI;function $m(e){return e>1e12?!1:Math.round(MD*e)*Math.PI===e}function Wm(e){if(e>1e12)return!1;let t=Math.round(2*MD*e);return t%2===1&&t*Math.PI===2*e}function Ft(e){return $m(Math.abs(e))?0:Math.sin(e)}function sr(e){return Wm(Math.abs(e))?0:Math.cos(e)}function DD(e){let t=Math.abs(e);return $m(t)?0:Wm(t)?1/0:Math.tan(e)}function q_(e){return Wm(Math.abs(e))?1/0:1/Math.cos(e)}function k_(e){return $m(Math.abs(e))?1/0:1/Math.sin(e)}function Y_(e){let t=Math.abs(e);return $m(t)?1/0:Wm(t)?0:1/Math.tan(e)}function X_(e){return e>0?Math.atan(1/e):Math.PI/2-Math.atan(e)}function Z_(e){return Math.asin(1/e)}function $_(e){return Math.acos(1/e)}function W_(e){return 1/cD(e)}function J_(e){return 1/lD(e)}function j_(e){return 1/pD(e)}function Q_(e){return fD(1/e)}function K_(e){return dD(1/e)}function eL(e){return mD(1/e)}function vD(e){if(e===0||isNaN(e))return e;if(!isFinite(e))return NaN;if(e===Math.floor(e))return e>0?0:-0;let t=Math.round(2*e),r=-.5*t+e,n=t&2?-1:1,i=t&1?Math.cos(Math.PI*r):Math.sin(Math.PI*r);return n*i}function Ds(e){return e===1/0||e===-1/0?0:e===0?1:vD(e)/(Math.PI*e)}function Zo(e){let t=0;for(let r=0;r<e.length;r++)t+=e[r];return t/e.length}function tL(e){let t=0;for(let r=0;r<e.length;r++)t+=e[r];return t}function DP(e){return e>50?Math.exp(.5*((1-e)*wp(-1/(e-1))-1)+Zi(.5*(e-1))-Zi(.5*(e-2)))*Math.sqrt((1-1/e)/(2*Math.PI)):_p((e+1)/2)/(_p(e/2)*Math.sqrt(e*Math.PI))}function rl(e,t,r=e-t){if(Math.abs(r)<.1*(e+t)){let n=r/(e+t),i=r*r/(e+t),s=2*e*n;for(let o=1;o<10;o++){s*=n*n;let a=i+s/(2*o+1);if(a==i)return a;i=a}}return e*Math.log(e/t)+t-e}var rL=[0,.08106146679532726,.0413406959554093,.02767792568499834,.020790672103765093,.016644691189821193,.013876128823070748,.01189670994589177,.010411265261972096,.009255462182712733,.00833056343336287,.007573675487951841,.00694284010720953,.006408994188004207,.0059513701127588475,.005554733551962801];function Zi(e){return e>15?AP(e):e<0?NaN:e===Math.floor(e)?rL[e]:Math.log(rc(e)/(Math.pow(e,e)*Math.exp(-e)*Math.sqrt(2*Math.PI*e)))}function AP(e){let t=.08333333333333333,r=.002777777777777778,n=.0007936507936507937,i=.0005952380952380953,s=.0008417508417508417,o=e*e;return(t-(r-(n-(i-s/o)/o)/o)/o)/e}function Jm(e,t){return t<=0?NaN:DP(t)*Math.pow(1+e*e/t,-((t+1)/2))}function tc(e,t){if(t>0)return 1-tc(e,-t);if(t===-1/0)return 0;if(t===0)return .5;if(e>=40&&t>-1)return .5+DP(e)*nL(e,t);if(t/e<-1e3){let n=t*t;return DP(e)*Math.pow(e,.5*(e-1))*Math.pow(Math.abs(t),-e)*(1-e*e*(e+1)*(1/(2+e)+e*(e+3)/(4*(4+e)*n))/(2*n))}let r=Math.sqrt(t*t+e);return iL((t+r)/(2*r),e/2,e/2)}function nL(e,t){let r=t*t/e,n=t,i=n;for(let s=1;s<=15;s++)n*=-(2*s-1)/(2*s+1)*(.5*(e+1)+s-1)/s*r,i+=n;return i}function Hm(e,t,r){return r<=0?NaN:e===-1/0?tc(r,t):e>0&&t>0?tc(r,-e)-tc(r,-t):tc(r,t)-tc(r,e)}function iL(e,t,r){if(e<0||e>1)throw new RangeError(\"First argument must be between 0 and 1.\");if(t===1&&r===1)return e;if(e===0)return 0;if(e===1)return 1;if(t===0)return 1;if(r===0)return 0;{let n=Zi(t+r)-Zi(t)-Zi(r)-rl(t,(t+r)*e)-rl(r,(t+r)*(1-e),(t+r)*e-t),i=Math.exp(n)*Math.sqrt(t*r/(2*Math.PI*(t+r)));return e<(t+1)/(t+r+2)?i*iD(e,t,r)/t:1-i*iD(1-e,r,t)/r}}function iD(e,t,r){let n=Math.pow(2,-52),i=1e-300,s=t+r,o=t+1,a=t-1,u=1,c=1-s*e/o;Math.abs(c)<i&&(c=i),c=1/c;let l=c;for(let p=1;p<=100;p++){let f=2*p,d=p*(r-p)*e/((a+f)*(t+f));c=1+d*c,Math.abs(c)<i&&(c=i),u=1+d/u,Math.abs(u)<i&&(u=i),c=1/c,l*=c*u,d=-(t+p)*(s+p)*e/((t+f)*(o+f)),c=1+d*c,Math.abs(c)<i&&(c=i),u=1+d/u,Math.abs(u)<i&&(u=i),c=1/c;let g=c*u;if(l*=g,Math.abs(g-1)<=n)return l}return l}function sL(e,t){let r=Math.pow(2,-52),n=1e-300,i=1,s=e,o=i/s,a=i/n,u=1/s,c=2,l=0,p=s,f=-(e-1),d=0;do f-=1,p+=1,u=u*f*t+p,u===0&&(u=n),a=p+f*t/a,a===0&&(a=n),u=1/u,l=a*u,o=o*l,d+=1,p+=1,u=u*d*t+p,u===0&&(u=n),a=p+d*t/a,a===0&&(a=n),u=1/u,l=a*u,o*=l,c+=2;while(c<100&&Math.abs(l-1)>r);return o}function oL(e,t){let r=Math.pow(2,-52),n=1e-300,i=1,s=t+1-e,o=i/s,a=i/n,u=1/s,c=2,l=0,p=s;do{let f=-(c-1)*(c-e-1);p+=2,u=u*f+p,u===0&&(u=n),a=p+f/a,a===0&&(a=n),u=1/u,l=a*u,o*=l,c+=1}while(c<100&&Math.abs(l-1)>r);return o}function aL(e,t){let r=t/e,n=RP(t-e)*Math.sqrt(2*rl(1,r)),i=[1,-.3333333333333333,.08333333333333333,-.014814814814814815,.0011574074074074073,.0003527336860670194,-.0001787551440329218,3919263178522438e-20,-2185448510679992e-21,-185406221071516e-20,8296711340953087e-22,-17665952736826078e-23,6707853543401498e-24,10261809784240309e-24,-4382036018453353e-24,914769958223679e-24,-25514193994946248e-27,-5830772132550426e-26,24361948020667415e-27,-50276692801141755e-28,11004392031956135e-29,3371763262400985e-28,-1392388722418162e-28,28534893807047445e-30,-5139111834242572e-31,-19752288294349442e-31,8099521156704561e-31],s=i.length-2,o=0,a=0,u=0,c=0;for(;s>=0;s--)u=(s+2)*o/e+i[s+1],c=n*c+u,o=a,a=u;if(c=e/(e+o)*c,t<e){let l=Math.exp(-.5*e*n*n)*(.5*Ea(-n*Math.sqrt(e/2))-c/Math.sqrt(2*Math.PI*e));return isFinite(l)?1-l:1}else{let l=Math.exp(-.5*e*n*n)*(.5*Ea(n*Math.sqrt(e/2))+c/Math.sqrt(2*Math.PI*e));return isFinite(l)?l:0}}function sD(e,t,r){return(e-t)/(Math.SQRT2*Math.abs(r))}function Ap(e){return e<0?.5*Math.exp(-e*e)*Ea(-e):1-.5*Math.exp(-e*e)*Ea(e)}function uL(e,t,r,n){let i=sD(t,r,n);if(e===-1/0)return Ap(i);let s=sD(e,r,n);return e>0&&t>0?Ap(-s)-Ap(-i):Ap(i)-Ap(s)}function CP(e,t,r){return 1/Math.sqrt(2*Math.PI*r*r)*Math.exp(-(e-t)*(e-t)/(2*r*r))}function _P(e){let t=uD.spy(e),r=parseInt(t.slice(0,8),16)&2097151,n=parseInt(t.slice(8,16),16);return(r*4294967296+n)/9007199254740992}function OD(e,t){for(let r=t.length-1;r>0;r--){let n=e+\"::sc\"+r,i=Math.floor(_P(n)*(r+1)),s=t[r];t[r]=t[i],t[i]=s}}function cL(e,t){let r=t.slice();return OD(e,r),r}function LP(e,t){let r=[];for(let n=0;n<t;n++)r.push(n);return OD(e,r),r}function Ka(e,t,r){return _P(e)*(r-t)+t}function lL(e,t,r){let n=0,i,s,o,a;do i=e+\"::sc\"+n,n+=1,s=Ka(i,0,1)*2-1,i=e+\"::sc\"+n,n+=1,o=Ka(i,0,1)*2-1,a=s*s+o*o;while(a>=1||a===0);let u=Math.sqrt(-2*Math.log(a)/a);return t+r*s*u}function pL(e,t){if(t<=0)return NaN;let r=0,n,i,s,o;do n=e+\"::sc\"+r,r+=1,i=Ka(n,0,1)*2-1,n=e+\"::sc\"+r,r+=1,s=Ka(n,0,1)*2-1,o=i*i+s*s;while(o>1);let a=i*i/o,u=t*(Math.pow(o,-2/t)-1);return n=e+\"::sc\"+r,r+=1,(Ka(n,0,1)<.5?-1:1)*Math.sqrt(a*u)}function fL(e,t,r){return t=Zr(Math.round(t),0,1/0),t===1/0?NaN:(r=Zr(r,0,1),RD(Ka(e,0,1),t,r))}function dL(e,t){return t<0?NaN:SD(Ka(e,0,1),t)}function Um(e,t,r){return e>=t?1:e<0?0:e<Math.floor((t+1)*r)?oD(e,t,r):1-oD(t-e-1,t,1-r)}function oD(e,t,r){let n=(1-r)/r,i=jm(e,t,r),s=i;for(;e>0&&(i*=e/(t-e+1)*n,s+i!==s);e--)s+=i;return s}function mL(e,t,r,n){return r=Zr(Math.round(r),0,1/0),r===1/0?NaN:(n=Zr(n,0,1),t<0?0:(e=Math.ceil(e),t=Math.floor(t),e===-1/0?Um(t,r,n):Um(t,r,n)-Um(e-1,r,n)))}function jm(e,t,r){if(e=Math.round(e),t=Zr(Math.round(t),0,1/0),t===1/0)return NaN;if(r=Zr(r,0,1),e<0||e>t)return 0;if(r===0)return e===0?1:0;if(r===1)return e===t?1:0;if(e===0)return Math.exp(t*wp(-r));if(e===t)return Math.pow(r,t);let n=Zi(t)-Zi(e)-Zi(t-e)-rl(e,t*r)-rl(t-e,t*(1-r),t*r-e);return Math.exp(n)*Math.sqrt(t/(2*Math.PI*e*(t-e)))}function nl(e,t){return t<0?NaN:(e=Math.round(e),e<0?0:t===0?e===0?1:0:e===0?Math.exp(-t):Math.exp(-Zi(e)-rl(e,t))/Math.sqrt(2*Math.PI*e))}function Cp(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e===1/0)return 1;if(e=Math.floor(e),e<0)return 0;if(t===0)return 1;if(e+1>12&&2.35*(e+1)>t&&.3*(e+1)<t)return aL(e+1,t);if(e+1>=t){let r=sL(e+1,t);return isFinite(r)?1-t*nl(e,t)*r:1}else{let r=oL(e+1,t);return isFinite(r)?t*nl(e,t)*r:0}}function yL(e,t,r){return r<0?NaN:(e=Math.ceil(e),t=Math.floor(t),t<0?0:e===-1/0?Cp(t,r):Cp(t,r)-Cp(e-1,r))}function wP(e,t,r){return r<=t?NaN:e<t||e>r?0:1/(r-t)}function aD(e,t,r){return r<=t?NaN:e<t?0:e>r?1:(e-t)/(r-t)}function gL(e,t,r,n){return aD(t,r,n)-aD(e,r,n)}function hL(e){let t=-e*e;return t<-750?e>=0?1:-1:e>=.065?1-Math.exp(t)*Ea(e):e<=-.065?Math.exp(t)*Ea(-e)-1:e*(1.1283791670955126+t*(.37612638903183754+t*(.11283791670955126+t*(.026866170645131252+t*.005223977625442188))))}function Ea(e){let t=.9999999999999999,r=2.224574423459406,n=2.444115549920689,i=1.7057986861852539,s=.8257463703357973,o=.28647031042892007,a=.07124513844341643,u=.012296749268608364,c=.001347817214557592,l=7263959403471071e-20,p=1,f=3.352953590554884,d=5.227518529742423,g=5.003720878235473,m=3.266590890998987,b=1.5255421920765353,y=.5185887413188858,h=.12747319185915415,x=.02185979575963238,P=.0023889438122503674,E=.00012875032817508128;if(e<0)return e<-6.1?2*Math.exp(e*e):2*Math.exp(e*e)-Ea(-e);if(e>50){let T=.5641895835477563,M=e*e;return e>5e7?T/e:T*(M*(M+4.5)+2)/(e*(M*(M+5)+3.75))}else{let T=t+e*(r+e*(n+e*(i+e*(s+e*(o+e*(a+e*(u+e*(c+e*l)))))))),M=p+e*(f+e*(d+e*(g+e*(m+e*(b+e*(y+e*(h+e*(x+e*(P+e*E)))))))));return T/M}}function FP(e){let t=-39.6968302866538,r=220.946098424521,n=-275.928510446969,i=138.357751867269,s=-30.6647980661472,o=2.50662827745924,a=-54.4760987982241,u=161.585836858041,c=-155.698979859887,l=66.8013118877197,p=-13.2806815528857,f=-.00778489400243029,d=-.322396458041136,g=-2.40075827716184,m=-2.54973253934373,b=4.37466414146497,y=2.93816398269878,h=.00778469570904146,x=.32246712907004,P=2.445134137143,E=3.75440866190742,T=.02425,M,O,S;return e>.5?-FP(1-e):e===.5?0:e<0?NaN:e===0?-1/0:(e<T?(M=Math.sqrt(-2*Math.log(e)),S=(((((f*M+d)*M+g)*M+m)*M+b)*M+y)/((((h*M+x)*M+P)*M+E)*M+1)):(M=e-.5,O=M*M,S=(((((t*O+r)*O+n)*O+i)*O+s)*O+o)*M/(((((a*O+u)*O+c)*O+l)*O+p)*O+1)),S-Math.sqrt(2*Math.PI)*(.5*Ea(-S/Math.SQRT2)-Math.exp(.5*S*S)*e))}function SD(e,t){if(t<0||e<0||e>1)return NaN;if(t===0||e===0)return 0;if(e===1)return 1/0;let r=-1,n=Math.ceil(t);for(;Cp(n,t)<e;)n=2*n;let i=Math.floor(r+(n-r)/2);for(;r<i&&i<n;)Cp(i,t)<e?r=i:n=i,i=Math.floor(r+(n-r)/2);return n}function RD(e,t,r){if(t!==Math.round(t))return NaN;if(r<0||r>1)return NaN;if(e<0||e>1)return NaN;if(e===0)return 0;if(e===1)return t;if(t===0)return 0;if(r===1)return t;if(r===0)return 0;let n=-1,i=t,s=Math.floor(n+(i-n)/2);for(;n<s&&s<i;)Um(s,t,r)<e?n=s:i=s,s=Math.floor(n+(i-n)/2);return i}function ND(e,t){if(isNaN(t)||t<=0||e<0||e>1)return NaN;if(e===0)return-1/0;if(e===1)return 1/0;if(t===1||t===2||t===4)return MP(t,e);let r,n;if(e===.5)return 0;if(e>.5)r=t>1?FP(e):MP(1,e),n=t>1?MP(1,e):Math.pow(Jm(0,t)*Math.pow(t,(t-1)/2)/(1-e),1/t);else return-ND(1-e,t);return bL(t,e,r,n)}function MP(e,t){let r=4*t*(1-t);switch(e){case 1:return Math.tan(Math.PI*(t-.5));case 2:return 2*(t-.5)*Math.sqrt(2/r);case 4:let n=Math.cos(Math.acos(Math.sqrt(r))/3)/Math.sqrt(r);return RP(t-.5)*2*Math.sqrt(n-1);default:throw new Error(\"_invTSimple() must be called with 1, 2, or 4 df.\")}}function bL(e,t,r,n){if(!isFinite(r)||!isFinite(n))return NaN;let i=r,s=n;for(;;){let o=Xi(i,s),a=tc(e,o);if(o===i||o===s)return a>t?i:s;a<t?i=o:s=o}}function xL(e,t,r){return e<0||e>1||r<=t?NaN:e===0?t:e===1?r:t+e*(r-t)}function AD(e,t){let r=km(e);return(Zo(e)-t)*Math.sqrt(e.length)/r}function CD(e,t){let r=e.length,n=Zo(e),i=km(e),s=t.length,o=Zo(t),a=km(t),u=Math.sqrt(((r-1)*i*i+(s-1)*a*a)/(r+s-2));return(n-o)/(u*Math.sqrt(1/r+1/s))}function tl(e,t,r){return r<0?Hm(-1/0,e,t):r>0?Hm(-1/0,-e,t):2*Hm(-1/0,-Math.abs(e),t)}function VP(e,t){arguments.length===1&&(t=0);let r=AD(e,t),n=e.length-1;return{lessThan:tl(r,n,-1),greaterThan:tl(r,n,1),notEqual:tl(r,n,0)}}function GP(e,t){let r=CD(e,t),n=e.length+t.length-2;return{lessThan:tl(r,n,-1),greaterThan:tl(r,n,1),notEqual:tl(r,n,0)}}function BP(e){return{min:_D(e),q1:nc(e,1),median:FD(e),q3:nc(e,3),max:LD(e)}}function PL(e){return e.length}function _D(e){if(e.length<1)return NaN;let t=e[0];if(isNaN(t))return NaN;for(let r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]<t&&(t=e[r])}return t}function LD(e){if(e.length<1)return NaN;let t=e[0];if(isNaN(t))return NaN;for(let r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]>=t&&(t=e[r])}return t}function wD(e,t){if(!isFinite(t)||t<0||t>1)return NaN;if(e.some(isNaN))return NaN;if(e.length===0)return NaN;let r=e.length,n=ic(e),i=t*(r-1);return Math.floor(i)===i?e[n[i]]:(Math.ceil(i)-i)*e[n[Math.floor(i)]]+(i-Math.floor(i))*e[n[Math.ceil(i)]]}function nc(e,t){if(!isFinite(t)||t<0||t>4)return NaN;if(e.some(isNaN))return NaN;let r=ic(e),n=Qm(e,t),i=Math.floor(n),s=Math.ceil(n);return(e[r[i]]+e[r[s]])/2}function ic(e){let t=e.length,r=[];for(let n=0;n<t;n++)r.push(n);return r.sort(function(n,i){return k(Js(e[n],e[i]))}),r}function Qm(e,t){t=Math.round(t);let r=e.length,n=r%2===1,i;return r===1?0:(t===0&&(i=0),t===2&&(i=(r-1)/2),t===4&&(i=r-1),t===1&&(i=n?(r+1)/4-1:(r+2)/4-1),t===3&&(i=n?(3*r+3)/4-1:(3*r+2)/4-1),i===void 0?NaN:i)}function TL(e,t){return ic(e)[Math.ceil(t*(e.length-1))]+1}function IL(e,t){return ic(e)[Math.floor(t*(e.length-1))]+1}function EL(e,t){return ic(e)[Math.ceil(Qm(e,t))]+1}function ML(e,t){return ic(e)[Math.floor(Qm(e,t))]+1}function FD(e){return wD(e,.5)}function DL(e){if(e.length<1)return 0;let t=e[0];if(isNaN(t))return 0;let r=0;for(let n=1;n<e.length;n++){if(isNaN(e[n]))return 0;e[n]<t&&(r=n,t=e[n])}return r+1}function vL(e){if(e.length<1)return 0;let t=e[0];if(isNaN(t))return 0;let r=0;for(let n=1;n<e.length;n++)if(e[n]>=t){if(isNaN(e[n]))return 0;r=n,t=e[n]}return r+1}function Fp(e){let t=Zo(e),r=0;for(let n=0;n<e.length;n++){let i=e[n]-t;r+=i*i}return r/e.length}function OL(e){let t=Zo(e),r=0;for(let n=0;n<e.length;n++)r+=Math.abs(e[n]-t);return r/e.length}function VD(e){let t=e.length;return Fp(e)*t/(t-1)}function GD(e,t){let r=Math.min(e.length,t.length);e.length!==r&&(e=e.slice(0,r)),t.length!==r&&(t=t.slice(0,r));let n=Zo(e),i=Zo(t),s=0;for(let o=0;o<r;o++)s+=(e[o]-n)*(t[o]-i);return s/r}function SL(e,t){let r=Math.min(e.length,t.length);return GD(e,t)*r/(r-1)}function Km(e,t){let r=Math.min(e.length,t.length);e.length!==r&&(e=e.slice(0,r)),t.length!==r&&(t=t.slice(0,r));let n=Zo(e),i=Zo(t),s=0,o=0,a=0;for(let u=0;u<r;u++){let c=e[u]-n,l=t[u]-i;s+=c*c,o+=l*l,a+=c*l}return a/Math.sqrt(s*o)}function zP(e,t,r,n){let i=e[0];for(let o=2;o<e.length;o++){let a=k(js(Js(e[o],i),r));if(!Zn(a,o,10))return 0}let s=k(n);for(let o=0;o<t.length-1;o++){let a=k(js(Js(t[o],i),r));if(!Zn(a,s-t.length+o,10))return 0}return!isFinite(s)||s<e.length||s<t.length?0:s}function HP(e){return e<0||!isFinite(e)?0:e}function vP(e){let t=e.length;if(t===0)return[];let r=[],n=[];for(let a=0;a<t;a++)n.push([e[a],a]);n.sort(function(a,u){let c=a[0],l=u[0];return c===1/0&&l===1/0||c===-1/0&&l===-1/0?0:c-l});let i=0,s=1,o=1;for(;i<t;){let a=i;for(;a<t-1&&n[a][0]===n[a+1][0];)a+=1;o=a-i+1;let u;for(a=0;a<o;a++)u=n[i+a][1],r[u]=isNaN(e[u])?NaN:s+.5*(o-1);s+=o,i+=o}return r}function RL(e,t){let r=Math.min(e.length,t.length);return e.length!==r&&(e=e.slice(0,r)),t.length!==r&&(t=t.slice(0,r)),Km(vP(e),vP(t))}function km(e){return Math.sqrt(VD(e))}function NL(e){return Math.sqrt(Fp(e))}var AL=Sp;function il(e,t){return so(t[0]-e[0],t[1]-e[1])}function CL(e,t){return so(t[0]-e[0],so(t[1]-e[1],t[2]-e[2]))}function BD(e,t,r){return[Zr(Math.round(e),0,255),Zr(Math.round(t),0,255),Zr(Math.round(r),0,255)]}function _L(e,t,r){isFinite(e)||(e=0),t=Zr(t,0,1),r=Zr(r,0,1);let n=r*(1-t/2);n===0||n===1?t=0:t=(r-n)/Math.min(n,1-n);let{r:i,g:s,b:o}=Om(e,t,n).rgb();return BD(i,s,o)}function LL(e){return e}function wL(e,t){return[e,t]}function FL(e,t,r){return[e,t,r]}function VL(e,t){return[e,t]}function GL(e){return e}function BL(e){let t=[];if(e.length===0)return[];for(let r=0;r<e.length-1;r++)t.push([e[r],e[r+1]]);return t.push([e[e.length-1],e[0]]),t}function UP(e){if(e.length==0)return 0;let t=[...e,e[0]];return rD(t)}function zL(e){let t=0;for(let r=0;r<e.length-1;r++){let[n,i]=e[r],[s,o]=e[r+1];t+=Ts(s-n,o-i)}if(e.length>1){let[r,n]=e[e.length-1],[i,s]=e[0];t+=Ts(i-r,s-n)}return t}function HL(e){let t=!1;for(let r=0;r<e.length;r++){let n=(r+1)%e.length;e[r][0]===e[n][0]&&e[r][1]===e[n][1]&&(t=!0)}return t?e.filter((r,n)=>{let i=e[n===0?e.length-1:n-1];return r[0]!==i[0]||r[1]!==i[1]}):e}function UL(e){let[t,r,n,i]=e;return[t,n>=0?r:r+n,n>=0?n:-n,i]}function zD(e,t,r){if(e.length===0)return[];e=HL(e);let n=nD([...e,e[0]]),i=[];for(let s=0;s<e.length;s++){let o=e[s>0?s-1:e.length-1],a=e[s],u=e[s<e.length-1?s+1:0],c=n[s]===1,l=uw(o,a,u,c?\"counterclockwise\":\"clockwise\",r);i.push(t?l:UL(l))}return i}function qL(e,t){return zD(e,!1,t)}function kL(e,t){return zD(e,!0,t)}function qP(e,t){return[e,t]}var YL=qP,XL=qP;function HD(e,t){let r=[t[0]-e[0],t[1]-e[1]],n=[e[0],e[1]];return UD(r,n)}function UD(e,t){return[e,t]}function ZL(e){return e[0]}function $L(e){return e[1]}function WL(e,t){let r=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],n=[e[0],e[1],e[2]];return qD(r,n)}function qD(e,t){return[e,t]}function JL(e){return e[0]}function jL(e){return e[1]}function QL(e){return e}function KL(e,t){return[e,t]}function ew(e){return e[0]}function tw(e){return e[1]}function rw(e,t,r){return[e,t,r]}function al([e,t,r]){let[n,i]=e,[s,o]=t,[a,u]=r,c=s*s+o*o,l=(n*n+i*i-c)/2,p=(c-a*a-u*u)/2,f=(n-s)*(o-u)-(s-a)*(i-o);f=1/f;let d=(l*(o-u)-p*(i-o))*f,g=((n-s)*p-(s-a)*l)*f;return[d,g]}function ul(e){let[[t,r],[n,i],[s,o]]=e,a=n-t,u=i-r,c=s-n,l=o-i;return 2*Math.atan2(a*l-c*u,a*c+u*l)}function kP(e){let t=Math.abs(ul(e));return t<1e-9||t>2*Math.PI-1e-9}function kD(e){return Math.abs(e)===Math.PI?Math.PI:gD(e+Math.PI,2*Math.PI)-Math.PI}function YD(e,t,r,n){return[e,kD(t),r,n]}function nw([e,t,r,n]){return[e,t,r,n]}function iw(e){return e[2]}function sw(e){return e[3]}function XD(e){let[t,r,n,i]=e,s=Math.PI*2,o=n===0?s:n>0?n-s:n+s;return[t,r,o,i]}function ow(e){let[t,r,n,i]=XD(e);return[t,r,n,i]}function aw(e){let[t,r,n,i]=e,s=n>=0?Math.PI-n:-Math.PI-n;return[t,kD(r+n),s,i]}function uw(e,t,r,n,i){let s=e[0]-t[0],o=e[1]-t[1],a=r[0]-t[0],u=r[1]-t[1],c=Math.atan2(o,s),l=Math.atan2(s*u-o*a,s*a+o*u),p=2*Math.PI;return n===\"clockwise\"?l-=l<0?0:p:n===\"counterclockwise\"&&(l+=l<0?p:0),YD(t,c,l,i)}function YP(e,t){let[[r,n],[i,s]]=e;return[[t*r,t*n],[t*i,t*s]]}var cw=YP,lw=YP;function pw(e,t){let[[r,n],i]=e;return[[t*r,t*n],t*i]}function fw(e,t){let[[r,n],[i,s],[o,a]]=e;return[[t*r,t*n],[t*i,t*s],[t*o,t*a]]}function dw(e,t){let[[r,n],i,s,o]=e;return[[t*r,t*n],t*i,t*s,o]}function XP(e,t){let[[r,n],[i,s]]=e,[[o,a],[u,c]]=t;return[[r+o,n+a],[i+u,s+c]]}function mw(e,t){let[[r,n,i],[s,o,a]]=e,[[u,c,l],[p,f,d]]=t;return[[r+u,n+c,i+l],[s+p,o+f,a+d]]}var yw=XP,gw=XP;function hw(e,t){let[[r,n],i]=e,[[s,o],a]=t;return[[r+s,n+o],i+a]}function bw(e,t){let[[r,n],[i,s],[o,a]]=e,[[u,c],[l,p],[f,d]]=t;return[[r+u,n+c],[i+l,s+p],[o+f,a+d]]}function xw(e,t){let[[r,n],i,s,o]=e,[[a,u],c,l]=t;return[[r+a,n+u],i+c,s+l,o]}function ZP(e,t){let[[r,n],[i,s]]=e;return[(1-t)*r+t*i,(1-t)*n+t*s]}function $P(e,t){return ZP(e,Zr(t,0,1))}function Pw(e,t){t=Zr(t,0,1);let[[r,n,i],[s,o,a]]=e;return[(1-t)*r+t*s,(1-t)*n+t*o,(1-t)*i+t*a]}function OP(e,t){return ZP(e,Zr(t,0,1/0))}function Tw(e,t){let[[r,n],i]=e,s=Math.min(1,Math.max(0,t));return[r+i*Math.cos(2*Math.PI*s),n+i*Math.sin(2*Math.PI*s)]}function ZD(e,t){let r=ey(e);if(!r)return[NaN,NaN];if(r.type===\"segment\")return $P([e[0],e[2]],t);if(r.type===\"rays\")return t<=0?OP([r.start1,r.end1],-t):t>=1?OP([r.start2,r.end2],t-1):[NaN,NaN];t=Math.min(1,Math.max(0,t));let n=al(e),i=ul(e),s=Math.atan2(e[0][1]-n[1],e[0][0]-n[0]),o=il(n,e[0]),a=s+t*i;return[n[0]+o*Math.cos(a),n[1]+o*Math.sin(a)]}function Iw(e,t){if(isNaN(t))return[NaN,NaN];if(t<0||t>=e.length)return e[0];let r=Math.floor(t);return $P([e[r],e[(r+1)%e.length]],t-r)}function ey(e){let[t,r,n]=e,[[i,s],[o,a],[u,c]]=[t,r,n];if(isNaN(i)||isNaN(s)||isNaN(o)||isNaN(a)||isNaN(u)||isNaN(c))return;let l=al([t,r,n]),p=il(l,t);if(isFinite(p)&&!kP([t,r,n])){let f=Math.atan2(t[1]-l[1],t[0]-l[0]),d=f+ul([t,r,n]);return{type:\"arc\",center:l,radius:p,startAngle:f,endAngle:d}}else{let f=Ws(o,a,0,i,s,0,u,c,0);return f<0||f>1?{type:\"rays\",start1:[i,s],end1:[i+(i-u),s+(s-c)],start2:[u,c],end2:[u+(u-i),c+(c-s)]}:{type:\"segment\",start:[i,s],end:[u,c]}}}function Ew(e,t,r){let i=il(e,t);if(i>1e-9)return t;let s=il(e,r);return s>1e-9?r:isNaN(i)&&isNaN(s)?[NaN,NaN]:e}function Lp(e,t){let[[r,n],i]=e,[[s,o],a]=t,u=so(s-r,o-n),c=i+a,l=i-a,p=u*u,f=Math.sqrt((u+c)*(-u+c)*(u-l)*(u+l))/4,d=i*i,g=a*a;return[(s+r)/2+(s-r)*(d-g)/(2*p)+-2*(o-n)*f/p,(o+n)/2+(o-n)*(d-g)/(2*p)+2*(s-r)*f/p]}function $D(e,t,r){let[[n,i],s]=e,[[o,a],[u,c]]=t,l=o-n,p=u-n,f=a-i,d=c-i,g=p-l,m=d-f,b=g*g+m*m,y=l*d-p*f,h=s*s*b-y*y;if(h<0)return[NaN,NaN];let x=Math.sqrt(h);return x<0?[NaN,NaN]:[n+(y*m+r*g*x)/b,i+(-y*g+r*m*x)/b]}function Mw(e,t){let[[r,n],[i,s]]=e,[[o,a],[u,c]]=t,l=s-n,p=r-i,f=c-a,d=o-u,g=l*r+p*n,m=f*o+d*a,b=l*d-f*p;return b===0?[NaN,NaN]:[(d*g-p*m)/b,(l*m-f*g)/b]}function WP(e,t,r=0){let n=$D(t,e,-1);return ol(n,e,r,!0)?n:[NaN,NaN]}function JP(e,t,r=0){let n=$D(e,t,1);return ol(n,t,r,!1)?n:[NaN,NaN]}function WD(e,t,r=0){let n=Mw(e,t);return!ol(n,e,r,!0)||!ol(n,t,r,!1)?[NaN,NaN]:n}function Dw(e,t,r=0){let n=QD(t,e,r,-1);return sl(n,t,r,!1)?n:[NaN,NaN]}function JD(e,t,r=0){let n=KD(t,e,r,-1);return!ol(n,e,r,!0)||!sl(n,t,r,!1)?[NaN,NaN]:n}function vw(e,t,r=0){let n=QD(e,t,r,1);return sl(n,e,r,!0)?n:[NaN,NaN]}function jD(e,t,r=0){let n=KD(e,t,r,1);return!sl(n,e,r,!0)||!ol(n,t,r,!1)?[NaN,NaN]:n}function Ow(e,t,r=0){let n=Sw(e,t,r);return!sl(n,e,r,!0)||!sl(n,t,r,!1)?[NaN,NaN]:n}function Sw(e,t,r){let n=Xm(e);if(Zm(n))return JD(n,t,r);let i=Xm(t);return Zm(i)?jD(e,i,r):jP(()=>Lp(n,i),()=>Lp(i,n),s=>QP(-1,Ym(e,s),Ym(t,s)))}function QD(e,t,r,n){let i=Xm(e);return Zm(i)?n>0?JP(t,i,r):WP(i,t,r):jP(()=>Lp(i,t),()=>Lp(t,i),s=>QP(n,Ym(e,s),Rw(t,s)))}function KD(e,t,r,n){let i=Xm(e);return Zm(i)?WD(i,t,r):jP(()=>JP(i,t,r),()=>WP(t,i,r),s=>QP(n,Ym(e,s),Nw(t)))}function jP(e,t,r){let n=e();if(r(n))return n;let i=t();return r(i)?i:[NaN,NaN]}function QP(e,t,r){return e*ev(t,r)>0}function Ym(e,[t,r]){let[n,i]=al(e);return ul(e)>0?[i-r,t-n]:[r-i,n-t]}function Rw([[e,t]],[r,n]){return[t-n,r-e]}function Nw([[e,t],[r,n]]){return[r-e,n-t]}function Xm(e){let t=al(e),r=il(t,ZD(e,0));return isFinite(r)&&!kP(e)?[t,r]:[e[0],e[2]]}function Zm(e){return Array.isArray(e[1])}function sl([e,t],r,n,i){let[s,o]=al(r);return(i?(n&3)===0:(n&12)===0)||Af(Math.atan2(t-o,e-s),Math.atan2(r[0][1]-o,r[0][0]-s),ul(r))}function ol([e,t],[[r,n],[i,s]],o,a){let u=Ws(e,t,0,r,n,0,i,s,0),[c,l]=a?[(o&1)===0,(o&2)===0]:[(o&4)===0,(o&8)===0];return!isNaN(u)&&(u>=0||c)&&(u<=1||l)}function Aw(e,t){let[[r,n],[i,s]]=e,[o,a]=t;return[[o,a],[o+(i-r),a+(s-n)]]}function Cw(e,t){let[[r,n],[i,s]]=e,[o,a]=t;return[[o,a],[o+(s-n),a-(i-r)]]}function ev(e,t){let[r,n]=e,[i,s]=t;return r*s-i*n}function _w(e,t){let[r,n]=e,[i,s]=t;return r*i+n*s}function Lw(e){let[t,r]=e;return[-r,t]}function ww(e,t,r){return[e,t,r]}function Fw(e){return[[1,0],e,!1]}function Vw(e,t){let[r,n]=e;return[[t,0],[(1-t)*r,(1-t)*n],!1]}function Gw(e,t){let[r,n]=e,i=Math.cos(t),s=Math.sin(t);return[[i,s],[r*(1-i)+n*s,n*(1-i)-r*s],!1]}function Bw(e){let[[t,r],[n,i]]=e,s=n-t,o=i-r,a=s*s+o*o;return[[(s*s-o*o)/a,2*s*o/a],[(1-(s*s-o*o)/a)*t-2*s*o/a*r,(1+(s*s-o*o)/a)*r-2*s*o/a*t],!0]}function zw(e,t){let[[r,n],[i,s],o]=e,[[a,u],[c,l],p]=t;return o&&(u=-u,l=-l,p=!p),[[a*r-u*n,a*n+u*r],[i+r*c-n*l,s+r*l+n*c],p]}function Hw(e){let[[t,r],[n,i],s]=e,o=t*t+r*r,a=t/o,u=-r/o,c=-(t/o*n+r/o*i),l=-(t/o*i-r/o*n);return s&&(u=-u,l=-l),[[a,u],[c,l],s]}function Xo(e,t){let[[r,n],[i,s],o]=e,[a,u]=t;return o&&(u=-u),[r*a-n*u+i,r*u+n*a+s]}function Uw(e,t){let[r,n,i]=e;return i?-t:t}function ty(e,t){let[r,n]=t;return[Xo(e,r),Xo(e,n)]}var qw=ty,kw=ty;function Yw(e,t){let[r,n]=t,i=[n,[n[0]+r[0],n[1]+r[1]]],s=ty(e,i);return HD(s[0],s[1])}function Xw(e,t){let[r,n]=t,[[i,s]]=e;return[Xo(e,r),so(i,s)*n]}function Zw(e,t){let[r,n,i]=t;return[Xo(e,r),Xo(e,n),Xo(e,i)]}function $w(e,t){let r=[];for(let n of t)r.push(Xo(e,n));return r}function Ww(e,t){let[r,n,i]=t,s=Xo(e,r),[o,a,u]=e,[c,l]=Xo([o,[0,0],u],[Math.cos(n),Math.sin(n)]),p=Math.atan2(l,c),f=Uw(e,i);return[s,p,f,t[3]]}function Jw(e,t){let r=[];for(let n=0;n<Math.min(e.length,t.length);n++)t[n]&&r.push(e[n]);return r}function jw(e,t){let r=[];for(let n of t)r.push(e[n]);return r}function Qw(e){let t=[],r={};for(let n=0;n<e.length;n++){let i=e[n],s=SP(i);r.hasOwnProperty(s)||(r[s]=!0,t.push(n))}return t}function Kw(e,t){return[e,t]}function eF(e){return e[0]}function tF(e){return e[1]}function SP(e){if(Array.isArray(e))return`[${e.map(SP).join(\",\")}]`;switch(typeof e){case\"string\":return e;case\"boolean\":case\"number\":return e.toString();case\"object\":if(rF(e)){let r=[];for(let n in e.updateRules)r.push(`\"${n}\": ${SP(e.updateRules[n].value)}`);return`{${r.join(\",\")}}`}else return k(e).toString();default:return e}}function rF(e){return typeof e!=\"object\"||!e?!1:e.type===\"Action\"}function nF(e){return e}function iF(e){return e}function wn(e){if(!ao(e))throw new Error(\"Programming error: expected an array but found \"+typeof e)}function ao(e){return Array.isArray(e)}function tv(e){if(ao(e))for(let{compiled:t}of e)t&&KP(t)}function Z8(e){if(ao(e))for(let{compiled:t}of e)t&&sF(t)}function KP(e){delete e.fn}function sF(e){e.fn=Vp(e.args,e.source,e.constants)}function Vp(e,t,r){let i=\"return (function(\"+e.join(\",\")+'){\"use strict\"; '+t+\"})\";return new Function(\"BuiltIn\",\"ErrorMsg\",\"_C\",i)(oo,ir,r)}function vt(e){return e.type===1}function rv(e){if(!vt(e))throw new Error(`Programming error: expected constant instruction but found ${Yi(e.type)} instead.`)}function tT(e){return e.type===48&&e.isConstantBroadcast}function eu(e){return vt(e)||tT(e)}function nv(e){let t=e.getInstruction(e.getReturnIndex());if(t.type!==47)throw new Error(`Expected BlockVar, got ${t.type}`);let r=e.getInstruction(t.args[0]);if(r.type!==51)throw new Error(`Expected EndMap, got ${r.type}`);let n=W(t.valueType)?We(t.valueType):t.valueType,i=e.getInstruction(r.args[0]);if(i.type!==50)throw new Error(`Expected BeginMap, got ${i.type}`);let s=[];for(let l of i.args){let p=e.getInstruction(l);if(!vt(p)||p.valueType!==I)throw te(\"Programming error: interval bounds must be constant numbers\");s.push(k(p.value))}let o,a;n===wr||n===Fr?(o=[\"t\"],a={type:\"1d\",min:s[0],max:s[1]}):(o=[\"u\",\"v\"],a={type:\"2d\",uMin:s[0],uMax:s[1],vMin:s[2],vMax:s[3]});let u=Em(e),c=`\n  const mapFn = (function() {\n    \"use strict\";\n    ${u.source}\n  })();\n  return mapFn(${o.join(\",\")});\n`;return{args:o,source:c,constants:u.constants,fn:Vp(o,c,u.constants),domain:a}}function oF(e){for(var t=0;t<this.length;t++)e(this.elementAt(t),t)}function aF(e){for(var t=[],r=0;r<this.length;r++)t.push(e(this.elementAt(r),r));return t}var cr=class e extends Pt{constructor(r){super();this.isError=!1;this.eachElement=oF;this.mapElements=aF;if(r.getError())throw new Error(\"Programming error: IRExpression should not be constructed with an error chunk\");if(this._chunk=r,this.valueType=r.getReturnType(),this.addDependencies(r.getLiveArgNames()),this.isList=W(this.valueType),this.isList&&(this.length=this._chunk.getConstantListLength(),this.length===void 0))throw Yx(r.getListLengthDependencies());var n=r.isConstant();this.isConstant=n&&(this.valueType===I||this.valueType===ge),this.isTypedConstant=n,this.isEmptyAction=n&&this.valueType===Ke&&Object.keys(r.asValue().updateRules).length===0}shouldExportAns(){return!0}getCompiledFunction(r){return la(this.valueType)?nv(this._chunk):this._chunk.getCompiledFunction(r)}getRestrictedFunctionForGLSL(r){return this._chunk.getRestrictedFunctionForGLSL(r)}getCapFunction(r){return this._chunk.getCapFunction(r)}polynomialOrder(r){return this._chunk.polynomialOrder(r,{allowRestriction:!0,allowClosedBlockReferences:!1})}getPolynomialCoefficients(r){for(var n=this._chunk.getPolynomialCoefficients(r),i=n.chunk,s=n.coefficients,o=[],a=0;a<s.length;a++){var u=i.copy();u.setReturnIndex(s[a]),u.close(),o.push(new e(u))}return o}takeDerivative(r){var n=this._chunk.copy().takeDerivative(r).close();return new e(n)}gradient(r){var n=this._chunk.copy().gradient(r).close();return new e(n)}toImplicitBool(){let r=this._chunk.copy();return r.GreaterEqual([r.getReturnIndex(),r.Constant(0)]),r.close(),new e(r)}interpretWithParameters(r){let n,i=this._chunk.argNames;if(r.length===i.length)n=r;else{n=[];let s=this.getDependencies();for(let o=0,a=0;o<i.length;o++)s[a]===i[o]?(n.push(r[a]),a+=1):n.push(void 0)}return this._chunk.interpretWithParameters(n)}substituteConstantArguments(r){return new e(this._chunk.substituteConstantArguments(r))}boundDomain(r){return this._chunk.boundDomain(r)}asValue(){if(this._chunk.isConstant())return this._chunk.asValue();if(this.isList){for(var r=[],n=to(ki(We(this.valueType))),i=0;i<this.length;i++)r.push(n);return r}else return to(ki(this.valueType))}asTypedValue(){return{valueType:this.valueType,value:this.asValue()}}asCompilerValue(){return this._chunk.asCompilerValue()}isNaN(){return typeof this.asValue()==\"number\"&&isNaN(this.asValue())}getEvaluationInfo(){return this._chunk.isConstant()&&this.getDependencies().length===0&&(ne(this.valueType,I)||ne(this.valueType,ge))?[{val:this.asValue()}]:!1}findLinearSubset(r){return this._chunk.findLinearSubset(r)}deriveRegressionRestrictions(){var r=this._chunk.deriveRegressionRestrictions();return r===this._chunk?this:new e(r)}getCursorContext(){return this._chunk.getCursorContext()}};var ry=class extends j{};var ny=class extends j{};var cl=class extends j{};var iy=class extends j{};var sy=class extends j{};var ll=class extends j{};var oy=class extends j{};var ay=class extends j{isInequality(){return this.args[0].isInequality()&&this.args[1].isInequality()}};var uy=class extends j{};var cy=class extends ll{};function ue(e,t){let r=$E(e);return r.prototype.type=t,r}var uF={Base:ue(Pt,\"Base\"),Expression:ue(j,\"Expression\"),Error:ue(R,\"Error\"),Constant:ue(Gr,\"Constant\"),MixedNumber:ue($f,\"MixedNumber\"),Identifier:ue(Tt,\"Identifier\"),Ans:ue(Wf,\"Ans\"),List:ue(Ha,\"List\"),Range:ue(Jf,\"Range\"),ListAccess:ue(Vc,\"ListAccess\"),DotAccess:ue(ns,\"DotAccess\"),Construction:ue(jf,\"Construction\"),ParenSeq:ue(Is,\"ParenSeq\"),MovablePoint:ue(Qf,\"MovablePoint\"),NamedCoordinateAccess:ue(Kf,\"NamedCoordinateAccess\"),BareSeq:ue(Gc,\"BareSeq\"),Norm:ue(ed,\"Norm\"),BaseComparator:ue(wo,\"BaseComparator\"),DoubleInequality:ue(rd,\"DoubleInequality\"),RepeatedOperator:ue(Ua,\"RepeatedOperator\"),Sum:ue(nd,\"Sum\"),Product:ue(id,\"Product\"),Integral:ue(sd,\"Integral\"),AssignmentExpression:ue(od,\"AssignmentExpression\"),ListComprehension:ue(Bc,\"ListComprehension\"),FunctionCall:ue(Cr,\"FunctionCall\"),SeededFunctionCall:ue(Vu,\"SeededFunctionCall\"),FunctionExponent:ue(ad,\"FunctionExponent\"),FunctionFactorial:ue(ud,\"FunctionFactorial\"),Prime:ue(cd,\"Prime\"),Piecewise:ue(ya,\"Piecewise\"),Restriction:ue(ld,\"Restriction\"),Derivative:ue(pd,\"Derivative\"),UpdateRule:ue(fd,\"UpdateRule\"),Substitution:ue(dd,\"Substitution\"),Histogram:ue(md,\"Histogram\"),DotPlot:ue(yd,\"DotPlot\"),BoxPlot:ue(gd,\"BoxPlot\"),TTest:ue(hd,\"TTest\"),IndependentTTest:ue(bd,\"IndependentTTest\"),Stats:ue(xd,\"Stats\"),Assignment:ue(ga,\"Assignment\"),CoordinateEquation:ue(Pd,\"CoordinateEquation\"),FunctionDefinition:ue(ba,\"FunctionDefinition\"),Equation:ue(Vo,\"Equation\"),Regression:ue(om,\"Regression\"),Image:ue(am,\"Image\"),Ticker:ue(um,\"Ticker\"),Slider:ue(cm,\"Slider\"),RegressionParameter:ue(lm,\"RegressionParameter\"),Table:ue(pm,\"Table\"),TableColumn:ue(Zu,\"TableColumn\"),SolvedEquation:ue(fm,\"SolvedEquation\"),OptimizedRegression:ue(dm,\"OptimizedRegression\"),Seed:ue(mm,\"Seed\"),ExtendSeed:ue(ym,\"ExtendSeed\"),IRExpression:ue(cr,\"IRExpression\"),Add:ue(ry,\"Add\"),Subtract:ue(Es,\"Subtract\"),Multiply:ue(ny,\"Multiply\"),DotMultiply:ue(cl,\"DotMultiply\"),CrossMultiply:ue(iy,\"CrossMultiply\"),Divide:ue(sy,\"Divide\"),Exponent:ue(ll,\"Exponent\"),Negative:ue(oy,\"Negative\"),And:ue(ay,\"And\"),PercentOf:ue(uy,\"PercentOf\"),RawExponent:ue(cy,\"RawExponent\"),Comparator:{\"<\":ue(Fo[\"<\"],\"Comparator['<']\"),\">\":ue(Fo[\">\"],\"Comparator['>']\"),\"<=\":ue(Fo[\"<=\"],\"Comparator['<=']\"),\">=\":ue(Fo[\">=\"],\"Comparator['>=']\"),\"=\":ue(Fo[\"=\"],\"Comparator['=']\")}},D=uF;var en={xmin:-5,xmax:5,ymin:-5,ymax:5,zmin:-5,zmax:5};function rT(e,t){let r=Math.round(1e6*e)/1e6;return Math.abs(r-e)<t?r:e}function YY(e){let t=!0,r=!0,n=!0;return e.hardMin!==void 0&&e.target<e.hardMin&&(t=!1),e.hardMax!==void 0&&e.target>e.hardMax&&(r=!1),e.step&&ly({target:e.target,step:e.step,hardMin:t?e.hardMin:void 0,hardMax:r?e.hardMax:void 0})!==e.target&&(n=!1),{min:t,max:r,step:n}}function ly(e){let{target:t,hardMin:r,hardMax:n,step:i}=e,s=1e-10;if(r!==void 0&&n!==void 0&&(s=Math.min(s,Math.abs(n-r)/1e3)),i&&(s=Math.min(s,i/10)),r!==void 0&&(r=rT(r,s)),n!==void 0&&(n=rT(n,s)),e.forceSliderToMax&&n!==void 0&&(t=n),r>n||t<=r)return r;if(t>=n)return n;if(i){let u=r!==void 0?r:0;var o=Math.round((t-u)/i);t=i*o+u}let a=rT(t,s);return(i||r===a||n===a)&&(t=a),t<=r?r:t>=n?n:t}function iv(e){let{storedMax:t,sliderValue:r,hardMin:n,step:i}=e,s=e.is3d?en.xmax:10;if(t>s&&(s=t),r>s&&(s=r),n>s&&(s=n),i){let o=ly({target:s,hardMin:n,hardMax:void 0,step:i});o>=s?s=o:s=o+i}return s}var iT=D.Constant,lF=D.Identifier;D.Base.prototype.tryGetConcreteTree=function(e,t,r={}){var n;try{n=this.getConcreteTree(e,t,r)}catch(i){i instanceof D.Base?n=i:n=te(i)}return n};D.Base.prototype.getConcreteTree=function(e,t,r={}){var i;var n=this.buildIRExpression(e,t,{selection:(i=this.parseOptions)==null?void 0:i.selection,coerceToNumber:r.coerceToNumber});if(n.isError)throw n;return n};D.DoubleInequality.prototype.getConcreteTree=function(e,t){return new this.constructor([new D.Piecewise([this._indicator,this._expressions[0],new iT(NaN)]).getConcreteTree(e,t),this._operators[0],new lF(this._symbol),this._operators[1],new D.Piecewise([this._indicator,this._expressions[1],new iT(NaN)]).getConcreteTree(e,t)])};D.Error.prototype.getConcreteTree=function(e,t){return this};function Gp(e,t){return e.isError?e:t.indexOf(e.valueType)===-1?ql():e}D.Image.prototype.getConcreteTree=function(e,t){var r=this.center.tryGetConcreteTree(e,t),n=this.radianAngle.tryGetConcreteTree(e,t),i=this.width.tryGetConcreteTree(e,t),s=this.height.tryGetConcreteTree(e,t),o=this.opacity.tryGetConcreteTree(e,t),a=[N,ft,Be],u=[I,ie,Be];return r=Gp(r,a),n=Gp(n,u),i=Gp(i,u),s=Gp(s,u),o=Gp(o,u),new D.Image({center:r,radianAngle:n,width:i,height:s,opacity:o},this.moveStrategy)};D.Ticker.prototype.getConcreteTree=function(e,t){var r=this.handler.tryGetConcreteTree(e,t);!r.isError&&r.valueType!==Ke&&(r=Jl(le(r.valueType)));var n=r.getDependencies().filter(function(i){return!(e.graphingEnabled()&&e.validActionVariable(i))});return n.length&&(r=tr(e.sliderVariables(n)).setDependencies(n)),new D.Ticker({handler:r,minStep:this.minStep.tryGetConcreteTree(e,t)})};function nT(e,t,r){if(!t){r.valids[e]=!0;return}var n=t.getDependencies();if(t.isError)r.errors[e]=!0;else if(n.length>0){r.errors[e]=!0;for(var i=0;i<n.length;i++)n[i]===r.exportedSymbol?r.errors.cycle=!0:r.missingVars.push(n[i])}else r.values[e]=+t.asValue();r.valids[e]=isFinite(r.values[e]),r.valids[e]||(r.values[e]=void 0)}function py(e){return e&&e.valueType===ie&&e.length===1&&e.args?e.args[0]:e}D.Slider.prototype.getConcreteTree=function(e,t){var r=this._expression.getConcreteTree(e,t),n=py(this.sliderMin&&this.sliderMin.tryGetConcreteTree(e,t)),i=py(this.sliderMax&&this.sliderMax.tryGetConcreteTree(e,t)),s=py(this.sliderStep&&this.sliderStep.tryGetConcreteTree(e,t)),o={exportedSymbol:this._symbol,errors:{},values:{},valids:{},missingVars:[],errMsg:void 0};if(nT(\"min\",n,o),nT(\"max\",i,o),nT(\"step\",s,o),s&&o.valids.step&&(o.values.step===0?delete o.values.step:o.values.step=Math.abs(o.values.step)),o.errors.cycle?r=Xb(o.exportedSymbol):(o.errors.min||!o.valids.min?o.errMsg=Zb():o.errors.max||!o.valids.max?o.errMsg=$b():(o.errors.step||!o.valids.step)&&(o.errMsg=Jb()),o.values.min>o.values.max&&(o.valids.min=!1,o.valids.max=!1,o.errMsg||(o.errMsg=Wb()))),r.isConstant){var a=t.initialEvaluation&&t.initialEvaluation.asValue(),u=a&&this.sliderIsPlayingOnce,c=o.values.max,l=+r.asValue(),p=o.values.min,f=o.values.step;if(u&&!isFinite(c)){var d=py(this.sliderSoftMax&&this.sliderSoftMax.tryGetConcreteTree(e,t));d&&(c=iv({storedMax:+d.asValue(),sliderValue:l,step:f,hardMin:p,is3d:e.is3dProduct()}))}var g=ly({target:l,hardMin:p,hardMax:c,step:f,forceSliderToMax:!!u}),m=Cu(g.toString()),b=isFinite(k(m))?m:g;r=new iT(b).getConcreteTree(e,t)}return r.sliderInfo=o,r};function sv(e,t){if(!t[this._symbol])throw ss(this._symbol);var r=this.args.map(function(i){return i.getConcreteTree(e,t)});if(r.length>0){if(r.length===1&&r.push(new D.Constant(1).getConcreteTree(e,t)),r[1].getDependencies().length)throw lp(this._symbol).setDependencies(r[1].getDependencies());if(r[1].valueType!==I)throw lp(this._symbol);var n=r[1].asValue();if(!isFinite(n)||n<=0)throw lp(this._symbol)}return this.typeCheck(e,r),new this.constructor(r)}D.Histogram.prototype.getConcreteTree=sv;D.DotPlot.prototype.getConcreteTree=sv;D.BoxPlot.prototype.getConcreteTree=function(e,t){if(!t[this._symbol])throw ss(this._symbol);var r=this.args.map(function(n){return n.getConcreteTree(e,t)});return this.typeCheck(e,r),r.length===1&&(r[0].valueType===ie||r[0].valueType===Be)?new this.constructor(r):te(\"Failed to copmile BoxPlot\")};function sT(e,t){if(!t[this._symbol])throw ss(this._symbol);var r=this.args.map(function(n){return n.getConcreteTree(e,t)});return this.typeCheck(e,r),new this.constructor(r)}D.TTest.prototype.getConcreteTree=sT;D.IndependentTTest.prototype.getConcreteTree=sT;D.Stats.prototype.getConcreteTree=sT;D.Table.prototype.getConcreteTree=function(e,t){for(var r=[],n=Object.create(t),i=0;i<this.columns.length;i++){var s=this.columns[i].getConcreteTree(e,n);s.isIndependent&&this.columns[i].exportToLocal(e,s,n),r.push(s)}return new this.constructor(r)};D.TableColumn.prototype.getConcreteTree=function(e,t){var u;var r=this.header.getConcreteTree(e,t),n,i,s=this.header instanceof D.Identifier&&!t[this.header._symbol];if(s){n=[];for(var o=0;o<this.values.length;o++){if(this.values[o].tableError()){n.push(Yc(this.values[o].tableError()));continue}var a=this.values[o].tryGetConcreteTree(e,t);a.isError?n.push(a):a.tableError()?n.push(Yc(a.tableError())):a.valueType===I?n.push(a):n.push(Yh([le(a.valueType)]))}return i=new this.constructor(r,n),i.isIndependent=!0,i}else return r.isList?n=r.mapElements(function(c){return c}):n=[],!r.isError&&r.valueType!==I&&r.valueType!==ie&&r.valueType!==Be&&(r=kh([le((u=r.valueType)!=null?u:Vt)])),i=new this.constructor(r,n),i};function Bp(e,t,r){return{symbolMap:e,symbolNodeMap:t,maxIndex:r}}function oT(e,t){return e.symbolMap[t]}function ov(e,t){return e.symbolNodeMap[t]}function Ri(e,t,r,n){e.symbolNodeMap[t]=n,e.symbolMap[t]=r,e.maxIndex=Math.max(e.maxIndex,r)}function $o(e){return Bp(Object.create(e.symbolMap),Object.create(e.symbolNodeMap),e.maxIndex)}function fy(e,t,r){let n=e.getInstruction(r);if(!Me(n)){for(let o of n.args)if(!eu(e.getInstruction(o)))return!0}if(t<r)return!eu(e.getInstruction(t));let i=[!0];for(let o=r+1;o<=t;o++)i.push(!1);let s=[t];for(;s.length;){let o=s.pop();if(i[o-r])continue;i[o-r]=!0;let a=e.getInstruction(o);if(!Me(a))for(let u of a.args)if(u<r){if(!eu(e.getInstruction(u)))return!0}else{if(e.getInstruction(u).type===50)return!0;i[u-r]||s.push(u)}}return!1}function uv(e,t){if(W(e)){let r=We(e);for(let n=0;n<t.length;n++)if(dn(r,t[n]))return!0;return!1}return dn(e,t)}function dn(e,t){switch(e){case I:return ci(t);case Ot:return t;case N:{let[r,n]=t;return ci(r)||ci(n)}case H:{let[r,n,i]=t;return ci(r)||ci(n)||ci(i)}case Gt:{let[r,n,i]=t;return ci(r)||ci(n)||ci(i)}case we:{for(let r of t)if(dn(N,r))return!0;return!1}case Ar:{let[r,n]=t;return dn(H,r)||dn(I,n)}case Ir:{let[r,n,i]=t;return dn(H,r)||dn(H,n)||dn(H,i)}case xt:case ve:{let[r,n]=t;return dn(H,r)||dn(H,n)}case De:case ye:case Le:case he:{let[r,n]=t;return dn(N,r)||dn(N,n)}case me:{let[r,n]=t;return dn(N,r)||dn(I,n)}case fe:{let[r,n,i]=t;return dn(N,r)||dn(N,n)||dn(N,i)}case Ne:case Te:{let[r,n,i]=t;return dn(N,r)||dn(I,n)||dn(I,i)}case Ke:return Object.keys(t.updateRules).length===0;case ge:case at:case ot:case He:case wr:case Fr:case Jr:case jr:return!1;case lr:{let[r,n]=t;return ci(r)||ci(n)}default:throw new Error(\"Type cannot contain a NaN value: \"+le(e)+\".\")}}function aT(e,t){return Ro(e,t)}function uT(e,t){return Js(e,t)}function cT(e,t){return No(e,t)}function lT(e,t){return js(e,t)}function zp(e,t){return k(e)===Math.E?Math.exp(k(t)):Jg(e,t)}var pF=zp;function pT(e){return Ki(e)}function fF(e,t){return[e,t]}function dF(e,t){return e[k(t)-1]}function mF(e,t,r){return[e,t,r]}function yF(e,t){return e[k(t)-1]}function fT(e,t){return k(e)===k(t)}function dT(e,t){return k(e)<k(t)}function mT(e,t){return k(e)>k(t)}function yT(e,t){return k(e)<=k(t)}function gT(e,t){return k(e)>=k(t)}function cv(e,t){return e||t}function lv(e,t){return e&&t}function gF(e,t,r){let n=Math.floor(k(r))-1;return!isFinite(n)||n<0||n>=t.length?ki(e):t[n]}function hT(e,t,r){return pr(r)&&(r=k(r)),`${t}::${e}${r}`}function bT(e,t){switch(e){case\"mod\":return sE(t[0],t[1]);case\"abs\":return nE(t[0]);case\"sqrt\":return iE(t[0]);case\"nthroot\":return Cf(t[0],t[1]);case\"total\":return oE(t[0]);case\"count\":return t[0].length;case\"validateRangeLength\":{let r=t[0],n=t[1],i=t[2],s=t[3],o=zP(r,n,i,s);if(o===0)throw cp();return o}case\"validateSampleCount\":{let r=to(t[0]),n=HP(r);if(n===0&&r!==0)throw Vx();return n}case\"select\":case\"elementsAt\":case\"uniquePerm\":case\"sortPerm\":{let r=yr[e];return oo[r.symbol].apply(null,t)}default:{let r=yr[e];return(r.module===\"Math\"?Math:oo)[r.symbol].apply(null,to(t))}}}function dy(e,t){let r=Array(t+1);return qe(e,t,r)}function pv(e,t,r){let n=Array(t+1);for(let i=0;i<r.length;i++)n[i]=r[i];return qe(e,t,n)}function fv(e,t,r){let n=Array(t+1);return my(e,t,r,n)}function dv(e,t,r){let n=Array(t+1),i=[];for(let s of r)i.push(my(e,t,s,n));return i}function mv(e,t,r){if(t.constantLength)return t.constantLength;let n=t.args[0],s=e.getInstruction(n).args[0],o=e.getInstruction(s);return k(qe(e,o.args[0],r))}function my(e,t,r,n){let i=e.getInstruction(t),s=mv(e,i,n);if(!isFinite(r)||r<0||r>=s)return ki(We(i.valueType));let o=i.args[0],a=t-o,u=e.getInstruction(o),c=u.args[0],l=u.args[a];n[c]=r+1;let p=qe(e,l,n);for(let f=c;f<=o;f++)n[f]=void 0;return p}function hF(e,t,r){let n=e.getInstruction(t),i=mv(e,n,r),s=[];for(let o=i-1;o>=0;o--)s[o]=my(e,t,o,r);return s}function yv(e,t,r){let n=qe(e,t.args[1],r),i=t.args[0],s=e.getInstruction(i);if(s.type===48)return my(e,i,k(n)-1,r);if(s.type===33){let o=qe(e,s.args[0],r);return yv(e,Q(q({},t),{args:[o?s.args[1]:s.args[2],t.args[1]]}),r)}else{let o=qe(e,t.args[0],r);return gF(t.valueType,o,n)}}function qe(e,t,r){let n=r[t];if(n!==void 0)return n;let i=bF(e,t,r);return typeof i==\"number\"&&i===Math.floor(i)&&(i=Ve(i,1)),r[t]=i,i}function bF(e,t,r){let n=e.getInstruction(t);switch(n.type){case 1:return n.value;case 8:return aT(qe(e,n.args[0],r),qe(e,n.args[1],r));case 9:return uT(qe(e,n.args[0],r),qe(e,n.args[1],r));case 10:return cT(qe(e,n.args[0],r),qe(e,n.args[1],r));case 11:return lT(qe(e,n.args[0],r),qe(e,n.args[1],r));case 12:return zp(qe(e,n.args[0],r),qe(e,n.args[1],r));case 13:return pF(qe(e,n.args[0],r),qe(e,n.args[1],r));case 14:return pT(qe(e,n.args[0],r));case 15:return fF(qe(e,n.args[0],r),qe(e,n.args[1],r));case 16:return mF(qe(e,n.args[0],r),qe(e,n.args[1],r),qe(e,n.args[2],r));case 17:return dF(qe(e,n.args[0],r),qe(e,n.args[1],r));case 18:return yF(qe(e,n.args[0],r),qe(e,n.args[1],r));case 25:return fT(qe(e,n.args[0],r),qe(e,n.args[1],r));case 26:return dT(qe(e,n.args[0],r),qe(e,n.args[1],r));case 27:return mT(qe(e,n.args[0],r),qe(e,n.args[1],r));case 28:return yT(qe(e,n.args[0],r),qe(e,n.args[1],r));case 29:return gT(qe(e,n.args[0],r),qe(e,n.args[1],r));case 31:return qe(e,n.args[0],r)||qe(e,n.args[1],r);case 32:return qe(e,n.args[0],r)&&qe(e,n.args[1],r);case 44:return hT(n.tag,qe(e,n.args[0],r),qe(e,n.args[1],r));case 33:return qe(e,n.args[0],r)?qe(e,n.args[1],r):qe(e,n.args[2],r);case 37:{let s=[];for(let o of n.args)s.push(qe(e,o,r));return bT(n.symbol,s)}case 38:{let s=[];for(let o of n.args)s.push(qe(e,o,r));return s}case 39:case 40:case 41:return yv(e,n,r);case 48:return hF(e,t,r);case 47:{let s=n.args[0],o=e.getInstruction(s).args[0],a=t-s,c=e.getInstruction(s).args[a],l=[];l[c]=!0;for(let d=c;d>=o;d--){if(!l[d])continue;let g=e.getInstruction(d);if(!Me(g))for(let m of g.args)m<o?qe(e,m,r):l[m]=!0}let p=e.copy();p.truncate(o);for(let d=0;d<o;d++){let g=r[d],m=e.getInstruction(d);if(g!==void 0){let b=m.valueType;p.replaceInstructionWithConstant(d,{type:1,valueType:b,value:g})}}p.reopenAllBlocks();let f=[];for(let d=o;d<t;d++){let g=e.getInstruction(d);if(Me(g))f.push(p.copyInstruction(g));else{let m=[];for(let b of g.args)m.push(b<o?b:f[b-o]);g.type===40?f.push(p.InboundsListAccess(m)):f.push(p.copyInstructionWithArgs(g,m))}}return p.Noop(),p.replaceInstructionWithBlockVar(p.getReturnIndex(),{type:47,valueType:n.valueType,args:[s<o?s:f[s-o]]}),p.close().getCompiledFunction().fn()}case 19:case 20:case 21:case 22:case 23:case 24:case 42:case 0:case 2:case 3:case 49:case 50:case 51:throw new Error(`Programming Error: cannot interpret opcode ${n.type}`);default:let i=n;throw new Error(`Programming Error: unexpected opcode ${i.type}`)}}function Br(e,t){let r=e.getInstruction(t);if(r.type!==48)return t;if(r.isConstantBroadcast)return gv(e,t,r);let n=r.args[0],i=e.getInstruction(n),s=i.args[0],o=!1;for(let c=s+1;c<n;c++){let l=e.getInstruction(c);if(l.type===40&&l.args[1]===s){o=!0;break}}if(!o)return t;let a=[];for(let c=s;c<=n+i.args.length-1;c++){let l=e.getInstruction(c);if(Me(l))a.push(e.copyInstruction(l));else{let p=[];for(let f of l.args)p.push(f>=s?a[f-s]:f);l.type===40?a.push(e.InboundsListAccess(p)):a.push(e.copyInstructionWithArgs(l,p))}}let u=e.getInstruction(e.getReturnIndex());return u.type===48&&u.isConstantBroadcast?gv(e,e.getReturnIndex(),u):e.getReturnIndex()}function gv(e,t,r){if(r.valueType===Pr){let i=fr(e,t);if(i==null)throw gp(Wn(e,t));let s=[];for(let o=0;o<i;o++){let a=e.InboundsListAccess([t,e.Constant(o+1)]);s.push(a)}return e.List(s)}let n=dy(e,t);return t===e.getReturnIndex()&&e.popInstruction(),e.ConstantOfType(r.valueType,n)}function Hp(e,t,r){let n=e.getInstruction(t);if(W(n.valueType)){let i=fr(e,t);if(r=Math.floor(r),isNaN(r)||r<0||i!==void 0&&r>=i){let s=We(n.valueType);return e.NanOfType(s)}return n.type===38?n.args[r]:n.type===1&&W(n.valueType)?e.ConstantOfType(We(n.valueType),n.value[r]):n.type===48&&n.isConstantBroadcast?e.ConstantOfType(We(n.valueType),fv(e,t,r)):i!==void 0?e.InboundsListAccess([t,e.Constant(r+1)]):e.ListAccess([t,e.Constant(r+1)])}else{if(n.valueType===N)return isNaN(r)||r<0||r>2?e.Constant(NaN):n.type===15?n.args[r]:n.type===1?e.Constant(n.value[r]):e.OrderedPairAccess([t,e.Constant(r+1)]);if(n.valueType===H)return isNaN(r)||r<0||r>3?e.Constant(NaN):n.type===16?n.args[r]:n.type===1?e.Constant(n.value[r]):e.OrderedTripleAccess([t,e.Constant(r+1)]);throw new Error(`Cannot access elements of ${le(n.valueType)}`)}}function yy(e,t,r){let n=e.getInstruction(t);if(r.length===0)return e.ConstantOfType(n.valueType,[]);if(n.type===1&&W(n.valueType)){let i=[],s=We(n.valueType);for(let o of r){let a=Math.floor(o);isNaN(a)||a<0||a>=ro(e,t,\"Programming error: expected Constant list instruction to have constant length.\")?i.push(ki(s)):i.push(n.value[a])}return e.ConstantOfType(n.valueType,i)}else if(n.type===38){let i=[];for(let s of r){let o=Math.floor(s);if(isNaN(o)||o<0||o>=ro(e,t,\"Programming error: expected List instruction to have constant length.\")){let a=We(n.valueType);i.push(e.NanOfType(a))}else i.push(n.args[o])}return e.List(i)}else{if(n.type===48&&n.isConstantBroadcast)return e.ConstantOfType(n.valueType,dv(e,t,r));{let i=[],s=!0,o=fr(e,t);for(let u of r){let c=Math.floor(u);i.push(e.Constant(c+1)),(isNaN(c)||c<0||o===void 0||c>=o)&&(s=!1)}let a=[t,e.List(i)];return s?e.InboundsListAccess(a):e.ListAccess(a)}}}function bv(e){if(e.instructionsLength()-1!==e.getReturnIndex())throw new Error(\"Programming Error: only the final instruction in a chunk can be constant collapsed\");let t=e.getInstruction(e.getReturnIndex());if(Me(t))return e.getReturnIndex();switch(t.type){case 8:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.Constant(aT(n.value,i.value))):n.type===1&&k(n.value)===0?(e.popInstruction(),t.args[1]):i.type===1&&k(i.value)===0?(e.popInstruction(),t.args[0]):e.getReturnIndex()}case 9:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.Constant(uT(n.value,i.value))):n.type===1&&k(n.value)===0?(e.popInstruction(),e.Negative([t.args[1]])):i.type===1&&k(i.value)===0?(e.popInstruction(),t.args[0]):e.getReturnIndex()}case 10:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.Constant(cT(n.value,i.value))):n.type===1&&k(n.value)===1?(e.popInstruction(),t.args[1]):i.type===1&&k(i.value)===1?(e.popInstruction(),t.args[0]):e.getReturnIndex()}case 11:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.Constant(lT(n.value,i.value))):i.type===1&&k(i.value)===1?(e.popInstruction(),t.args[0]):e.getReturnIndex()}case 12:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);if(n.type===1&&i.type===1)return e.popInstruction(),e.Constant(zp(n.value,i.value));if(n.type===1&&n.valueType===I){let s=k(n.value);if(s===Math.E)return e.popInstruction(),e.SyntheticNativeFunction(\"exp\",[t.args[1]]);if(s>0)return e.popInstruction(),e.RawExponent(t.args)}if(i.type===1&&i.valueType===I){let s=k(i.value);if(s===1)return e.popInstruction(),t.args[0];if(s===Math.floor(s))return e.popInstruction(),e.RawExponent(t.args);if(pr(i.value)){let{n:o,d:a}=i.value;if(a%2===1){e.popInstruction();let u=e.RawExponent([e.SyntheticNativeFunction(\"abs\",[t.args[0]]),t.args[1]]);return o%2===0?u:e.Multiply([e.SyntheticNativeFunction(\"sign\",[t.args[0]]),u])}}}return e.getReturnIndex()}case 13:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.Constant(zp(n.value,i.value))):i.type===1&&k(i.value)===1?(e.popInstruction(),t.args[0]):e.getReturnIndex()}case 14:{let n=e.getInstruction(t.args[0]);return n.type===1?(e.popInstruction(),e.Constant(pT(n.value))):e.getReturnIndex()}case 25:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.ConstantOfType(ge,fT(n.value,i.value))):e.getReturnIndex()}case 26:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.ConstantOfType(ge,dT(n.value,i.value))):e.getReturnIndex()}case 27:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.ConstantOfType(ge,mT(n.value,i.value))):e.getReturnIndex()}case 28:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.ConstantOfType(ge,yT(n.value,i.value))):e.getReturnIndex()}case 29:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.ConstantOfType(ge,gT(n.value,i.value))):e.getReturnIndex()}case 31:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.ConstantOfType(ge,cv(n.value,i.value))):n.type===1?(e.popInstruction(),n.value?t.args[0]:t.args[1]):i.type===1?(e.popInstruction(),i.value?t.args[1]:t.args[0]):e.getReturnIndex()}case 32:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.ConstantOfType(ge,lv(n.value,i.value))):n.type===1?(e.popInstruction(),n.value?t.args[1]:t.args[0]):i.type===1?(e.popInstruction(),i.value?t.args[0]:t.args[1]):e.getReturnIndex()}case 33:{let n=e.getInstruction(t.args[0]);return n.type===1?(e.popInstruction(),n.value?t.args[1]:t.args[2]):e.getReturnIndex()}case 17:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===15&&i.type===1?(e.popInstruction(),n.args[k(i.value)-1]):n.type===1&&n.valueType===N&&i.type===1?(e.popInstruction(),e.Constant(n.value[k(i.value)-1])):e.getReturnIndex()}case 18:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===16&&i.type===1?(e.popInstruction(),n.args[k(i.value)-1]):n.type===1&&n.valueType===H&&i.type===1?(e.popInstruction(),e.Constant(n.value[k(i.value)-1])):e.getReturnIndex()}case 38:{if(PF(e,t.args)){e.popInstruction();let n=[];for(let i of t.args)n.push(e.getInstruction(i).value);return e.ConstantOfType(t.valueType,n)}return e.getReturnIndex()}case 39:case 41:{let n=t.args[0],i=e.getInstruction(n),s=e.getInstruction(t.args[1]);if(i.type===33&&s.type===1){let o=t.type===39?e.ListAccess([i.args[1],t.args[1]]):e.InboundsListAccess([i.args[1],t.args[1]]),a=t.type===39?e.ListAccess([i.args[2],t.args[1]]):e.InboundsListAccess([i.args[2],t.args[1]]);return e.Piecewise([i.args[0],o,a])}if(i.type===48){if(s.type===1&&i.isConstantBroadcast&&i.valueType!==Pr)return e.ConstantOfType(t.valueType,dy(e,e.getReturnIndex()));e.popInstruction();let o=i.args[0],a=n-o,u=e.getInstruction(o),c=u.args[0],l,p;if(t.type===41)l=t.args[1];else{let d=fr(e,n);if(s.type===1&&s.valueType===I&&d!==void 0){let g=k(s.value),m=Math.floor(g);if(m<1||m>d)return e.NanOfType(t.valueType);l=g===m?t.args[1]:e.Constant(m)}else{let g=e.Constant(1),b=e.getInstruction(c).args[0],y=e.SyntheticNativeFunction(\"floor\",[t.args[1]]),h=e.GreaterEqual([y,g]),x=e.LessEqual([y,b]);l=e.Piecewise([h,e.Piecewise([x,y,b]),g]),p={one:g,lengthIndex:b,roundedIndex:y,greaterEqualIndex:h,lessEqualIndex:x}}}if(u.args[a]<c)return u.args[a];let f=[l];for(let d=c+1;d<=u.args[a];d++){let g=e.getInstruction(d);if(Me(g))f.push(e.copyInstruction(g));else{let m=[];for(let b of g.args)m.push(b>=c?f[b-c]:b);g.type===40?f.push(e.InboundsListAccess(m)):f.push(e.copyInstructionWithArgs(g,m))}}if(p){let{greaterEqualIndex:d,lessEqualIndex:g,lengthIndex:m,one:b}=p,y=We(i.valueType),h=e.NanOfType(y),x=f[f.length-1],P=e.And([e.And([d,g]),e.GreaterEqual([m,b])]);return e.Piecewise([P,x,h])}else return f[f.length-1]}else if(s.type===1&&s.valueType===I)if(i.type===38){e.popInstruction();let o=Math.floor(k(s.value))-1;return isNaN(o)||o<0||o>=i.args.length?e.NanOfType(t.valueType):i.args[o]}else if(i.type===1){e.popInstruction();let o=Math.floor(k(s.value))-1;return isNaN(o)||o<0||o>=i.value.length?e.NanOfType(t.valueType):e.ConstantOfType(We(i.valueType),i.value[o])}else return e.getReturnIndex();else return e.getReturnIndex()}case 47:{let n=e.getInstruction(t.args[0]);if(!pn(n)||fy(e,e.getReturnIndex(),n.args[0]))return e.getReturnIndex();if(t.valueType===I||t.valueType===N||t.valueType===H){let i=e.copy();i.close();let s=i.getCompiledFunction().fn();return e.popInstruction(),e.ConstantOfType(t.valueType,s)}else throw new Error(`Constant collapsing a block with return type ${le(t.valueType)} is not implemented.`)}case 37:switch(t.symbol){case\"nthroot\":{let n=hv(e,t.args);if(n!==void 0)return e.Constant(Cf(n[0],n[1]));{let i=e.getInstruction(t.args[1]);if(i.type===1&&i.valueType===I)return e.Exponent([t.args[0],e.Constant(wl(i.value))])}return e.getReturnIndex()}case\"count\":{let n=fr(e,t.args[0]);return n!==void 0?(e.popInstruction(),e.Constant(n)):e.getReturnIndex()}case\"select\":{let n=fr(e,t.args[0]);if(n!==void 0&&vt(e.getInstruction(t.args[1]))){e.popInstruction();let i=rr(e,t.args[1]),s=[];for(let o=0;o<Math.min(n,i.length);o++)i[o]&&s.push(o);return yy(e,t.args[0],s)}else return e.getReturnIndex()}case\"shuffle\":{let n=t.args[0],i=t.args[1],s=fr(e,i);if(s!==void 0&&vt(e.getInstruction(n))){e.popInstruction();let o=LP(rr(e,n),s);return yy(e,i,o)}else return e.getReturnIndex()}case\"elementsAt\":{let n=t.args[0],i=t.args[1];if(vt(e.getInstruction(i))){e.popInstruction();let s=rr(e,i);return yy(e,n,s)}return e.getReturnIndex()}case\"restrictionToBoolean\":{let n=e.getInstruction(t.args[0]);return vt(n)?(e.popInstruction(),e.ConstantOfType(ge,n.value)):n.type===37&&n.symbol===\"restriction\"?(e.popInstruction(),n.args[0]):e.getReturnIndex()}default:{let n=hv(e,t.args);return n===void 0?e.getReturnIndex():(e.popInstruction(),e.ConstantOfType(t.valueType,bT(t.symbol,n)))}}case 44:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return vt(n)&&vt(i)?e.ConstantOfType(ot,hT(t.tag,rr(e,t.args[0]),rr(e,t.args[1]))):e.getReturnIndex()}case 15:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&n.valueType===I&&i.type===1&&i.valueType===I?e.ConstantOfType(N,[n.value,i.value]):e.getReturnIndex()}case 16:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]),s=e.getInstruction(t.args[2]);return n.type===1&&n.valueType===I&&i.type===1&&i.valueType===I&&s.type===1&&s.valueType===I?e.ConstantOfType(H,[n.value,i.value,s.value]):e.getReturnIndex()}case 48:{let n=fr(e,e.getReturnIndex());return n!==void 0&&n===0?(e.popInstruction(),e.ConstantOfType(t.valueType,[])):e.getReturnIndex()}case 49:{for(let i of t.args)if(!eu(e.getInstruction(i)))return e.getReturnIndex();e.popInstruction();let n={};for(let i=0;i<t.symbols.length;i++){let s=t.symbols[i],o=e.getInstruction(t.args[i]);if(o.type===48&&(o=e.getInstruction(Br(e,t.args[i]))),o.type!==1)throw new Error(\"Expected instruction to be constant\");let{valueType:a,value:u}=o;uv(a,u)||(n[s]={value:u,valueType:a})}return e.ConstantOfType(Ke,{type:\"Action\",updateRules:n})}case 20:case 22:case 23:case 24:case 40:case 42:case 21:case 19:case 50:case 51:return e.getReturnIndex();default:let r=t;throw new Error(`Unexpected opcode ${r.type}`)}}function PF(e,t){for(let r of t){let n=e.getInstruction(r);if(!vt(n))return!1}return!0}function hv(e,t){let r=[];for(let n of t){let i=e.getInstruction(n);if(vt(i))r.push(i.value);else return}return r}function Qt(e,t,r){switch(t){case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 17:case 18:case 21:case 19:case 23:case 50:return I;case 25:case 26:case 27:case 28:case 29:case 31:case 32:return ge;case 33:{let i=e.getInstruction(r[1]).valueType,s=e.getInstruction(r[2]).valueType;return i===Be&&W(s)?s:s===Be&&W(i)?i:(i===Ne||i===Te||i===Ot)&&s===I?I:(i===ar||i===ur||i===kn)&&s===ie?ie:i}case 15:return N;case 16:return H;case 38:{if(r.length===0)return Be;let i=e.getInstruction(r[0]).valueType;if(i===Ne||i===Te){let s=!1,o=!0;for(let a of r){let u=e.getInstruction(a).valueType;if(u===I&&(s=!0),u!==I&&u!==Ne&&u!==Te){o=!1;break}}s&&o&&(i=I)}return qi(i)?Ln(i):er}case 39:case 40:case 41:{let i=e.getInstruction(r[0]).valueType;return W(i)?We(i):Vt}case 44:return ot;case 49:return Ke;case 1:case 2:case 37:case 42:case 47:case 48:case 3:case 0:case 24:case 22:case 20:case 51:return Vt;default:let n=t;throw new Error(`Unexpected opcode ${n}`)}}var xv={segment:!0,ray:!0,vector:!0,line:!0,circle:!0,arc:!0,polygon:!0,glider:!0,midpoint:!0,intersection:!0,strictintersection:!0,perpendicular:!0,parallel:!0,translate:!0,rotate:!0,dilate:!0,reflect:!0,apply:!0,segments:!0,vertices:!0,angle:!0,angles:!0,directedangle:!0,directedangles:!0,clockwise:!0,counterclockwise:!0,reflex:!0,start:!0,end:!0};function TF(e){return e!==void 0&&e in xv}function xT(e){return TF(e)?e===\"rotate\"||e===\"dilate\"||e===\"translate\"||e===\"reflect\"?!0:!1:!1}function gy(e){if(e.type===\"ListAccess\"&&e.list.type===\"Identifier\"&&e.index.type===\"Constant\")return[e.list._symbol,e.index.asValue()];if(e.type===\"Identifier\")return[e._symbol,void 0]}function hy(e){let t={},r=e;if((r instanceof ga||r instanceof ba)&&(t.identifier=r._symbol,r=r._expression),r instanceof Vc&&r.index instanceof Gr&&(t.listAccess=r.index.asValue(),r=r.list),t.identifier&&r instanceof Tt){let n=r._symbol,i=t.listAccess;t.assignmentRhsReference=[n,i]}if(r instanceof Cr){let n=r._symbol,i=r.args[0]instanceof Tt?r.args[0]._symbol:void 0;if(xT(n)&&e instanceof ba&&i&&e._argSymbols.some(s=>s===i))t.tree={symbol:n,parents:r.args.slice(1).map(gy)};else if(xv[n])t.tree={symbol:n,parents:r.args.map(gy)};else{let s=[r._symbol,void 0];t.tree={symbol:\"apply\",parents:[s,...r.args.map(gy)]}}}else if(r instanceof ns){let n=r.args.map(gy);n.length===2&&n[1]&&n[1][0]===\"segments\"?t.tree={symbol:\"segment\",parents:[n[0]]}:n.length===2&&n[1]&&n[1][0]===\"start\"?t.tree={symbol:\"start\",parents:[n[0]]}:n.length===2&&n[1]&&n[1][0]===\"end\"&&(t.tree={symbol:\"end\",parents:[n[0]]})}return t}function Pv(e,t,r,n,i){var y,h,x,P;if(!Fc(t)&&!wc(t)||xT(t))return;let s,o=!1,a=!1,u=0,c=[],l=[],p=n.map(E=>e.getInstruction(E).valueType),f=Fc(t)?eo[t]:void 0;if(f&&(o=f.isSeeded,s=void 0,c.push(...f.argumentTypes),u=(h=(y=f.defaultArguments)==null?void 0:y.length)!=null?h:0,l=by(c,p,u),a=f.allowDotCall),t===\"mean\"&&l.length===0&&p.length>0&&ne(p[0],at))c=[[at]],u=0,l=[],a=!0;else if(wc(t)&&l.length===0&&!(f!=null&&f.fallthroughUnlessDistribution&&p.length>0&&ne(p[0],at))){let E=yr[t];s=E.tag,c.push(...fh(t)),u=(P=(x=E.defaultArguments)==null?void 0:x.length)!=null?P:0,l=by(c,p,u),a=a||E.allowDotCall}let d=Math.min(...c.map(Va)),g=Math.max(...c.map(Nl)),m=n,b=n;if(o&&(b=m=n.slice(1),d-=1,g-=1),i){if(!a)throw Wl(r);let E=e.getInstruction(m[0]).valueType;if(!W(E)&&E!==xt&&E!==ve&&E!==at&&E!==lr&&(E===N||!Al(E)))throw Ah(r,le(E));r=\".\"+r,b=m.slice(1),d-=1,g-=1}if(!(l.length>0))throw IF(e,{symbol:t,errorSymbol:r,providedArgs:b,argsWithoutSeed:m,isDotCall:i,minArity:d,maxArity:g,defaultArgumentCount:u,builtInTag:s})}function IF(e,{symbol:t,errorSymbol:r,providedArgs:n,argsWithoutSeed:i,isDotCall:s,minArity:o,maxArity:a,defaultArgumentCount:u,builtInTag:c}){if(c===\"doubleReducer\"&&n.length===2){if(!W(e.getInstruction(n[0]).valueType)||!W(e.getInstruction(n[1]).valueType))throw up(t)}else if(c===\"parameterizedReducer\"&&n.length===2&&!W(e.getInstruction(n[0]).valueType))throw xx(t);if(t===\"logbase\"&&n.length!==2)return is(\"log\",1,n.length-1);if(t===\"random\")return pb();if(n.length<o||n.length>a){let{dotMinArityExampleArgs:p,dotMaxArityExampleArgs:f,minArityExampleArgs:d,maxArityExampleArgs:g}=EF(t),m,b;if(n.length<o?(b=o-u,s&&p?m=r+p:d&&(m=r+d)):(b=a,s&&f?m=r+f:g&&(m=r+g)),c===\"reducer\"&&n.length===0)return yb(r);if(c===\"doubleReducer\")return rp(r);if(c===\"parameterizedReducer\")return mb(r);if(c===\"color\")return db(r);if(Fc(t))switch(t){case\"pdf\":return s?is(r,b,n.length,m):ab();case\"cdf\":return s?is(r,b,n.length,m):n.length<o?ub():cb();case\"tdist\":return lb();case\"length\":case\"round\":case\"midpoint\":case\"segment\":case\"vector\":case\"distance\":case\"circle\":case\"center\":case\"radius\":case\"glider\":case\"intersection\":case\"strictintersection\":case\"parallel\":case\"perpendicular\":case\"start\":case\"end\":case\"angle\":case\"directedangle\":case\"angles\":case\"directedangles\":case\"apply\":case\"translate\":case\"reflect\":case\"dilate\":case\"rotate\":case\"normaldist\":case\"poissondist\":case\"binomialdist\":case\"uniformdist\":case\"total\":case\"mean\":case\"median\":case\"stdev\":case\"var\":case\"quantile\":case\"sort\":case\"shuffle\":case\"join\":case\"unique\":case\"polygon\":case\"coterminal\":return is(r,b,n.length,m);case\"points\":case\"lines\":case\"circles\":case\"polygons\":case\"rays\":case\"vectors\":case\"arcs\":throw On(r);case\"histogram\":case\"dotplot\":case\"boxplot\":case\"ttest\":case\"ittest\":case\"stats\":case\"det\":case\"inv\":case\"transpose\":case\"rref\":case\"trace\":throw te(`Unexpected arity error for ${t}`);default:let y=t;throw new Error(`Unexpected compiler function ${y}`)}return is(r,b,n.length,m)}if(t===\"polygon\"&&n.length===2&&e.getInstruction(n[0]).valueType===I&&e.getInstruction(n[1]).valueType===I)return tp();let l=[];for(let p=0;p<i.length;p++){let f=i[p],d=c!==void 0&&c!==\"doubleReducer\"&&c!==\"never-broadcast\"&&!(c===\"parameterizedReducer\"&&p===0)&&t!==\"polygon\",g=e.getInstruction(f).valueType;W(g)&&d&&(g=We(g)),l.push(le(g))}return Oi(r,l)}function EF(e){return Fc(e)?eo[e]:wc(e)?yr[e]:{}}function by(e,t,r){return Ma(e,t).filter(n=>t.length+r>=Va(n))}var sc=vs([[I,I]]),MF=vs([[{meta:\"union\",types:Ps},{meta:\"union\",types:[ge,I]}]]),PT={Negative:vs([[I],[N],[he],[ve],[H]]),Add:vs([[I,I],[N,N],[he,he],[ve,ve],[H,H]]),Subtract:vs([[I,I],[N,N],[he,he],[ve,ve],[H,H]]),Multiply:vs([[I,I],[N,I],[I,N],[I,he],[I,ve],[he,I],[ve,I],[H,I],[I,H],[Ot,{meta:\"union\",types:ka}],[{meta:\"union\",types:ka},Ot]]),DotMultiply:vs([[I,I],[N,I],[I,N],[he,he],[ve,ve],[I,he],[he,I],[I,ve],[ve,I],[H,I],[I,H],[H,H],[Ot,{meta:\"union\",types:ka}],[{meta:\"union\",types:ka},Ot]]),CrossMultiply:vs([[I,I],[N,I],[I,N],[he,I],[I,he],[ve,I],[I,ve],[ve,ve],[H,H],[Ot,{meta:\"union\",types:ka}],[{meta:\"union\",types:ka},Ot]]),Divide:vs([[I,I],[N,I],[he,I],[ve,I],[H,I]]),Exponent:sc,\"Comparator['=']\":sc,\"Comparator['>']\":sc,\"Comparator['<']\":sc,\"Comparator['>=']\":sc,PercentOf:sc,\"Comparator['<=']\":sc,And:vs([[ge,ge]]),NamedCoordinateAccess:vs([[N],[H]]),Norm:vs([[I],[N],[H],[he],[ve]]),ListAccess:MF};function Da(e,t){let r=[];for(let n of t)r.push(le(e.getInstruction(n).valueType));return r}function oc(e,t){let r=[];for(let n of t){let i=e.getInstruction(n).valueType,s=W(i)?We(i):i;r.push(le(s))}return r}function ke(e,t,r){return ne(e.getInstruction(t).valueType,r)}function xy(e,t){return Array.isArray(e)?t>e.length-1?void 0:e[t]:t<e.initial.length?e.initial[t]:e.rest}function tu(e,t,r,n){var c,l;let i=r.type;if(i===\"FunctionCall\"||i===\"SeededFunctionCall\"||i===\"DotAccess\"){let p,f;if(r instanceof ns&&(r.args[1]instanceof Tt||r.args[1]instanceof Cr))p=r.args[1]._symbol,f=(c=r.args[1]._errorSymbol)!=null?c:p;else if(r instanceof Cr||r instanceof Vu)p=r._symbol,f=(l=r._errorSymbol)!=null?l:p;else return;if(p===\"polygon\"&&t.is3dPolicy())throw em();Pv(e,p,f,n,r instanceof ns);return}let s=IT(e,t,r,n);if(!s)return;let o=Math.min(...s.map(Va));if(s.length>0&&n.length>=o)return;let a=n.map(p=>e.getInstruction(p).valueType),u=DF(i,a);switch(i){case\"Add\":throw xh(u);case\"Subtract\":throw Ph(u);case\"CrossMultiply\":throw t.is3dProduct()&&a.length===2&&(ne(a[0],N)&&ne(a[1],N)||ne(a[0],I)&&ne(a[1],H)||ne(a[0],H)&&ne(a[1],I))?Yl(u):kl(u);case\"DotMultiply\":throw kl(u);case\"Multiply\":{if(t.is3dProduct()&&a.length===2){if(ne(a[0],H)&&ne(a[1],H))throw Zl(u);if(ne(a[0],N)&&ne(a[1],N))throw Xl(u)}throw kl(u)}case\"Divide\":throw Th(u);case\"Exponent\":throw Ih(u);case\"Negative\":throw Eh(u);case\"Comparator['=']\":case\"Comparator['>']\":case\"Comparator['<']\":case\"Comparator['>=']\":case\"Comparator['<=']\":throw Mh(u);case\"And\":throw Ed(u);case\"Piecewise\":throw ne(a[0],ge)?qh([le(e.getInstruction(n[1]).valueType),le(e.getInstruction(n[2]).valueType)]):vd(u);case\"Restriction\":throw vd(u);case\"List\":{Tv(e,n);break}case\"ListAccess\":throw $l(u);case\"Norm\":throw Oi(\"abs\",u);case\"ParenSeq\":{let p=a.indexOf(Ke)!==-1,f=a.some(g=>g!==Ke);if(p&&f)throw Rd([le(a[0]),le(a[1])]);if(a.length!==2&&(!t.is3dProduct()||a.length!==3)){let g=t.is3dPolicy()?3:2;throw bb(g)}let d=a.find(g=>!ne(g,I));throw d!==void 0?Dh(le(d)):te(\"Unexpected error type checking ParenSeq\")}case\"BareSeq\":{if(a.length<2)throw On(\",\");let p=a[0],f=a.find(d=>d!==p);if(f)throw Rd([le(p),le(f)]);if(p===I)throw n.length===2?gb():hb();Tv(e,n);break}case\"Ans\":case\"Constant\":case\"Assignment\":case\"MixedNumber\":case\"Identifier\":case\"Construction\":case\"Range\":case\"NamedCoordinateAccess\":case\"Sum\":case\"Product\":case\"Integral\":case\"ListComprehension\":case\"FunctionExponent\":case\"FunctionFactorial\":case\"Prime\":case\"Derivative\":case\"UpdateRule\":case\"Substitution\":case\"CoordinateEquation\":case\"FunctionDefinition\":case\"Slider\":case\"RegressionParameter\":case\"Seed\":case\"ExtendSeed\":case\"PercentOf\":return;default:{let p=i;throw new Error(`Unexpected node type: ${p}`)}}}function Tv(e,t){if(t.length===0)return;let r=e.getInstruction(t[0]).valueType;if(!qi(r))throw Bu([le(r)]);for(let n of t){let i=e.getInstruction(n).valueType;if(!qi(i))throw Bu([le(i)]);if(i!==r)throw jl()}}function DF(e,t){let r=n=>W(n)?We(n):n;switch(e){case\"Add\":case\"Subtract\":case\"Multiply\":case\"Divide\":case\"Exponent\":case\"Negative\":case\"Comparator['<']\":case\"Comparator['>']\":case\"Comparator['=']\":case\"Comparator['<=']\":case\"Comparator['>=']\":case\"NamedCoordinateAccess\":return t.map(r).map(le);case\"ListAccess\":case\"Constant\":case\"MixedNumber\":case\"Identifier\":case\"Ans\":case\"List\":case\"Range\":case\"Construction\":case\"ParenSeq\":case\"BareSeq\":case\"Norm\":case\"Sum\":case\"Product\":case\"Integral\":case\"ListComprehension\":case\"FunctionExponent\":case\"FunctionFactorial\":case\"Prime\":case\"Piecewise\":case\"Restriction\":case\"Derivative\":case\"UpdateRule\":case\"Substitution\":case\"Assignment\":case\"CoordinateEquation\":case\"FunctionDefinition\":case\"Slider\":case\"RegressionParameter\":case\"Seed\":case\"ExtendSeed\":case\"DotMultiply\":case\"CrossMultiply\":case\"And\":case\"PercentOf\":return t.map(le);default:{let n=e;throw new Error(`Unexpected node type: ${n}`)}}}function Ev(e,t){let r=e.getInstruction(t);if(Me(r))return;let n=TT(e,r).expectedTypes;if(r.type===49){for(let a of r.args){let u=e.getInstruction(a).valueType;if(!ne(u,I)&&!ne(u,N)&&!ne(u,H)&&!ne(u,Gt)&&!ne(u,we)&&!ne(u,De)&&!ne(u,ye)&&!ne(u,Le)&&!ne(u,he)&&!ne(u,me)&&!ne(u,fe)&&!ne(u,Ne)&&!ne(u,lr)&&!ne(u,Te))throw Zh(le(u))}let o={};for(let a of r.symbols){if(o[a])throw Wh(a);o[a]=!0}return}let i=[];for(let o=0;o<r.args.length;o++){let a=e.getInstruction(r.args[o]).valueType,u=xy(n,o);(u===void 0||!ET(a,u))&&i.push(r.args[o])}if(i.length===0)return;let s=Da(e,r.args);switch(r.type){case 32:throw Ed(s);case 17:case 18:throw vh(s);case 21:{let o=e.getInstruction(r.args[0]).valueType,a=e.getInstruction(r.args[1]).valueType;if(o!==I)throw Gh([le(o)]);if(a!==I)throw Bh([le(a)]);return}case 22:{let o=e.getInstruction(r.args[1]).valueType;throw zh([le(o)])}case 44:{if(e.getInstruction(r.args[0]).valueType!==ot||e.getInstruction(r.args[1]).valueType!==ot&&e.getInstruction(r.args[1]).valueType!==I)throw te(`Unexpected arg types for ExtendSeed: ${Da(e,r.args).map(o=>o.key).join(\", \")}`);return}case 31:case 15:case 16:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 25:case 26:case 27:case 28:case 29:case 38:case 39:case 40:case 41:case 37:case 42:case 33:case 48:case 47:case 23:case 24:case 19:case 20:case 50:case 51:throw te(`Invalid argument types for opcode ${r.type}`);default:{let o=r;throw new Error(`Unexpected opcode: ${o.type}`)}}}function TT(e,t,r=!1){switch(t.type){case 8:case 9:case 10:case 11:return r&&t.args.length>0&&e.getInstruction(t.args[0]).valueType===N?{expectedTypes:[N,N]}:{expectedTypes:[I,I]};case 12:case 13:case 25:case 26:case 27:case 28:case 29:return{expectedTypes:[I,I]};case 14:return{expectedTypes:[I]};case 31:return{expectedTypes:[ge,ge]};case 32:return{expectedTypes:[ge,ge]};case 33:return{expectedTypes:[ge,t.valueType,t.valueType]};case 15:case 16:return{expectedTypes:t.args.map(()=>I)};case 17:return{expectedTypes:[N,I]};case 18:return{expectedTypes:[H,I]};case 21:return{expectedTypes:[I,I]};case 22:{let n=e.getInstruction(t.args[1]).valueType;return n===N||n===H?{expectedTypes:[I,n]}:{expectedTypes:[I,I]}}case 38:{let n=t.valueType,i=We(n);return{expectedTypes:{type:\"variadic\",initial:[],rest:i}}}case 39:case 40:case 41:return{expectedTypes:[er,I]};case 37:{let n=t.symbol,i=yr[n],s=i.argumentTypes;if(i.tag===\"reducer\"&&!vF(e,t.args)&&Array.isArray(s)&&typeof s[0]==\"number\"&&W(s[0]))return{isReducerWithNoListArgs:!0,expectedTypes:{type:\"variadic\",initial:[],rest:We(s[0])}};if(Array.isArray(s))return{expectedTypes:s};{let{initial:o,rest:a}=s,u=t.args.length-o.length,c=[...o];for(let l=0;l<u;l++)c.push(a);return{expectedTypes:c}}}case 44:return e.getInstruction(t.args[0]).valueType===ot&&e.getInstruction(t.args[1]).valueType!==ot?{expectedTypes:[ot,I]}:{expectedTypes:t.args.map(n=>e.getInstruction(n).valueType)};case 47:return{expectedTypes:t.args.map(n=>e.getInstruction(n).valueType)};case 23:return{expectedTypes:[I]};case 19:return{expectedTypes:t.args.map(n=>{let i=e.getInstruction(n).valueType;return i===ge||t.callData.type===\"sum\"&&(i===N||i===H)?i:I})};case 50:{let n=t.callData.parameterSymbols.length,i=[];for(let s=0;s<n;s++)i.push(I,I);return{expectedTypes:i}}case 24:case 20:case 51:{let n=[I];for(let i=1;i<t.args.length;i++)n.push(e.getInstruction(t.args[i]).valueType);return{expectedTypes:n}}case 42:return{expectedTypes:t.args.map(()=>I)};case 48:case 49:return{expectedTypes:t.args.map(n=>e.getInstruction(n).valueType)};default:{let n=t;throw new Error(`Unexpected opcode: ${n.type}`)}}}function IT(e,t,r,n){let i=[];for(let s of n)i.push(s===void 0?void 0:e.getInstruction(s).valueType);if(r instanceof Ha){let s=n.filter(a=>a!==void 0);if(s.length===0)return;let o=Qt(e,38,s);return W(o)&&o!==er?Ma([{type:\"variadic\",initial:[],rest:We(o)}],i):[]}else if(r instanceof Cr||r instanceof Vu||r instanceof ns){let s=r instanceof ns?r.args[1]._symbol:r._symbol;if(!s)return;let o=zl(s);return o?Ma(o,i):void 0}else if(r instanceof ya){let[s,o,a]=n,u=o&&e.getInstruction(o),c=u==null?void 0:u.valueType,l=a&&e.getInstruction(a),p=l==null?void 0:l.valueType;!(c!==void 0&&p!==void 0&&(So(c,p)||So(p,c)))&&l&&vt(l)&&l.valueType==I&&ci(l.value)&&(a=void 0,l=void 0,p=void 0);let d;if(c===Be&&p!==void 0&&W(p))d=p;else if(c!==void 0&&(So(c,I)||So(c,ie)))d=I;else if(c!==void 0)d=c;else if(p!==void 0)d=p;else return;return W(d)&&(d=We(d)),Ma([Yn([ge,d,d])],[i[0],c,p])}else if(t.is3dProduct()&&r instanceof cl){let s=[...PT.DotMultiply,Yn([N,N])];return Ma(s,i)}else if(r instanceof Is){let s=[{type:\"variadic\",initial:[Ke],rest:Ke},Yn([I,I])];return t.is3dProduct()&&s.push(Yn([I,I,I])),Ma(s,i)}else if(r instanceof Gc){let s=[{type:\"variadic\",initial:[Ke],rest:Ke}],o=n.filter(a=>a!==void 0&&e.getInstruction(a).valueType!==I);if(o.length>0){let a=Qt(e,38,o);W(a)&&a!==er&&s.push({type:\"variadic\",initial:[],rest:We(a)})}return Ma(s,i)}else if(r.type in PT&&i.some(s=>s!==void 0)){let s=PT[r.type];return s?Ma(s,i):void 0}}function Ma(e,t){let r=[];for(let n of e)Array.isArray(n)&&n.length<t.length||t.every((i,s)=>{if(i===void 0)return!0;let o=xy(n,s);return o===void 0?!1:OF(i,o)})&&r.push(n);return r}function vF(e,t){for(let r of t)if(W(e.getInstruction(r).valueType))return!0;return!1}function ET(e,t){return typeof t==\"number\"?$s(e,t):t.types.some(r=>$s(e,r))}function OF(e,t){return typeof t==\"number\"?So(e,t):t.types.some(r=>So(e,r))}function Py(e,t){let r=new Set;for(let n of e){let i;if(Array.isArray(n)){if(t>=n.length)continue;i=Iv(n[t])}else i=Iv(t<n.initial.length?n.initial[t]:n.rest);for(let s of i)r.add(s)}return[...r]}function Iv(e){return typeof e==\"number\"?[e]:e.types}function vs(e){return e.map(Yn)}function Mv(e){let t=[];for(let r=0;r<e.instructionsLength();r++)t.push(!1);t[e.getReturnIndex()]=!0;for(let r=e.instructionsLength()-1;r>=0;r--){if(!t[r]){e.replaceInstructionWithNoop(r);continue}let n=e.getInstruction(r);if(!Me(n))for(let i of n.args)t[i]=!0}}function Os(e,t){return e.pushLeafInstruction(t)}function gr(e,t,r){switch(t.type){case 8:return e.Add(r);case 9:return e.Subtract(r);case 10:return e.Multiply(r);case 11:return e.Divide(r);case 12:return e.Exponent(r);case 13:return e.RawExponent(r);case 14:return e.Negative(r);case 25:return e.Equal(r);case 26:return e.Less(r);case 27:return e.Greater(r);case 28:return e.LessEqual(r);case 29:return e.GreaterEqual(r);case 31:return e.Or(r);case 32:return e.And(r);case 33:return e.Piecewise(r);case 47:return e.BlockVar(t.valueType,r);case 48:return e.BroadcastResult(t.valueType,r);case 15:return e.OrderedPair(r);case 16:return e.OrderedTriple(r);case 17:return e.OrderedPairAccess(r);case 18:return e.OrderedTripleAccess(r);case 37:return e.NativeFunction(t.symbol,t.callData,r);case 42:return e.Distribution(t.symbol,r);case 21:return e.BeginIntegral(t.callData,r);case 22:return e.EndIntegral(r);case 23:return e.BeginBroadcast(r);case 24:return e.EndBroadcast(r);case 19:return e.BeginLoop(t.callData,r);case 20:return e.EndLoop(r);case 38:return e.List(r);case 39:return e.ListAccess(r);case 40:return e.DeferredListAccess(r);case 41:return e.InboundsListAccess(r);case 44:return e.ExtendSeed(t.tag,r);case 49:return e.Action(t.symbols,r);case 50:return e.BeginMap(t.callData,r);case 51:return e.EndMap(r);default:let n=t;throw new Error(`Unexpected opcode ${n.type}`)}}function Dv(e){if(e.instructionsLength()-1!==e.getReturnIndex())throw new Error(\"Programming Error: only the final instruction in a chunk can be converted to broadcast\");let t=e.getInstruction(e.getReturnIndex());if(Me(t))return e.getReturnIndex();switch(t.type){case 8:case 9:case 10:case 11:case 12:case 13:case 25:case 26:case 27:case 28:case 29:case 31:case 32:case 15:case 16:case 14:case 33:case 17:case 18:return pl(e,t);case 42:return Br(e,pl(e,t));case 37:{let n=yr[t.symbol];switch(n.tag){case\"default\":case\"trig\":case\"trig2\":case\"inverseTrig\":case\"color\":return pl(e,t);case\"never-broadcast\":{let i=[],s=!1;for(let o of t.args){let a=Br(e,o);a!==o?(s=!0,i.push(a)):i.push(o)}return s?e.copyInstructionWithArgs(t,i):e.getReturnIndex()}case\"reducer\":if(SF(e,t.args))if(t.args.length===1){let i=t.args[0],s=Br(e,i);return s!==i?e.copyInstructionWithArgs(t,[s]):e.getReturnIndex()}else return pl(e,t);else return e.getReturnIndex();case\"doubleReducer\":{if(t.args.length!==2)throw new Error(\"Programming error: double reducers must have two arguments\");let i=Br(e,t.args[0]),s=Br(e,t.args[1]);return i!==t.args[0]||s!==t.args[1]?e.copyInstructionWithArgs(t,[i,s]):e.getReturnIndex()}case\"parameterizedReducer\":{if(t.args.length!==2)throw new Error(\"Programming error: double reducers must have two arguments\");let i=Br(e,t.args[0]);return i===t.args[0]?pl(e,t,[!1,!0]):e.copyInstructionWithArgs(t,[i,t.args[1]])}default:{let i=n.tag;throw new Error(`Programming Error: unexpected tag ${i}`)}}}case 39:case 40:case 41:return pl(e,t,[!1,!0]);case 21:case 22:case 19:case 20:case 50:case 51:return e.getReturnIndex();case 38:case 47:case 23:case 24:case 48:case 44:case 49:return e.getReturnIndex();default:let r=t;throw new Error(`Unexpected opcode ${r.type}`)}}function SF(e,t){for(let r of t)if(W(e.getInstruction(r).valueType))return!0;return!1}function pl(e,t,r){let n=t.args,i=!1,s=[];for(let d=0;d<n.length;d++){if(r&&!r[d])continue;let g=n[d],m=e.getInstruction(g).valueType;W(m)&&s.indexOf(g)===-1&&s.push(g),m===Be&&(i=!0)}if(s.length===0)return e.getReturnIndex();if(t.type===33&&s.indexOf(t.args[0])==-1&&s.indexOf(t.args[1])>=0&&s.indexOf(t.args[2])>=0){let d=Br(e,t.args[1]),g=Br(e,t.args[2]);return d!==t.args[1]||g!==t.args[2]?gr(e,t,[t.args[0],d,g]):e.getReturnIndex()}e.popInstruction();let o=Pp(e,s);if(o===void 0)throw new Error(\"Programming Error: expected minListLength to be defined for \"+s.length+\" lists\");let a=o;if(vt(e.getInstruction(a))&&rr(e,a)===0&&i)return e.ConstantOfType(Be,[]);let u=e.BeginBroadcast([a]),c=[];for(let d of s)c.push(ru(e,d,u));let l=[];for(let d=0;d<n.length;d++){let g=n[d];if(r&&!r[d])l.push(g);else{let m=s.indexOf(g);l.push(m===-1?g:c[m])}}let p=e.copyInstructionWithArgs(t,l),f=e.EndBroadcast([u,p]);return e.BroadcastResult(Ln(e.getInstruction(p).valueType),[f])}function ru(e,t,r){return e.getInstruction(t).type==48?e.DeferredListAccess([t,r]):e.InboundsListAccess([t,r])}function vv(e){let t=[];t.push(\"digraph {\");for(let r=0;r<e.instructionsLength();r++)e.getInstruction(r).type!==0&&t.push(`${r} [label=\"${r}: ${Wu(e,r)}\"];`);for(let r=0;r<e.instructionsLength();r++){let n=e.getInstruction(r);if(QE(n))for(let i of n.args)t.push(`${r} -> ${i};`)}return t.push(\"}\"),t.join(`\n`)}function nu(e,t){let r=[];for(let n=0;n<e.instructionsLength();n++)r.push(!1);r[t]=!0;for(let n=0;n<=1;n++){let i=!1;for(let s=t+1;s<e.instructionsLength();s++){let o=e.getInstruction(s);if(Me(o)||r[s])continue;let a=!1;for(let u of o.args)if(r[u]){a=!0;break}r[s]=a,a&&pn(o)&&!r[o.args[0]]&&(r[o.args[0]]=!0,i=!0)}if(!i)break}return r}function Ov(e,t,r){let n=e.argNames.indexOf(t);if(n===-1)return 0;let i=Ni(e,n,r);return Mr(i,e.getReturnIndex())}function Ni(e,t,{allowRestriction:r,allowClosedBlockReferences:n}){return{chunk:e,argIndex:t,orderTable:[],mask:nu(e,t),allowRestriction:r,allowClosedBlockReferences:n}}function Mr(e,t){let r=e.orderTable[t];if(r!==void 0)return r;let n=RF(e,t);return e.orderTable[t]=n,n}function RF(e,t){let{chunk:r,mask:n,argIndex:i,allowRestriction:s,allowClosedBlockReferences:o}=e;if(!o&&r.isInClosedBlock(t))return 1/0;if(t===i)return 1;let a=r.getInstruction(t);if(pi(a)||pn(a))return 1/0;switch(a.type){case 8:case 9:case 26:case 28:case 27:case 29:{let[c,l]=a.args;return Math.max(Mr(e,c),Mr(e,l))}case 10:{let[c,l]=a.args;return Mr(e,c)+Mr(e,l)}case 14:return Mr(e,a.args[0]);case 11:{let[c,l]=a.args;return Mr(e,l)>0?1/0:Mr(e,c)}case 12:case 13:{let[c,l]=a.args,p=r.getInstruction(l);if(Mr(e,c)===0&&Mr(e,l)===0)return 0;if(p.type===1){let f=k(p.value);return f===Math.round(f)&&f>0?Mr(e,c)*f:1/0}else return 1/0}case 33:{if(!n[t])return 0;let c=r.getInstruction(a.args[2]);return s&&c.type===1&&isNaN(k(c.value))?Mr(e,a.args[1]):1/0}case 2:case 0:case 1:case 25:case 32:case 31:case 15:case 17:case 16:case 18:case 38:case 39:case 40:case 41:case 37:case 42:case 48:case 47:case 3:case 44:case 49:return n[t]?1/0:0;default:let u=a;throw new Error(`Unexpected opcode ${u.type}`)}}function Sv(e,t){let r=e.argNames.indexOf(t),n=Ss(Ni(e,r,{allowRestriction:!0,allowClosedBlockReferences:!1}));if(Mr(n.orderCtx,e.getReturnIndex())>2)throw new Error(\"Programming Error: cannot compute polynomial coefficients for polynomials of order greater than 2\");let i=_r(n,e.getReturnIndex()),s=!1;for(let o=0;o<e.instructionsLength();o++)e.getInstruction(o).type===33&&n.mask[o]&&(s=!0);return{chunk:n.newChunk,coefficients:i,mappedArgIndex:n.valueMap[r],mappedReturnIndex:n.valueMap[e.getReturnIndex()],isRestrictedPolynomial:s}}function Ss(e){let{chunk:t,argIndex:r}=e;if(t.isInClosedBlock(r))throw new Error(\"Programming Error: cannot find polynomial coefficients of an instruction in a closed block\");let n,i;r>=0&&r<t.argNames.length?(n=t.argNames.slice(),i=t.argTypes.slice(),n.splice(r,1),i.splice(r,1)):(n=t.argNames,i=t.argTypes);let s=new Wo({argNames:n,argTypes:i}),o=[];for(let p=0;p<t.instructionsLength();p++){let f=t.getInstruction(p);if(f.type===2)p<r||r<0?o.push(p):p===r?o.push(s.SymbolicVar(t.argTypes[p])):o.push(p-1);else if(Me(f))o.push(Os(s,f));else{let d=[];for(let g of f.args)d.push(o[g]);o.push(gr(s,f,d))}}let a=[],u=s.Constant(0),c=s.Constant(1),l=s.Constant(NaN);return{chunk:t,newChunk:s,orderCtx:e,coefficientTable:a,mask:e.mask,valueMap:o,argIndex:r,zero:u,one:c,nan:l}}function _r(e,t){let{newChunk:r,orderCtx:n,coefficientTable:i,mask:s,valueMap:o,argIndex:a,zero:u,one:c,nan:l}=e,p=i[t];if(p!==void 0)return p;let f;for(s[t]?t===a?f=[u,c]:Mr(n,t)>2?f=[l]:f=NF(e,t):f=[o[t]];f.length>1;){let d=r.getInstruction(f[f.length-1]);if(d.type===1&&k(d.value)===0)f.pop();else break}if(f.length===0)throw new Error(\"Programming Error: coefficients cannot be empty\");return i[t]=f,f}function NF(e,t){let r=e.chunk.getInstruction(t),{newChunk:n}=e;switch(r.type){case 8:{let[s,o]=r.args,a=_r(e,s),u=_r(e,o),c=a.length-1,l=u.length-1,p=[];for(let f=0;f<=Math.max(c,l);f++)c>=f&&l>=f?p.push(n.Add([a[f],u[f]])):p.push(c>l?a[f]:u[f]);return p}case 9:case 26:case 28:case 27:case 29:{let[s,o]=r.args;(r.type===26||r.type==28)&&([s,o]=[o,s]);let a=_r(e,s),u=_r(e,o),c=a.length-1,l=u.length-1,p=[];for(let f=0;f<=Math.max(c,l);f++)c>=f&&l>=f?p.push(n.Subtract([a[f],u[f]])):p.push(c>l?a[f]:n.Negative([u[f]]));return p}case 14:{let s=r.args[0],o=_r(e,s),a=[];for(let u=0;u<o.length;u++)a.push(n.Negative([o[u]]));return a}case 10:{let[s,o]=r.args,a=_r(e,s),u=_r(e,o),c=a.length-1,l=u.length-1,p=[];for(let f=0;f<=c;f++)for(let d=0;d<=l;d++){if(f+d>2)continue;let g=n.Multiply([a[f],u[d]]),m=p[f+d];m===void 0?p[f+d]=g:p[f+d]=n.Add([m,g])}return p}case 11:{let[s,o]=r.args,a=_r(e,s),u=_r(e,o),c=[];for(let l=0;l<a.length;l++)c.push(n.Divide([a[l],u[0]]));return c}case 12:case 13:{let[s,o]=r.args,a=_r(e,s),u=_r(e,o);if(a.length-1===0)return[n.RawExponent([a[0],u[0]])];let l=n.getInstruction(u[0]);switch(k(l.value)){case 0:return[n.Constant(0)];case 1:return a;case 2:return[n.Multiply([a[0],a[0]]),n.Multiply([n.Constant(2),n.Multiply([a[0],a[1]])]),n.Multiply([a[1],a[1]])]}}case 33:return _r(e,r.args[1]);case 0:case 23:case 2:case 1:case 25:case 32:case 31:case 15:case 17:case 16:case 18:case 38:case 39:case 40:case 41:case 37:case 42:case 21:case 22:case 19:case 20:case 24:case 48:case 47:case 3:case 44:case 49:case 50:case 51:throw new Error(`Cannot find polynomial coefficients of opcode ${r.type} that depends on symbol.`);default:let i=r;throw new Error(`Unexpected opcode ${i.type}`)}}function Rv(e){if(e.instructionsLength()-1!==e.getReturnIndex())throw new Error(\"Programming Error: only the final instruction in a chunk can be converted to broadcast\");let t=e.getInstruction(e.getReturnIndex());if(Me(t))return e.getReturnIndex();switch(t.type){case 8:if(iu(e,t.args[0])&&iu(e,t.args[1])){let n=e.Constant(1),i=e.Constant(2);return e.OrderedPair([e.Add([e.OrderedPairAccess([t.args[0],n]),e.OrderedPairAccess([t.args[1],n])]),e.Add([e.OrderedPairAccess([t.args[0],i]),e.OrderedPairAccess([t.args[1],i])])])}else if(su(e,t.args[0])&&su(e,t.args[1])){let n=e.Constant(1),i=e.Constant(2),s=e.Constant(3);return e.OrderedTriple([e.Add([e.OrderedTripleAccess([t.args[0],n]),e.OrderedTripleAccess([t.args[1],n])]),e.Add([e.OrderedTripleAccess([t.args[0],i]),e.OrderedTripleAccess([t.args[1],i])]),e.Add([e.OrderedTripleAccess([t.args[0],s]),e.OrderedTripleAccess([t.args[1],s])])])}else return Oa(e,t.args)?ou(e,[e.Add([Qn(e,t.args[0]),Qn(e,t.args[1])]),uo(e,t.args[0])]):e.getReturnIndex();case 9:if(iu(e,t.args[0])&&iu(e,t.args[1])){let n=e.Constant(1),i=e.Constant(2);return e.OrderedPair([e.Subtract([e.OrderedPairAccess([t.args[0],n]),e.OrderedPairAccess([t.args[1],n])]),e.Subtract([e.OrderedPairAccess([t.args[0],i]),e.OrderedPairAccess([t.args[1],i])])])}else if(su(e,t.args[0])&&su(e,t.args[1])){let n=e.Constant(1),i=e.Constant(2),s=e.Constant(3);return e.OrderedTriple([e.Subtract([e.OrderedTripleAccess([t.args[0],n]),e.OrderedTripleAccess([t.args[1],n])]),e.Subtract([e.OrderedTripleAccess([t.args[0],i]),e.OrderedTripleAccess([t.args[1],i])]),e.Subtract([e.OrderedTripleAccess([t.args[0],s]),e.OrderedTripleAccess([t.args[1],s])])])}else return Oa(e,t.args)?ou(e,[e.Subtract([Qn(e,t.args[0]),Qn(e,t.args[1])]),uo(e,t.args[0])]):e.getReturnIndex();case 14:if(iu(e,t.args[0])){let n=e.Constant(1),i=e.Constant(2);return e.OrderedPair([e.Negative([e.OrderedPairAccess([t.args[0],n])]),e.Negative([e.OrderedPairAccess([t.args[0],i])])])}else if(su(e,t.args[0])){let n=e.Constant(1),i=e.Constant(2),s=e.Constant(3);return e.OrderedTriple([e.Negative([e.OrderedTripleAccess([t.args[0],n])]),e.Negative([e.OrderedTripleAccess([t.args[0],i])]),e.Negative([e.OrderedTripleAccess([t.args[0],s])])])}else return Oa(e,t.args)?ou(e,[e.Negative([Qn(e,t.args[0])]),uo(e,t.args[0])]):e.getReturnIndex();case 10:if(Up(e,t.args[0])&&Up(e,t.args[1]))return e.SyntheticNativeFunction(\"restriction\",[e.And([e.SyntheticNativeFunction(\"restrictionToBoolean\",[t.args[0]]),e.SyntheticNativeFunction(\"restrictionToBoolean\",[t.args[1]])])]);if(Up(e,t.args[0])||Up(e,t.args[1])){let n,i;Up(e,t.args[0])?(n=t.args[0],i=t.args[1]):(n=t.args[1],i=t.args[0]);let s=e.getInstruction(i).valueType;return Wc(s)?e.Piecewise([e.SyntheticNativeFunction(\"restrictionToBoolean\",[n]),i,e.NanOfType(s)]):e.getReturnIndex()}else if(iu(e,t.args[0])&&va(e,t.args[1])){let n=e.Constant(1),i=e.Constant(2);return e.OrderedPair([e.Multiply([e.OrderedPairAccess([t.args[0],n]),t.args[1]]),e.Multiply([e.OrderedPairAccess([t.args[0],i]),t.args[1]])])}else if(va(e,t.args[0])&&iu(e,t.args[1])){let n=e.Constant(1),i=e.Constant(2);return e.OrderedPair([e.Multiply([t.args[0],e.OrderedPairAccess([t.args[1],n])]),e.Multiply([t.args[0],e.OrderedPairAccess([t.args[1],i])])])}else{if(Oa(e,[t.args[0]])&&va(e,t.args[1]))return ou(e,[e.Multiply([Qn(e,t.args[0]),t.args[1]]),uo(e,t.args[0])]);if(va(e,t.args[0])&&Oa(e,[t.args[1]]))return ou(e,[e.Multiply([t.args[0],Qn(e,t.args[1])]),uo(e,t.args[1])]);if(su(e,t.args[0])&&va(e,t.args[1])){let n=e.Constant(1),i=e.Constant(2),s=e.Constant(3);return e.OrderedTriple([e.Multiply([e.OrderedTripleAccess([t.args[0],n]),t.args[1]]),e.Multiply([e.OrderedTripleAccess([t.args[0],i]),t.args[1]]),e.Multiply([e.OrderedTripleAccess([t.args[0],s]),t.args[1]])])}else if(va(e,t.args[0])&&su(e,t.args[1])){let n=e.Constant(1),i=e.Constant(2),s=e.Constant(3);return e.OrderedTriple([e.Multiply([t.args[0],e.OrderedTripleAccess([t.args[1],n])]),e.Multiply([t.args[0],e.OrderedTripleAccess([t.args[1],i])]),e.Multiply([t.args[0],e.OrderedTripleAccess([t.args[1],s])])])}else return e.getReturnIndex()}case 11:if(iu(e,t.args[0])&&va(e,t.args[1])){let n=e.Constant(1),i=e.Constant(2);return e.OrderedPair([e.Divide([e.OrderedPairAccess([t.args[0],n]),t.args[1]]),e.Divide([e.OrderedPairAccess([t.args[0],i]),t.args[1]])])}else{if(Oa(e,[t.args[0]])&&va(e,t.args[1]))return ou(e,[e.Divide([Qn(e,t.args[0]),t.args[1]]),uo(e,t.args[0])]);if(su(e,t.args[0])&&va(e,t.args[1])){let n=e.Constant(1),i=e.Constant(2),s=e.Constant(3);return e.OrderedTriple([e.Divide([e.OrderedTripleAccess([t.args[0],n]),t.args[1]]),e.Divide([e.OrderedTripleAccess([t.args[0],i]),t.args[1]]),e.Divide([e.OrderedTripleAccess([t.args[0],s]),t.args[1]])])}else return e.getReturnIndex()}case 12:case 13:case 25:case 26:case 27:case 28:case 29:case 32:case 31:case 15:case 16:case 33:case 17:case 18:case 37:case 42:case 39:case 40:case 41:case 21:case 22:case 19:case 20:case 38:case 47:case 23:case 24:case 48:case 44:case 49:case 50:case 51:return e.getReturnIndex();default:let r=t;throw new Error(`Unexpected opcode ${r.type}`)}}function iu(e,t){return e.getInstruction(t).valueType===N}function su(e,t){return e.getInstruction(t).valueType===H}function va(e,t){return e.getInstruction(t).valueType===I}function Up(e,t){return e.getInstruction(t).valueType===Ot}function Oa(e,t){return t.every(r=>ke(e,r,he))||t.every(r=>ke(e,r,ve))}function ou(e,t){return ac(e,t,\"mathVector\",qp(\"mathVector\",\"mathVectorThreeD\"))}function uo(e,t){return ac(e,[t],\"start\",[{match:[he],build:()=>e.SyntheticNativeFunction(\"basePointFromVector\",[t])},{match:[ve],build:()=>e.SyntheticNativeFunction(\"basePointFromVectorThreeD\",[t])}])}function Qn(e,t){return ac(e,[t],\"displacement\",[{match:[he],build:()=>e.SyntheticNativeFunction(\"vectorDisplacementAsPoint\",[t])},{match:[ve],build:()=>e.SyntheticNativeFunction(\"vectorThreeDDisplacementAsPoint\",[t])}])}function qp(e,t){return[{match:[N,N],build:(r,n)=>r.SyntheticNativeFunction(e,n)},{match:[H,H],build:(r,n)=>r.SyntheticNativeFunction(t,n)}]}var AF=[\"Sum\",\"Product\",\"Integral\",\"List\",\"Derivative\",\"Piecewise\",\"Exponent\",\"PercentOf\",\"FunctionDefinition\",\"UpdateRule\",\"Substitution\",\"ListComprehension\"],CF={isGeometryEnabled(){return!1},is3dProduct(){return!1},is3dPolicy(){return!1},isBeta3d(){return!1},areAllScalesLinear(){return!0},assignmentForbidden(e){return!0},substitutionForbidden(e){return!0},graphingEnabled(){return!1},isValidSlider(e){return!1},sliderVariables(e){return[]},ansEnabled(){return!1},disabledFeatures(){return AF},dimensionVarsEnabled(){return!1}},Nv=Q(q({},CF),{isGeometryEnabled(){return!0},is3dProduct(){return!0},is3dPolicy(){return!0},isBeta3d(){return!0}});function Av(e){return 48<=e&&e<=57}function _F(e){return 97<=e&&e<=122}function LF(e){return 65<=e&&e<=90}function Ty(e){return _F(e)||LF(e)}function Iy(e){return e===92}function MT(e){return e===39}function Cv(e){if(9<=e&&e<=13||8192<=e&&e<=8202)return!0;switch(e){case 32:case 160:case 5760:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}function uu(e,t){return An(e.token.span,t.prevSpan)}function au(e,t,r){return{type:e,span:t,val:r}}function wF(e,t,r,n){return{input:e,prevSpan:t,pos:r,token:n}}function _v(e){return Lv(e,0,xs(e,0))}function Lv(e,t,r){for(;Cv(e.charCodeAt(t));)t+=1;let n=GF(e,t);return wF(e,r,t,n)}function co(e){return Lv(e.input,e.token.span.end,e.token.span)}function Ai(e){return e.token}function Jo(e,t){if(Ai(e).type!==t)throw`Parse Error: expected ${t}.`;return co(e)}function wv(e,t){return Ai(e).type===t}function Ey(e){return e.pos>=e.input.length}var FF={\"\\\\left\":\"Left\",\"\\\\right\":\"Right\",\"\\\\sqrt\":\"Sqrt\",\"\\\\frac\":\"Frac\",\"\\\\operatorname\":\"OperatorName\",\"\\\\token\":\"Token\"},VF={\"[\":\"[\",\"]\":\"]\",\"{\":\"{\",\"}\":\"}\",\"^\":\"^\",_:\"_\"};function GF(e,t){let r=t;if(t>=e.length)return au(\"End\",xs(e,t),\"\");let n=e.charCodeAt(t);if(Av(n)){let i=ai(e,r,t+1);return au(\"Digit\",i,e.charAt(r))}else if(Ty(n)){let i=ai(e,r,t+1);return au(\"Letter\",i,e.charAt(r))}else if(Iy(n))if(t+=1,Ty(e.charCodeAt(t))){for(;Ty(e.charCodeAt(t));)t+=1;let i=ai(e,r,t),s=xr(i),o=FF[s]||\"Cmd\";return au(o,i,s)}else{t+=1;let i=ai(e,r,t),s=xr(i);return au(\"EscapedSymbol\",i,s)}else if(MT(n)){for(t+=1;MT(e.charCodeAt(t));)t+=1;if(e.charAt(t)===\"^\"){t+=1;let i=ai(e,r,t),s=xr(i);return au(\"Primes^\",i,s)}else{let i=ai(e,r,t),s=xr(i);return au(\"Primes\",i,s)}}else{let i=ai(e,r,t+1),s=e.charAt(r),o=VF[s]||\"Symbol\";return au(o,i,s)}}function DT(e,t){return{type:\"Group\",span:e,args:t}}function Fv(e,t,r){return{type:\"Sqrt\",span:e,optArg:t,arg:r}}function Vv(e,t,r){return{type:\"Frac\",span:e,num:t,den:r}}function Gv(e,t,r,n){return{type:\"SupSub\",span:e,sup:t,sub:r,nprimes:n}}function Bv(e,t,r,n){return{type:\"LeftRight\",span:e,left:t,right:r,arg:n}}function zv(e,t){return{type:\"OperatorName\",span:e,arg:t}}function Hv(e,t){return{type:\"TokenNode\",span:e,arg:t}}function Uv(e,t){return{type:\"Symbol\",span:e,val:t}}function qv(e){switch(e){case\"Frac\":return 2;case\"^\":case\"_\":case\"Primes^\":case\"Left\":case\"Sqrt\":case\"OperatorName\":case\"Token\":return 1;default:return 0}}function kv(e){let{state:t,tree:r}=My(_v(e),!1);if(!Ey(t))throw`Parse error: unexpected ${xr(Ai(t).span)}.`;return r}function Rs(e,t){return{state:e,tree:t}}function My(e,t){let r=e,n=[];e:for(;!Ey(e);){let s=Ai(e);switch(s.type){case\"Cmd\":case\"EscapedSymbol\":case\"Letter\":case\"Digit\":case\"Symbol\":case\"[\":case\"{\":case\"^\":case\"_\":case\"Primes\":case\"Primes^\":case\"Left\":case\"Frac\":case\"Sqrt\":case\"OperatorName\":case\"Token\":case\"]\":{if(s.type===\"]\"&&t)break e;let a;if({state:e,tree:a}=Yv(e),a.type===\"Group\")for(let u of a.args)n.push(u);else n.push(a);break}case\"}\":case\"Right\":case\"End\":break e;default:throw`Unexpected token type ${s.type}.`}}let i=uu(r,e);return Rs(e,DT(i,n))}function Yv(e){let t=Ai(e);switch(t.type){case\"Cmd\":case\"EscapedSymbol\":case\"Letter\":case\"Digit\":case\"Symbol\":return e=co(e),Rs(e,t);case\"[\":case\"]\":return e=co(e),Rs(e,Uv(t.span,t.val));case\"{\":{e=co(e);let n;return{state:e,tree:n}=My(e,!1),e=Jo(e,\"}\"),Rs(e,n)}case\"^\":case\"_\":case\"Primes\":case\"Primes^\":return YF(e);case\"Left\":return kF(e);case\"Frac\":return qF(e);case\"Sqrt\":return UF(e);case\"OperatorName\":return zF(e);case\"Token\":return HF(e);case\"}\":case\"Right\":throw`Parse Error: unexpected ${t.val}.`;case\"End\":throw\"Parse Error: unexpected end.\";default:throw`Unexpected token type ${t.type}.`}}function zF(e){let t=e,r=Ai(e);e=Jo(e,\"OperatorName\");let n;({state:e,tree:n}=cu(e,r));let i=uu(t,e);return Rs(e,zv(i,n))}function HF(e){let t=e,r=Ai(e);e=Jo(e,\"Token\");let n;({state:e,tree:n}=cu(e,r));let i=uu(t,e);return Rs(e,Hv(i,n))}function UF(e){let t=e,r=Ai(e);e=Jo(e,\"Sqrt\");let n;wv(e,\"[\")&&({state:e,tree:n}=XF(e));let i;({state:e,tree:i}=cu(e,r));let s=uu(t,e);return Rs(e,Fv(s,n,i))}function qF(e){let t=e,r=Ai(e);e=Jo(e,\"Frac\");let n;({state:e,tree:n}=cu(e,r));let i;({state:e,tree:i}=cu(e,r));let s=uu(t,e);return Rs(e,Vv(s,n,i))}function kF(e){let t=e;e=Jo(e,\"Left\");let r=Ai(e);e=co(e);let n;({state:e,tree:n}=My(e,!1)),e=Jo(e,\"Right\");let i=Ai(e);e=co(e);let s=uu(t,e);return Rs(e,Bv(s,r,i,n))}function YF(e){let t=e,r,n,i=0;e:for(;!Ey(e);){let o=Ai(e);switch(o.type){case\"^\":if(e=co(e),r)throw\"Parse Error: double superscript.\";({state:e,tree:r}=cu(e,o));break;case\"_\":if(e=co(e),n)throw\"Parse Error: double subscript.\";({state:e,tree:n}=cu(e,o));break;case\"Primes\":if(e=co(e),i>0)throw\"Parse Error: double primes.\";i=o.val.length;break;case\"Primes^\":if(e=co(e),i>0)throw\"Parse Error: double primes.\";if(r)throw\"Parse Error: double superscript\";i=o.val.length-1,{state:e,tree:r}=cu(e,o);break;default:break e}}let s=uu(t,e);return Rs(e,Gv(s,r,n,i))}function cu(e,t){let r=qv(t.type),n;if(r<=0)throw new Error(\"Programming Error: greediness must be greater than 0.\");let i=qv(Ai(e).type);if(i>0&&i<=r){let s=xr(t.span);throw`Parse Error: can't use ${xr(Ai(e).span)} as argument of ${s}. Use {}.`}return{state:e,tree:n}=Yv(e),n.type!==\"Group\"&&(n=DT(n.span,[n])),Rs(e,n)}function XF(e){e=Jo(e,\"[\");let t;return{state:e,tree:t}=My(e,!0),e=Jo(e,\"]\"),Rs(e,t)}var ZF={mcd:\"gcd\",gcf:\"gcd\",mcm:\"lcm\",signum:\"sign\",sgn:\"sign\",stdDevP:\"stdevp\",stddevp:\"stdevp\",stdDev:\"stdev\",stddev:\"stdev\",variance:\"var\",TTest:\"ttest\",TScore:\"tscore\",IndependentTTest:\"ittest\",iTTest:\"ittest\",inverseCdf:\"quantile\",inversecdf:\"quantile\",arsinh:\"arcsinh\",arcosh:\"arccosh\",artanh:\"arctanh\",arcsch:\"arccsch\",arsech:\"arcsech\",arcoth:\"arccoth\"};function Xv(e){let t=0;for(;Iy(e.charCodeAt(t));)t+=1;return t>0&&(e=e.slice(t)),ZF[e]||e}function Zv(e,t){return{type:\"Equals\",span:e,args:t}}function kp(e,t,r){return{type:\"Inequality\",span:e,symbol:t,args:r}}function $v(e,t,r){return{type:\"TrailingInequalityPiece\",span:e,symbol:t,args:r}}function Wv(e,t,r){return{type:\"InequalityChain\",span:e,first:t,chain:r}}function Jv(e,t){return{type:\"Tilde\",span:e,args:t}}function jv(e,t){return{type:\"Pos\",span:e,args:t}}function Qv(e,t){return{type:\"Neg\",span:e,args:t}}function Kv(e,t){return{type:\"Add\",span:e,args:t}}function e1(e,t){return{type:\"Sub\",span:e,args:t}}function t1(e,t){return{type:\"Mul\",span:e,args:t}}function r1(e,t){return{type:\"DotMul\",span:e,args:t}}function n1(e,t){return{type:\"CrossMul\",span:e,args:t}}function i1(e,t){return{type:\"Div\",span:e,args:t}}function s1(e,t){return{type:\"Bang\",span:e,args:t}}function Yp(e,t){return{type:\"Call\",span:e,args:t}}function vT(e,t){return{type:\"ImplicitCall\",span:e,args:t}}function o1(e,t){return{type:\"Index\",span:e,args:t}}function OT(e,t){return{type:\"Paren\",span:e,args:t}}function ST(e,t){return{type:\"List\",span:e,args:t}}function a1(e,t){return{type:\"Pipes\",span:e,args:t}}function RT(e,t){return{type:\"Subscript\",span:e,args:t}}function Dy(e,t){return{type:\"Superscript\",span:e,args:t}}function Xp(e,t,r){return{type:\"Prime\",span:e,nprimes:t,args:r}}function vy(e,t){return{type:\"Seq\",span:e,args:t}}function u1(e,t){return{type:\"Sqrt\",span:e,args:t}}function c1(e,t){return{type:\"Nthroot\",span:e,args:t}}function l1(e,t){return{type:\"Frac\",span:e,args:t}}function p1(e,t){return{type:\"Derivative\",span:e,args:t}}function f1(e,t){return{type:\"Integral\",span:e,args:t}}function d1(e,t){return{type:\"EmptyIntegral\",span:e,args:t}}function m1(e,t){return{type:\"Sum\",span:e,args:t}}function y1(e,t){return{type:\"Product\",span:e,args:t}}function g1(e,t){return{type:\"Piecewise\",span:e,args:t}}function h1(e){return{type:\"EmptyPiecewise\",span:e}}function b1(e){return{type:\"EmptyRangeEnd\",span:e}}function x1(e,t){return{type:\"Colon\",span:e,args:t}}function NT(e,t){return{type:\"Ellipsis\",span:e,args:t}}function P1(e,t){return{type:\"For\",span:e,args:t}}function T1(e,t){return{type:\"With\",span:e,args:t}}function I1(e,t){return{type:\"Dot\",span:e,args:t}}function E1(e,t){return{type:\"PercentOf\",span:e,args:t}}function M1(e,t){return{type:\"RightArrow\",span:e,args:t}}function AT(e,t){return{type:\"Juxt\",span:e,args:t}}function D1(e,t){return{type:\"Letter\",span:e,val:t}}function Oy(e,t){return{type:\"Decimal\",span:e,val:t}}function uc(e,t){return{type:\"Cmd\",span:e,val:Xv(t)}}function v1(e,t){return{type:\"Alphanumeric\",span:e,val:t}}function O1(e,t,r,n){return{type:\"MixedNumber\",span:e,whole:t,num:r,den:n}}function tn(e){if(e.type===\"Subscript\"){if(e.args[1].type!==\"Alphanumeric\")return!1;e=e.args[0]}switch(e.type){case\"Cmd\":return!0;case\"Letter\":return!0;default:return!1}}function S1(e){return e.type!==\"Superscript\"?!1:tn(e.args[0])}function R1(e,t){if(e.type!==\"Letter\"||e.val!==\"d\"||t.type!==\"Juxt\")return!1;let[r,n]=t.args;return r.type!==\"Letter\"||r.val!==\"d\"?!1:tn(n)}function mn(e){return e.type===\"Seq\"?e.args:[e]}function Ie(e,t){return{type:\"Err\",span:e,error:t}}function CT(){return{type:\"UnexpectedParseError\"}}function N1(){return{type:\"EmptyInput\"}}function A1(){return{type:\"EmptyGroup\"}}function _T(){return{type:\"EmptySubscript\"}}function C1(){return{type:\"EmptySuperscript\"}}function LT(){return{type:\"EmptyRadical\"}}function _1(){return{type:\"EmptySquareBracket\"}}function L1(){return{type:\"EmptyPipe\"}}function w1(){return{type:\"EmptyRadicalIndex\"}}function wT(){return{type:\"UnexpectedEnd\"}}function lu(e){return{type:\"BinaryOperatorMissingRight\",val:e}}function F1(e){return{type:\"BinaryOperatorMissingLeft\",val:e}}function FT(e){return{type:\"UnaryOperatorMissingRight\",val:e}}function VT(e){return{type:\"UnaryOperatorMissingLeft\",val:e}}function V1(e,t){return{type:\"MissingCloseDelimiter\",open:e,close:t}}function Zp(e,t){return{type:\"UnexpectedCloseDelimiter\",open:e,close:t}}function G1(){return{type:\"UnexpectedDifferential\"}}function B1(e){return{type:\"UnrecognizedSymbol\",val:e}}function z1(e){return{type:\"InvalidSubscript\",val:e}}function H1(e){return{type:\"UnexpectedSubscript\",base:e}}function GT(e){return{type:\"FunctionMissingArgument\",val:e}}function U1(){return{type:\"PercentMissingOf\"}}function BT(){return{type:\"PrimeWithoutParen\"}}function q1(){return{type:\"SuperscriptWithPrime\"}}function Sy(){return{type:\"UnexpectedPrime\"}}function k1(){return{type:\"SumMissingBound\"}}function Y1(){return{type:\"ProductMissingBound\"}}function zT(){return{type:\"MissingBound\"}}function X1(){return{type:\"IntegralMissingBound\"}}function Z1(){return{type:\"SumMissingBody\"}}function $1(){return{type:\"ProductMissingBody\"}}function W1(){return{type:\"IntegralMissingBody\"}}function J1(){return{type:\"DerivativeMissingBody\"}}function j1(){return{type:\"IntegralMissingDifferential\"}}function Q1(){return{type:\"DifferentialWithSuperscript\"}}function K1(){return{type:\"FractionMissingNumerator\"}}function eO(){return{type:\"FractionMissingDenominator\"}}function tO(){return{type:\"FractionEmpty\"}}function HT(e){return{type:\"AdjacentNumbers\",args:e}}function rO(){return{type:\"UnexpectedFor\"}}function nO(){return{type:\"TokenWithSubscript\"}}var JF={\"+\":!0,\"-\":!0,\"*\":!0,\"\\\\cdot\":!0,\"\\\\times\":!0,\"/\":!0,\"!\":!0,\"(\":!0,\")\":!0,\"\\\\{\":!0,\"\\\\}\":!0,\"(|\":!0,\"|)\":!0,\"[\":!0,\"]\":!0,\",\":!0,\"...\":!0,\":\":!0,\"=\":!0,\">\":!0,\"<\":!0,\">=\":!0,\"<=\":!0,\"->\":!0,\"~\":!0,\"%\":!0,\".\":!0,for:!0,with:!0,Letter:!0,Decimal:!0,Cmd:!0,TokenNode:!0,Differential:!0,End:!0,Trig:!0,Ln:!0,Log:!0,Int:!0,Sum:!0,Prod:!0,Err:!0},pu={\"\\\\lt\":\"<\",\"\\\\gt\":\">\",\"\\\\le\":\"<=\",\"\\\\ge\":\">=\",\"\\\\leq\":\"<=\",\"\\\\geq\":\">=\",\"\\\\ldots\":\"...\",\"\\\\sim\":\"~\",\"\\\\to\":\"->\",\"\\\\cdot\":\"\\\\cdot\",\"\\\\times\":\"\\\\times\",\"\\\\div\":\"/\",\"\\\\ln\":\"Ln\",\"\\\\log\":\"Log\",\"\\\\int\":\"Int\",\"\\\\sum\":\"Sum\",\"\\\\prod\":\"Prod\",\"\\\\backslash\":\"Err\",\"\\\\for\":\"for\",\"\\\\with\":\"with\"},jF=[\"sin\",\"cos\",\"tan\",\"cot\",\"sec\",\"csc\"];for(let e of jF)pu[\"\\\\\"+e]=\"Trig\",pu[\"\\\\\"+e+\"h\"]=\"Trig\",pu[\"\\\\arc\"+e]=\"Trig\",pu[\"\\\\arc\"+e+\"h\"]=\"Trig\",pu[\"\\\\ar\"+e+\"h\"]=\"Trig\";var UT={\"+\":\"+\",\"-\":\"-\",\"*\":\"*\",\"/\":\"/\",\"!\":\"!\",\"(\":\"(\",\")\":\")\",\"[\":\"[\",\"]\":\"]\",\",\":\",\",\"...\":\"...\",\":\":\":\",\"=\":\"=\",\">=\":\">=\",\"<=\":\"<=\",\">\":\">\",\"<\":\"<\",\"~\":\"~\",\".\":\".\"},iO={\"\\\\{\":\"\\\\{\",\"\\\\}\":\"\\\\}\",\"\\\\%\":\"%\"},sO={\"|\":\"(|\",\"\\\\{\":\"\\\\{\",\"[\":\"[\",\"(\":\"(\"},oO={\"|\":\"|)\",\"\\\\}\":\"\\\\}\",\"]\":\"]\",\")\":\")\"},aO=Object.keys(JF);function uO(e,t,r,n,i,s,o,a){return{opts:e,input:t,prevSpan:r,startIndex:n,endIndex:i,token:s,mode:o,parent:a}}function pe(e,t){return An(e.token.span,t.prevSpan)}function Or(e,t){return An(e,t.prevSpan)}function kT(e){return xs(e.token.span.input,e.token.span.start)}function QF(e,t){return{type:\"Differential\",span:e,val:t}}function Kn(e,t,r){return{type:e,span:t,val:r}}function Sa(e,t){let r=xs(e.span.input,e.span.start);return YT(t,e,0,r,void 0,void 0)}function YT(e,t,r,n,i,s){let o=t.args;if(r>o.length&&s)return cO(s,n);r=$p(o,r);let{token:a,endIndex:u}=lO(t,r,i);if(a.type===\"End\"&&s){let c=s.input.args[s.startIndex];if(c.type===\"LeftRight\"){let l=c.right,p=oO[l.val]||\"Err\",f=Kn(p,l.span,l.val);return uO(e,t,n,r,u,f,i,s)}}else a.type===\"Int\"?i=KF(i):a.type===\"Differential\"&&(i=eV(i));return uO(e,t,n,r,u,a,i,s)}function Se(e){let t=e.input.args[e.startIndex],r=e.token.span;return t&&t.type===\"LeftRight\"?YT(e.opts,t.arg,0,r,e.mode,e):cO(e,r)}function cO(e,t){let{input:r,endIndex:n,mode:i,parent:s}=e;return YT(e.opts,r,n+1,t,i,s)}function yn(e){return e.token}function KF(e){return{type:\"integral\",parent:e}}function eV(e){if(!e||e.type!==\"integral\")throw new Error(\"Programming Error: expected lexer to be in integral mode.\");return e.parent}function gn(e,t){return yn(e).type===t}function Ay(e){return e.startIndex>=e.input.args.length}function XT(e,t){return t.token.span.start>e.token.span.start}function $r(e,t){return{token:t,endIndex:e}}function lO(e,t,r){let n=e.args;if(t>=n.length){let o=xs(e.span.input,e.span.end);return $r(t,Kn(\"End\",o,\"\"))}let i=e.args[t];switch(i.type){case\"Sqrt\":case\"Frac\":case\"SupSub\":return $r(t,i);case\"Letter\":{if(!r||r.type!==\"integral\"||i.val!=\"d\")return $r(t,i);let{endIndex:l,token:p}=lO(e,t+1,r);if(p.type===\"Letter\"||p.type===\"Cmd\"){let f=QF(An(i.span,p.span),p.val);return $r(l,f)}else return $r(t,i)}case\"LeftRight\":{let l=i.left,p=sO[l.val]||\"Err\";var s=An(i.span,l.span);return $r(t,Kn(p,s,l.val))}case\"OperatorName\":let o=[];for(let l of i.arg.args){if(l.type!==\"Letter\")return $r(t,Kn(\"Err\",i.span,xr(i.arg.span)));o.push(l.val)}let a=\"\\\\\"+o.join(\"\"),u=pu[a]||\"Cmd\";return $r(t,Kn(u,i.span,a));case\"TokenNode\":{let l=\"$\";if(i.arg.args.length===0)return $r(t,Kn(\"Err\",i.span,xr(i.arg.span)));for(let p of i.arg.args){if(p.type!==\"Digit\")return $r(t,Kn(\"Err\",i.span,xr(i.arg.span)));l+=p.val}return $r(t,Kn(\"TokenNode\",i.span,l))}case\"Cmd\":{let l=pu[i.val]||\"Cmd\";return $r(t,Kn(l,i.span,i.val))}case\"EscapedSymbol\":{let l=iO[i.val]||\"Err\";return $r(t,Kn(l,i.span,i.val))}case\"Symbol\":return tV(e,t,i);case\"Digit\":return pO(e,t);default:throw`Unexpected atom ${i.type}.`}}function tV(e,t,r){switch(r.val){case\".\":return rV(e,t);case\"-\":{let i=e.args[t+1];if(i&&Ry(i,\">\")){let s=Kn(\"->\",An(r.span,i.span),\"->\");return $r(t+1,s)}break}case\"<\":{let i=e.args[t+1];if(i&&Ry(i,\"=\")){let s=Kn(\"<=\",An(r.span,i.span),\"<=\");return $r(t+1,s)}break}case\">\":{let i=e.args[t+1];if(i&&Ry(i,\"=\")){let s=Kn(\">=\",An(r.span,i.span),\">=\");return $r(t+1,s)}break}}let n=UT[r.val]||\"Err\";return $r(t,Kn(n,r.span,r.val))}function rV(e,t){let r=e.args[t];if(r.type!==\"Symbol\"||r.val!==\".\")throw new Error(\"Programming Error: expected '.'\");if(t+2<e.args.length&&Ny(e.args[t+1])&&Ny(e.args[t+2])){let s=An(r.span,e.args[t+2].span);return $r(t+2,Kn(\"...\",s,xr(s)))}let n=$p(e.args,t+1);if(n<e.args.length&&e.args[n].type===\"Digit\")return pO(e,t);let i=UT[r.val]||\"Err\";return $r(t,Kn(i,r.span,r.val))}function pO(e,t){let r=nV(e,t);if(r)return r;let n=e.args,i=e.args[t].span,s=[],o=!1,a=!1;for(;t<n.length;t++){let c=$p(n,t);if(c>=n.length)break;let l=n[c];if(l.type===\"Digit\")t=c,o=!0,s.push(l.val);else if(!a&&Ny(l)){if(c+1<n.length&&Ny(e.args[c+1]))break;t=c,a=!0,s.push(\".\")}else break}if(!o)throw new Error(\"Programming Error: decimals must have at least one digit.\");let u=An(i,e.args[t-1].span);return $r(t-1,Kn(\"Decimal\",u,s.join(\"\")))}function nV(e,t){let r=e.args,n=r[t].span,i=[];for(;t<r.length;t++){let c=$p(r,t);if(c>=r.length)break;let l=r[c];if(l.type!==\"Digit\")break;t=c,i.push(l.val)}if(t=$p(r,t),t>=r.length)return;let s=r[t];if(s.type!==\"Frac\")return;let o=[],a=[];for(let c of s.num.args)if(!qT(c)){if(c.type!==\"Digit\")return;o.push(c.val)}for(let c of s.den.args)if(!qT(c)){if(c.type!==\"Digit\")return;a.push(c.val)}let u=An(n,s.span);return $r(t,O1(u,i.join(\"\"),o.join(\"\"),a.join(\"\")))}function qT(e){switch(e.type){case\"Sqrt\":case\"Frac\":case\"SupSub\":case\"LeftRight\":case\"OperatorName\":case\"TokenNode\":case\"Symbol\":case\"Letter\":case\"Digit\":return!1;case\"Cmd\":return e.val===\"\\\\space\";case\"EscapedSymbol\":return e.val===\"\\\\ \"||e.val===\"\\\\:\"||e.val===\"\\\\,\"||e.val===\"\\\\;\";default:throw`Unexpected atom ${e.type}.`}}function $p(e,t){for(;t<e.length&&qT(e[t]);)t+=1;return t}function Ny(e){return Ry(e,\".\")}function Ry(e,t){return e.type===\"Symbol\"&&e.val===t}function fl(e){return{type:\"initial\",tokenType:e}}function Wp(e){return{type:\"l\",tokenType:e}}function Jp(e){return{type:\"r\",tokenType:e}}function _t(e){return{type:\"la\",tokenType:e}}function dl(e){return{type:\"ra\",tokenType:e}}function fO(e,t){for(let r of aO)if(t[r]===void 0)throw new Error(`Programming Error: token ${r} must be a assigned a ${e} precedence`)}function cc(e,t,r,n){if(t[r]!==void 0)throw new Error(`Programming Error: duplicate ${e} entry for token ${r}.`);t[r]=n}function dO(e){let t={},r={},n={};for(let a=0;a<e.length;a++){let u=e[a];for(let{type:c,tokenType:l}of u)switch(c){case\"initial\":cc(\"initial\",t,l,a);break;case\"l\":cc(\"left\",r,l,a);break;case\"r\":cc(\"right\",n,l,a);break;case\"la\":cc(\"left\",r,l,a),cc(\"right\",n,l,a);break;case\"ra\":cc(\"left\",r,l,a),cc(\"right\",n,l,a-1);break}}fO(\"left\",r),fO(\"right\",n);function i(a){return n[a]}function s(a){return r[a]}function o(a){let u=t[a];return u===void 0?i(a):u}return{rightPrec:i,leftPrec:s,initialPrec:o}}var ml={},iV=[\"sin\",\"cos\",\"tan\",\"cot\",\"sec\",\"csc\",\"sinh\",\"cosh\",\"tanh\",\"coth\",\"sech\",\"csch\"];iV.forEach(function(e){ml[e]=\"arc\"+e,ml[\"arc\"+e]=e});var sV=0;function hO(e,t){return oV(e,t)}function Qe(e,t){let r=[];for(let n=0;n<t.length;n++)r.push(nr(e,t[n]));return r}function oV(e,t){return e.setInput(aV(e,t),t.span)}function bO(e){if(e.type!==\"Call\")return;let[t,r]=e.args,n=mn(r);if(tn(t)&&n.every(tn))return{base:t,args:n}}function xO(e){return bO(e)!==void 0}function PO(e){return e.type===\"Paren\"&&e.args[0].type===\"Seq\"&&e.args[0].args.every(tn)}function JT(e){return tn(e)||PO(e)}function aV(e,t){let r=e.nodes;switch(t.type){case\"Equals\":{let[n,i]=t.args,s=bO(n);if(s){let{base:o,args:a}=s;return r.FunctionDefinition(nr(e,o),Qe(e,a),nr(e,i))}else if(JT(n)){let o;if(i.type===\"For\")o=e.setInput(_y(e,i,{parentIsList:!1}),i.span);else if(o=nr(e,i),PO(n))return r.CoordinateEquation(nr(e,n),o);return r.Assignment(nr(e,n),o)}return r.Equation(nr(e,n),nr(e,i))}case\"Tilde\":{let[n,i]=Qe(e,t.args);return r.Regression(n,i)}case\"Inequality\":return fu(e,t);case\"InequalityChain\":{if(t.chain.length>1)throw ip();let{first:{symbol:n,args:[i,s]},chain:[{symbol:o,args:[a]}]}=t;return tn(s)?r.DoubleInequality([nr(e,i),n,nr(e,s),o,nr(e,a)]):fu(e,t)}case\"Call\":{let[n,i]=t.args;if(n.type===\"Cmd\")switch(n.val){case\"histogram\":return r.Histogram(Qe(e,mn(i)));case\"dotplot\":return r.DotPlot(Qe(e,mn(i)));case\"boxplot\":return r.BoxPlot(Qe(e,mn(i)));case\"ttest\":return r.TTest(Qe(e,mn(i)));case\"ittest\":return r.IndependentTTest(Qe(e,mn(i)));case\"stats\":return r.Stats(Qe(e,mn(i)));default:return jp(e,t)}return jp(e,t)}case\"For\":return _y(e,t,{parentIsList:!1});default:return jp(e,t)}}function TO(e){if(e.type!==\"Paren\")return!1;let[t]=e.args;return t.type!==\"Seq\"?!1:t.args.length===2||t.args.length===3}function nr(e,t){return e.setInput(jp(e,t),t.span)}function jp(e,t){let r=e.nodes;switch(t.type){case\"Pos\":return nr(e,t.args[0]);case\"Neg\":let n=-1,i=t.args[0];for(;;)if(i.type===\"Pos\"||i.type===\"Paren\"&&!TO(i))i=i.args[0];else if(i.type===\"Neg\")i=i.args[0],n*=-1;else break;switch(i.type){case\"Decimal\":{let o=yO(i);return r.Constant(n===-1?Ki(o):o)}case\"MixedNumber\":{let o=gO(i);return r.MixedNumber(n===-1?Ki(o):o)}default:return n===-1?r.Negative([nr(e,i)]):nr(e,i)}case\"Add\":return r.Add(Qe(e,t.args));case\"Sub\":return r.Subtract(Qe(e,t.args));case\"Mul\":return r.Multiply(Qe(e,t.args));case\"DotMul\":return r.DotMultiply(Qe(e,t.args));case\"CrossMul\":return r.CrossMultiply(Qe(e,t.args));case\"Div\":return r.Divide(Qe(e,t.args));case\"Bang\":{let[o]=t.args;return o.type===\"Call\"&&!Cy(o.args[0])?r.FunctionFactorial(Qe(e,o.args)):r.FunctionCall(\"\\\\factorial\",Qe(e,t.args))}case\"PercentOf\":return r.PercentOf(Qe(e,t.args));case\"Call\":return mO(e,t);case\"ImplicitCall\":return dV(t),mO(e,t);case\"Dot\":{let o=t.args[1],[a,u]=Qe(e,t.args);if(Cy(o)){let c=xs(o.span.input,o.span.end),l=e.setInput(EO(e),c);u=e.setInput(r.SeededFunctionCall(u,[l]),o.span)}else if(o.type===\"Letter\")switch(o.val){case\"x\":case\"y\":case\"z\":return r.NamedCoordinateAccess(o.val,[a]);default:break}else if(o.type===\"Call\"){let c=o.args[0];if(c.type===\"Letter\")switch(c.val){case\"x\":case\"y\":case\"z\":return r.Multiply([e.setInput(r.NamedCoordinateAccess(c.val,[a]),An(t.args[0].span,c.span)),nr(e,o.args[1])])}}return r.DotAccess([a,u])}case\"Prime\":{let[o]=t.args;if(o.type===\"Call\"){let[a,u]=o.args,c=mn(u).length;if(a.type===\"Cmd\"&&a.val===\"logbase\"){if(c!==2)throw Hu()}else if(c!==1)throw Hu();return r.Prime(t.nprimes,Qe(e,t.args))}else throw o.type===\"ImplicitCall\"?Bd():Gd()}case\"Index\":{let[o,a]=t.args;if(a.type===\"Seq\")return r.ListAccess([nr(e,o),e.setInput(r.List(Qe(e,a.args)),void 0)]);if(a.type===\"Ellipsis\"){let[u,c]=a.args;return r.ListAccess([nr(e,o),e.setInput(r.Range([e.setInput(r.List(Qe(e,mn(u))),void 0),e.setInput(r.List(c.type===\"EmptyRangeEnd\"?[]:Qe(e,mn(c))),void 0)]),void 0)])}return WT(a)?r.ListAccess([nr(e,o),e.setInput(fu(e,a),void 0)]):r.ListAccess(Qe(e,t.args))}case\"Paren\":{let[o]=t.args;if(o.type===\"Seq\"){if(o.args.length===0)throw Lb();return r.ParenSeq(Qe(e,o.args))}else return nr(e,o)}case\"List\":{if(t.args.length===0)return r.List([]);let o=t.args[0];if(o.type===\"Ellipsis\"){let[a,u]=o.args;return r.Range([e.setInput(r.List(Qe(e,mn(a))),void 0),e.setInput(r.List(Qe(e,mn(u))),void 0)])}else if(o.type===\"For\")return _y(e,o,{parentIsList:!0});return r.List(Qe(e,mn(o)))}case\"Pipes\":{let[o]=t.args;return r.Norm([nr(e,o)])}case\"Subscript\":{let[o,a]=t.args;if(a.val.length===0)throw Vd();let u;switch(o.type){case\"Letter\":u=o.val;break;case\"Cmd\":u=o.val;break;default:throw Nb()}if(u===\"ans\")throw On(\"ans\");return r.Identifier(`${u}_${a.val}`)}case\"Superscript\":{let[o,a]=t.args;if(o.type===\"Call\"&&o.args[1].type!==\"Seq\"&&!Cy(o.args[0])&&!mV(o))return r.FunctionExponent(Qe(e,[o.args[0],o.args[1],a]));if(o.type===\"Dot\"){let u=o.args[1],[c,l]=Qe(e,o.args),p=nr(e,a);if(u.type===\"Letter\")switch(u.val){case\"x\":case\"y\":case\"z\":return r.Exponent([e.setInput(r.NamedCoordinateAccess(u.val,[c]),o.span),p]);default:break}else if(u.type===\"Call\"){let f=u.args[0];if(f.type===\"Letter\")switch(f.val){case\"x\":case\"y\":case\"z\":return r.Multiply([e.setInput(r.NamedCoordinateAccess(f.val,[c]),An(o.args[0].span,f.span)),e.setInput(r.Exponent([nr(e,u.args[1]),p]),ai(t.span.input,u.args[0].span.end,a.span.end))]);default:break}}return r.Exponent([e.setInput(r.DotAccess([c,l]),o.span),p])}else return r.Exponent(Qe(e,t.args))}case\"Sqrt\":return r.FunctionCall(\"sqrt\",Qe(e,t.args));case\"Nthroot\":return r.FunctionCall(\"nthroot\",Qe(e,[t.args[1],t.args[0]]));case\"Frac\":return r.Divide(Qe(e,t.args));case\"Derivative\":{let o=Qe(e,t.args);if(!tn(t.args[0]))throw te(`Expected identifier in derivative, but found ${t.args[0].type}`);return r.Derivative(o[0],[o[1]])}case\"Integral\":{let[o,a,u,c]=t.args,l=Qe(e,[o,a,u,c]);return r.Integral(l)}case\"EmptyIntegral\":{let[o,a,u]=Qe(e,t.args),c=e.setInput(r.Constant(Ve(1,1)),void 0);return r.Integral([o,a,u,c])}case\"Sum\":{let[o,a,u]=t.args;if(!yl(a))throw Ex();let c=Qe(e,[a.args[0],a.args[1],u]),l=nr(wy(e,{prefix:\"ro\",expr:c[0]}),o);return r.Sum(c.concat(l))}case\"Product\":{let[o,a,u]=t.args;if(!yl(a))throw Mx();let c=Qe(e,[a.args[0],a.args[1],u]),l=nr(wy(e,{prefix:\"ro\",expr:c[0]}),o);return r.Product(c.concat(l))}case\"Juxt\":{if(e.writeIntegral){let[u,c]=t.args;if(c.type===\"Letter\"&&c.val===\"t\"&&u.type===\"Juxt\"&&([u,c]=u.args,c.type===\"Letter\"&&c.val===\"n\")){if(u.type===\"Juxt\"){if([u,c]=u.args,c.type===\"Letter\"&&c.val===\"i\")throw Kd()}else if(u.type===\"Letter\"&&u.val===\"i\")throw Kd()}}let[o,a]=t.args;if(o.type===\"MixedNumber\"&&!(tn(a)||a.type===\"Piecewise\"||a.type===\"Call\"||a.type===\"Paren\"))throw Fd(Ly(o));if(a.type===\"MixedNumber\")throw Fd(Ly(a));return r.Multiply(Qe(e,t.args))}case\"Letter\":return r.Identifier(t.val);case\"Cmd\":{let o=t.val;switch(o){case\"ans\":{if(e.currentIndex===void 0)throw pp(\"ans\");return r.Ans(`ans_{${e.currentIndex-1}}`)}case\"approx\":throw Id(o);case\"dt\":{if(!e.allowDt)throw pp(o);return r.Identifier(o)}case\"index\":{if(!e.allowIndex)throw pp(o);return r.Identifier(o)}default:return r.Identifier(o)}}case\"With\":{if(e.isSubstitutionRHS)throw im();let[o,a]=t.args,u=Q(q({},e),{isSubstitutionRHS:!0});return r.Substitution(nr(u,o),lV(u,a))}case\"Decimal\":return r.Constant(yO(t));case\"MixedNumber\":return r.MixedNumber(gO(t));case\"Piecewise\":return fV(e,t);case\"RightArrow\":return pV(e,t);case\"Seq\":return r.BareSeq(Qe(e,t.args));case\"EmptyPiecewise\":return r.Restriction([e.setInput(r.Constant(!0),xs(t.span.input,t.span.start))]);case\"Equals\":throw On(\"=\");case\"Inequality\":case\"InequalityChain\":throw bh();case\"Tilde\":throw On(\"~\");case\"Colon\":throw On(\":\");case\"Ellipsis\":throw On(\"...\");case\"For\":return _y(e,t,{parentIsList:!1});case\"EmptyRangeEnd\":throw Px();case\"Err\":throw yV(t.error);default:throw`Unexpected surface node ${t.type}.`}}function ZT(e){return ml.hasOwnProperty(e)}function IO(e){return e===\"ln\"||e===\"log\"||e===\"logbase\"}function uV(e){return e.type===\"Decimal\"&&e.val===\"2\"}function cV(e){return e.type!==\"Neg\"?!1:(e=e.args[0],e.type===\"Decimal\"&&e.val===\"1\")}function mO(e,t){let r=e.nodes,[n,i]=t.args,s=nr(e,n),o=mn(i),a=Qe(e,o);if(Cy(n)){let u=xs(i.span.input,i.span.start),c=e.setInput(EO(e),u);return r.SeededFunctionCall(s,[c].concat(a))}if(tn(n))return r.FunctionCall(s,a);if(n.type===\"Superscript\"){let[u,c]=n.args;if(u.type===\"Cmd\"){let l=u.val;if(ZT(l)||IO(l)){if(uV(c))return r.Exponent([e.setInput(r.FunctionCall(l,a),void 0),nr(e,c)]);if(cV(c)&&ml[l]!==void 0)return r.FunctionCall(ml[l],a);throw ZT(l)?Vb(l):Gb(l===\"logbase\"?\"log\":l)}}}return r.Multiply([s,nr(e,i)])}function _y(e,t,{parentIsList:r}){let n=e.nodes,[i,s]=t.args,o=e.setInput(n.Identifier(`_comprehensionIndex_${sV++}`),void 0);if(i.type===\"For\")throw qa(\"for\");let a=nr(wy(e,{prefix:\"li\",expr:o}),i),u=[];if(s.type===\"Seq\"){let p=!1,f=!1;for(let d=0;d<s.args.length;d++)yl(s.args[d])||e.allowIntervalComprehensions&&s.args[d].type===\"InequalityChain\"?p=!0:f=!0;if(p&&f)throw qa(\"for\")}let c=[];for(let p of mn(s))if(e.allowIntervalComprehensions&&p.type===\"InequalityChain\"){let f=$T(p);if(f instanceof R)throw f;let{min:d,identifier:g,max:m,open:b}=f;c.push({identifier:nr(e,g),bounds:[nr(e,d),nr(e,m)],open:b})}else if(yl(p)){let f=e.setInput(n.AssignmentExpression(Qe(e,p.args)),p.span);u.push(f)}else throw p.type===\"Inequality\"?bp(\"a\"):Ux();let l=r;return n.ListComprehension(o,a,u,l,c)}function lV(e,t){let r=e.nodes;if(t.type===\"Seq\"){let s=!1,o=!1,a=!1;for(let u=0;u<t.args.length;u++){let c=t.args[u];if(c.type===\"With\")throw qa(\"with\");yl(c)?s=!0:e.allowIntervalComprehensions&&c.type===\"InequalityChain\"&&!($T(c)instanceof R)?o=!0:a=!0}if((s||o)&&a)throw qa(\"with\");if(o)throw sm()}if(e.allowIntervalComprehensions&&t.type===\"InequalityChain\"&&!($T(t)instanceof R))throw sm();if(t.type===\"With\")throw im();let n=mn(t),i=[];for(let s of n){if(!yl(s))throw $x();let o=e.setInput(r.AssignmentExpression(Qe(e,s.args)),s.span);i.push(o)}return i}function $T(e){e.chain.length>1&&ip();let{first:{symbol:t,args:[r,n]},chain:[{symbol:i,args:[s]}]}=e;return tn(n)?t!==\"<\"&&t!==\"<=\"||i!==\"<\"&&i!==\"<=\"?bp(xr(n.span)):{min:r,identifier:n,max:s,open:[t===\"<\",i===\"<\"]}:bp(\"a\")}function pV(e,t){let r=e.nodes;if(!tn(t.args[0]))throw $h();return e=wy(e,{prefix:\"ec\",expr:e.setInput(r.Identifier(\"globalEventCount\"),void 0)}),r.UpdateRule(Qe(e,t.args))}function fV(e,t){let r=e.nodes,[n]=t.args,i=mn(n);if(i.length===1&&WT(i[0])){let f=i[0];return r.Restriction([e.setInput(fu(e,f),f.span)])}let s,o=[];e:for(s=0;s<i.length;s++){let f=i[s];switch(f.type){case\"Colon\":{let[d,g]=f.args;if(!WT(d))throw Hb();if(g.type===\"With\"&&g.args[1].type===\"Seq\")throw qa(\"with\");o.push({condition:e.setInput(fu(e,d),d.span),if_expr:nr(e,g)});break}case\"Equals\":case\"Inequality\":case\"InequalityChain\":o.push({condition:e.setInput(fu(e,f),f.span),if_expr:e.setInput(r.Constant(Ve(1,1)),ai(\"1\",0,1))});break;case\"For\":throw qa(\"for\");default:break e}}if(s===0)throw Bb();if(s<i.length-1)throw zb();let a,u;s===i.length-1?(a=jp(e,i[s]),u=i[s]):a=r.Constant(NaN);let c=a,l=u==null?void 0:u.span,p;for(;o.length;)p=o.pop(),c=r.Piecewise([p.condition,p.if_expr,e.setInput(c,l)]),l=void 0;return c}function WT(e){return e.type===\"Equals\"||e.type===\"Inequality\"||e.type===\"InequalityChain\"}function fu(e,t){let r=e.nodes;switch(t.type){case\"Equals\":return r.Comparator[\"=\"](Qe(e,t.args));case\"Inequality\":return r.Comparator[t.symbol](Qe(e,t.args));case\"InequalityChain\":if(t.chain.length>1)throw ip();let{first:{symbol:n,args:[i,s]},chain:[{symbol:o,args:[a]}]}=t,u=xs(t.span.input,t.span.start);return r.And([e.setInput(fu(e,kp(u,n,[i,s])),An(i.span,s.span)),e.setInput(fu(e,kp(u,o,[s,a])),An(s.span,a.span))]);default:throw te(`Unexpected type for condition: ${t.type}`)}}function dV(e){let[t,r]=e.args;if(t.type===\"Superscript\"&&(t=t.args[0]),t.type===\"Cmd\"&&t.val===\"logbase\"&&r.type===\"Seq\"&&r.args.length===2){if(!lo(r.args[0]))throw wd(\"log\")}else if(!lo(r))throw t.type===\"Cmd\"?wd(t.val):te(`Unexpected type for args of implicit call: ${r.type}`)}function yO(e){return Cu(e.val)}function gO(e){let t=Cu(e.whole),r=Cu(e.num),n=Cu(e.den);return Ro(t,js(r,n))}function mV(e){if(e.type!==\"Call\")return!1;let t=e.args[0];for(;t.type===\"Superscript\"||t.type===\"Subscript\"||t.type===\"Prime\";)t=t.args[0];return t.type!==\"Cmd\"?!1:ZT(t.val)||IO(t.val)}function yl(e){return e.type===\"Equals\"&&tn(e.args[0])}function yV(e){switch(e.type){case\"UnexpectedParseError\":case\"MissingBound\":case\"EmptyGroup\":case\"UnexpectedDifferential\":case\"UnexpectedEnd\":return te(`Unexpected error type: ${e.type}`);case\"InvalidOperatorName\":return Rb();case\"UnexpectedCloseDelimiter\":case\"MissingCloseDelimiter\":return Lx(e.open,e.close);case\"UnrecognizedSymbol\":return e.val===\".\"?On(e.val):Id(e.val);case\"EmptyInput\":return sp();case\"BinaryOperatorMissingRight\":case\"BinaryOperatorMissingLeft\":return np(e.val===\"%\"?\"% of\":e.val);case\"UnaryOperatorMissingLeft\":return Ib(e.val);case\"UnaryOperatorMissingRight\":return Eb(e.val);case\"UnexpectedSubscript\":return Ub(e.base);case\"PercentMissingOf\":return Fx();case\"SumMissingBound\":return Tx();case\"ProductMissingBound\":return Ix();case\"IntegralMissingBound\":return Ox();case\"SumMissingBody\":return Nx();case\"ProductMissingBody\":return Ax();case\"IntegralMissingBody\":return Cx();case\"DerivativeMissingBody\":return _x();case\"IntegralMissingDifferential\":return Sx();case\"DifferentialWithSuperscript\":return Rx();case\"FractionMissingNumerator\":return Mb();case\"FractionMissingDenominator\":return Db();case\"FractionEmpty\":return vb();case\"EmptySuperscript\":return Ob();case\"EmptySubscript\":return Vd();case\"InvalidSubscript\":return Sb(e.val);case\"SuperscriptWithPrime\":return Ab();case\"PrimeWithoutParen\":return Bd();case\"UnexpectedPrime\":return Gd();case\"EmptyRadical\":return Cb();case\"EmptyRadicalIndex\":return _b();case\"EmptySquareBracket\":return wb();case\"EmptyPipe\":return Fb();case\"FunctionMissingArgument\":return is(e.val,1,0);case\"AdjacentNumbers\":return xb(Ly(e.args[0]),Ly(e.args[1]));case\"TokenWithSubscript\":return Pb();case\"UnexpectedFor\":return On(\"for\");default:throw`Unexpected surface node ${e.type}.`}}function Ly(e){switch(e.type){case\"Decimal\":return e.val;case\"MixedNumber\":return`${e.whole} ${e.num}/${e.den}`;default:let t=e;throw new Error(`Unexpected node type ${t.type}`)}}function lo(e){switch(e.type){case\"Letter\":case\"Decimal\":case\"MixedNumber\":case\"Cmd\":case\"EmptyPiecewise\":return!0;case\"Neg\":{let r=e.args[0];for(;;)if(r.type===\"Pos\"||r.type===\"Paren\"&&!TO(r))r=r.args[0];else if(r.type===\"Neg\")r=r.args[0];else break;return r.type===\"Decimal\"||r.type===\"MixedNumber\"}case\"Pos\":return lo(e.args[0]);case\"Paren\":return lo(e.args[0]);case\"Juxt\":case\"Mul\":case\"DotMul\":case\"CrossMul\":case\"Div\":return lo(e.args[0])&&lo(e.args[1]);case\"Subscript\":return lo(e.args[0]);case\"Superscript\":case\"Frac\":case\"Add\":case\"Sub\":return lo(e.args[0])&&lo(e.args[1]);case\"Piecewise\":{let[r]=e.args;return r.type===\"Equals\"||r.type===\"Inequality\"||r.type===\"InequalityChain\"}case\"Call\":{let[r,n]=e.args;return tn(r)||S1(r)?!1:lo(r)&&lo(n)}case\"Derivative\":case\"Sqrt\":case\"Nthroot\":case\"Pipes\":case\"Bang\":return!1;case\"Equals\":case\"Inequality\":case\"InequalityChain\":case\"Tilde\":case\"ImplicitCall\":case\"Index\":case\"List\":case\"Seq\":case\"Integral\":case\"EmptyIntegral\":case\"Sum\":case\"Product\":case\"Colon\":case\"Ellipsis\":case\"For\":case\"With\":case\"Dot\":case\"PercentOf\":case\"Prime\":case\"EmptyRangeEnd\":case\"RightArrow\":return!1;default:throw`Unexpected surface node ${e.type}.`}}function Cy(e){return e.type!==\"Cmd\"?!1:e.val===\"random\"||e.val===\"shuffle\"}function EO(e){let t=e.nodes.ExtendSeed(\"\",[e.setInput(e.nodes.Identifier(\"globalRandomSeed\"),void 0),e.setInput(e.nodes.Seed(e.nextSeed()),void 0)]);if(!e.seedExtensions)return t;for(let{prefix:r,expr:n}of e.seedExtensions)t=e.nodes.ExtendSeed(r,[e.setInput(t,void 0),n]);return t}function wy(e,t){let r=e.seedExtensions||[];return Q(q({},e),{seedExtensions:r.concat(t)})}var gV=[[fl(\"(\"),_t(\")\"),fl(\"\\\\{\"),_t(\"\\\\}\"),Jp(\"[\"),_t(\"]\"),fl(\"(|\"),_t(\"|)\"),_t(\"Differential\"),_t(\"End\")],[_t(\"for\")],[Jp(\"with\")],[dl(\"...\")],[_t(\",\")],[dl(\":\")],[Jp(\"->\")],[Wp(\"with\")],[_t(\"=\"),_t(\">\"),_t(\"<\"),_t(\">=\"),_t(\"<=\"),_t(\"~\")],[Wp(\"->\")],[_t(\"+\"),_t(\"-\")],[_t(\"*\"),_t(\"\\\\cdot\"),_t(\"\\\\times\"),_t(\"/\"),_t(\"Decimal\"),_t(\"MixedNumber\"),_t(\"Letter\"),_t(\"Cmd\"),_t(\"TokenNode\"),_t(\"%\"),Jp(\"(\"),_t(\"\\\\{\"),_t(\"(|\"),_t(\"Frac\"),_t(\"Sqrt\"),_t(\"Trig\"),_t(\"Ln\"),_t(\"Log\"),dl(\"Int\"),dl(\"Sum\"),dl(\"Prod\")],[fl(\"+\"),fl(\"-\")],[_t(\"!\")],[_t(\"SupSub\")],[Wp(\"[\"),_t(\".\")],[Wp(\"(\")],[_t(\"Err\")]],{leftPrec:Fy,rightPrec:MO,initialPrec:SO}=dO(gV),DO={trailingComma:!1};function RO(e,t){let r=t?q(q({},DO),t):DO,n=Sa(e,r),i=hV(n);return i.type===\"Err\"&&i.error.type===\"EmptyGroup\"?Ie(i.span,N1()):i}function hV(e){return du(e,{isToplevel:!0})}function du(e,{isToplevel:t}={isToplevel:!1}){if(Ay(e))return Ie(pe(e,e),A1());let{state:r,tree:n}=Lr(e,0,{isToplevel:t});return n.type!==\"Err\"&&!Ay(r)?QT(r).tree:n}function B(e,t){return{state:e,tree:t}}function Lr(e,t,{isToplevel:r}={isToplevel:!1}){let n=e,i;if({state:n,tree:i}=bV(n),i.type===\"Err\")return B(n,i);if(!XT(e,n))throw new Error(\"Programming Error: parseInitial did not advance state.\");for(;!Ay(n);){let s;if(gn(n,\"(\")&&!TV(i)?s=MO(\"(\"):s=Fy(yn(n).type),t>=s)break;let o=n,a=xV(n,i,r)?Fy(\"for\")-1:MO(yn(n).type);if({state:n,tree:i}=PV(n,i,a),i.type===\"Err\")return B(n,i);if(!XT(o,n))throw new Error(\"Programming Error: parseSuccessor did not advance state.\")}return B(n,i)}function Ci(e){return e.type===\"UnexpectedDifferential\"||e.type===\"UnexpectedCloseDelimiter\"||e.type===\"UnexpectedEnd\"||e.type===\"BinaryOperatorMissingLeft\"}function bV(e){let t=e,r=yn(e),n=SO(r.type),i;switch(r.type){case\"+\":{if(e=Se(e),{state:e,tree:i}=Lr(e,n),i.type===\"Err\"){if(!Ci(i.error))return B(e,i);let o=pe(t,e),a=Ie(o,FT(r.val));return B(e,a)}return B(e,jv(pe(t,e),[i]))}case\"-\":if(e=Se(e),{state:e,tree:i}=Lr(e,n),i.type===\"Err\"){if(!Ci(i.error))return B(e,i);let o=pe(t,e),a=Ie(o,FT(r.val));return B(e,a)}else return B(e,Qv(pe(t,e),[i]));case\"(\":return Qp(e);case\"\\\\{\":return e=Se(e),gn(e,\"\\\\}\")?(e=Se(e),B(e,h1(pe(t,e)))):({state:e,tree:i}=Lr(e,n),{state:e,tree:i}=Kp(t,e,i,\"\\\\{\",\"\\\\}\"),i.type===\"Err\"?B(e,i):B(e,g1(pe(t,e),[i])));case\"[\":return e=Se(e),gn(e,\"]\")?(e=Se(e),B(e,ST(pe(t,e),[]))):({state:e,tree:i}=Lr(e,n),{state:e,tree:i}=Kp(t,e,i,\"[\",\"]\"),i.type===\"Err\"?B(e,i):B(e,ST(pe(t,e),[i])));case\"(|\":{if(e=Se(e),gn(e,\"|)\")){e=Se(e);let o=pe(t,e);return B(e,Ie(o,L1()))}return{state:e,tree:i}=Lr(e,n),{state:e,tree:i}=Kp(t,e,i,\"(|\",\"|)\"),i.type===\"Err\"?B(e,i):B(e,a1(pe(t,e),[i]))}case\"Frac\":{if(e.opts.disallowFrac)throw rm();e=Se(e);let o=du(Sa(r.num,e.opts)),a=du(Sa(r.den,e.opts));if(o.type===\"Err\"&&o.error.type===\"EmptyGroup\"&&a.type===\"Err\"&&a.error.type===\"EmptyGroup\"){let u=pe(t,e),c=Ie(u,tO());return B(e,c)}if(o.type===\"Err\"&&o.error.type===\"EmptyGroup\"){let u=pe(t,e),c=Ie(u,K1());return B(e,c)}if(a.type===\"Err\"&&a.error.type===\"EmptyGroup\"){let u=pe(t,e),c=Ie(u,eO());return B(e,c)}if(o.type===\"Err\")return B(e,o);if(a.type===\"Err\")return B(e,a);if(R1(o,a)&&a.type===\"Juxt\"){let u=a.args[1],c;if({state:e,tree:c}=Lr(e,Fy(\"*\")-1),c.type===\"Err\"){if(Ci(c.error)){let l=pe(t,e);return B(e,Ie(l,J1()))}return B(e,c)}return B(e,p1(pe(t,e),[u,c]))}return B(e,l1(pe(t,e),[o,a]))}case\"Sqrt\":if(e=Se(e),r.optArg){let o=du(Sa(r.optArg,e.opts));if(o.type===\"Err\")return o.error.type===\"EmptyGroup\"?B(e,Ie(o.span,w1())):B(e,o);let a=du(Sa(r.arg,e.opts));return a.type===\"Err\"?a.error.type===\"EmptyGroup\"?B(e,Ie(a.span,LT())):B(e,a):B(e,c1(pe(t,e),[o,a]))}else{let o=du(Sa(r.arg,e.opts));return o.type===\"Err\"?o.error.type===\"EmptyGroup\"?B(e,Ie(o.span,LT())):B(e,o):B(e,u1(pe(t,e),[o]))}case\"Trig\":case\"Ln\":{e=Se(e);let o=uc(pe(t,e),r.val),a=0,u=yn(e);if(u.type===\"SupSub\"){if(e=Se(e),u.sub){let p=pe(t,e),f=Ie(p,H1(o.val));return B(e,f)}let l=Vy(u,e.opts);if(l){if(l.type===\"Err\")return B(e,l);o=Dy(pe(t,e),[o,l])}a=u.nprimes}let c=gn(e,\"(\");if(c){if({state:e,tree:i}=Qp(e),i.type===\"Err\")return B(e,i);i=Yp(pe(t,e),[o,i.args[0]])}else{if({state:e,tree:i}=Lr(e,n-1),i.type===\"Err\")return Ci(i.error)?B(e,Ie(pe(t,e),GT(r.val))):B(e,i);i=vT(pe(t,e),[o,i])}if(a>0){let l=pe(t,e);if(!c){let p=Ie(l,BT());return B(e,p)}i=Xp(l,a,[i])}return B(e,i)}case\"Log\":{e=Se(e);let o=pe(t,e),a=uc(o,r.val),u=0,c,l,p=yn(e);if(p.type===\"SupSub\"&&(e=Se(e),c=NO(p,e.opts),l=Vy(p,e.opts),u=p.nprimes),c&&c.type===\"Err\")return B(e,c);if(l&&l.type===\"Err\")return B(e,l);let f=gn(e,\"(\");if(f){if({state:e,tree:i}=Qp(e),i.type===\"Err\")return B(e,i);i=i.args[0]}else if({state:e,tree:i}=Lr(e,n-1),i.type===\"Err\")return Ci(i.error)?B(e,Ie(pe(t,e),GT(r.val))):B(e,i);let d=c?uc(o,\"\\\\logbase\"):a,g=c?vy(pe(t,e),mn(i).concat(c)):i;if(l&&(d=Dy(pe(t,e),[d,l])),f?i=Yp(pe(t,e),[d,g]):i=vT(pe(t,e),[d,g]),u>0){let m=pe(t,e);if(!f){let b=Ie(m,BT());return B(e,b)}i=Xp(m,u,[i])}return B(e,i)}case\"Int\":{e=Se(e);let o=yn(e);e=Se(e);let a=jT(o,t,e);if(a.type===\"Err\")return a.error.type===\"MissingBound\"?B(e,Ie(a.span,X1())):B(e,a);let{sup:u,sub:c}=a,l;if(gn(e,\"Differential\"))return{state:e,tree:l}=OO(e),l.type===\"Err\"?B(e,l):B(e,d1(pe(t,e),[l,c,u]));if({state:e,tree:i}=Lr(e,n),i.type===\"Err\")return Ci(i.error)?B(e,Ie(i.span,W1())):B(e,i);let p=i;return gn(e,\"Differential\")?({state:e,tree:l}=OO(e),l.type===\"Err\"?B(e,l):B(e,f1(pe(t,e),[l,c,u,p]))):B(e,Ie(pe(t,e),j1()))}case\"Sum\":{e=Se(e);let o=yn(e);e=Se(e);let a=jT(o,t,e);if(a.type===\"Err\")return a.error.type===\"MissingBound\"?B(e,Ie(a.span,k1())):B(e,a);let{sup:u,sub:c}=a;return{state:e,tree:i}=Lr(e,n),i.type===\"Err\"?Ci(i.error)?B(e,Ie(i.span,Z1())):B(e,i):B(e,m1(pe(t,e),[i,c,u]))}case\"Prod\":{e=Se(e);let o=yn(e);e=Se(e);let a=jT(o,t,e);if(a.type===\"Err\")return a.error.type===\"MissingBound\"?B(e,Ie(a.span,Y1())):B(e,a);let{sup:u,sub:c}=a;return{state:e,tree:i}=Lr(e,n),i.type===\"Err\"?Ci(i.error)?B(e,Ie(i.span,$1())):B(e,i):B(e,y1(pe(t,e),[i,c,u]))}case\"Cmd\":return e=Se(e),i=uc(pe(t,e),r.val),B(e,i);case\"TokenNode\":{e=Se(e);let o=yn(e);return o.type===\"SupSub\"&&o.sub?(e=Se(e),B(e,Ie(pe(t,e),nO()))):(i=uc(pe(t,e),r.val),B(e,i))}case\"Letter\":return e=Se(e),i=D1(pe(t,e),r.val),B(e,i);case\"Decimal\":{e=Se(e);let o=Oy(pe(t,e),r.val),a=e.token;if(a.type===\"Decimal\"||a.type===\"MixedNumber\"){let u=e;e=Se(e);let c=pe(t,e),l=a.type===\"MixedNumber\"?a:Oy(pe(u,e),a.val);return B(e,Ie(c,HT([o,l])))}return B(e,o)}case\"MixedNumber\":{if(e.opts.disallowFrac)throw rm();e=Se(e);let o=e.token;if(o.type===\"Decimal\"||o.type===\"MixedNumber\"){let a=e;e=Se(e);let u=pe(t,e),c=o.type===\"MixedNumber\"?o:Oy(pe(a,e),o.val);return B(e,Ie(u,HT([r,c])))}return B(e,r)}case\"*\":case\"\\\\cdot\":case\"\\\\times\":case\"/\":case\",\":case\"=\":case\">\":case\"<\":case\">=\":case\"<=\":case\"->\":case\"~\":case\":\":case\"...\":case\"%\":case\".\":{e=Se(e);let o=pe(t,e),a=Ie(o,F1(r.val));return B(e,a)}case\"for\":{e=Se(e);let o=pe(t,e),a=Ie(o,rO());return B(e,a)}case\"with\":{e=Se(e);let o=pe(t,e),a=Ie(o,CT());return B(e,a)}case\"!\":{e=Se(e);let o=pe(t,e),a=Ie(o,VT(r.val));return B(e,a)}case\"SupSub\":{e=Se(e);let o=\"supsub\";r.sub?o=\"subscript\":r.sup?o=\"superscript\":r.nprimes>0&&(o=\"prime\");let a=pe(t,e),u=Ie(a,VT(o));return B(e,u)}case\")\":case\"\\\\}\":case\"]\":case\"|)\":case\"Differential\":return QT(e);case\"Err\":{e=Se(e);let o=pe(t,e),a=Ie(o,B1(r.val));return B(e,a)}case\"End\":{let o=pe(t,e),a=Ie(o,wT());return B(e,a)}default:throw`Unexpected token type ${r.type}.`}}function xV(e,t,r){return gn(e,\"=\")&&r&&(xO(t)||JT(t))}function PV(e,t,r){let n=yn(e),i;switch(n.type){case\"+\":case\"-\":case\"*\":case\"\\\\cdot\":case\"\\\\times\":case\"/\":case\"=\":case\"~\":case\":\":case\".\":case\"->\":case\"for\":{if(e=Se(e),{state:e,tree:i}=Lr(e,r),i.type===\"Err\")if(Ci(i.error)){let o=Or(t.span,e),a=Ie(o,lu(n.val));return B(e,a)}else return B(e,i);return B(e,vO(n.type,Or(t.span,e),[t,i]))}case\"with\":{if(e=Se(e),{state:e,tree:i}=Lr(e,r),i.type===\"Err\")if(Ci(i.error)){let o=Or(t.span,e),a=Ie(o,lu(n.val));return B(e,a)}else return B(e,i);return B(e,vO(n.type,Or(t.span,e),[t,i]))}case\"%\":{e=Se(e);let o=yn(e);if(o.type!==\"Cmd\"||o.val!==\"of\"&&o.val!==\"\\\\of\"){let a=Ie(n.span,U1());return B(e,a)}if(e=Se(e),{state:e,tree:i}=Lr(e,r),i.type===\"Err\")if(Ci(i.error)){let a=Or(t.span,e),u=Ie(a,lu(n.val));return B(e,u)}else return B(e,i);return B(e,E1(Or(t.span,e),[t,i]))}case\">=\":case\"<=\":case\">\":case\"<\":{let o=n.type;if(e=Se(e),{state:e,tree:i}=Lr(e,r),i.type===\"Err\")if(Ci(i.error)){let l=Or(t.span,e),p=Ie(l,lu(n.val));return B(e,p)}else return B(e,i);let a=kp(Or(t.span,e),o,[t,i]),u=[],c=yn(e).type;for(;c===\">=\"||c===\"<=\"||c===\">\"||c===\"<\";){let l=e;if(o=c,e=Se(e),{state:e,tree:i}=Lr(e,r),i.type===\"Err\")if(Ci(i.error)){let p=Or(t.span,e),f=Ie(p,lu(n.val));return B(e,f)}else return B(e,i);u.push($v(pe(l,e),o,[i])),c=yn(e).type}return u.length?B(e,Wv(Or(t.span,e),a,u)):B(e,a)}case\"!\":return e=Se(e),B(e,s1(Or(t.span,e),[t]));case\"[\":{let o=e;if(e=Se(e),gn(e,\"]\")){e=Se(e);let a=pe(o,e);return B(e,Ie(a,_1()))}return{state:e,tree:i}=Lr(e,r),{state:e,tree:i}=Kp(o,e,i,\"[\",\"]\"),i.type===\"Err\"?B(e,i):B(e,o1(Or(t.span,e),[t,i]))}case\"Sqrt\":case\"Frac\":case\"Letter\":case\"Cmd\":case\"TokenNode\":case\"Trig\":case\"Ln\":case\"Log\":case\"Sum\":case\"Int\":case\"Prod\":case\"Decimal\":case\"MixedNumber\":case\"\\\\{\":case\"(|\":return{state:e,tree:i}=Lr(e,r),i.type===\"Err\"?B(e,i):B(e,AT(Or(t.span,e),[t,i]));case\"(\":if(tn(t)){if({state:e,tree:i}=Qp(e),i.type===\"Err\")return B(e,i);let o=Or(t.span,e);return B(e,Yp(o,[t,i.args[0]]))}else if(t.type===\"Prime\"&&tn(t.args[0])){if({state:e,tree:i}=Qp(e),i.type===\"Err\")return B(e,i);let o=Or(t.span,e);return B(e,Xp(o,t.nprimes,[Yp(o,[t.args[0],i.args[0]])]))}else return{state:e,tree:i}=Lr(e,r),i.type===\"Err\"?B(e,i):B(e,AT(Or(t.span,e),[t,i]));case\"SupSub\":{e=Se(e);let o=AO(n),a=Vy(n,e.opts);if(o&&o.type===\"Err\")return B(e,o);if(a&&a.type===\"Err\")return B(e,a);if(o&&(t=RT(Or(t.span,e),[t,o])),a&&(t=Dy(Or(t.span,e),[t,a])),n.nprimes>0){let u=Or(t.span,e);if(!tn(t)){let c=Ie(u,Sy());return B(e,c)}t=Xp(u,n.nprimes,[t])}return B(e,t)}case\",\":{let o=[t];for(;gn(e,\",\")&&(e=Se(e),!(gn(e,\"...\")||e.opts.trailingComma&&IV(e)));){if({state:e,tree:i}=Lr(e,r),i.type===\"Err\")if(Ci(i.error)){let a=Or(t.span,e),u=Ie(a,lu(n.val));return B(e,u)}else return B(e,i);o.push(i)}return B(e,vy(Or(t.span,e),o))}case\"...\":{if(e=Se(e),gn(e,\",\")&&(e=Se(e)),r>=Fy(yn(e).type))return B(e,NT(Or(t.span,e),[t,b1(kT(e))]));if({state:e,tree:i}=Lr(e,r),i.type===\"Err\")if(Ci(i.error)){let o=Or(t.span,e),a=Ie(o,lu(n.val));return B(e,a)}else return B(e,i);return B(e,NT(Or(t.span,e),[t,i]))}case\"]\":case\")\":case\"\\\\}\":case\"|)\":case\"Differential\":return QT(e);case\"Err\":return Lr(e,r);case\"End\":{let o=pe(e,e),a=Ie(o,wT());return B(e,a)}default:throw`Unexpected token type ${n.type}.`}}function TV(e){return!!(tn(e)||e.type===\"Prime\"&&tn(e.args[0]))}function vO(e,t,r){switch(e){case\"+\":return Kv(t,r);case\"-\":return e1(t,r);case\"*\":return t1(t,r);case\"\\\\cdot\":return r1(t,r);case\"\\\\times\":return n1(t,r);case\"/\":return i1(t,r);case\"=\":return Zv(t,r);case\"~\":return Jv(t,r);case\":\":return x1(t,r);case\".\":return I1(t,r);case\"->\":return M1(t,r);case\"for\":return P1(t,r);case\"with\":return T1(t,r);default:throw`Unexpected token type ${e}.`}}function NO(e,t){if(!e.sub)return;let r=e.sub,n=du(Sa(r,t));return n.type===\"Err\"&&n.error.type===\"EmptyGroup\"?Ie(n.span,_T()):n}function AO(e){if(!e.sub)return;let t=e.sub;if(t.args.length===0)return Ie(t.span,_T());let r=[];for(let n of t.args)if(n.type===\"Digit\"||n.type===\"Letter\")r.push(n.val);else{let i=n.span;return Ie(i,z1(xr(i)))}return v1(t.span,r.join(\"\"))}function Vy(e,t){if(!e.sup)return;let r=du(Sa(e.sup,t));return r.type===\"Err\"?r.error.type===\"EmptyGroup\"?Ie(r.span,C1()):r:e.nprimes>0?Ie(e.span,q1()):r}function jT(e,t,r){if(e.type!==\"SupSub\"){let s=pe(t,r);return Ie(s,zT())}if(e.nprimes>0){let s=pe(t,r);return Ie(s,Sy())}let n=NO(e,r.opts),i=Vy(e,r.opts);if(!n||n.type===\"Err\"&&n.error.type===\"EmptySubscript\"||!i||i.type===\"Err\"&&i.error.type===\"EmptySuperscript\"){let s=pe(t,r);return Ie(s,zT())}return n.type===\"Err\"?n:i.type===\"Err\"?i:{type:\"Bounds\",sup:i,sub:n}}function Qp(e){let t=e,r=yn(e),n=SO(r.type);if(gn(e,\"(\"))e=Se(e);else throw new Error(\"Programming Error: expected '(' at start of parseParen.\");if(gn(e,\")\")){let s=vy(kT(e),[]);e=Se(e);let o=pe(t,e);return B(e,OT(o,[s]))}let i;return{state:e,tree:i}=Lr(e,n),{state:e,tree:i}=Kp(t,e,i,\"(\",\")\"),i.type===\"Err\"?B(e,i):B(e,OT(pe(t,e),[i]))}function OO(e){let t=e,r=yn(e);if(r.type!==\"Differential\")throw new Error(\"Programming Error: expected differential\");e=Se(e);let n=uc(r.span,r.val),i=yn(e);if(i.type===\"SupSub\"){e=Se(e);let s=pe(t,e),o=AO(i);if(o){if(o.type===\"Err\")return B(e,o);n=RT(s,[n,o])}if(i.sup)return B(e,Ie(s,Q1()));if(i.nprimes>0)return B(e,Ie(s,Sy()))}return B(e,n)}function Kp(e,t,r,n,i){if(r.type===\"Err\"&&r.error.type!==\"UnexpectedEnd\")return B(t,r);if(r.type===\"Err\"||!gn(t,i)){let s=pe(e,t),o=Ie(s,V1(n,i));return B(t,o)}return t=Se(t),B(t,r)}function QT(e){let t=e;switch(yn(e).type){case\")\":{e=Se(e);let n=pe(t,e);return B(e,Ie(n,Zp(\"(\",\")\")))}case\"]\":{e=Se(e);let n=pe(t,e);return B(e,Ie(n,Zp(\"[\",\"]\")))}case\"\\\\}\":{e=Se(e);let n=pe(t,e);return B(e,Ie(n,Zp(\"\\\\{\",\"\\\\}\")))}case\"|)\":{e=Se(e);let n=pe(t,e);return B(e,Ie(n,Zp(\"|\",\"|\")))}case\"Differential\":{e=Se(e);let n=pe(t,e);return B(e,Ie(n,G1()))}default:{e=Se(e);let n=pe(t,e);return B(e,Ie(n,CT()))}}}function IV(e){return gn(e,\")\")||gn(e,\"]\")||gn(e,\"\\\\}\")}function EV(){throw yp()}function CO(e,t){return t&&!e._inputSpan&&e.setInputSpan(t),e}function Ns(e,t={}){let r=typeof e;if(r!==\"string\")throw new Error(`Type Error: parse can only be called with strings, got ${JSON.stringify(e)} of type ${r}`);let n=D;if(t.disabledFeatures){n=Object.create(n);for(let l of t.disabledFeatures){if(!n[l])throw new Error(`Programming Error: ${l} cannot be disabled because it is not a parsenode.`);n[l]=EV}}let i=t.seedPrefix===void 0?\"\":t.seedPrefix,s=0,o=()=>{let l=`${i}::vc${s}`;return s+=1,l},a={nodes:n,currentIndex:t.index,setInput:CO,nextSeed:o,allowDt:!!t.allowDt,allowIndex:!!t.allowIndex,writeIntegral:!!t.writeIntegral,allowIntervalComprehensions:!!t.allowIntervalComprehensions},u={};t.trailingComma!==void 0&&(u.trailingComma=t.trailingComma),t.disallowFrac&&(u.disallowFrac=!0);function c(l){return l.parseOptions=t,l}if(e===\"\")return c(sp());try{let l=kv(e),p=RO(l,u),f=hO(a,p);return f.parseOptions=t,f}catch(l){let p;return l instanceof D.Error?p=l:typeof l==\"string\"?p=new D.Error(l):p=te(l),c(p)}}function DV(e,t,r){return{chunk:e,argMap:t,start:r}}function mu(e,t,r,n){let i=DV(e,[t],r);return ef(i,n)}function ef(e,t){let{chunk:r,argMap:n,start:i}=e;if(t<i)return t;let s=n[t-i];if(s!==void 0)return s;let o=vV(e,t);e.argMap[t-i]=o;let a=r.getInstruction(t);if(pi(a))switch(a.type){case 23:case 21:case 50:break;case 19:{let c=a.args.length-2;for(let l=0;l<c;l++)ef(e,t+1+l);break}default:let u=a;throw new Error(`Programming Error. Unexpected OpCode: ${u.type}`)}else if(pn(a)){let u=a.args.length-1;for(let c=0;c<u;c++)ef(e,t+1+c)}return o}function vV(e,t){let{chunk:r,start:n}=e,i=r.getInstruction(t);if(pn(i)){let a=i.args[0];for(let u=a;u<=t;u++){let c=r.getInstruction(u);if(!Me(c))for(let l of c.args)l<a&&ef(e,l)}}if(Me(i))return Os(r,i);let s=[];for(let a of i.args)s.push(ef(e,a));let o=e.argMap[t-n];return o!==void 0?o:gr(r,i,s)}var or=Symbol(\"FRAME_SENTINEL\");function lc(e,t){return KT(e,t).freeDependencies}function KT(e,t){let r={};return t.type===\"FunctionDefinition\"&&(t=t._expression),eI(e,t,r)}function _O(e,t,r){let n=[],i=[],s=[],o=[];for(let a of t.scopes){let u=_O(e,a,r);for(let c of u.freeDependencies)n.indexOf(c)===-1&&t.definitions.indexOf(c)===-1&&n.push(c);for(let c of u.updateSymbols)i.indexOf(c)===-1&&i.push(c);for(let c of u.substitutionSymbols)s.indexOf(c)===-1&&s.push(c)}for(let a of t.dependencies){if(t.definitions.indexOf(a)!==-1)continue;let u=OV(e,a,r),c=t.substitutionDependencies.indexOf(a)!==-1;for(let l of u.freeDependencies)n.indexOf(l)===-1&&t.definitions.indexOf(l)===-1&&n.push(l),c&&o.indexOf(l)===-1&&t.definitions.indexOf(l)===-1&&o.push(l);for(let l of u.updateSymbols)i.indexOf(l)===-1&&i.push(l);for(let l of u.substitutionSymbols)s.indexOf(l)===-1&&s.push(l)}return{freeDependencies:n,updateSymbols:i,substitutionSymbols:s}}function eI(e,t,r){if(t.type===\"Slider\"||t.type===\"Assignment\")return eI(e,t._expression,r);{let{freeDependencies:n,updateSymbols:i,substitutionSymbols:s}=_O(e,t.getScope(),r),o=t.getUpdateSymbols();if(o.length>0){i=i.slice();for(let u of o)i.indexOf(u)===-1&&i.push(u)}let a=t.getSubstitutionSymbols();if(a.length>0){s=s.slice();for(let u of a)s.indexOf(u)===-1&&s.push(u)}return{freeDependencies:n,updateSymbols:i,substitutionSymbols:s}}}function OV(e,t,r){if(r[t])return r[t];if(Xe[t])return r[t]={freeDependencies:[],updateSymbols:[],substitutionSymbols:[]},r[t];let n=e[t];if(n===or)throw new Error(\"Programming error: _getSymbolFreeDependencies called with a symbol that is defined in a local scope\");return n?(r[t]={freeDependencies:[t],updateSymbols:[],substitutionSymbols:[]},r[t]=eI(e,n,r),r[t]):(r[t]={freeDependencies:[t],updateSymbols:[],substitutionSymbols:[]},r[t])}function LO(e,t){for(var r={},n=t.getDependencies().slice();n.length;){var i=n.pop();if(!r.hasOwnProperty(i)){var s=e[i];if(s===or)return;r[i]=s,s&&s.getDependencies&&Array.prototype.push.apply(n,s.getDependencies())}}return SV(r)}function SV(e){let t=[];for(let r in e)t.push([r,e[r]]);return t}function wO(e,t,r){FO(e,t,r,{})}function FO(e,t,r,n){let i={};for(let s of r.definitions){if(i[s])switch(r.kind){case\"Sum\":case\"Product\":case\"Integral\":throw te(new Error(`${r.kind} scope is not expected to define multiple symbols`));case\"FunctionDefinition\":break;case\"ListComprehension\":throw nm(s);case\"Substitution\":throw Jx(s);default:let o=r.kind;throw te(new Error(`Unexpected scope kind ${o}`))}i[s]=!0}for(let s of r.definitions){let o=t[s];if(o)switch(r.kind){case\"Sum\":case\"Product\":throw Hd(s);case\"Integral\":throw jd(s);case\"FunctionDefinition\":if(s===r.functionDefinitionSymbol)break;throw Uc(s);case\"ListComprehension\":{if(o!==or&&o.type===\"FunctionDefinition\")throw $c(s);if(e.assignmentForbidden(s))throw Zc(s);break}case\"Substitution\":break;default:let a=r.kind;throw te(new Error(`Unexpected scope kind ${a}`))}if(n[s])switch(r.kind){case\"Sum\":case\"Product\":throw Hd(s);case\"Integral\":throw jd(s);case\"FunctionDefinition\":throw Uc(s);case\"ListComprehension\":throw nm(s);case\"Substitution\":throw hp(s);default:let a=r.kind;throw te(new Error(`Unexpected scope kind ${a}`))}}n=Object.create(n);for(let s of r.definitions)n[s]=!0;for(let s of r.scopes)FO(e,t,s,n)}function gl(e,t,r){let n=e.getInstruction(t);if(!ne(n.valueType,I)&&!ne(n.valueType,N)&&!ne(n.valueType,H))throw Hh([le(n.valueType)]);let i=e.getInstruction(r);if(!ne(i.valueType,I)&&i.type!==0)throw te(`Unexpected derivative var type ${i.valueType}`);let s=e.Constant(0);if(t<r)return s;let o=e.Constant(1),a=e.Constant(NaN),u=nu(e,r),c=VV(e,t);e.derivativeMaps[r]||(e.derivativeMaps[r]={maxValidReference:e.instructionsLength()-1,map:[]});let{map:l,maxValidReference:p}=e.derivativeMaps[r];for(let m=0;m<l.length;m++){let b=l[m];b!==void 0&&b>p&&(l[m]=void 0)}let f=[],d=!1;for(let m=0;m<r;m++)f[m]=m,l[m]=s;return tI({chunk:e,derivativeVarIndex:r,forwardMask:u,backwardMask:c,valueMap:f,derivativeMap:l,mustCopy:d,ZERO:s,ONE:o,NAN:a},r,t),e.derivativeMaps[r].maxValidReference=e.instructionsLength()-1,l[t]}function tI(e,t,r){let{chunk:n,valueMap:i,derivativeMap:s,backwardMask:o}=e;for(let a=t;a<=r;a++){let u=s[a];if(u!==void 0)if(n.getInstruction(u).type===0)s[a]=void 0;else{i[a]=Gy(e,a);continue}if(!o[a]){i[a]=Gy(e,a);continue}let c=n.getInstruction(a);if(pi(c)&&c.endIndex!==-1)switch(c.type){case 21:{a=RV(e,a);continue}case 19:case 23:{a=CV(e,a);continue}}i[a]=Gy(e,a),s[a]=_V(e,a)}return r}function RV(e,t){let{chunk:r,forwardMask:n,valueMap:i,derivativeMap:s,ZERO:o}=e,a=r.getInstruction(t),u=a.endIndex,c=r.getInstruction(u),l=o;if(n[a.args[1]]){let p=i[a.args[1]];l=r.Add([l,r.Multiply([s[a.args[1]],mu(r,p,t,c.args[1])])])}if(n[a.args[0]]){let p=i[a.args[0]];l=r.Subtract([l,r.Multiply([s[a.args[0]],mu(r,p,t,c.args[1])])])}if(NV(r,t,n)){let p=i.slice();p[t]=gr(r,a,[p[a.args[0]],p[a.args[1]]]),s[t]=o,tI(Q(q({},e),{valueMap:p,mustCopy:!0}),t+1,u-1);let f=gr(r,c,[p[c.args[0]],s[c.args[1]]]);s[u]=f,l=r.Add([l,gr(r,r.getInstruction(u+1),[f])])}else for(let p=t;p<=u;p++)s[p]=o;if(AV(r,t,i)){let p=Q(q({},e),{mustCopy:!0});for(let f=t;f<=u+1;f++)i[f]=Gy(p,f)}else for(let p=t;p<=u+1;p++)i[p]=p;return s[u+1]=l,u+c.args.length-1}function NV(e,t,r){let n=e.getInstruction(t),i=e.getInstruction(n.endIndex);if(i.args[1]<t+1)return r[i.args[1]];for(let s=t+1;s<=i.args[1];s++){let o=e.getInstruction(s);if(!Me(o)){for(let a of o.args)if(a<t&&r[a])return!0}}return!1}function AV(e,t,r){let n=e.getInstruction(t);for(let i=t;i<=n.endIndex;i++){let s=e.getInstruction(i);if(!Me(s)){for(let o of s.args)if(r[o]!==o)return!0}}return!1}function CV(e,t){let{chunk:r,derivativeMap:n,valueMap:i,ZERO:s}=e,o=r.getInstruction(t),a=o.endIndex,u=r.getInstruction(a),c;if(o.type===23)i[t]=gr(r,o,[i[o.args[0]]]),n[t]=s,c=t+1;else{let p=[];p.push(i[o.args[0]],i[o.args[1]]);for(let f=2;f<o.args.length;f++)p.push(i[o.args[f]],n[o.args[f]]);i[t]=gr(r,o,p),n[t]=s;for(let f=2;f<o.args.length;f++)i[t+f-1]=gr(r,r.getInstruction(t+f-1),[i[t]]),n[t+f-1]=gr(r,r.getInstruction(t+f-1),[i[t]]);c=t+o.args.length-1}tI(Q(q({},e),{mustCopy:!0}),c,a-1);let l=[];l.push(i[u.args[0]]);for(let p=1;p<u.args.length;p++)l.push(i[u.args[p]],n[u.args[p]]);i[a]=gr(r,u,l),n[a]=s;for(let p=1;p<u.args.length;p++)i[a+p]=gr(r,r.getInstruction(a+p),[i[a]]),n[a+p]=gr(r,r.getInstruction(a+p),[i[a]]);return a+u.args.length-1}function Gy(e,t){let{chunk:r,valueMap:n,mustCopy:i}=e,s=r.getInstruction(t);if(Me(s))return i?Os(r,s):t;{let o=[],a=!1;for(let u of s.args)o.push(n[u]),n[u]!==u&&(a=!0);return a||i?gr(r,s,o):t}}function _V(e,t){let{chunk:r,derivativeVarIndex:n,forwardMask:i,valueMap:s,derivativeMap:o,ZERO:a,ONE:u,NAN:c}=e,l=r.getInstruction(t);if(t===n)if(W(l.valueType)){let f=Sn(r,t),d=r.BeginBroadcast([f]),g=r.EndBroadcast([d,u]);return r.BroadcastResult(ie,[g])}else return u;if(pi(l)||pn(l)||l.type===47||l.type===48||l.type===25||l.type===27||l.type===26||l.type===29||l.type===28||l.type===32||l.type===31||l.type===42||l.type===44||l.type===49)return a;if(!i[t]||Me(l))return l.valueType!==I?wV(r,[s[t],a]):l.type!==1||isFinite(k(l.value))?a:c;if(l.type===38||l.type===15||l.type===16){let f=[];for(let d of l.args)f.push(o[d]);return gr(r,l,f)}if(l.type===33)return gr(r,l,[s[l.args[0]],o[l.args[1]],o[l.args[2]]]);let p=a;for(let f=0;f<l.args.length;f++){if(!i[l.args[f]])continue;let d=o[l.args[f]];if(d===a)continue;let g=LV(e,s[t],f,d);g!==a&&(p=p===a?g:FV(r,[g,p]))}return p}function LV(e,t,r,n){let{chunk:i,ZERO:s,ONE:o,NAN:a}=e,u=i.getInstruction(t);switch(u.type){case 8:return n;case 9:switch(r){case 0:return n;default:return i.Negative([n])}case 10:switch(r){case 0:return i.Multiply([n,u.args[1]]);default:return i.Multiply([u.args[0],n])}case 11:switch(r){case 0:return i.Divide([n,u.args[1]]);default:return i.Multiply([u.args[0],i.Divide([i.Negative([n]),i.Multiply([u.args[1],u.args[1]])])])}case 14:return i.Negative([n]);case 12:case 13:switch(r){case 0:return i.Multiply([i.Multiply([u.args[1],i.Exponent([u.args[0],i.Subtract([u.args[1],o])])]),n]);default:return i.Multiply([i.Piecewise([i.Equal([u.args[0],s]),i.Piecewise([i.GreaterEqual([u.args[1],s]),s,a]),i.Multiply([i.SyntheticNativeFunction(\"ln\",[u.args[0]]),t])]),n])}case 37:return GV(i,t,GO[u.symbol][r],n);case 39:case 40:case 41:case 17:case 18:switch(r){case 0:return gr(i,u,[n,u.args[1]]);default:return s}default:{let c=u;throw new Error(`Unimplemented derivative for opcode ${c.type}`)}}}function wV(e,t){switch(e.getInstruction(t[0]).valueType){case De:return e.SyntheticNativeFunction(\"scaleTangentSegment\",t);case ye:return e.SyntheticNativeFunction(\"scaleTangentLine\",t);case Le:return e.SyntheticNativeFunction(\"scaleTangentRay\",t);case me:return e.SyntheticNativeFunction(\"scaleTangentCircle\",t);case fe:return e.SyntheticNativeFunction(\"scaleTangentArc\",t);case Ne:return e.SyntheticNativeFunction(\"scaleTangentUndirectedAngleMarker\",t);case Te:return e.SyntheticNativeFunction(\"scaleTangentDirectedAngleMarker\",t);default:return e.Multiply(t)}}function FV(e,t){switch(e.getInstruction(t[0]).valueType){case De:return e.SyntheticNativeFunction(\"addTangentSegment\",t);case xt:return e.SyntheticNativeFunction(\"addTangentSegmentThreeD\",t);case ye:return e.SyntheticNativeFunction(\"addTangentLine\",t);case Le:return e.SyntheticNativeFunction(\"addTangentRay\",t);case me:return e.SyntheticNativeFunction(\"addTangentCircle\",t);case fe:return e.SyntheticNativeFunction(\"addTangentArc\",t);case Ne:return e.SyntheticNativeFunction(\"addTangentUndirectedAngleMarker\",t);case Te:return e.SyntheticNativeFunction(\"addTangentDirectedAngleMarker\",t);default:return e.Add(t)}}function VV(e,t){let r=[];for(let n=0;n<t;n++)r.push(!1);r.push(!0);for(let n=t;n>=0;n--){if(!r[n])continue;let i=e.getInstruction(n);if(!Me(i))if(i.type===33)r[i.args[1]]=!0,r[i.args[2]]=!0;else for(let s of i.args)r[s]=!0}return r}function GV(e,t,r,n){let i=Object.create(Xe),s=Bp({},{},-1),a=e.getInstruction(t).args;for(let u=0;u<a.length;u++){let c=BV[u];Ri(s,c,a[u]),i[c]=or}return Ri(s,\"x_1\",n),i.x_1=or,Ri(s,\"q\",t),i.q=or,Ce(_i(Nv,i,e,s,void 0,{},void 0),r)}var BV=[\"x\",\"y\",\"z\",\"u\"],VO={exp:[\"q*x_1\"],ln:[\"\\\\{x >= 0: x_1/x \\\\}\"],log:[\"\\\\{x >= 0: x_1/(x*\\\\ln(10)) \\\\}\"],sqrt:[\"x_1/(2*q)\"],rtxsqpone:[\"x*x_1/q\"],rtxsqmone:[\"x*x_1/q\"],sin:[\"\\\\cos(x)*x_1\"],cos:[\"-\\\\sin(x)*x_1\"],tan:[\"(1+q^2)*x_1\"],arcsin:[\"x_1/\\\\sqrt{1 - x^2}\"],arccos:[\"-x_1/\\\\sqrt{1 - x^2}\"],sinh:[\"\\\\cosh(x)*x_1\"],cosh:[\"\\\\sinh(x)*x_1\"],tanh:[\"(\\\\sech(x))^2*x_1\"],arcsinh:[\"x_1/\\\\rtxsqpone(x)\"],arccosh:[\"\\\\{ x > 0: x_1/\\\\rtxsqmone(x) \\\\}\"],arctanh:[\"\\\\{ \\\\abs(x) < 1: x_1/(1 - x^2) \\\\}\"],csc:[\"-\\\\cot(x)*q*x_1\"],sec:[\"\\\\tan(x)*q*x_1\"],cot:[\"-(1+q^2)*x_1\"],arccsc:[\"-x_1/(\\\\abs(x)*\\\\rtxsqmone(x))\"],arcsec:[\"x_1/(\\\\abs(x)*\\\\rtxsqmone(x))\"],arccot:[\"-x_1/(1+x^2)\"],csch:[\"-\\\\coth(x)*q*x_1\"],sech:[\"-\\\\tanh(x)*q*x_1\"],coth:[\"-(\\\\csch(x))^2*x_1\"],arccsch:[\"-x_1/(\\\\abs(x)*\\\\rtxsqpone(x))\"],arcsech:[\"\\\\{ x >= 0: -x_1/(x*\\\\sqrt{1 - x^2}) \\\\}\"],arccoth:[\"\\\\{ \\\\abs(x) > 1 : x_1/(1 - x^2) \\\\}\"],factorial:[\"q*\\\\polyGamma(0, x + 1)*x_1\"],floor:[\"\\\\{ q=x: 0/0, 0*x_1 \\\\}\"],ceil:[\"\\\\{ q=x: 0/0, 0*x_1 \\\\}\"],round:[\"\\\\{ \\\\abs(\\\\mod(x, 1) - 0.5) > 0: 0*x_1 \\\\}\"],abs:[\"\\\\{ x=0: 0/0, \\\\sign(x)*x_1 \\\\}\"],sign:[\"\\\\{ x=0: 0/0, 0*x_1 \\\\}\"],distance:[\"-((y.x-x.x)*x_1.x+(y.y-x.y)*x_1.y)/q\",\"((y.x-x.x)*x_1.x+(y.y-x.y)*x_1.y)/q\"],distanceThreeD:[\"-((y.x-x.x)*x_1.x+(y.y-x.y)*x_1.y+(y.z-x.z)*x_1.z)/q\",\"((y.x-x.x)*x_1.x+(y.y-x.y)*x_1.y+(y.z-x.z)*x_1.z)/q\"],segmentThreeD:[\"\\\\segmentThreeD(x_1,(0,0,0))\",\"\\\\segmentThreeD((0,0,0),x_1)\"],vectorThreeD:[\"\\\\vectorThreeD(x_1,(0,0,0))\",\"\\\\vectorThreeD((0,0,0),x_1)\"],triangle:[\"\\\\triangle(x_1,(0,0,0),(0,0,0))\",\"\\\\triangle((0,0,0),x_1,(0,0,0))\",\"\\\\triangle((0,0,0),(0,0,0),x_1)\"],sphere:[\"\\\\sphere(x_1,0)\",\"\\\\sphere((0,0,0),x_1)\"],pointDet:[\"\\\\pointDet(x_1,y)\",\"\\\\pointDet(x,x_1)\"],pointDot:[\"\\\\pointDot(x_1,y)\",\"\\\\pointDot(x,x_1)\"],pointPerp:[\"\\\\pointPerp(x_1)\"],segment:[\"\\\\segment(x_1,(0,0))\",\"\\\\segment((0,0),x_1)\"],line:[\"\\\\line(x_1,(0,0))\",\"\\\\line((0,0),x_1)\"],ray:[\"\\\\ray(x_1,(0,0))\",\"\\\\ray((0,0),x_1)\"],vector:[\"\\\\vector(x_1, (0,0))\",\"\\\\vector((0,0), x_1)\"],mathVector:[\"\\\\mathVector(x_1,(0,0))\",\"\\\\mathVector((0,0),x_1)\"],mathVectorThreeD:[\"\\\\mathVectorThreeD(x_1,(0,0,0))\",\"\\\\mathVectorThreeD((0,0,0),x_1)\"],vectorDisplacementAsPoint:[\"\\\\vectorDisplacementAsPoint(x_1)\"],vectorThreeDDisplacementAsPoint:[\"\\\\vectorThreeDDisplacementAsPoint(x_1)\"],basePointFromVector:[\"\\\\basePointFromVector(x_1)\"],basePointFromVectorThreeD:[\"\\\\basePointFromVectorThreeD(x_1)\"],circle:[\"\\\\circle(x_1,0)\",\"\\\\circle((0,0),x_1)\"],arc:[\"\\\\arc(x_1,(0,0),(0,0))\",\"\\\\arc((0,0),x_1,(0,0))\",\"\\\\arc((0,0),(0,0),x_1)\"],arcCenter:[\"(0/0,0/0)\"],arcOmega:[\"0/0\"],center:[\"\\\\center(x_1)\"],radius:[\"\\\\radius(x_1)\"],undirectedAngleMarker:[\"\\\\undirectedAngleMarker(x_1)\"],directedAngleMarker:[\"\\\\directedAngleMarker(x_1,0,0,0)\",\"\\\\directedAngleMarker((0,0),x_1,0,0)\",\"\\\\directedAngleMarker((0,0),0,x_1,0)\",\"\\\\directedAngleMarker((0,0),0,0,x_1)\"],directedCoterminalAngle:[\"\\\\directedCoterminalAngle(x_1)\"],undirectedCoterminalAngle:[\"\\\\undirectedCoterminalAngle(x_1)\"],supplement:[\"\\\\supplement(x_1)\"],directedAngleMarkerMultiplier:[\"\\\\directedAngleMarkerMultiplier(x_1)\"],undirectedAngleMarkerMultiplier:[\"\\\\undirectedAngleMarkerMultiplier(x_1)\"],directedAngleMarkerRawDelta:[\"\\\\directedAngleMarkerRawDelta(x_1)\"],undirectedAngleMarkerRawDelta:[\"\\\\undirectedAngleMarkerRawDelta(x_1)\"],polygonInteriorUndirectedAngles:[\"\\\\polygonInteriorUndirectedAngles(x_1)\"],polygonInteriorDirectedAngles:[\"\\\\polygonInteriorDirectedAngles(x_1)\"],lineFromSegment:[\"x_1\"],lineFromRay:[\"x_1\"],segmentGlider:[\"\\\\segmentGlider(x_1,y)\",\"\\\\{0<y<1:(\\\\segmentGlider(x,1)-\\\\segmentGlider(x,0))*x_1,(0,0)\\\\}\"],segmentThreeDGlider:[\"\\\\segmentThreeDGlider(x_1,y)\",\"\\\\{0<y<1:(\\\\segmentThreeDGlider(x,1)-\\\\segmentThreeDGlider(x,0))*x_1,(0,0,0)\\\\}\"],rayGlider:[\"\\\\rayGlider(x_1,y)\",\"\\\\{0<y:(\\\\rayGlider(x,1)-\\\\rayGlider(x,0))*x_1,(0,0)\\\\}\"],lineGlider:[\"\\\\lineGlider(x_1,y)\",\"(\\\\lineGlider(x,1)-\\\\lineGlider(x,0))*x_1\"],circleGlider:[\"\\\\circleGlider(x_1,y)\",\"2*\\\\pi*\\\\pointPerp(q-\\\\center(x))*x_1\"],arcGlider:[\"(0/0,0/0)\",\"(0/0,0/0)\"],polygonGlider:[\"(0/0,0/0)\",\"(0/0,0/0)\"],chooseNonIncidentPoint:[\"(0/0,0/0)\"],circleCircleIntersection:[\"(\\\\radius(x)*\\\\radius(x_1)+\\\\pointDot(\\\\center(x_1),(q-\\\\center(x))))/\\\\pointDot(\\\\pointPerp(q-\\\\center(y)),q-\\\\center(x))*\\\\pointPerp(q-\\\\center(y))\",\"(\\\\radius(y)*\\\\radius(x_1)+\\\\pointDot(\\\\center(x_1),(q-\\\\center(y))))/\\\\pointDot(\\\\pointPerp(q-\\\\center(x)),q-\\\\center(y))*\\\\pointPerp(q-\\\\center(x))\"],circleArcIntersection:[\"(0/0,0/0)\"],circleLineIntersection:[\"(\\\\radius(x)*\\\\radius(x_1)+\\\\pointDot(\\\\center(x_1),(q-\\\\center(x))))/\\\\pointDot((\\\\lineGlider(y,1)-\\\\lineGlider(y,0)),q-\\\\center(x))*(\\\\lineGlider(y,1)-\\\\lineGlider(y,0))\",\"(\\\\pointDet(\\\\lineGlider(x_1,0),\\\\lineGlider(y,1))+\\\\pointDet(\\\\lineGlider(y,0),\\\\lineGlider(x_1,1))-\\\\pointDet(q,\\\\lineGlider(x_1,1)-\\\\lineGlider(x_1,0)))/(\\\\pointDet(\\\\pointPerp(q-\\\\center(x)),\\\\lineGlider(y,1)-\\\\lineGlider(y,0)))*(\\\\pointPerp(q-\\\\center(x)))\"],arcCircleIntersection:[\"(0/0,0/0)\"],arcArcIntersection:[\"(0/0,0/0)\"],arcLineIntersection:[\"(0/0,0/0)\"],lineCircleIntersection:[\"(\\\\pointDet(\\\\lineGlider(x_1,0),\\\\lineGlider(x,1))+\\\\pointDet(\\\\lineGlider(x,0),\\\\lineGlider(x_1,1))-\\\\pointDet(q,\\\\lineGlider(x_1,1)-\\\\lineGlider(x_1,0)))/(\\\\pointDet(\\\\pointPerp(q-\\\\center(y)),\\\\lineGlider(x,1)-\\\\lineGlider(x,0)))*(\\\\pointPerp(q-\\\\center(y)))\",\"(\\\\radius(y)*\\\\radius(x_1)+\\\\pointDot(\\\\center(x_1),(q-\\\\center(y))))/\\\\pointDot((\\\\lineGlider(x,1)-\\\\lineGlider(x,0)),q-\\\\center(y))*(\\\\lineGlider(x,1)-\\\\lineGlider(x,0))\"],lineArcIntersection:[\"(0/0,0/0)\"],lineLineIntersection:[\"(\\\\pointDet(\\\\lineGlider(x_1,0),\\\\lineGlider(x,1))+\\\\pointDet(\\\\lineGlider(x,0),\\\\lineGlider(x_1,1))-\\\\pointDet(q,\\\\lineGlider(x_1,1)-\\\\lineGlider(x_1,0)))/(\\\\pointDet(\\\\lineGlider(y,1)-\\\\lineGlider(y,0),\\\\lineGlider(x,1)-\\\\lineGlider(x,0)))*(\\\\lineGlider(y,1)-\\\\lineGlider(y,0))\",\"(\\\\pointDet(\\\\lineGlider(x_1,0),\\\\lineGlider(y,1))+\\\\pointDet(\\\\lineGlider(y,0),\\\\lineGlider(x_1,1))-\\\\pointDet(q,\\\\lineGlider(x_1,1)-\\\\lineGlider(x_1,0)))/(\\\\pointDet(\\\\lineGlider(x,1)-\\\\lineGlider(x,0),\\\\lineGlider(y,1)-\\\\lineGlider(y,0)))*(\\\\lineGlider(x,1)-\\\\lineGlider(x,0))\"],parallel:[\"\\\\parallel(x_1,(0,0))\",\"\\\\parallel(\\\\line((0,0),(0,0)),x_1)\"],perpendicular:[\"\\\\perpendicular(x_1,(0,0))\",\"\\\\perpendicular(\\\\line((0,0),(0,0)),x_1)\"],scaleTangentSegment:[\"\\\\scaleTangentSegment(x_1, y)\",\"\\\\scaleTangentSegment(x, x_1)\"],scaleTangentLine:[\"\\\\scaleTangentLine(x_1, y)\",\"\\\\scaleTangentLine(x, x_1)\"],scaleTangentRay:[\"\\\\scaleTangentRay(x_1, y)\",\"\\\\scaleTangentRay(x, x_1)\"],scaleTangentCircle:[\"\\\\scaleTangentCircle(x_1, y)\",\"\\\\scaleTangentCircle(x, x_1)\"],scaleTangentArc:[\"\\\\scaleTangentArc(x_1, y)\",\"\\\\scaleTangentArc(x, x_1)\"],scaleTangentDirectedAngleMarker:[\"\\\\scaleTangentDirectedAngleMarker(x_1, y)\",\"\\\\scaleTangentDirectedAngleMarker(x, x_1)\"],scaleTangentUndirectedAngleMarker:[\"\\\\scaleTangentUndirectedAngleMarker(x_1, y)\",\"\\\\scaleTangentUndirectedAngleMarker(x, x_1)\"],addTangentSegment:[\"\\\\addTangentSegment(x_1, y)\",\"\\\\addTangentSegment(x, x_1)\"],addTangentSegmentThreeD:[\"\\\\addTangentSegmentThreeD(x_1, y)\",\"\\\\addTangentSegmentThreeD(x, x_1)\"],addTangentLine:[\"\\\\addTangentLine(x_1, y)\",\"\\\\addTangentLine(x, x_1)\"],addTangentRay:[\"\\\\addTangentRay(x_1, y)\",\"\\\\addTangentRay(x, x_1)\"],addTangentCircle:[\"\\\\addTangentCircle(x_1, y)\",\"\\\\addTangentCircle(x, x_1)\"],addTangentArc:[\"\\\\addTangentArc(x_1, y)\",\"\\\\addTangentArc(x, x_1)\"],addTangentDirectedAngleMarker:[\"\\\\addTangentDirectedAngleMarker(x_1, y)\",\"\\\\addTangentDirectedAngleMarker(x, x_1)\"],addTangentUndirectedAngleMarker:[\"\\\\addTangentUndirectedAngleMarker(x_1, y)\",\"\\\\addTangentUndirectedAngleMarker(x, x_1)\"],translation:[\"\\\\translation(x_1)\"],dilation:[\"\\\\dilation(x_1, y)\",\"\\\\dilation(x, x_1)\"],reflection:[\"\\\\reflection(x_1)\"],rotation:[\"\\\\rotation((0/0,0/0),0/0)\"],compose:[\"\\\\reflection(\\\\line((0/0,0/0),(0/0,0/0)))\",\"\\\\reflection(\\\\line((0/0,0/0),(0/0,0/0)))\"],inverse:[\"\\\\reflection(\\\\line((0/0,0/0),(0/0,0/0)))\"],transformPoint:[\"(0/0,0/0)\",\"(0/0,0/0)\"],transformSegment:[\"\\\\segment((0/0,0/0),(0/0,0/0))\",\"\\\\segment((0/0,0/0),(0/0,0/0))\"],transformVector:[\"\\\\vector((0/0,0/0),(0/0,0/0))\",\"\\\\vector((0/0,0/0),(0/0,0/0))\"],transformLine:[\"\\\\line((0/0,0/0),(0/0,0/0))\",\"\\\\line((0/0,0/0),(0/0,0/0))\"],transformRay:[\"\\\\ray((0/0,0/0),(0/0,0/0))\",\"\\\\ray((0/0,0/0),(0/0,0/0))\"],transformCircle:[\"\\\\circle((0/0,0/0),0/0)\",\"\\\\circle((0/0,0/0),0/0)\"],transformArc:[\"\\\\arc((0/0,0/0),(0/0,0/0),(0/0,0/0))\",\"\\\\arc((0/0,0/0),(0/0,0/0),(0/0,0/0))\"],transformPolygon:[\"\\\\polygon([])\",\"\\\\polygon([])\"],transformAngleMarker:[\"\\\\undirectedAngleMarker(directedAngleMarker([0/0,0/0],0/0,0/0,0/0))\",\"\\\\undirectedangleMarker(directedAngleMarker([0/0,0/0],0/0,0/0,0/0))\"],transformDirectedAngleMarker:[\"\\\\directedAngleMarker([0/0,0/0],0/0,0/0,0/0)\",\"\\\\directedangleMarker([0/0,0/0],0/0,0/0,0/0)\"],mean:[\"\\\\mean(x_1)\"],total:[\"\\\\total(x_1)\"],count:[\"0\"],var:[\"2*\\\\cov(x, x_1)\"],varp:[\"2*\\\\cov(x, x_1)*(\\\\count(x)-1)/\\\\count(x)\"],stdev:[\"\\\\cov(x, x_1)/q\"],stdevp:[\"\\\\covp(x, x_1)/q\"],mad:[\"\\\\mean(\\\\sign(x-\\\\mean(x))*(x_1 - \\\\mean(x_1)))\"],min:[\"x_1[\\\\argmin(x)]\"],max:[\"x_1[\\\\argmax(x)]\"],median:[\"0.5*(x_1[\\\\lowerQuantileIndex(x, 0.5)] + x_1[\\\\upperQuantileIndex(x, 0.5)])\"],argmin:[\"0/0\"],argmax:[\"0/0\"],gcd:[\"0/0\"],lcm:[\"0/0\"],erf:[\"\\\\frac{2x_1}{\\\\sqrt{\\\\pi }}\\\\exp(-x^2)\"],invNorm:[\"\\\\frac{x_1}{\\\\pdf(\\\\normaldist(0,1),q)}\"],logbase:[\"\\\\{x > 0: \\\\frac{x_1}{x*\\\\ln(y)} \\\\}\",\"\\\\frac{-q*x_1}{y*\\\\ln(y)}\"],nthroot:[\"x^{1/y - 1}/y*x_1\",\"-\\\\frac{q*\\\\ln(x)*x_1}{y^2}\"],hypot:[\"x_1*x/q\",\"x_1*y/q\"],polyGamma:[\"0/0\",\"\\\\polyGamma(1 + x, y)*x_1\"],mod:[\"\\\\{ q=0: 0/0, x_1 \\\\}\",\"\\\\{ \\\\mod(x/y, 1) > 0: -\\\\floor(x/y)*x_1 \\\\}\"],cov:[\"\\\\cov(x_1, y)\",\"\\\\cov(x, x_1)\"],covp:[\"\\\\covp(x_1, y)\",\"\\\\covp(x, x_1)\"],corr:[\"(\\\\cov(x_1, y) - (\\\\cov(x, y)*\\\\cov(x, x_1)/\\\\var(x)))/(\\\\stdevp(x)\\\\stdevp(y))\",\"(\\\\cov(x, x_1) - (\\\\cov(x, y)*\\\\cov(y, x_1)/\\\\var(y)))/(\\\\stdevp(x)\\\\stdevp(y))\"],spearman:[\"0/0\",\"0/0\"],quantile:[\"\\\\{ \\\\floor(y*(\\\\count(x)-1)) = y*(\\\\count(x)-1) :   x_1[\\\\upperQuantileIndex(x, y)],  (\\\\ceil(y*(\\\\count(x)-1)) - y*(\\\\count(x)-1))*x_1[\\\\lowerQuantileIndex(x, y)] +   (y*(\\\\count(x)-1) - \\\\floor(y*(\\\\count(x)-1)))*x_1[\\\\upperQuantileIndex(x, y)]\\\\}\",\"\\\\{ \\\\floor(y*(\\\\count(x)-1)) < y*(\\\\count(x)-1) :   (\\\\count(x)-1)*(x[\\\\upperQuantileIndex(x, y)] - x[\\\\lowerQuantileIndex(x, y)])*x_1\\\\}\"],quartile:[\"0.5*(x_1[\\\\lowerQuartileIndex(x, y)] + x_1[\\\\upperQuartileIndex(x, y)])\",\"0/0\"],tscore:[\"\\\\frac{\\\\sqrt{\\\\count(x)}(\\\\stdev(x)*\\\\mean(x_1)-(\\\\mean(x)-y)*\\\\frac{\\\\cov(x,x_1)}{\\\\stdev(x)})}{\\\\stdev(x)^2}\",\"-x_1*\\\\sqrt{\\\\count(x)}/\\\\stdev(x)\"],quartileIndex:[\"0/0\",\"0/0\"],upperQuartileIndex:[\"0/0\",\"0/0\"],lowerQuartileIndex:[\"0/0\",\"0/0\"],upperQuantileIndex:[\"0/0\",\"0/0\"],lowerQuantileIndex:[\"0/0\",\"0/0\"],nCr:[\"q*(\\\\polyGamma(0, 1 + x) - \\\\polyGamma(0, 1 + x - y))\",\"q*(\\\\polyGamma(0, 1 + x - y) - \\\\polyGamma(0, 1 + y))\"],nPr:[\"q*(\\\\polyGamma(0, 1 + x) - \\\\polyGamma(0, 1 + x - y))\",\"q*\\\\polyGamma(0, 1 + x - y)\"],arctan:[\"x_1*y/(y^2+x^2)\",\"-x_1*x/(y^2+x^2)\"],poissonpdf:[\"0/0\",\"x_1\\\\frac{\\\\exp(-y)(\\\\floor(x)-y)y^{(\\\\floor(x)-1)}}{(\\\\floor(x))!}\"],invPoisson:[\"0/0\",\"0/0\"],tpdf:[\"x_1*q*\\\\frac{-(y+1)*x}{y+x^2}\",\"x_1*\\\\frac{1}{2}q*(  \\\\frac{x^2-1}{y + x^2} + \\\\ln(\\\\frac{y}{y + x^2}) +   \\\\polyGamma(0, \\\\frac{1+y}{2}) - \\\\polyGamma(0, y/2))\"],invT:[\"x_1/\\\\pdf(\\\\tdist(y),q)\",\"0/0\"],tcdf:[\"-x_1*\\\\pdf(\\\\tdist(z),x)\",\"x_1*\\\\pdf(\\\\tdist(z),y)\",\"0/0\"],poissoncdf:[\"0/0\",\"0/0\",\"x_1\\\\sum _{n=\\\\max(0,\\\\floor(\\\\min(x,y)))}^{\\\\floor(\\\\max(x,y))}\\\\frac{\\\\exp(-z)(n-z)z^{(n-1)}}{n!}\"],normalpdf:[\"-x_1*\\\\frac{x-y}{z^2} q\",\"x_1*\\\\frac{x-y}{z^2} q\",\"x_1*(\\\\frac{(x-y-z)*(x-y+z)}{z^3}) q\"],binompdf:[\"0/0\",\"0/0\",\"\\\\{0<=z<=1: x_1*q*(\\\\frac{\\\\round(x)}{z}-\\\\frac{\\\\round(y)-\\\\round(x)}{1-z}), 0 \\\\}\"],invBinom:[\"0/0\",\"0/0\",\"0/0\"],uniformpdf:[\"0\",\"\\\\{y<=x: \\\\frac{x_1}{(z-y)^2}, 0\\\\}\",\"\\\\{z>=x: -\\\\frac{x_1}{(z-y)^2}, 0\\\\}\"],invUniform:[\"\\\\{y<=x<=z: x_1*(z-y), 0\\\\}\",\"\\\\{y<=x<=z: x_1*(1-x), 0\\\\}\",\"\\\\{y<=x<=z: x_1*x, 0\\\\}\"],normalcdf:[\"-x_1\\\\pdf(\\\\normaldist(z,u), x)\",\"x_1\\\\pdf(\\\\normaldist(z,u), y)\",\"-x_1*(\\\\pdf(\\\\normaldist(z,u), y) - \\\\pdf(\\\\normaldist(z,u), x))\",\"x_1*(  \\\\{\\\\abs(y)=1/0:0,\\\\frac{z-y}{u}\\\\pdf(\\\\normaldist(z,u),y)\\\\} -   \\\\{\\\\abs(x)=1/0:0,\\\\frac{z-x}{u}\\\\pdf(\\\\normaldist(z,u),x)\\\\})\"],binomcdf:[\"0/0\",\"0/0\",\"0/0\",\"\\\\{0<=u<=1: x_1*\\\\sum _{n=\\\\max(0,\\\\round(\\\\min(x,y)))}^{\\\\round(\\\\max(x,y))}(  \\\\pdf(\\\\binomialdist(z,u),n)*(\\\\frac{n}{u}-\\\\frac{\\\\round(z)-n}{1-u})), 0 \\\\}\"],uniformcdf:[\"\\\\{z>u: 0/0, -x_1\\\\pdf(\\\\uniformdist(z,u), x)\\\\}\",\"\\\\{z>u: 0/0, x_1\\\\pdf(\\\\uniformdist(z,u), y)\\\\}\",\"\\\\{z>u: 0/0, x_1*(\\\\frac{\\\\{z<x<u:u-x,0\\\\} + \\\\{z<y<u:y-u,0\\\\}}{(u-z)^2})\\\\}\",\"\\\\{z>u: 0/0, x_1*(\\\\frac{\\\\{z<x<u:x-z,0\\\\} + \\\\{z<y<u:z-y,0\\\\}}{(u-z)^2})\\\\}\"],normalSample:[\"0/0\",\"0/0\",\"0/0\"],uniformSample:[\"0/0\",\"0/0\",\"0/0\"],tSample:[\"0/0\",\"0/0\"],poissonSample:[\"0/0\",\"0/0\"],binomSample:[\"0/0\",\"0/0\",\"0/0\"],rgb:[\"0/0\",\"0/0\",\"0/0\"],hsv:[\"0/0\",\"0/0\",\"0/0\"],polygon:[\"\\\\polygon(x_1)\"],area:[\"0/0\"],perimeter:[\"0/0\"],vertices:[\"\\\\vertices(x_1)\"],segments:[\"\\\\segments(x_1)\"],validateRangeLength:[\"0\",\"0\",\"0\",\"\\\\{q \\\\ge 1: x_1, 0\\\\}\"],validateSampleCount:[\"\\\\{x<0:0,1\\\\}*x_1\"],select:[\"\\\\select(x_1, y)\",\"0*q\"],shuffle:[\"0*y\",\"\\\\shuffle(x, x_1)\"],sortPerm:[\"0*x\"],elementsAt:[\"\\\\elementsAt(x_1, y)\",\"0*q\"],uniquePerm:[\"0*q\"],tone:[\"\\\\tone(x_1,0)\",\"\\\\tone(0,x_1)\"],restriction:[\"0\"],restrictionToBoolean:[\"0\"]},GO={};for(let e in VO){let t=e,r=VO[t],n=[];for(let i=0;i<r.length;i++){let s=r[i];n.push(Ns(s,{}))}GO[t]=n}function BO(e,t){e.map.length=Math.min(e.map.length,t),e.maxValidReference=Math.min(e.maxValidReference,t-1)}function zO(e,t,r){let n=e.argNames.indexOf(t);if(n===-1){let o=e.getInstruction(r);return o.type===1&&o.valueType===I&&isNaN(k(o.value))?ca():Xs()}let i=Ni(e,n,{allowRestriction:!0,allowClosedBlockReferences:!1}),s=zV(i);return Ra(s,r)}function zV(e){let{chunk:t,mask:r}=e;return{chunk:t,mask:r,orderCtx:e,domainTable:[]}}function Ra(e,t){let{domainTable:r}=e,n=r[t];if(n!==void 0)return n;let i=HV(e,t);return r[t]=i,i}function HV(e,t){let{chunk:r,mask:n,orderCtx:i}=e,s=r.getInstruction(t);if(Me(s)){if(s.type===1){if(s.valueType==I){if(isNaN(k(s.value)))return ca()}else if(s.valueType===ie){for(let o of s.value)if(isNaN(k(o)))return In()}}return Xs()}switch(s.type){case 31:return K0(Ra(e,s.args[0]),Ra(e,s.args[1]));case 32:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 47:case 48:case 15:case 17:case 16:case 18:case 37:case 42:case 21:case 22:case 23:case 24:case 19:case 20:case 39:case 40:case 41:case 44:case 49:case 50:case 51:{let o=Xs();for(let a of s.args)o=qn(o,Ra(e,a));return o}case 38:{if(!n[t])return Xs();let o=Ra(e,s.args[0]);if(o.type!==\"known\")return In();for(let a=1;a<s.args.length;a++){let u=Ra(e,s.args[a]);if(u.type!==\"known\")return In();if(u.bounds[0]!==o.bounds[0]||u.bounds[1]!==o.bounds[1])return In()}return o}case 25:return n[t]?In():Xs();case 33:{let o=r.getInstruction(s.args[2]);return o.type!==1||o.valueType!==I||!isNaN(k(o.value))?In():qn(Ra(e,s.args[0]),Ra(e,s.args[1]))}case 26:case 27:case 28:case 29:{if(!n[t])return Xs();if(Mr(i,t)>1)return In();let o=e.coefficientCtx;o===void 0&&(o=Ss(i),e.coefficientCtx=o);let a=o.newChunk,u=_r(o,t),[c,l]=u;if(!vt(a.getInstruction(c)))return In();let p=rr(a,c);if(isNaN(p))return ca();let f=Xs();for(let d of s.args)f=qn(f,Ra(e,d));if(l===void 0)return s.type===28||s.type===29?p>=0?f:ca():p>0?f:ca();{let d=rr(a,l);return qn(f,Mc(p,d))}}}}function UO(e){let t=[],r=[];for(let n=0;n<e.argNames.length;n++){let i=[],s=[];for(let o=0;o<e.argNames.length;o++)i.push(e.argTypes[o]===I),s.push(n===o);r.push(s),t.push(i)}for(let n=e.argNames.length;n<=e.getReturnIndex();n++)r.push(UV(e,r,n)),t.push(qV(e,r,t,n));return t[e.getReturnIndex()]}function UV(e,t,r){let n=e.getInstruction(r),i=kV(e.argNames.length);if(Me(n))return i;for(let s of n.args){let o=t[s];for(let a=0;a<o.length;a++)i[a]=i[a]||o[a]}return i}function qV(e,t,r,n){let i=e.getInstruction(n);if(Me(i))return HO(e.argNames.length);switch(i.type){case 8:case 9:case 14:case 38:{let a=HO(e.argNames.length);for(let u=0;u<i.args.length;u++){let c=r[i.args[u]];for(let l=0;l<c.length;l++)a[l]=a[l]&&c[l]}return a}case 11:{let a=[],u=r[i.args[0]],c=t[i.args[1]];for(let l=0;l<u.length;l++)a.push(u[l]&&!c[l]);return a}case 10:{let a=r[i.args[0]].slice(),u=r[i.args[1]].slice(),c=t[i.args[0]],l=t[i.args[1]],p=0,f=0;for(let d=0;d<a.length;d++){let g=a[d]&&!l[d],m=u[d]&&!c[d];a[d]=g,u[d]=m,g&&(p+=1),m&&(f+=1)}return p>=f?a:u}case 33:{let a=t[i.args[0]],u=r[i.args[1]],c=r[i.args[2]];for(var s=[],n=0;n<a.length;n++)s.push(!a[n]&&u[n]&&c[n]);return s}case 39:case 40:case 41:{let a=r[i.args[0]],u=t[i.args[1]],c=[];for(var n=0;n<u.length;n++)c.push(a[n]&&!u[n]);return c}case 48:{let a=i.args[0],u=e.getInstruction(a),c=n-a;return r[u.args[c]]}case 15:case 17:case 16:case 18:case 12:case 13:case 26:case 28:case 27:case 29:case 25:case 32:case 31:case 37:case 42:case 21:case 22:case 19:case 20:case 23:case 24:case 47:case 44:case 49:case 50:case 51:{let a=t[n],u=[];for(let c of a)u.push(!c);return u}default:let o=i;throw new Error(`Unexpected opcode ${o.type}`)}}function kV(e){let t=[];for(let r=0;r<e;r++)t.push(!1);return t}function HO(e){let t=[];for(let r=0;r<e;r++)t.push(!0);return t}function kO(e){let t=e.getInstruction(e.getReturnIndex());if(t.type!==48)return e;let r=t.args[0],n=e.getReturnIndex()-r,i=e.getInstruction(r),s=i.args[0],o=i.args[n],a=[],u=[];a.push(s);let c=ro(e,e.getReturnIndex(),\"Programming error: cannot optimize regression on non-constant-length list\");u.push({min:1,max:c,length:c});let l=!1,p=!1;for(let E=s+1;E<=o;E++){let T=e.getInstruction(E);if(T.type===39||T.type===41||T.type===40){if(T.args[1]!==s)continue;let M=T.args[0];if(e.getInstruction(M).valueType!==ie||!vt(e.getInstruction(M)))continue;let O=rr(e,M),S=ZV(O);if(!isFinite(S.min)||!isFinite(S.max))continue;a.push(E),u.push(S)}else qO(T)?l=!0:(T.type===12||T.type===13)&&(p=!0)}if(a.length===0||!p&&!l)return e;let f=[],d=[];for(let E=0;E<e.argNames.length;E++)d.push(E),f.push(Xs());let g=[],m=[];for(let E=0;E<=o;E++)g.push(rI(e,d,g,E)),m.push(rI(e,a,m,E));for(let E=0;E<=o;E++){let T=e.getInstruction(E);if(T.type===33){let M=g[E];for(let O=0;O<M.length;O++)M[O]&&(f[O]=In())}else if(T.type===12||T.type===13){let M=!1,O=!1;for(let re=0;re<a.length;re++)m[T.args[0]][re]&&(M=!0),m[T.args[1]][re]&&(O=!0);if(M||!O)continue;let S=g[T.args[0]],C=0,A;for(let re=0;re<S.length;re++)S[re]&&(A=re,C+=1);if(C!==1||A===void 0)continue;let L=d[A],Z=Ni(e.copy().reopenFinalBlock(),L,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Mr(Z,T.args[0])!==1)continue;let w=Ss(Z),[z,F]=_r(w,T.args[0]);if(F===void 0)continue;let X=rr(w.newChunk,F),ee=rr(w.newChunk,z);f[A]=qn(f[A],Mc(ee,X))}}if(l){let E=e.copy().reopenFinalBlock();for(let T=0;T<a.length;T++){let M=Ni(E,a[T],{allowRestriction:!1,allowClosedBlockReferences:!1}),O=Ss(M);for(let S=s+1;S<=o;S++){let C=E.getInstruction(S);if(qO(C)){let A=C.args[0];if(Mr(M,A)!==1)continue;let L=_r(O,A)[1];if(L===void 0)continue;let Z=XV(O.newChunk,L),w,z=0;for(let se=0;se<Z.length;se++)Z[se]&&(w=se,z+=1);if(z!==1||w===void 0)continue;let F=Ni(O.newChunk,w,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Mr(F,L)!==1)continue;let X=Ss(F),[ee,re]=_r(X,L);if(re===void 0||!vt(X.newChunk.getInstruction(ee))||!vt(X.newChunk.getInstruction(re)))continue;let Oe=rr(X.newChunk,ee),$=rr(X.newChunk,re),Ze=(u[T].max-u[T].min)/Math.min(u[T].length-1,31),xe=Math.PI/Ze;if(!isFinite(xe)||xe<=0)continue;f[w]=qn(f[w],Mc(Oe,$)),f[w]=qn(f[w],Mc(xe-Oe,-$))}}}}let b=!1;for(let E of f){if(E.type!==\"known\")return e;(E.bounds[0]!==-1/0||E.bounds[1]!==1/0)&&(b=!0)}if(!b)return e;let y=e.copy(),h=e.getReturnIndex(),x=y.Constant(1),P=y.Constant(NaN);for(let E=0;E<y.argNames.length;E++)h=YV(y,f[E],h,E,x,P);return y.close(),y}function YV(e,t,r,n,i,s){if(t.type!==\"known\"||t.bounds[0]===-1/0&&t.bounds[1]===1/0)return r;let o=e.And([e.LessEqual([e.Constant(t.bounds[0]),n]),e.LessEqual([n,e.Constant(t.bounds[1])])]);return e.Multiply([r,e.Piecewise([o,i,s])])}function XV(e,t){let r=[];for(let i=0;i<e.argNames.length;i++)r.push(i);let n=[];for(let i=0;i<=t;i++)n.push(rI(e,r,n,i));return n[t]}function qO(e){return e.type===37&&(e.symbol===\"sin\"||e.symbol===\"cos\")}function ZV(e){var t=1/0,r=-1/0,n=e.length;for(let i of e)t=Math.min(t,i),r=Math.max(r,i);return{min:t,max:r,length:n}}function rI(e,t,r,n){let i=e.getInstruction(n),s=$V(t.length);for(let o=0;o<t.length;o++)if(t[o]===n)return s[o]=!0,s;if(Me(i))return s;for(let o of i.args){let a=r[o];for(let u=0;u<a.length;u++)s[u]=s[u]||a[u]}return s}function $V(e){let t=[];for(let r=0;r<e;r++)t.push(!1);return t}function YO(e){let t=e.getInstruction(e.getReturnIndex());if(Me(t))return e.getReturnIndex();let r=TT(e,t),n=r.expectedTypes,i=nI(e,t.args,[n]);if(r.isReducerWithNoListArgs){let s=WV(e,i.didCoerce?i.args:t.args),o=Ln(r.expectedTypes.rest);if($s(s,o)){i.didCoerce||e.popInstruction();let a=e.List(t.args);return e.copyInstructionWithArgs(t,[a])}}else i.didCoerce&&e.copyInstructionWithArgs(t,i.args);return e.getReturnIndex()}function nI(e,t,r){let n=!1,i=[];for(let s=0;s<t.length;s++){let o=Py(r,s),a=t[s],u=e.getInstruction(a).valueType,c=a;o.every(l=>!$s(u,l))&&ne(o[0],I)&&(c=pc(e,a)),c!==a&&(n=!0),i.push(c)}return n?{didCoerce:n,args:i}:{didCoerce:!1}}function pc(e,t){let r=e.getInstruction(t);return r.valueType===Be?t:ne(r.valueType,Ne)?ZO(e,t):ne(r.valueType,Te)?XO(e,t):ne(r.valueType,Ot)?e.Piecewise([e.SyntheticNativeFunction(\"restrictionToBoolean\",[t]),e.Constant(1),e.Constant(NaN)]):t}function WV(e,t){let r=e.getInstruction(t[0]).valueType;if(!qi(r))return er;for(let n of t)if(e.getInstruction(n).valueType!==r)return er;return Ln(r)}function As(e){var t=e;if(t&&typeof t.toJSON==\"function\"&&(t=t.toJSON()),!t||typeof t!=\"object\")return t;if(Array.isArray(t))return t.map(As);var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=As(t[n]));return r}function $O(e,t){let r=[],n=[],i=[];for(let o=0;o<e.argNames.length;o++)t.hasOwnProperty(e.argNames[o])||(r.push(e.argNames[o]),n.push(e.argTypes[o]));let s=new Wo({argNames:r,argTypes:n});for(let o=0,a=0;o<e.argNames.length;o++)t.hasOwnProperty(e.argNames[o])?i[o]=s.ConstantOfType(e.argTypes[o],t[e.argNames[o]]):(i[o]=a,a+=1);for(let o=e.argNames.length;o<e.instructionsLength();o++){let a=e.getInstruction(o);if(Me(a))i.push(Os(s,a));else{let u=[];for(let c of a.args)u.push(i[c]);i.push(gr(s,a,u))}}return s}function yu(e,t){if(t.type!==33)return!1;let r=e.getInstruction(t.args[2]);return r.type===1&&Wc(r.valueType)&&jE(r.valueType,r.value)||yu(e,r)&&WO(e,t.args[1])&&WO(e,r.args[1])}function iI(e,t){let r=[];for(;t.type===33;)r.push(t.args[0]),t=e.getInstruction(t.args[2]);return r}function By(e,t){return e.getInstruction(t).type===25}function JO(e,t){let r=e.getInstruction(t);if(r.type!==25)return;let n=r.args[0],i=r.args[1],s=e.getInstruction(n),o=e.getInstruction(i);return s.type===2&&(vt(o)||tT(o))&&ne(o.valueType,I)?{type:\"constant\",variable:e.argNames[n],index:i}:ne(s.valueType,I)&&ne(o.valueType,I)?{type:\"implicit\",index:e.Subtract([n,i])}:void 0}function WO(e,t){let r=e.getInstruction(t);return r.type===1&&r.valueType===I&&k(r.value)===1}var sI=class{constructor(t,r,n,i){this.openChunk=t;this.returnIndex=r;this.restrictionIndex=n;this.slices=i}getSliceVariablesOrImplicit(){return this.slices.map(t=>t.type===\"constant\"?t.variable:\"_implicit\")}getValueAndRestrictionChunk(){let t=[];for(let i of this.slices)if(i.type===\"constant\"){let s=this.openChunk.getInstruction(i.index);if(vt(s)&&s.valueType===I)t.push({type:\"constant\",variable:i.variable,value:k(s.value)});else throw Go()}else if(this.openChunk.getInstruction(i.index).valueType===I){let o=this.openChunk.copy();o.setReturnIndex(i.index),o.close(),t.push({type:\"implicit\",sliceChunk:o})}else throw Go();let r=this.openChunk.copy();r.setReturnIndex(this.returnIndex),r.close();let n;return this.restrictionIndex!==void 0&&(n=this.openChunk.copy(),n.setReturnIndex(this.restrictionIndex),n.close()),{valueChunk:r,restrictionChunk:n,slices:t}}};function jo(e,t,r){var c,l;let n=new Wo({argNames:e.argNames,argTypes:e.argTypes}),i={produceNumbers:(c=r==null?void 0:r.produceNumbers)!=null?c:!1,allowSlices:(l=r==null?void 0:r.allowSlices)!=null?l:!1},s=i.produceNumbers?n.Constant(1/0):n.ConstantOfType(ge,!0),o=QV(e);e3(e,o,t);let a=Q(q({},i),{chunk:e,newChunk:n,peelable:o,oldIPtoNewIP:[],oldIPToRestriction:[],startTrue:s,slices:[]});jO(a,0,e.instructionsLength()-1);let u=a.oldIPToRestriction[e.getReturnIndex()];return new sI(a.newChunk,a.oldIPtoNewIP[e.getReturnIndex()],s===u?void 0:u,a.slices)}function jO(e,t,r){let{chunk:n,newChunk:i,peelable:s,oldIPtoNewIP:o,oldIPToRestriction:a}=e;for(let u=t;u<=r;u++){let c=n.getInstruction(u);if(s[u]&&(c.type===19||c.type===23))u=jV(e,u);else if(c.type===2)o[u]=u,a[u]=e.startTrue;else if(Me(c))o[u]=i.copyInstruction(c),a[u]=e.startTrue;else if(s[u]&&yu(n,c)){o[u]=o[c.args[1]];let l=t3(e,c);a[u]=oI(e,c.args.map(p=>a[p]).concat(l))}else o[u]=i.copyInstructionWithArgs(c,c.args.map(l=>o[l])),a[u]=oI(e,c.args.map(l=>a[l]))}}function oI(e,t){let n=[...new Set(t)].filter(i=>!QO(e,i));return n.length?aI(e,n).reduce((i,s)=>e.produceNumbers?e.newChunk.SyntheticNativeFunction(\"min\",[i,s]):e.newChunk.And([i,s])):e.startTrue}function JV(e,t){let r=[...new Set(t)];return r.some(n=>!QO(e,n))?aI(e,r).reduce((n,i)=>e.produceNumbers?e.newChunk.SyntheticNativeFunction(\"max\",[n,i]):e.newChunk.Or([n,i])):e.startTrue}function aI(e,t){if(!e.produceNumbers)return t;let r=e.newChunk;return t.map(n=>{let i=r.getInstruction(n);if(i.valueType!==ge)return n;switch(i.type){case 27:case 29:return r.Subtract([i.args[0],i.args[1]]);case 26:case 28:return r.Subtract([i.args[1],i.args[0]]);case 25:throw te(\"convertBoolsToNums on an equality.\");case 32:return r.SyntheticNativeFunction(\"min\",aI(e,i.args));case 1:return r.Constant(i.value?1/0:-1/0);default:throw te(\"convertBoolsToNums on a non-opcode condition.\")}})}function QO({newChunk:e},t){let r=e.getInstruction(t);return r.type===1&&(r.valueType===I&&r.value===1/0||r.valueType===ge&&r.value)}function jV(e,t){let{chunk:r,newChunk:n,oldIPtoNewIP:i,oldIPToRestriction:s,startTrue:o}=e,a=r.getInstruction(t),u=a.endIndex,c=r.getInstruction(u),l,p;if(a.type===23)i[t]=n.copyInstructionWithArgs(a,[i[a.args[0]]]),s[t]=o,p=t+1;else{let m=a.args.map(b=>i[b]);m.push(o),i[t]=n.copyInstructionWithArgs(a,m),s[t]=o;for(let b=2;b<a.args.length;b++){let y=t+b-1;i[y]=n.copyInstructionWithArgs(r.getInstruction(y),[i[t]]),s[y]=o}l=n.BlockVar(e.produceNumbers?I:ge,[i[t]]),p=t+a.args.length-1}jO(e,p,u-1);let f=c.args.map(m=>i[m]),d=e.slices.filter(m=>p<=m.index&&m.index<u),g=l;if(a.type===19){if(l===void 0)throw new Error(\"Expected restrictionAccumVar to be defined\");g=oI(e,[l,s[c.args[1]]]),f.push(g)}else{f.push(s[c.args[1]]);for(let m of d)f.push(m.index)}i[u]=n.copyInstructionWithArgs(c,f),s[u]=o;for(let m=1;m<c.args.length;m++)i[u+m]=n.copyInstructionWithArgs(r.getInstruction(u+m),[i[u]]);if(a.type===23){let m=n.BroadcastResult(e.produceNumbers?I:ge,[i[u]]);for(let b of d)b.index=n.BroadcastResult(I,[i[u]]);for(let b=1;b<c.args.length;b++)s[u+b]=m}else{let m=n.BlockVar(e.produceNumbers?I:ge,[i[u]]);l===g&&(m=o);for(let b=1;b<c.args.length;b++)s[u+b]=m}return u+c.args.length-1}function QV(e){let t=[];for(let n=0;n<e.instructionsLength();n++)t.push(!1);t[e.getReturnIndex()]=!0;let r=e.instructionsLength()-1;for(let n=r;n>=0;n--){if(!t[n])continue;let i=e.getInstruction(n);if(!Me(i))for(let s of KV(e,i))t[s]=!0}return t}function KV(e,t){switch(t.type){case 14:case 8:case 9:case 26:case 28:case 27:case 29:case 10:case 11:case 12:case 13:case 25:case 32:case 15:case 16:case 38:case 47:case 19:case 39:case 40:case 41:case 23:case 24:case 48:case 50:return t.args;case 33:return yu(e,t)?iI(e,t).concat([t.args[1]]):[];case 37:{let n=yr[t.symbol];return n.noPeel?[]:n.tag===\"reducer\"||n.tag===\"doubleReducer\"||n.tag===\"never-broadcast\"||n.tag===\"parameterizedReducer\"?t.args.filter(i=>e.getInstruction(i).type!==48):t.args}case 20:return t.args.slice(1);case 51:return[];case 31:return[];case 17:case 18:case 42:case 21:case 22:case 44:case 49:return[];default:let r=t;throw new Error(`Unexpected opcode ${r.type}`)}}function e3(e,t,r){let n=[];for(let i=0;i<e.argNames.length;i++){let s=e.argNames[i];r.indexOf(s)<0&&n.push(i)}for(let i of n){let s=nu(e,i);for(let o=0;o<e.instructionsLength();o++)t[i]&&(t[i]=!s[o])}}function t3(e,t){let r=iI(e.chunk,t).map(n=>e.oldIPtoNewIP[n]);if(e.allowSlices&&r.length===1){let n=JO(e.newChunk,r[0]);if(n)return e.slices.push(n),e.startTrue}if(r.some(n=>By(e.newChunk,n)))throw Go();return JV(e,r)}var Wo=class e{constructor(t){this.derivativeMaps={};if(this.instructions=[],this.blockMask=[],this.comments=[],t.argNames.length!==t.argTypes.length)throw new Error(\"Programming Error: length of argNames must match length of argTypes\");this.argNames=t.argNames,this.argTypes=t.argTypes;for(let r=0;r<this.argTypes.length;r++){let n=this.argTypes[r];this.LoadArg(n)}this.returnIndex=this.Constant(NaN)}setError(t){this.error=t}getError(){return this.error}getReturnIndex(){return this.returnIndex}setReturnIndex(t){if(!(0<=t&&t<this.instructions.length))throw new Error(`Programming Error: out of bounds return index ${t}`);this.returnIndex=t}addComments(t){for(let r in t){let n=this.comments[r]||\"\";this.comments[r]=n+t[r]}return this}instructionsLength(){return this.instructions.length}getInstruction(t){return this.instructions[t]}popInstruction(){this.truncate(this.instructions.length-1)}truncate(t){this.instructions.length=Math.min(t,this.instructions.length),this.blockMask.length=Math.min(t,this.blockMask.length),this.comments.length=Math.min(t,this.comments.length);for(let r in this.derivativeMaps)+r>=t?delete this.derivativeMaps[r]:BO(this.derivativeMaps[r],t);this.setReturnIndex(this.instructions.length-1)}pushInstructionChecked(t){if(this.instructions.length>=32768)throw rb();this.instructions.push(t),this.setReturnIndex(this.instructions.length-1)}pushLeafInstruction(t){return this.pushInstructionChecked(t),this.getReturnIndex()}pushInstruction(t){return this.checkInstructionArguments(t),this.pushInstructionChecked(t),this.setReturnIndex(Dv(this)),this.setReturnIndex(Rv(this)),this.setReturnIndex(YO(this)),Ev(this,this.getReturnIndex()),this.returnIndex===this.instructions.length-1&&this.setReturnIndex(bv(this)),this.getReturnIndex()}checkInstructionArguments(t){for(let r of t.args)if(this.blockMask[r])throw new Error(\"Programming Error: cannot reference an instruction in a closed block\")}markClosedBlock(t,r){for(let n=t;n<r;n++)this.blockMask[n]=!0}LoadArg(t){return this.pushLeafInstruction({type:2,valueType:t})}BlockVar(t,r){return this.pushInstruction({type:47,valueType:t,args:r})}SymbolicVar(t,r){return this.pushLeafInstruction({type:3,valueType:t,symbol:r})}BroadcastResult(t,r){let n=r[0],i=this.instructions[n],s=i.args[0],o=this.instructions.length-n,a=i.args[o],u=!fy(this,a,s),l=this.getInstruction(s).args[0],p=this.getInstruction(l);return this.pushInstruction({type:48,valueType:t,args:r,isConstantBroadcast:u,constantLength:vt(p)?rr(this,l):void 0})}Constant(t){return this.ConstantOfType(I,t)}ConstantOfType(t,r){if(typeof r==\"number\"&&(r=Ve(r,1)),W(t)&&r.length>1e4)throw ep();return this.pushLeafInstruction({type:1,valueType:t,value:r})}NanOfType(t){if(t===at){let r=this.Constant(NaN);return this.Distribution(\"uniformdist\",[r,r])}else return this.ConstantOfType(t,ki(t))}Add(t){let r=8,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Subtract(t){let r=9,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Multiply(t){let r=10,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Divide(t){let r=11,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Exponent(t){let r=12,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}RawExponent(t){let r=13,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Negative(t){let r=14,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Equal(t){let r=25,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Less(t){let r=26,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Greater(t){let r=27,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}LessEqual(t){let r=28,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}GreaterEqual(t){let r=29,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Or(t){let r=31,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}And(t){let r=32,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Piecewise(t){let r=33,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}OrderedPair(t){let r=15,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}OrderedPairAccess(t){let r=17,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}OrderedTriple(t){let r=16,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}OrderedTripleAccess(t){let r=18,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}List(t){let r=38,n=Qt(this,r,t);if(t.length>1e4)throw ep();return this.pushInstruction({type:r,valueType:n,args:t})}ListAccess(t){let r=39,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}DeferredListAccess(t){let r=40,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}InboundsListAccess(t){let r=41,n=Qt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}NativeFunction(t,r,n){let i=37,s=yr[t].returnType,o=typeof s==\"function\"?s(n.map(a=>this.getInstruction(a).valueType)):s;return this.pushInstruction({type:i,valueType:o,args:n,symbol:t,callData:r})}SyntheticNativeFunction(t,r){let n=37,i=yr[t].returnType,s=typeof i==\"function\"?i(r.map(a=>this.getInstruction(a).valueType)):i,o={errorSymbol:t,providedArity:r.length,isDotCall:!1};return this.pushInstruction({type:n,valueType:s,args:r,symbol:t,callData:o})}Distribution(t,r){let n=42,i=at;return this.pushInstruction({type:n,valueType:i,args:r,symbol:t})}BeginIntegral(t,r){let n=21,i=Qt(this,n,[]);return this.pushInstruction({type:n,valueType:i,args:r,endIndex:-1,callData:t})}EndIntegral(t){let r=22,n=Qt(this,r,t),i=t[0],s=this.getInstruction(i);this.instructions[i]={type:s.type,valueType:s.valueType,args:s.args,endIndex:this.instructionsLength(),callData:s.callData};let o=this.pushInstruction({type:r,valueType:n,args:t});return this.markClosedBlock(i,o),o}BeginBroadcast(t,r){let n=23,i=Qt(this,n,[]),s=this.getInstruction(t[0]);if(vt(s)&&rr(this,t[0])>1e4)throw ep();return this.pushInstruction({type:n,valueType:i,endIndex:-1,args:t,listComprehensionCallData:r})}EndBroadcast(t){let r=24,n=Qt(this,r,t),i=t[0],s=this.getInstruction(i),o={type:s.type,valueType:s.valueType,args:s.args,endIndex:this.instructionsLength()};this.instructions[i]=o;let a=this.pushInstruction({type:r,valueType:n,args:t});return this.markClosedBlock(i,a),a}BeginLoop(t,r){let n=19,i=Qt(this,n,r);return this.pushInstruction({type:n,valueType:i,args:r,endIndex:-1,callData:t})}EndLoop(t){let r=20,n=Qt(this,r,t),i=t[0],s=this.getInstruction(i);this.instructions[i]={type:s.type,valueType:s.valueType,args:s.args,endIndex:this.instructionsLength(),callData:s.callData};let o=this.pushInstruction({type:r,valueType:n,args:t});return this.markClosedBlock(i,o),o}BeginMap(t,r){let n=50,i=Qt(this,n,r);return this.pushInstruction({type:n,valueType:i,args:r,endIndex:-1,callData:t})}EndMap(t){let r=51,n=Qt(this,r,t),i=t[0],s=this.getInstruction(i);this.instructions[i]={type:s.type,valueType:s.valueType,args:s.args,endIndex:this.instructionsLength(),callData:s.callData};let o=this.pushInstruction({type:r,valueType:n,args:t});return this.markClosedBlock(i,o),o}ExtendSeed(t,r){let n=44,i=ot;return this.pushInstruction({type:n,valueType:i,args:r,tag:t})}Noop(){let t=0,r=Vt;return this.pushLeafInstruction({type:t,valueType:r})}Action(t,r){return this.pushInstruction({type:49,valueType:Ke,args:r,symbols:t})}replaceInstructionWithConstant(t,r){this.instructions[t]=r,this.blockMask[t]=void 0}replaceInstructionWithBlockVar(t,r){this.instructions[t]=r}reopenFinalBlock(){let t=this.getInstruction(this.getReturnIndex());if(t.type!==48)return this;let r=t.args[0],i=this.getInstruction(r).args[0];for(let s=i;s<r;s++)this.blockMask[s]=void 0;return this.truncate(r),this}reopenAllBlocks(){this.blockMask=[]}isInClosedBlock(t){return!!this.blockMask[t]}copy(){let t=new e({argNames:this.argNames,argTypes:this.argTypes});return t.instructions=this.instructions.slice(),t.blockMask=this.blockMask.slice(),t.comments=this.comments.slice(),t.derivativeMaps=As(this.derivativeMaps),t.setReturnIndex(this.getReturnIndex()),t}close(){return this.setReturnIndex(Br(this,this.getReturnIndex())),Mv(this),this}copyInstruction(t){return Os(this,t)}copyInstructionWithArgs(t,r){return gr(this,t,r)}replaceInstructionWithNoop(t){this.instructions[t]={type:0,valueType:Vt}}getReturnType(){return this.instructions[this.getReturnIndex()].valueType}isConstant(){return vt(this.instructions[this.getReturnIndex()])}asValue(){return rr(this,this.getReturnIndex())}asCompilerValue(){let t=this.instructions[this.getReturnIndex()];switch(t.type){case 1:return t.value;default:throw new Error(`Unexpected opcode ${t.type}.`)}}getConstantListLength(){return fr(this,this.getReturnIndex())}getListLengthDependencies(){let t=this.copy(),r=Sn(t,t.getReturnIndex());return Wn(t,r)}elementAt(t){let r=this.copy(),n=r.getReturnIndex();return r.setReturnIndex(Hp(r,n,t)),r.close(),r}substituteConstantArguments(t){return $O(this,t)}interpretWithParameters(t){return pv(this,this.getReturnIndex(),t)}getCompiledFunction(t){let r;if(t){r=t.slice();for(let s of this.argNames)r.indexOf(s)===-1&&r.push(s)}else r=this.argNames;let{source:n,constants:i}=Em(this);return{args:r,source:n,constants:i,fn:Vp(r,n,i)}}getRestrictedFunctionForGLSL(t){let r=jo(this,t,{allowSlices:!0}),{restrictionChunk:n,valueChunk:i}=r.getValueAndRestrictionChunk(),s;if(n!==void 0)try{s=zo(n)}catch(o){}return s===void 0&&r.getSliceVariablesOrImplicit().length==0?{concrete:new cr(this),restriction:void 0}:{concrete:new cr(i),restriction:s}}getCapFunction(t){let{restrictionChunk:r,valueChunk:n}=jo(this,t,{produceNumbers:!0}).getValueAndRestrictionChunk();if(r!==void 0)return{concrete:new cr(r),restriction:zo(n)}}polynomialOrder(t,r){return Ov(this,t,r)}getPolynomialCoefficients(t){return Sv(this,t)}takeDerivative(t){let r=this.argNames.indexOf(t);return r===-1?this.Constant(0):this.setReturnIndex(gl(this,this.getReturnIndex(),r)),this}gradient(t){let r=[],n=this.getReturnIndex();for(let i of t){let s=this.argNames.indexOf(i);s===-1?r.push(this.Constant(0)):r.push(gl(this,n,s))}return this.List(r),this}deriveRegressionRestrictions(){return kO(this)}boundDomain(t){return zO(this,t,this.getReturnIndex())}findLinearSubset(t){let r=UO(this),n=[];for(let i of t){let s=this.argNames.indexOf(i);if(s===-1)throw new Error(\"Programming Error: findLinearSubset called with a non-dependency\");n.push(r[s])}return n}print(){return eM(this)}printInstruction(t){return Wu(this,t)}toDot(){return vv(this)}getLiveArgNames(){let t=[];for(let r=0;r<this.argNames.length;r++)this.instructions[r].type===2&&t.push(this.argNames[r]);return t}getCursorContext(){return this.cursorContext}setCursorContext(t){this.cursorContext=t}};var Qo={normaldist:{pdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"normalpdf\",r.concat(n.args))},cdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"normalcdf\",r.concat(n.args))},mean:function(e,t,r){return e.getInstruction(t).args[0]},median:function(e,t,r){return Qo.normaldist.mean(e,t,r)},stdev:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"abs\",[n.args[1]])},var:function(e,t,r){let n=e.getInstruction(t);return e.Multiply([n.args[1],n.args[1]])},quantile:function(e,t,r){let n=e.getInstruction(t);return e.Add([e.Multiply([e.SyntheticNativeFunction(\"invNorm\",r),e.SyntheticNativeFunction(\"abs\",[n.args[1]])]),n.args[0]])},random:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"normalSample\",[r[0],n.args[0],n.args[1]])}},tdist:{pdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"tpdf\",r.concat(n.args))},cdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"tcdf\",r.concat(n.args))},mean:function(e,t,r){return e.Constant(0)},median:function(e,t,r){return e.Constant(0)},stdev:function(e,t,r){return e.SyntheticNativeFunction(\"sqrt\",[Qo.tdist.var(e,t,r)])},var:function(e,t,r){let n=e.getInstruction(t),i=e.Constant(2),s=n.args[0];return e.Piecewise([e.GreaterEqual([s,i]),e.Divide([s,e.Subtract([s,i])]),e.Constant(NaN)])},quantile:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"invT\",[r[0],n.args[0]])},random:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"tSample\",[r[0],n.args[0]])}},poissondist:{pdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"poissonpdf\",r.concat(n.args))},cdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"poissoncdf\",r.concat(n.args))},mean:function(e,t,r){return e.getInstruction(t).args[0]},median:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"invPoisson\",[e.Constant(.5),n.args[0]])},stdev:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"sqrt\",[n.args[0]])},var:function(e,t,r){return Qo.poissondist.mean(e,t,r)},quantile:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"invPoisson\",[r[0],n.args[0]])},random:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"poissonSample\",[r[0],n.args[0]])}},binomialdist:{pdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"binompdf\",r.concat(n.args))},cdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"binomcdf\",r.concat(n.args))},mean:function(e,t,r){let n=e.getInstruction(t);return e.Multiply([n.args[0],n.args[1]])},median:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"invBinom\",[e.Constant(.5),n.args[0],n.args[1]])},stdev:function(e,t,r){return e.SyntheticNativeFunction(\"sqrt\",[Qo.binomialdist.var(e,t,r)])},var:function(e,t,r){let n=e.getInstruction(t),[i,s]=n.args;return e.Multiply([i,e.Multiply([s,e.Subtract([e.Constant(1),s])])])},quantile:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"invBinom\",[r[0],n.args[0],n.args[1]])},random:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"binomSample\",[r[0],n.args[0],n.args[1]])}},uniformdist:{pdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"uniformpdf\",r.concat(n.args))},cdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"uniformcdf\",r.concat(n.args))},mean:function(e,t,r){let n=e.getInstruction(t);return e.Divide([e.Add([n.args[0],n.args[1]]),e.Constant(2)])},median:function(e,t,r){return Qo.uniformdist.mean(e,t,r)},stdev:function(e,t,r){return e.SyntheticNativeFunction(\"sqrt\",[Qo.uniformdist.var(e,t,r)])},var:function(e,t,r){let n=e.getInstruction(t),i=e.Subtract([n.args[1],n.args[0]]);return e.Divide([e.Multiply([i,i]),e.Constant(12)])},quantile:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"invUniform\",[r[0],n.args[0],n.args[1]])},random:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"uniformSample\",[r[0],n.args[0],n.args[1]])}}};function KO(e,t,r){let n=r[0],i=e.Constant(0),s=e.Constant(1);if(fr(e,t)===0)return e.Constant(NaN);let a=Sn(e,t);return e.InboundsListAccess([t,e.Add([e.SyntheticNativeFunction(\"floor\",[e.Multiply([e.SyntheticNativeFunction(\"uniformSample\",[n,i,s]),a])]),s])])}function zy(e,t,r){if(t===r)return!0;if(t<r)return!1;let n=[!0];for(let s=r+1;s<=t;s++)n.push(!1);let i=[t];for(;i.length;){let s=i.pop();if(n[s-r])continue;n[s-r]=!0;let o=e.getInstruction(s);if(!Me(o))for(let a of o.args){if(a===r)return!0;a<r||n[a-r]||i.push(a)}}return!1}var Na;function eS(e){Na=e}function tS(){Na&&(Na.cacheHits+=1)}function rS(){Na&&(Na.cacheMisses+=1)}function nS(){Na&&(Na.cacheWrites+=1)}function iS(){Na&&(Na.cacheReads+=1)}function aS(e,t,r,n,i){let s=ne(r,me)||ne(r,fe),o=ne(i,me)||ne(i,fe);if(!s&&!o)return;let a=oS(e,t,r),u=oS(e,n,i),c=a.filter(l=>u.some(p=>uI(l,p))&&!!e.lookup(l[0]));for(let l of a)sS(e,l,n)&&c.every(p=>!uI(l,p))&&c.push(l);for(let l of u)sS(e,l,t)&&c.every(p=>!uI(l,p))&&c.push(l);if(c.length===1)return c[0]}function uI(e,t){return e[0]===t[0]&&e[1]===t[1]}function sS(e,[t,r],n){let i=e.lookup(t),s=i&&e.getGeometryTree(i);return((s==null?void 0:s.symbol)===\"glider\"||(s==null?void 0:s.symbol)===\"intersection\"||(s==null?void 0:s.symbol)===\"strictintersection\"||(s==null?void 0:s.symbol)===\"midpoint\")&&(s==null?void 0:s.parents.some(o=>o&&e.resolvesTo(o[0],n)&&(r===void 0||o[1]===void 0||o[1]===r)))}function oS(e,t,r){var s;let n=[],i=((s=e.getGeometryTree(t))==null?void 0:s.parents)||[];for(let o=0;o<i.length;o++){let a=i[o];if(ne(r,me)&&o===0||!a)continue;let u=e.lookup(a[0]);u&&e.isPointOrListOfPoints(u)&&n.push(a)}return n}function cI(e,t,r){if(!t)return;let n=uS(t,r._expression);n===\"start-to-end\"?e.setCursorContext({type:r.type===\"Assignment\"?\"assignment-rhs\":\"function-definition-body\",allowedTypes:[Vt]}):n===\"empty-list\"&&e.setCursorContext({type:\"expression-arguments\",expressionType:\"List\",argIndex:0,argCount:0,isLastValidArg:!1,positionWithinArg:\"start-to-end\",allowedTypesForInsertedArg:[Vt]})}function hl(e,t,r,n,i){let s=r3(e,t,r,n,i);s&&e.setCursorContext(s)}function uS(e,t){let r=t.getInputSpan();return r?e.start===r.start&&e.end===r.end?\"start-to-end\":e.start===e.end&&e.start===r.end?\"end\":e.start===e.end&&e.start===r.start?\"start\":e.start===e.end&&t.type===\"List\"&&t.args.length===0?\"empty-list\":\"not-aligned\":\"not-aligned\"}function lI(e,t){if(!e)return;let r=!1;t instanceof ns&&t.args[1]instanceof Cr&&(r=!0,t=t.args[1]);let n=t.args;if(n){if(n.length===0){let i=t.getInputSpan();if(!i)return;let s=xr(i),o=-1;return t.type===\"List\"?o=s.indexOf(\"[\"):(t.type===\"FunctionCall\"||t.type===\"SeededFunctionCall\")&&(o=s.indexOf(\"(\")),o<0?void 0:e.start===i.start+o+1?{argIndex:0,positionWithinArg:\"start-to-end\",isDotCall:r}:void 0}for(let i=0;i<n.length;i++){let s=n[i],o=s.getInputSpan();if((o==null?void 0:o.input)!==e.input)continue;if(e.start<o.start)break;let a=uS(e,s);if(a!==\"not-aligned\")return{argIndex:i,positionWithinArg:a,isDotCall:r}}}}function r3(e,t,r,n,i){if(!r||!n.args)return;let s=lI(r,n);if(s===void 0)return;s.isDotCall&&(n=n.args[1]);let o=s.positionWithinArg===\"end\"?s.argIndex+1:s.argIndex;s.isDotCall&&(o+=1);let a;s.positionWithinArg===\"empty-list\"||s.positionWithinArg===\"start-to-end\"?a=[...i.slice(0,o),void 0,...i.slice(o+1)]:n instanceof ya?a=o===1?[i[0],void 0,i[1]]:[i[0],i[1],void 0]:a=[...i.slice(0,o),void 0,...i.slice(o)],a=a.map(l=>{if(!(l===void 0||e.getInstruction(l).type===2))return l});let u=IT(e,t,n,a),c=u&&Py(u,o);if(s.positionWithinArg===\"empty-list\"){let l=c==null?void 0:c.filter(W).map(We);return(l==null?void 0:l.length)===0?void 0:{type:\"expression-arguments\",expressionType:\"List\",argIndex:0,argCount:0,isLastValidArg:!1,positionWithinArg:\"start-to-end\",allowedTypesForInsertedArg:l!=null?l:[Vt]}}else{if((c==null?void 0:c.length)===0)return;let l=!1;if(u){let d=0;for(let g of u){let m=Array.isArray(g)?g.length-1:1/0;d=Math.max(d,m)}l=s.positionWithinArg===\"end\"&&s.argIndex===d-1||s.positionWithinArg===\"start-to-end\"&&s.argIndex===d}let p=n.args.length;if(n instanceof ya&&n.args.length===3){let d=n.args[2];d instanceof Gr&&d.isNaN()&&(p=2)}let f={type:\"expression-arguments\",expressionType:n.type,argIndex:s.argIndex,argCount:p,isLastValidArg:l,positionWithinArg:s.positionWithinArg,allowedTypesForInsertedArg:c!=null?c:[Vt]};if(n instanceof Cr&&(f.functionSymbol=n._symbol,f.isDotCall=s.isDotCall,n instanceof Cr&&n._symbol===\"polygon\")){let d=n.args.filter(g=>!(g instanceof Tt&&g._symbol===\"cursor\"));if(d.length>0){let g=d[0].getInputSpan(),m=d[d.length-1].getInputSpan();f.polygonVertices=g&&m?{firstLatex:xr(g),lastLatex:xr(m)}:void 0}}return f}}function cS(e){return e.type===\"FunctionDefinition\"}function Hy(e){return e.type===\"Identifier\"}function Cs(e){return e.type===\"Table\"}function tf(e){return e.type===\"Image\"}function po(e){return e.type===\"Error\"}function bl(e){return e.type===\"Regression\"}function n3(e){let t=Bp({},{},-1);for(let r=0;r<e.argNames.length;r++)Ri(t,e.argNames[r],r);return t}function _i(e,t,r,n,i,s,o){return{policy:e,frame:t,chunk:r,scope:n,parentNode:i,substitutionContext:s,selection:o}}function Zy(e){let{policy:t,frame:r,argNames:n,argTypes:i,selection:s}=e,o=new Wo({argNames:n,argTypes:i}),a=n3(o);return _i(t,r,o,a,void 0,{},s)}function Pl(e,t){let{policy:r,frame:n,argNames:i,argTypes:s,selection:o}=e,a=KT(n,t),{freeDependencies:u,updateSymbols:c}=a;if(i||(i=u),!s){s=[];for(let p=0;p<i.length;p++)s.push(I)}let l=Zy({policy:r,frame:n,argNames:i,argTypes:s,selection:o});try{wO(r,n,t.getScope()),Ce(l,t),(e.coerceToNumber||ne(l.chunk.getReturnType(),Ot))&&pc(l.chunk,l.chunk.getReturnIndex()),e.wrapInList&&!W(l.chunk.getReturnType())&&l.chunk.List([l.chunk.getReturnIndex()]),l.chunk.close(),s3(l,t,a),i3(l,t,c)}catch(p){let f=p instanceof R?p:te(p);f.setCursorContext(l.chunk.getCursorContext()),l.chunk.setError(f)}return l.chunk}function i3(e,t,r){if(t.type===\"FunctionDefinition\")for(let i of r){if(t._argSymbols.indexOf(i)!==-1||t._symbol===i)throw Sd(i);if(t._sybmol===i)throw Od(i)}let n=[];for(let i of r)e.frame[i]||n.push(i);if(n.length){let i=TS(e,n[0]).setDependencies(e.chunk.argNames.concat(n));throw e.chunk.isConstant()&&e.chunk.getReturnType()===Ke&&i.setActionValue(e.chunk.asValue()),i}}function s3(e,t,{substitutionSymbols:r}){if(t.type===\"FunctionDefinition\")for(let i of r){if(t._argSymbols.indexOf(i)!==-1||t._symbol===i)throw hp(i);if(t._sybmol===i)throw $c(i)}let n=[];for(let i of r)e.frame[i]||n.push(i);if(n.length){let i=n[0];if(e.policy.substitutionForbidden(i))throw Zc(i)}}function Ce(e,t){let r;if(iS(),u3(e,t))tS(),r=e.chunk.copyInstruction(t.__IRCache.instruction);else{rS();let n=e.chunk.instructionsLength(),{policy:i,frame:s,chunk:o,scope:a,parentNode:u,substitutionContext:c,selection:l}=e,p=_i(i,s,o,a,t,c,l);if(r=c3(p,t),!bS(t,u)){let f=o.getInstruction(r);f.type===48&&f.isConstantBroadcast&&(r=Br(o,r))}r=o3(e,n,r),a3(e,t,r)}return e.chunk.setReturnIndex(r),r}function o3(e,t,r){let{chunk:n,scope:i}=e;if(r<=t)return r;let s=n.getInstruction(r);return vt(s)?(n.truncate(Math.max(t,i.maxIndex+1)),Os(n,s)):r}function bS(e,t){if(!t||!e.getScope||!t.getScope)return!1;let r=t.getScope().dependencies,n=e.getScope().dependencies;if(n.length===r.length)return!0;let i=0;for(let o of n)Xe[o]||(i+=1);let s=0;for(let o of r)Xe[o]||(s+=1);return i===s}function a3(e,t,r){let{frame:n,chunk:i,parentNode:s}=e,o=i.getInstruction(r);if(!vt(o)||bS(t,s))return;let a=LO(n,t);a&&(nS(),t.__IRCache={keys:a,instruction:o})}function u3(e,t){let{frame:r,substitutionContext:n}=e;if(!t.__IRCache)return!1;let i=t.__IRCache.keys;for(let[s,o]of i){let a=r[s];if(a!==o||a&&a.type===\"RegressionParameter\"&&n.body)return!1}return!0}function c3(e,t){var f,d,g,m;let{policy:r,frame:n,chunk:i,scope:s,parentNode:o,substitutionContext:a,selection:u}=e,c=t.type;switch(c){case\"Constant\":{let y=t._constantValue,h=typeof y==\"boolean\"?ge:I;return i.ConstantOfType(h,y)}case\"RegressionParameter\":return i.Constant(t._constantNode._constantValue);case\"MixedNumber\":return i.Constant(t._constantValue);case\"Negative\":return i.Negative(Uy(e,t,t.args));case\"Add\":return i.Add(di(e,t,t.args));case\"Subtract\":return i.Subtract(di(e,t,t.args));case\"Multiply\":{let y=di(e,t,t.args);if(e.policy.is3dProduct()){let h=i.getInstruction(y[0]).valueType,x=i.getInstruction(y[1]).valueType;if(ne(h,H)&&ne(x,H))throw Zl([le(h),le(x)]);if(ne(h,N)&&ne(x,N))throw Xl([le(h),le(x)])}return i.Multiply(y)}case\"DotMultiply\":{let[y,h]=di(e,t,t.args);return(d=(f=lS(e,y,h))!=null?f:Oa(i,[y,h])?lS(e,Qn(i,y),Qn(i,h),{forcePermitted:!0}):void 0)!=null?d:i.Multiply([y,h])}case\"CrossMultiply\":{let[y,h]=di(e,t,t.args);if(!e.policy.is3dPolicy())return i.Multiply([y,h]);if(ke(i,y,ve)&&ke(i,h,ve))return ou(i,[pS(e,Qn(i,y),Qn(i,h)),uo(i,y)]);if(ke(i,y,H)&&ke(i,h,H))return pS(e,y,h);if(ke(i,y,N)&&ke(i,h,N)||ke(i,y,I)&&ke(i,h,H)||ke(i,y,H)&&ke(i,h,I)){let x=i.getInstruction(y).valueType,P=i.getInstruction(h).valueType;throw Yl([le(x),le(P)])}else return i.Multiply([y,h])}case\"Divide\":return i.Divide(di(e,t,t.args));case\"Exponent\":return i.Exponent(di(e,t,t.args));case\"Comparator['=']\":return i.Equal(di(e,t,t.args));case\"Comparator['>']\":return i.Greater(di(e,t,t.args));case\"Comparator['<']\":return i.Less(di(e,t,t.args));case\"Comparator['>=']\":return i.GreaterEqual(di(e,t,t.args));case\"Comparator['<=']\":return i.LessEqual(di(e,t,t.args));case\"And\":return i.And(di(e,t,t.args));case\"PercentOf\":return i.Divide([i.Multiply(di(e,t,t.args)),i.Constant(100)]);case\"ParenSeq\":return m3(e,t);case\"BareSeq\":return y3(e,t);case\"NamedCoordinateAccess\":{let[y]=Uy(e,t,t.args),h=t.symbol,x=ke(i,y,H),P;switch(h){case\"x\":P=i.Constant(1);break;case\"y\":P=i.Constant(2);break;case\"z\":{if(!x)throw On(\".\").allowExport();P=i.Constant(3);break}default:{let E=h;throw new Error(`Programming Error: unexpected named coordinate: '${E}'.`)}}return x?i.OrderedTripleAccess([y,P]):i.OrderedPairAccess([y,P])}case\"Norm\":{let y=Uy(e,t,t.args)[0];return(m=(g=fI(e,y))!=null?g:Oa(i,[y])?fI(e,Qn(i,y)):void 0)!=null?m:i.SyntheticNativeFunction(\"abs\",[y])}case\"UpdateRule\":{let y=t._symbol;var l=n[y];if(l!==void 0){if(l!==or&&l.isError)throw l;if(l===or||l.type!==\"Assignment\"&&l.type!==\"Slider\")throw TS(e,y)}let h=Ce(_i(r,n,i,s,o,a,u),t.args[1]);return i.Action([y],[h])}case\"List\":{let y;if(t.getDependencies().length>0)wn(t.args),y=i.List(xl(e,t,t.args));else if(t.args.length===0)hl(i,r,u,t,[]),y=i.ConstantOfType(Be,[]);else{let h=i.instructionsLength(),x=[],P,E;wn(t.args);for(let M of t.args){let O=Ce(e,M),S=i.getInstruction(O);if(P===void 0){if(P=S.valueType,!qi(P))throw Bu([le(P)]);E=Ln(P)}else if(S.valueType!==P)throw jl();if(S.type!==1)throw new Error(\"Programming error: expected list with no dependencies to constant collapse.\");x.push(S.value),i.truncate(h)}let T=lI(e.selection,t);if(e.selection&&T!==void 0&&E!==void 0&&T.positionWithinArg!==\"empty-list\"){let M=We(E);i.setCursorContext({type:\"expression-arguments\",expressionType:\"List\",argIndex:T.argIndex,argCount:t.args.length,isLastValidArg:!1,positionWithinArg:T.positionWithinArg,allowedTypesForInsertedArg:[M]})}y=i.ConstantOfType(E,x)}return y}case\"ListAccess\":{let y=Ce(e,t.args[0]),h=i.getInstruction(y);if(t.args[1].type===\"Range\"&&t.args[1].args[1].length===0){if(!W(h.valueType))throw $l([le(h.valueType),le(I)]);let x=Sn(i,y),P=dI(e,Ce(e,t.args[1].args[0]),i.List([x]),{stepMustBePositive:!0});return i.ListAccess([y,P])}else{let x=Ce(e,t.args[1]),P=i.getInstruction(x);if(tu(i,r,t,[y,x]),P.valueType===sn)return i.SyntheticNativeFunction(\"select\",[y,x]);if(P.valueType===ge&&W(h.valueType)){let E=i.ConstantOfType(h.valueType,[]);return i.Piecewise([x,y,E])}return i.ListAccess([y,x])}}case\"Range\":{let[y,h]=di(e,t,t.args);return dI(e,y,h,{stepMustBePositive:!1})}case\"ListComprehension\":return g3(e,t);case\"Piecewise\":{let y=l3(e,t,t.args),h=i.getInstruction(y[0]),x=i.getInstruction(y[1]),P=i.getInstruction(y[2]),E=$s(x.valueType,P.valueType)||$s(P.valueType,x.valueType);if(h.type===1&&h.valueType===ge&&E){let T=y[h.value?1:2],M=i.getInstruction(T),O=x.valueType!==Be?x.valueType:P.valueType;return M.valueType===Be&&O!==Be?i.ConstantOfType(O,[]):T}if(!E&&vt(P)&&P.valueType===I&&ci(P.value)&&Wc(x.valueType)){if(ne(x.valueType,Ot))return i.SyntheticNativeFunction(\"restriction\",[i.And([y[0],i.SyntheticNativeFunction(\"restrictionToBoolean\",[y[1]])])]);let T=i.NanOfType(x.valueType);y=[y[0],y[1],T]}return i.Piecewise(y)}case\"Restriction\":return i.SyntheticNativeFunction(\"restriction\",Uy(e,t,t.args));case\"Ans\":case\"Identifier\":{let y=t._symbol,h=t._errorSymbol;if(t.type===\"Ans\"&&i.argNames.indexOf(y)!==-1)throw Gx();let x=oT(s,y),P=n[y];if(x!==void 0&&(s.symbolMap.hasOwnProperty(y)||P===void 0||P===or))return x;if(P===void 0){if(Xe[y]){let M=e.policy.is3dPolicy();throw Xe[y].isFunction?ss(h,M):qu(h)}throw new Error(`Programming Error: reached undefined symbol ${y}`)}if(P!==or&&po(P))throw P;if(P===or||P.isFunction)throw Tb(h);if(a.body&&P.type===\"RegressionParameter\")throw Wx(h,a.body);let E=_i(r,n,i,s,void 0,a,u),T=Ce(E,P);return Ri(s,y,T,P),T}case\"FunctionCall\":case\"SeededFunctionCall\":{wn(t.args);let y=xl(e,t,t.args);return wn(y),qy(e,t._symbol,t._errorSymbol,y,t.args)}case\"Substitution\":return I3(e,t);case\"FunctionExponent\":{let y=t.args[0]._symbol,h=n[y];return h!==or&&(h!=null&&h.isFunction)?Ce(e,new D.Exponent([new D.FunctionCall(y,[t.args[1]]),t.args[2]])):Ce(e,new D.Multiply([t.args[0],new D.Exponent([t.args[1],t.args[2]])]))}case\"FunctionFactorial\":{let y=t.args[0]._symbol,h=n[y];return h!==or&&(h!=null&&h.isFunction)?Ce(e,new D.FunctionCall(\"\\\\factorial\",[new D.FunctionCall(y,[t.args[1]])])):Ce(e,new D.Multiply([t.args[0],new D.FunctionCall(\"\\\\factorial\",[t.args[1]])]))}case\"DotAccess\":{let y=t.args[0],h=t.args[1],x=n[h._symbol];if(y.type===\"Identifier\"&&y._symbol===\"construction\")return E3(e,h);if((h.type===\"Identifier\"||h.type===\"FunctionCall\")&&x!==or&&(x!=null&&x.isFunction)){let P=h._symbol,E=h._errorSymbol,T=h.type===\"Identifier\"?[y]:[y].concat(h.args),M=xl(e,t,T);return qy(e,P,E,M,T,{dotLHSIndex:M[0]})}else if(h.type===\"SeededFunctionCall\"){let P=h._symbol,E=h._errorSymbol,T=[h.seed,y].concat(h.args.slice(1)),M=xl(e,t,T);return qy(e,P,E,M,T,{dotLHSIndex:M[1]})}else throw On(\".\")}case\"Seed\":return i.ConstantOfType(ot,t._stringValue);case\"ExtendSeed\":return i.ExtendSeed(t.tag,di(e,t,t.args));case\"Integral\":{let y=t._differential._symbol,h=Object.create(n);h[y]=wx(y);let x=$o(s),P=_i(r,h,i,x,o,a,u),E=Ce(P,t.args[1]),T=Ce(P,t.args[2]),M=i.getInstruction(E),O=i.getInstruction(T),S=i.SymbolicVar(I,y),C=$o(s);Ri(C,y,S);let A=Object.create(n);A[y]=or;let L=Ce(_i(r,A,i,C,o,a,u),t.args[3]);if(!zy(i,L,S))return i.Multiply([L,i.Subtract([T,E])]);let Z=Pp(i,[E,T,L]),w=Z!==void 0?i.BeginBroadcast([Z]):void 0,z=E;w!==void 0&&W(M.valueType)&&(z=ru(i,E,w));let F=T;w!==void 0&&W(O.valueType)&&(F=ru(i,T,w));let X=i.getInstruction(L).valueType,ee=W(X)?We(X):X,re=ee===N?i.BeginBroadcast([i.Constant(2)]):ee===H?i.BeginBroadcast([i.Constant(3)]):void 0,Oe=i.BeginIntegral({indexSymbol:y},[z,F]),$=mu(i,Oe,S,L),Ze=i.getInstruction($);w!==void 0&&W(Ze.valueType)&&($=ru(i,$,w)),re!==void 0&&($=ee===N?i.OrderedPairAccess([$,re]):i.OrderedTripleAccess([$,re]));let xe=i.EndIntegral([Oe,$]),se=i.BlockVar(I,[xe]);if(re!==void 0){let _e=i.EndBroadcast([re,se]);se=i.BroadcastResult(ee,[_e]),Br(i,se)}if(w!==void 0){let _e=i.EndBroadcast([w,se]);return i.BroadcastResult(Ln(ee),[_e])}else return se}case\"Sum\":case\"Product\":{let y=t._index._symbol,h=t.type===\"Sum\",x=Object.create(n);x[y]=h?Dx(y):vx(y);let P=$o(s),E=_i(r,x,i,P,o,a,u),T=Ce(E,t.args[1]);T=pc(E.chunk,T);let M=Ce(E,t.args[2]);if(M=pc(E.chunk,M),!ke(i,T,I)){let Ye=oc(i,[T]);throw h?Ch(Ye):wh(Ye)}if(!ke(i,M,I)){let Ye=oc(i,[M]);throw h?_h(Ye):Fh(Ye)}let O=i.SyntheticNativeFunction(\"round\",[T]),S=i.SyntheticNativeFunction(\"round\",[M]),C=i.getInstruction(O),A=i.getInstruction(S);if(C.type===1&&C.valueType===I&&!isFinite(k(C.value)))throw h?Md():Dd();if(A.type===1&&A.valueType===I&&!isFinite(k(A.value)))throw h?Md():Dd();let L=i.SymbolicVar(I,y),Z=$o(s);Ri(Z,y,L);let w=Object.create(n);w[y]=or;let z=Ce(_i(r,w,i,Z,o,a,u),t.args[3]),F=i.getInstruction(z).valueType,X=W(F)?We(F):F,re=(t.type===\"Sum\"?Xg:[I]).find(Ye=>So(X,Ye));if(re===void 0){let Ye=oc(i,[z]);throw h?Lh(Ye):Vh(Ye)}if(!zy(i,z,L)){let Ye=i.Add([i.Subtract([S,O]),i.Constant(1)]);Ye=i.SyntheticNativeFunction(\"max\",[Ye,i.Constant(0)]);let kt=h?i.Multiply([z,Ye]):i.Exponent([z,Ye]);return i.Piecewise([i.Less([Ye,i.Constant(1/0)]),kt,i.NanOfType(re)])}let Oe=Pp(i,[O,S,z]);if(Oe!==void 0&&zy(i,Oe,L))throw h?Xx(y):Zx(y);let $=Oe!==void 0?i.BeginBroadcast([Oe]):void 0,Ze=O;$!==void 0&&W(C.valueType)&&(Ze=ru(i,O,$));let xe=S;$!=null&&W(A.valueType)&&(xe=ru(i,S,$));let se=i.Constant(h?0:1),_e=re===N?i.OrderedPair([se,se]):re===H?i.OrderedTriple([se,se,se]):se,Re=i.BeginLoop({type:h?\"sum\":\"product\",indexSymbol:y},[Ze,xe,_e]),K=i.BlockVar(re,[Re]),V=mu(i,Re,L,z),ce=i.getInstruction(V);$!==void 0&&W(ce.valueType)&&(V=ru(i,V,$));let ae=h?i.Add([K,V]):i.Multiply([K,V]),Pe=i.EndLoop([Re,ae]),Je=i.BlockVar(re,[Pe]);if($!==void 0){let Ye=i.EndBroadcast([$,Je]);return i.BroadcastResult(Ln(re),[Ye])}else return Je}case\"Derivative\":{let y=t._symbol,h=Ce(e,new D.Identifier(y));if(!ke(i,h,I))throw Uh(y,oc(i,[h]));let x=i.getInstruction(h),P,E,T=!1;if((x.type===2||x.type===3)&&x.valueType===I)P=e,E=h;else{let C=$o(s);E=i.SymbolicVar(x.valueType),Ri(C,y,E),T=!0;let A=Object.create(n);A[y]=or,P=_i(r,A,i,C,o,a,u)}let M=1;for(;t.args[0].type===\"Derivative\"&&t.args[0]._symbol===t._symbol;)M+=1,t=t.args[0];let S=Br(i,Ce(P,t.args[0]));for(let C=0;C<M;C++)S=gl(i,S,E);return E===h?S:(T&&delete i.derivativeMaps[E],mu(i,h,E,S))}case\"Prime\":{let y=t.args[0];if(!n[y._symbol])throw zd(y._symbol);let h=Ce(e,y.args[0]),x=i.getInstruction(h),P=!1,E;(x.type===2||x.type===3)&&x.valueType===I?E=h:(E=i.SymbolicVar(x.valueType),P=!0);let T,M;if(y._symbol===\"logbase\"){if(y.args.length!==2)throw Hu();T=[E,Ce(e,y.args[1])],M=[y.args[0],y.args[1]]}else{if(y.args.length!==1)throw Hu();T=[E],M=[y.args[0]]}let S=Br(i,qy(e,y._symbol,y._errorSymbol,T,M));for(let C=0;C<t.order;C++)S=gl(i,S,E);return E===h?S:(P&&delete i.derivativeMaps[E],mu(i,h,E,S))}case\"Slider\":return e.chunk.Constant(t.getConcreteTree(r,n).asCompilerValue());case\"Assignment\":return cI(i,e.selection,t),Ce(e,t._expression);case\"CoordinateEquation\":return Ce(e,t._expression);case\"FunctionDefinition\":{cI(i,e.selection,t);for(var p=0;p<t._argSymbols.length;p++)if(t._argSymbols[p]===t._symbol)throw Uc(t._argSymbols[p]);return Ce(e,t._expression)}case\"Construction\":throw On(\"construction\");default:let b=c;throw new Error(`Programming error, unimplemented node type ${b}`)}}function Uy(e,t,r){let n=[Ce(e,r[0])];return hl(e.chunk,e.policy,e.selection,t,n),tu(e.chunk,e.policy,t,n),n}function di(e,t,r){let n=[Ce(e,r[0]),Ce(e,r[1])];return hl(e.chunk,e.policy,e.selection,t,n),tu(e.chunk,e.policy,t,n),n}function fI(e,t){let r=e.chunk;return ke(r,t,H)?r.SyntheticNativeFunction(\"hypot\",[r.OrderedTripleAccess([t,r.Constant(1)]),r.SyntheticNativeFunction(\"hypot\",[r.OrderedTripleAccess([t,r.Constant(2)]),r.OrderedTripleAccess([t,r.Constant(3)])])]):ke(r,t,N)?r.SyntheticNativeFunction(\"hypot\",[r.OrderedPairAccess([t,r.Constant(1)]),r.OrderedPairAccess([t,r.Constant(2)])]):void 0}function lS(e,t,r,{forcePermitted:n}={forcePermitted:!1}){let i=e.chunk;if((n||e.policy.is3dProduct())&&ke(i,t,N)&&ke(i,r,N)){let s=i.Constant(1),o=i.Constant(2);return i.Add([i.Multiply([i.OrderedPairAccess([t,s]),i.OrderedPairAccess([r,s])]),i.Multiply([i.OrderedPairAccess([t,o]),i.OrderedPairAccess([r,o])])])}else if((n||e.policy.is3dProduct())&&ke(i,t,H)&&ke(i,r,H)){let s=i.Constant(1),o=i.Constant(2),a=i.Constant(3);return i.Add([i.Add([i.Multiply([i.OrderedTripleAccess([t,s]),i.OrderedTripleAccess([r,s])]),i.Multiply([i.OrderedTripleAccess([t,o]),i.OrderedTripleAccess([r,o])])]),i.Multiply([i.OrderedTripleAccess([t,a]),i.OrderedTripleAccess([r,a])])])}else return}function pS(e,t,r){let n=e.chunk,i=n.Constant(1),s=n.Constant(2),o=n.Constant(3),a=n.OrderedTripleAccess([t,i]),u=n.OrderedTripleAccess([t,s]),c=n.OrderedTripleAccess([t,o]),l=n.OrderedTripleAccess([r,i]),p=n.OrderedTripleAccess([r,s]),f=n.OrderedTripleAccess([r,o]);return n.OrderedTriple([n.Subtract([n.Multiply([u,f]),n.Multiply([c,p])]),n.Subtract([n.Multiply([c,l]),n.Multiply([a,f])]),n.Subtract([n.Multiply([a,p]),n.Multiply([u,l])])])}function l3(e,t,r){let n=[Ce(e,r[0]),Ce(e,r[1]),Ce(e,r[2])];return hl(e.chunk,e.policy,e.selection,t,n),tu(e.chunk,e.policy,t,n),n}function xl(e,t,r){let n=[];for(let i of r)n.push(Ce(e,i));return hl(e.chunk,e.policy,e.selection,t,n),tu(e.chunk,e.policy,t,n),n}function qy(e,t,r,n,i,s){let{policy:o,frame:a,chunk:u,scope:c,parentNode:l,substitutionContext:p,selection:f}=e,d=oT(c,t);if(d!==void 0){if(ne(u.getInstruction(d).valueType,He))return Xy(e.chunk,[d,...n],r,!0);if(n.length==1)return u.Multiply([d,n[0]]);throw u.getInstruction(d).type===2?zd(r):u.getInstruction(d).valueType===at?Jd(r):Wd(r)}let g=a[t];if(g!==or&&(g!=null&&g.isError))throw g;if(g===void 0||g===or||!g.isFunction){if(Xe[t]&&Xe[t].isFunction){if(t===\"logbase\"&&a.ln&&a.log)throw Bx();let m=e.policy.is3dPolicy();throw ss(r,m)}if(g&&g!==or){let m=Ce(e,g);if(u.getInstruction(m).valueType===at)throw Jd(r);if(ne(u.getInstruction(m).valueType,He))return Xy(e.chunk,[m,...n],r,!0)}if(n.length==1)return u.Multiply([Ce(e,new D.Identifier(t)),n[0]]);throw g?Wd(r):new Error(`Programming Error: reached undefined symbol ${t}`)}if(cS(g)){if(s&&s.dotLHSIndex!==void 0)throw Wl(r);if(n.length!==g._argSymbols.length)throw is(r,g._argSymbols.length,n.length);let m=$o(c),b=Object.create(a);for(let y=0;y<g._argSymbols.length;y++)Ri(m,g._argSymbols[y],n[y],i[y]),b[g._argSymbols[y]]=or;return Ce(_i(o,b,u,m,l,p,f),g._expression)}else{if(eo.hasOwnProperty(t))return d3(e,t,r,n,i,s);if(yr.hasOwnProperty(t))return ky(e,t,r,n,s);{let m=e.policy.is3dPolicy();throw ss(r,m)}}}function p3(e,t){let r=uo(e,t),n=e.Add([r,Qn(e,t)]);return e.SyntheticNativeFunction(\"segment\",[r,n])}function ky(e,t,r,n,i){let{chunk:s}=e,o=yr[t],a=!!(i&&i.dotLHSIndex!==void 0),u=n.length,{minArity:c,maxArity:l}=o;if(u>l||u<c)throw te(\"Unexpected arity mismatch\");let p=xS(s,n,o),f={errorSymbol:r,providedArity:u,isDotCall:a};switch(o.tag){case\"default\":case\"reducer\":case\"doubleReducer\":case\"parameterizedReducer\":case\"color\":case\"never-broadcast\":return s.NativeFunction(t,f,p);case\"trig\":{let d=Ce(e,new D.Identifier(\"trigAngleMultiplier\")),g=s.Multiply([p[0],d]);return s.NativeFunction(t,f,[g])}case\"trig2\":{let d=Ce(e,new D.Identifier(\"trigAngleMultiplier\")),g=s.Multiply([p[1],d]);return s.NativeFunction(t,f,[p[0],g])}case\"inverseTrig\":{let d=Ce(e,new D.Identifier(\"trigAngleMultiplier\")),g=s.NativeFunction(t,f,p);return s.Divide([g,d])}default:{let d=o.tag;throw new Error(`Programming Error: unexpected tag ${d}`)}}}function xS(e,t,{minArity:r,defaultArguments:n}){if(!n||!(t.length-r<n.length))return t;let i=t.slice();for(;i.length-r<n.length;)i.push(e.copyInstruction(n[i.length-r]));return i}function f3(e,t,{match:r,noBroadcast:n}){let i=[n?r:Yn(r)];return by(i,t.map(s=>e.getInstruction(s).valueType),0).length>0}function ac(e,t,r,n){let i=n.find(s=>f3(e,t,s));if(!i){if(typeof r==\"string\")throw Oi(r,Da(e,t));return r(e,t)}return i.build(e,t)}function fS(e,t){if(t.length!==2)throw te(\"Can only take the midpoint of two points\");let r=e.Constant(Ve(1,2));return e.Multiply([r,e.Add(t)])}function d3(e,t,r,n,i,s){let{chunk:o,policy:a}=e,u=eo[t];if(u.fallthroughUnlessDistribution&&u.fallthroughUnlessDistribution&&!yS(o,n))return ky(e,t,r,n,s);let{minArity:c,maxArity:l}=u,p=n.length;if(p<c||p>l)throw new Error(\"Programming Error: unexpected arity mismatch\");let f;if(t===\"cdf\")p===2?f=[n[0],o.Constant(-1/0),n[1]]:f=n;else if(t===\"random\")if(p===1||p<4&&!W(o.getInstruction(n[1]).valueType)&&o.getInstruction(n[1]).valueType!==at){let m=o.Distribution(\"uniformdist\",[o.Constant(0),o.Constant(1)]);f=[n[0],m].concat(n.slice(1))}else f=n;else f=xS(o,n,u);let d=zl(t);if(d){let m=nI(o,f,d);m.didCoerce&&(f=m.args)}function g(m,b=r){return ac(o,f,b,m)}switch(t){case\"length\":if(a.isGeometryEnabled()||a.is3dPolicy()){let m=f[0],b=a.is3dPolicy()?Nh:Rh;return g([{match:[Be],build:()=>{throw b(r,Da(o,f)[0])}},{match:[xt],build:()=>{let y=o.Constant(0),h=o.Constant(1);return o.SyntheticNativeFunction(\"distanceThreeD\",[o.SyntheticNativeFunction(\"segmentThreeDGlider\",[m,y]),o.SyntheticNativeFunction(\"segmentThreeDGlider\",[m,h])])}},{match:[De],build:()=>{let y=o.Constant(0),h=o.Constant(1);return o.SyntheticNativeFunction(\"distance\",[o.SyntheticNativeFunction(\"segmentGlider\",[m,y]),o.SyntheticNativeFunction(\"segmentGlider\",[m,h])])}},{match:[fe],build:()=>{let y=o.SyntheticNativeFunction(\"abs\",[o.SyntheticNativeFunction(\"arcOmega\",[f[0]])]),{radius:h,startPoint:x}=IS(o,f[0]),P=o.SyntheticNativeFunction(\"arcGlider\",[f[0],o.Constant(1)]);return o.Piecewise([o.Equal([y,o.Constant(0)]),o.SyntheticNativeFunction(\"distance\",[x,P]),o.Multiply([h,y])])}},{match:[Zg],build:()=>fI(e,Qn(o,m))},{match:[er],noBroadcast:!0,build:()=>{throw b(r,Da(o,f)[0])}}])}else return o.SyntheticNativeFunction(\"count\",f);case\"round\":return g([{match:[I],build:()=>o.SyntheticNativeFunction(\"round\",f)},{match:[I,I],build:()=>{let m=o.SyntheticNativeFunction(\"round\",[f[1]]),b=o.RawExponent([o.Constant(10),m]);return o.Divide([o.SyntheticNativeFunction(\"round\",[o.Multiply([f[0],b])]),b])}}]);case\"midpoint\":return g([{match:[De],build:()=>{let m=o.Constant(Ve(1,2));return o.SyntheticNativeFunction(\"segmentGlider\",[f[0],m])}},{match:[xt],build:()=>{let m=o.Constant(Ve(1,2));return o.SyntheticNativeFunction(\"segmentThreeDGlider\",[f[0],m])}},{match:[N,N],build:fS},{match:[H,H],build:fS}]);case\"circle\":return g([{match:[N,De],build:()=>{let m=o.Constant(0),b=o.Constant(1);return o.SyntheticNativeFunction(\"circle\",[f[0],o.SyntheticNativeFunction(\"distance\",[o.SyntheticNativeFunction(\"segmentGlider\",[f[1],m]),o.SyntheticNativeFunction(\"segmentGlider\",[f[1],b])])])}},{match:[N,N],build:()=>o.SyntheticNativeFunction(\"circle\",[f[0],o.SyntheticNativeFunction(\"distance\",f)])},{match:[N,I],build:()=>o.SyntheticNativeFunction(\"circle\",f)}]);case\"segment\":return g(qp(\"segment\",\"segmentThreeD\"));case\"vector\":return g(qp(\"vector\",\"vectorThreeD\"));case\"distance\":return g(qp(\"distance\",\"distanceThreeD\"));case\"center\":case\"radius\":return g([{match:[{meta:\"union\",types:[me,fe]}],build:()=>{let m=h3(o,f[0]);return o.SyntheticNativeFunction(t,[m])}}]);case\"glider\":return g([{match:[De,I],build:()=>o.SyntheticNativeFunction(\"segmentGlider\",f)},{match:[ye,I],build:()=>o.SyntheticNativeFunction(\"lineGlider\",f)},{match:[Le,I],build:()=>o.SyntheticNativeFunction(\"rayGlider\",f)},{match:[me,I],build:()=>o.SyntheticNativeFunction(\"circleGlider\",f)},{match:[fe,I],build:()=>o.SyntheticNativeFunction(\"arcGlider\",f)},{match:[we,I],build:()=>o.SyntheticNativeFunction(\"polygonGlider\",f)}]);case\"intersection\":case\"strictintersection\":{let m=0;t===\"strictintersection\"&&((ke(o,f[0],De)||ke(o,f[0],fe))&&(m+=3),(ke(o,f[1],De)||ke(o,f[1],fe))&&(m+=12)),ke(o,f[0],Le)&&(m+=1),ke(o,f[1],Le)&&(m+=4);let b=T3(e,i,f);if(!b)return pI(o,f,m);let y=Ce(e,new D.Identifier(b[0]));return b[1]!==void 0&&(y=o.ListAccess([y,o.Constant(b[1])])),o.SyntheticNativeFunction(\"chooseNonIncidentPoint\",[y,pI(o,[f[0],f[1]],m),pI(o,[f[1],f[0]],m<<2&12|m>>2&3)])}case\"parallel\":case\"perpendicular\":return g([{match:[{meta:\"union\",types:Nf},N],build:()=>{let b=[Yy(o,f[0]),f[1]];return o.SyntheticNativeFunction(t,b)}}]);case\"start\":return uo(o,f[0]);case\"end\":return o.Add([uo(o,f[0]),Qn(o,f[0])]);case\"translate\":case\"reflect\":case\"rotate\":case\"dilate\":return b3(e,t,f);case\"apply\":return Xy(o,f,r,!1);case\"normaldist\":case\"tdist\":case\"poissondist\":case\"binomialdist\":case\"uniformdist\":return o.Distribution(t,f);case\"pdf\":case\"cdf\":case\"median\":case\"stdev\":case\"var\":case\"quantile\":return mS(o,f,t);case\"total\":case\"mean\":return t===\"mean\"&&yS(o,n)?mS(o,f,t):g([{match:{type:\"variadic\",initial:[],rest:Be},build:()=>ky(e,t,r,f,s)},{match:{type:\"variadic\",initial:[N],rest:N},build:()=>{let b=[1,2].map(h=>o.Constant(h)),y=h=>o.SyntheticNativeFunction(t,f.map(x=>o.OrderedPairAccess([x,b[h-1]])));return o.OrderedPair([y(1),y(2)])}},{match:{type:\"variadic\",initial:[H],rest:H},build:()=>{let b=[1,2,3].map(h=>o.Constant(h)),y=h=>o.SyntheticNativeFunction(t,f.map(x=>o.OrderedTripleAccess([x,b[h-1]])));return o.OrderedTriple([y(1),y(2),y(3)])}}],()=>ky(e,t,r,f,s));case\"random\":{let m=f[0],b=f[1],y=o.getInstruction(f[0]),h=o.getInstruction(b);if(y.valueType!==ot)throw te(`Unexpected value type for seed arg: ${y.valueType}`);if(h.valueType===Pr)throw fb();let x;if(W(h.valueType))x=KO;else{if(h.type!==42||h.valueType!==at)throw te('Expected distribution argument to \"random\"');x=Qo[h.symbol][t]}if(f.length>2){let P=f[2],E=o.getInstruction(P);if(E.valueType!==I)throw te(`Expected numSamples argument to random() to be a number but got ${E.valueType}`);if(f.length===4){let A=o.getInstruction(f[3]);if(A.valueType!==I)throw te(`Expected userSeed argument to random() to be a number but got ${E.valueType}`);if(!vt(A))throw Qd(Wn(o,f[3]));m=o.ExtendSeed(\"us\",[m,f[3]])}let T=o.Constant(1),M=o.SyntheticNativeFunction(\"round\",[o.SyntheticNativeFunction(\"validateSampleCount\",[P])]),O=o.BeginBroadcast([M]);m=o.ExtendSeed(\"lc\",[m,o.Subtract([O,T])]);let S=x(o,b,[m]),C=o.EndBroadcast([O,S]);return o.BroadcastResult(Ln(o.getInstruction(S).valueType),[C])}return x(o,b,[m])}case\"shuffle\":{let m=f[0],b=f[1],y=f[2];if(!W(o.getInstruction(b).valueType)||y!==void 0&&o.getInstruction(y).valueType!==I)throw te(`Unexpected args for \"${t}\"`);if(y!==void 0){if(!vt(o.getInstruction(y)))throw Qd(Wn(o,y));m=o.ExtendSeed(\"us\",[m,y])}return o.SyntheticNativeFunction(\"shuffle\",[m,b])}case\"sort\":return g([{match:[ie],noBroadcast:!0,build:()=>dS(e,f[0],f[0])},{match:[{meta:\"union\",types:Ps},ie],noBroadcast:!0,build:()=>dS(e,f[0],f[1])}]);case\"join\":{let m=[],b=!0;for(let A of f){let L=o.getInstruction(A);eu(L)||(b=!1);let Z=L.valueType;if(Z!==Be)if(W(Z))m.push({isList:!0,index:A,elementType:We(Z)});else if(qi(Z))m.push({isList:!1,index:A,elementType:Z});else throw Oi(r,Da(o,n))}if(m.length===0)return o.ConstantOfType(Be,[]);for(let A of m)if(A.elementType!==m[0].elementType)throw Oi(r,Da(o,n));if(b){let A=[];for(let L of m){let Z=o.getInstruction(Br(o,L.index));rv(Z),L.isList?A.push(...Z.value):A.push(Z.value)}return o.ConstantOfType(Ln(m[0].elementType),A)}let y=o.Constant(0),h=o.Constant(1),x={};for(let A of m)A.isList&&x[A.index]===void 0&&(x[A.index]=Sn(o,A.index));let P=o.SyntheticNativeFunction(\"total\",m.map(A=>A.isList?x[A.index]:h)),E=o.BeginBroadcast([P]),T=y,M=[],O=[];for(let A of m){let L=A.isList?o.ListAccess([A.index,o.Subtract([E,T])]):A.index;if(O.push(L),A!==m[m.length-1]){let Z=A.isList?x[A.index]:h;T=o.Add([T,Z]),M.push(o.LessEqual([E,T]))}}let S=O[O.length-1];for(let A=O.length-2;A>=0;A--)S=o.Piecewise([M[A],O[A],S]);let C=o.EndBroadcast([E,S]);return o.BroadcastResult(Ln(m[0].elementType),[C])}case\"unique\":{let m=f[0],b=o.getInstruction(m);if(!W(b.valueType)||b.valueType===Pr)throw te(`Unexpected types for ${t}`);return o.SyntheticNativeFunction(\"elementsAt\",[m,o.SyntheticNativeFunction(\"uniquePerm\",[m])])}case\"polygon\":return g([{match:[],build:()=>{let m=o.ConstantOfType(ft,[]);return o.SyntheticNativeFunction(\"polygon\",[m])}},{match:[I,I],noBroadcast:!0,build:()=>{throw tp()}},{match:[I,I],build:()=>{let m=o.OrderedPair(f);return o.SyntheticNativeFunction(\"polygon\",[m])}},{match:{type:\"variadic\",initial:[],rest:N},build:()=>o.SyntheticNativeFunction(\"polygon\",f)}]);case\"directedangle\":return gS(e,f,r);case\"angle\":return o.SyntheticNativeFunction(\"undirectedAngleMarker\",[gS(e,f,r)]);case\"angles\":return o.SyntheticNativeFunction(\"polygonInteriorUndirectedAngles\",[f[0],Ce(e,new D.Identifier(\"trigAngleMultiplier\"))]);case\"directedangles\":return o.SyntheticNativeFunction(\"polygonInteriorDirectedAngles\",[f[0],Ce(e,new D.Identifier(\"trigAngleMultiplier\"))]);case\"coterminal\":{if(ke(o,f[0],Te))return o.SyntheticNativeFunction(\"directedCoterminalAngle\",f);if(ke(o,f[0],Ne))return o.SyntheticNativeFunction(\"undirectedCoterminalAngle\",f);throw te(`Unexpected types for ${t}`)}case\"histogram\":case\"dotplot\":case\"boxplot\":case\"ttest\":case\"ittest\":case\"stats\":case\"det\":case\"inv\":case\"transpose\":case\"rref\":case\"trace\":case\"points\":case\"lines\":case\"circles\":case\"polygons\":case\"rays\":case\"arcs\":case\"vectors\":throw On(r);default:{let m=t;throw new Error(`Programming Error: unexpected compiler function ${m}`)}}}function dS(e,t,r){let{chunk:n}=e;if(fr(n,r)===0)return r;let s=n.SyntheticNativeFunction(\"min\",[Sn(n,t),Sn(n,r)]);return r=n.ListAccess([r,dI(e,n.List([n.Constant(1)]),n.List([s]),{stepMustBePositive:!0})]),n.SyntheticNativeFunction(\"elementsAt\",[t,n.SyntheticNativeFunction(\"sortPerm\",[r])])}function mS(e,t,r){let n=t[0],i=e.getInstruction(n);if(!ne(i.valueType,at))throw te(`Unexpected args for \"${r}\"`);let s=t.slice(1);for(let o of s)if(!ne(e.getInstruction(o).valueType,I))throw te(`Unexpected args for \"${r}\"`);if(W(i.valueType)){let o=[],a=1/0;for(let c of t){let l=Br(e,c);o.push(l);let p=e.getInstruction(l);if(W(p.valueType)){let f=fr(e,l);if(f===void 0)throw gp(Wn(e,l));a=Math.min(a,f)}}let u=[];for(let c=0;c<a;c++){let l=Hp(e,o[0],c),p=e.getInstruction(l);if(p.type!==42)throw te(`Unexpected opcode for distribution arg: ${p.type}`);let f=[];for(let d of o.slice(1))W(e.getInstruction(d).valueType)?f.push(Hp(e,d,c)):f.push(d);u.push(Qo[p.symbol][r](e,l,f))}return e.List(u)}else{if(i.type!==42)throw te(`Unexpected opcode for distribution arg: ${i.type}`);return Qo[i.symbol][r](e,n,s)}}function yS(e,t){return t.length!==0&&e.getInstruction(t[0]).valueType!==Be&&ne(e.getInstruction(t[0]).valueType,at)}function m3(e,t){let{chunk:r}=e;wn(t.args);let n=xl(e,t,t.args),i=!1,s=!1;for(let o=0;o<n.length;o++){let u=r.getInstruction(n[o]).valueType;i=i||u===Ke,s=s||u!==Ke}if(i&&s)throw te(\"Unexpected mix of actions and non-actions\");if(i)return PS(e,n);if(n.length===2)return r.OrderedPair(n);if(n.length==3)return r.OrderedTriple(n);throw te(`Unexpected tuple dimensions: ${n.length}`)}function y3(e,t){let{chunk:r}=e;wn(t.args);let n=xl(e,t,t.args);if(n.length<1)throw te(\"Empty bare sequence\");let i=r.getInstruction(n[0]).valueType;if(i===I)throw te(\"Ambiguous bare sequence\");return i===Ke?PS(e,n):r.List(n)}function PS(e,t){let{chunk:r}=e,n=[],i=[];for(let o of t){let a=r.getInstruction(o);switch(a.type){case 49:{Array.prototype.push.apply(n,a.symbols),Array.prototype.push.apply(i,a.args);break}case 1:{let c=a.value.updateRules;for(let l in c)n.push(l),i.push(r.ConstantOfType(c[l].valueType,c[l].value));break}default:{var s=Wn(r,o);throw s.length>0?Qh(s):te(`Unexpected opcode for action: ${a.type}`)}}}return r.Action(n,i)}function TS(e,t){var r=e.frame[t];return r===or?Sd(t):e.policy.assignmentForbidden(t)?jh(t):r&&r.type===\"FunctionDefinition\"?Od(t):Jh(t).allowExport()}function g3(e,t){let{policy:r,frame:n,chunk:i,scope:s,parentNode:o,selection:a}=e;if(!(t instanceof Bc))throw new Error(\"Programming error: expected a ListComprehension node but got \"+t.type);let u=t._body,c=[],l=i.Constant(1),p=Object.create(n);wn(t._inputLists);for(let{_symbol:P}of t._inputLists)p[P]=qx(P);for(let P of t.parameters)p[P.identifier._symbol]=kx(P.identifier._symbol);let f=$o(s),d=_i(r,p,i,f,o,e.substitutionContext,a);for(let P=t._inputLists.length-1;P>=0;P--){let E=t._inputLists[P],T=E._symbol,M=Ce(d,E.args[1]),O=i.getInstruction(M);if(!W(O.valueType)){let C;if(qi(O.valueType)){let A=E.args[1].getInputSpan();A&&(C=xr(A))}throw Hx(T,le(O.valueType),C)}let S=Sn(i,M);c.push({symbol:T,assignedList:M,lengthIndex:S}),l=i.Multiply([l,S])}let g=Object.create(n),m=$o(s),b;if(c.length>0){let P=i.Constant(1);b=i.BeginBroadcast([l],{inputListSymbols:c.map(T=>T.symbol)}),Ri(m,t._index._symbol,b);let E=P;for(let T=c.length-1;T>=0;T--){let{symbol:M,assignedList:O,lengthIndex:S}=c[T],C;if(c.length===1)C=b;else{let A=i.SyntheticNativeFunction(\"floor\",[i.Divide([i.Subtract([b,P]),E])]);C=i.Add([i.SyntheticNativeFunction(\"mod\",[A,S]),P]),T>0&&(E=i.Multiply([E,S]))}Ri(m,M,i.ListAccess([O,C]))}}let y;if(t.parameters.length>0){let P=[],E=[];for(let T of t.parameters)P.push(T.identifier._symbol),E.push(Ce(d,T.bounds[0]),Ce(d,T.bounds[1]));y=i.BeginMap({parameterSymbols:P},E);for(let T=0;T<t.parameters.length;T++)i.BlockVar(I,[y]);for(let T=0;T<t.parameters.length;T++){let M=t.parameters[T].identifier._symbol,[O,S]=t.parameters[T].open,C=E[2*T],A=E[2*T+1],L=y+T+1,Z=i.Piecewise([i.And([O?i.Greater([L,C]):i.GreaterEqual([L,C]),S?i.Less([L,A]):i.LessEqual([L,A])]),L,i.NanOfType(I)]);g[M]=or,Ri(m,M,Z)}}for(let P of c)g[P.symbol]=or;let x=Ce(_i(r,g,i,m,o,{body:\"for\"},a),u);if(y!==void 0){let P=i.EndMap([y,x]),E=i.getInstruction(x).valueType;if(la(E))throw eP();if(!$g(E))throw Qx(E);let T=r.is3dPolicy()?2:1;if(t.parameters.length>T)throw Kx(E,t.parameters.length);let M=Wg(E,t.parameters.length);x=i.BlockVar(M,[P])}if(b!==void 0){let P=i.getInstruction(x);if(!qi(P.valueType))throw Bu([le(P.valueType)]);let E=i.EndBroadcast([b,x]);x=i.BroadcastResult(Ln(P.valueType),[E])}else t.shouldCoerceToList&&(x=i.List([x]));return x}function dI(e,t,r,n){let{stepMustBePositive:i}=n,{chunk:s}=e;t=pc(s,t),r=pc(s,r);let o=s.getInstruction(t),a=s.getInstruction(r),u=ro(s,t,\"Programming error: expected range start list to have constant length.\"),c=ro(s,r,\"Programming error: expected range start list to have constant length.\");if(o.valueType!==ie||a.valueType!==ie)throw cp();let l=s.Constant(1),p=s.Constant(0),f=s.ListAccess([t,l]),d=s.ListAccess([t,s.Constant(2)]),g=s.ListAccess([r,s.Constant(c)]),m=s.Subtract([g,f]),b=u>1?s.Subtract([d,f]):s.Piecewise([s.GreaterEqual([m,p]),l,s.Constant(-1)]),y=s.Add([l,s.SyntheticNativeFunction(\"round\",[s.Divide([m,b])])]),h=s.SyntheticNativeFunction(\"validateRangeLength\",[t,r,b,y]);i&&(h=s.Piecewise([s.GreaterEqual([b,p]),h,p]));let x=s.BeginBroadcast([h]),P=s.Add([f,s.Multiply([b,s.Subtract([x,l])])]),E=s.EndBroadcast([x,P]);return s.addComments({[f]:\"start\",[d]:\"second\",[g]:\"last\",[y]:\"proposedLength\",[b]:\"step\",[P]:\"body\"}),s.BroadcastResult(Ln(s.getInstruction(P).valueType),[E])}function Yy(e,t){return ke(e,t,De)?e.SyntheticNativeFunction(\"lineFromSegment\",[t]):ke(e,t,he)?e.SyntheticNativeFunction(\"lineFromSegment\",[p3(e,t)]):ke(e,t,Le)?e.SyntheticNativeFunction(\"lineFromRay\",[t]):t}function h3(e,t){if(ke(e,t,fe)){let{center:r,radius:n}=IS(e,t);return e.SyntheticNativeFunction(\"circle\",[r,n])}return t}function IS(e,t){let r=e.SyntheticNativeFunction(\"arcCenter\",[t]),n=e.SyntheticNativeFunction(\"arcGlider\",[t,e.Constant(0)]),i=e.SyntheticNativeFunction(\"distance\",[r,n]);return{center:r,radius:i,startPoint:n}}function gS(e,t,r){let{chunk:n}=e;if(t.length===3&&ke(n,t[0],N)&&ke(n,t[1],N)&&ke(n,t[2],N)){let i=n.Constant(1),s=n.Constant(2),o=t[0],a=t[1],u=t[2],c=n.Subtract([o,a]),l=n.Subtract([u,a]),p=n.OrderedPairAccess([c,i]),f=n.OrderedPairAccess([c,s]),d=n.OrderedPairAccess([l,i]),g=n.OrderedPairAccess([l,s]),m=n.SyntheticNativeFunction(\"arctan\",[f,p]),b=n.Subtract([n.Multiply([p,g]),n.Multiply([f,d])]),y=n.Add([n.Multiply([p,d]),n.Multiply([f,g])]),h=n.SyntheticNativeFunction(\"arctan\",[b,y]),x=n.SyntheticNativeFunction(\"abs\",[h]),P=n.Constant(Math.PI),E=n.Constant(Math.PI*2);h=n.Piecewise([n.Equal([x,P]),P,n.Piecewise([n.Less([x,P]),h,n.Multiply([n.Multiply([n.SyntheticNativeFunction(\"sign\",[h]),n.Constant(-1)]),n.Subtract([E,x])])])]);let T=n.SyntheticNativeFunction(\"directedAngleMarker\",[a,m,h,Ce(e,new D.Identifier(\"trigAngleMultiplier\"))]),M=n.Constant(0),O=n.And([n.Equal([b,M]),n.Equal([y,M])]);return n.Piecewise([O,n.NanOfType(Te),T])}else throw te(`Unexpected types for ${r}`)}function XO(e,t){return e.Divide([e.SyntheticNativeFunction(\"directedAngleMarkerRawDelta\",[t]),e.SyntheticNativeFunction(\"directedAngleMarkerMultiplier\",[t])])}function ZO(e,t){return e.SyntheticNativeFunction(\"abs\",[e.Divide([e.SyntheticNativeFunction(\"undirectedAngleMarkerRawDelta\",[t]),e.SyntheticNativeFunction(\"undirectedAngleMarkerMultiplier\",[t])])])}function b3(e,t,r){let{chunk:n}=e,i=r.slice(1),s=zl(t);if(!s)throw new Error(`Unexpected transformation type: ${t}`);let o=s.map(c=>{let l=0;for(let p=1;p<r.length;p++){let f=n.getInstruction(r[p]).valueType,d=xy(c,p);d&&ET(f,d)&&l++}return{signature:c,matchedArgsCount:l,signatureArgsCount:Array.isArray(c)?c.length-1:c.initial.length+1,providedArgsCount:r.length-1}}).sort((c,l)=>l.matchedArgsCount!==c.matchedArgsCount?l.matchedArgsCount-c.matchedArgsCount:c.signatureArgsCount-l.signatureArgsCount),a;switch(t){case\"translate\":{a=[{match:[he],build:()=>n.SyntheticNativeFunction(\"translation\",[n.SyntheticNativeFunction(\"vectorDisplacementAsPoint\",i)])},{match:[N,N],build:()=>n.SyntheticNativeFunction(\"translation\",[n.Subtract([i[1],i[0]])])}];break}case\"reflect\":{a=[{match:[{meta:\"union\",types:Nf}],build:()=>{let c=Yy(n,i[0]);return n.SyntheticNativeFunction(\"reflection\",[c])}}];break}case\"rotate\":{a=[{match:[N,I],build:()=>{let c=Ce(e,new D.Identifier(\"trigAngleMultiplier\"));return n.SyntheticNativeFunction(\"rotation\",[i[0],n.Multiply([i[1],c])])}}];break}case\"dilate\":{a=[{match:[N,I],build:()=>n.SyntheticNativeFunction(\"dilation\",i)}];break}default:{let c=t;throw new Error(`Programming error: exhaustive check failed: ${c}`)}}let u=ac(n,i,()=>{throw Oh(t,Da(n,i),o[0].signature)},a);return Xy(n,[u,r[0]],t,!0)}function x3(e,t){let{match:r}=e;return Q(q({},e),{match:Array.isArray(r)?[t,...r]:Q(q({},r),{initial:[t,...r.initial]})})}function P3(e){return e.map(([t,r])=>({match:[t],build:(n,i)=>n.SyntheticNativeFunction(r,i)}))}function Xy(e,t,r,n){let s=P3([[He,\"compose\"],[N,\"transformPoint\"],[De,\"transformSegment\"],[ye,\"transformLine\"],[Le,\"transformRay\"],[he,\"transformVector\"],[me,\"transformCircle\"],[fe,\"transformArc\"],[we,\"transformPolygon\"],[Ne,\"transformAngleMarker\"],[Te,\"transformDirectedAngleMarker\"]]).map(a=>x3(a,He));function o(){throw n?Sh(r,oc(e,t.slice(1))):Oi(r,oc(e,t))}return ac(e,t,o,s)}function pI(e,t,r){let n=Yy(e,t[0]),i=Yy(e,t[1]),s=[n,i,e.ConstantOfType(I,r)];if(ke(e,n,me)){if(ke(e,i,me))return e.SyntheticNativeFunction(\"circleCircleIntersection\",s);if(ke(e,i,fe))return e.SyntheticNativeFunction(\"circleArcIntersection\",s);if(ke(e,i,ye))return e.SyntheticNativeFunction(\"circleLineIntersection\",s)}if(ke(e,n,fe)){if(ke(e,i,me))return e.SyntheticNativeFunction(\"arcCircleIntersection\",s);if(ke(e,i,fe))return e.SyntheticNativeFunction(\"arcArcIntersection\",s);if(ke(e,i,ye))return e.SyntheticNativeFunction(\"arcLineIntersection\",s)}if(ke(e,n,ye)){if(ke(e,i,me))return e.SyntheticNativeFunction(\"lineCircleIntersection\",s);if(ke(e,i,fe))return e.SyntheticNativeFunction(\"lineArcIntersection\",s);if(ke(e,i,ye))return e.SyntheticNativeFunction(\"lineLineIntersection\",s)}throw te(\"Invalid intersection types\")}function T3(e,[t,r],[n,i]){let{chunk:s,frame:o}=e,a=s.getInstruction(n).valueType,u=s.getInstruction(i).valueType,c=f=>{let d=o[f];return d&&d!==or?d:ov(e.scope,f)},l=Hy(t)?c(t._symbol):t,p=Hy(r)?c(r._symbol):r;if(!(!l||!p))return aS({getGeometryTree:f=>hy(f).tree,lookup:c,isPointOrListOfPoints:f=>{if(f.isFunction)return!1;let d=Ce(e,f);return ne(s.getInstruction(d).valueType,N)},resolvesTo:(f,d)=>o[f]===d},l,a,p,u)}function I3(e,t){let{policy:r,frame:n,chunk:i,scope:s,parentNode:o,substitutionContext:a,selection:u}=e,c=t._body,l=$o(s),p=Object.create(n);for(let d=0;d<t._assignments.length;d++){let g=t._assignments[d]._symbol,m=t._assignments[d].args[1],b=n[g];if(b){if(b!==or&&b.isError)throw b;if(b!==or&&b.type===\"FunctionDefinition\")throw $c(g);if(r.assignmentForbidden(g))throw Zc(g)}let y=Ce(e,m);Ri(l,g,y,m),p[g]=or}return Ce(_i(r,p,i,l,o,Q(q({},a),{body:\"with\"}),u),c)}var hS={points:ft,lines:qr,segments:Tr,polygons:Nr,circles:Hr,arcs:Ur,angles:ar,directedangles:ur,rays:kr,vectors:Yr};function E3(e,t){let{chunk:r,frame:n}=e,i=n.construction;if(i.isError)throw i;if(i.type!==\"Construction\")throw te(`Expected construction node but found ${i.type}}`);if(!Hy(t))throw te(`Expected identifier but found ${t.type}`);let s=t._symbol;if(!(s in hS))throw On(\"construction\");let o=hS[s];if(i.args.length===0)return r.ConstantOfType(o,[]);let a=We(o),u=[];for(let c of i.args)try{let l=Ce(e,c);r.getInstruction(l).valueType===a&&u.push(l)}catch(l){if(l instanceof D.Base)continue;throw l}return r.List(u)}Pt.prototype.buildIRExpression=function(e,t,r){var i;var n=Pl({policy:e,frame:t,wrapInList:r&&r.wrapInList,coerceToNumber:r&&r.coerceToNumber,selection:r&&r.selection},this);if(e.isGeometryEnabled()&&n.getLiveArgNames().some(s=>s[0]===\"$\"))throw jx();return(i=n.getError())!=null?i:new cr(n)};R.prototype.buildIRExpression=function(e,t,r){return this};var ES=vc;function mI(e){for(var t=[],r=0;r<e.length;r++)t.push(le(e[r].valueType));return t}function MS(e,t){var r=t.length,n=t[0];if(r<2)throw Ms(this._symbol);if(!ES(n.valueType,[ie,Be]))throw Ms(this._symbol);if(r>2)throw Ld(this._symbol,2)}D.Histogram.prototype.typeCheck=MS;D.DotPlot.prototype.typeCheck=MS;D.BoxPlot.prototype.typeCheck=function(e,t){var r=t.length,n=t[0];if(r===0)throw Ms(this._symbol);if(!ES(n.valueType,[ie,Be]))throw Ms(this._symbol);if(r>1)throw Ms(this._symbol)};D.TTest.prototype.typeCheck=function(e,t){var r=this._symbol;if(t.length===0)throw Ms(r);if(t[0].valueType===Be)throw Xc(r);if(t[0].valueType!==ie)throw Ms(r);if(t.length>2)throw Ld(r,2);if(t[0].length<2)throw Xc(r);if(t[1]&&t[1].valueType!==I)throw Oi(r,mI(t))};D.IndependentTTest.prototype.typeCheck=function(e,t){var r=this._symbol;if(t.length!==2)throw rp(r);if(!W(t[0].valueType)||!W(t[1].valueType))throw up(r);if(t[0].valueType===Be||t[1].valueType===Be)throw Xc(\"ittest\");if(t[0].valueType!==ie||t[1].valueType!==ie)throw Oi(r,mI(t));if(t[0].length<2||t[1].length<2)throw Xc(\"ittest\")},D.Stats.prototype.typeCheck=function(e,t){var r=t.length,n=t[0];if(r===0)throw Ms(this._symbol);if(n.valueType===Be)throw Oi(this._symbol,mI(t));if(n.valueType!==ie)throw Ms(this._symbol);if(r>1)throw Ms(this._symbol)};var fc=function(e,t,r){r=r||0;var n=Array(r+1).join(\"  \"),i=n+\"  \";return`[\n`+i+e.map(function(s){return s.repr(t,r+1)}).join(`,\n`+i)+`\n`+n+\"]\"},hn=function(e,t){return t=t||\"\",\"\"+t+e};D.Expression.prototype.repr=function(e,t){return hn(this.type,e)+\"(\"+fc(this.args,e,t)+\")\"};D.IRExpression.prototype.repr=function(e,t){t=t||0;var r=Array(t+1).join(\"  \"),n=r+\"  \",i=this._chunk.print().split(`\n`);return i.pop(),hn(this.type,e)+\"(`\\n\"+n+i.join(`\n`+n)+`\n`+r+\"`)\"};D.DoubleInequality.prototype.repr=function(e,t){t=t||0;var r=Array(t+1).join(\"  \"),n=r+\"  \";return hn(this.type,e)+`([\n`+n+this.args[0].repr(e,t+1)+`,\n`+n+\"'\"+this.args[1]+`',\n`+n+this.args[2].repr(e,t+1)+`,\n`+n+\"'\"+this.args[3]+`',\n`+n+this.args[4].repr(e,t+1)+`\n`+r+\"])\"};D.Identifier.prototype.repr=function(e){return hn(this.type,e)+\"('\"+this._symbol+\"')\"};D.Constant.prototype.repr=function(e){return hn(this.type,e)+\"(\"+this.asValue()+\")\"};D.ExtendSeed.prototype.repr=function(e,t){return hn(this.type,e)+\"('\"+this.tag+\"', \"+fc(this.args,e,t)+\")\"};D.Seed.prototype.repr=function(e){return hn(this.type,e)+\"(\"+this.asValue()+\")\"};D.FunctionCall.prototype.repr=function(e,t){return hn(this.type,e)+\"('\"+this._symbol+\"', \"+fc(this.args,e,t)+\")\"};D.Assignment.prototype.repr=function(e,t){return hn(this.type,e)+\"(\"+new D.Identifier(this._symbol).repr(e,t)+\", \"+this._expression.repr(e,t)+\")\"};D.CoordinateEquation.prototype.repr=function(e,t){return this.asEquation().repr(e,t)};D.Regression.prototype.repr=D.Equation.prototype.repr=function(e,t){return hn(this.type,e)+\"(\"+this._lhs.repr(e,t)+\", \"+this._rhs.repr(e,t)+\")\"};D.FunctionDefinition.prototype.repr=function(e,t){return hn(this.type,e)+\"(\"+new D.Identifier(this._symbol).repr(e,t)+\", \"+fc(this._argSymbols.map(function(r){return new D.Identifier(r)}),e,t)+\", \"+this._expression.repr(e,t)+\")\"};D.Error.prototype.repr=function(e,t){return hn(this.type,e)+\"('\"+this._msg+\"')\"};D.Derivative.prototype.repr=function(e,t){return hn(this.type,e)+\"('\"+this._symbol+\"', \"+fc(this.args,e,t)+\")\"};D.SolvedEquation.prototype.repr=function(e,t){return hn(this.type,e)+\"('\"+this._symbol+\"', \"+this._expression.repr(e,t)+\")\"};D.OptimizedRegression.prototype.repr=function(e,t){return hn(this.type,e)+\"(\"+JSON.stringify(this.parameters)+\", \"+JSON.stringify(this.residuals)+\", \"+JSON.stringify(this.statistics)+\", \"+this.model.repr(e,t+1)+\", \"+JSON.stringify({isModelValid:this.isModelValid,residualVariable:this.residualVariable,residualSuggestionId:this.residualSuggestionId,shouldSuggestLogMode:this.shouldSuggestLogMode,isLinear:this.isLinear,parameterWarning:this.parameterWarning})+\")\"};D.Table.prototype.repr=function(e,t){return hn(this.type,e)+\"(\"+fc(this.columns,e,t)+\")\"};D.TableColumn.prototype.repr=function(e,t){return hn(this.type,e)+\"(\"+this.header.repr(e,t)+\", \"+this.length+\", \"+fc(this.values,e,t)+\")\"};D.Image.prototype.repr=function(e,t){var r=Array(t+1).join(\"  \"),n=r+\"  \";return hn(this.type,e)+`({\n`+n+\"center: \"+this.center.repr(e,t+1)+`,\n`+n+\"radianAngle: \"+this.radianAngle.repr(e,t+1)+`,\n`+n+\"width: \"+this.width.repr(e,t+1)+`,\n`+n+\"height: \"+this.height.repr(e,t+1)+`},\n`+n+\"opacity: \"+this.opacity.repr(e,t+1)+`,\n`+n+JSON.stringify(this.moveStrategy)+`\n`+r+\"})\"};D.Ticker.prototype.repr=function(e,t){var r=Array(t+1).join(\"  \"),n=r+\"  \";return hn(this.type,e)+`({\n`+n+\"handler: \"+this.handler.repr(e,t+1)+`,\n`+n+\"minStep: \"+this.minStep.repr(e,t+1)+`\n`+r+\"})\"};D.Slider.prototype.repr=function(e,t){var r=Array(t+1).join(\"  \"),n=r+\"  \";return hn(this.type,e)+`({\n`+n+\"sliderAssignment: \"+this.sliderAssignment.repr(e,t+1)+`,\n`+n+\"sliderMin: \"+(this.sliderMin&&this.sliderMin.repr(e,t+1))+`,\n`+n+\"sliderMax: \"+(this.sliderMax&&this.sliderMax.repr(e,t+1))+`,\n`+n+\"sliderStep: \"+(this.sliderStep&&this.sliderStep.repr(e,t+1))+`},\n`+r+\")\"};var $y=function(e,t){return e.map(function(r){return r.substitute(t)})};D.Identifier.prototype.substitute=function(e){return e[this._symbol]?e[this._symbol]:this};D.FunctionCall.prototype.substitute=function(e){var t=e[this._symbol];if(t){if(t.type===\"Identifier\")return new D.FunctionCall(t,$y(this.args,e));if(t.type===\"Constant\")return new D.Multiply([t,this.args.length===1?this.args[0].substitute(e):new D.Constant(NaN)])}return D.Expression.prototype.substitute.call(this,e)};D.Constant.prototype.substitute=function(e){return this};D.Expression.prototype.substitute=function(e){return this.copyWithArgs($y(this.args,e))};D.Derivative.prototype.substitute=function(e){var t=e[this._symbol];if(t){if(t.type===\"Identifier\")return new D.Derivative(t,$y(this.args,e));throw new Error(\"Cannot substitute for a derivative variable with a non-Identifier\")}return new D.Derivative(this._symbol,$y(this.args,e))};D.Expression.prototype.simpleFunctionExpression=function(){return this};D.Assignment.prototype.simpleFunctionExpression=function(){return this._expression};D.CoordinateEquation.prototype.simpleFunctionExpression=function(){return this.asEquation().simpleFunctionExpression()};D.FunctionDefinition.prototype.simpleFunctionExpression=function(){return this._expression};D.Equation.prototype.simpleFunctionExpression=function(){return this.asComparator().simpleFunctionExpression()};function Ko(e){return e>=100}function DS(e,t){switch(e){case 106:return 200;case 107:return 201;case 108:return 202;case 103:return 214;case 130:return 215;case 112:return 209;case 113:return 210;case 110:switch(t){case\"z\":return 206;case\"theta\":return 205;case\"x\":case\"y\":case\"r\":case\"_implicit\":return 211;default:return 10}case 109:switch(t){case\"r\":return 203;case\"theta\":return 204;case\"x\":case\"y\":case\"z\":case\"_implicit\":return 213;default:return 10}case 111:switch(t){case\"theta\":return 207;case\"phi\":return 208;case\"x\":case\"y\":case\"z\":case\"rho\":case\"_implicit\":return 212;default:return 10}default:return 10}}function yI(e){switch(e){case 123:case 122:case 121:case 120:case 124:case 126:case 127:return!0;default:return!1}}var Wy={normaldist:{type:\"distribution\",symbol:\"normaldist\",params:[\"mean\",\"stdev\"],defaults:[\"0\",\"1\"],discrete:!1},tdist:{type:\"distribution\",symbol:\"tdist\",params:[\"dof\"],defaults:[void 0],discrete:!1},binomialdist:{type:\"distribution\",symbol:\"binomialdist\",params:[\"trials\",\"probsuccess\"],defaults:[void 0,\"0.5\"],discrete:!0},poissondist:{type:\"distribution\",symbol:\"poissondist\",params:[\"mean\"],defaults:[void 0],discrete:!0},uniformdist:{type:\"distribution\",symbol:\"uniformdist\",params:[\"min\",\"max\"],defaults:[\"0\",\"1\"],discrete:!1}},M3={Histogram:{type:\"visualization\",symbol:\"histogram\",params:[\"data\",\"binwidth\"],defaults:[void 0,\"1\"]},DotPlot:{type:\"visualization\",symbol:\"dotplot\",params:[\"data\",\"binwidth\"],defaults:[void 0,\"1\"]},BoxPlot:{type:\"visualization\",symbol:\"boxplot\",params:[\"data\"],defaults:[void 0]}};function vS(e){let t=Ns(e,{trailingComma:!0});return Aa(t)}function Aa(e){let t=e,r=M3[t.type];if(!r)switch(t.type===\"Assignment\"&&(t=t._expression),t.type){case\"FunctionCall\":{r=Wy[t._symbol];break}default:return}if(!r)return;let n={},i=r.params,s=t.args;for(let o=0;o<i.length;o++){let a=s[o];n[i[o]]=a&&a.getInputString()||\"\"}return Q(q({},r),{span:t.getInputSpan(),values:n})}var v3={X_OR_Y:{points:!1,lines:!0,fill:!1},SINGLE_POINT:{points:!0,lines:!1,fill:!1},POINT_LIST:{points:!0,lines:!1,fill:!1},PARAMETRIC:{points:!1,lines:!0,fill:!1},POLAR:{points:!1,lines:!0,fill:!1},IMPLICIT:{points:!1,lines:!0,fill:!1},POLYGON:{points:!1,lines:!0,fill:!0},HISTOGRAM:{points:!1,lines:!0,fill:!0},DOTPLOT:{points:!0,lines:!1,fill:!1},BOXPLOT:{points:!1,lines:!0,fill:!1},TTEST:{points:!1,lines:!1,fill:!1},STATS:{points:!1,lines:!1,fill:!1},POINT3D:{points:!0,lines:!1,fill:!1},POINT3D_LIST:{points:!0,lines:!1,fill:!1},CURVE3D_xyz_t:{points:!1,lines:!0,fill:!1},SLICE:{points:!1,lines:!0,fill:!1},SLICE_r\\u03B8z_at_z:{points:!1,lines:!0,fill:!1},SLICE_zr\\u03B8_at_r:{points:!1,lines:!0,fill:!1},SLICE_zr\\u03B8_at_\\u03B8:{points:!1,lines:!0,fill:!1},SLICE_zr\\u03B8_at_xyz:{points:!1,lines:!0,fill:!1},SLICE_r\\u03B8\\u03C6_at_\\u03B8:{points:!1,lines:!0,fill:!1},SLICE_r\\u03B8\\u03C6_at_\\u03C6:{points:!1,lines:!0,fill:!1},SLICE_r\\u03B8\\u03C6_at_xyz:{points:!1,lines:!0,fill:!1},SLICE_xyz_uv:{points:!1,lines:!0,fill:!1},SEGMENT3D:{points:!1,lines:!0,fill:!1},VECTOR3D:{points:!1,lines:!0,fill:!1},SPHERE3D:{points:!1,lines:!0,fill:!1},SURFACE_xyz_uv:{points:!1,lines:!0,fill:!1},SURFACE_z_r\\u03B8:{points:!1,lines:!0,fill:!1},SURFACE_r_\\u03B8z:{points:!1,lines:!0,fill:!1},SURFACE_r_\\u03B8\\u03C6:{points:!1,lines:!0,fill:!1},SURFACE_r_\\u03B8z_AMBIGUOUS:{points:!1,lines:!0,fill:!1},SURFACE:{points:!1,lines:!0,fill:!1},TRIANGLE3D:{points:!1,lines:!0,fill:!1},SURFACE_AMBIGUOUS:{points:!1,lines:!0,fill:!1},SURFACE_CONSTANT_AMBIGUOUS:{points:!1,lines:!0,fill:!1},IMPLICIT_SURFACE:{points:!1,lines:!0,fill:!1},IMPLICIT_SURFACE_AMBIGUOUS:{points:!1,lines:!0,fill:!1}};function OS(e,t){var n,i,s,o,a,u;if(e===void 0)return{points:!1,lines:!1,fill:!1};let r=v3[e];switch(e){case\"SINGLE_POINT\":return{points:!0,lines:!1,fill:!1};case\"POINT_LIST\":case\"POINT3D_LIST\":case\"DOTPLOT\":return{points:(n=t.points)!=null?n:r.points,lines:(i=t.lines)!=null?i:r.lines,fill:!1};case\"POINT3D\":return{points:(s=t.points)!=null?s:r.points,lines:!1,fill:!1};case\"PARAMETRIC\":case\"POLYGON\":case\"X_OR_Y\":case\"POLAR\":case\"IMPLICIT\":case\"HISTOGRAM\":case\"BOXPLOT\":case\"TTEST\":case\"STATS\":case\"CURVE3D_xyz_t\":return{points:!1,lines:(o=t.lines)!=null?o:r.lines,fill:(a=t.fill)!=null?a:r.fill};case\"TRIANGLE3D\":case\"SPHERE3D\":case\"SURFACE\":case\"SURFACE_r_\\u03B8z\":case\"SURFACE_z_r\\u03B8\":case\"SURFACE_r_\\u03B8\\u03C6\":case\"SURFACE_xyz_uv\":case\"IMPLICIT_SURFACE\":case\"SURFACE_AMBIGUOUS\":case\"SURFACE_CONSTANT_AMBIGUOUS\":case\"SURFACE_r_\\u03B8z_AMBIGUOUS\":case\"IMPLICIT_SURFACE_AMBIGUOUS\":case\"SEGMENT3D\":case\"VECTOR3D\":case\"SLICE\":case\"SLICE_r\\u03B8z_at_z\":case\"SLICE_zr\\u03B8_at_r\":case\"SLICE_zr\\u03B8_at_\\u03B8\":case\"SLICE_zr\\u03B8_at_xyz\":case\"SLICE_r\\u03B8\\u03C6_at_\\u03B8\":case\"SLICE_r\\u03B8\\u03C6_at_\\u03C6\":case\"SLICE_r\\u03B8\\u03C6_at_xyz\":case\"SLICE_xyz_uv\":return{points:!1,lines:(u=t.lines)!=null?u:r.lines,fill:!1};default:return e}}function gI(e){if(e===void 0)return!1;switch(e){case\"SINGLE_POINT\":case\"POINT_LIST\":case\"PARAMETRIC\":case\"POLYGON\":case\"X_OR_Y\":case\"POLAR\":case\"IMPLICIT\":return!0;case\"SURFACE\":case\"SURFACE_AMBIGUOUS\":case\"SURFACE_CONSTANT_AMBIGUOUS\":case\"SURFACE_r_\\u03B8z\":case\"SURFACE_r_\\u03B8z_AMBIGUOUS\":case\"SURFACE_z_r\\u03B8\":case\"SURFACE_r_\\u03B8\\u03C6\":case\"SURFACE_xyz_uv\":case\"IMPLICIT_SURFACE\":case\"IMPLICIT_SURFACE_AMBIGUOUS\":case\"CURVE3D_xyz_t\":case\"SLICE\":case\"SLICE_r\\u03B8z_at_z\":case\"SLICE_zr\\u03B8_at_r\":case\"SLICE_zr\\u03B8_at_\\u03B8\":case\"SLICE_zr\\u03B8_at_xyz\":case\"SLICE_r\\u03B8\\u03C6_at_\\u03B8\":case\"SLICE_r\\u03B8\\u03C6_at_\\u03C6\":case\"SLICE_r\\u03B8\\u03C6_at_xyz\":case\"SLICE_xyz_uv\":case\"POINT3D\":case\"POINT3D_LIST\":case\"TRIANGLE3D\":case\"HISTOGRAM\":case\"BOXPLOT\":case\"DOTPLOT\":case\"TTEST\":case\"STATS\":case\"SEGMENT3D\":case\"VECTOR3D\":case\"SPHERE3D\":return!1;default:return e}}function SS(e){return e===\"SURFACE_r_\\u03B8\\u03C6\"||e===\"SLICE_r\\u03B8\\u03C6_at_\\u03B8\"||e===\"SLICE_r\\u03B8\\u03C6_at_\\u03C6\"||e===\"SLICE_r\\u03B8\\u03C6_at_xyz\"}function RS(e){return e===\"SURFACE_z_r\\u03B8\"||e===\"SLICE_zr\\u03B8_at_r\"||e===\"SLICE_zr\\u03B8_at_\\u03B8\"||e===\"SLICE_zr\\u03B8_at_xyz\"}function NS(e){return e===\"SURFACE_r_\\u03B8z\"||e===\"SURFACE_r_\\u03B8z_AMBIGUOUS\"||e===\"SLICE_r\\u03B8z_at_z\"}function ea(e){if(typeof e==\"string\")return e;if(e===void 0)return\"\";if(isNaN(e))return\"\\\\frac{0}{0}\";if(e===1/0)return\"\\\\infty\";if(e===-1/0)return\"-\\\\infty\";let t=e+\"\";return t=t.replace(/^1e\\+?([-\\d]+)/,\"10^{$1}\"),t=t.replace(/([-\\d\\.]+)e\\+?([-\\d]+)/,\"$1\\\\cdot 10^{$2}\"),t}function O3(e){let t=e+\"\";if(/\\d+\\.?\\d*e[\\+\\-]*\\d+/i.test(t)){let n=\"0\",i=String(t).toLowerCase().split(\"e\"),s=parseFloat(i[0]),o=parseInt(i[1],10),a=Math.abs(o),u=Math.abs(s).toString().split(\".\");if(o<0)t=\"0.\"+new Array(a).join(n)+u.join(\"\");else{var r=u[1];r&&(a=a-r.length),t=u.join(\"\")+new Array(a+1).join(n)}s<0&&(t=\"-\"+t)}return t}function z7(e,t=2){var r=O3(e),n=r.indexOf(\".\");if(n===-1)return r;for(var i,s=n+1;s<r.length;s++)if(i){if(r[s]!==i)break}else if(r[s]===\"0\"||r[s]===\"9\")i=r[s];else break;return r.substr(0,Math.max(n+5,s+t))}function dr(e,t){if(W(e)){let r=[];for(let n=0;n<t.length;n++)r.push(dr(We(e),t[n]));return`\\\\left[${r.join(\",\")}\\\\right]`}switch(e){case I:return ea(t);case N:{let[s,o]=t;return`\\\\left(${ea(s)},${ea(o)}\\\\right)`}case H:{let[s,o,a]=t;return`\\\\left(${ea(s)},${ea(o)},${ea(a)}\\\\right)`}case Gt:return\"\\\\operatorname{rgb}\\\\left(\"+[dr(I,t[0]),dr(I,t[1]),dr(I,t[2])].join(\",\")+\"\\\\right)\";case we:{let s=[];for(let o of t)s.push(dr(N,o));return\"\\\\operatorname{polygon}\\\\left(\"+s.join(\",\")+\"\\\\right)\"}case De:return\"\\\\operatorname{segment}\\\\left(\"+[dr(N,t[0]),dr(N,t[1])].join(\",\")+\"\\\\right)\";case ye:return\"\\\\operatorname{line}\\\\left(\"+[dr(N,t[0]),dr(N,t[1])].join(\",\")+\"\\\\right)\";case Le:return\"\\\\operatorname{ray}\\\\left(\"+[dr(N,t[0]),dr(N,t[1])].join(\",\")+\"\\\\right)\";case he:let r=t[0],n=t[1],i=[n[0]+r[0],n[1]+r[1]];return`\\\\operatorname{vector}\\\\left(${dr(N,n)},${dr(N,i)}\\\\right)`;case me:return\"\\\\operatorname{circle}\\\\left(\"+[dr(N,t[0]),dr(I,t[1])].join(\",\")+\"\\\\right)\";case fe:return\"\\\\operatorname{arc}\\\\left(\"+[dr(N,t[0]),dr(N,t[1]),dr(N,t[2])].join(\",\")+\"\\\\right)\";case Ne:return\"\\\\operatorname{angle}\\\\left(\"+[dr(N,t[0]),dr(I,t[1]),dr(I,t[2])].join(\",\")+\"\\\\right)\";case Te:return\"\\\\operatorname{directedangle}\\\\left(\"+[dr(N,t[0]),dr(I,t[1]),dr(I,t[2])].join(\",\")+\"\\\\right)\";case lr:return`\\\\operatorname{tone}\\\\left(${dr(I,t[0])},${dr(I,t[1])}\\\\right)`;default:throw new Error(\"Cannot serialize a value of type \"+le(e)+\".\")}}function hI(e){let t={};for(let r in e.updateRules)t[r]=bI(e,r);return t}function bI(e,t){let{valueType:r,value:n}=e.updateRules[t];return`${Qr(t)}=${dr(r,n)}`}var fo=class{constructor(t){this.xtolerance=t.xtolerance||t.tolerance||0,this.ytolerance=t.ytolerance||t.tolerance||0,this.ztolerance=t.ztolerance||t.tolerance||0,this.map=t.map,this.segments=[],this.segment=[],this.pivotPoint=void 0,this.pendingPoint=void 0}colinear(t,r,n){this.map&&(t=this.map(t),r=this.map(r),n=this.map(n));var i=Ws(n[0],n[1],n[2]||0,t[0],t[1],t[2]||0,r[0],r[1],r[2]||0);if(i<1)return!1;var s=[t[0]+i*(r[0]-t[0]),t[1]+i*(r[1]-t[1]),t.length===3?t[2]+i*(r[2]-t[2]):0];return Math.abs(n[0]-s[0])<=this.xtolerance&&Math.abs(n[1]-s[1])<=this.ytolerance&&(t.length===2||Math.abs(n[2]-s[2])<=this.ztolerance)}addPoint(t){if(this.dimensions=t.length,this.xtolerance<0&&this.ytolerance<0&&(this.dimensions===2||this.ztolerance<0)){this.segment.push.apply(this.segment,t);return}if(!this.segment.length){this.segment.push.apply(this.segment,t);return}let r=this.dimensions===2?[this.segment[this.segment.length-2],this.segment[this.segment.length-1]]:[this.segment[this.segment.length-3],this.segment[this.segment.length-2],this.segment[this.segment.length-1]];if(!(t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2])){if(!this.pivotPoint||!this.pendingPoint){this.pivotPoint=t,this.pendingPoint=t;return}(!this.colinear(r,this.pivotPoint,t)||Ts(r[0]-t[0],r[1]-t[1],(r[2]||0)-(t[2]||0))<Ts(r[0]-this.pendingPoint[0],r[1]-this.pendingPoint[1],(r[2]||0)-(this.pendingPoint[2]||0)))&&(this.flushPending(),this.pivotPoint=t),this.pendingPoint=t}}flushPending(){this.pendingPoint&&(this.segment.push.apply(this.segment,this.pendingPoint),this.pivotPoint=void 0,this.pendingPoint=void 0)}breakSegment(){this.flushPending(),this.segment.length>(this.dimensions||2)&&this.segments.push(this.segment),this.segment=[]}getSegments(){return this.breakSegment(),this.segments}finish(){return{segments:this.getSegments(),resolved:!0}}};var CS=5,S3=Math.pow(2,14);function of(e,t){let r=R3(e,t);return{segments:r.contours.strokeSegments,fillSegments:r.contours.fillSegments,resolved:r.quadTree.resolved}}function R3(e,t){let r=Math.pow(2,-CS),n=AS(t,r),i=AS(t,2*r),s=N3(e,n,i),o=V3(s.root,e,n),a=U3(o,e,n);return{paddedDomain:n,rootDomain:i,quadTree:s,triangles:o,contours:a}}function Il(e,t,r){return{x:e,y:t,z:r}}function Jy(e,t,r){return{x:e,y:t,isZero:r}}function jy(e,t,r){return{vertices:[e,t,r],visited:!1,next:void 0}}function AS(e,t){let{mathToPixels:r}=e,n=r.interpolateX(e.xmin,e.xmax,-t),i=r.interpolateX(e.xmax,e.xmin,-t),s=r.interpolateY(e.ymin,e.ymax,-t),o=r.interpolateY(e.ymax,e.ymin,-t);return Q(q({},e),{xmin:n,ymin:s,xmax:i,ymax:o})}function rf(e,t){return{depth:e,vertices:t,children:void 0,center:void 0}}function xI(e,t,r){e.center=_S(e.vertices[0],e.vertices[1],e.vertices[2],e.vertices[3],t,r)}function N3(e,t,r){let n=A3(e,r),i=[],s=[];s.push(n);let o=1,a=!0;e:for(;s.length;){let u=i;i=s,s=u;let c;for(;c=i.pop();)if(_3(c,e,t)){if(C3(c,e,t),!c.children){a=!1;break e}if(s.push(c.children[0]),s.push(c.children[1]),s.push(c.children[2]),s.push(c.children[3]),o+=3,o>=S3){a=!1;break e}}else xI(c,e,t)}for(let u=0;u<i.length;u++)xI(i[u],e,t);for(let u=0;u<s.length;u++)xI(s[u],e,t);return{root:n,resolved:a}}function A3(e,t){let r=t.xmin,n=t.xmax,i=t.ymin,s=t.ymax;return rf(0,[Tl(r,s,e),Tl(n,s,e),Tl(n,i,e),Tl(r,i,e)])}function C3(e,t,r){let n=e.depth+1,i=e.vertices[0],s=e.vertices[1],o=e.vertices[2],a=e.vertices[3],u=ei(i,s,t,r),c=ei(s,o,t,r),l=ei(o,a,t,r),p=ei(a,i,t,r),f=ei(i,o,t,r);e.children=[rf(n,[i,u,f,p]),rf(n,[u,s,c,f]),rf(n,[f,c,o,l]),rf(n,[p,f,l,a])]}function _3(e,t,r){if(e.depth<CS)return!0;if(w3(e,r)||L3(e,r))return!1;let n=e.vertices[0],i=e.vertices[1],s=e.vertices[2],o=e.vertices[3];if(isNaN(n.z)&&isNaN(i.z)&&isNaN(s.z)&&isNaN(o.z))return!1;if(isNaN(n.z)||isNaN(i.z)||isNaN(s.z)||isNaN(o.z))return!0;let a=_S(n,i,s,o,t,r),u=ra(n,i,t,r),c=ra(i,s,t,r),l=ra(s,o,t,r),p=ra(o,n,t,r);return hu(n,u,t,r)||hu(i,u,t,r)||hu(i,c,t,r)||hu(s,c,t,r)||hu(s,l,t,r)||hu(o,l,t,r)||hu(o,p,t,r)||hu(n,p,t,r)||gu(n,u,a,t,r)||gu(u,i,a,t,r)||gu(i,c,a,t,r)||gu(c,s,a,t,r)||gu(s,l,a,t,r)||gu(l,o,a,t,r)||gu(o,p,a,t,r)||gu(p,n,a,t,r)}function gu(e,t,r,n,i){if(e.z>0==t.z>0&&t.z>0==r.z>0)return!1;let s,o,a,u;if(e.z>0==t.z>0){if(s=ei(e,t,n,i),s.z>0!=e.z>0)return!0;o=ta(e,r,n,i),a=ta(t,r,n,i),u=ta(s,r,n,i)}else if(t.z>0==r.z>0){if(s=ei(t,r,n,i),s.z>0!=t.z>0)return!0;o=ta(t,e,n,i),a=ta(r,e,n,i),u=ta(s,e,n,i)}else{if(s=ei(r,e,n,i),s.z>0!=r.z>0)return!0;o=ta(r,t,n,i),a=ta(e,t,n,i),u=ta(s,t,n,i)}let{mathToPixels:c}=i,[l,p]=c.mapCoordinatePair([u.x,u.y]),[f,d]=c.mapCoordinatePair([o.x,o.y]),[g,m]=c.mapCoordinatePair([a.x,a.y]);return rE(l,p,f,d,g,m)>i.tolerance}function hu(e,t,r,n){if(isNaN(e.z)&&isNaN(t.z))return!1;if(isNaN(e.z)||isNaN(t.z))return e.z>0||t.z>0;let s=4*ei(e,t,r,n).z-t.z-3*e.z,o=1e-4,a=(r((1-o)*e.x+o*t.x,(1-o)*e.y+o*t.y)-e.z)/o,u=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.abs(s-a)>.125*u}function L3(e,t){let{mathToPixels:r}=t,[n,i]=r.mapCoordinatePair([e.vertices[1].x,e.vertices[1].y]),[s,o]=r.mapCoordinatePair([e.vertices[0].x,e.vertices[0].y]),[a,u]=r.mapCoordinatePair([e.vertices[3].x,e.vertices[3].y]);return Math.abs(n-s)<10*t.tolerance||Math.abs(o-u)<10*t.tolerance}function w3(e,t){return e.vertices[0].x<t.xmin||e.vertices[0].y>t.ymax||e.vertices[2].x>t.xmax||e.vertices[2].y<t.ymin}function El(e,t){return e.x<t.xmin||e.x>t.xmax||e.y<t.ymin||e.y>t.ymax}function Tl(e,t,r){return Il(e,t,r(e,t))}function ei(e,t,r,n){let{mathToPixels:i}=n;return Tl(i.interpolateX(e.x,t.x,.5),i.interpolateY(e.y,t.y,.5),r)}function ra(e,t,r,n){if(El(e,n)||El(t,n))return ei(e,t,r,n);if(isNaN(e.z)||isNaN(t.z))return F3(e,t,r,n);if(e.z>0!=t.z>0)return ei(e,t,r,n);let i=.01,s=r((1-i)*e.x+i*t.x,(1-i)*e.y+i*t.y)-e.z,o=t.z-r(i*e.x+(1-i)*t.x,i*e.y+(1-i)*t.y);return isNaN(s)||isNaN(o)||s>0==o>0?ei(e,t,r,n):LS(Il(e.x,e.y,s),Il(t.x,t.y,o),r,n)}function _S(e,t,r,n,i,s){let o=ra(e,r,i,s);return e.z>0==r.z>0&&o.z>0!=e.z>0||(o=ra(t,n,i,s),t.z>0==n.z>0&&o.z>0!=t.z>0)?o:ei(e,r,i,s)}function LS(e,t,r,n){if(isNaN(e.z))return t;if(isNaN(t.z))return e;if(!isFinite(e.z)&&!isFinite(t.z))return ei(e,t,r,n);if(isFinite(e.z))if(isFinite(t.z)){let i=1-e.z/t.z,s=1-t.z/e.z;return Tl(e.x/i+t.x/s,e.y/i+t.y/s,r)}else return e;else return t}function ta(e,t,r,n){let{mathToPixels:i}=n,s=e.x,o=t.x,a=e.y,u=t.y,c=e.z,l=t.z;if(El(e,n)||El(t,n)){let m=ei(e,t,r,n);return Jy(m.x,m.y,!1)}let[p,f]=i.mapCoordinatePair([s,a]),[d,g]=i.mapCoordinatePair([o,u]);for(;Math.abs(p-d)>n.tolerance||Math.abs(f-g)>n.tolerance;){let m=.5*(s+o),b=.5*(a+u),y=r(m,b);y>0==c>0?(s=m,a=b,c=y):(o=m,u=b,l=y),[p,f]=i.mapCoordinatePair([s,a]),[d,g]=i.mapCoordinatePair([o,u])}if(isNaN(c))return Jy(o,u,!1);if(isNaN(l))return Jy(s,a,!1);{let m=LS(Il(s,a,c),Il(o,u,l),r,n),b=c===0||l===0||m.z===0||m.z>=c==l>=m.z&&Math.abs(m.z)<1e250;return Jy(m.x,m.y,b)}}function F3(e,t,r,n){let{mathToPixels:i}=n;if(isNaN(e.z)===isNaN(t.z))return ei(e,t,r,n);if(isNaN(e.z)){let g=e;e=t,t=g}let s=e.x,o=t.x,a=e.y,u=t.y,c=e.z,[l,p]=i.mapCoordinatePair([s,a]),[f,d]=i.mapCoordinatePair([o,u]);for(;Math.abs(l-f)>n.tolerance||Math.abs(p-d)>n.tolerance;){let g=.5*(s+o),m=.5*(a+u),b=r(g,m);isNaN(b)===isNaN(c)?(s=g,a=m,c=b):(o=g,u=m),[l,p]=i.mapCoordinatePair([s,a]),[f,d]=i.mapCoordinatePair([o,u])}return Il(s,a,c)}function V3(e,t,r){let n={triangles:[],edgeCache:{},domain:r,fn:t};return nf(e,n),n.triangles}function nf(e,t){e.children&&(nf(e.children[0],t),nf(e.children[1],t),nf(e.children[2],t),nf(e.children[3],t),bu(e.children[0],e.children[1],t),bu(e.children[3],e.children[2],t),xu(e.children[1],e.children[2],t),xu(e.children[0],e.children[3],t))}function bu(e,t,r){e.children&&t.children?(bu(e.children[1],t.children[0],r),bu(e.children[2],t.children[3],r)):e.children?(bu(e.children[1],t,r),bu(e.children[2],t,r)):t.children?(bu(e,t.children[0],r),bu(e,t.children[3],r)):G3(e,t,r)}function xu(e,t,r){e.children&&t.children?(xu(e.children[2],t.children[1],r),xu(e.children[3],t.children[0],r)):e.children?(xu(e.children[2],t,r),xu(e.children[3],t,r)):t.children?(xu(e,t.children[1],r),xu(e,t.children[0],r)):B3(e,t,r)}function G3(e,t,r){if(!e.center||!t.center)return;let n,i;e.depth>=t.depth?(n=ra(e.vertices[1],e.vertices[2],r.fn,r.domain),i=eg(e.vertices[1],t.center,e.vertices[2],e.center,n)):(n=ra(t.vertices[0],t.vertices[3],r.fn,r.domain),i=eg(t.vertices[0],t.center,t.vertices[3],e.center,n)),wS(i,r.edgeCache,r.domain);for(let s=0;s<4;s++)r.triangles.push(i[s])}function B3(e,t,r){if(!e.center||!t.center)return;let n,i;e.depth>=t.depth?(n=ra(e.vertices[3],e.vertices[2],r.fn,r.domain),i=eg(e.vertices[2],t.center,e.vertices[3],e.center,n)):(n=ra(t.vertices[1],t.vertices[0],r.fn,r.domain),i=eg(t.vertices[1],t.center,t.vertices[0],e.center,n)),wS(i,r.edgeCache,r.domain);for(let s=0;s<4;s++)r.triangles.push(i[s])}function eg(e,t,r,n,i){return[jy(e,i,t),jy(t,i,r),jy(r,i,n),jy(n,i,e)]}function sf(e,t,r){return e.z>0&&!El(e,r)&&(!(t.z>0)||El(t,r))}function Qy(e,t){return\"\"+e.x+\",\"+e.y+\",\"+t.x+\",\"+t.y}function wS(e,t,r){Ky(e[0],e[1],e[2],Qy(e[1].vertices[2],e[1].vertices[0]),t,r),Ky(e[1],e[2],e[3],Qy(e[2].vertices[0],e[2].vertices[2]),t,r),Ky(e[2],e[3],e[0],Qy(e[3].vertices[2],e[3].vertices[0]),t,r),Ky(e[3],e[0],e[1],Qy(e[0].vertices[0],e[0].vertices[2]),t,r)}function Ky(e,t,r,n,i,s){let o=t.vertices[0],a=t.vertices[1],u=t.vertices[2];sf(a,u,s)&&(t.next=r),sf(o,a,s)&&(t.next=e),sf(u,o,s)&&H3(t,n,i),sf(o,u,s)&&z3(t,n,i)}function z3(e,t,r){r[t]?r[t].next=e:r[t]=e}function H3(e,t,r){r[t]?e.next=r[t]:r[t]=e}function U3(e,t,r){let{tolerance:n,mathToPixels:i}=r,s={tolerance:n,map:a=>i.mapCoordinatePair(a)},o={fillAccumulator:new fo(s),strokeAccumulator:new fo(s),fn:t,domain:r};for(let a=0;a<e.length;a++){let u=e[a];u.next&&!u.visited&&q3(u,o)}return{strokeSegments:o.strokeAccumulator.finish().segments,fillSegments:o.fillAccumulator.finish().segments}}function q3(e,t){for(;;){let r=e.vertices[0],n=e.vertices[1],i=e.vertices[2];if(PI(r,n,t),PI(n,i,t),PI(i,r,t),e.visited||!e.next)break;e.visited=!0,e=e.next}t.strokeAccumulator.breakSegment(),t.fillAccumulator.breakSegment()}function PI(e,t,r){if(sf(e,t,r.domain)){let n=ta(e,t,r.fn,r.domain);r.fillAccumulator.addPoint([n.x,n.y]),n.isZero?r.strokeAccumulator.addPoint([n.x,n.y]):r.strokeAccumulator.breakSegment()}}var $i={pointsOfInterest:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,sliders:!0};function TI(e){return Math.abs(e)<5e-8}var af=class extends fo{constructor(r,n,i){let{tolerance:s,mathToPixels:o}=r;super({tolerance:s,map:a=>o.mapCoordinatePair(a)});this.fn=n,this.mappedFn=a=>o.mapY(n(a)),this.derivative=i,this.poiData={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}},this.zeroBuffer=[],this.extremumBuffer=[]}getPOI(){return $i.pointsOfInterest?(this.poiData.intercept=this.findIntercept(this.fn),this.poiData):{zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}}}addPoint(r){this.segment.length===0&&TI(r[1])&&(this.poiData.zeros.x.push(r[0]),this.poiData.zeros.y.push(r[1])),this.updateZeroBuffer(r),this.updateExtremumBuffer(r),super.addPoint(r)}updateZeroBuffer(r){let[n,i]=this.map?this.map(r):r;if(!isFinite(n)||!isFinite(i)){this.zeroBuffer.length=0;return}switch(this.zeroBuffer.length){case 0:{if(TI(r[1]))return;this.zeroBuffer.push(r);return}case 1:if(r[1]===0){this.zeroBuffer.push(r);return}else if(r[1]>0!=this.zeroBuffer[0][1]>0){let s=bP(this.zeroBuffer[0][0],this.zeroBuffer[0][1],r[0],r[1],this.fn);s&&(this.poiData.zeros.x.push(s[0]),this.poiData.zeros.y.push(s[1])),this.zeroBuffer.length=0,this.zeroBuffer.push(r);return}else{this.zeroBuffer.length=0,this.zeroBuffer.push(r);return}case 2:{if(r[1]===0)return;if(r[1]>0!=this.zeroBuffer[0][1]>0){let s=vp(this.zeroBuffer[0][0],this.zeroBuffer[0][1],this.zeroBuffer[1][0],this.zeroBuffer[1][1],r[0],r[1],this.fn);s&&(this.poiData.zeros.x.push(s[0]),this.poiData.zeros.y.push(s[1])),this.zeroBuffer.length=0,this.zeroBuffer.push(r);return}else{this.zeroBuffer.length=0,this.zeroBuffer.push(r);return}}}}updateExtremumBuffer(r){let[n,i]=this.map?this.map(r):r;if(!isFinite(n)||!isFinite(i)){this.extremumBuffer.length=0;return}switch(this.extremumBuffer.length){case 0:{this.extremumBuffer.push(r);return}case 1:{r[1]===this.extremumBuffer[0][1]&&(this.extremumBuffer.length=0),this.extremumBuffer.push(r);return}case 2:if(r[1]===this.extremumBuffer[1][1]){this.extremumBuffer.push(r);return}else if(r[1]>this.extremumBuffer[1][1]!=this.extremumBuffer[1][1]>this.extremumBuffer[0][1]){let s=this.bisectExtremumUsingDerivative(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],r[0],r[1]);s&&(this.poiData.extrema.x.push(s[0]),this.poiData.extrema.y.push(s[1]),!el(this.extremumBuffer[0][0],this.mappedFn(this.extremumBuffer[0][0]),s[0],this.mappedFn(s[0]),r[0],this.mappedFn(r[0]),this.mappedFn,this.ytolerance)&&s[0]>this.segment[this.segment.length-2]&&(this.pendingPoint=s)),this.extremumBuffer.shift(),this.extremumBuffer.push(r);return}else{this.extremumBuffer.shift(),this.extremumBuffer.push(r);return}case 3:{if(r[1]===this.extremumBuffer[1][1])return;if(r[1]>this.extremumBuffer[1][1]!=this.extremumBuffer[1][1]>this.extremumBuffer[0][1]){let s,o=.5*(this.extremumBuffer[1][0]+this.extremumBuffer[2][0]),a=this.fn(o);a===this.extremumBuffer[1][1]?s=vp(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],r[0],r[1],this.fn):s=this.bisectExtremumUsingDerivative(this.extremumBuffer[1][0],this.extremumBuffer[1][1],o,a,this.extremumBuffer[2][0],this.extremumBuffer[2][1]),s&&(this.poiData.extrema.x.push(s[0]),this.poiData.extrema.y.push(s[1])),this.extremumBuffer.shift(),this.extremumBuffer.shift(),this.extremumBuffer.push(r);return}else{this.extremumBuffer.shift(),this.extremumBuffer.shift(),this.extremumBuffer.push(r);return}}}}bisectExtremumUsingDerivative(r,n,i,s,o,a){let u;if(this.derivative){let c=this.derivative(r),l=this.derivative(o);if(!isNaN(c)&&!isNaN(l)&&(s>n&&c>0&&l<0||s<n&&c<0&&l>0)){let p=bP(r,c,o,l,this.derivative);p&&(u=[p[0],this.fn(p[0])])}}return u||(u=ZM(r,n,i,s,o,a,this.fn)),u}breakSegment(){this.zeroBuffer.length=0,this.extremumBuffer.length=0,this.flushPending(),this.segment.length>2&&(this.segments.push(this.segment),TI(this.segment[this.segment.length-1])&&(this.poiData.zeros.x.push(this.segment[this.segment.length-2]),this.poiData.zeros.y.push(this.segment[this.segment.length-1]))),this.segment=[]}findIntercept(r){if(!r)return{x:[],y:[]};let n=r(0);return isFinite(n)?{x:[0],y:[r(0)]}:{x:[],y:[]}}finish(){return{segments:this.getSegments(),resolved:!0,poi:this.getPOI()}}};var k3=e=>{for(var t=[],r=[],n=e.length,i=0;i<n;i++)t.push(e[i][0]),r.push(e[i][1]);return{defined:{x:t,y:r}}},Ls=k3;var{sin:Y3,cos:X3}=Math,it=class e{constructor(t=0,r=0,n=0){this.x=t;this.y=r;this.z=n}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,r,n){return this.x=t,this.y=r,this.z=n,this}clone(){return new e(this.x,this.y,this.z)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}isZero(){return this.x===0&&this.y===0&&this.z===0}isFinite(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this}multiply(t){return this.x*=t,this.y*=t,this.z*=t,this}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){return this.multiply(1/this.magnitude()),this}cross(t){return this.crossVectors(this,t)}crossVectors(t,r){let n=t.x,i=t.y,s=t.z,o=r.x,a=r.y,u=r.z;return this.x=i*u-s*a,this.y=s*o-n*u,this.z=n*a-i*o,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}rotateAroundAxis(t,r){let n=Z3(t,r);return new e(n[0]*this.x+n[1]*this.y+n[2]*this.z,n[3]*this.x+n[4]*this.y+n[5]*this.z,n[6]*this.x+n[7]*this.y+n[8]*this.z)}};function Z3(e,t){let r=e.x,n=e.y,i=e.z,s=Y3(t),o=X3(t),a=1-o;return[a*r*r+o,a*r*n+s*i,a*r*i-s*n,a*n*r-s*i,a*n*n+o,a*n*i+s*r,a*i*r+s*n,a*i*n-s*r,a*i*i+o]}var be=class{constructor(t,r){this.min=t;this.max=r}get width(){return this.max-this.min}};function uf(e,t,r,n,i,s=100){if(isFinite(n)||([n,i]=[i,n],[t,r]=[r,t]),isFinite(i))return II(e,t,r,n,i,s);for(;;){let o=ko(t,r,.5),a=e(...o);if(a===0)return o;if(!isFinite(a))r=o,i=a;else if(n<0==a<0)t=o,n=a;else return r=o,i=a,II(e,t,r,n,i,s);if(s*=.5,s<1)return}}function FS(e,t,r,n,i,s=100){if(isFinite(n)||([n,i]=[i,n],[t,r]=[r,t]),!isFinite(i))for(;;){let o=ko(t,r,.5),a=e(...o);if(a===0)return{posNeg:o};if(!isFinite(a))r=o,i=a;else if(n<0==a<0)t=o,n=a;else if(n>0){r=o,i=a;break}else return{posNeg:EI(e,o,t,a,n,s),posNaN:$3(e,o,r,s)};if(s*=.5,s<1){let u=ko(t,r,.5);return n>0?{posNaN:u}:{}}}return{posNeg:II(e,t,r,n,i,s)}}function II(e,t,r,n,i,s){return n>0?EI(e,t,r,n,i,s):EI(e,r,t,i,n,s)}function EI(e,t,r,n,i,s){let o=n-i;for(;;){let a=ko(t,r,.5),u=e(...a);if(u<0)r=a,i=u;else if(u>0)t=a,n=u;else return u===0?a:void 0;if(s*=.5,s<1){if(n-i<.1*o)return ko(t,r,.5);if(s<1e-6)return}}}function $3(e,t,r,n){for(;;){let i=ko(t,r,.5),s=e(...i);if(!isFinite(s))r=i;else if(s>=0)t=i;else return;if(n*=.5,n<1)return ko(t,r,.5)}}function dc(e,t){return[e[0],e[1],t(e)]}function tg(e,t,r,n){let{triangles:i,vertices:s}=W3(n,e,t,r),{extraAttrCount:o}=n,a=new Array(s.length),u=new Array(s.length*3),c=[],l=!1,p=new Array(s.length*3),f=new Array(s.length*2),d=new Array(s.length*o),g=[],m=0;function b(h){let x=s[h],P=n.getVertex(x);if(!P)return null;let E=n.getNormal(x);if(E?(p[3*m]=E[0],p[3*m+1]=E[1],p[3*m+2]=E[2]):(c[m]=!0,l=!0,p[3*m]=0,p[3*m+1]=0,p[3*m+2]=0),u[3*m]=P[0],u[3*m+1]=P[1],u[3*m+2]=P[2],f[2*m]=x[0],f[2*m+1]=x[1],o>0){let T=n.getExtraAttrs(x);for(let M=0;M<o;M++)d[o*m+M]=T[M]}return m++}function y(h){let x=a[h];return x===void 0?a[h]=b(h):x}for(let[h,x,P]of i){let E=y(h),T=y(x),M=y(P);if(E===null||T===null||M===null)continue;g.push(E,T,M);let O=c[E],S=c[T],C=c[M];if(O||S||C){let A=u,L=p,Z=new it(A[3*E],A[3*E+1],A[3*E+2]),w=new it(A[3*T],A[3*T+1],A[3*T+2]),z=new it(A[3*M],A[3*M+1],A[3*M+2]),F=new it().subVectors(z,Z),X=new it().subVectors(Z,w),ee=F.cross(X);if(!ee.isFinite())continue;O&&(L[3*E+0]+=ee.x,L[3*E+1]+=ee.y,L[3*E+2]+=ee.z),S&&(L[3*T+0]+=ee.x,L[3*T+1]+=ee.y,L[3*T+2]+=ee.z),C&&(L[3*M+0]+=ee.x,L[3*M+1]+=ee.y,L[3*M+2]+=ee.z)}}if(u.length=m*3,p.length=m*3,f.length=m*2,l)for(let h=0;h<m;h++){if(!c[h])continue;let x=p[3*h],P=p[3*h+1],E=p[3*h+2],T=Math.sqrt(x*x+P*P+E*E);p[3*h]=x/T,p[3*h+1]=P/T,p[3*h+2]=E/T}return cf(g,u,p,f,o,d),{positions:u,normals:p,faces:g,uvs:f,extraAttrs:d}}function cf(e,t,r,n,i,s){let[o,a,u]=[new it,new it,new it],[c,l,p]=[new it,new it,new it],[f,d]=[new it,new it];for(let m=0;m<e.length/3;m++){let b=e[3*m],y=e[3*m+1],h=e[3*m+2];o.set(t[3*b],t[3*b+1],t[3*b+2]),a.set(t[3*y],t[3*y+1],t[3*y+2]),u.set(t[3*h],t[3*h+1],t[3*h+2]),c.set(r[3*b],r[3*b+1],r[3*b+2]),l.set(r[3*y],r[3*y+1],r[3*y+2]),p.set(r[3*h],r[3*h+1],r[3*h+2]),f.subVectors(u,o),d.subVectors(o,a);var g=f.cross(d).normalize();let x=.7,P=c.dot(g)>x&&l.dot(g)>x&&p.dot(g)>x;if(c.dot(l)<0||c.dot(p)<0||l.dot(p)<0||!P){let E=t.length/3;e[3*m]=E,e[3*m+1]=E+1,e[3*m+2]=E+2,t.push(o.x,o.y,o.z),t.push(a.x,a.y,a.z),t.push(u.x,u.y,u.z),r.push(g.x,g.y,g.z),r.push(g.x,g.y,g.z),r.push(g.x,g.y,g.z),n.push(n[2*b],n[2*b+1]),n.push(n[2*y],n[2*y+1]),n.push(n[2*h],n[2*h+1]);let T=i;if(i>0){for(let M=0;M<T;M++)s.push(s[T*b+M]);for(let M=0;M<T;M++)s.push(s[T*y+M]);for(let M=0;M<T;M++)s.push(s[T*h+M])}}}}var MI=class{constructor(t,r,n){this.params=t;this.uRange=r;this.vRange=n;this.vertices=[];this.triangles=[];this.edgeVertices=new Map;this.finiteVertices=new Map}addVertex(t){return this.vertices.push(t)-1}jumpAlongEdge(t,r){let n=[0,1];t>r&&([t,r]=[r,t],n=[1,0]);let i=r*r+t,s=this.edgeVertices.get(i);if(s!==void 0)return[s[n[0]],s[n[1]]];let o=this.params.findJumpBetweenTwo3DPoints(this.vertices[t],this.vertices[r]);if(o===void 0)return;let a=[this.addVertex(o[0]),this.addVertex(o[1])];return this.edgeVertices.set(i,a),[a[n[0]],a[n[1]]]}finiteAlongEdge(t,r){t>r&&([t,r]=[r,t]);let n=r*r+t,i=this.finiteVertices.get(n);if(i!==void 0)return i;let s=this.params.findFiniteBetweenTwoPoints(this.vertices[t],this.vertices[r]);if(s===void 0)return;let o=this.addVertex(s);return this.finiteVertices.set(n,o),o}pushTriangle(t,r,n){this.params.isDegenerate(this.vertices[t],this.vertices[r],this.vertices[n])||this.triangles.push([t,r,n])}getTriangles(){return this.triangles}};function W3(e,t,r,n){let i=n,s=[t.min,r.min],o=[t.max,r.max],{fn:a}=e,u=new MI(e,t,r);function c(y,h,x,P){u.pushTriangle(P[0],x,y),u.pushTriangle(P[1],h,x)}function l(y,h,x,P,E){u.pushTriangle(P[0],x,y),u.pushTriangle(P[0],E[1],x),u.pushTriangle(P[1],h,E[0])}function p(y,h,x){let P=u.jumpAlongEdge(y,h),E=u.jumpAlongEdge(h,x),T=u.jumpAlongEdge(x,y);if(P&&E&&T){let M=u.vertices[y],O=u.vertices[h],S=u.vertices[x],C=u.addVertex(dc(Rn(M,Rn(O,S,.5),1e-4),a)),A=u.addVertex(dc(Rn(O,Rn(S,M,.5),1e-4),a)),L=u.addVertex(dc(Rn(S,Rn(M,O,.5),1e-4),a)),Z=u.jumpAlongEdge(C,A),w=u.jumpAlongEdge(A,L),z=u.jumpAlongEdge(L,C);if(Z&&w&&z)return;y=C,h=A,x=L,P=Z,E=w,T=z}P&&E?l(y,h,x,P,E):E&&T?l(h,x,y,E,T):T&&P?l(x,y,h,T,P):P?c(y,h,x,P):E?c(h,x,y,E):T?c(x,y,h,T):u.pushTriangle(y,h,x)}function f(y,h,x){let P=u.finiteAlongEdge(h,x),E=u.finiteAlongEdge(y,x);E!==void 0&&P!==void 0&&(p(P,y,h),p(P,E,y))}function d(y,h,x){let P=u.finiteAlongEdge(y,h),E=u.finiteAlongEdge(y,x);P!==void 0&&E!==void 0&&p(y,P,E)}function g(y,h,x){let P=u.vertices[y][2],E=u.vertices[h][2],T=u.vertices[x][2],M=e.allowVertex(P),O=e.allowVertex(E),S=e.allowVertex(T);M&&O&&S?p(y,h,x):M&&O?f(y,h,x):O&&S?f(h,x,y):S&&M?f(x,y,h):M?d(y,h,x):O?d(h,x,y):S&&d(x,y,h)}let m=i-1,b=new Array(i*i);b[0]=u.addVertex(dc(s,a));for(let y=1;y<=m;y++)b[y]=u.addVertex(dc(wm(s,o,[y/m,0]),a)),b[i*y]=u.addVertex(dc(wm(s,o,[0,y/m]),a));for(let y=1;y<=m;y++)for(let h=1;h<=m;h++){let x=b[(h-1)*i+(y-1)],P=b[h*i+(y-1)],E=b[(h-1)*i+y],T=u.addVertex(dc(wm(s,o,[y/m,h/m]),a));b[h*i+y]=T,g(x,T,P),g(x,E,T)}return{triangles:u.getTriangles(),vertices:u.vertices}}var rg=[[1,2,4,21,20,18],[0,1,3,20,19,18],[2,6,7,25,21,18],[5,6,8,25,22,18],[5,9,11,23,22,18],[0,9,10,23,19,18],[10,12,14,24,23,19],[3,12,13,24,20,19],[4,13,15,24,21,20],[15,7,16,25,24,21],[11,17,14,24,23,22],[17,8,16,25,24,22]],bn=[0,1,0,2,0,3,1,2,2,3,0,4,0,7,3,7,4,7,0,5,1,5,4,5,1,6,2,6,5,6,3,6,6,7,4,6,0,8,1,8,2,8,3,8,4,8,5,8,6,8,7,8],GS=[[0,2,3,8],[0,1,2,8],[0,3,7,8],[0,4,7,8],[0,4,5,8],[0,1,5,8],[1,5,6,8],[1,2,6,8],[2,3,6,8],[3,6,7,8],[4,5,6,8],[4,6,7,8]],BS=[[0,0,0],[0,1,0],[1,1,0],[1,0,0],[0,0,1],[0,1,1],[1,1,1],[1,0,1],[.5,.5,.5]],DI=[[1,2,4],[4,20,21],[2,18,21],[1,18,20],[0,1,3],[3,19,20],[0,18,19],[2,6,7],[7,21,25],[6,18,25],[5,6,8],[8,22,25],[5,18,22],[5,9,11],[11,22,23],[9,18,23],[0,9,10],[10,19,23],[10,12,14],[14,23,24],[12,19,24],[3,12,13],[13,20,24],[4,13,15],[15,21,24],[15,7,16],[16,24,25],[11,17,14],[17,22,24],[17,8,16]],vI=[];for(let e=0;e<30;e++){let t=DI[e],r=new Set;for(let n of t)r.add(bn[n*2]),r.add(bn[n*2+1]);vI[e]=[...r]}var zS=[[0,3,2,1],[4,6,3,5],[7,2,9,8],[10,12,9,11],[13,12,15,14],[16,6,15,17],[18,17,20,19],[21,5,20,22],[23,1,22,24],[25,24,8,26],[27,14,28,19],[29,28,11,26]],J3=1<<31,j3=1<<30,VS=1<<24,mc=1<<24,as=1<<24,ws=65536,Fs=256,Vs=1;function HS(e,t,r){return r*ws+t*Fs+e*Vs}var Q3={0:0*VS,1:Fs,2:Vs+Fs,3:Vs,4:ws,5:Fs+ws,6:Vs+Fs+ws,7:Vs+ws,8:8*VS};function US(e,t){return J3+e+Q3[t]}var K3={3:2*as+Fs,4:0*as+Vs,7:5*as+Vs,8:2*as+ws,10:5*as+Fs,11:0*as+ws,12:6*as+Fs,13:5*as+Vs+Fs,14:2*as+Fs+ws,15:9*as+Vs,16:0*as+Vs+ws,17:1*as+ws};function lf(e,t){var r;return j3+e+((r=K3[t])!=null?r:as*t)}var eG={18:10*mc+Fs,21:7*mc+Fs,23:16*mc+Vs,25:13*mc+Vs,27:4*mc+ws,29:0*mc+ws};function OI(e,t){var r;return e+((r=eG[t])!=null?r:mc*t)}var Ml=class{constructor(t,r,n,i,s){this.PAConstructor=t;this.x=r;this.y=n;this.z=i;this.gridsize=s;this.i=0;this.j=0;this.k=0;this.cubeVertex=new Array(9);this.cubeVertexValue=new this.PAConstructor(9);if(s>250)throw new Error(\"Programming Error: resolution should be clamped well below 250.\");this.size=new it(this.x.width/s,this.y.width/s,this.z.width/s)}loopOverUnitCubes(t){let r=this.gridsize,n=r+1,i=new ng(this.x.min,this.y.min,this.z.min,this.size.x,this.size.y,this.size.z,r+1,r+1,r+1),s=new ng(this.x.min+this.size.x/2,this.y.min+this.size.y/2,this.z.min+this.size.z/2,this.size.x,this.size.y,this.size.z,r,r,r),o=i.setupArray(this.PAConstructor),a=i.setupArray(this.PAConstructor),u=s.setupArray(this.PAConstructor);this.evaluateArray(a,i,0);for(let c=0;c<r;c++){this.k=c,[o,a]=[a,o],this.evaluateArray(a,i,c+1),this.evaluateArray(u,s,c);for(let l=0;l<r;l++){this.j=l;for(let p=0;p<r;p++){this.i=p;let f=l*n+p;this.cubeVertexValue.setFrom(0,o,f),this.cubeVertexValue.setFrom(1,o,f+n),this.cubeVertexValue.setFrom(2,o,f+n+1),this.cubeVertexValue.setFrom(3,o,f+1),this.cubeVertexValue.setFrom(4,a,f),this.cubeVertexValue.setFrom(5,a,f+n),this.cubeVertexValue.setFrom(6,a,f+n+1),this.cubeVertexValue.setFrom(7,a,f+1),this.cubeVertexValue.setFrom(8,u,l*r+p),t()}}}}evaluateArray(t,r,n){let i=r.z0+n*r.dz;for(let s=0;s<r.numX;s++)for(let o=0;o<r.numY;o++){let a=r.x0+s*r.dx,u=r.y0+o*r.dy;this.setAt(t,o*r.numX+s,a,u,i)}}setVertexPositions(){for(let t=0;t<9;t++){let r=BS[t];this.cubeVertex[t]=[this.x.min+(this.i+r[0])*this.size.x,this.y.min+(this.j+r[1])*this.size.y,this.z.min+(this.k+r[2])*this.size.z]}}},ng=class{constructor(t,r,n,i,s,o,a,u,c){this.x0=t;this.y0=r;this.z0=n;this.dx=i;this.dy=s;this.dz=o;this.numX=a;this.numY=u;this.numZ=c}setupArray(t){return new t(this.numX*this.numY)}};var ig=class{constructor(t){this.length=t;this.n=1;this.buffer=new Float64Array(t)}set(t,r){this.buffer[t]=r}get(t){return this.buffer[t]}setFrom(t,r,n){if(r.n!==this.n)throw new Error(\"Programming Error: Mismatched dimensions\");this.set(t,r.get(n))}},sg=class{constructor(t){this.length=t;this.n=2;this.buffer=new Float64Array(t*2)}set(t,r,n){this.buffer[t*2]=r,this.buffer[t*2+1]=n}getX(t){return this.buffer[t*2]}getY(t){return this.buffer[t*2+1]}setFrom(t,r,n){if(r.n!==this.n)throw new Error(\"Programming Error: Mismatched dimensions\");this.set(t,r.getX(n),r.getY(n))}};var ff=50;function yc(e){return e!==void 0&&e!==0}function tG(e){return yc(e.posNeg)||yc(e.posNaN)}var pf={};function SI(e=pf,t=pf,r=pf){return{edge0:e,edge1:t,edge2:r}}function qS(e,t,r,n,{isInequality:i}){return new RI(e,t,new be(r.xmin,r.xmax),new be(r.ymin,r.ymax),new be(r.zmin,r.zmax),n,{isInequality:i}).fullLoopOverUnitCubes()}var RI=class extends Ml{constructor(r,n,i,s,o,a,{isInequality:u}){super(ig,i,s,o,a);this.f=r;this.gradient=n;this.cubeEdge=new Array(26);this.face=SI();this.cubeHasCrossing=!1;this.allNormalsFromGradient=!0;this.normalFromGradient=[];this.edgesMaybeCross=0;this.positions=[];this.uvs=[];this.normals=[];this.triangles=[];this.isInequality=u,this.sheet=Array((a+1)*(a+1)),this.strip=Array(a+1);for(let c=0;c<(a+1)*(a+1);c++)this.sheet[c]=SI();for(let c=0;c<a+1;c++)this.strip[c]=SI()}setAt(r,n,i,s,o){let a=this.f(i,s,o);r.set(n,a)}fullLoopOverUnitCubes(){this.positions=[],this.normals=[],this.triangles=[],this.loopOverUnitCubes(this.onEachCube.bind(this));let{uvs:r,positions:n,normals:i}=this;if(!this.allNormalsFromGradient)for(let s=0;s<i.length/3;s++){if(this.normalFromGradient[s])continue;let o=i[3*s],a=i[3*s+1],u=i[3*s+2],c=Math.sqrt(o*o+a*a+u*u);i[3*s]=o/c,i[3*s+1]=a/c,i[3*s+2]=u/c}return cf(this.triangles,this.positions,i,r,0,[]),{positions:n,normals:i,faces:this.triangles,uvs:r,extraAttrs:[]}}onEachCube(){this.edgesMaybeCross=0,this.cubeHasCrossing=!1;for(let r=0;r<26;r++){let n=this.cubeVertexValue.get(bn[r*2]),i=this.cubeVertexValue.get(bn[r*2+1]);(n===0||i===0)&&(this.cubeHasCrossing=!0),!(n>0&&i>0||n<0&&i<0)&&(isFinite(n)||isFinite(i))&&(this.edgesMaybeCross|=1<<r)}this.edgesMaybeCross&&(this.setVertexPositions(),this.setEdges()),this.saveEdges(),this.cubeHasCrossing&&this.generateTriangles()}setEdges(){let{i:r,j:n,k:i,gridsize:s}=this,o=this.sheet[(r+0)*(s+1)+n+0],a=this.sheet[(r+1)*(s+1)+n+0],u=this.sheet[(r+0)*(s+1)+n+1],c=0;i>0&&(this.cubeEdge[0]=o.edge0,this.cubeEdge[1]=o.edge1,this.cubeEdge[2]=o.edge2,this.cubeEdge[3]=u.edge2,this.cubeEdge[4]=a.edge0,c|=31),n>0&&(this.cubeEdge[5]=this.strip[r].edge0,this.cubeEdge[6]=this.strip[r].edge1,this.cubeEdge[7]=this.strip[r+1].edge0,this.cubeEdge[8]=this.strip[r].edge2,c|=480,i==0&&(this.cubeEdge[2]=o.edge2,c|=4)),r>0&&(this.cubeEdge[9]=this.face.edge0,this.cubeEdge[10]=this.face.edge1,this.cubeEdge[11]=this.face.edge2,c|=3584,i==0&&(this.cubeEdge[0]=o.edge0,c|=1),n==0&&(this.cubeEdge[5]=this.strip[r].edge0,c|=32));for(let l=0;l<26;l++){if(~this.edgesMaybeCross>>l&1){this.cubeEdge[l]=pf;continue}if(c>>l&1){!this.cubeHasCrossing&&(this.cubeEdge[l].posNeg||this.cubeEdge[l].posNaN)&&(this.cubeHasCrossing=!0);continue}let p=this.findSurfaceCrossingEDI(bn[l*2],bn[l*2+1]);this.cubeEdge[l]=p,tG(p)&&(this.cubeHasCrossing=!0)}}saveEdges(){let{i:r,j:n,k:i,gridsize:s}=this;i<s-1&&(this.sheet[(r+0)*(s+1)+n+0].edge0=this.cubeEdge[11],this.sheet[(r+0)*(s+1)+n+0].edge1=this.cubeEdge[17],this.sheet[(r+0)*(s+1)+n+0].edge2=this.cubeEdge[8]),n<s-1&&(this.strip[r].edge0=this.cubeEdge[10],this.strip[r].edge1=this.cubeEdge[12],this.strip[r].edge2=this.cubeEdge[14]),r<s-1&&(this.face.edge0=this.cubeEdge[15],this.face.edge1=this.cubeEdge[13],this.face.edge2=this.cubeEdge[16]),i==0&&(this.sheet[(r+0)*(s+1)+n+1].edge2=this.cubeEdge[3],this.sheet[(r+1)*(s+1)+n+0].edge0=this.cubeEdge[4]),n==0&&(this.strip[r+1].edge0=this.cubeEdge[7]),n==s-1&&(this.sheet[r*(s+1)+s].edge2=this.cubeEdge[14]),r==s-1&&(this.sheet[(s+0)*(s+1)+n].edge0=this.cubeEdge[16],this.strip[s].edge0=this.cubeEdge[13])}findSurfaceCrossingEDI(r,n){let i=this.cubeVertexValue.get(r),s=this.cubeVertexValue.get(n);if(i===0||s===0)return pf;let o=this.cubeVertex[r],a=this.cubeVertex[n];if(this.isInequality){let{posNeg:u,posNaN:c}=FS(this.f,o,a,i,s);return{posNeg:u!==void 0?this.pushPositionWithGradient(...u):void 0,posNaN:c!==void 0?this.pushPositionNoGradient(...c):void 0}}else{let u=uf(this.f,o,a,i,s);return{posNeg:u!==void 0?this.pushPositionWithGradient(...u):void 0}}}pushPositionWithGradient(r,n,i){if(!(isFinite(r)&&isFinite(n)&&isFinite(i)))return 0;let[s,o,a]=this.computeGradient(r,n,i),u=Math.sqrt(s*s+o*o+a*a);return s/=-u,o/=-u,a/=-u,$a(s,o,a)?(this.normalFromGradient.push(!0),this._pushPositionAndNormal(r,n,i,s,o,a)):this.pushPositionNoGradient(r,n,i)}pushPositionNoGradient(r,n,i){return isFinite(r)&&isFinite(n)&&isFinite(i)?(this.allNormalsFromGradient=!1,this.normalFromGradient.push(!1),this._pushPositionAndNormal(r,n,i,0,0,0)):0}_pushPositionAndNormal(r,n,i,s,o,a){return this.positions.push(r,n,i),this.uvs.push((r-this.x.min)/this.x.width,(n-this.y.min)/this.y.width),this.normals.push(s,o,a),this.positions.length/3}computeGradient(r,n,i){let s=NaN,o=NaN,a=NaN;if(this.gradient&&([s,o,a]=this.gradient(r,n,i),isFinite(s)&&isFinite(o)&&isFinite(a)))return[s,o,a];let u=.001*Math.min(this.size.x,this.size.y,this.size.z),c=this.f(r,n,i);if(isFinite(s)||(s=(this.f(r+u,n,i)-c)/u),isFinite(s)||(s=(c-this.f(r-u,n,i))/u),isFinite(o)||(o=(this.f(r,n+u,i)-c)/u),isFinite(o)||(o=(c-this.f(r,n-u,i))/u),isFinite(a)||(a=(this.f(r,n,i+u)-c)/u),isFinite(a)||(a=(c-this.f(r,n,i-u))/u),isFinite(s)&&isFinite(o)&&isFinite(a))return[s,o,a];let l=NaN,p=NaN,f=NaN,d=NaN,g=NaN,m=NaN,b=u/2;return(!isFinite(s)||!isFinite(o))&&(l=(this.f(r+b,n+b,i)-c)/u,isFinite(l)||(l=(c-this.f(r-b,n-b,i))/u),p=(this.f(r+b,n-b,i)-c)/u,isFinite(p)||(p=(c-this.f(r-b,n+b,i))/u),isFinite(l)&&isFinite(p)&&(isFinite(s)||(s=l+p),isFinite(o)||(o=l-p))),(!isFinite(o)||!isFinite(a))&&(f=(this.f(r,n+b,i+b)-c)/u,isFinite(f)||(f=(c-this.f(r,n-b,i-b))/u),d=(this.f(r,n+b,i-b)-c)/u,isFinite(d)||(d=(c-this.f(r,n-b,i+b))/u),isFinite(f)&&isFinite(d)&&(isFinite(o)||(o=f+d),isFinite(a)||(a=f-d))),(!isFinite(a)||!isFinite(s))&&(g=(this.f(r+b,n,i+b)-c)/u,isFinite(g)||(g=(c-this.f(r-b,n,i-b))/u),m=(this.f(r-b,n,i+b)-c)/u,isFinite(m)||(m=(c-this.f(r+b,n,i-b))/u),isFinite(g)&&isFinite(m)&&(isFinite(s)||(s=g-m),isFinite(a)||(a=g+m))),[s,o,a]}generateTriangles(){for(let r=0;r<12;r++){let n=rg[r],i=[],s=0,o=GS[r],a=0,u=o[0],c=Math.abs(this.cubeVertexValue.get(u));c>a&&isFinite(c)&&(a=c);let l=o[1],p=Math.abs(this.cubeVertexValue.get(l));p>a&&isFinite(p)&&(a=p);let f=o[2],d=Math.abs(this.cubeVertexValue.get(f));d>a&&isFinite(d)&&(a=d);let g=o[3],m=Math.abs(this.cubeVertexValue.get(g));m>a&&isFinite(m)&&(a=m);let b=a*Number.EPSILON*32;if(c<=b){s|=35;let h=this.pushPositionWithGradient(...this.cubeVertex[u]);h!==void 0&&i.push(h)}if(p<=b){s|=21;let h=this.pushPositionWithGradient(...this.cubeVertex[l]);h!==void 0&&i.push(h)}if(d<=b){s|=14;let h=this.pushPositionWithGradient(...this.cubeVertex[f]);h!==void 0&&i.push(h)}if(m<=b){s|=56;let h=this.pushPositionWithGradient(...this.cubeVertex[g]);h!==void 0&&i.push(h)}if(i.length===4)continue;let y;for(let h=0;h<4;h++){let x=o[h];if(this.cubeVertexValue.get(x)>b){y=this.cubeVertex[x];break}}if(y===void 0&&this.isInequality)for(let h=0;h<6;h++){if(s>>h&1)continue;let{posNeg:x,posNaN:P}=this.cubeEdge[n[h]];if(yc(x)&&yc(P)){y=ko(this.positions.slice((x-1)*3,x*3),this.positions.slice((P-1)*3,P*3),.5);break}}if(y===void 0)for(let h=0;h<4;h++){let x=o[h];if(!isFinite(this.cubeVertexValue.get(x))){y=this.cubeVertex[x];break}}if(y!==void 0){if(this.isInequality){let h=[],x=[],P=!1;for(let E=0;E<6;E++){if(s>>E&1)continue;let{posNeg:T,posNaN:M}=this.cubeEdge[n[E]],O=yc(T),S=yc(M);O&&h.push(T),S&&x.push(M),O&&S&&(P=!0)}if(P){h.push(...i),this.pushTriangleFromCorners(x,y),this.pushTriangleFromCorners(h,y);continue}}for(let h=0;h<6;h++){if(s>>h&1)continue;let{posNeg:x,posNaN:P}=this.cubeEdge[n[h]],E=x||P;yc(E)&&i.push(E)}this.pushTriangleFromCorners(i,y)}}}pushTriangleFromCorners(r,n){if(r.length>=3){let i=r[0]-1,s=r[1]-1,o=r[2]-1;this.pushTriangle(i,s,o,n)}if(r.length==4){let i=r[0]-1,s=r[2]-1,o=r[3]-1;this.pushTriangle(i,s,o,n)}}pushTriangle(r,n,i,s){this.allNormalsFromGradient||this.fixBadNormals(r,n,i,s),this.checkWindingOrder(r,n,i)&&([n,i]=[i,n]),this.triangles.push(r,n,i)}fixBadNormals(r,n,i,s){let o=!this.normalFromGradient[r],a=!this.normalFromGradient[n],u=!this.normalFromGradient[i];if(!(o||a||u))return;let c=this.positions,l=this.normals,p=new it(c[3*r],c[3*r+1],c[3*r+2]),f=new it(c[3*n],c[3*n+1],c[3*n+2]),d=new it(c[3*i],c[3*i+1],c[3*i+2]),g=new it().subVectors(d,p),m=new it().subVectors(p,f);var b=g.cross(m);let y=new it().subVectors(p,new it(...s));b.dot(y)<0&&b.multiply(-1),b.isFinite()&&(o&&(l[3*r+0]+=b.x,l[3*r+1]+=b.y,l[3*r+2]+=b.z),a&&(l[3*n+0]+=b.x,l[3*n+1]+=b.y,l[3*n+2]+=b.z),u&&(l[3*i+0]+=b.x,l[3*i+1]+=b.y,l[3*i+2]+=b.z))}checkWindingOrder(r,n,i){let s=this.positions,o=this.normals,a=s[3*i]-s[3*r],u=s[3*i+1]-s[3*r+1],c=s[3*i+2]-s[3*r+2],l=s[3*r]-s[3*n],p=s[3*r+1]-s[3*n+1],f=s[3*r+2]-s[3*n+2],d=u*f-c*p,g=c*l-a*f,m=a*p-u*l,b=o[3*r],y=o[3*r+1],h=o[3*r+2];return d*b+g*y+m*h<0}};var kS=80;function na(e,t,r,n,i,s){function o(w){return[w[0],w[1],m(w)]}let a=t.xmin*6-t.xmax*5,u=t.xmax*6-t.xmin*5,c=t.ymin*6-t.ymax*5,l=t.ymax*6-t.ymin*5,p=t.zmin*6-t.zmax*5,f=t.zmax*6-t.zmin*5;function d(w){return w}function g(w){return p<=w[2]&&w[2]<=f&&c<=w[1]&&w[1]<=l&&a<=w[0]&&w[0]<=u}let m=w=>e(w[0],w[1]),b=w=>e(w[0],w[1]);function y(w){return r.min<=w[0]&&w[0]<=r.max&&n.min<=w[1]&&w[1]<=n.max}function h(w,z,F){let X=Cm(w,z),ee=Lm(b(X),F),re=Fm(ee),Oe=_m(w,z),$=Lm(F,b(Oe)),Ze=Fm($);return isNaN(Ze)?ee:isNaN(re)?$:y(X)?y(Oe)&&re>Ze?$:ee:$}let x=r.width/1e4,P=n.width/1e4;function E(w){let z=w[2],F=[w[0],w[1]],X=Kc(h(F,[x,0],z),h(F,[0,P],z));if($a(...X))return X;let ee=Math.SQRT1_2;if(X=Kc(h(F,[ee*x,ee*-P],z),h(F,[ee*x,ee*P],z)),$a(...X))return X}function T(w){if(A(w[2]))return w[2]}function M(w){return w[2].slice(3)}function O(w,z){let F=w[2],X=0,ee=z[2],re=1,Oe=Ze=>m(Rn(w,z,Ze));if(!isFinite(F[0])||!isFinite(F[1])||!isFinite(F[2])||!isFinite(F[0])||!isFinite(F[1])||!isFinite(F[2]))return;let $=WM(X,F,re,ee,Oe,(u-a)*1e-6);if($)return[o(Rn(w,z,Xr($[0],0,1e-5))),o(Rn(w,z,Xr($[1],1,1e-5)))]}function S(w){return g(w)?w:[NaN,NaN,NaN]}function C(w,z){let F=ee=>S(m(Rn(w,z,ee))),X=Vm(0,S(w[2]),1,S(z[2]),F);if(X!==void 0)return o(Rn(w,z,X))}function A(w){return g(w)}let L=((t.xmax-t.xmin)*1e-6)**2;function Z(w,z,F){let X=w[2],ee=z[2];if(Ta(X,ee)<L)return!0;let re=F[2];return Ta(ee,re)<L||Ta(X,re)<L}return tg(r,n,i,{isDegenerate:Z,getNormal:E,getVertex:T,extraAttrCount:s,getExtraAttrs:M,findJumpBetweenTwo3DPoints:O,findFiniteBetweenTwoPoints:C,allowVertex:A,fn:m})}var{floor:rG}=Math;function NI(e){let t=[];for(let r of e)t.push(...r),t.push(NaN,NaN,NaN);return t}function gc(e,t,r,n){(r===void 0||isNaN(r))&&(r=CI(t.min,t.max)),r=Zr(rG(r),2,2e3);let{xmin:i,xmax:s,ymin:o,ymax:a,zmin:u,zmax:c}=n.viewport;u!=null||(u=en.zmin),c!=null||(c=en.zmax);let l=ag(e,{min:t.min,max:t.max,nInitialSamples:r,xtolerance:(s-i)/1e3,ytolerance:(a-o)/1e3,ztolerance:(c-u)/1e3,map:p=>p});return NI(l.segments)}function og(e,t,r,n){let i=n.degreeMode?Math.PI/180:1;return gc(s=>{let o=e(s),a=o[0],u=o[1],c=o[2];return[a*sr(u*i),a*Ft(u*i),c]},t,r,n)}function AI(e,t,r,n){let i=n.degreeMode?Math.PI/180:1;return gc(s=>{let o=e(s),a=o[0],u=o[1],c=o[2];return[a*Ft(c*i)*sr(u*i),a*Ft(c*i)*Ft(u*i),a*sr(c*i)]},t,r,n)}function YS(e,t){return{type:\"linear\",s:e,t}}function XS(e,t){return{type:\"logarithmic\",s:e,t}}function ZS(e,t){return{type:\"exponential\",s:e,t}}function nG([e,t],[r,n]){let i=(n-r)/(t-e),s=(r+n)/2-i*(t+e)/2;return YS(i,s)}function iG([e,t],[r,n]){let i=(n-r)/(Math.log(t)-Math.log(e)),s=(Math.log(t)*r-Math.log(e)*n)/(Math.log(t)-Math.log(e));return XS(i,s)}function sG([e,t],[r,n]){let i=(Math.log(n)-Math.log(r))/(t-e),s=(t*Math.log(r)-e*Math.log(n))/(t-e);return ZS(i,s)}function _I(e,t,r){switch(e){case\"linear\":return nG(t,r);case\"logarithmic\":return iG(t,r);case\"exponential\":return sG(t,r);default:{let n=e;throw new Error(\"Unexpected scale type: \"+n)}}}function LI({type:e,s:t,t:r},n){switch(e){case\"linear\":return t*n+r;case\"logarithmic\":return t*Math.log(n)+r;case\"exponential\":return Math.exp(t*n+r);default:let i=e;throw new Error(\"Unexpected scale type: \"+i)}}function wI(e,t,r,n){switch(e){case\"linear\":return oG(t,r,n);case\"logarithmic\":return Math.pow(t,1-n)*Math.pow(r,n);case\"exponential\":return n===0?t:n===1?r:Math.log((1-n)*Math.exp(t)+n*Math.exp(r));default:let i=e;throw new Error(\"Unexpected scale type: \"+i)}}function oG(e,t,r){return(1-r)*e+r*t}function FI({type:e,s:t,t:r}){switch(e){case\"linear\":return YS(1/t,-r/t);case\"logarithmic\":return ZS(1/t,-r/t);case\"exponential\":return XS(1/t,-r/t);default:let n=e;throw new Error(\"Unexpected scale type: \"+n)}}function VI(e){switch(e){case\"linear\":return\"linear\";case\"logarithmic\":return\"exponential\";case\"exponential\":return\"logarithmic\";default:let t=e;throw new Error(\"Unexpected scale type: \"+t)}}function GI({width:e,height:t}){return{left:0,right:e,top:0,bottom:t}}function Gs({xmin:e,xmax:t,ymin:r,ymax:n}){return{left:e,right:t,bottom:r,top:n}}var Li=class e{constructor(t,r){this.xScale=t,this.yScale=r}static fromRects(t,r,{xAxisScale:n,yAxisScale:i}){return new e(_I(n,[t.left,t.right],[r.left,r.right]),_I(i,[t.bottom,t.top],[r.bottom,r.top]))}static fromRectsInverse(t,r,{xAxisScale:n,yAxisScale:i}){return e.fromRects(r,t,{xAxisScale:VI(n),yAxisScale:VI(i)})}inverse(){return new e(FI(this.xScale),FI(this.yScale))}mapX(t){return LI(this.xScale,t)}mapY(t){return LI(this.yScale,t)}mapPoint({x:t,y:r}){return{x:this.mapX(t),y:this.mapY(r)}}mapCoordinatePair([t,r]){return[this.mapX(t),this.mapY(r)]}mapRect({top:t,bottom:r,left:n,right:i}){return{left:this.mapX(n),right:this.mapX(i),bottom:this.mapY(r),top:this.mapY(t)}}interpolateX(t,r,n){return wI(this.xScale.type,t,r,n)}interpolateY(t,r,n){return wI(this.yScale.type,t,r,n)}dangerouslyGetXScaleFactor(){if(this.xScale.type!==\"linear\")throw new Error(`Cannot get scale factor a '${this.xScale.type}' scale`);return this.xScale.s}dangerouslyGetYScaleFactor(){if(this.yScale.type!==\"linear\")throw new Error(`Cannot get scale factor a '${this.yScale.type}' scale`);return this.yScale.s}};function BI(e,t){return[e[0],e[1],t(e)]}function ug(e,t,r,n,i,s=[0,1,2]){let o=new be(n.min-5*n.width,n.max+5*n.width),{min:a,max:u}=o,c=n.width/1e3,l=C=>e(C[0],C[1]),p=C=>{let A=l(C);return A<o.min||A>o.max?NaN:A};function f(C,A,L){let Z=l(Cm(C,A))-L,w=L-l(_m(C,A)),z=isNaN(w)?Z:isNaN(Z)||Math.abs(Z)>Math.abs(w)?w:Z;return[A[0],A[1],z]}let d=t.width/1e4,g=r.width/1e4,[m,b,y]=s;function h(C){let A=C[2],L=Kc(f(C,[d,0],A),f(C,[0,g],A));if($a(...L))return[L[m],L[b],L[y]];let Z=Math.SQRT1_2;if(L=Kc(f(C,[Z*d,Z*-g],A),f(C,[Z*d,Z*g],A)),$a(...L))return[L[m],L[b],L[y]]}function x(C){if(T(C[2]))return[C[m],C[b],C[y]]}function P(C,A){let L=C[2],Z=0,w=A[2],z=1,F=ee=>l(Rn(C,A,ee));if(!isFinite(L)||!isFinite(w))return;let X=$M(Z,L,z,w,F,c);if(X)return[BI(Rn(C,A,Xr(X[0],0,1e-5)),l),BI(Rn(C,A,Xr(X[1],1,1e-5)),l)]}function E(C,A){let L=F=>p(Rn(C,A,F)),Z=C[2],w=A[2],z=jn(0,a<Z&&Z<u?Z:NaN,1,a<w&&w<u?w:NaN,L);if(z!==void 0)return BI(Rn(C,A,z),l)}function T(C){return a<C&&C<u}let M=t.width*1e-6,O=r.width*1e-6;function S(C,A,L){return Math.abs(C[0]-A[0])<M&&Math.abs(C[1]-A[1])<O||Math.abs(A[0]-L[0])<M&&Math.abs(A[1]-L[1])<O||Math.abs(L[0]-C[0])<M&&Math.abs(L[1]-C[1])<O}return tg(t,r,i,{isDegenerate:S,getNormal:h,getExtraAttrs:()=>[],extraAttrCount:0,getVertex:x,findJumpBetweenTwo3DPoints:P,findFiniteBetweenTwoPoints:E,allowVertex:T,fn:l})}var $S=1,WS=2,JS=4,jS=8,QS=15,lW=12,pW=3,KS=1,eR=2,tR=3,rR=4,nR=5,iR=6;function fW(e,t,r){let n=[],i=e.length;if(r===nR)for(let s=0;s<i;s+=2){let o=t.mapX(e[s]),a=t.mapY(e[s+1]);n.push(o,a)}else if(r===iR)for(let s=0;s<i;s+=2){let o=t.mapX(e[s+1]),a=t.mapY(e[s]);n.push(o,a)}else if(r===KS)for(let s=0;s<e.length;s+=2){let o=e[s],a=e[s+1],u=t.mapX(a*Math.cos(o)),c=t.mapY(a*Math.sin(o));n.push(u,c)}else if(r===eR)for(let s=0;s<e.length;s+=2){let o=e[s],a=e[s+1];a<0&&(a=0);let u=t.mapX(a*Math.cos(o)),c=t.mapY(a*Math.sin(o));n.push(u,c)}else if(r===tR)for(let s=0;s<e.length;s+=2){let o=e[s]*Math.PI/180,a=e[s+1],u=t.mapX(a*Math.cos(o)),c=t.mapY(a*Math.sin(o));n.push(u,c)}else if(r===rR)for(let s=0;s<e.length;s+=2){let o=e[s]*Math.PI/180,a=e[s+1];a<0&&(a=0);let u=t.mapX(a*Math.cos(o)),c=t.mapY(a*Math.sin(o));n.push(u,c)}return n}function df(e,t){return uG(e,t,QS,!0)}function dW(e,t){return cG(e,t,QS,!0)}function cg(e,t,r,n){let i=[],s,o,a,u;n?(o=e[0],a=e[1],s=2,u=t(o,a),u&&i.push(o,a)):(o=e[e.length-2],a=e[e.length-1],s=0,u=t(o,a));for(let c=s;c<e.length;c+=2){let l=o,p=a,f=u;o=e[c],a=e[c+1],u=t(o,a),!(!u&&!f)&&(u&&f&&i.push(o,a),u&&!f&&(i.push(...r(o,a,l,p)),i.push(o,a)),!u&&f&&i.push(...r(l,p,o,a)))}return i}function lg(e,t,r,n){let i=[[]],s=0,o,a,u,c;n?(a=e[0],u=e[1],o=2,c=t(a,u),c&&i[s].push(a,u)):(a=e[e.length-2],u=e[e.length-1],o=0,c=t(a,u));for(let l=o;l<e.length;l+=2){let p=a,f=u,d=c;a=e[l],u=e[l+1],c=t(a,u),!(!c&&!d)&&(c&&d&&i[s].push(a,u),c&&!d&&(i[s].push(...r(a,u,p,f)),i[s].push(a,u)),!c&&d&&(i[s].push(...r(p,f,a,u)),s++,i[s]=[]))}return i.filter(l=>l.length>0)}var sR=e=>function(t,r){return t>=e},oR=e=>function(t,r){return t<=e},aR=e=>function(t,r){return r>=e},uR=e=>function(t,r){return r<=e},cR=e=>function(t,r,n,i){let s=i-r;return[e,r+s*(e-t)/(n-t)]},lR=e=>function(t,r,n,i){let s=i-r;return[e,r+s*(e-t)/(n-t)]},pR=e=>function(t,r,n,i){let s=n-t;return[t+s*(e-r)/(i-r),e]},fR=e=>function(t,r,n,i){let s=n-t;return[t+s*(e-r)/(i-r),e]};function uG(e,t,r,n){let i=e;return r&JS&&(i=cg(e,sR(t.xmin),cR(t.xmin),n)),r&WS&&(i=cg(i,aR(t.ymin),pR(t.ymin),n)),r&jS&&(i=cg(i,oR(t.xmax),lR(t.xmax),n)),r&$S&&(i=cg(i,uR(t.ymax),fR(t.ymax),n)),i}function cG(e,t,r,n){let i=[e];return r&JS&&(i=Vl(i.map(s=>lg(s,sR(t.xmin),cR(t.xmin),n)),!0)),r&WS&&(i=Vl(i.map(s=>lg(s,aR(t.ymin),pR(t.ymin),n)),!0)),r&jS&&(i=Vl(i.map(s=>lg(s,oR(t.xmax),lR(t.xmax),n)),!0)),r&$S&&(i=Vl(i.map(s=>lg(s,uR(t.ymax),fR(t.ymax),n)),!0)),i}function mW(e,t,r){let n=[],i=e[0],s=i+r,o=[];n.push(o);for(let a=0;a<e.length;a+=2){let u=e[a],c=e[a+1];if(c<0&&(c=0),u>=s){for(o=[],n.push(o),i=e[a-2],s=i;u>=s;)s+=r;a-=4}else o.push(u,c)}if(t===0)for(let a=0;a<n.length;a++)n[a].push(0,0);else{let a=r/16,u=t;for(let c=0;c<n.length;c++){let l=n[c];i=l[0],s=l[l.length-2];for(let p=s;p>i;p-=a)l.push(p,u);l.push(i,u)}}return n}function yW(e,t){return e=e.slice(),e.push(e[e.length-2],t),e.push(e[0],t),[e]}function gW(e,t,r){switch(e){case 1:return iR;case 8:case 5:case 2:return nR;case 6:return r.degreeMode?t?rR:tR:t?eR:KS}}function hR(e,t,r,n){let i=lG(e,t,r,n);return NI(i)}function lG(e,t,r,n){return new qI(e,t,new be(r.xmin,r.xmax),new be(r.ymin,r.ymax),new be(r.zmin,r.zmax),n).run()}var pG={},qI=class extends Ml{constructor(r,n,i,s,o,a){super(sg,i,s,o,a);this.f=r;this.g=n;this.vertexFGZs={};this.vertexZeroF={};this.vertexZeroG={};this.threshF=0;this.threshG=0;this.cubeID=0;this.edgesMaybeCrossF=0;this.edgesMaybeCrossG=0;this.tetEdgeCrossings=new Array(26);this.edgeFGZs=new Array(26);this.edgeCrossings=new Map;this.allFGZs=new Map}setAt(r,n,i,s,o){let a=this.f(i,s,o),u=this.g(i,s,o);r.set(n,a,u)}run(){return this.loopOverUnitCubes(this.onEachCube.bind(this)),this.traceCurves()}onEachCube(){this.cubeID=HS(this.i,this.j,this.k),this.pruneEdges(),this.edgesMaybeCrossF&&this.edgesMaybeCrossG&&(this.setVertexPositions(),this.setVertexZeros(),this.setEdgeCrossings(),this.insertCurveSegmentsFromCube())}pruneEdges(){this.edgesMaybeCrossF=0,this.edgesMaybeCrossG=0;for(let r=0;r<26;r++){let n=bn[r*2],i=bn[r*2+1],s=this.cubeVertexValue.getX(n),o=this.cubeVertexValue.getY(n),a=this.cubeVertexValue.getX(i),u=this.cubeVertexValue.getY(i);!(s>0&&a>0||s<0&&a<0)&&(isFinite(s)||isFinite(a))&&(this.edgesMaybeCrossF|=1<<r),!(o>0&&u>0||o<0&&u<0)&&(isFinite(o)||isFinite(u))&&(this.edgesMaybeCrossG|=1<<r)}}setVertexZeros(){let r=0,n=0;for(let o=0;o<9;o++){let a=this.cubeVertexValue.getX(o),u=this.cubeVertexValue.getY(o),c=Math.abs(a),l=Math.abs(u);c>r&&isFinite(c)&&(r=c),l>n&&isFinite(c)&&(n=l)}let i=this.threshF=r*Number.EPSILON*32,s=this.threshG=n*Number.EPSILON*32;for(let o=0;o<9;o++){let a=this.cubeVertexValue.getX(o),u=this.cubeVertexValue.getY(o),c=Math.abs(a),l=Math.abs(u);if(this.vertexZeroF[o]=c<=i,this.vertexZeroG[o]=l<=s,c<=i&&l<=s){let p=this.cubeVertex[o],f=this.createFGZ(US(this.cubeID,o),p);this.vertexFGZs[o]=f}else this.vertexFGZs[o]=void 0}}getEdgeCrossings(r){let n=this.edgesMaybeCrossF>>r&1,i=this.edgesMaybeCrossG>>r&1;if(!n&&!i)return pG;let s=lf(this.cubeID,r),o=this.edgeCrossings.get(s);if(o!==void 0)return o;let a=this.getEdgeCrossingsUncached(r,n,i);return this.edgeCrossings.set(s,a),a}getEdgeCrossingsUncached(r,n,i){let s=bn[r*2],o=bn[r*2+1],a=this.cubeVertexValue.getX(s),u=this.cubeVertexValue.getY(s),c=this.cubeVertexValue.getX(o),l=this.cubeVertexValue.getY(o),p=this.cubeVertex[s],f=this.cubeVertex[o],d=!n||a===0||c===0?void 0:uf(this.f,p,f,a,c),g=!i||u===0||l===0?void 0:uf(this.g,p,f,u,l),m=this.threshF;!d&&g&&Math.abs(a)<=m&&Math.abs(c)<=m&&Math.abs(this.f(g[0],g[1],g[2]))<=m&&(d=g);let b=this.threshG;return!g&&d&&Math.abs(u)<=b&&Math.abs(l)<=b&&Math.abs(this.g(d[0],d[1],d[2]))<=b&&(g=d),{f:d,g}}getTriangleCrossing(r){let n=OI(this.cubeID,r),i=this.allFGZs.get(n);if(i!==void 0)return i;let s=this.getTriangleCrossingUncached(r);return this.allFGZs.set(n,s),s}createFGZ(r,n){let i=this.allFGZs.get(r);if(i)return i;let s={id:r,pos:n,connections:[],visited:!1};return this.allFGZs.set(r,s),s}getTriangleCrossingUncached(r){let n=[],i=[],s=vI[r];for(let a=0;a<3;a++){let u=s[a];if(this.vertexFGZs[u])return null;this.vertexZeroF[u]&&n.push(this.cubeVertex[u]),this.vertexZeroG[u]&&i.push(this.cubeVertex[u])}let o=DI[r];for(let a=0;a<3;a++){let u=o[a],c=this.tetEdgeCrossings[u];if(this.edgeFGZs[u]||!c)continue;let l=c.f,p=c.g,f=bn[2*u],d=bn[2*u+1];l&&!this.vertexZeroF[f]&&!this.vertexZeroF[d]&&n.push(l),p&&!this.vertexZeroG[f]&&!this.vertexZeroG[d]&&i.push(p)}if(n.length===2&&i.length===2){let a=fG(n[0],n[1],i[0],i[1]);return a?{id:OI(this.cubeID,r),pos:a,connections:[],visited:!1}:null}else return null}setEdgeCrossings(){for(let r=0;r<26;r++){let n=this.getEdgeCrossings(r),i=n.f,s=n.g,o=bn[r*2],a=bn[r*2+1];if(this.vertexFGZs[o]||this.vertexFGZs[a])this.tetEdgeCrossings[r]=void 0,this.edgeFGZs[r]=void 0;else if(i&&this.vertexZeroG[o]&&this.vertexZeroG[a]){let u=this.createFGZ(lf(this.cubeID,r),i);this.edgeFGZs[r]=u,this.tetEdgeCrossings[r]=void 0}else if(s&&this.vertexZeroF[o]&&this.vertexZeroF[a]){let u=this.createFGZ(lf(this.cubeID,r),s);this.edgeFGZs[r]=u,this.tetEdgeCrossings[r]=void 0}else if(i&&s&&Ta(i,s)<1e-8){let u=this.createFGZ(lf(this.cubeID,r),i);this.edgeFGZs[r]=u,this.tetEdgeCrossings[r]=void 0}else this.edgeFGZs[r]=void 0,this.tetEdgeCrossings[r]=n}}insertCurveSegmentsFromCube(){for(let r=0;r<12;r++)this.insertCurveSegmentsFromTetrahedron(r)}insertCurveSegmentsFromTetrahedron(r){let n=[],i=zS[r];for(let l=0;l<4;l++){let p=this.getTriangleCrossing(i[l]);p&&n.push(p)}let s=[],o=rg[r];for(let l=0;l<6;l++){let p=this.edgeFGZs[o[l]];p&&s.push(p)}let a=[],u=[bn[o[0]*2],bn[o[0]*2+1],bn[o[3]*2],bn[o[3]*2+1]];for(let l of u){let p=this.vertexFGZs[l];p&&a.push(p)}let c=[...a,...s,...n];switch(c.length){case 0:case 1:break;case 2:this.connectCrossings(c[0],c[1]);break;case 3:n.length===2&&this.connectCrossings(n[0],n[1]);break;case 4:n.length===4&&(this.connectCrossings(n[0],n[1]),this.connectCrossings(n[2],n[3]));break;default:throw new Error(\"Programming error: 5 is impossible.\")}}connectCrossings(r,n){r.connections.some(i=>i.id===n.id)||n.connections.some(i=>i.id===r.id)||r.connections.length>=2||n.connections.length>=2||(r.connections.push(n),n.connections.push(r))}traceCurves(){let r={xtolerance:this.size.x*.1,ytolerance:this.size.y*.1,ztolerance:this.size.z*.1,map:i=>i},n=new fo(r);for(let i of this.allFGZs.values())i&&!i.visited&&i.connections.length===1&&this.traceCurve(n,i);for(let i of this.allFGZs.values())i&&!i.visited&&this.traceCurve(n,i);return n.finish().segments}traceCurve(r,n){let i=n;for(;;){r.addPoint(n.pos),n.visited=!0;let s;for(let o of n.connections)o.visited||(s=o);if(!s)break;n=s}i.connections.length===2&&r.addPoint(i.pos),r.breakSegment()}},[pg,dR,zI]=[new it,new it,new it],mR=new it,[HI,UI,yR]=[new it,new it,new it],[fg,gR,dg]=[new it,new it,new it];function fG(e,t,r,n){pg.set(e[0],e[1],e[2]),dR.set(t[0],t[1],t[2]),zI.set(r[0],r[1],r[2]),mR.set(n[0],n[1],n[2]),HI.subVectors(dR,pg),UI.subVectors(mR,zI),yR.subVectors(zI,pg),fg.crossVectors(HI,UI),gR.crossVectors(yR,UI);let i=fg.dot(gR)/fg.dot(fg);return 0<=i&&i<=1?(dg.addVectors(pg,HI.multiply(i)),[dg.x,dg.y,dg.z]):null}function mg(e,t,r,n){let i=[],s=[],o=[],a=[],{xmin:u,xmax:c,ymin:l,ymax:p,zmin:f,zmax:d}=r,g,m,b;switch(n){case\"z\":g={xmin:u,xmax:c,ymin:l,ymax:p},m=(x,P)=>[x[P],x[P+1],f,x[P],x[P+1],d],b=(x,P)=>e(x,P,0);break;case\"y\":g={xmin:u,xmax:c,ymin:f,ymax:d},m=(x,P)=>[x[P],l,x[P+1],x[P],p,x[P+1]],b=(x,P)=>e(x,0,P);break;case\"x\":g={xmin:f,xmax:d,ymin:l,ymax:p},m=(x,P)=>[u,x[P+1],x[P],c,x[P+1],x[P]],b=(x,P)=>e(0,P,x);break}let y=Q(q({},g),{mathToPixels:Li.fromRects(Gs(g),ia,{xAxisScale:\"linear\",yAxisScale:\"linear\"}),tolerance:mo}),h=of(b,y);for(let x of h.segments)for(let P=0;P<x.length/2;P++){let[E,T,M,O,S,C]=m(x,2*P);if(i.push(E,T,M,O,S,C),o.push(E,T,O,S),t){let A=t(E,T,M),L=t(O,S,C);s.push(A[0],A[1],A[2]),s.push(L[0],L[1],L[2])}else s.push(0,0,0),s.push(0,0,0);if(P>0){let A=i.length/3-4;a.push(A,A+1,A+2),a.push(A+2,A+3,A+1)}}return cf(a,i,s,o,0,[]),{positions:i,normals:s,faces:a,uvs:o,extraAttrs:[]}}var{floor:bR}=Math,xR=1e4,yg=class{constructor(){this.xmin=en.xmin;this.xmax=en.xmax;this.ymin=en.ymin;this.ymax=en.ymax;this.zmin=en.zmin;this.zmax=en.zmax}},dG=0;function Mi(){return\"result_\"+dG++}function mG(){return{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}}}function DR(e){return{graphMode:15,error:e,segments:[]}}function YI(e,t){let r=e[0]+t.min*e[1],n=e[0]+t.max*e[1],i={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}};if(!isFinite(r)||!isFinite(n))return{segments:[],poi:i,resolved:!0};let s=[[t.min,r,t.max,n]],o=-e[0]/e[1];return!isNaN(o)&&o>=t.min&&o<=t.max&&(i.zeros.x.push(o),i.zeros.y.push(0)),0>=t.min&&0<=t.max&&(i.intercept.x.push(0),i.intercept.y.push(e[0])),{segments:s,poi:i,resolved:!0}}function yG(e,t){let r=YI(e[0],t),n=YI(e[1],t);return r.segments.length&&n.segments.length&&r.segments[0].length===4&&n.segments[0].length===4?{segments:[[r.segments[0][1],n.segments[0][1],r.segments[0][3],n.segments[0][3]]],resolved:!0}:{segments:[],resolved:!0}}function gG(e,t){let r=e(t);return{segments:[[...r,...r]],resolved:!0}}function PR(e,t,r){let{mappedFn:n,jumpTolerance:i,screen:s}=r,[o,a]=e,[u,c]=t,l=fa(o,u),p=n(l),f=s.height;if(!(a<0&&c<0&&(a>=p||c>=p))&&!(a>f&&c>f&&(a<=p||c<=p)))return el(o,a,l,p,u,c,n,i)}var kI=(e,t,r)=>{let{fn:n,mappedFn:i,jumpTolerance:s,accumulator:o}=r;if(!isFinite(s)||s<=0)return;let a=PR(e,t,r);if(!a)return;let u=(t[0]-e[0])/10,c=[-u,u],l;for(let p=0;p<c.length;p++){let f=e[0]+c[p],d=i(f);isFinite(d)||([f,d]=e,f=e[0],d=e[1]);let g=t[0]+c[p],m=i(g);if(isFinite(m)?l=g:[g,m]=t,PR([f,d],[g,m],r)){let[b,y]=a;o.addPoint([b,n(b)]),o.breakSegment(),o.addPoint([y,n(y)]);return}}return l},XI=class{constructor(t,r,n){let i=s=>r.mathToPixels.mapY(t(s));this.derivative=n,this.accumulator=new af(r,t,n),this.fn=t,this.mathToPixels=r.mathToPixels,this.mappedFn=i,this.jumpTolerance=r.tolerance||0,this.screen=r.screen}};function TR(e,t,r,n){let i=r,s=e(i),o=t.mapY(s);return isFinite(o)||(i=r+n,s=e(i),o=t.mapY(s)),isFinite(o)||(i=r-n,s=e(i),o=t.mapY(s)),[i,s,o]}function $I(e,t,r){let n=new XI(e,t,r),{mathToPixels:i,mappedFn:s}=n,o=t.nInitialSamples,a=Math.abs(i.interpolateX(t.min,t.max,1/(o-1))-t.min)/10,[u,c,l]=TR(e,i,t.min,a);isFinite(l)&&n.accumulator.addPoint([u,c]);for(var p=1;p<o;p++){let f=i.interpolateX(t.min,t.max,p/(o-1)),d=Math.abs(u-f)/10,[g,m,b]=TR(e,i,f,d);if(isFinite(b)&&isFinite(l)){let y=kI([u,l],[g,b],n);y!==void 0&&(g=y,m=e(g),b=i.mapY(m)),n.accumulator.addPoint([g,m])}else if(isFinite(b)&&!isFinite(l)){let y=jn(u,l,g,b,s);if(y!==void 0){y!==g&&n.accumulator.addPoint([y,e(y)]);let h=kI([y,s(y)],[g,b],n);h!==void 0&&(g=h,m=e(g),b=i.mapY(m)),n.accumulator.addPoint([g,m])}}else if(!isFinite(b)&&isFinite(l)){let y=jn(u,l,g,b,s);if(y!==void 0){let h=kI([u,l],[y,s(y)],n);h!==void 0&&(y=h),y!==u&&n.accumulator.addPoint([y,e(y)]),n.accumulator.breakSegment()}}u=g,c=m,l=b}return n.accumulator.finish()}function hG(e){let{fn:t,min:r,max:n}=e,i=Math.floor(r),s=Math.ceil(n),o=!0;s-i+1>xR&&(s=i+(xR-1),o=!1);let a=[];for(let u=i;u<=s;u++){let c=t(u);!isFinite(u)||!isFinite(c)||a.push([u,c])}return{segments:a,resolved:o}}function bG(e,t,r,n){let i=t.min,s=t.max-t.min,o=t.rtoleranceMath,a=Math.floor(s/(Math.PI/r)),u,c,l;function p(f,d){let g=d%2===0?1:-1;if(!n&&g===-1)return!1;let m=d*(Math.PI/r),b=[i,i+1,i+2,i+3],y=!1;for(let h=0,x=b.length;h<x;h++){let P=f(b[h]),E=f(b[h]+m);if(isFinite(P)&&isFinite(E)&&(y=!0),isFinite(P)!==isFinite(E)||Math.abs(P-g*E)>o)return!1}return!!y}for(u=1;u<=a;u++)if(p(e,u)){for(l=u,c=2;c*u<=a;c++)p(e,c*u)||(l=void 0);if(l)break}return l?l*(Math.PI/r):null}function vR(e){return[e[1]*Math.cos(e[0]),e[1]*Math.sin(e[0])]}function ag(e,t){if(t.max<t.min)return{segments:[],resolved:!0};let{xtolerance:r,ytolerance:n,ztolerance:i,map:s}=t,o=new fo({xtolerance:r,ytolerance:n,ztolerance:i,map:s}),a=10,u=t.min,c=e(u);isFinite(c[0])&&isFinite(c[1])&&o.addPoint(c);let l=t.nInitialSamples;for(let p=1;p<l;p++){let f=p/(l-1),d=(1-f)*t.min+f*t.max,g=e(d);mf(e,u,c,d,g,a,o,t.screen),u=d,c=g}return o.finish()}function xG(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function mf(e,t,r,n,i,s,o,a){if(n===t)return;let{xtolerance:u,ytolerance:c,ztolerance:l,map:p}=o,f=fa(t,n),d=e(f),g=p(r),m=p(i),b=p(d),y=isFinite(g[0])&&isFinite(g[1])&&(g.length===2||isFinite(g[2])),h=isFinite(m[0])&&isFinite(m[1])&&(m.length===2||isFinite(m[2])),x=isFinite(b[0])&&isFinite(b[1])&&(b.length===2||isFinite(b[2]));if(s===0||f===t||f===n){o.breakSegment(),h&&o.addPoint(i);return}if(!(!y&&!h)){if(y!==h){let P=t,E=n,T=r,M=i;for(;t!==f&&f!==n;)x==y?(t=f,r=d,g=b,y=x):(n=f,i=d,m=b,h=x),f=t+(n-t)/2,d=e(f),b=p(d),x=isFinite(b[0])&&isFinite(b[1])&&(b.length===2||isFinite(b[2]));y?(mf(e,P,T,t,r,s-1,o,a),o.breakSegment()):(o.breakSegment(),o.addPoint(i),mf(e,n,i,E,M,s-1,o,a));return}if(y&&x&&h){let P=xG(g,m),E=Ws(b[0],b[1],b[2]||0,g[0],g[1],g[2]||0,m[0],m[1],m[2]||0),T=E>.2&&E<.8&&Math.abs(b[0]-(g[0]+E*(m[0]-g[0])))<=u&&Math.abs(b[1]-(g[1]+E*(m[1]-g[1])))<=c&&(g.length===2||Math.abs(b[2]-(g[2]+E*(m[2]-g[2])))<=l);if(P||T||a&&PG(g,b,m,a)){o.addPoint(i);return}}mf(e,t,r,f,d,s-1,o,a),mf(e,f,d,n,i,s-1,o,a)}}function PG(e,t,r,{width:n,height:i}){return e[0]<0&&r[0]<0&&(e[0]>=t[0]||r[0]>=t[0])||e[0]>n&&r[0]>n&&(e[0]<=t[0]||r[0]<=t[0])||e[1]<0&&r[1]<0&&(e[1]>=t[1]||r[1]>=t[1])||e[1]>i&&r[1]>i&&(e[1]<=t[1]||r[1]<=t[1])}function TG(){return Ji({positions:[],normals:[],faces:[],uvs:[],extraAttrs:[]})}function WI(e,t,r,n,i,{isInequality:s}){let o=e.fn,a;return t&&!t.includes(\"z\")?a=mg(o,r,n,\"z\"):t&&!t.includes(\"x\")?a=mg(o,r,n,\"x\"):t&&!t.includes(\"y\")?a=mg(o,r,n,\"y\"):a=qS(o,r,n,i,{isInequality:s}),Ji(a)}function IR(e,t,r,n,i){let s=na(e,t,r,n,i,0);return Ji(s)}function IG(e,t,r,n,i,s){let o=s?Math.PI/180:1,a=e.fn,u=na((c,l)=>{let[p,f,d]=a(c,l);return[p*sr(f*o),p*Ft(f*o),d,p,f]},t,r,n,i,2);return Ji(u)}function EG(e,t,r,n,i,s){let o=s?Math.PI/180:1,a=e.fn,u=na((c,l)=>{let[p,f,d]=a(c,l);return[p*Ft(d*o)*sr(f*o),p*Ft(d*o)*Ft(f*o),p*sr(d*o),p,f,d]},t,r,n,i,3);return Ji(u)}function MG(e,t,r){let n=e.fn,i=ug((s,o)=>n(s,o),new be(t.xmin,t.xmax),new be(t.ymin,t.ymax),new be(t.zmin,t.zmax),r);return Ji(i)}function DG(e,t,r){let n=e.fn,i=ug((s,o)=>n(s,o),new be(t.ymin,t.ymax),new be(t.zmin,t.zmax),new be(t.xmin,t.xmax),r,[2,0,1]);return Ji(i)}function vG(e,t,r){let n=e.fn,i=ug((s,o)=>n(o,s),new be(t.zmin,t.zmax),new be(t.xmin,t.xmax),new be(t.ymin,t.ymax),r,[1,2,0]);return Ji(i)}function OG(e,t,r,n,i,s){let o=s?Math.PI/180:1,a=e.fn,u=na((c,l)=>[c*sr(l*o),c*Ft(l*o),a(c,l)],t,r,n,i,0);return Ji(u)}function SG(e,t,r,n,i,s){let o=s?Math.PI/180:1,a=e.fn,u=na((c,l)=>{let p=a(c,l);return[p*sr(c*o),p*Ft(c*o),l,p]},t,r,n,i,1);return Ji(u)}function RG(e,t,r,n,i,s){let o=s?Math.PI/180:1,a=e.fn,u=na((c,l)=>{let p=a(c,l);return[p*Ft(l*o)*sr(c*o),p*Ft(l*o)*Ft(c*o),p*sr(l*o),p]},t,r,n,i,1);return Ji(u)}function Ji(e){let{positions:t,normals:r,faces:n,uvs:i,extraAttrs:s}=e;return{guid:Mi(),positions:new Float32Array(t),normals:new Float32Array(r),faces:new Uint32Array(n),uvs:new Float32Array(i),extraAttrs:new Float32Array(s)}}function ER(e){for(let t of e)if(t!==0)return!1;return!0}function OR(e,t){let{min:r,max:n,mathToPixels:i,nInitialSamples:s}=t,o=i.interpolateX(r,n,0),a=e(o),u=ER(a),c=!1,l=[];for(var p=1;p<s;p++){let f=i.interpolateX(r,n,p/(s-1)),d=e(f),g=ER(d);if(u){o=f,a=d,g||(u=!1);continue}if(g){c?(u=!0,c=!1):c=!0;continue}let m=XM(o,a,f,d,e);m!==void 0&&l.push(m),o=f,a=d}return l}function SR(e){if(!e)return!1;let t=e.viewport.xmin,r=e.viewport.xmax,n=e.viewport.ymin,i=e.viewport.ymax;return!(!isFinite(t)||!isFinite(r)||r<=t||!isFinite(n)||!isFinite(i)||i<=n||!isFinite(e.screen.width)||e.screen.width<=0||!isFinite(e.screen.height)||e.screen.height<=0)}function CI(e,t){let r=t-e;return 1+Math.ceil(r/(r/1e3))}var mo=.05,ia=GI({width:500,height:500});function Dl(e,t,r){var Z,w,z,F,X,ee,re,Oe,$;let{viewport:n,screen:i,xAxisScale:s,yAxisScale:o,degreeMode:a}=e,u=a?Math.PI/180:1,c=e.viewport.xmin,l=e.viewport.xmax,p=e.viewport.ymin,f=e.viewport.ymax,d=(Z=e.viewport.zmin)!=null?Z:en.zmin,g=(w=e.viewport.zmax)!=null?w:en.zmax,m=((z=t.domain)==null?void 0:z.type)===\"2d\",{uMin:b,uMax:y,vMin:h,vMax:x}=((F=t.domain)==null?void 0:F.type)===\"2d\"?t.domain:{uMin:0,uMax:1,vMin:0,vMax:1};var P=t.lineWidth;if(t.willConvertTo3D||P>3){let Ze=t.willConvertTo3D?200:e.screen.width;var E=P*(l-c)/Ze;let xe=t.willConvertTo3D?200:e.screen.height;var T=P*(f-p)/xe;c-=E,l+=E,p-=T,f+=T}let O=1/4,S=t.domainBound,C,A=Li.fromRects(Gs(n),GI(i),{xAxisScale:s,yAxisScale:o}),L={xmin:c,xmax:l,ymin:p,ymax:f,zmin:d,zmax:g};switch(t.graphMode){case 1:switch(C=qn(Ui([p,f]),S),C.type){case\"empty\":return!1;case\"known\":p=C.bounds[0],f=C.bounds[1]}let Ze=1+Math.ceil(Math.abs(A.mapY(f)-A.mapY(p))/O),xe=new Li(A.yScale,A.xScale);return{min:p,max:f,tolerance:O,nInitialSamples:Ze,mathToPixels:xe,screen:{width:i.height,height:i.width}};case 2:{switch(C=qn(Ui([c,l]),S),C.type){case\"empty\":return!1;case\"known\":c=C.bounds[0],l=C.bounds[1]}let se=1+Math.ceil(Math.abs(A.mapX(l)-A.mapX(c))/O);return{min:c,max:l,tolerance:O,nInitialSamples:se,mathToPixels:A,screen:i}}case 6:{let se=e.degreeMode?Math.PI/180:1;if(((X=t.domain)==null?void 0:X.type)!==\"1d\")throw new Error(\"Expected polar graph to have domain\");let{min:_e,max:Re}=t.domain;switch(C=qn(Ui([_e,Re]),S),C.type){case\"empty\":return!1;case\"known\":_e=C.bounds[0],Re=C.bounds[1]}let K=1+Math.min(Math.ceil(se*Math.abs(Re-_e)/(2*Math.PI)*1e3),12e3),V=Math.abs(A.mapX(l)-A.mapX(c)),ce=Math.abs(A.mapY(f)-A.mapY(p)),ae=Math.hypot(V,ce),Je=Math.hypot(l-c,f-p)/ae,Ye={min:_e,max:Re,screen:i,nInitialSamples:K,xtolerance:O,ytolerance:O,rtoleranceMath:Je,map:([kt,Sr])=>A.mapCoordinatePair(vR([kt,Sr]))};if(!t.domain.isExplicit){let kt=bG(r,Ye,se,t.operator===\"=\");kt&&(Ye.max=Ye.min+kt,Ye.nInitialSamples=1+Math.min(Math.ceil(se*Math.abs(Ye.max-Ye.min)/(2*Math.PI)*1e3),12e3))}return Ye}case 5:case 100:case 101:case 102:{let se={min:0,max:1},{min:_e,max:Re}=((ee=t.domain)==null?void 0:ee.type)===\"1d\"?t.domain:se;switch(C=qn(Ui([_e,Re]),S),C.type){case\"empty\":return!1;case\"known\":_e=C.bounds[0],Re=C.bounds[1]}return{min:_e,max:Re,screen:i,nInitialSamples:CI(_e,Re),xtolerance:O,ytolerance:O,ztolerance:O,map:([K,V])=>A.mapCoordinatePair([K,V])}}case 8:return{xmin:c,xmax:l,ymin:p,ymax:f,mathToPixels:A,tolerance:O};case 106:return Q(q({},L),{u:new be(c,l),v:new be(p,f)});case 120:case 122:case 107:return Q(q({},L),{u:new be(p,f),v:new be(d,g)});case 121:case 123:case 108:return Q(q({},L),{u:new be(c,l),v:new be(d,g)});case 109:return Q(q({},L),{u:new be(b,m?y:en.xmax),v:new be(h,m?x:2*Math.PI)});case 124:case 110:{let{min:se,max:_e}=((re=t.domain)==null?void 0:re.type)===\"1d\"?t.domain:{min:0,max:2*Math.PI};return Q(q({},L),{u:new be(se,_e),v:new be(d,g)})}case 211:{let{min:se,max:_e}=((Oe=t.domain)==null?void 0:Oe.type)===\"1d\"?t.domain:{min:0,max:2*Math.PI/u},Re={xmin:se,xmax:_e,ymin:d,ymax:g};return Q(q(q({},L),Re),{u:new be(se,_e),v:new be(d,g),mathToPixels:Li.fromRects(Gs(Re),ia,{xAxisScale:s,yAxisScale:o}),tolerance:mo})}case 212:{let se=m?y:2*Math.PI/u,_e=m?x:Math.PI/u,Re={xmin:b,xmax:se,ymin:h,ymax:_e};return Q(q(q({},L),Re),{u:new be(b,se),v:new be(h,_e),mathToPixels:Li.fromRects(Gs(Re),ia,{xAxisScale:s,yAxisScale:o}),tolerance:mo})}case 215:case 214:{let se={xmin:b,xmax:y,ymin:h,ymax:x};return Q(q(q({},L),se),{u:new be(b,y),v:new be(h,h),mathToPixels:Li.fromRects(Gs(se),ia,{xAxisScale:s,yAxisScale:o}),tolerance:mo})}case 213:{let se=m?y:en.xmax,_e=m?x:2*Math.PI/u,Re={xmin:b,xmax:se,ymin:h,ymax:_e};return Q(q(q({},L),Re),{u:new be(b,se),v:new be(h,_e),mathToPixels:Li.fromRects(Gs(Re),ia,{xAxisScale:s,yAxisScale:o}),tolerance:mo})}case 111:return Q(q({},L),{u:new be(b,m?y:2*Math.PI/u),v:new be(h,m?x:Math.PI/u)});case 117:case 118:case 119:case 129:case 130:case 103:case 104:case 105:case 112:case 126:case 113:case 127:case 210:case 114:case 115:case 116:return Q(q({},L),{u:new be(b,y),v:new be(h,x)});case 200:case 201:case 202:case 206:case 205:case 203:case 204:case 207:case 208:{if(t.graphMode===200&&(t.slice_coordinate===\"z\"||t.slice_coordinate===\"_implicit\"))return{xmin:c,xmax:l,ymin:p,ymax:f,mathToPixels:A,tolerance:O};if(t.graphMode===201&&(t.slice_coordinate===\"x\"||t.slice_coordinate===\"_implicit\")){let Re={xmin:p,xmax:f,ymin:d,ymax:g};return Q(q({},Re),{mathToPixels:Li.fromRects(Gs(Re),ia,{xAxisScale:s,yAxisScale:o}),tolerance:mo})}if(t.graphMode===202&&(t.slice_coordinate===\"y\"||t.slice_coordinate===\"_implicit\")){let Re={xmin:c,xmax:l,ymin:d,ymax:g};return Q(q({},Re),{mathToPixels:Li.fromRects(Gs(Re),ia,{xAxisScale:s,yAxisScale:o}),tolerance:mo})}let{min:se,max:_e}=(($=t.domain)==null?void 0:$.type)===\"1d\"?t.domain:{min:0,max:2*Math.PI};return{x:new be(c,l),y:new be(p,f),z:new be(d,g),t:new be(se,_e),u:new be(b,y),v:new be(h,x)}}case 209:{if(t.slice_coordinate===\"z\")return{xmin:c,xmax:l,ymin:p,ymax:f,mathToPixels:A,tolerance:mo};if(t.slice_coordinate===\"x\"){let se={xmin:p,xmax:f,ymin:d,ymax:g};return Q(q({},se),{mathToPixels:Li.fromRects(Gs(se),ia,{xAxisScale:s,yAxisScale:o}),tolerance:mo})}if(t.slice_coordinate===\"y\"){let se={xmin:c,xmax:l,ymin:d,ymax:g};return Q(q({},se),{mathToPixels:Li.fromRects(Gs(se),ia,{xAxisScale:s,yAxisScale:o}),tolerance:mo})}return t.slice_coordinate===\"_implicit\"?Q(q({},L),{u:new be(c,l),v:new be(p,f)}):!1}default:return!1}}function gg(e){let{viewState:t,graphInfo:r,compiled:n,maxOverride:i,showPoint:s}=e,o=n.fn,a=Dl(t,r,o),u;if(!a)u={segments:[],resolved:!0};else{let{min:p,max:f}=a;u=hG({fn:o,min:Math.max(p,0),max:i!==void 0?Math.min(i,f):f})}let{points:c,droppedIndices:l}=yf(u.segments);return{segments:[c],droppedIndices:l,graphMode:3,color:r.color,style:r.pointStyle,poi:Ls(u.segments),showPoint:s}}function NG(e){switch(e){case 120:case 122:return 107;case 121:case 123:return 108;case 124:return 110;case 126:return 112;case 127:return 113;default:return e}}function RR(e,t,r){let n=r?Math.PI/180:1;switch(e){case 114:return t;case 115:{let[i,s,o]=t;return[i*sr(s*n),i*Ft(s*n),o]}case 116:{let[i,s,o]=t;return[i*Ft(o*n)*sr(s*n),i*Ft(o*n)*Ft(s*n),i*sr(o*n)]}default:return[0,0,0]}}function Ca(e){var m,b,y,h,x,P,E,T,M;let{viewState:t,graphInfo:r,compiled:n,derivative:i}=e,s=n.fn,{degreeMode:o}=t,a=o?Math.PI/180:1,u=Dl(t,r,s),c,l,p,f=NG(r.graphMode),d=t.xAxisScale===\"linear\"&&t.yAxisScale===\"linear\";if(!u)c={segments:[],resolved:!0};else{switch(f){case 1:case 2:let O=i?i.fn:void 0;c=r.isLinear&&d&&ao(r.linearCoefficients)?YI(r.linearCoefficients,u):$I(s,u,O);break;case 6:c=ag(w=>[w,s(w)],u);break;case 8:c=of(s,u);break;case 5:u.max===u.min?c=gG(s,u.min):c=r.isLinear&&d&&ao(r.linearCoefficients)?yG(r.linearCoefficients,u):ag(s,u);break;case 100:case 101:case 102:let{min:S,max:C}=((m=r.domain)==null?void 0:m.type)===\"1d\"?r.domain:{min:0,max:1},A=new be(S,C),L=[],Z=n.fn;switch(f){case 100:L=gc(Z,A,r.resolution,t);break;case 101:L=og(Z,A,r.resolution,t);break;case 102:L=AI(Z,A,r.resolution,t);break}return{graphMode:100,guid:Mi(),points:L,color:r.color,thickness:r.lineWidth};case 112:case 113:case 130:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:{let w=u,{u:z,v:F}=w,X=f===112||f===113,ee=r.graphMode===122||r.graphMode===123,re=X?ff:ee?2:kS,{resolution:Oe}=r,$=Oe===void 0||isNaN(Oe)?re:Zr(bR(Oe),2,100),Ze=Ui([z.min,z.max]).type!==\"empty\"&&Ui([F.min,F.max]).type!==\"empty\",xe;switch(Ze&&f){case 103:{let Re=n.fn;xe=IR(Re,w,z,F,$);break}case 130:{xe=IR((K,V)=>{let[ce,ae]=n.fn(K,V);return[ce,ae,0]},w,z,F,$);break}case 104:xe=IG(n,w,z,F,$,o);break;case 105:xe=EG(n,w,z,F,$,o);break;case 106:xe=MG(n,w,$);break;case 107:xe=DG(n,w,$);break;case 108:xe=vG(n,w,$);break;case 109:xe=OG(n,w,z,F,$,o);break;case 110:xe=SG(n,w,z,F,$,o);break;case 111:xe=RG(n,w,z,F,$,o);break;case 112:case 113:xe=WI(n,e.dependencies,e.gradient,u,$,{isInequality:(b=e.isImplicit3dInequality)!=null?b:!1});break;case!1:xe=TG();break}let se=r.graphMode===113||r.graphMode===127;return{meshData:xe,color:r.color,fillOpacity:se?1:(y=r.fillOpacity)!=null?y:1,uvRange:[z,F],uvArgs:(h=ji[r.graphMode])!=null?h:[],extraMeshArgs:(x=bc[r.graphMode])!=null?x:[],graphMode:f,compiled:n,restrictionShader:e.restrictionShader3d}}case 200:case 201:case 202:case 211:case 206:case 205:case 203:case 204:case 213:case 207:case 208:case 212:case 214:case 215:case 209:{let w=(K,V)=>{let ce=of(K,V);return{segments:ce.segments,resolved:ce.resolved,graphMode:8,color:r.color,lineWidth:r.lineWidth,lineOpacity:r.lineOpacity,listIndex:r.listIndex,operator:r.operator,compiled:n,poi:{}}},z=n.fn,F=(P=r.slice_value)!=null?P:0,X=(E=r.slice_coordinate)!=null?E:\"\",ee=u,re,Oe,$,Ze=!0,xe=K=>{let V=w(K,u),ce=r.lineWidth;return xg(V,t,ce,F)},se=K=>{for(let V=0;V<K.length/3;V++){let[ce,ae]=[K[3*V+1],K[3*V+2]];K[3*V+1]=ae,K[3*V+2]=ce}},_e=K=>{for(let V=0;V<K.length/3;V++){let[ce,ae,Pe]=[K[3*V],K[3*V+1],K[3*V+2]];K[3*V]=Pe,K[3*V+1]=ce,K[3*V+2]=ae}},Re=(K,V)=>{var Rr;let ce=u,ae=w(K,ce),Pe=r.lineWidth,Je=t.viewport,{xmin:Ye,xmax:kt,ymin:Sr,ymax:Nn,zmin:vr,zmax:Ae}=Je,de=(kt-Ye)/100,$e=(Nn-Sr)/100,vi=(Ae-vr)/100,nn=[];for(let zr=0;zr<ae.segments.length;zr++){let Un=df(ae.segments[zr],ce),Mo=NaN,Do=NaN,bs=NaN,Qi=NaN,vo=NaN;for(let Oo=0;Oo<Un.length/2;Oo++){let Su=Un[2*Oo],Bg=Un[2*Oo+1],[zg,Hg,Ug]=V(Su,Bg),q0=Math.abs(zg-bs),k0=Math.abs(Hg-Qi),Y0=Math.abs(Ug-vo);if(q0>de||k0>$e||Y0>vi){let X0=Math.min(100,MR(q0/de,k0/$e,Y0/vi));for(let qg=1;qg<X0;qg++){let Z0=qg/X0,iA=Xr(Mo,Su,Z0),sA=Xr(Do,Bg,Z0);nn.push(V(iA,sA))}}nn.push([zg,Hg,Ug]),Mo=Su,Do=Bg,bs=zg,Qi=Hg,vo=Ug}zr<ae.segments.length-1&&nn.push([NaN,NaN,0])}return Ze=(Rr=ae.resolved)!=null?Rr:!0,hc(nn,Je,Pe)};switch(f){case 200:{if(X===\"z\")return xe((V,ce)=>z(V,ce)-F);if(X===\"_implicit\"){let V=r.slice_function.fn;$=Re((Pe,Je)=>V(Pe,Je,z(Pe,Je)),(Pe,Je)=>[Pe,Je,z(Pe,Je)]);break}let K=X===\"x\";re=K?ee.y:ee.x,Oe=K?V=>[F,V,z(F,V)]:V=>[V,F,z(V,F)],$=gc(Oe,re,r.resolution,t);break}case 201:{if(X===\"x\"){let V=xe((ce,ae)=>z(ce,ae)-F);return _e(V.points),V}if(X===\"_implicit\"){let V=r.slice_function.fn;$=Re((Pe,Je)=>V(z(Pe,Je),Pe,Je),(Pe,Je)=>[z(Pe,Je),Pe,Je]);break}let K=X===\"y\";re=K?ee.z:ee.y,Oe=K?V=>[z(F,V),F,V]:V=>[z(V,F),V,F],$=gc(Oe,re,r.resolution,t);break}case 202:{if(X===\"y\"){let V=xe((ce,ae)=>z(ce,ae)-F);return se(V.points),V}if(X===\"_implicit\"){let V=r.slice_function.fn;$=Re((Pe,Je)=>V(Pe,z(Pe,Je),Je),(Pe,Je)=>[Pe,z(Pe,Je),Je]);break}let K=X===\"x\";re=K?ee.z:ee.x,Oe=K?V=>[F,z(F,V),V]:V=>[V,z(V,F),F],$=gc(Oe,re,r.resolution,t);break}case 209:{let K=n.fn;if(X===\"x\"){let V=xe((ce,ae)=>K(F,ce,ae));return _e(V.points),V}else if(X===\"y\"){let V=xe((ce,ae)=>K(ce,F,ae));return se(V.points),V}else{if(X===\"z\")return xe((V,ce)=>K(V,ce,F));if(X===\"_implicit\"){let{resolution:V}=r,ce=V===void 0||isNaN(V)?ff:Zr(bR(V),2,100);$=hR(n.fn,r.slice_function.fn,u,ce);break}else throw new Error(\"Programming Error: unexpected slice coordinate\")}}case 206:case 205:{let K=X===\"z\";re=K?ee.t:ee.z,Oe=K?V=>[z(V,F),V,F]:V=>[z(F,V),F,V],$=og(Oe,re,r.resolution,t);break}case 211:{let K=n.fn,V;switch(X){case\"x\":V=(Ae,de)=>K(Ae,de)*sr(Ae*a)-F;break;case\"y\":V=(Ae,de)=>K(Ae,de)*Ft(Ae*a)-F;break;case\"r\":V=(Ae,de)=>K(Ae,de)-F;break;case\"_implicit\":let vr=r.slice_function.fn;V=(Ae,de)=>vr(K(Ae,de)*sr(Ae*a),K(Ae,de)*Ft(Ae*a),de,K(Ae,de),Ae);break;default:throw new Error(\"Programming Error: bad slice\")}let ce=X===\"x\",ae=X===\"y\",Pe=u,Je=w(V,Pe),Ye=[],kt=(vr,Ae)=>[ce?F:K(vr,Ae)*sr(vr*a),ae?F:K(vr,Ae)*Ft(vr*a),Ae];for(let vr=0;vr<Je.segments.length;vr++){let Ae=df(Je.segments[vr],Pe),de=NaN,$e=NaN,vi=5*(Math.PI/180)/a;for(let nn=0;nn<Ae.length/2;nn++){let Rr=Ae[2*nn],zr=Ae[2*nn+1],Un=Math.abs(Rr-de),Mo=ce?F:K(Rr,zr)*sr(Rr*a),Do=ae?F:K(Rr,zr)*Ft(Rr*a);if(Un>vi){let bs=Math.min(72,Un/vi);for(let Qi=1;Qi<bs;Qi++){let vo=Qi/bs,Oo=Xr($e,zr,vo),Su=Xr(de,Rr,vo);Ye.push(kt(Su,Oo))}}Ye.push([Mo,Do,zr]),de=Rr,$e=zr}vr<Je.segments.length-1&&Ye.push([NaN,NaN,0])}let Sr=r.lineWidth,Nn=t.viewport;$=hc(Ye,Nn,Sr),Ze=(T=Je.resolved)!=null?T:!0;break}case 213:{let K=X===\"x\",V=X===\"y\",ce=X===\"z\",ae=n.fn,Pe;switch(X){case\"x\":Pe=(de,$e)=>de*sr($e*a)-F;break;case\"y\":Pe=(de,$e)=>de*Ft($e*a)-F;break;case\"z\":Pe=(de,$e)=>ae(de,$e)-F;break;case\"_implicit\":let Ae=r.slice_function.fn;Pe=(de,$e)=>Ae(de*sr($e*a),de*Ft($e*a),ae(de,$e),de,$e);break;default:throw new Error(\"Programming Error: bad slice\")}let Je=u,Ye=w(Pe,Je),kt=[],Sr=(Ae,de)=>[K?F:Ae*sr(de*a),V?F:Ae*Ft(de*a),ce?F:ae(Ae,de)];for(let Ae=0;Ae<Ye.segments.length;Ae++){let de=df(Ye.segments[Ae],Je),$e=NaN,vi=NaN,nn=5*(Math.PI/180)/a;for(let Rr=0;Rr<de.length/2;Rr++){let zr=de[2*Rr],Un=de[2*Rr+1],Mo=Math.abs(Un-$e);if(Mo>nn){let Do=Math.min(72,Mo/nn);for(let bs=1;bs<Do;bs++){let Qi=bs/Do,vo=Xr(vi,zr,Qi),Oo=Xr($e,Un,Qi);kt.push(Sr(vo,Oo))}}kt.push(Sr(zr,Un)),$e=Un,vi=zr}Ae<Ye.segments.length-1&&kt.push([NaN,NaN,0])}let Nn=r.lineWidth,vr=t.viewport;$=hc(kt,vr,Nn);break}case 212:{let K=X===\"x\",V=X===\"y\",ce=X===\"z\",ae=n.fn,Pe;switch(X){case\"x\":Pe=(de,$e)=>ae(de,$e)*Ft($e*a)*sr(de*a)-F;break;case\"y\":Pe=(de,$e)=>ae(de,$e)*Ft($e*a)*Ft(de*a)-F;break;case\"z\":Pe=(de,$e)=>ae(de,$e)*sr($e*a)-F;break;case\"rho\":Pe=(de,$e)=>ae(de,$e)-F;break;case\"_implicit\":let Ae=r.slice_function.fn;Pe=(de,$e)=>Ae(ae(de,$e)*Ft($e*a)*Ft(de*a),ae(de,$e)*Ft($e*a)*sr(de*a),ae(de,$e)*sr($e*a),ae(de,$e),de,$e);break;default:throw new Error(\"Programming Error: bad slice\")}let Je=u,Ye=w(Pe,Je),kt=[],Sr=(Ae,de)=>[K?F:ae(Ae,de)*Ft(de*a)*sr(Ae*a),V?F:ae(Ae,de)*Ft(de*a)*Ft(Ae*a),ce?F:ae(Ae,de)*sr(de*a)];for(let Ae=0;Ae<Ye.segments.length;Ae++){let de=df(Ye.segments[Ae],Je),$e=NaN,vi=NaN,nn=5*(Math.PI/180)/a;for(let Rr=0;Rr<de.length/2;Rr++){let zr=de[2*Rr],Un=de[2*Rr+1],Mo=Math.abs(zr-$e),Do=Math.abs(Un-vi);if(Mo>nn||Do>nn){let bs=Math.min(72,MR(Mo/nn,Do/nn));for(let Qi=1;Qi<bs;Qi++){let vo=Qi/bs,Oo=Xr($e,zr,vo),Su=Xr(vi,Un,vo);kt.push(Sr(Oo,Su))}}kt.push(Sr(zr,Un)),$e=zr,vi=Un}Ae<Ye.segments.length-1&&kt.push([NaN,NaN,0])}let Nn=r.lineWidth,vr=t.viewport;$=hc(kt,vr,Nn),Ze=(M=Ye.resolved)!=null?M:!0;break}case 215:case 214:{let K=f===214?n.fn:(ce,ae)=>{let[Pe,Je]=n.fn(ce,ae);return[Pe,Je,0]},V;switch(X){case\"x\":V=(ae,Pe)=>K(ae,Pe)[0]-F;break;case\"y\":V=(ae,Pe)=>K(ae,Pe)[1]-F;break;case\"z\":V=(ae,Pe)=>K(ae,Pe)[2]-F;break;case\"u\":V=(ae,Pe)=>ae-F;break;case\"v\":V=(ae,Pe)=>Pe-F;break;case\"_implicit\":let ce=r.slice_function.fn;V=(ae,Pe)=>{let[Je,Ye,kt]=K(ae,Pe);return ce(Je,Ye,kt,ae,Pe)};break;default:throw new Error(\"Programming Error: bad slice\")}$=Re(V,K);break}case 203:case 204:{let K=X===\"r\";re=K?ee.v:ee.u,Oe=K?V=>[F,V,z(F,V)]:V=>[V,F,z(V,F)],$=og(Oe,re,r.resolution,t);break}case 207:case 208:{let K=X===\"theta\";re=K?ee.v:ee.u,Oe=K?V=>[z(F,V),F,V]:V=>[z(V,F),V,F],$=AI(Oe,re,r.resolution,t);break}}return{graphMode:100,guid:Mi(),points:$,resolved:Ze,color:r.color,thickness:r.lineWidth}}default:throw new Error(\"Programming Error: unexpected graphmode \"+f)}p=c.poi}if((!p||p.zeros.x.length+p.extrema.x.length+p.intercept.x.length>250)&&(p=mG()),f===1)for(let O in p){if(!p.hasOwnProperty(O))continue;let S=O;l=p[S].y,p[S].y=p[S].x,p[S].x=l}let g={segments:c.segments,resolved:c.resolved,graphMode:f,color:r.color,style:r.lineStyle,lineWidth:r.lineWidth,lineOpacity:r.lineOpacity,listIndex:r.listIndex,operator:r.operator,poi:p,compiled:n};if(f===6){let O=u;g.sampledDomain={min:O.min,max:O.max}}return c.fillSegments&&(g.fillSegments=c.fillSegments),g}function AG(e,t,r){let n,i,s,o,a=[],u=null;switch(r){case 6:u=vR;break;case 1:u=function(c){return[c[1],c[0]]};break}for(n=0;n<e.length;n++)for(o=e[n],i=0;i<o.length;i+=2)s=[o[i],o[i+1]],u&&(s=u(s)),a.push(s[0],s[1]);for(n=t.length-1;n>=0;n--)for(o=t[n],i=o.length-2;i>=0;i-=2)s=[o[i],o[i+1]],u&&(s=u(s)),a.push(s[0],s[1]);return a}function MR(...e){let t=-1/0;for(let r of e)r>t&&(t=r);return t}function hg(e,t,r){let n=p=>{let f=p[p.length-1];return f[f.length-2]},i=[],s=0,o=0,a=[],u=[],c=-1/0,l=-1/0;for(;;){if(c<=l){if(s>=t.length)break;u.push(t[s++])}if(l<=c){if(o>=e.length)break;a.push(e[o++])}if(c=n(u),l=n(a),Zn(c,l,4)){i.push(AG(a,u,r)),u=[],a=[];let p=Math.max(c,l);c=p,l=p}}return i}function yf(e){let t=[],r={};for(let n=0;n<e.length;n++){let i=e[n],[s,o]=i;!isNaN(s)&&!isNaN(o)?t.push(i):r[n]=!0}return{points:t,droppedIndices:r}}var ji={[8]:[\"x\",\"y\"],[106]:[\"x\",\"y\"],[120]:[\"y\",\"z\"],[122]:[\"y\",\"z\"],[107]:[\"y\",\"z\"],[121]:[\"x\",\"z\"],[123]:[\"x\",\"z\"],[108]:[\"x\",\"z\"],[109]:[\"r\",\"theta\"],[124]:[\"theta\",\"z\"],[110]:[\"theta\",\"z\"],[111]:[\"theta\",\"phi\"],[130]:[\"u\",\"v\"],[103]:[\"u\",\"v\"],[104]:[\"u\",\"v\"],[105]:[\"u\",\"v\"],[126]:[\"x\",\"y\"],[112]:[\"x\",\"y\",\"z\"],[113]:[\"x\",\"y\",\"z\"],[127]:[\"x\",\"y\"],[201]:[\"y\",\"z\"],[202]:[\"x\",\"z\"],[200]:[\"x\",\"y\"],[206]:[\"theta\",\"z\"],[205]:[\"theta\",\"z\"],[211]:[\"theta\",\"z\"],[203]:[\"r\",\"theta\"],[204]:[\"r\",\"theta\"],[213]:[\"r\",\"theta\"],[207]:[\"theta\",\"phi\"],[208]:[\"theta\",\"phi\"],[212]:[\"theta\",\"phi\"],[214]:[\"u\",\"v\"],[215]:[\"u\",\"v\"],[209]:[\"x\",\"y\",\"z\"],[210]:[\"x\",\"y\",\"z\"]},bc={[110]:[\"r\"],[111]:[\"rho\"],[104]:[\"r\",\"theta\"],[105]:[\"rho\",\"theta\",\"phi\"]};function CG(e){return!e||e[0].type===\"none\"&&e[1].type===\"none\"?\"NONE\":e[1].type===\"none\"?\"X\":e[0].type===\"none\"?\"Y\":\"XY\"}function NR(e,t){var r=CG(t);switch(e){case\"NONE\":return\"NONE\";case\"AUTO\":return r;case\"XY\":return r;case\"X\":return r===\"X\"||r===\"XY\"?\"X\":\"NONE\";case\"Y\":return r===\"Y\"||r===\"XY\"?\"Y\":\"NONE\";default:return\"NONE\"}}var _G=(e,t)=>{let r=e.segments[0],n=t.segments[0],i=[[...r,...n]];return Q(q({},e),{segments:i})};function LG(e){let{viewState:t,graphInfo:r,compiled:n,derivative:i,bounds:s}=e,o=As(r),a=qn(r.domainBound,Ui(s));if(a.type===\"known\")return o.domainBound=a,o.lineStyle=\"SOLID\",Ca({graphInfo:o,viewState:t,compiled:n,derivative:i})}function Pu(e){let{viewState:t,graphInfo:r,compiled:n,bounds:i,included:s,showPoint:o}=e,a=As(r),u=qn(r.domainBound,Ui(i));if(u.type===\"known\")return a.domainBound=u,a.pointStyle=s?\"POINT\":\"OPEN\",gg({graphInfo:a,viewState:t,compiled:n,showPoint:o,maxOverride:void 0})}function _R(e){let{viewState:t,graphInfo:r,compiled:n,bounds:i,maxOverride:s,showPoint:o}=e,[a,u]=i,c=[],l;a=Math.ceil(a),u=Math.floor(u);let p=s!==void 0?s:1/0;if(a===-1/0&&u>=p)l=Pu({bounds:[a,p],included:!0,viewState:t,graphInfo:r,compiled:n,showPoint:o}),c.push(l);else if(a===-1/0&&u<1/0)l=Pu({bounds:[a,u],included:!0,viewState:t,graphInfo:r,compiled:n,showPoint:o}),c.push(l),c.push(Pu({bounds:[u+1,p],included:!1,viewState:t,graphInfo:r,compiled:n,showPoint:o}));else if(a>-1/0&&u>=p)l=Pu({bounds:[a,p],included:!0,viewState:t,graphInfo:r,compiled:n,showPoint:o}),c.push(Pu({bounds:[-1/0,a-1],included:!1,viewState:t,graphInfo:r,compiled:n,showPoint:o})),c.push(l);else{l=Pu({bounds:[a,u],included:!0,viewState:t,graphInfo:r,compiled:n,showPoint:o});let f=Pu({bounds:[-1/0,a-1],included:!1,viewState:t,graphInfo:r,compiled:n,showPoint:o}),d=Pu({bounds:[u+1,p],included:!1,viewState:t,graphInfo:r,compiled:n,showPoint:o});c.push(l);let g;f&&d&&(g=_G(f,d),c.push(g))}return{cdfTopBranch:l,topBranches:c}}var LR=e=>{let{viewState:t,graphInfo:r,compiled:n,derivative:i,bounds:s}=e,[o,a]=s,u=LG({bounds:[o,a],viewState:t,graphInfo:r,compiled:n,derivative:i}),c=[Ca({viewState:t,graphInfo:r,compiled:n,derivative:i})];return{cdfTopBranch:u,topBranches:c}};function AJ(e){switch(e){case\"LOOP_FORWARD\":return\"dcg-icon-arrow-one-way\";case\"LOOP_FORWARD_REVERSE\":return\"dcg-icon-arrow-two-way\";case\"PLAY_ONCE\":return\"dcg-icon-arrow-once\";case\"PLAY_INDEFINITELY\":return\"dcg-icon-arrow-infinite\"}}function gf(e,t){let r={};for(let n in t)t.hasOwnProperty(n)&&(Ao(e[n],t[n])||(r[n]=t[n]));return r}function Pg(e,t){let r,n={};for(let i in t)t.hasOwnProperty(i)&&(Ao(e[i],t[i])||(n[i]=t[i],r=n));return r}function wJ(e,t){t||(t={});let r={};for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(r[n]=As(e[n]));for(let n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}function VJ({from:e,to:t,props:r}){for(var n in r)r[n]&&e.hasOwnProperty(n)&&(t[n]=As(e[n]))}function GJ(e,t){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}function FR(e,t){let r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=e[n]);return r}function BJ(e){let t={};for(let r in e)e.hasOwnProperty(r)&&(t[r]=!0);return t}var wG=(n=>(n.NONE=\"NONE\",n.POSITIVE=\"POSITIVE\",n.BOTH=\"BOTH\",n))(wG||{});var VR={collapsed:!1,hidden:!1,secret:!1,readonly:!1,title:\"\"};function UJ(e){return q(q({},VR),e)}function qJ(e){return gf(VR,e)}var GR=\"**dcg_geo_folder**\";var jI={show:!1,min:\"\",max:\"\"},QI={breadth:\"\",axisOffset:\"\",alignedAxis:\"x\",showBoxplotOutliers:!0,binAlignment:\"center\",dotplotXMode:\"exact\",histogramMode:\"\"},KI={enabled:!1,latex:\"\"};var BR=4e3,Tg={polarDomain:{min:\"\",max:\"\"},parametricDomain:{min:\"\",max:\"\"},parametricDomain3Du:{min:\"\",max:\"\"},parametricDomain3Dv:{min:\"\",max:\"\"},parametricDomain3Dr:{min:\"\",max:\"\"},parametricDomain3Dphi:{min:\"\",max:\"\"},cdf:jI,colorLatex:\"\",description:\"\",fillOpacity:\"\",lineOpacity:\"\",pointOpacity:\"\",pointSize:\"\",lineWidth:\"\",resolution:\"\",labelAngle:\"\",vizProps:QI,clickableInfo:KI},zR=Q(q({folderId:\"\",latex:\"\",color:\"\",showLabel:!1,showAngleLabel:!0,label:\"\",hidden:!1,secret:!1,readonly:!1,disableGraphInteractions:!1,dragMode:\"AUTO\",labelSize:\"\",labelOrientation:\"default\",suppressTextOutline:!1,interactiveLabel:!1,editableLabelMode:\"NONE\",residualVariable:\"\",isLogModeRegression:!1,pointStyle:\"POINT\",lineStyle:\"SOLID\",arrowMode:\"DEFAULT\",regressionParameters:{},displayEvaluationAsFraction:!1,slider:{},strictIntersection:!1,extendTo3D:!1},Tg),{points:void 0,lines:void 0,fill:void 0}),HR={hardMin:!1,hardMax:!1,animationPeriod:BR,loopMode:\"LOOP_FORWARD_REVERSE\",playDirection:1,isPlaying:!1,min:\"-10\",max:\"10\",step:\"\"},UR={hardMin:!1,hardMax:!1,animationPeriod:BR,loopMode:\"LOOP_FORWARD_REVERSE\",playDirection:1,isPlaying:!1,min:`${en.xmin}`,max:`${en.xmax}`,step:\"\"};function nj(e,t){return Q(q(q({},zR),e),{slider:q(q({},t.is3d?UR:HR),e.slider),cdf:q(q({},jI),e.cdf),vizProps:q(q({},QI),e.vizProps),clickableInfo:q(q({},KI),e.clickableInfo)})}function ij(e,t){var r=gf(zR,Q(q({},e),{slider:gf(t.is3d?UR:HR,e.slider)})),n=Pg(jI,e.cdf);n===void 0?delete r.cdf:r.cdf=n;var i=Pg(QI,e.vizProps);i===void 0?delete r.vizProps:r.vizProps=i;var s=Pg(KI,e.clickableInfo);return s===void 0?delete r.clickableInfo:r.clickableInfo=s,r}function FG(e){return FR(e,Tg)}function sj(e,t){for(var r in Tg)if(Tg.hasOwnProperty(r)&&e[r]!==t[r])return!1;return!0}function oj(e){return q({type:\"statement\",id:e.id,latex:e.latex,label:e.label,color:e.color,fill:e.fill,points:e.points,lines:e.lines,extendTo3D:e.extendTo3D,pointStyle:e.pointStyle,lineStyle:e.lineStyle,arrowMode:e.arrowMode,dragMode:e.dragMode,labelSize:e.labelSize,labelOrientation:e.labelOrientation,suppressTextOutline:e.suppressTextOutline,interactiveLabel:e.interactiveLabel,editableLabelMode:e.editableLabelMode,residualVariable:e.residualVariable,regressionParameters:e.regressionParameters,isLogModeRegression:e.isLogModeRegression,showLabel:e.showLabel,showAngleLabel:e.showAngleLabel,shouldGraph:e.hidden,slider:{min:e.slider.hardMin?e.slider.min:\"\",max:e.slider.hardMax?e.slider.max:\"\",softMin:e.slider.hardMin?\"\":e.slider.min,softMax:e.slider.hardMax?\"\":e.slider.max,step:e.slider.step,isPlayingOnce:e.slider.isPlaying&&e.slider.loopMode===\"PLAY_ONCE\"},strictIntersection:e.strictIntersection,isInConstructionsFolder:e.folderId===GR},FG(e))}var UG={};Ys(UG,{colors:()=>xc,colors3d:()=>HG,getDisplayColor:()=>aa,invertColor:()=>GG,isValidHexColor:()=>Ig,mutateOpacity:()=>zG,normalizeColor:()=>e0,parseHex:()=>BG,shadeColor:()=>VG});function e0(e){return Ig(e)?(e.match(/^#([A-Fa-f0-9]{3})$/g)&&(e=\"#\"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),e.toLowerCase()):e}function Ig(e){return typeof e==\"string\"&&(e.match(/^#([A-Fa-f0-9]{3})$/g)||e.match(/^#([A-Fa-f0-9]{6})$/g))}function VG(e,t){if(e=e0(e),!Ig(e))return e;t>1&&(t=1),t<-1&&(t=-1);var r=parseInt(e.slice(1),16),n=t<0?0:255,i=t<0?t*-1:t,s=r>>16,o=r>>8&255,a=r&255;return\"#\"+(16777216+(Math.round((n-s)*i)+s)*65536+(Math.round((n-o)*i)+o)*256+(Math.round((n-a)*i)+a)).toString(16).slice(1)}function GG(e){if(e=e0(e),!Ig(e))return e;let t=\"0123456789abcdef\";return\"#\"+e.slice(1).split(\"\").map(r=>t[15-t.indexOf(r)]).join(\"\")}function BG(e){if(e=e.replace(/#/,\"\"),e.length===3)var t=parseInt(e.slice(0,1)+e.slice(0,1),16),r=parseInt(e.slice(1,2)+e.slice(1,2),16),n=parseInt(e.slice(2,3)+e.slice(2,3),16);else if(e.length===6)var t=parseInt(e.slice(0,2),16),r=parseInt(e.slice(2,4),16),n=parseInt(e.slice(4,6),16);else var t=0,r=0,n=0;return{r:t,g:r,b:n}}function zG(e,t){let r=/(rgba\\([\\d]+\\,\\ ?[\\d]+\\,\\ ?[\\d]+\\,\\ ?)[\\d.]+(\\))/;return e.match(r)?e.replace(r,`$1${t}$2`):e}function aa(e,t){if(t&&t.colorLatexValue){var r=t.colorLatexValue;return Array.isArray(r)?r[0]:r}return e.color}var xc={RED:\"#c74440\",BLUE:\"#2d70b3\",GREEN:\"#388c46\",PURPLE:\"#6042a6\",ORANGE:\"#fa7e19\",BLACK:\"#000000\",GRAY:\"#aaaaaa\",FOCUS_OUTLINE:\"#6a93d2\"},HG={RED:xc.RED,BLUE:xc.BLUE,GREEN:xc.GREEN,ORANGE:xc.ORANGE,PURPLE:xc.PURPLE,GRAY:xc.GRAY};function t0(e,t){let r;switch(t){case\"solvedEquation\":r=2;break;case\"baseComparator\":r=4;break;default:r=1;break}return Math.floor(e/r)}function XR(e){let t=[];for(let n=0;n<e.instructionsLength();n++)t.push(!1);let r=[];t[e.getReturnIndex()]=!0;for(let n=e.instructionsLength()-1;n>=0;n--){if(!t[n])continue;let i=e.getInstruction(n);if(i.type===2&&r.push(e.argNames[n]),Me(i))continue;let s=yu(e,i)?[i.args[1]]:i.args;for(let o of s)t[o]=!0}return r}var vl=class{constructor({enableGeometry:t,enable3d:r,beta3d:n,scales:i}){this._isGeometry=!1;this._is3dProduct=!1;this._isBeta3d=!1;this._isGeometry=t,this._is3dProduct=r,this._isBeta3d=n,this._scales=i}isGeometryEnabled(){return this._isGeometry}is3dProduct(){return this._is3dProduct}is3dPolicy(){return!1}isBeta3d(){return this._isBeta3d}areAllScalesLinear(){return this._scales?this._scales.xAxisScale===\"linear\"&&this._scales.yAxisScale===\"linear\":!0}assignmentForbidden(t){return t===\"x\"||t===\"y\"||t===\"theta\"||this.substitutionForbidden(t)}substitutionForbidden(t){return t===\"index\"||t===\"dt\"||t.slice(0,3)===\"tmp\"||Xe.hasOwnProperty(t)}isValidSlider(t){return t===\"x\"||t===\"y\"?!0:!(t.slice(0,3)===\"ans\"||t.slice(0,6)===\"idref_\"||this.assignmentForbidden(t))}sliderVariables(t){return t.indexOf(\"theta\")!==-1&&(t=t.filter(function(r){return r!==\"r\"})),t.filter(r=>!(this.assignmentForbidden(r)||r.slice(0,3)===\"ans\"||r.slice(0,6)===\"idref_\"||r[0]===\"_\"||this.isGeometryEnabled()&&r[0]===\"$\"))}tooManySliderVariables(t,r,n){return n?t.length>=1:t.length>=2&&r.length>=1}graphingEnabled(){return!0}ansEnabled(){return!1}dimensionVarsEnabled(){return!0}validRegressionParameter(t){return t!==\"x\"&&t!==\"y\"}validLHS(t){return t!==\"theta\"&&t.slice(0,6)!==\"idref_\"}unplottablePolarFunction(t,r){return t!==\"theta\"?!1:r.indexOf(\"r\")!==-1}validDoubleInequalitySymbol(t){return t===\"x\"||t===\"y\"}validDoubleInequalityVariables(t){return t.length>2?!1:t.every(this.validDoubleInequalitySymbol)}validExpressionVariables(t){return t.length===1&&t[0]===\"x\"}validSolvedVariable(t){return t===\"x\"||t===\"y\"||t===\"r\"}validImplicitVariables(t){switch(t.length){case 0:return!0;case 1:return t[0]===\"x\"||t[0]===\"y\"||t[0]===\"r\";case 2:return t[0]===\"x\"&&t[1]===\"y\"||t[0]===\"y\"&&t[1]===\"x\"||t[0]===\"r\"&&t[1]===\"theta\"||t[0]===\"theta\"&&t[1]===\"r\";default:return!1}}graphableListVariables(t,r){return t===\"x\"||t===\"y\"||t===\"r\"||r===\"x\"||r===\"y\"}validParametricVariable(t){return t===\"t\"}validParametricVariables(t){return t.length===1&&this.validParametricVariable(t[0])}validInequalityVariables(t){switch(t.length){case 1:return t[0]===\"x\"||t[0]===\"y\"||t[0]===\"r\";case 2:return this.validImplicitVariables(t);default:return!1}}validFirstColumnVariable(t){return t!==\"y\"&&t!==\"r\"&&t!==\"theta\"&&!t.match(/y_(\\d+)/)}validActionVariable(t){return t===\"dt\"||t===\"index\"}validCoordinateEquationSymbol(t){return!1}complicatedPolarImplicit(t,r){return t===\"theta\"||t===\"r\"&&r!==1}graphMode(t,r,n){if(r.length===0)return t===\"x\"?1:t===\"r\"?6:t===\"y\"?2:10;let i=r[0];return i===\"y\"?1:t===\"x\"?1:t===\"r\"&&i===\"theta\"?6:2}functionDefinitionGraphMode(t,r){return this.graphMode(t,r)}tableableAsConstant(t){return!(t===\"x\"||t===\"r\"||t===\"theta\")}implicitIndependent(t){return\"x\"}implicitDependency(t){return t.length!==1?\"y\":t[0]===\"y\"?\"x\":t[0]===\"theta\"?\"r\":\"y\"}disabledFeatures(){return[]}};function Pc(){return new vl({enableGeometry:!1,enable3d:!0,beta3d:!1,scales:{xAxisScale:\"linear\",yAxisScale:\"linear\"}})}var Eg=class{constructor(t){this._isBeta3d=!1;this._isBeta3d=t}isGeometryEnabled(){return!1}is3dProduct(){return!0}is3dPolicy(){return!0}isBeta3d(){return this._isBeta3d}areAllScalesLinear(){return!0}graphingEnabled(){return!0}ansEnabled(){return!1}dimensionVarsEnabled(){return!1}substitutionForbidden(t){return Pc().substitutionForbidden(t)}validInequalityVariables(t){return this.validImplicitVariables(t)}validFirstColumnVariable(t){return Pc().validFirstColumnVariable(t)}validActionVariable(t){return Pc().validActionVariable(t)}tableableAsConstant(t){return Pc().tableableAsConstant(t)}implicitIndependent(t){return Pc().implicitIndependent(t)}validRegressionParameter(t){return Pc().validRegressionParameter(t)}assignmentForbidden(t){return t===\"x\"||t===\"y\"||t===\"z\"||t===\"r\"||t===\"rho\"||t===\"theta\"||t===\"phi\"||this.substitutionForbidden(t)}sliderVariables(t){return t.filter(r=>!(this.assignmentForbidden(r)||r.slice(0,3)===\"ans\"||r.slice(0,6)===\"idref_\"||r[0]===\"_\"))}tooManySliderVariables(t,r,n){return n?this.isBeta3d()?r.length>=1:t.length>=1:r.length>=1}isValidSlider(t){return!(t.slice(0,3)===\"ans\"||t.slice(0,6)===\"idref_\"||this.assignmentForbidden(t))}validLHS(t){return t!==\"phi\"&&Pc().validLHS(t)}unplottablePolarFunction(t,r){return!1}complicatedPolarImplicit(t,r){return!1}validDoubleInequalitySymbol(t){return!1}validDoubleInequalityVariables(t){return!1}validExpressionVariables(t){return t.length===2&&t.every(r=>r==\"x\"||r==\"y\")}validSolvedVariable(t){return r0(t)||t===\"r\"||t===\"rho\"}validImplicitVariables(t){return t.every(r0)}graphableListVariables(t,r){return t===\"x\"||t===\"y\"||t===\"z\"||t===\"r\"||r===\"x\"||r===\"y\"}validParametricVariable(t){return t===\"t\"||t===\"u\"||t===\"v\"}validParametricVariables(t){return t.length===1&&this.validParametricVariable(t[0])||t.length===2&&t.every(hf)}validCoordinateEquationSymbol(t){return this.isBeta3d()?t===\"rhothetaphi\"||t===\"rthetaz\":!1}functionDefinitionGraphMode(t,r){if(r.length===1)switch(r[0]){case\"x\":return 121;case\"y\":return 120;default:return 10}else if(r.length===2&&r.every(n=>n==\"x\"||n==\"y\"))return 106;return 10}graphMode(t,r,n){if(n!=null||(n=r),r.length===0)switch(t){case\"z\":return n.some(i=>i===\"r\"||i===\"theta\")?109:106;case\"y\":return n.includes(\"z\")?108:123;case\"x\":return n.includes(\"z\")?107:122;case\"r\":return n.indexOf(\"r\")>-1?10:ZR(n);case\"rho\":return 111;case\"rthetaz\":return this.isBeta3d()?115:10;case\"rhothetaphi\":return this.isBeta3d()?116:10;default:return 10}switch(t){case\"z\":return r.every(i=>i==\"x\"||i==\"y\")?106:r.every(i=>i==\"r\"||i==\"theta\")?109:10;case\"y\":return r.every(i=>i==\"x\")?n.some(i=>i===\"z\")?108:121:r.every(i=>i==\"x\"||i==\"z\")?108:10;case\"x\":return r.every(i=>i==\"y\")?n.some(i=>i===\"z\")?107:120:r.every(i=>i==\"y\"||i==\"z\")?107:10;case\"r\":return r.every(i=>i==\"theta\")?ZR(n):r.every(i=>i==\"theta\"||i==\"z\")?110:10;case\"rho\":return r.every(i=>i==\"theta\"||i==\"phi\")?111:10;case\"rthetaz\":return this.isBeta3d()?r.length===1&&r[0]===\"t\"?101:r.every(hf)?104:10:10;case\"rhothetaphi\":return this.isBeta3d()?r.length===1&&r[0]===\"t\"?102:r.every(hf)?105:10:10;default:return 10}}implicitDependency(t){if(t.length!==2)return\"z\";let r=t[0]<t[1]?t[0]+t[1]:t[1]+t[0];return r===\"xy\"?\"z\":r===\"xz\"?\"y\":r===\"yz\"?\"x\":\"z\"}disabledFeatures(){return[]}},r0=e=>e===\"x\"||e===\"y\"||e===\"z\",hf=e=>e===\"u\"||e===\"v\";function ZR(e){return e.some(r=>r0(r)||r===\"r\")?110:124}D.Base.prototype.getGraphMode=function(e,t){return 10};D.Base.prototype.graphmodeDependencies=hs;function hs(e,t){let r=t.getDependencies();if(e.is3dProduct()&&t instanceof cr){let n=new Set(XR(t._chunk));return r.filter(i=>n.has(i))}else return r}function qG(e,t){var r;return e&&e.hasOwnProperty(\"dragMode\")?e.dragMode===\"AUTO\"?r=t.defaultDragMode:r=e.dragMode:r=t.defaultDragMode,NR(r,t.moveStrategy)}function $R(e,t){let r=e.is3dPolicy();if(t.isMovablePoint&&!r&&qG(this.userData,t)!==\"NONE\")return 4;var n=hs(e,t);switch(t.valueType){case on:case H:if(r){if(n.length===0)return 114;if(e.validParametricVariables(n))return n.length==1?100:_a(103,t)}return 10;case wr:case En:return n.length===0?5:10;case Fr:case Mn:return r&&n.length===0?100:10;case Jr:case Dn:return r&&n.length===0?_a(130,t):10;case jr:case vn:return r&&n.length===0?_a(103,t):10;case xt:case an:return r?119:10;case ve:case cn:return r?129:10;case Ir:case un:return r?117:10;case Ar:case _n:return r?118:10;case N:case ft:return n.length===0?3:r&&e.validParametricVariables(n)?n.length===1?5:n.every(hf)?_a(130,t):10:e.validParametricVariables(n)?5:10;case I:case ie:return!e.is3dPolicy()&&n.length===1?2:r&&n.length===2&&n.indexOf(\"x\")>-1&&n.indexOf(\"y\")>-1?_a(106,t):10;case we:case Nr:return 16;case me:case Hr:return 20;case fe:case Ur:return 21;case De:case Tr:return 17;case ye:case qr:return 18;case Le:case kr:return 19;case he:case Yr:return this instanceof Tt&&this.getDependencies().length===1?10:24;case Ne:case ar:case Te:case ur:return 23;default:return 10}}D.Expression.prototype.getGraphMode=$R;function WR(e,t){var r=t._expression.getDependencies();if(r.length>1)return 10;if(t._expression.isList&&t._expression.length===0)return 10;var n=t._symbol;let i=t.getDependencies();return e.graphMode(n,r,i)}D.Equation.prototype.getGraphMode=D.BaseComparator.prototype.getGraphMode=function(e,t){if(t.isError)return 10;var r=hs(e,t);let n=t.getDependencies();if(e.is3dPolicy()){let i=10,s=this.type===\"Equation\";return r.length>0&&(n.includes(\"z\")?i=s?112:113:i=s?126:127),_a(i,t)}return t.isConstant?10:t instanceof D.SolvedEquation?WR(e,t):r.length===1||r.length===2?8:10};function o0(e){var t;return e===106||e===200||e===107||e===201||e===108||e===202?[\"x\",\"y\",\"z\",\"_implicit\"]:e===110||e===211?[\"x\",\"y\",\"z\",\"r\",\"theta\",\"_implicit\"]:e===111||e===212?[\"x\",\"y\",\"z\",\"rho\",\"theta\",\"phi\",\"_implicit\"]:e===109||e===213?[\"x\",\"y\",\"z\",\"r\",\"theta\",\"_implicit\"]:e===103||e===214||e===130||e===215?[\"x\",\"y\",\"z\",\"u\",\"v\",\"_implicit\"]:e===113||e===210||e===112||e===209?[\"x\",\"y\",\"z\",\"_implicit\"]:(t=ji[e])!=null?t:[]}function _a(e,t){let r=o0(e),n=t._chunk;try{let s=jo(n,r,{allowSlices:!0}).getSliceVariablesOrImplicit();if(s.length!==1)return e;let o=s[0];return r.indexOf(o)<0?10:DS(e,o)}catch(i){return 10}}D.DoubleInequality.prototype.getGraphMode=function(e,t){let r=t.getDependencies();return e.graphMode(t._symbol,[],r)};D.Assignment.prototype.getGraphMode=function(e,t){if(t instanceof D.SolvedEquation)return WR(e,t);if(this.isEquation(e,t))return this.asEquation().getGraphMode(e,t);let r=hs(e,t),n=this._symbol,i=t.getDependencies();switch(t.valueType){case I:case ie:case Be:switch(r.length){case 0:{let o=e.graphMode(n,[],i);return e.is3dPolicy()?_a(o,t):o}case 1:if(t.valueType===ie&&!e.graphableListVariables(n,r[0]))return 10;if(this.isSlider)return 10;let s=e.graphMode(n,r,i);return e.is3dPolicy()?_a(s,t):s;default:return e.is3dPolicy()?_a(e.graphMode(n,r,i),t):10}case H:if(e.assignmentForbidden(n)||r.length>0&&!e.validParametricVariables(r))return 10;switch(r.length){case 0:return 114;case 1:return 100;case 2:return 103;default:return 10}default:return $R.call(this,e,t)}};D.CoordinateEquation.prototype.getGraphMode=function(e,t){var r=hs(e,t);let n=this._concatenatedSymbol;if(t.valueType!==H)return 10;if(r.length>0&&!e.validParametricVariables(r))return 10;switch(r.length){case 0:switch(n){case\"rhothetaphi\":return 116;case\"rthetaz\":return 115;default:return 10}case 1:switch(n){case\"rhothetaphi\":return 102;case\"rthetaz\":return 101;default:return 10}case 2:switch(n){case\"rhothetaphi\":return 105;case\"rthetaz\":return 104;default:return 10}default:return 10}};D.FunctionDefinition.prototype.getGraphMode=function(e,t){let r=e.is3dPolicy();if(this._argSymbols.length!==1&&!r)return 10;var n=e.functionDefinitionGraphMode(this._symbol,this._argSymbols),i=hs(e,t);switch(t.valueType){case I:case ie:if(r)return n;switch(i.length){case 0:return n;case 1:return i[0]!==this._argSymbols[0]?10:n;default:return 10}break;default:return 10}};D.Regression.prototype.getGraphMode=function(e,t){return this.isLhsSimple?t.isModelValid?t.model.getDependencies().length!==1?10:2:10:10};function a0(e,t){return t.isError?10:11}D.Histogram.prototype.getGraphMode=a0;D.DotPlot.prototype.getGraphMode=a0;D.BoxPlot.prototype.getGraphMode=a0;D.Image.prototype.getGraphMode=function(e,t){return this.userData.showPoints?this.center.isError||this.radianAngle.isError||this.width.isError||this.height.isError||this.opacity.isError?10:3:10};function JR(e){let t=0,r=0;for(let n=e.instructionsLength()-1;n>=0;n--){let i=e.getInstruction(n);yu(e,i)&&(t+=1,By(e,i.args[0])&&(r+=1))}return{numRestrictions:t,numEqualityRestrictions:r}}function Sl(e,t,r){try{return kG(e,t,r)}catch(n){return n instanceof R?n:te(n)}}function kG(e,t,r){var l,p;if(!e.is3dProduct()||r.isError)return r;if(!(r instanceof cr))return te(\"Expected peel error to be checked on an IRExpression\");function n(f,d){let g=d.filter(m=>f.indexOf(m)<0);if(g.length)return sx(g[0]).allowExport().setDependencies(g)}function i(){let f=Dg(o),d=YG(e,r);return n(f,d)}function s(){let f=jR(o),d=XG(e,r,o);return n(f,d)}let o=t.getGraphMode(e,r),a=r._chunk,{numRestrictions:u,numEqualityRestrictions:c}=JR(a);if(c!==0)if(c===1){if(u!==c)return Nd();let g=jo(a,[],{allowSlices:!0}).getSliceVariablesOrImplicit();if(g.length!==1)return Go();let m=o0(o),b=g[0];if(m.indexOf(b)<0)return b===\"_implicit\"?Go().allowExport():ax(b).allowExport().setDependencies([b])}else return Nd();return(p=(l=i())!=null?l:s())!=null?p:r}function YG(e,t){let r=hs(e,t);return t.getDependencies().filter(i=>r.indexOf(i)<0)}function XG(e,t,r){let n=hs(e,t),i=new Set;if(t instanceof cr){let o=t.getRestrictedFunctionForGLSL(Dg(r)).concrete;for(let a of o.getDependencies())n.indexOf(a)>-1||i.add(a)}return[...i]}function Dg(e){var r;if(!Ko(e))return[];let t=ZG(e)?[\"x\",\"y\",\"z\"]:[];return e===211&&t.push(\"r\"),e===212&&t.push(\"rho\"),t.push(...(r=bc[e])!=null?r:[]),t.push(...jR(e).filter(n=>t.indexOf(n)<0)),t}function ZG(e){return $G(e)||e==200||e==201||e==202||e==211||e==212||e==213||e==214||e==215}function $G(e){if(!Ko(e))return!1;switch(e){case 106:case 107:case 108:case 110:case 111:case 109:case 122:case 123:case 112:case 113:case 127:case 130:case 103:case 104:case 105:case 210:return!0;case 124:case 120:case 121:case 126:case 114:case 115:case 116:case 117:case 118:case 119:case 129:case 128:case 100:case 101:case 102:case 200:case 201:case 202:case 206:case 205:case 211:case 203:case 204:case 213:case 207:case 208:case 212:case 214:case 215:case 209:return!1;default:return!1}}function jR(e){var t;return Ko(e)?(t=ji[e])!=null?t:[]:[]}function QR(e=void 0){let{xmin:t,xmax:r,ymin:n,ymax:i,zmin:s,zmax:o}=e!=null?e:new yg,a=[t,n,o,t,i,o,r,i,o,r,n,o,t,n,s,t,i,s,r,i,s,r,n,s,t,n,s,t,n,o,t,i,o,t,i,s,r,n,s,r,n,o,r,i,o,r,i,s,r,n,s,r,n,o,t,n,o,t,n,s,r,i,s,r,i,o,t,i,o,t,i,s],u=[0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0],c=[0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,0,1,1,0,1,0,1,1,1,1,1,0,1,0,0,0,0,0,1,1,1,1,0,1,0,1],l=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];return{positions:new Float32Array(a),normals:new Float32Array(u),faces:new Uint16Array(l),uvs:new Float32Array(c)}}function KR(e,t){let{mappedArgIndex:r,mappedReturnIndex:n,solutionIndex:i}=t,s=[],o=nu(e,r),a=JG(e,o,n),u=i,c=e.NanOfType(e.getReturnType());for(let l=0;l<=n;l++){let p=e.getInstruction(l);if(l===r){s.push(i);continue}if(!o[l]&&!e.isInClosedBlock(l)){s.push(l);continue}if(Me(p))s.push(e.copyInstruction(p));else{let f=WG(s,p.args);s.push(e.copyInstructionWithArgs(p,f)),p.type===33&&a[l]&&(u=e.Piecewise([f[0],u,c]))}}return u}function WG(e,t){let r=[];for(let n of t)r.push(e[n]);return r}function JG(e,t,r){let n=[];for(let i=0;i<r;i++)n.push(!1);n[r]=t[r];for(let i=r;i>=0;i--){if(!n[i]||!t[i])continue;let s=e.getInstruction(i);if(s.type===33)n[s.args[1]]=!0;else if(!Me(s))for(let o of s.args)n[o]=!0}return n}function eN(e,t){try{return jG(e,t)}catch(r){return r instanceof D.Base?r:te(r)}}function u0(e,t){try{let r=new cr(t),n=lc({},r),i=[];for(let o=0;o<n.length;o++)i.push(I);let s=Zy({policy:e,frame:{},argNames:n,argTypes:i,selection:void 0});return s.chunk=t,t.setReturnIndex(Br(t,t.getReturnIndex())),tN({policy:e,ctx:s,isInequality:!1,allowSolvingIn3D:!0},t)}catch(r){return r instanceof D.Base?r:te(r)}}function jG({policy:e,frame:t},r){let n=lc(t,r),i=[];for(let d=0;d<n.length;d++)i.push(I);let s=Zy({policy:e,frame:t,argNames:n,argTypes:i,selection:void 0}),{chunk:o}=s,a=Ce(s,r.args[0]),u=Ce(s,r.args[1]),c=r.getOperator(),l=c!==\"=\";switch(tu(o,e,r,[a,u]),c){case\"<\":o.Less([a,u]);break;case\">\":o.Greater([a,u]);break;case\"<=\":o.LessEqual([a,u]);break;case\">=\":o.GreaterEqual([a,u]);break;case\"=\":o.Equal([a,u]);break}if(o.setReturnIndex(Br(o,o.getReturnIndex())),o.isConstant())return new cr(o.close());let f=o.getInstruction(a).type!==2||lc(t,r.args[1]).indexOf(o.argNames[a])!==-1;if(!$i.plotImplicits&&f)throw fx();return $n[c].direction===-1?o.Subtract([u,a]):o.Subtract([a,u]),o.close(),tN({policy:e,ctx:s,isInequality:l,allowSolvingIn3D:!1},o)}function tN({policy:e,ctx:t,isInequality:r,allowSolvingIn3D:n},i){let s=i.getLiveArgNames();if(s.length===0)throw te(`Unexpected: non-constant node with dependencies: ${s}`);if(s.length===1&&!r&&!$i.plotSingleVariableImplicitEquations)return px();let o=d=>d===\"x\"||d===\"y\"||d===\"z\";if(e.is3dPolicy()?!s.every(o):s.length>2)return tr(e.sliderVariables(s)).setDependencies(s);if(r&&!e.validInequalityVariables(s))return lx().setDependencies(s);let{localFrames:a,effectiveOrder:u,variableOfInterest:c}=QG(t,r);if(e.complicatedPolarImplicit(c,u))return dx().setDependencies(s);if(!e.validImplicitVariables(s))return Uu();if(e.is3dPolicy()&&n&&u!==1)return Go();if(u>2||e.is3dPolicy()&&!n)return new cr(i.close());let l=[],p=[],f=1;for(let d=0;d<a.length;d++){let g=a[d],m=KG(g,r);f=m.length;for(let y of m){let h=g.chunk.copy();if(h.setReturnIndex(y),g.isRestrictedPolynomial){let{mappedArgIndex:x,mappedReturnIndex:P}=g;h.setReturnIndex(KR(h,{mappedArgIndex:x,mappedReturnIndex:P,solutionIndex:h.getReturnIndex()}))}h.close(),l.push(new cr(h))}let b=!1;for(let y of g.coefficients){let h=g.chunk.getInstruction(y);h.type===1&&h.value!==0&&(b=!0)}if(i.argNames.length!==2||b)p.push(void 0);else{let y=g.chunk.copy(),h=g.coefficients.slice();y.List(h),y.close();let x=W(i.getReturnType())?i.elementAt(d):i.copy(),E=x.argNames.indexOf(c)===0?1:0,T=x.getReturnIndex();x.Add([E,x.Multiply([x.Constant(0),T])]),p.push({coefficients:y,restriction:x})}}return new D.SolvedEquation(c,new D.List(l),p,f)}function QG(e,t){let r=e.chunk,n=e.policy,i=r.argNames,s=W(r.getReturnType()),o=[];e:for(let a=0;a<i.length;a++){let u=i[a],c=i.length>1&&!n.validSolvedVariable(u);o[a]={localFrames:[],effectiveOrder:0,variableOfInterest:u};let l=!t;if(c){o[a].effectiveOrder=1/0;continue}let p=s?r.getConstantListLength():1;if(p==null)throw new Error(\"Programming error: cannot solve a variable-length list expression\");for(let f=0;f<p;f++){let d=s?r.elementAt(f):r;if(d.polynomialOrder(u,{allowRestriction:l,allowClosedBlockReferences:!1})>2){o[a].effectiveOrder=1/0;continue e}let m=d.getPolynomialCoefficients(u);o[a].localFrames.push(m),o[a].effectiveOrder=Math.max(o[a].effectiveOrder,m.coefficients.length-1)}}if(i.length===1)return o[0];if(i.length===2&&!i.includes(\"z\"))return i[0]===\"y\"&&(o=[o[1],o[0]]),o[0].effectiveOrder===0?o[1]:o[1].effectiveOrder===0?o[0]:o[o[0].effectiveOrder<o[1].effectiveOrder?0:1];{let a=o.filter(c=>c.effectiveOrder===1);if(a.length>0)return a[0];let u=o.filter(c=>c.effectiveOrder===2);return u.length>0?u[0]:o[0]}}function KG(e,t){return t?tB(e):eB(e)}function eB({chunk:e,coefficients:t}){let[r,n,i]=t,s=e.Constant(Ve(0,1)),o=e.Constant(NaN);if(i===void 0){n===void 0&&(n=s);let a=e.Negative([e.Divide([r,n])]),u=e.Equal([n,s]);return[e.Piecewise([u,o,a])]}else{let a=e.Constant(Ve(2,1)),u=e.Multiply([a,i]),c=e.Negative([n]),l=e.Subtract([e.Multiply([n,n]),e.Multiply([a,e.Multiply([u,r])])]),p=e.Equal([i,s]),f=e.getInstruction(l);if(f.type===1&&k(f.value)===0)return[e.Piecewise([p,o,e.Divide([c,u])])];{let d=e.SyntheticNativeFunction(\"sqrt\",[l]),g=e.Less([n,s]),m=e.Greater([n,s]),b=e.Divide([e.Add([c,d]),u]),y=e.Divide([e.Subtract([c,d]),u]),h=e.Negative([e.Divide([r,n])]);return[e.Piecewise([p,e.Piecewise([g,h,o]),y]),e.Piecewise([p,e.Piecewise([m,h,o]),b])]}}}function tB({chunk:e,coefficients:t}){let[r,n,i]=t,s=e.Constant(Ve(0,1));i===void 0&&(i=s),n===void 0&&(n=s),r===void 0&&(r=s);let o=e.Constant(Ve(2,1)),a=e.Constant(NaN),u=e.Constant(Ve(1e305,1)),c=e.Negative([u]),l=e.Multiply([o,i]),p=e.Negative([n]),f=e.Subtract([e.Multiply([n,n]),e.Multiply([o,e.Multiply([l,r])])]),d=e.SyntheticNativeFunction(\"sqrt\",[f]),g=e.Divide([e.Add([p,d]),l]),m=e.Divide([e.Subtract([p,d]),l]),b=e.Negative([e.Divide([r,n])]),y=e.Equal([i,s]),h=e.Greater([i,s]),x=e.Equal([n,s]),P=e.Greater([n,s]),E=e.Less([n,s]),T=e.Greater([r,s]),M=e.Less([f,s]);return[e.Piecewise([y,e.Piecewise([E,b,a]),e.Piecewise([h,m,a])]),e.Piecewise([y,e.Piecewise([x,e.Piecewise([T,c,a]),a]),e.Piecewise([h,e.Piecewise([M,c,a]),g])]),e.Piecewise([y,e.Piecewise([x,e.Piecewise([T,u,a]),a]),e.Piecewise([h,e.Piecewise([M,u,a]),m])]),e.Piecewise([y,e.Piecewise([P,b,a]),e.Piecewise([h,g,a])])]}var nB=!1,Sg=D.List;function rn(){return{}}function Ic(e,t,r){let n=1/0;for(let s of t){let o=e[s];Array.isArray(o)&&o.length<n&&(n=o.length)}let i=1;return r===\"solvedEquation\"?i=2:r===\"baseComparator\"&&(i=4),i*n}function La(e,t,r){return Array.isArray(e)?e[t0(t,r)]:e}function iB(e,t){var r=t.viewport.xmax-t.viewport.xmin,n=t.viewport.ymax-t.viewport.ymin;let i=Ts(r,n),s=Ts(30,30),o=Math.round(2-Math.log(i/s)/Math.LN10);if(o<=0)return Math.round(e)+\"\";{let a=Math.pow(10,o);return Math.round(e*a)/a+\"\"}}function sB(e,t){var r=t.viewport.xmax-t.viewport.xmin,n=t.viewport.ymax-t.viewport.ymin;let i=r*n,s=30*30,o=Math.round(2-Math.log(i/s)/Math.LN10);if(o<=0)return Math.round(e)+\"\";{let a=Math.pow(10,o);return Math.round(e*a)/a+\"\"}}function oB(e,t){return t.degreeMode?Math.round(e/(Math.PI/180)*10)/10+\"\\xB0\":Math.round(e*100)/100+\"\"}function Tu(e,t,r){let n=t0(t,r),i=e.userData.lineStyle,s=La(e.metaData.computedLineWidth,t,r),o=La(e.metaData.computedLineOpacity,t,r),a=La(e.metaData.computedFillOpacity,t,r),u=e.metaData.colorLatexValue?La(e.metaData.colorLatexValue,t,r):e.userData.color,c=La(e.metaData.computedResolution,t,r);return{listIndex:n,style:i,lineWidth:s,lineOpacity:o,fillOpacity:a,color:u,resolution:c}}D.Base.prototype._graph=aB;function aB(e,t,r,n,i,s){var d,g,m;if(t instanceof D.SolvedEquation){let b=this._graph(e,t._expression,r,n,i,t.branchMultiplier===2?\"solvedEquation\":void 0),y=fN(this,t,r,e);return y&&(b||(b=[]),Array.prototype.push.apply(b,y)),b}function o(b){let y=b.editableLabelMode;return y===\"TEXT\"||y===\"MATH\"}function a(b,y){return\"colorLatex\"in b&&mB(b.colorLatex)?b.colorLatex:y}let u=t.getExpressionType(n.graphMode,t.valueType),c=OS(u,{points:this.userData.points,lines:this.userData.lines,fill:this.userData.fill}),l={lineOpacity:\"computedLineOpacity\",lineWidth:\"computedLineWidth\",color:\"colorLatexValue\",fillOpacity:\"fillOpacity\",resolution:\"resolution\"},p=(b,y)=>{let h=Ic(this.metaData,Object.keys(b).map(P=>l[P]),s),x=[];return Sg.wrap(t).eachElement((P,E)=>{if(E>=h)return;let T=this.getGraphInfo(e,P);T.graphMode=n.graphMode;let M=Tu(this,E,s);T.listIndex=M.listIndex,T.style=M.style,\"lineWidth\"in b&&(T.lineWidth=M.lineWidth),\"lineOpacity\"in b&&(T.lineOpacity=M.lineOpacity),\"fillOpacity\"in b&&(T.fillOpacity=M.fillOpacity),\"color\"in b&&(T.color=a(this.userData,M.color)),\"resolution\"in b&&(T.resolution=M.resolution),x.push(...y(P,T))}),x},f=n.graphMode;switch(f){case 4:{let{points:h,droppedIndices:x}=yf([t.asValue()]),P=this.userData.shouldGraph&&c.points,E=this.userData.showLabel&&!P;return P?[{segments:[h],graphMode:f,droppedIndices:x,color:aa(this.userData,this.metaData),style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,labelSize:this.metaData.computedLabelSize,labelAngle:this.metaData.computedLabelAngle,labelOrientation:this.userData.labelOrientation,pointOpacity:this.metaData.computedPointOpacity,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:o(this.userData),labels:this.computedLabels||[],poi:Ls(h),movablePointInfo:[]}]:E?[{segments:[h],graphMode:3,color:aa(this.userData,this.metaData),style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,nakedLabel:!0,labelSize:this.metaData.computedLabelSize,labelAngle:this.metaData.computedLabelAngle,labelOrientation:this.userData.labelOrientation,pointOpacity:this.metaData.computedPointOpacity,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:o(this.userData),labels:this.computedLabels||[],poi:Ls(h),showPoint:!1}]:[]}case 3:{let h=[],x=this.userData.shouldGraph&&c.points,P=this.userData.shouldGraph&&c.lines,E=[\"colorLatexValue\"];x&&E.push(\"computedPointOpacity\",\"computedPointSize\"),(this.userData.showLabel||x)&&E.push(\"computedLabelSize\",\"computedLabelAngle\");let T=Ic(this.metaData,E,s),M=Sg.wrap(t).asValue();wn(M),M.length>T&&(M.length=T);let O=this.userData.showLabel&&!x&&!P,S=yf(M);if(this.userData.showLabel||x){let C={segments:[S.points],graphMode:f,droppedIndices:S.droppedIndices,color:this.metaData.colorLatexValue||this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,showPoint:x,labelSize:this.metaData.computedLabelSize,labelAngle:this.metaData.computedLabelAngle,labelOrientation:this.userData.labelOrientation,pointSize:this.metaData.computedPointSize,pointOpacity:this.metaData.computedPointOpacity,suppressTextOutline:this.userData.suppressTextOutline,interactiveLabel:!!this.userData.interactiveLabel,editableLabel:o(this.userData),nakedLabel:O,labels:this.computedLabels||[],poi:Ls(M)};e.is3dPolicy()?h.push(...pB(C)):h.push(C)}if(P){let C=this.metaData.computedLineWidth,A={segments:aN(M),graphMode:5,color:aa(this.userData,this.metaData),style:this.userData.lineStyle,lineWidth:C,lineOpacity:this.metaData.computedLineOpacity,poi:rn()};h.push(nN(e,A,r,C))}return h}case 114:case 115:case 116:{let h=[],x=this.userData.shouldGraph&&c.points,P=this.userData.shouldGraph&&c.lines,E=[\"colorLatexValue\"];x&&E.push(\"computedPointOpacity\",\"computedPointSize\");let T=Sg.wrap(t).asValue();wn(T);let{degreeMode:M}=r,O=T.map(A=>RR(f,A,M)),S=Ic(this.metaData,E,s),C=Math.min(O.length,S);if(x)for(let A=0;A<C;A++){let{color:L,fillOpacity:Z}=Tu(this,A,s),w=La(this.metaData.computedPointSize,A,s);h.push({graphMode:114,position:O[A],radius:.02*w,guid:Mi(),color:L,fillOpacity:Z})}if(P){let A=La(this.metaData.computedLineWidth,0,s),{color:L}=Tu(this,0,s);h.push({graphMode:100,points:hc(O,r.viewport,A),thickness:A,guid:Mi(),color:L})}return h}case 117:{let h=this.metaData.colorLatexValue?!Array.isArray(this.metaData.colorLatexValue):!0,x=this.metaData.computedFillOpacity,P=[],E=[],T=[],M=[],[O,S,C]=[new it,new it,new it],[A,L,Z]=[new it,new it,new it],w=(F,X,ee,re,Oe,$,Ze,xe,se)=>{if(A.set(F,X,ee),L.set(re,Oe,$),Z.set(Ze,xe,se),!A.isFinite()||!L.isFinite()||!Z.isFinite())return;let _e=P.length/3;P.push(A.x,A.y,A.z,L.x,L.y,L.z,Z.x,Z.y,Z.z),O.subVectors(A,Z),S.subVectors(L,A),C.crossVectors(O,S),E.push(C.x,C.y,C.z,C.x,C.y,C.z,C.x,C.y,C.z),T.push(_e,_e+1,_e+2),M.push(0,0,0,1,1,0)},z=()=>({guid:Mi(),positions:new Float32Array(P),normals:new Float32Array(E),faces:new Uint32Array(T),uvs:new Float32Array(M),extraAttrs:new Float32Array([])});if(t.valueType===un&&h&&!Array.isArray(x)){let F=(d=this.metaData.colorLatexValue)!=null?d:this.userData.color,X=this.metaData.computedFillOpacity;return p({color:!0},ee=>{if(ee.valueType===Ir){let[[re,Oe,$],[Ze,xe,se],[_e,Re,K]]=ee.asValue();w(re,Oe,$,Ze,xe,se,_e,Re,K)}return[]}),[{meshData:z(),color:a(this.userData,F),fillOpacity:X!=null?X:1,graphMode:117}]}return p({color:!0,fillOpacity:!0},(F,X)=>{var K;let[[ee,re,Oe],[$,Ze,xe],[se,_e,Re]]=F.asValue();return P=[],E=[],T=[],M=[],w(ee,re,Oe,$,Ze,xe,se,_e,Re),[{meshData:z(),color:a(this.userData,X.color),fillOpacity:(K=X.fillOpacity)!=null?K:1,graphMode:117}]})}case 119:{let h=this.metaData.colorLatexValue?!Array.isArray(this.metaData.colorLatexValue):!0;if(t.valueType===an&&h&&!Array.isArray(this.metaData.computedLineWidth)){let x=(g=this.metaData.colorLatexValue)!=null?g:this.userData.color,P=this.metaData.computedLineWidth,E=[];return p({color:!0},T=>{if(T.valueType===xt){let[[M,O,S],[C,A,L]]=T.asValue();E.push(M,O,S,C,A,L,NaN,NaN,NaN)}return[]}),[{graphMode:119,guid:Mi(),points:E,color:x,thickness:P!=null?P:1}]}return p({color:!0,lineWidth:!0},(x,P)=>{let{lineWidth:E,color:T}=P,M=x.asValue(),[[O,S,C],[A,L,Z]]=M;return uN(O,S,C,A,L,Z)?[]:[{graphMode:119,guid:Mi(),points:[O,S,C,A,L,Z],color:T,thickness:E}]})}case 129:let b=this.metaData.colorLatexValue?!Array.isArray(this.metaData.colorLatexValue):!0;if(t.valueType===cn&&b&&!Array.isArray(this.metaData.computedLineWidth)){let h=(m=this.metaData.colorLatexValue)!=null?m:this.userData.color,x=this.metaData.computedLineWidth,P=[];return p({color:!0},E=>{if(E.valueType===ve){let[[T,M,O],[S,C,A]]=E.asValue();P.push(S,C,A,T+S,M+C,O+A)}return[]}),[{graphMode:129,guid:Mi(),points:P,color:h,thickness:x!=null?x:1}]}return p({color:!0,lineWidth:!0},(h,x)=>{let{lineWidth:P,color:E}=x,T=h.asValue(),[[M,O,S],[C,A,L]]=T;return uN(M,O,S,C,A,L)?[]:[{graphMode:129,guid:Mi(),points:[C,A,L,M+C,O+A,S+L],color:E,thickness:P}]});case 118:return p({color:!0,resolution:!0,fillOpacity:!0},(h,x)=>{let{color:P,fillOpacity:E,resolution:T}=x,M=h.asValue(),[[O,S,C],A]=M;return isNaN(O)||isNaN(S)||isNaN(C)||isNaN(A)?[]:[{graphMode:118,position:[O,S,C],radius:A,resolution:T,guid:Mi(),color:P,fillOpacity:E!=null?E:1}]});case 5:case 100:case 101:case 102:{let h=this.userData,x=this.metaData,P=[],E=p({color:!0,lineOpacity:!0,lineWidth:!0,resolution:!0},(M,O)=>{var C;if(M.getDependencies().length===0&&!la(M.valueType)){let{points:A,droppedIndices:L}=yf([M.asValue()]);return[{segments:[A],graphMode:3,droppedIndices:L,color:aa(h,x),style:h.lineStyle,showPoint:!1,poi:Ls(A)}]}else{let A=M.getCompiledFunction();O.domain=(C=A.domain)!=null?C:{type:\"1d\",min:this.metaData.evaluatedDomainMin,max:this.metaData.evaluatedDomainMax};let L=Ca({viewState:r,graphInfo:O,compiled:A});return[nN(e,L,r,O.lineWidth)]}}),T=[];for(let M of E)M&&T.push(M);if(c.fill)if(T.forEach((M,O)=>{let{color:S,fillOpacity:C,listIndex:A}=Tu(this,O,s);P.push({segments:M.segments,color:S,fillOpacity:C,listIndex:A,graphMode:7,poi:rn()})}),c.lines)T=T.concat(P);else return P;return T}case 20:return p({lineOpacity:!0,lineWidth:!0,color:!0},(h,x)=>{let[[P,E],T]=h.asValue();return isNaN(P)||isNaN(E)||isNaN(T)?[]:[{segments:[[P,E,T]],resolved:!0,graphMode:x.graphMode,color:x.color,style:x.lineStyle,lineWidth:x.lineWidth,lineOpacity:x.lineOpacity,listIndex:x.listIndex,operator:x.operator,poi:rn()}]});case 21:return p({color:!0,lineWidth:!0,lineOpacity:!0},(h,x)=>{let P=ey(h.asValue());if(!P)return[];let E=[];return P.type===\"arc\"?E.push({graphMode:f,segments:[[P.center[0],P.center[1],P.radius,P.startAngle,P.endAngle]],color:x.color,style:x.lineStyle,lineWidth:x.lineWidth,lineOpacity:x.lineOpacity,listIndex:x.listIndex,operator:n.operator,poi:rn()}):P.type===\"rays\"?E.push({graphMode:19,segments:[[P.start1[0],P.start1[1],P.end1[0],P.end1[1]]],color:x.color,style:x.lineStyle,lineWidth:x.lineWidth,lineOpacity:x.lineOpacity,listIndex:x.listIndex,operator:n.operator,poi:rn()},{graphMode:19,segments:[[P.start2[0],P.start2[1],P.end2[0],P.end2[1]]],color:x.color,style:x.lineStyle,lineWidth:x.lineWidth,lineOpacity:x.lineOpacity,listIndex:x.listIndex,operator:n.operator,poi:rn()}):E.push({graphMode:17,segments:[[P.start[0],P.start[1],P.end[0],P.end[1]]],color:x.color,style:x.lineStyle,lineWidth:x.lineWidth,lineOpacity:x.lineOpacity,listIndex:x.listIndex,operator:n.operator,poi:rn()}),[...E,...sN(E,i)]});case 17:case 18:case 19:return p({color:!0,lineWidth:!0,lineOpacity:!0},(h,x)=>{let[[P,E],[T,M]]=h.asValue();if(isNaN(P)||isNaN(E)||isNaN(T)||isNaN(M))return[];let O=[],S={segments:[[P,E,T,M]],resolved:!0,graphMode:x.graphMode,color:x.color,style:x.lineStyle,arrowMode:x.arrowMode,lineWidth:x.lineWidth,lineOpacity:x.lineOpacity,listIndex:x.listIndex,operator:n.operator,poi:rn()};if(O.push(iN(e,S,r)),O.push(...sN([S],i)),this.userData.showLabel&&n.graphMode===17){let C=x.listIndex,A=this.computedLabels&&this.computedLabels[C||0];O.push({graphMode:22,objectType:17,segments:[[P,E,T,M]],color:x.color,listIndex:C,showLabel:!0,labelSize:this.metaData.computedLabelSize,labelAngle:this.metaData.computedLabelAngle,labelOrientation:this.userData.labelOrientation,labels:A?[A]:[iB(Ts(T-P,M-E),r)]})}return O});case 24:return p({lineOpacity:!0,lineWidth:!0,color:!0},(h,x)=>{let[P,E]=h.asValue(),[[T,M],[O,S]]=[E,[E[0]+P[0],E[1]+P[1]]];if(isNaN(O)||isNaN(S)||isNaN(T)||isNaN(M))return[];let C={segments:[[T,M,O,S]],resolved:!0,graphMode:x.graphMode,color:x.color,style:x.lineStyle,arrowMode:x.arrowMode,lineWidth:x.lineWidth,lineOpacity:x.lineOpacity,listIndex:x.listIndex,operator:n.operator,poi:rn()};return[iN(e,C,r)]});case 23:return p({lineOpacity:!0,lineWidth:!0,color:!0},(h,x)=>{let{value:P,valueType:E}=h.asTypedValue(),[[T,M],O,S]=P;if(isNaN(T)||isNaN(M)||isNaN(O)||isNaN(S))return[];let C=x.listIndex,A=E===Te,L=A?S:Math.abs(S),Z=[];if(Z.push({graphMode:23,segments:[[T,M,O,S,A?1:0]],color:x.color,style:x.lineStyle,lineWidth:x.lineWidth,lineOpacity:x.lineOpacity,listIndex:C,operator:n.operator,poi:rn()}),this.userData.showAngleLabel){let w=this.computedLabels&&this.computedLabels[C||0];Z.push({graphMode:22,objectType:23,segments:[[T,M,O,S]],color:x.color,listIndex:C,showLabel:!0,labelSize:this.metaData.computedLabelSize,labelAngle:this.metaData.computedLabelAngle,labelOrientation:this.userData.labelOrientation,labels:w?[w]:[oB(L,r)]})}return Z});case 1:case 2:case 8:case 112:case 126:case 113:case 127:case 6:case 130:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 120:case 121:case 122:case 123:case 124:{let h=t.valueType===I;return p({lineOpacity:!0,lineWidth:!0,resolution:!0,fillOpacity:!0,color:!0},(x,P)=>{var F,X,ee,re,Oe,$,Ze,xe,se,_e,Re;(n.graphMode===6||n.graphMode===110||n.graphMode===124)&&(P.domain={type:\"1d\",min:this.metaData.evaluatedDomainMin,max:this.metaData.evaluatedDomainMax,isExplicit:this.metaData.isExplicitDomain});let E=(F=ji[n.graphMode])!=null?F:[],T=x.getCompiledFunction(E);(n.graphMode==130||n.graphMode==103||n.graphMode==104||n.graphMode==105||n.graphMode==111||n.graphMode==109)&&(P.domain=(X=T.domain)!=null?X:{type:\"2d\",uMin:this.metaData.evaluatedDomain3DMin1,uMax:this.metaData.evaluatedDomain3DMax1,vMin:this.metaData.evaluatedDomain3DMin2,vMax:this.metaData.evaluatedDomain3DMax2});let M=[],O;try{O=x.getCompiledDerivative()}catch(V){}let S=cB(this,x,T,r,P,O,h);if(S)return S;let C=yI(P.graphMode),A=(ee=this.userData.extendTo3D)!=null?ee:!1,L=C&&!A,Z=!e.is3dPolicy()||L,w=(re=this.userData.lines)!=null?re:Z,z=(Oe=this.userData.lines)!=null?Oe:!L;if(P.graphMode===127&&!A&&(($=this.userData.lines)==null||$)){let V=(Ze=ji[P.graphMode])!=null?Ze:[],ce=x._chunk.copy();ce.GreaterEqual([ce.getReturnIndex(),ce.Constant(0)]),ce.close();let ae=x.getCompiledFunction(V),Pe=0,Je=r.viewport,{xmin:Ye,xmax:kt,ymin:Sr,ymax:Nn}=Je,vr=new be(Ye,kt),Ae=new be(Sr,Nn),$e=na((Rr,zr)=>[Rr,zr,Pe],Je,vr,Ae,2,0);return[{meshData:Ji($e),color:P.color,fillOpacity:(xe=P.fillOpacity)!=null?xe:1,uvRange:[vr,Ae],uvArgs:(se=ji[P.graphMode])!=null?se:[],extraMeshArgs:(_e=bc[P.graphMode])!=null?_e:[],graphMode:106,compiled:ae,restrictionShader:zo(ce)}]}if(C&&(this.userData.lines===!0?(w=L,z=!L):this.userData.lines===!1&&(w=!1,z=!1)),z&&Ko(P.graphMode)){let V=Dg(P.graphMode),ce=x.getRestrictedFunctionForGLSL(V),ae=rN(P,ce,r);if(M.push(ae),P.graphMode===113||P.graphMode===127){let{positions:Pe,normals:Je,faces:Ye,uvs:kt}=QR(),Sr={guid:Mi(),isDomainCube:!0,positions:Pe,normals:Je,faces:Ye,uvs:kt,extraAttrs:new Float32Array([])},Nn=x.toImplicitBool();M.push({meshData:Sr,graphMode:113,color:P.color,fillOpacity:1,uvRange:[new be(0,1),new be(0,1)],uvArgs:[],extraMeshArgs:[],compiled:T,restrictionShader:zo(Nn._chunk)});let vr=Nn.getCapFunction(V);if(vr){let Ae=rN(P,vr,r);M.push(Ae)}}}if(w&&uB(this,P),!Ko(P.graphMode)){let V=Ca({viewState:r,graphInfo:P,compiled:T,derivative:O}),ce=dN(Aa(this),x);if(ce&&(V.boundingBox=ce),e.is3dPolicy()&&w&&p0(V.graphMode)){let ae=(Re=P.lineWidth)!=null?Re:1;M.push(xg(V,r,ae))}else if(V.fillSegments){let K=V,{fillSegments:ae}=K,Pe=J0(K,[\"fillSegments\"]);w||(Pe.lineWidth=0),M.push(Pe)}else w||(V.lineWidth=0),(w||!Ko(n.graphMode))&&M.push(V);P.graphMode===8&&P.operator!==\"=\"&&M.push({graphMode:7,segments:V.fillSegments,poi:rn(),listIndex:P.listIndex,color:P.color,fillOpacity:P.fillOpacity})}return M})}case 200:case 201:case 202:case 206:case 205:case 211:case 203:case 204:case 213:case 207:case 208:case 212:case 214:case 215:case 209:return p({color:!0,lineWidth:!0,lineOpacity:!0,resolution:!0},(h,x)=>{var P;{switch(f){case 206:case 211:x.domain={type:\"1d\",min:this.metaData.evaluatedDomainMin,max:this.metaData.evaluatedDomainMax,isExplicit:this.metaData.isExplicitDomain};break;case 203:case 204:case 213:case 207:case 208:case 212:case 214:case 215:x.domain={type:\"2d\",uMin:this.metaData.evaluatedDomain3DMin1,uMax:this.metaData.evaluatedDomain3DMax1,vMin:this.metaData.evaluatedDomain3DMin2,vMax:this.metaData.evaluatedDomain3DMax2};break}let E=(P=ji[f])!=null?P:[],T={allowSlices:!0},M=jo(h._chunk,E,T),{valueChunk:O,slices:S}=M.getValueAndRestrictionChunk(),C=O.getCompiledFunction(E),A=S[0],L=A.type===\"implicit\",Z=L?NaN:A.value,w=L?\"_implicit\":A.variable,z,F=X=>Ca({viewState:r,graphInfo:Q(q({},x),{slice_coordinate:w,slice_value:Z,slice_function:X}),compiled:C});if(L){let X=[\"x\",\"y\",\"z\"],ee=[\"x\",\"y\",\"z\",\"r\",\"theta\"],re=[\"x\",\"y\",\"z\",\"r\",\"theta\",\"phi\"],Oe=[\"x\",\"y\",\"z\",\"u\",\"v\"],$=A.sliceChunk;switch(f){case 200:case 201:case 202:z=$.getCompiledFunction(X);break;case 211:case 213:z=$.getCompiledFunction(ee);break;case 212:z=$.getCompiledFunction(re);break;case 215:case 214:z=$.getCompiledFunction(Oe);break;case 209:{let Ze=(se,_e)=>{let Re=se._symbol,K=se._expression.args,V=[];for(let ce of K){if(!(ce instanceof cr))throw te(\"Programming Error: bad type\");if(Re===\"x\")C=ce._chunk.getCompiledFunction([\"y\",\"z\"]),x.graphMode=201;else if(Re===\"y\")C=ce._chunk.getCompiledFunction([\"x\",\"z\"]),x.graphMode=202;else if(Re===\"z\")C=ce._chunk.getCompiledFunction([\"x\",\"y\"]),x.graphMode=200;else throw te(\"Programming Error: bad lhs\");V.push(F(_e))}return V},xe=u0(e,O);return xe instanceof D.SolvedEquation&&!xe.isError?Ze(xe,$.getCompiledFunction(X)):(xe=u0(e,$),xe instanceof D.SolvedEquation&&!xe.isError?Ze(xe,O.getCompiledFunction(X)):[F($.getCompiledFunction(X))])}}}return[F(z)]}});case 210:return p({color:!0,fillOpacity:!0,resolution:!0},(h,x)=>{var P,E,T,M,O,S,C,A;{let L=(P=ji[f])!=null?P:[],Z={allowSlices:!0},w=jo(h._chunk,L,Z),{valueChunk:z,slices:F}=w.getValueAndRestrictionChunk(),X=z.copy();X.GreaterEqual([X.getReturnIndex(),X.Constant(0)]),X.close();let ee=z.getCompiledFunction(L);if(F[0].type===\"implicit\"){let kt=F[0].sliceChunk,Sr;try{Sr=kt.copy().gradient([\"x\",\"y\",\"z\"]).getCompiledFunction([\"x\",\"y\",\"z\"]).fn}catch(Un){}let Nn=(E=x.resolution)!=null?E:NaN;isNaN(Nn)&&(Nn=ff),Nn=Zr(Nn,0,100);let vr=WI(kt.getCompiledFunction(L),void 0,Sr,r.viewport,Nn,{isInequality:!1}),{xmin:Ae,xmax:de,ymin:$e,ymax:vi}=r.viewport,nn=new be(Ae,de),Rr=new be($e,vi);return[{meshData:vr,color:x.color,fillOpacity:(T=x.fillOpacity)!=null?T:1,uvRange:[nn,Rr],uvArgs:(M=ji[x.graphMode])!=null?M:[],extraMeshArgs:(O=bc[x.graphMode])!=null?O:[],graphMode:f,compiled:ee,restrictionShader:zo(X)}]}let re=F[0].value,Oe=F[0].variable,$=r.viewport,{xmin:Ze,xmax:xe,ymin:se,ymax:_e,zmin:Re,zmax:K}=$,V,ce,ae;switch(Oe){case\"x\":{V=new be(se,_e),ce=new be(Re,K),ae=(kt,Sr)=>[re,kt,Sr];break}case\"y\":{V=new be(Ze,xe),ce=new be(Re,K),ae=(kt,Sr)=>[kt,re,Sr];break}case\"z\":{V=new be(Ze,xe),ce=new be(se,_e),ae=(kt,Sr)=>[kt,Sr,re];break}default:return[]}let Pe=na(ae,$,V,ce,2,0);return[{meshData:Ji(Pe),color:x.color,fillOpacity:(S=x.fillOpacity)!=null?S:1,uvRange:[V,ce],uvArgs:(C=ji[x.graphMode])!=null?C:[],extraMeshArgs:(A=bc[x.graphMode])!=null?A:[],graphMode:f,compiled:ee,restrictionShader:zo(X)}]}});case 16:{let h=[],x=this.userData.lines===void 0?!0:this.userData.lines,P=this.userData.fill===void 0?!0:this.userData.fill;if(!P&&!x)return h;let E=Ic(this.metaData,[\"computedLineOpacity\",\"computedLineWidth\",\"colorLatexValue\",\"fillOpacity\"],s),T=t.asValue();W(t.valueType)||(T=[T]);for(let M=0;M<T.length;M++){if(M>E-1)continue;let O=T[M];if(!O.length)continue;let S=this.getGraphInfo(e,t),{listIndex:C,lineWidth:A,lineOpacity:L,fillOpacity:Z,color:w}=Tu(this,M,s);this.userData.shouldOmitLastPolygonSegment||(O=[...O,O[0]]),wn(O);let z=aN(O);if(z.length&&(P&&h.push({segments:z,graphMode:7,poi:rn(),color:w,fillOpacity:Z,style:S.style,listIndex:C}),x&&h.push({segments:z,graphMode:5,poi:rn(),color:w,style:this.userData.lineStyle,lineWidth:A,lineOpacity:L,listIndex:C}),nB&&this.userData.showLabel)){let F=this.computedLabels&&this.computedLabels[C||0];h.push({graphMode:22,objectType:16,segments:z,color:w,listIndex:C,showLabel:!0,labelSize:this.metaData.computedLabelSize,labelAngle:this.metaData.computedLabelAngle,labelOrientation:this.userData.labelOrientation,labels:F?[F]:[sB(UP(O),r)]})}}return h}case 7:case 11:case 10:case 15:case 22:case 128:return!1;default:let y=f;throw new Error(`Unexpected graphMode: ${y}`)}}function rN(e,t,r){var o;let n=(o=ji[e.graphMode])!=null?o:[],i,s=!1;if(e.graphMode===112||e.graphMode===126||e.graphMode===113){e.operator!==\"=\"&&(s=!0);try{i=t.concrete.gradient([\"x\",\"y\",\"z\"]).getCompiledFunction([\"x\",\"y\",\"z\"]).fn}catch(a){}}return Ca({viewState:r,graphInfo:e,compiled:t.concrete.getCompiledFunction(n),restrictionShader3d:t.restriction,isImplicit3dInequality:s,gradient:i,dependencies:t.concrete._dependencies})}function uB(e,t){var n,i,s;if(yI(t.graphMode))switch(t.graphMode){case 121:case 123:{t.graphMode=2,t.willConvertTo3D=!0,(n=t.lineWidth)!=null||(t.lineWidth=1);break}case 120:case 122:{t.graphMode=1,t.willConvertTo3D=!0,(i=t.lineWidth)!=null||(t.lineWidth=1);break}case 124:let{min:o,max:a}=((s=t.domain)==null?void 0:s.type)===\"1d\"?t.domain:{min:0,max:2*Math.PI};t.graphMode=6,t.domain={type:\"1d\",min:o,max:a,isExplicit:e.metaData.isExplicitDomain};break;case 126:t.graphMode=8;break}}function cB(e,t,r,n,i,s,o){let a=e.metaData.evaluatedCDFMin,u=e.metaData.evaluatedCDFMax,c=Aa(e),l=dN(c,t),p=c&&c.discrete;if(a!==void 0&&u!==void 0&&!isNaN(a)&&!isNaN(u)&&o){let f=[];if(p){let d={viewState:n,graphInfo:i,compiled:r,bounds:[a,u],maxOverride:oN(c,t),showPoint:e.userData.shouldGraph},g=_R(d),m=g.cdfTopBranch,b=g.topBranches;if(b.forEach(function(y){!y||!l||(y.boundingBox=l)}),b.every(y=>y!==void 0)&&(f=b,m&&m.segments[0].length)){let y=[];m.segments[0].forEach(function(h){!isNaN(h[0])&&!isNaN(h[1])&&y.push([h[0],0,h[0],h[1]])}),f.push({graphMode:5,segments:y,boundingBox:l,poi:rn(),color:i.color})}}else{let g=LR({viewState:n,graphInfo:i,compiled:r,derivative:s,bounds:[a,u]}),m=g.cdfTopBranch,b=g.topBranches;if(b.forEach(function(y){!y||!l||(y.boundingBox=l)}),f=b,m&&m.segments.length){let y,h;for(let x=0;x<m.segments.length;x++){let P=m.segments[x];if(P.length>=4){y=P[0];break}}for(let x=m.segments.length-1;x>=0;x--){let P=m.segments[x];if(P.length>=4){h=P[P.length-2];break}}if(y!==void 0&&h!==void 0&&isFinite(y)&&isFinite(h)){let x=hg(m.segments,[[y,0,h,0]],m.graphMode);f.push({graphMode:7,segments:x,poi:rn(),color:i.color})}}}return f}else if(p){let f=gg({viewState:n,graphInfo:i,compiled:r,showPoint:e.userData.shouldGraph,maxOverride:oN(c,t)});return l&&(f.boundingBox=l),[f]}else return}function cN(e){return lB(e)||p0(e)||lN(e)}function lB(e){return e===3}function c0(e,t){let r=t!=null?t:{};if(!Array.isArray(e))return()=>e;let n=Object.keys(r).length===0?e:e.filter((i,s)=>!r[s]);return i=>n[i]}function pB(e){var s,o;let t=e.droppedIndices,r=c0((s=e.pointSize)!=null?s:1,t),n=c0(e.color,t),i=c0((o=e.pointOpacity)!=null?o:1,t);return e.segments[0].map(([a,u],c)=>({graphMode:114,position:[a,u,0],radius:.02*r(c),guid:Mi(),color:n(c),fillOpacity:i(c)}))}function nN(e,t,r,n){return e.is3dPolicy()&&p0(t.graphMode)?xg(t,r,n!=null?n:1):t}function p0(e){switch(e){case 1:case 2:case 6:case 8:case 5:return!0;default:return!1}}function xg(e,t,r,n=0){var o;let i=pN(e,t,n),s=hc(i,t.viewport,r);return{graphMode:128,guid:Mi(),points:s,resolved:e.resolved,color:e.color,thickness:(o=e.lineWidth)!=null?o:1}}function iN(e,t,r){return e.is3dPolicy()&&lN(t.graphMode)?fB(t,r):t}function lN(e){switch(e){case 17:case 24:return!0;default:return!1}}function fB(e,t){var n;let r=pN(e,t);return{graphMode:e.graphMode===17?119:e.graphMode===24?129:128,guid:Mi(),points:dB(r),color:e.color,thickness:(n=e.lineWidth)!=null?n:1}}function dB(e){let t=[];for(let[r,n,i]of e)t.push(r,n,i);return t}function pN(e,t,r=0){function n(s,o){if(e.graphMode===1)return[o,s];if(e.graphMode===6){let a=t.degreeMode?s*Math.PI/180:s;return[o*Math.cos(a),o*Math.sin(a)]}else return[s,o]}let i=[];for(let s=0;s<e.segments.length;s++){let o=e.segments[s];for(let a=0;a<o.length/2;a++){let[u,c]=n(o[2*a],o[2*a+1]);i.push([u,c,r])}s<e.segments.length-1&&i.push([NaN,NaN,0])}return i}function hc(e,t,r){if(t.zmin===void 0||t.zmax===void 0)return[];let{xmin:n,xmax:i,ymin:s,ymax:o,zmin:a,zmax:u}=t,c=i-n,l=o-s,p=u-a,f=r/200,d=[],g=1e-4;for(let y=0;y<e.length;y++){let h=e[y];if(isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])){let x=d[d.length-1];x!==void 0&&Math.abs(h[0]-x[0])<g*c&&Math.abs(h[1]-x[1])<g*l&&Math.abs(h[2]-x[2])<g*p||d.push(h)}else d.push(void 0)}let m=[],b=d.length;for(let y=0;y<b;y++){let h=d[y];if(!h){m.push(NaN,NaN,NaN);continue}let[x,P,E]=h,T=d[y-1],M=d[y+1];if(T&&M){let[O,S,C]=T,[A,L,Z]=M,w=(x-O)/c,z=(A-x)/c,F=(P-S)/l,X=(L-P)/l,ee=(E-C)/p,re=(Z-E)/p,Oe=so(w,F,ee),$=so(z,X,re);if((z*w+X*F+re*ee)/(Oe*$)<.7&&Oe>f&&$>f){let xe=.5*(f/Oe),se=.5*(f/$),_e=ks(O,x,1-xe),Re=ks(S,P,1-xe),K=ks(C,E,1-xe),V=ks(x,A,se),ce=ks(P,L,se),ae=ks(E,Z,se);m.push(_e,Re,K),m.push(ks(_e,x,.5),ks(Re,P,.5),ks(K,E,.5)),m.push(x,P,E),m.push(ks(x,V,.5),ks(P,ce,.5),ks(E,ae,.5)),m.push(V,ce,ae)}else m.push(x,P,E)}else m.push(x,P,E)}return m}function ks(e,t,r){return(1-r)*e+r*t}function mB(e){return e.startsWith(\"shader:\")}function Og(e,t,r){return{resolved:!0,graphMode:t,segments:r,operator:e.operator,poi:rn(),color:e.color,style:\"DASHED\",lineWidth:1,lineOpacity:.5,isIntersectionExtension:!0}}function sN(e,t){var n,i;if(!t)return[];let r=[];for(let s of e)if(s.graphMode===17){let o=t[(n=s.listIndex)!=null?n:0];if(!o)continue;let a=0,u,c=1,l,[p,f,d,g]=s.segments[0];for(let m=0;m<o.length;m++){let[b,y]=o[m],h=Ws(b,y,0,p,f,0,d,g,0);h<a&&(a=h,u=m),s.graphMode===17&&h>c&&(c=h,l=m)}u!==void 0&&r.push(Og(s,17,[[p,f,o[u][0],o[u][1]]])),l!==void 0&&r.push(Og(s,17,[[d,g,o[l][0],o[l][1]]]))}else if(s.graphMode===21){let o=t[(i=s.listIndex)!=null?i:0];if(!o)continue;let[a,u,c,l,p]=s.segments[0],f=p-l+(p<l?1:-1)*2*Math.PI,d=[];for(let g of o){let[m,b]=g,y=Math.atan2(b-u,m-a),h=tE(y,l,f);0<h&&h<1&&d.push(h)}if(d.length){d.push(0,1),d.sort();let g=0,m=0;for(let h=0;h<d.length-1;h++){let x=d[h+1]-d[h];(g===void 0||x>g)&&(g=x,m=h)}let b=d[m],y=d[m+1];b>0&&r.push(Og(s,21,[[a,u,c,l,l+b*f]])),y<1&&r.push(Og(s,21,[[a,u,c,p,p-(1-y)*f]]))}}return r}function yB(){throw new Error(\"Programming error: this function is not expected to be called\")}function fN(e,t,r,n){let i=[];for(let s=0;s<t.otherVariableSolutionData.length;s++){let o=t.otherVariableSolutionData[s];if(!o)continue;let{coefficients:a,restriction:u}=o,c=a.argNames[0];if(c!==\"x\"&&c!==\"y\")continue;let l=a.getCompiledFunction().fn,p,f;c===\"y\"?(p=1,f=2):(p=2,f=1);let d=void 0,{listIndex:g,style:m,lineWidth:b,lineOpacity:y,color:h}=Tu(e,s,d),x=Dl(r,{graphMode:p,domainBound:In(),lineWidth:b,operator:\"=\"},yB);if(!x)continue;let P=OR(l,x);for(let E of P){let T=new cr(u.substituteConstantArguments({[c]:E})),M=e.getGraphInfo(n,T);M=Q(q({},M),{graphMode:f,lineWidth:b});let O=void 0,S=e._graph(n,T,r,M,O,t.branchMultiplier===2?\"solvedEquation\":void 0);if(ao(S))for(let C of S)i.push(Q(q({},C),{listIndex:g,style:m,lineWidth:b,lineOpacity:y,color:h}))}}return i.length>0?i:!1}D.Base.prototype.tryGraph=function(e,t,r,n){try{return this.graph(e,t,r,n)}catch(i){let s=i instanceof D.Error?i.getError():te(i).getError();return[DR(s)]}};D.Base.prototype.graph=function(e,t,r,n){let i=this.getGraphInfo(e,t);return this._graph(e,t,r,i,n)};D.BaseComparator.prototype.graph=function(e,t,r){let n=this.getGraphInfo(e,t),i=n.graphMode,s=\"baseComparator\",o=this.userData.lines===void 0?!0:this.userData.lines;if(i===8||i===112||i===113||i===127||i===210)return this._graph(e,t,r,n);if(i===10||!(t instanceof D.SolvedEquation))return!1;let a=this.getOperator(),u=[],c=[],l=!0;t._expression.eachElement(function(b){u.push(b.getCompiledFunction());try{c.push(b.getCompiledDerivative())}catch(y){l=!1}}),l||(c=void 0);let p=[],f=[-1,0,0,1],d=Ic(this.metaData,[\"computedLineWidth\",\"computedLineOpacity\",\"computedFillOpacity\",\"colorLatexValue\"],s),g=Math.min(u.length,d);for(let b=0;b<g;b++){let y=this.getGraphInfo(e,t._expression.args[b]);y.graphMode=i;let{listIndex:h,style:x,color:P,lineWidth:E,lineOpacity:T,fillOpacity:M}=Tu(this,b,s);y.listIndex=h,y.style=x,y.color=P,n.graphMode===6&&(y.domain={type:\"1d\",min:this.metaData.evaluatedDomainMin,max:this.metaData.evaluatedDomainMax,isExplicit:this.metaData.isExplicitDomain});let O=Ca({viewState:r,graphInfo:y,compiled:u[b],derivative:c?c[b]:void 0});O.lineWidth=E,O.lineOpacity=T,O.fillOpacity=M,O.operator=Fu($n[a].inclusive,f[b%4]),o||(O.lineWidth=0),p.push(O)}for(let b=0;b<g;b+=4){let y=hg(p[b+1].segments,p[b+2].segments,i);p.push({graphMode:7,listIndex:p[b].listIndex,segments:y,poi:rn(),fillOpacity:p[b].fillOpacity,color:p[b].color})}let m=fN(this,t,r,e);if(m){for(let b of m)b.operator=Fu($n[a].inclusive,0);Array.prototype.push.apply(p,m)}return p};D.DoubleInequality.prototype.graph=function(e,t,r){let n=this.getGraphInfo(e,t);if(n.graphMode===10)return!1;let i=[],s=Fu($n[this._operators[0]].inclusive,0),o=Fu($n[this._operators[1]].inclusive,0),a=this.userData,u=this.metaData,c=a.lines===void 0?!0:a.lines,l=[\"colorLatexValue\",\"computedFillOpacity\"];c&&l.push(\"computedLineWidth\",\"computedLineOpacity\");let p=Ic(u,l),f=t._expressions;return wn(f),Sg.eachArgs(f,(d,g)=>{let m=g;if(m>=p)return;d[0].userData=d[1].userData=a,d[0].metaData=d[1].metaData=u;let b=void 0,{color:y,lineWidth:h,lineOpacity:x,fillOpacity:P}=Tu(this,m,b),E=this._graph(e,d[0],r,n)[0];E.listIndex=m,E.operator=s,E.color=y,E.lineWidth=h,E.lineOpacity=x,i.push(E);let T=this._graph(e,d[1],r,n)[0];T.listIndex=m,T.operator=o,T.color=y,T.lineWidth=h,T.lineOpacity=x,i.push(T);let M=E.segments,O=T.segments;wn(M),wn(O);let S=hg(M,O,E.graphMode);c||(E.lineWidth=0,T.lineWidth=0),i.push({graphMode:7,listIndex:E.listIndex,segments:S,lineOpacity:x,fillOpacity:P,poi:rn(),color:y})}),i};D.Regression.prototype.graph=function(e,t,r){let n=this.getGraphInfo(e,t);return this._graph(e,t.model,r,n)};function f0(e,t){let r=1/0,n=-1/0,i=1/0,s=-1/0;for(let a of t)for(var o=0;o<a.length;o+=2){let u=a[o],c=a[o+1];u<r&&(r=u),u>n&&(n=u),c<i&&(i=c),c>s&&(s=c)}if(isFinite(r)&&isFinite(i))return{type:e,xmin:r,ymin:i,xmax:n,ymax:s}}function dN(e,t){if(!e||!(t instanceof cr))return;let r=t._chunk,n=r.getInstruction(r.getReturnIndex());if(n.type!==37)return;let i=e.discrete?\"discreteDistribution\":\"continuousDistribution\";if(e.symbol===\"binomialdist\"&&n.symbol===\"binompdf\"){let s=rr(r,n.args[1]),o=rr(r,n.args[2]),a=jm(o*s,s,o);return{type:i,xmin:0,xmax:s,ymin:0,ymax:a}}if(e.symbol===\"poissondist\"&&n.symbol===\"poissonpdf\"){let s=rr(r,n.args[1]),o=Math.max(nl(Math.floor(s),s),nl(Math.ceil(s),s));return{type:i,xmin:0,xmax:2.5*s,ymin:0,ymax:o}}if(e.symbol===\"normaldist\"&&n.symbol===\"normalpdf\"){let s=rr(r,n.args[1]),o=rr(r,n.args[2]),a=CP(s,s,o);return{type:i,xmin:s-2*Math.abs(o),xmax:s+2*Math.abs(o),ymin:0,ymax:a}}if(e.symbol===\"uniformdist\"&&n.symbol===\"uniformpdf\"){let s=rr(r,n.args[1]),o=rr(r,n.args[2]),a=(s+o)/2,u=o-s,c=wP(a,s,o);return{type:i,xmin:s-u/3,xmax:o+u/3,ymin:0,ymax:c}}if(e.symbol===\"tdist\"&&n.symbol===\"tpdf\"){let s=rr(r,n.args[1]),o=Jm(0,s);return{type:i,xmin:-3,xmax:3,ymin:0,ymax:o}}}function oN(e,t){if(e===void 0||e.symbol!==\"binomialdist\"||!(t instanceof cr))return;let r=t._chunk,n=r.getInstruction(r.getReturnIndex());if(n.type===37&&n.symbol===\"binompdf\")return rr(r,n.args[1])}function mN(e,t,r){let n={};r-=.5*t;for(var i=e.length-1;i>=0;i--){let s=e[i],o=Math.floor((s-r)/t);n[o]?n[o].data.push(s):n[o]={id:o,data:[s],min:o*t+r,max:o*t+r+t,center:o*t+r+t/2}}return n}D.Histogram.prototype.graph=function(e,t,r){let n=this.getGraphInfo(e,t),i=t.args[0].asValue(),s=t.args[1].asValue(),o=this.userData.vizProps&&this.userData.vizProps.binAlignment===\"left\"?s/2:0;wn(i);let a=mN(i,s,o),u=1;this.userData.vizProps&&this.userData.vizProps.histogramMode===\"density\"?u=1/(i.length*s):this.userData.vizProps&&this.userData.vizProps.histogramMode===\"relative\"&&(u=1/i.length);let c=[],l=[];for(let f in a){let d=a[f],g=d.data.length;l.push([d.min,0*u,d.min,g*u,d.max,g*u,d.max,0*u]);let m=0;a[d.id+1]&&(m=a[d.id+1].data.length);let b=[d.min,0*u,d.min,g*u,d.max,g*u];m<g&&b.push(d.max,m*u),c.push(b)}let p=f0(\"histogram\",l);return p&&s&&(p.binWidth=s),[{segments:l,graphMode:7,boundingBox:p,poi:rn(),color:n.color,fillOpacity:.4},{segments:c,graphMode:2,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},color:n.color}]};D.DotPlot.prototype.graph=function(e,t,r){let n=this.getGraphInfo(e,t),i=t.args[1].asValue(),s=this.userData.vizProps&&this.userData.vizProps.binAlignment===\"left\"?i/2:0,o=t.args[0].asValue();wn(o);let a=mN(o,i,s),u=!1,c,l=[];for(let y in a){let h=a[y];for(var p=h.data.length-1;p>=0;p--)h.center!==h.data[p]&&(u=!0)}if(this.userData.vizProps&&this.userData.vizProps.dotplotXMode===\"exact\")for(let y in a){c=a[y].data,c.reverse();for(let x=0;x<c.length;x++)l.push([c[x],x+1])}else for(let y in a){let h=a[y];c=h.data;for(let x=0;x<c.length;x++)l.push([h.center,x+1])}let f=f0(\"dotplot\",l);f&&i&&(f.ymin=0,f.xmin-=.5*i,f.xmax+=.5*i,f.binWidth=i);let{computedPointOpacity:d,computedPointSize:g}=this.metaData,m=La(d,0),b=this.userData.pointSize?La(g,0):14;return[{segments:[l],graphMode:3,boundingBox:f,poi:Ls(l),color:n.color,style:this.userData.pointStyle,pointSize:b,pointOpacity:m,showPoint:!0,needsDotplotXMode:u}]};D.BoxPlot.prototype.graph=function(e,t,r){let n=this.getGraphInfo(e,t),i=this.metaData.evaluatedAxisOffset,s=this.metaData.evaluatedBreadth,o=t.args[0].asValue();if(wn(o),isNaN(s)||isNaN(i))return!1;let a=Math.min.apply(null,o),u=Math.max.apply(null,o),c=nc(o,1),l=nc(o,2),p=nc(o,3),f=i,d=f-s/2,g=f+s/2,m=s/10,b=[];if(this.userData.vizProps.showBoxplotOutliers){let P=p-c,E=c-1.5*P,T=p+1.5*P;a=1/0,u=-1/0,o.forEach(function(M){E<=M&&M<a&&(a=M),u<M&&M<=T&&(u=M),(M<E||M>T)&&b.push([M,f])})}let y=[[c,d,p,d,p,g,c,g,c,d],[l,d,l,g],[c,f,a,f],[p,f,u,f],[a,f-m,a,f+m],[u,f-m,u,f+m]];if(this.userData.vizProps&&this.userData.vizProps.alignedAxis===\"y\"){for(let P of y)for(var h=0;h<P.length;h+=2){let E=P[h];P[h]=P[h+1],P[h+1]=E}for(let P of b){let E=P[0];P[0]=P[1],P[1]=E}}let x=[{segments:y,graphMode:5,boundingBox:f0(\"boxplot\",y.concat(b)),poi:rn(),color:n.color}];return b.length&&x.push({segments:[b],graphMode:3,color:n.color,style:\"OPEN\",showPoint:!0,poi:Ls(b)}),x};function gB(e){return Array.prototype.concat.apply([],e)}D.Table.prototype.isValueDraggable=function(e,t,r){if(!e.columns[t].isIndependent)return!1;let i=this.columns[t].values,s=i&&i[r];return!!(s&&isFinite(s.asValue())&&s.getDependencies().length===0)};D.Table.prototype.graph=function(e,t,r){let n={};if(t.columns[0].isError)return n;let s=t.columns[0].values;for(let o=1;o<this.columns.length;o++){let a=t.columns[o];if(a.isError)continue;let u=this.columns[o].header.userData,c=this.columns[o].header.metaData;if(u.hidden)continue;let l=Ic(c,[\"colorLatexValue\",\"computedPointSize\",\"computedPointOpacity\"]),p=u.dragMode,f=p===\"X\"||p===\"XY\",d=p===\"Y\"||p===\"XY\",g=!!u.points,m=!!u.lines,b=[],y=[],h=[],x=[],P=[],E=[],T=1/0,M=-1/0,O=1/0,S=-1/0,C={};for(let L=0;L<s.length;L++){let Z=s[L],w=a.values[L];if(!Z||!w||!isFinite(Z.asValue())||!isFinite(w.asValue())){C[L]=!0,m&&(E.length>1&&P.push(E),E=[]);continue}let z=Z.asValue(),F=w.asValue();if(g){if(L>=l)continue;let X=f&&this.isValueDraggable(t,0,L),ee=d&&this.isValueDraggable(t,o,L);X||ee?(h.push([z,F]),x.push({index:L,dragX:X,dragY:ee})):y.push([z,F])}m&&E.push([z,F]),z<T&&(T=z),z>M&&(M=z),F<O&&(O=F),F>S&&(S=F)}let A={type:\"table\",xmin:T,xmax:M,ymin:O,ymax:S};h.length&&b.push({graphMode:4,segments:[h],color:c.colorLatexValue||u.color,tableId:u.tableId,poi:Ls(h),movablePointInfo:x,boundingBox:A,pointOpacity:c.computedPointOpacity}),y.length&&b.push({segments:[y],droppedIndices:C,graphMode:3,showPoint:!0,poi:Ls(y),color:c.colorLatexValue||u.color,pointSize:c.computedPointSize,pointOpacity:c.computedPointOpacity,style:u.pointStyle,tableId:u.tableId,boundingBox:A}),(P.length||E.length)&&(P.push(E),b.push({segments:P.map(gB),graphMode:5,poi:rn(),color:aa(u,c),style:u.lineStyle,lineWidth:Array.isArray(c.computedLineWidth)?c.computedLineWidth[0]:c.computedLineWidth,lineOpacity:Array.isArray(c.computedLineOpacity)?c.computedLineOpacity[0]:c.computedLineOpacity,tableId:u.tableId,boundingBox:A})),b.length&&(n[u.id]=b)}return n};function hB(e,t,r){return e?t===0&&r===0?e[2].type!==\"none\"||e[3].type!==\"none\":t!==0&&r!==0?e[0].type!==\"none\"&&e[1].type!==\"none\":t!==0?e[0].type!==\"none\":r!==0?e[1].type!==\"none\":!1:!1}D.Image.prototype.graph=function(e,t,r){let n=[];if(t.center.valueType!==N||t.center.getDependencies().length!==0||!t.radianAngle.isConstant||!t.width.isConstant||!t.height.isConstant||!t.opacity.isConstant)return n;let i=[],s=[],o=t.width.asValue()/2,a=t.height.asValue()/2,u=t.radianAngle.asValue();for(var c=-1;c<=1;c++)for(var l=-1;l<=1;l++){let[p,f]=t.center.asValue(),d=[p+c*o*Math.cos(u)+l*a*Math.sin(u),f-c*o*Math.sin(u)+l*a*Math.cos(u)];hB(t.moveStrategy,c,l)&&(i.push(d),s.push([c,l]))}return n.push({segments:[i],scaleFactors:[s],graphMode:4,color:aa(this.userData,this.metaData),style:this.userData.style,poi:Ls(i),movablePointInfo:[],pointOpacity:1}),n};function aN(e){let t=[],r=[];for(let[n,i]of e)!isNaN(n)&&!isNaN(i)?t.push(n,i):(t.length>=4&&r.push(t),t=[]);return t.length>=4&&r.push(t),r}function uN(...e){return e.some(t=>isNaN(t))}function bB(e){return e.isError?e.getError():e.asValue()===void 0?\"\":+e.asValue()}function xB(e,t,r){let n=[];for(var i=0;i<t.columns.length;i++){let s=r.columns[i],o=s.isError?[]:s.values.map(bB),a={dependent:!s.isIndependent,discrete:!!s.isIndependent,values:o};s.isError&&(a.error=s.getError()),n.push(a)}return{column_data:n}}function PB(e,t,r){let n={variables:[],errorMap:{},dimensions:{}};if(e.areAllScalesLinear()||(n.errorMap.scale=!0),r.center.isError&&(n.errorMap.center=!0),r.radianAngle.isError&&(n.errorMap.angle=!0),r.width.isError&&(n.errorMap.width=!0),r.height.isError&&(n.errorMap.height=!0),r.opacity.isError&&(n.errorMap.opacity=!0),Object.keys(n.errorMap).length>0)return n.variables=t.getSliderVariables(e,r),n;n.dimensions.x=[],n.dimensions.y=[],n.dimensions.radianAngle=[],n.dimensions.width=[],n.dimensions.height=[],n.dimensions.opacity=[];let i=[r.center,r.radianAngle,r.width,r.height,r.opacity];return i.some(o=>o&&o.valueType&&W(o.valueType))&&(n.is_concrete_list=!0),D.List.eachArgs(i,function(o){let a=o[0].asValue(),u=+o[1].asValue(),c=Math.atan2(Math.sin(u),Math.cos(u));n.dimensions.x.push(+a[0]),n.dimensions.y.push(+a[1]),n.dimensions.radianAngle.push(c),n.dimensions.width.push(+o[2].asValue()),n.dimensions.height.push(+o[3].asValue()),n.dimensions.opacity.push(Math.max(0,Math.min(1,+o[4].asValue())))}),(e.graphingEnabled()?t.getGraphMode(e,r):10)!==10&&(n.is_graphable=!0),r.moveStrategy&&(n.move_strategy=r.moveStrategy),t.center&&(t.center.type===\"Identifier\"?(n.center_reference_id=t.center.referencedStatementId,n.center_reference_symbol=t.center._symbol):t.center.type===\"ParenSeq\"&&r.center.valueType===N&&(n.center_is_point_literal=!0)),n}function TB(e,t,r){let n=r.handler,i=r.minStep,s={},o={};for(let p of n.getDependencies())e.validActionVariable(p)||(s[p]=!0);for(let p of i.getDependencies())o[p]=!0;let a;if(po(i))a={status:\"error\",error:i.getError()};else{let p=i.asValue();typeof p==\"number\"&&!isNaN(p)&&p>=0?a={status:\"valid\",value:p}:a={status:\"error\",error:Yb().getError()}}let u=Object.keys(s);u.length>0&&(n=tr(u).setDependencies(n.getDependencies()));let c;n.isError&&!y0(e,n)?c={status:\"error\",error:n.getError()}:n.isEmptyAction?c={status:\"empty\"}:c={status:\"maybe-valid\"};let l={handler:c,minStep:a,variables:[]};return Mu(l,e,q(q({},s),o)),l}function IB(){return{operator:\"=\",variables:[]}}function yN(e,t,r,n){var c;if(Cs(r))return xB(e,r,n);if(tf(r))return PB(e,r,n);let i=IB();if(r instanceof D.Ticker)return e.graphingEnabled()?TB(e,r,n):(i.error=te(\"Ticker without graphing\").getError(),i);if(e.is3dProduct()){let l=e,p=r.getGraphMode(l,n);if((p===100||p===101||p===102||p===5)&&n.getDependencies().length===1){let f=n.getDependencies()[0];(f===\"u\"||f===\"v\"||f===\"t\")&&(i.internal_domain_dependency=f)}}if((c=r.parseOptions)!=null&&c.selection){let l=n.getCursorContext();if(l)i.cursor_context=Q(q({},l),{selection:r.parseOptions.selection});else if(po(n)){let p=MB(e,t,r);p&&(i.cursor_context=Q(q({},p),{selection:r.parseOptions.selection}))}}if(n.isError&&!(r instanceof D.FunctionDefinition&&!n.blocksExport)){i.error=n.getError(),i.variables=r.getSliderVariables(e,n),i.is_single_identifier=r instanceof D.Identifier,n.actionValue&&(i.action_value=hI(n.actionValue));let l=d0(e,t,r,n);return Object.keys(l).length>0&&(i.geometry=d0(e,t,r,n)),i}if(n.valueType===Gt&&n.getDependencies().length===0){let l=n.asValue();i.rgb_value=Ku(l[0],l[1],l[2]).formatHex()}n.valueType===Ke&&n.getDependencies().length===0&&(i.action_value=hI(n.asValue())),n.moveStrategy&&(i.move_strategy=n.moveStrategy,i.default_drag_mode=n.defaultDragMode),r.isInequality()&&(i.is_inequality=!0),i.operator=r.getOperator(),n instanceof D.SolvedEquation?n._expression.asValue()!==!0&&n._expression.asValue()!==!1&&(i.assignment=n._symbol):r instanceof D.Assignment&&(i.assignment=r._symbol);let s=e.graphingEnabled()?r.getGraphMode(e,n):10;if(e.graphingEnabled()&&e.is3dPolicy()&&!Ko(s)&&!cN(s)&&(s=10),s!==10){i.is_graphable=!0,i.expression_type=r.getExpressionType(s,n.valueType),e.is3dPolicy()&&(i.expression_type===\"SINGLE_POINT\"?i.expression_type=\"POINT3D\":i.expression_type===\"POINT_LIST\"&&(i.expression_type=\"POINT3D_LIST\")),n.valueType&&la(n.valueType)&&(i.map_type=n.valueType),n.isShadeBetween()&&(i.is_shade_between=!0);let l=r.tableInfo(e,n);l&&(i.is_tableable=!0,i.table_info=l)}if(n.valueType!==void 0&&W(n.valueType)&&(i.is_concrete_list=!0,n.valueType===Wr&&n.getDependencies().length===0)){let l=n.asValue();l&&(i.rgb_value=l.map(p=>Ku(p[0],p[1],p[2]).formatHex()))}if(i.variables=i.is_graphable?[]:r.getSliderVariables(e,n),i.is_single_identifier=r instanceof D.Identifier,n.isTypedConstant){let l=n.asTypedValue();i.typed_constant_value=l,(l.valueType===I||l.valueType===ge)&&(i.constant_value=l.value),EB(l.valueType)&&(i.geometry=d0(e,t,r,n))}let o=n.getEvaluationInfo();if(o&&i.operator===\"=\"&&!r.isConstant&&!r.isFunction&&n.valueType!==ge&&n.valueType!==sn&&!(r instanceof D.Equation)&&!(r instanceof D.And)&&(i.is_evaluable=!0,i.zero_values=o),n instanceof D.OptimizedRegression){let l=n,p={};for(var a in l.parameters)l.parameters.hasOwnProperty(a)&&(p[Qr(a)]=+l.parameters[a].asValue());i.is_regression=!0,i.regression={parameters:p,residualVariable:Qr(l.residualVariable),residualSuggestionId:l.residualSuggestionId,shouldSuggestLogMode:l.shouldSuggestLogMode,isLinear:l.isLinear,statistics:l.statistics,parameterWarning:l.parameterWarning}}let u=Aa(r);return u&&u.discrete&&(i.is_discrete_distribution=!0),i}function EB(e){switch(e){case N:case ft:case ye:case qr:case De:case Tr:case Le:case kr:case he:case Yr:case me:case Hr:case fe:case Ur:case we:case Nr:case Ne:case ar:case Te:case ur:case He:case Cn:return!0;default:return!1}}function d0(e,t,r,n){let i={};n.valueType!==void 0&&(i.valueType=n.valueType),i.valueType&&ne(i.valueType,N)&&e.graphingEnabled()&&r.getGraphMode(e,n)===4&&(i.isMovablePoint=!0);let{identifier:s,listAccess:o,assignmentRhsReference:a,tree:u}=hy(r);if(s&&(i.identifier=s),o&&(i.listAccess=o),a&&(i.assignmentRhsReference=a),u&&(i.call=u,n.valueType&&ne(n.valueType,He)&&r instanceof ba)){let l=r._expression;i.transformation_preview_info={type:u.symbol,args:l.args.slice(1).map(p=>p.tryGetConcreteTree(e,t).asTypedValue())}}let c=n.moveStrategy&&n.moveStrategy[0];return c&&\"initialValue\"in c&&c.initialValue!==void 0&&(i.gliderParameter=c.initialValue),i}function MB(e,t,r){let n=r.parseOptions;if(!(n!=null&&n.selection))return;let{start:i,end:s,input:o}=n.selection;if(o.trim()===\"\")return{type:\"empty\",allowedTypes:[Vt]};let a=\"\\\\cursor\",u=o.slice(0,i)+a+\" \"+o.slice(s),c={input:u,start:i,end:i+a.length},l=Ns(u,Q(q({},r.parseOptions),{selection:c}));return l.isError?void 0:Pl({policy:e,frame:t,selection:c},l).getCursorContext()}function Mu(e,t,r){let n=e.variables;if(n&&n.length){let i={};for(let s of n)i[s]=!0;for(let s in r)i[s]=!0;r=i}e.variables=t.sliderVariables(Object.keys(r))}function y0(e,t){if(t.blocksExport)return!1;let r=t.getDependencies();if(r.length===0)return!1;for(let n of r)if(!e.validActionVariable(n))return!1;return!0}var Y=class{constructor(t,r,n,i){this.policy=t,this.rawTree=n,this.concreteTree=i,this.evaluationState=yN(t,r,n,i)}exportTo(t,r){this.rawTree.exportTo(t,this.concreteTree,r)}graph(t,r){return this.rawTree.tryGraph(this.policy,this.concreteTree,t,r)}getGraphMode(){return this.policy.graphingEnabled()?this.rawTree.getGraphMode(this.policy,this.concreteTree):10}getGraphInfo(){return this.rawTree.getGraphInfo(this.policy,this.concreteTree)}shouldIntersect(){if(!this.evaluationState.is_graphable||!this.rawTree.userData.shouldGraph||!$i.pointsOfInterest)return!1;var t=this.getGraphMode();return t===1||t===2}};var G=function(){};G.version=\"1.2.6\";G._myIndexOf=function(t){var r=this.length,n;for(n=0;n<r;++n)if(this[n]===t)return n;return-1};G.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:G._myIndexOf;G.precision=4;G.largeArray=50;G.compile=function(){var e=Array.prototype.slice.call(arguments),t=e.pop();return t=\"return function (\"+e.join(\",\")+\") {\"+t+\"}\",new Function([\"numeric\"],t)(G)};G._dim=function(t){for(var r=[];typeof t==\"object\";)r.push(t.length),t=t[0];return r};G.dim=function(t){var r,n;return typeof t==\"object\"?(r=t[0],typeof r==\"object\"?(n=r[0],typeof n==\"object\"?G._dim(t):[t.length,r.length]):[t.length]):[]};G.mapreduce=function(t,r){return G.compile(\"x\",\"accum\",\"_s\",\"_k\",'if(typeof accum === \"undefined\") accum = '+r+`;\nif(typeof x === \"number\") { var xi = x; `+t+`; return accum; }\nif(typeof _s === \"undefined\") _s = numeric.dim(x);\nif(typeof _k === \"undefined\") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    `+t+`;\n    xi = x[i-1];\n    `+t+`;\n}\nif(i === 0) {\n    xi = x[i];\n    `+t+`\n}\nreturn accum;`)};G.mapreduce2=function(t,r){return G.compile(\"x\",`var n = x.length;\nvar i,xi;\n`+r+`\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    `+t+`\n}\nreturn accum;`)};G.rep=function(t,r,n){typeof n==\"undefined\"&&(n=0);var i=t[n],s=Array(i),o;if(n===t.length-1){for(o=i-2;o>=0;o-=2)s[o+1]=r,s[o]=r;return o===-1&&(s[0]=r),s}for(o=i-1;o>=0;o--)s[o]=G.rep(t,r,n+1);return s};G.dotMMsmall=function(t,r){var n,i,s,o,a,u,c,l,p,f,d,g,m,b;for(o=t.length,a=r.length,u=r[0].length,c=Array(o),n=o-1;n>=0;n--){for(l=Array(u),p=t[n],s=u-1;s>=0;s--){for(f=p[a-1]*r[a-1][s],i=a-2;i>=1;i-=2)d=i-1,f+=p[i]*r[i][s]+p[d]*r[d][s];i===0&&(f+=p[0]*r[0][s]),l[s]=f}c[n]=l}return c};G._getCol=function(t,r,n){var i=t.length,s;for(s=i-1;s>0;--s)n[s]=t[s][r],--s,n[s]=t[s][r];s===0&&(n[0]=t[0][r])};G.dotMMbig=function(t,r){var n=G._getCol,i=r.length,s=Array(i),o=t.length,a=r[0].length,u=new Array(o),c,l=G.dotVV,p,f,d,g;for(--i,--o,p=o;p!==-1;--p)u[p]=Array(a);for(--a,p=a;p!==-1;--p)for(n(r,p,s),f=o;f!==-1;--f)g=0,c=t[f],u[f][p]=l(c,s);return u};G.dotMV=function(t,r){var n=t.length,i=r.length,s,o=Array(n),a=G.dotVV;for(s=n-1;s>=0;s--)o[s]=a(t[s],r);return o};G.dotVM=function(t,r){var n,i,s,o,a,u,c,l,p,f,d,g,m,b,y,h,x,P,E;for(o=t.length,a=r[0].length,c=Array(a),s=a-1;s>=0;s--){for(f=t[o-1]*r[o-1][s],i=o-2;i>=1;i-=2)d=i-1,f+=t[i]*r[i][s]+t[d]*r[d][s];i===0&&(f+=t[0]*r[0][s]),c[s]=f}return c};G.dotVV=function(t,r){var n,i=t.length,s,o=t[i-1]*r[i-1];for(n=i-2;n>=1;n-=2)s=n-1,o+=t[n]*r[n]+t[s]*r[s];return n===0&&(o+=t[0]*r[0]),o};G.dot=function(t,r){var n=G.dim;switch(n(t).length*1e3+n(r).length){case 2002:return r.length<10?G.dotMMsmall(t,r):G.dotMMbig(t,r);case 2001:return G.dotMV(t,r);case 1002:return G.dotVM(t,r);case 1001:return G.dotVV(t,r);case 1e3:return G.mulVS(t,r);case 1:return G.mulSV(t,r);case 0:return t*r;default:throw new Error(\"numeric.dot only works on vectors and matrices\")}};G.diag=function(t){var r,n,i,s=t.length,o=Array(s),a;for(r=s-1;r>=0;r--){for(a=Array(s),n=r+2,i=s-1;i>=n;i-=2)a[i]=0,a[i-1]=0;for(i>r&&(a[i]=0),a[r]=t[r],i=r-1;i>=1;i-=2)a[i]=0,a[i-1]=0;i===0&&(a[0]=0),o[r]=a}return o};G.getDiag=function(e){var t=Math.min(e.length,e[0].length),r,n=Array(t);for(r=t-1;r>=1;--r)n[r]=e[r][r],--r,n[r]=e[r][r];return r===0&&(n[0]=e[0][0]),n};G.identity=function(t){return G.diag(G.rep([t],1))};G.pointwise=function(t,r,n){typeof n==\"undefined\"&&(n=\"\");var i=[],s,o=/\\[i\\]$/,a,u=\"\",c=!1;for(s=0;s<t.length;s++)o.test(t[s])?(a=t[s].substring(0,t[s].length-3),u=a):a=t[s],a===\"ret\"&&(c=!0),i.push(a);return i[t.length]=\"_s\",i[t.length+1]=\"_k\",i[t.length+2]='if(typeof _s === \"undefined\") _s = numeric.dim('+u+`);\nif(typeof _k === \"undefined\") _k = 0;\nvar _n = _s[_k];\nvar i`+(c?\"\":\", ret = Array(_n)\")+`;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee(`+t.join(\",\")+`,_s,_k+1);\n    return ret;\n}\n`+n+`\nfor(i=_n-1;i!==-1;--i) {\n    `+r+`\n}\nreturn ret;`,G.compile.apply(null,i)};G.pointwise2=function(t,r,n){typeof n==\"undefined\"&&(n=\"\");var i=[],s,o=/\\[i\\]$/,a,u=\"\",c=!1;for(s=0;s<t.length;s++)o.test(t[s])?(a=t[s].substring(0,t[s].length-3),u=a):a=t[s],a===\"ret\"&&(c=!0),i.push(a);return i[t.length]=\"var _n = \"+u+`.length;\nvar i`+(c?\"\":\", ret = Array(_n)\")+`;\n`+n+`\nfor(i=_n-1;i!==-1;--i) {\n`+r+`\n}\nreturn ret;`,G.compile.apply(null,i)};G._biforeach=function e(t,r,n,i,s){if(i===n.length-1){s(t,r);return}var o,a=n[i];for(o=a-1;o>=0;o--)e(typeof t==\"object\"?t[o]:t,typeof r==\"object\"?r[o]:r,n,i+1,s)};G._biforeach2=function e(t,r,n,i,s){if(i===n.length-1)return s(t,r);var o,a=n[i],u=Array(a);for(o=a-1;o>=0;--o)u[o]=e(typeof t==\"object\"?t[o]:t,typeof r==\"object\"?r[o]:r,n,i+1,s);return u};G._foreach=function e(t,r,n,i){if(n===r.length-1){i(t);return}var s,o=r[n];for(s=o-1;s>=0;s--)e(t[s],r,n+1,i)};G._foreach2=function e(t,r,n,i){if(n===r.length-1)return i(t);var s,o=r[n],a=Array(o);for(s=o-1;s>=0;s--)a[s]=e(t[s],r,n+1,i);return a};G.ops2={add:\"+\",sub:\"-\",mul:\"*\",div:\"/\",mod:\"%\",and:\"&&\",or:\"||\",eq:\"===\",neq:\"!==\",lt:\"<\",gt:\">\",leq:\"<=\",geq:\">=\",band:\"&\",bor:\"|\",bxor:\"^\",lshift:\"<<\",rshift:\">>\",rrshift:\">>>\"};G.opseq={addeq:\"+=\",subeq:\"-=\",muleq:\"*=\",diveq:\"/=\",modeq:\"%=\",lshifteq:\"<<=\",rshifteq:\">>=\",rrshifteq:\">>>=\",bandeq:\"&=\",boreq:\"|=\",bxoreq:\"^=\"};G.mathfuns=[\"abs\",\"acos\",\"asin\",\"atan\",\"ceil\",\"cos\",\"exp\",\"floor\",\"log\",\"round\",\"sin\",\"sqrt\",\"tan\",\"isNaN\",\"isFinite\"];G.mathfuns2=[\"atan2\",\"pow\",\"max\",\"min\"];G.ops1={neg:\"-\",not:\"!\",bnot:\"~\",clone:\"\"};G.mapreducers={any:[\"if(xi) return true;\",\"var accum = false;\"],all:[\"if(!xi) return false;\",\"var accum = true;\"],sum:[\"accum += xi;\",\"var accum = 0;\"],prod:[\"accum *= xi;\",\"var accum = 1;\"],norm2Squared:[\"accum += xi*xi;\",\"var accum = 0;\"],norminf:[\"accum = max(accum,abs(xi));\",\"var accum = 0, max = Math.max, abs = Math.abs;\"],norm1:[\"accum += abs(xi);\",\"var accum = 0, abs = Math.abs;\"],sup:[\"accum = max(accum,xi);\",\"var accum = -Infinity, max = Math.max;\"],inf:[\"accum = min(accum,xi);\",\"var accum = Infinity, min = Math.min;\"]};(function(){var e,t;for(e=0;e<G.mathfuns2.length;++e)t=G.mathfuns2[e],G.ops2[t]=t;for(e in G.ops2)if(G.ops2.hasOwnProperty(e)){t=G.ops2[e];var r,n,i=\"\";G.myIndexOf.call(G.mathfuns2,e)!==-1?(i=\"var \"+t+\" = Math.\"+t+`;\n`,r=function(s,o,a){return s+\" = \"+t+\"(\"+o+\",\"+a+\")\"},n=function(s,o){return s+\" = \"+t+\"(\"+s+\",\"+o+\")\"}):(r=function(s,o,a){return s+\" = \"+o+\" \"+t+\" \"+a},G.opseq.hasOwnProperty(e+\"eq\")?n=function(s,o){return s+\" \"+t+\"= \"+o}:n=function(s,o){return s+\" = \"+s+\" \"+t+\" \"+o}),G[e+\"VV\"]=G.pointwise2([\"x[i]\",\"y[i]\"],r(\"ret[i]\",\"x[i]\",\"y[i]\"),i),G[e+\"SV\"]=G.pointwise2([\"x\",\"y[i]\"],r(\"ret[i]\",\"x\",\"y[i]\"),i),G[e+\"VS\"]=G.pointwise2([\"x[i]\",\"y\"],r(\"ret[i]\",\"x[i]\",\"y\"),i),G[e]=G.compile(`var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric.`+e+\"VV, VS = numeric.\"+e+\"VS, SV = numeric.\"+e+`SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === \"object\") {\n      if(typeof y === \"object\") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === \"object\") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else `+n(\"x\",\"y\")+`\n}\nreturn x;\n`),G[t]=G[e],G[e+\"eqV\"]=G.pointwise2([\"ret[i]\",\"x[i]\"],n(\"ret[i]\",\"x[i]\"),i),G[e+\"eqS\"]=G.pointwise2([\"ret[i]\",\"x\"],n(\"ret[i]\",\"x\"),i),G[e+\"eq\"]=G.compile(`var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric.`+e+\"eqV, S = numeric.\"+e+`eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === \"object\") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n`)}for(e=0;e<G.mathfuns2.length;++e)t=G.mathfuns2[e],delete G.ops2[t];for(e=0;e<G.mathfuns.length;++e)t=G.mathfuns[e],G.ops1[t]=t;for(e in G.ops1)G.ops1.hasOwnProperty(e)&&(i=\"\",t=G.ops1[e],G.myIndexOf.call(G.mathfuns,e)!==-1&&Math.hasOwnProperty(t)&&(i=\"var \"+t+\" = Math.\"+t+`;\n`),G[e+\"eqV\"]=G.pointwise2([\"ret[i]\"],\"ret[i] = \"+t+\"(ret[i]);\",i),G[e+\"eq\"]=G.compile(\"x\",'if(typeof x !== \"object\") return '+t+`x\nvar i;\nvar V = numeric.`+e+`eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n`),G[e+\"V\"]=G.pointwise2([\"x[i]\"],\"ret[i] = \"+t+\"(x[i]);\",i),G[e]=G.compile(\"x\",'if(typeof x !== \"object\") return '+t+`(x)\nvar i;\nvar V = numeric.`+e+`V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n`));for(e=0;e<G.mathfuns.length;++e)t=G.mathfuns[e],delete G.ops1[t];for(e in G.mapreducers)G.mapreducers.hasOwnProperty(e)&&(t=G.mapreducers[e],G[e+\"V\"]=G.mapreduce2(t[0],t[1]),G[e]=G.compile(\"x\",\"s\",\"k\",t[1]+`if(typeof x !== \"object\") {    xi = x;\n`+t[0]+`\n    return accum;\n}if(typeof s === \"undefined\") s = numeric.dim(x);\nif(typeof k === \"undefined\") k = 0;\nif(k === s.length-1) return numeric.`+e+`V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n`+t[0]+`\n}\nreturn accum;\n`))})();G.inv=function(m){var r=G.dim(m),n=Math.abs,i=r[0],s=r[1],o=G.clone(m),a,u,c=G.identity(i),l,p,f,d,g,m;for(d=0;d<s;++d){var b=-1,y=-1;for(f=d;f!==i;++f)g=n(o[f][d]),g>y&&(b=f,y=g);for(u=o[b],o[b]=o[d],o[d]=u,p=c[b],c[b]=c[d],c[d]=p,m=u[d],g=d;g!==s;++g)u[g]/=m;for(g=s-1;g!==-1;--g)p[g]/=m;for(f=i-1;f!==-1;--f)if(f!==d){for(a=o[f],l=c[f],m=a[d],g=d+1;g!==s;++g)a[g]-=u[g]*m;for(g=s-1;g>0;--g)l[g]-=p[g]*m,--g,l[g]-=p[g]*m;g===0&&(l[0]-=p[0]*m)}}return c};G.det=function(t){var r=G.dim(t);if(r.length!==2||r[0]!==r[1])throw new Error(\"numeric: det() only works on square matrices\");var n=r[0],i=1,s,o,a,u=G.clone(t),c,l,p,f,d,g,m;for(o=0;o<n-1;o++){for(a=o,s=o+1;s<n;s++)Math.abs(u[s][o])>Math.abs(u[a][o])&&(a=s);for(a!==o&&(f=u[a],u[a]=u[o],u[o]=f,i*=-1),c=u[o],s=o+1;s<n;s++){for(l=u[s],p=l[o]/c[o],a=o+1;a<n-1;a+=2)d=a+1,l[a]-=c[a]*p,l[d]-=c[d]*p;a!==n&&(l[a]-=c[a]*p)}if(c[o]===0)return 0;i*=c[o]}return i*u[o][o]};G.transpose=function(t){var r,n,i=t.length,s=t[0].length,o=Array(s),a,u,c;for(n=0;n<s;n++)o[n]=Array(i);for(r=i-1;r>=1;r-=2){for(u=t[r],a=t[r-1],n=s-1;n>=1;--n)c=o[n],c[r]=u[n],c[r-1]=a[n],--n,c=o[n],c[r]=u[n],c[r-1]=a[n];n===0&&(c=o[0],c[r]=u[0],c[r-1]=a[0])}if(r===0){for(a=t[0],n=s-1;n>=1;--n)o[n][0]=a[n],--n,o[n][0]=a[n];n===0&&(o[0][0]=a[0])}return o};G.negtranspose=function(t){var r,n,i=t.length,s=t[0].length,o=Array(s),a,u,c;for(n=0;n<s;n++)o[n]=Array(i);for(r=i-1;r>=1;r-=2){for(u=t[r],a=t[r-1],n=s-1;n>=1;--n)c=o[n],c[r]=-u[n],c[r-1]=-a[n],--n,c=o[n],c[r]=-u[n],c[r-1]=-a[n];n===0&&(c=o[0],c[r]=-u[0],c[r-1]=-a[0])}if(r===0){for(a=t[0],n=s-1;n>=1;--n)o[n][0]=-a[n],--n,o[n][0]=-a[n];n===0&&(o[0][0]=-a[0])}return o};G.norm2=function(t){return Math.sqrt(G.norm2Squared(t))};G.linspace=function(t,r,n){if(typeof n==\"undefined\"&&(n=Math.max(Math.round(r-t)+1,1)),n<2)return n===1?[t]:[];var i,s=Array(n);for(n--,i=n;i>=0;i--)s[i]=(i*r+(n-i)*t)/n;return s};G.getBlock=function(t,r,n){var i=G.dim(t);function s(o,a){var u,c=r[a],l=n[a]-c,p=Array(l);if(a===i.length-1){for(u=l;u>=0;u--)p[u]=o[u+c];return p}for(u=l;u>=0;u--)p[u]=s(o[u+c],a+1);return p}return s(t,0)};G.setBlock=function(t,r,n,i){var s=G.dim(t);function o(a,u,c){var l,p=r[c],f=n[c]-p;if(c===s.length-1)for(l=f;l>=0;l--)a[l+p]=u[l];for(l=f;l>=0;l--)o(a[l+p],u[l],c+1)}return o(t,i,0),t};G.getRange=function(t,r,n){var i=r.length,s=n.length,o,a,u=Array(i),c,l;for(o=i-1;o!==-1;--o)for(u[o]=Array(s),c=u[o],l=t[r[o]],a=s-1;a!==-1;--a)c[a]=l[n[a]];return u};G.blockMatrix=function(t){var r=G.dim(t);if(r.length<4)return G.blockMatrix([t]);var n=r[0],i=r[1],s,o,a,u,c;for(s=0,o=0,a=0;a<n;++a)s+=t[a][0].length;for(u=0;u<i;++u)o+=t[0][u][0].length;var l=Array(s);for(a=0;a<s;++a)l[a]=Array(o);var p=0,f,d,g,m,b;for(a=0;a<n;++a){for(f=o,u=i-1;u!==-1;--u)for(c=t[a][u],f-=c[0].length,g=c.length-1;g!==-1;--g)for(b=c[g],d=l[p+g],m=b.length-1;m!==-1;--m)d[f+m]=b[m];p+=t[a][0].length}return l};G.tensor=function(t,r){if(typeof t==\"number\"||typeof r==\"number\")return G.mul(t,r);var n=G.dim(t),i=G.dim(r);if(n.length!==1||i.length!==1)throw new Error(\"numeric: tensor product is only defined for vectors\");var s=n[0],o=i[0],a=Array(s),u,c,l,p;for(c=s-1;c>=0;c--){for(u=Array(o),p=t[c],l=o-1;l>=3;--l)u[l]=p*r[l],--l,u[l]=p*r[l],--l,u[l]=p*r[l],--l,u[l]=p*r[l];for(;l>=0;)u[l]=p*r[l],--l;a[c]=u}return a};G.epsilon=2220446049250313e-31;G.LU=function(e,t){t=t||!1;var r=Math.abs,n,i,s,o,a,u,c,l,p,f=e.length,d=f-1,g=new Array(f);for(t||(e=G.clone(e)),s=0;s<f;++s){for(c=s,u=e[s],p=r(u[s]),i=s+1;i<f;++i)o=r(e[i][s]),p<o&&(p=o,c=i);for(g[s]=c,c!=s&&(e[s]=e[c],e[c]=u,u=e[s]),a=u[s],n=s+1;n<f;++n)e[n][s]/=a;for(n=s+1;n<f;++n){for(l=e[n],i=s+1;i<d;++i)l[i]-=l[s]*u[i],++i,l[i]-=l[s]*u[i];i===d&&(l[i]-=l[s]*u[i])}}return{LU:e,P:g}};G.LUsolve=function(t,r){var n,i,s=t.LU,o=s.length,a=G.clone(r),u=t.P,c,l,p,f;for(n=o-1;n!==-1;--n)a[n]=r[n];for(n=0;n<o;++n)for(c=u[n],u[n]!==n&&(f=a[n],a[n]=a[c],a[c]=f),l=s[n],i=0;i<n;++i)a[n]-=a[i]*l[i];for(n=o-1;n>=0;--n){for(l=s[n],i=n+1;i<o;++i)a[n]-=a[i]*l[i];a[n]/=l[n]}return a};G.solve=function(t,r,n){return G.LUsolve(G.LU(t,n),r)};var br=G;function DB(e,t){let r=e.length,n=t.length,i=0,s=0;for(let a=n-r;a<n;a++)i+=e[a+r-n]*t[a],s+=e[a+r-n]*e[a+r-n];let o=i/s;for(let a=n-r;a<n;a++)t[a]=2*o*e[a+r-n]-t[a]}function vB(e,t,r){let n=e.length,i=t.length,s=0,o=0;for(let u=i-n;u<i;u++)s+=e[u+n-i]*t[u][r],o+=e[u+n-i]*e[u+n-i];let a=s/o;for(let u=i-n;u<i;u++)t[u][r]=2*a*e[u+n-i]-t[u][r]}function OB(e,t,r,n){let i=Array(e.length-t);if(i.length===1)return i[0]=1,i;if(n===0){i[0]=1;for(let o=1;o<i.length;o++)i[o]=0;return i}let s=e[t][r]<0?-1:1;i[0]=e[t][r]+s*Math.sqrt(n);for(let o=t+1;o<e.length;o++)i[o-t]=e[o][r];return i}function SB(e,t,r){let n=0;for(;t<e.length;t++)n+=e[t][r]*e[t][r];return n}function Rg(e,t){if(!t||!t.mutateInput){let s=e;e=Array(e.length);for(let o=0;o<s.length;o++)e[o]=s[o].slice()}let r=Math.min(e.length,e[0].length),n=Array(r),i=[];for(let s=0;s<r;s++){let o=-1/0,a=s;for(let c=s;c<e[s].length;c++){let l=SB(e,s,c);l>o&&(o=l,a=c)}if(n[s]=a,a!==s)for(let c=0;c<e.length;c++){let l=e[c][a];e[c][a]=e[c][s],e[c][s]=l}let u=OB(e,s,s,o);for(let c=s;c<e[s].length;c++)vB(u,e,c);i.push(u)}return{reflectors:i,r:e,p:n}}function gN(e,t,r){let{reflectors:n,r:i,p:s}=e,o=t.slice();for(let c=0;c<n.length;c++)DB(n[c],o);for(let c=n.length;c<i[0].length;c++)o[c]=0;o.length=i[0].length;let a=Math.pow(2,-52),u=r.regularize?a*Math.abs(i[0][0])*Math.max(i.length,i[0].length):0;for(let c=n.length-1;c>=0;c--){let l=i[c];if(Math.abs(l[c])<=u)o[c]=0;else{for(let p=c+1;p<n.length;p++)o[c]-=o[p]*l[p];o[c]/=l[c]}}for(let c=s.length-1;c>=0;c--)if(s[c]!==c){let l=o[c];o[c]=o[s[c]],o[s[c]]=l}return o}function RB(e,t,r){let n=Array(e.r[0].length);for(let s=0;s<n.length;s++)n[s]=Array(t[0].length);let i=Array(t.length);for(let s=0;s<t[0].length;s++){for(let a=0;a<t.length;a++)i[a]=t[a][s];let o=gN(e,i,r);for(let a=0;a<o.length;a++)n[a][s]=o[a]}return n}function Ec(e,t,r){return Array.isArray(t[0])?RB(e,t,r):gN(e,t,r)}function NB(e){let t=e.r,r=Math.min(t.length,t[0].length),n=t[0][0],i=t[r-1][r-1];return n===0?1/0:Math.abs(n/i)}function hN(e){let t=Math.pow(2,-52);return Math.max(e.r.length,e.r[0].length)*t*NB(e)<1}var AB=Math.pow(2,-52);function Ag(e){for(let t of e)for(let r of t)if(!pr(r))return!1;return!0}function CB(e){let t=[];for(let r of e)t.push(r.slice());return t}function xN(e){let{numRows:t,numCols:r}=Ng(e),n=[];for(let i=0;i<r;i++)n.push([]);for(let i=0;i<t;i++)for(let s=0;s<r;s++)n[s].push(e[i][s]);return n}function Ng(e){let t=e.length,r=t>0?e[0].length:0;return{numRows:t,numCols:r}}function _B(){throw new Error(\"Matrix dimension mismatch\")}function g0(e,t){let r=Ng(e),n=Ng(t);r.numCols!==n.numRows&&_B();let i=[];for(let s=0;s<r.numRows;s++){let o=[];for(let a=0;a<n.numCols;a++){let u=Ve(0,1);for(let c=0;c<e[s].length;c++)u=Ro(u,No(e[s][c],t[c][a]));o.push(u)}i.push(o)}return i}function PN(e){let t=CB(e);return wB(t),t}function LB(e){let t=0;for(let r of e)for(let n of r){let i=Math.abs(k(n));if(!isFinite(i))return NaN;i>t&&(t=i)}return t}function bN(e){for(let t=0;t<e.length;t++)for(let r=0;r<e[t].length;r++)e[t][r]=NaN}function wB(e){let{numRows:t,numCols:r}=Ng(e),n=LB(e);if(!isFinite(n))return bN(e),{determinant:NaN,rank:0};let i=Math.max(t,r)*n*AB,s=Ve(1,1),o=0,a=0;for(;o<t&&a<r;){let u=o,c=Math.abs(k(e[o][a]));for(let p=o+1;p<t;p++){let f=Math.abs(k(e[p][a]));(!isFinite(f)||f>c)&&(c=f,u=p)}if(!isFinite(c))return bN(e),{determinant:NaN,rank:0};if(c===0){s=Ve(0,1),a+=1;continue}if(!pr(e[u][a])&&c<i){for(let p=o;p<t;p++)e[o][p]=0;s=0,a+=1;continue}if(u!==o){s=Ki(s);let p=e[o];e[o]=e[u],e[u]=p}for(let p=0;p<t;p++){if(p===o)continue;let f=js(e[p][a],e[o][a]);e[p][a]=Ve(0,1);for(let d=a+1;d<r;d++)e[p][d]=Js(e[p][d],No(f,e[o][d]))}let l=e[o][a];s=No(s,l),e[o][a]=Ve(1,1);for(let p=a+1;p<r;p++)e[o][p]=js(e[o][p],l);o+=1,a+=1}return{rank:o,determinant:o===t&&o===r?s:Ve(0,1)}}function _g(e,t){let r=[];for(let n=0;n<t;n++)r.push(e);return r}function vu(e,t){let r=Du(e,t),n=0;for(let i of r){let s=i;n+=s*s}return n/r.length}function Du(e,t){return e.apply(void 0,t)}function Cg(e,t){let r=[];for(let n of e){let i=n.apply(void 0,t);r.push(i)}return r}function TN(e,t){let r=[];for(let n=0;n<e.length;n++)t[n]&&r.push(e[n]);return r}function h0(e,t,r){let n=[];for(let i=0,s=0;i<e.length;i++){let o=0;r[i]&&(o=t[s],s+=1),n.push(e[i]+o)}return n}function P0(e,t){let r=t.solution.map(u=>Math.abs(u)<1e-6?0:u),n=t.solution.map(()=>0),i=vu(e,r),s=Du(e,r),o=Du(e,n),a=0;for(let u=0;u<s.length;u++){let c=o[u]*1e-15;a+=Math.abs(s[u]*c)+c*c}return a/=s.length,isFinite(a)||(a=0),isFinite(t.MSE)&&!isFinite(i)?t:i<=t.MSE+a?{solution:r,MSE:i}:t}function T0(e,t){if(!Ag(t)||!Ag([e]))return;let r=xN(t),n=g0([e],r)[0],i=g0(t,r);for(let c=0;c<n.length;c++)i[c].push(Ki(n[c]));let s=PN(i);if(!Ag(s))return;let o=[],a=n.length,u=0;for(let c of s)for(;u<a;)if(k(c[u])===1){o.push(c[c.length-1]),u++;break}else o.push(Ve(0,1)),u++;for(;u<a;)o.push(Ve(0,1)),u++;return o}function I0(e,t){let r=_g(0,t.length),n=Cg(t,r),i=Rg(br.transpose(n),{mutateInput:!0});for(var s=0;s<2;s++){let c=Du(e,r),l=br.neg(Ec(i,c,{regularize:!1}));r=br.add(r,l)}let o=vu(e,r);if(hN(i))return{solution:r,MSE:o};let a=_g(0,t.length);for(var s=0;s<2;s++){let l=Du(e,a),p=br.neg(Ec(i,l,{regularize:!0}));a=br.add(a,p)}let u=vu(e,a);return .999*u<=o?{solution:a,MSE:u}:{solution:r,MSE:o}}function b0(e,t,r,n){let i=n.maxIterations,s=n.linearSubset||_g(!1,r.length),o=br.not(s),a=TN(t,s),u=TN(t,o),c=2,l=.1,p=r,f=0,d=.001,g;if(br.any(s)){let y=br.transpose(Cg(a,p)),h=Rg(y);g={Jv:y,F:h};let x=Du(e,p),P=br.neg(Ec(h,x,{regularize:!0}));p=h0(p,P,s)}let m=!1,b=vu(e,p);for(;f<i&&!m&&isFinite(b);){let y=Du(e,p),h=Cg(u,p),x=br.transpose(h),P,E;if(g){let{F:O,Jv:S}=g;P=br.dot(h,br.sub(y,br.dot(S,Ec(O,y,{regularize:!0})))),E=br.dot(h,br.sub(x,br.dot(S,Ec(O,x,{regularize:!0}))))}else P=br.dot(h,y),E=br.dot(h,x);let T=p,M=!1;for(;f<i&&!m&&!M;){f+=1;let O=br.add(E,br.diag(_g(d,u.length))),S=br.neg(br.solve(O,P,!0));T=h0(p,S,o),m=br.all(br.eq(T,p));let C;if(g){let L=br.transpose(Cg(a,T)),Z=Rg(L);C={Jv:L,F:Z};let w=Du(e,T),z=br.neg(Ec(Z,w,{regularize:!0}));T=h0(T,z,s)}let A=vu(e,T);M=A<b,M?(p=T,b=A,g=C,d*=l):(d=Math.max(d,1e-64),d*=c)}}return{solution:p,MSE:b}}var x0=[18.9,.105,.0113,.089,4.414,.373,.06,.149,1.84,9.26,5,.7,.2,1.13,2.61,1,.007,30,120,1500,4e-4,7.23,-1,-.0081,-.03,-28.6,-1.71,-.4,-6.94,-.777,-500],VB=function(e){let t=e*503%x0.length;return x0[t]},GB=function(e){let t=[];for(let r=0;r<x0.length;r++){let n=[];for(let i=0;i<e;i++)r===0&&e!==1?n[i]=0:r===1&&e!==1?n[i]=1:n[i]=VB(r*e+i);t.push(n)}return t},IN=function(e,t,r,n,i){let s=[];for(let a of r)s.push({soln:b0(e,t,a,i),initialGuess:a});s.sort(function(a,u){return isNaN(a.soln.MSE)?1:isNaN(u.soln.MSE)?-1:a.soln.MSE-u.soln.MSE});let o=[];for(let a=0;a<n;a++)o.push(s[a].initialGuess);return o};function BB(e,t,r,n){if(!t||t.type!==\"known\")return e;let i=t.bounds;return i[0]===-1/0&&i[1]===1/0?e:i[0]===-1/0?i[1]-Math.exp(-e):i[1]===1/0?i[0]+Math.exp(e):r/(n-1)*i[1]+(n-1-r)/(n-1)*i[0]}var EN=[3,5,7,11,13,17,19];function zB(e,t){let r=[];for(let i=0;i<e.length;i++){let s=e[i],o=[];for(let a=0;a<s.length;a++){var n=EN[a%EN.length]*i%e.length;o.push(BB(s[a],t[a],n,e.length))}r.push(o)}return r}function MN(e,t,r){r||(r={});let{linearSubset:n,bounds:i,preferredInitialGuess:s}=r,o=GB(t.length);i&&(o=zB(o,i));let a=IN(e,t,o,5,{maxIterations:3,linearSubset:n}),u=IN(e,t,a,1,{maxIterations:60,linearSubset:n}),c=b0(e,t,u[0],{maxIterations:250,linearSubset:n});if(!s)return c;let l=b0(e,t,s,{maxIterations:100,linearSubset:n});return isFinite(l.MSE)&&(l.MSE<c.MSE||Zn(l.MSE,c.MSE,8))?l:c}function E0(e){return{chunk:e,isLazy:!0}}function DN(e){return e.slice()}function wg(e){if(!e.isLazy)return e;let t=e.chunk.copy();return t.reopenFinalBlock(),{chunk:t,forwardParameterMap:DN,reverseParameterMap:DN,isLazy:!1,valueMap:XB(e.chunk.instructionsLength()),replacementMask:Rl(e.chunk.argNames.length)}}function vN(e){let{chunk:t,forwardParameterMap:r,reverseParameterMap:n,isLazy:i,valueMap:s,replacementMask:o,didShiftScale:a}=e;return{chunk:t.copy(),forwardParameterMap:r,reverseParameterMap:n,isLazy:i,valueMap:s.slice(),replacementMask:o.slice(),didShiftScale:a}}function HB(e){var t=1/0,r=-1/0,n=e.length;for(let i of e)t=Math.min(t,i),r=Math.max(r,i);return{min:t,max:r,length:n}}function RN(e){let t=e.getInstruction(e.getReturnIndex());if(t.type!==48)return;let r=t.args[0],n=e.getReturnIndex()-r,i=e.getInstruction(r);if(i.args.length!==2)return;let s=i.args[0],o=i.args[n],a=[],u=[];a.push(s),u.push({min:1,max:ro(e,e.getReturnIndex(),\"Programming error: cannot optimize regression on non-constant-length list\"),length:ro(e,e.getReturnIndex(),\"Programming error: cannot optimize regression on non-constant-length list\")});let c=!1,l=!1;for(let b=s+1;b<=o;b++){let y=e.getInstruction(b);if(y.type===39||y.type===41||y.type===40){if(y.args[1]!==s)continue;let h=y.args[0];if(e.getInstruction(h).valueType!==ie||!vt(e.getInstruction(h)))continue;let x=rr(e,h),P=HB(x);if(!isFinite(P.min)||!isFinite(P.max))continue;a.push(b),u.push(P)}else if(y.type===37)y.symbol===\"exp\"?l=!0:SN(y)&&(c=!0);else if(y.type===12||y.type===13)l=!0;else if(pi(y)||pn(y))return}if(a.length===0||!l&&!c)return;let p=[];for(let b=0;b<=o;b++){let y=a.indexOf(b);if(y!==-1){let h=Rl(a.length);h[y]=!0,p.push(h)}else p.push(Lg(e,p,a.length,b))}let f=[];for(let b=0;b<=e.getReturnIndex();b++)if(e.getInstruction(b).type===2){let h=Rl(e.argNames.length);h[b]=!0,f.push(h)}else f.push(Lg(e,f,e.argNames.length,b));let d={listAccessDependencyTable:p,listAccesses:a,listStatisticsTable:u},g;for(let b=s+1;b<=e.getReturnIndex();b++){let y=e.getInstruction(b);switch(y.type){case 37:{if(y.symbol===\"exp\"){let z=y.args[0],F=M0(d,z);if(F===void 0){wa(e,f,g,b);break}let{listStatistics:X,listAccessIndex:ee}=F,re=Tf(E0(e),b,z,ee,X);re?g=[re]:wa(e,f,g,b)}break}case 12:case 13:{let[z,F]=y.args,X=M0(d,F);if(X===void 0||ON(d,z)){wa(e,f,g,b);break}let{listStatistics:ee,listAccessIndex:re}=X,Oe=qB(E0(e),b,re,ee);Oe?g=[Oe]:wa(e,f,g,b);break}case 10:if(g&&g.length>1){wa(e,f,g,b);break}let h=g&&g.length>0?g[0]:E0(e),[x,P]=y.args,E=h.isLazy?x:h.valueMap[x],T=h.isLazy?P:h.valueMap[P],M=h.chunk.getInstruction(E),O=h.chunk.getInstruction(T),S,C,A;if(M.type===37)S=x,A=M,C=P;else if(O.type===37)S=P,A=O,C=x;else{wa(e,f,g,b);break}let L=M0(d,S);if(L===void 0||ON(d,C)){wa(e,f,g,b);break}let{listAccessIndex:Z,listStatistics:w}=L;if(A.symbol===\"exp\"){let z=kB(h,b,C,S,Z,w);if(z){g=z;break}}else if(SN(A)){let z=UB(h,b,C,S,Z);if(z){g=[z];break}}wa(e,f,g,b);break;default:{wa(e,f,g,b);break}}}if(g===void 0||g.length===0)return;let m=[];for(let b of g)m.push({chunk:b.chunk.close(),forwardParameterMap:b.forwardParameterMap,reverseParameterMap:b.reverseParameterMap});return m}function wa(e,t,r,n){if(r===void 0)return;let i=e.getInstruction(n);if(Me(i))for(let s of r)s.valueMap[n]=n;else for(let s of r){let{chunk:o,valueMap:a}=s,u=[],c=0;for(let l of i.args){if(a[l]!==l){if(c+=1,c>1){r.length=0;return}}else{let p=t[l];for(let f=0;f<p.length;f++)if(p[f]&&s.replacementMask[f]){r.length=0;return}}u.push(a[l])}a[n]=c>0?gr(o,i,u):n}}function M0(e,t){let{listAccessDependencyTable:r,listAccesses:n,listStatisticsTable:i}=e,s,o=r[t];for(let a=0;a<o.length;a++)if(o[a]){if(s)return;s={listAccessIndex:n[a],listStatistics:i[a]}}return s}function ON(e,t){let{listAccessDependencyTable:r}=e,n=r[t];for(let i of n)if(i)return!0;return!1}function D0(e,t){let r=[];for(let s=0;s<=t;s++)if(e.getInstruction(s).type===2){let a=Rl(e.argNames.length);a[s]=!0,r.push(a)}else r.push(Lg(e,r,e.argNames.length,s));let n,i=r[t];for(let s=0;s<i.length;s++)if(i[s]){if(n!==void 0)return;n=s}return n}function UB(e,t,r,n,i){let s=e.chunk,o=D0(s,r);if(o===void 0)return;let a=v0(e,r,o);if(a===void 0)return;let u=s.getInstruction(n),c=u.args[0];if(a=NN(a,c,i),a===void 0)return;let{chunk:l,valueMap:p}=a,f=l.getInstruction(p[c]);if(f.type!==8)return;let d=f.args[1],g=l.getInstruction(f.args[0]);if(g.type!==10)return;let[m,b]=g.args,y=o,h=d,x=m,P=b,E=l.Multiply([x,P]),T=l.SyntheticNativeFunction(\"cos\",[E]),M=l.SyntheticNativeFunction(\"sin\",[E]),O=u.symbol===\"sin\"?l.Add([l.Multiply([y,M]),l.Multiply([h,T])]):l.Subtract([l.Multiply([y,T]),l.Multiply([h,M])]);p[t]=O;function S(L){let Z=a.forwardParameterMap(L),w=Z[o],z=Z[d],F=w*Math.cos(z),X=w*Math.sin(z);return Z[o]=F,Z[d]=X,Z}function C(L){let Z=L.slice(),w=L[o],z=L[d],F=so(w,z),X=Math.atan2(z,w);return Z[o]=F,Z[d]=X,a.reverseParameterMap(Z)}let A=a.replacementMask.slice();return A[o]=!0,A[m]=!0,A[d]=!0,{chunk:l,forwardParameterMap:S,reverseParameterMap:C,valueMap:p,replacementMask:A,isLazy:!1}}function qB(e,t,r,n){let i=e.chunk,s=i.getInstruction(t),[o,a]=s.args,u=i.getInstruction(o);if(u.type===1&&u.valueType===I&&k(u.value)>0){let h=wg(e),{chunk:x,valueMap:P}=h,E=x.Multiply([x.SyntheticNativeFunction(\"ln\",[P[o]]),P[a]]);return P[a]=E,P[t]=x.SyntheticNativeFunction(\"exp\",[E]),Tf(h,t,a,r,n)||h}let c=D0(i,o);if(c===void 0)return;let l=v0(e,o,c);if(l===void 0)return;let{chunk:p,valueMap:f}=l,d=p.Multiply([f[o],f[a]]);f[a]=d,f[t]=p.SyntheticNativeFunction(\"exp\",[d]);function g(h){let x=l.forwardParameterMap(h),P=x[c],E=Math.log(P);return x[c]=E,x}function m(h){let x=h.slice(),P=x[c],E=Math.exp(P);return x[c]=E,l.reverseParameterMap(x)}let b=l.replacementMask.slice();b[c]=!0;let y={chunk:p,forwardParameterMap:g,reverseParameterMap:m,isLazy:!1,valueMap:f,replacementMask:b};return Tf(y,t,a,r,n)||y}function kB(e,t,r,n,i,s){if(!e.isLazy&&e.didShiftScale)return;let o=e.isLazy?e:vN(e),a=e.chunk,u=D0(a,r);if(u===void 0)return;let c=v0(e,r,u);if(c===void 0)return;let{chunk:l,valueMap:p}=c,f=l.getInstruction(p[n]).args[0],d=l.Add([f,p[r]]);p[r]=d,p[t]=l.SyntheticNativeFunction(\"exp\",[d]);function g(T){let M=c.forwardParameterMap(T),O=M[u],S=Math.log(O);return M[u]=S,M}function m(T){let M=T.slice(),O=M[u],S=Math.exp(O);return M[u]=S,c.reverseParameterMap(M)}function b(T){let M=c.forwardParameterMap(T),O=M[u],S=Math.log(-O);return M[u]=S,M}function y(T){let M=T.slice(),O=M[u],S=-Math.exp(O);return M[u]=S,c.reverseParameterMap(M)}let h=c.replacementMask.slice();h[u]=!0;let x=wg(o);x.valueMap[t]=x.chunk.Multiply([x.valueMap[r],x.valueMap[n]]);let P={chunk:l,forwardParameterMap:g,reverseParameterMap:m,isLazy:!1,valueMap:p,replacementMask:h},E=vN(P);return E.forwardParameterMap=b,E.reverseParameterMap=y,P=Tf(P,t,r,i,s)||P,E=Tf(E,t,r,i,s)||E,E.valueMap[t]=E.chunk.Negative([E.valueMap[t]]),[x,P,E]}function Tf(e,t,r,n,i){let s=YB(e,r,n,i);if(s!==void 0)return s.valueMap[t]=s.chunk.SyntheticNativeFunction(\"exp\",[s.valueMap[r]]),s}function YB(e,t,r,n){let i=NN(e,t,r);if(i===void 0)return;let{chunk:s,valueMap:o}=i,a=s.getInstruction(o[t]);if(a.type!==8)return;let u=a.args[1],c=s.getInstruction(a.args[0]);if(c.type!==10)return;let[l,p]=c.args,{min:f,max:d}=n,g=d-f,m=.5*(d+f),b=s.Divide([s.Subtract([p,s.Constant(m)]),s.Constant(g)]),y=s.Add([s.Multiply([l,b]),u]);o[t]=y;function h(P){let E=i.forwardParameterMap(P),T=E[l],M=E[u],O=T*g,S=M+m*T;return E[l]=O,E[u]=S,E}function x(P){let E=P.slice(),T=P[l],M=P[u],O=T/g,S=M-O*m;return E[l]=O,E[u]=S,i.reverseParameterMap(E)}return{chunk:s,forwardParameterMap:h,reverseParameterMap:x,isLazy:!1,valueMap:o,replacementMask:i.replacementMask,didShiftScale:!0}}function v0(e,t,r){let n=e.chunk,i=Ni(n,r,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Mr(i,t)!==1)return;let s=Ss(i),[o,a]=_r(s,t);if(a===void 0)return;let u=s.newChunk.getInstruction(o);if(u.type!==1||u.valueType!==I)return;let c=s.newChunk.getInstruction(a);if(c.type!==1||c.valueType!==I)return;let l=wg(e),{chunk:p,valueMap:f}=l,d=k(u.value),g=k(c.value);f[t]=r;function m(h){let x=l.forwardParameterMap(h),P=x[r],E=d+g*P;return x[r]=E,x}function b(h){let x=h.slice(),E=(x[r]-d)/g;return x[r]=E,l.reverseParameterMap(x)}let y=l.replacementMask.slice();return y[r]=!0,{chunk:p,forwardParameterMap:m,reverseParameterMap:b,isLazy:!1,valueMap:f,replacementMask:y}}function NN(e,t,r){let n=e.chunk,i=e.isLazy?t:e.valueMap[t],s=Ni(n,r,{allowRestriction:!1,allowClosedBlockReferences:!0});if(Mr(s,i)!==1)return;e.isLazy&&(s=Ni(n.copy().reopenFinalBlock(),r,{allowRestriction:!1,allowClosedBlockReferences:!1}));let o=Ss(s),[a,u]=_r(o,i);if(u===void 0)return;let c=o.newChunk,l=Math.max(u,a),p=[];for(let $=0;$<=l;$++)if(c.getInstruction($).type===2){let xe=Rl(c.argNames.length);xe[$]=!0,p.push(xe)}else p.push(Lg(c,p,c.argNames.length,$));let f,d;for(let $=0;$<n.argNames.length;$++)if(p[u][$])if(f===void 0)f=$;else return;else if(p[a][$])if(d===void 0)d=$;else return;if(f===void 0||d===void 0)return;let g=Ni(c,f,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Mr(g,u)!==1)return;let m=Ni(c,d,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Mr(m,a)!==1)return;let b=Ss(g),y=Ss(m),[h,x]=_r(b,u),P=b.newChunk.getInstruction(h);if(P.type!==1||P.valueType!==I)return;let E=b.newChunk.getInstruction(x);if(E.type!==1||E.valueType!==I)return;let T=wg(e),{chunk:M,valueMap:O}=T,S=M.Add([M.Multiply([f,r]),d]);O[t]=S;let C=c.copy();C.List([u,a]);let A=C.close().getCompiledFunction().fn;function L($){let Ze=T.forwardParameterMap($),[xe,se]=A.apply(null,Ze);return Ze[f]=xe,Ze[d]=se,Ze}let Z=k(P.value),w=k(E.value),[z,F]=_r(y,a),X=y.newChunk.copy();X.List([z,F]);let ee=X.close().getCompiledFunction().fn;function re($){let Ze=$.slice(),xe=$[f],se=$[d],_e=(xe-Z)/w,Re=$.slice();Re[f]=_e,Re.splice(d,1);let[K,V]=ee.apply(null,Re),ce=(se-K)/V;return Ze[f]=_e,Ze[d]=ce,T.reverseParameterMap(Ze)}let Oe=T.replacementMask.slice();return Oe[f]=!0,Oe[d]=!0,{chunk:M,forwardParameterMap:L,reverseParameterMap:re,isLazy:!1,valueMap:O,replacementMask:Oe}}function Lg(e,t,r,n){let i=e.getInstruction(n),s=Rl(r);if(Me(i))return s;for(let o of i.args){let a=t[o];for(let u=0;u<a.length;u++)s[u]=s[u]||a[u]}return s}function Rl(e){let t=[];for(let r=0;r<e;r++)t.push(!1);return t}function XB(e){let t=[];for(let r=0;r<e;r++)t.push(r);return t}function SN(e){return e.type===37&&(e.symbol===\"sin\"||e.symbol===\"cos\")}function st(e,t){switch(e){case I:case ge:return new D.Constant(t);case ot:return new D.Seed(t);case N:return new D.ParenSeq([st(I,t[0]),st(I,t[1])]);case H:return new D.ParenSeq([st(I,t[0]),st(I,t[1]),st(I,t[2])]);case xt:return new D.FunctionCall(\"segment\",[st(H,t[0]),st(H,t[1])]);case ve:return new D.FunctionCall(\"vector\",[st(H,t[0]),st(H,t[1])]);case Ir:return new D.FunctionCall(\"triangle\",[st(H,t[0]),st(H,t[1]),st(H,t[2])]);case Ar:return new D.FunctionCall(\"sphere\",[st(H,t[0]),st(I,t[1])]);case Gt:return new D.FunctionCall(\"rgb\",[st(I,t[0]),st(I,t[1]),st(I,t[2])]);case we:return new D.FunctionCall(\"polygon\",[st(ft,t)]);case De:return new D.FunctionCall(\"segment\",[st(N,t[0]),st(N,t[1])]);case ye:return new D.FunctionCall(\"line\",[st(N,t[0]),st(N,t[1])]);case Le:return new D.FunctionCall(\"ray\",[st(N,t[0]),st(N,t[1])]);case he:return new D.FunctionCall(\"mathVector\",[st(N,t[0]),st(N,t[1])]);case me:return new D.FunctionCall(\"circle\",[st(N,t[0]),st(I,t[1])]);case fe:return new D.FunctionCall(\"arc\",[st(N,t[0]),st(N,t[1]),st(N,t[2])]);case Ne:return new D.FunctionCall(\"angle\",[st(N,t[0]),st(I,t[1]),st(I,t[2])]);case Te:return new D.FunctionCall(\"directedangle\",[st(N,t[0]),st(I,t[1]),st(I,t[2])]);case Be:case ie:case sn:case ft:case Wr:case Nr:case Tr:case qr:case kr:case Yr:case ar:case ur:case Hr:case Ur:case on:case an:case cn:case un:case _n:case ui:{let n=[],i=We(e);for(let s of t)n.push(st(i,s));return new D.List(n)}case Vt:case at:case er:case Pr:case Ke:case He:case Cn:case Zs:case wr:case Fr:case Jr:case jr:case En:case Mn:case Dn:case vn:case Ot:case kn:throw new Error(`Programming error: cannot create parse node from valueType: ${Xn(e)}`);case lr:return new D.FunctionCall(\"tone\",[st(I,t[0]),st(I,t[1])]);default:let r=e;throw new Error(`Programming error: unexpected valueType: ${Xn(r)}`)}}function VN(e,t){try{return ZB(e,t)}catch(r){return r instanceof D.Error?r:te(r)}}function ZB(e,t){let{policy:r,frame:n,exportFrame:i,lastExportFrame:s,priorAnalysis:o}=e,a=t._lhs.buildIRExpression(r,n,{coerceToNumber:!0}),u=t._rhs.buildIRExpression(r,n,{coerceToNumber:!0});if(a.isError)throw a;if(u.isError)throw u;if(a.valueType!==I&&a.valueType!==ie||u.valueType!==I&&u.valueType!==ie)throw Xh([le(a.valueType),le(u.valueType)]);let c=t._difference.buildIRExpression(r,n,{wrapInList:!0,coerceToNumber:!0});if(c.isError)throw c;for(let E of c.getDependencies())if(!r.validRegressionParameter(E))throw hx(E);let l=WB(c.getDependencies(),t.userData.regressionParameters,s),{parameters:p,residuals:f,isLinear:d,parameterWarning:g}=FN(l,c),m={policy:r,frame:n},b=AN(m,t,p),y=QB(t,a,b),h;if(t.userData.isLogModeRegression&&(y===si.LOGLIN||y===si.LOGLOG)){let E=t._logDifference.buildIRExpression(r,n,{wrapInList:!0,coerceToNumber:!0});if(E.isError)throw E;let T=t._logLhs.buildIRExpression(r,n,{wrapInList:!0,coerceToNumber:!0});if(T.isError)throw T;({parameters:p,isLinear:d,parameterWarning:g}=FN(l,E)),b=AN(m,t,p),f=wN(m,t._difference,p);let M=wN(m,t._logDifference,p);h=LN(t,T,b,M,t.userData.isLogModeRegression,y)}else h=LN(t,a,b,f,t.userData.isLogModeRegression,y);let x=$B(t,i),P=jB(t,x,o,r);return t.userData.residualVariable=Qr(x),new D.OptimizedRegression(p,st(ie,f),h,b.substituted,{isModelValid:b.isValid,residualVariable:x,residualSuggestionId:P,shouldSuggestLogMode:y!==si.NONE,isLinear:d,parameterWarning:g})}function $B(e,t){if(e.userData&&e.userData.residualVariable){let s=Co(e.userData.residualVariable);if(!t[s])return s}let r=e.getDependencies().filter(s=>s[0]!==\"_\"),n;for(let s of r){let o=s.match(/_(.*)/);if(o&&(n=\"e_\"+o[1],!t[n]))return n}let i=1;for(;;){if(n=\"e_\"+i,!t[n])return n;i++}}function AN({policy:e,frame:t},r,n){let i=r._rhs.getDependencies(),s,o;for(let p of i){if(n.hasOwnProperty(p))continue;let f=t[p];if(!f||(f.type===\"Assignment\"&&(f=f._expression),!f.buildIRExpression))continue;let d=f.buildIRExpression(e,t,{coerceToNumber:!0});if(!d.isError&&d.valueType===ie){if(s!==void 0){s=void 0,o=void 0;break}d.getDependencies().length===0&&(s=p,o=d)}}let a=Object.create(t);s!==void 0&&(a[s]=void 0);let u=r._rhs.buildIRExpression(e,a,{coerceToNumber:!0}),c=Object.create(a);for(let p in n)c[p]=n[p];let l=r._rhs.buildIRExpression(e,c,{coerceToNumber:!0});return o?{node:u,substituted:l,listNode:o,isValid:!0}:{node:u,substituted:l,listNode:o,isValid:!1}}function WB(e,t,r){let n=[];t||(t={}),r||(r={});for(let i of e){let s=Qr(i);r[i]&&isFinite(r[i].asValue())?n.push(+r[i].asValue()):t.hasOwnProperty(s)&&isFinite(+t[s])?n.push(+t[s]):n.push(1)}return n}function CN(e,t){let r=t.getDependencies(),n=t.getCompiledFunction(r).fn;if(r.length){let i=t.findLinearSubset(r),s=i.every(a=>a),o=[];for(let a of r)o.push(t.takeDerivative(a).getCompiledFunction(r).fn);if(s){let a=r.map(()=>Ve(0,1)),u=t.interpretWithParameters(a),c=[];for(let d of r)c.push(t.takeDerivative(d).interpretWithParameters(a));let l=T0(u,c);if(l){let d=t.interpretWithParameters(l);return{solution:l,residuals:d,MSE:S0(d),isLinear:s}}let{solution:p,MSE:f}=P0(n,I0(n,o));return{solution:p,residuals:n.apply(void 0,p),MSE:f,isLinear:s}}else{let a=[];for(let p of r)a.push(t.boundDomain(p));let u={linearSubset:i,bounds:a,preferredInitialGuess:e},{solution:c,MSE:l}=P0(n,MN(n,o,u));return{solution:c,residuals:n.apply(void 0,c),MSE:l,isLinear:s}}}else return{solution:[],residuals:t.interpretWithParameters([]),MSE:vu(n,[]),isLinear:!0}}function _N(e,t){let r={},n=t.getDependencies();for(let i=0;i<n.length;i++){let s=new D.RegressionParameter(e[i]);r[n[i]]=s}return r}function LN(e,t,r,n,i,s){let o=S0(n);if(!isFinite(o))throw bx();if(t.getDependencies().length>0)return{RMSE:Math.sqrt(o)};let a=W(t.valueType)?Fp(t.asValue()):0;if(t.getDependencies().length||!isFinite(a)||a<=0||!e.isLhsSimple)return{RMSE:Math.sqrt(o)};{let u=1-o/a;if(r.isValid){let c=[],l=[],p=i&&(s===si.LINLOG||s===si.LOGLOG);D.List.eachArgs([r.listNode,t],function(d){let g=d[0].isConstant?d[0].asCompilerValue():NaN,m=d[1].isConstant?d[1].asCompilerValue():NaN;c.push(p?Math.log(k(g)):g),l.push(m)});let f=Km(c.map(d=>k(d)),l.map(d=>k(d)));if(Zn(JB(c,l).MSE,o,8))return{r:f,rsquared:f*f}}return{Rsquared:u}}}function JB(e,t){let r=t,n=[e.map(a=>Ki(a)),e.map(()=>Ve(-1,1))],i=T0(r,n);if(i){let[a,u]=i,c=[];for(let l=0;l<t.length;l++)c.push(Js(t[l],Ro(No(a,e[l]),u)));return{solution:i,MSE:S0(c)}}function s(a,u){let c=[];for(let l=0;l<e.length;l++)c.push(k(t[l])-(a*k(e[l])+u));return c}return I0(s,[function(){return e.map(function(a){return-k(a)})},function(){return e.map(function(){return-1})}])}function jB(e,t,r,n){let i=e._rhs.getDependencies(),s;for(let o in r){if(!r.hasOwnProperty(o))continue;let a=r[o].concreteTree;if(!Cs(a)||!a.columns[0])continue;let u=r[o].rawTree.columns;if(!u||!u.length)continue;let c=u[0].getExports(n);if(c.length===1&&i.indexOf(c[0])!==-1){for(let l=1;l<u.length;l++)if(u[l].getDependencies().indexOf(t)!==-1)return;s=s||o}}return s||void 0}function O0(e,t){let r=e.length,n=e[0],i=t[0],s=e[r-1],o=t[r-1];if(!isFinite(n)||!isFinite(s)||!isFinite(i)||!isFinite(o)||o-i===0)return!1;let a=s-n;if(a===0)return!1;for(let u=1;u<r-1;u++){let c=e[u],l=t[u],p=(o*(c-n)+i*(s-c))/a;if(!Zn(l,p,5))return!1}return!0}var si={NONE:0,LOGLIN:1,LOGLOG:2,LINLOG:3};function QB(e,t,r){if(!e.isLhsSimple||!r.isValid)return si.NONE;let n=r.substituted;if(n.isError||n.valueType!==I)return si.NONE;let i=n.getDependencies();if(i.length!==1||isFinite(r.node.polynomialOrder(i[0])))return si.NONE;let s=n.getCompiledFunction(i).fn,o=r.listNode;if(n.valueType!==I)return si.NONE;let a=o.mapElements(f=>+f.asValue());if(a.length<3)return si.NONE;a.sort(function(f,d){return f-d});let u=a.map(s),c=u.map(Math.log),l=a.map(Math.log),p=!0;return D.List.wrap(t).eachElement(f=>{isFinite(Math.log(+f.asValue()))||(p=!1)}),O0(a,c)&&p?si.LOGLIN:O0(l,c)&&p?si.LOGLOG:O0(l,u)?si.LINLOG:si.NONE}function wN({policy:e,frame:t},r,n){let i=Object.create(t);for(let a in n)n.hasOwnProperty(a)&&(i[a]=n[a]);let s=Pl({policy:e,frame:i,wrapInList:!0},r),o=s.getError();if(o)throw o;return s.asCompilerValue()}function S0(e){let t=0;for(let r of e){let n=k(r);t+=n*n}return t/e.length}function FN(e,t){let r,n,i=t._chunk;if(i&&(n=RN(i)),!n||n.length===0)return t=t.deriveRegressionRestrictions(),r=CN(e,t),{parameters:_N(r.solution,t),residuals:r.residuals,isLinear:r.isLinear,parameterWarning:!1};let s=t.getDependencies(),o=t.getCompiledFunction(s).fn,a=1/0,u={},c,l=!1;for(let p of n){let f=new cr(p.chunk);if(f=f.deriveRegressionRestrictions(),r=CN(p.forwardParameterMap(e),f),r.MSE<a){let d=p.reverseParameterMap(r.solution.map(m=>k(m))),g=vu(o,d);if(u&&(!isFinite(g)||g>=a)){isFinite(g)||(l=!0);continue}a=r.MSE,u=_N(d,t),c=o.apply(void 0,d)}}return{parameters:u,residuals:c,isLinear:!1,parameterWarning:l}}D.Base.prototype.analyze=function(e,t){return zn(this)?Hn(e,t,this):new Y(e,t,this,this.tryGetConcreteTree(e,t))};function Fg(e,t,r,n){if(n.isError)return new Y(e,t,r,n);if(!e.areAllScalesLinear()&&!Cl(n.valueType)){let u=Ql(le(n.valueType));return u.setCursorContext(n.getCursorContext()),new Y(e,t,r,u)}var i=hs(e,n),s=n.getDependencies();let o;switch(n.valueType){case at:case Pr:case Be:{o=n;break}case Gt:case Wr:case De:case Tr:case me:case Hr:case fe:case Ur:case ye:case qr:case Le:case kr:case he:case Yr:case Ne:case ar:case Te:case ur:case He:case Cn:case Ke:case we:case Nr:case xt:case an:case ve:case cn:case Ir:case un:case Ar:case _n:case lr:case ui:i.length?o=tr(r.getSliderVariables(e,n)).setDependencies(i):o=n;break;case N:case H:case ft:case on:if(i.length)if(e.validParametricVariables(i))o=n;else{var a=r.getSliderVariables(e,n);o=tr(a).setDependencies(a)}else o=n;break;case wr:case Jr:case Fr:case jr:case En:case Dn:case Mn:case vn:{i.length===0?o=n:o=tr(r.getSliderVariables(e,n)).setDependencies(i);break}case I:case ie:i.length===0?o=n:i.length<=(e.is3dPolicy()?2:1)?e.is3dPolicy()&&s.length>i.length&&!e.validImplicitVariables(s)?o=tr(r.getSliderVariables(e,n)).setDependencies(s):e.validExpressionVariables(i)?o=n:o=$d(e.implicitDependency(i)).setDependencies(i):e.validImplicitVariables(i)?o=$d().setDependencies(i):o=tr(r.getSliderVariables(e,n)).setDependencies(s);break;default:o=te(`Programming error: unexpected value type ${n.valueType}`)}return po(o)&&o.setCursorContext(n.getCursorContext()),o=Sl(e,r,o),new Y(e,t,r,o)}function GN(e){return new D.FunctionCall(\"pdf\",[e,new D.Identifier(\"x\")])}D.Identifier.prototype.analyze=function(e,t){let r=this.tryGetConcreteTree(e,t,{coerceToNumber:!0}),n=Fg(e,t,this,r);return zn(this)&&!N0(n)?Hn(e,t,this):n};D.FunctionCall.prototype.analyze=function(e,t,r){var n;Wy[this._symbol]&&lc(t,this).length===0&&!e.is3dPolicy()?n=GN(this).tryGetConcreteTree(e,t):n=this.tryGetConcreteTree(e,t);var i=Fg(e,t,this,n);if(zn(this)&&!N0(i))return Hn(e,t,this);var s=this.getMoveStrategy(e,t,n,r,this.userData);if(s){var o=this.getDefaultDragMode(s),a=n.asCompilerValue(),u=[new D.Constant(a[0]),new D.Constant(a[1])];return new Y(e,t,this,new D.MovablePoint(u,s,o))}return i};D.Expression.prototype.analyze=function(e,t){var r=Fg(e,t,this,this.tryGetConcreteTree(e,t));return zn(this)&&!N0(r)?Hn(e,t,this):r};D.FunctionDefinition.prototype.analyze=function(e,t){if(zn(this))return Hn(e,t,this);if(Xe[this._symbol])return this.asEquation().analyze(e,t);var r=this._symbol.split(\"_\")[0];if(Xe[r]&&Xe[r].isFunction)return new Y(e,t,this,qc(this._symbol,r));var n=this.tryGetConcreteTree(e,t);if(n instanceof D.Error&&!n.blocksExport&&this._argSymbols.length===1){let u=Object.create(t);u[this._argSymbols[0]]=new Tt(\"identityTransformation\");let c=this._expression.tryGetConcreteTree(e,u);if(!(c instanceof D.Error))return new Y(e,t,this,c)}if(n.isError)return new Y(e,t,this,n);var i=this._argSymbols,s=n.getDependencies();if(s.indexOf(this._symbol)!==-1)return new Y(e,t,this,op(this._symbol));var o=s.filter(function(u){return i.indexOf(u)===-1});if(e.unplottablePolarFunction(this._symbol,s))return new Y(e,t,this,cx());if(e.is3dPolicy()&&e.assignmentForbidden(this._symbol))return new Y(e,t,this,zx(this._symbol));if(o.some(function(u){return e.assignmentForbidden(u)}))return new Y(e,t,this,ap(o,this._symbol,i).setDependencies(s));if(o.length){var a=this.getSliderVariables(e,n);return new Y(e,t,this,tr(a).setDependencies(a))}return!e.areAllScalesLinear()&&!Cl(n.valueType)?new Y(e,t,this,Ql(le(n.valueType))):(n=Sl(e,this,n),new Y(e,t,this,n))};D.Assignment.prototype.analyze=function(e,t,r){if(zn(this))return Hn(e,t,this);var n=this._symbol;if(!e.validLHS(n))return new Y(e,t,this,ux(n));if(Xe[n])return this.asEquation().analyze(e,t);var i;if(this._expression instanceof D.FunctionCall&&Wy[this._expression._symbol]&&lc(t,this).length===0&&!e.is3dPolicy())i=GN(this._expression).tryGetConcreteTree(e,t);else{var s=Object.create(t);s[n]=e.validSolvedVariable(n)?void 0:Uu(),i=this.tryGetConcreteTree(e,s)}if(i.isError)return new Y(e,t,this,i);if(!e.areAllScalesLinear()&&!Cl(i.valueType))return new Y(e,t,this,Ql(le(i.valueType)));if(this.isEquation(e,i))return this.asEquation().analyze(e,t);let o=i.valueType===Gt||i.valueType===Wr;if(e.assignmentForbidden(n)&&o){let g=ox(n).allowExport().setDependencies([n]);return new Y(e,t,this,g)}let a=i.getDependencies(),u=hs(e,i),c=u.includes(\"x\")||u.includes(\"y\"),l=u.includes(\"r\")||u.includes(\"theta\");if(n===\"r\"&&a.includes(\"phi\")){let g=u.includes(\"z\")?qd():nx();return new Y(e,t,this,g)}if(n===\"rho\"&&u.includes(\"z\")){let g=a.includes(\"phi\")?qd():ix();return new Y(e,t,this,g)}let p=this.getSliderVariables(e,i,a);if(e.tooManySliderVariables(a,p,o)||c&&l){let g=tr(p).allowExport().setDependencies(p);return new Y(e,t,this,g)}var f=this.getMoveStrategy(e,t,i,r,this.userData);if(f){var d=this.getDefaultDragMode(f);return i=new D.MovablePoint([i.elementAt(0),i.elementAt(1)],f,d),new Y(e,t,this,i)}return i=Sl(e,this,i),new Y(e,t,this,i)};D.CoordinateEquation.prototype.analyze=function(e,t){if(!e.validCoordinateEquationSymbol(this._concatenatedSymbol))return this.asEquation().analyze(e,t);if(zn(this))return Hn(e,t,this);let r=this.tryGetConcreteTree(e,t);return r=Sl(e,this,r),new Y(e,t,this,r)};D.Regression.prototype.analyze=function(e,t,r,n,i){if(zn(this))return Hn(e,t,this);var s={policy:e,frame:t,exportFrame:r,lastExportFrame:n,priorAnalysis:i};return new Y(e,t,this,VN(s,this))};function R0(e,t){var r=this.tryGetConcreteTree(e,t),n=r.getDependencies();return n.length?new Y(e,t,this,tr(this.getSliderVariables(e,r)).setDependencies(n)):new Y(e,t,this,this.tryGetConcreteTree(e,t))}D.Histogram.prototype.analyze=function(e,t){return zn(this)?Hn(e,t,this):e.areAllScalesLinear()?R0.call(this,e,t):new Y(e,t,this,Kh())};D.DotPlot.prototype.analyze=function(e,t){return zn(this)?Hn(e,t,this):e.areAllScalesLinear()?R0.call(this,e,t):new Y(e,t,this,eb())};D.BoxPlot.prototype.analyze=function(e,t){return zn(this)?Hn(e,t,this):e.areAllScalesLinear()?R0.call(this,e,t):new Y(e,t,this,tb())};function BN(e){return function(t,r){if(zn(this))return Hn(t,r,this);var n=this.tryGetConcreteTree(t,r),i=n.getDependencies();if(i.length)return new Y(t,r,this,tr(this.getSliderVariables(t,n)).setDependencies(i));var s=new Y(t,r,this,this.tryGetConcreteTree(t,r));if(!n.isError){s.evaluationState.expression_type=\"TTEST\";var o=n.args.map(function(a){return a.asValue()});s.evaluationState.ttest_results=e.apply(null,o)}return s}}D.TTest.prototype.analyze=BN(VP);D.IndependentTTest.prototype.analyze=BN(GP);D.Stats.prototype.analyze=function(e,t){if(zn(this))return Hn(e,t,this);var r=this.tryGetConcreteTree(e,t),n=r.getDependencies();if(n.length)return new Y(e,t,this,tr(this.getSliderVariables(e,r)).setDependencies(n));var i=new Y(e,t,this,this.tryGetConcreteTree(e,t));if(!r.isError){i.evaluationState.expression_type=\"STATS\";var s=r.args.map(function(o){return o.asValue()});i.evaluationState.stats_results=BP.apply(null,s)}return i};D.Equation.prototype.analyze=D.BaseComparator.prototype.analyze=function(e,t){if(zn(this))return Hn(e,t,this);var r=this.getOperator()!==\"=\";if(r&&!$i.plotInequalities)return new Y(e,t,this,kd());var n=eN({policy:e,frame:t},this.asComparator());if(n.isError)return new Y(e,t,this,n);let i=hs(e,n);if(n instanceof D.SolvedEquation&&i.length){var s=i.concat(n._symbol);if(!e.validImplicitVariables(s))return new Y(e,t,this,Uu().setDependencies(s))}return this.getGraphMode(e,n)===8&&!e.validImplicitVariables(i)?new Y(e,t,this,Uu().setDependencies(i)):(n=Sl(e,this,n),new Y(e,t,this,n))};D.DoubleInequality.prototype.analyze=function(e,t){if(zn(this))return Hn(e,t,this);if(!$i.plotInequalities)return new Y(e,t,this,kd());var r=this.tryGetConcreteTree(e,t);if(r.isError)return new Y(e,t,this,r);var n=r.getDependencies();return e.is3dPolicy()?new Y(e,t,this,Yd()):$n[this._operators[0]].direction!==$n[this._operators[1]].direction?new Y(e,t,this,mx()):e.validDoubleInequalitySymbol(r._symbol)?e.validDoubleInequalityVariables(n)?n.length>2?new Y(e,t,this,tr(this.getSliderVariables(e,r)).setDependencies(n)):r._expressions[0].getDependencies().indexOf(r._symbol)!==-1||r._expressions[1].getDependencies().indexOf(r._symbol)!==-1?new Y(e,t,this,Zd().setDependencies(n)):new Y(e,t,this,r):new Y(e,t,this,Xd().setDependencies(n)):new Y(e,t,this,Xd().setDependencies(n))};D.And.prototype.analyze=function(e,t){if(zn(this))return Hn(e,t,this);var r=this.tryGetConcreteTree(e,t);if(r.isError)return new Y(e,t,this,r);var n=r.getDependencies();return n.length?e.is3dPolicy()?new Y(e,t,this,Yd()):e.validDoubleInequalityVariables(n)?new Y(e,t,this,Zd().setDependencies(n)):new Y(e,t,this,tr(this.getSliderVariables(e,r)).setDependencies(n)):new Y(e,t,this,r)};D.ParenSeq.prototype.analyze=function(e,t,r){if(zn(this))return Hn(e,t,this);var n=this.tryGetConcreteTree(e,t);if(n.isError)return new Y(e,t,this,n);var i=this.getMoveStrategy(e,t,n,r,this.userData);if(i){var s=this.getDefaultDragMode(i),o=n.asCompilerValue(),a=[new D.Constant(o[0]),new D.Constant(o[1])];return new Y(e,t,this,new D.MovablePoint(a,i,s))}return Fg(e,t,this,n)};function KB(e,t){return e.filter(function(r){return!t[r]})}function e2(e){for(var t={},r=0;r<e.length;r++){var n=e[r];if(n instanceof Zu&&n.header instanceof D.Identifier){var i=n.header._symbol;t[i]===void 0&&(t[i]=0),t[i]+=1}}return t}D.Table.prototype.analyze=function(e,t){var r=Object.create(t),n=[],i=e2(this.columns),s;for(s=0;s<this.columns.length;s++){var o=this.columns[s];if(o instanceof Zu&&o.header instanceof D.Identifier){var a=o.header._symbol,u=r[a],c=i[a]>1;u&&u.isError&&(u.isTableCycleWithoutGlobalDefinition||u.isMultiplyDefinedByTables&&!c)&&(r[a]=void 0)}var l=o.analyze(e,r);if(s===0&&l.concreteTree.isIndependent){var p=l.concreteTree.getDependencies()[0];e.validFirstColumnVariable(p)||(l=new Y(e,t,o,gx()))}if(l.concreteTree.isIndependent)l.rawTree.exportToLocal(e,l.concreteTree,r);else if(!l.concreteTree.isError){var f=l.concreteTree.header.getDependencies(),d=KB(f,r);d.length&&(l=new Y(e,t,o,tr(d).setDependencies(d)))}n.push(l.concreteTree)}var g=1;for(s=0;s<n.length;s++)n[s].isError||(g=Math.max(n[s].values.length,g));for(s=0;s<n.length;s++)if(!n[s].isError&&n[s].header.isConstant){for(var m=[],b=0;b<g;b++)m.push(n[s].header);n[s]=new D.TableColumn(n[s].header,m)}var y=new D.Table(n),h=new Y(e,t,this,y);return h.evaluationState.is_graphable=!0,h};D.TableColumn.prototype.analyze=function(e,t){var r=this.header.tableError();if(r)return new Y(e,t,this,yx(r));var n=this.tryGetConcreteTree(e,t);if(n.isError)return new Y(e,t,this,n);if(n.header.isError)return new Y(e,t,this,n.header);if(n.values.isError)return new Y(e,t,this,n.values);for(var i=0;i<n.values.length;i++)if(!n.values[i].isError){var s=this.values[i]&&this.values[i].tableError();if(s){n.values[i]=Yc(s);continue}var o=n.values[i].getDependencies();o.length&&(n.values[i]=tr(o).setDependencies(o))}return new Y(e,t,this,n)};D.Image.prototype.analyze=function(e,t,r){var n=this.tryGetConcreteTree(e,t);if(n.radianAngle.isError||n.center.isError||n.width.isError||n.height.isError||n.opacity.isError)return new Y(e,t,this,n);var i=n.center.getDependencies(),s=n.radianAngle.getDependencies(),o=n.width.getDependencies(),a=n.height.getDependencies(),u=n.opacity.getDependencies();return i.length||s.length||o.length||a.length||u.length?new Y(e,t,this,new D.Image({center:i.length?tr(s).setDependencies(i):n.center,radianAngle:s.length?tr(s).setDependencies(s):n.radianAngle,width:o.length?tr(o).setDependencies(o):n.width,height:a.length?tr(a).setDependencies(a):n.height,opacity:u.length?tr(u).setDependencies(u):n.opacity})):(n.moveStrategy=this.getMoveStrategy(e,t,n,r,this.userData),new Y(e,t,this,n))};D.Slider.prototype.analyze=function(e,t){if(zn(this))return Hn(e,t,this);var r=this.tryGetConcreteTree(e,t),n=r.sliderInfo,i;if(n.missingVars.length){var s=Gl(n.missingVars);i=new Y(e,t,this,tr(e.sliderVariables(s)).setDependencies(s).allowExport())}else i=new Y(e,t,this,r);var o=i.evaluationState;if($i.sliders){o.assignment=n.exportedSymbol,o.slider_min_number=n.values.min,o.slider_max_number=n.values.max,o.slider_step_number=n.values.step,o.slider_min_valid=n.valids.min,o.slider_max_valid=n.valids.max,o.slider_step_valid=n.valids.step;var a=o.slider_min_valid&&o.slider_max_valid&&o.slider_step_valid;o.is_slider=!0,o.raw_slider_latex=this.getInputString(),o.is_slidable=a,o.is_animatable=o.is_slidable&&!o.is_graphable,n.errMsg&&(o.error=n.errMsg.getError())}return delete o.is_evaluable,delete o.zero_values,i};function zn(e){return\"latex\"in e.userData&&_o(e.userData.latex).slice(-1)===\"=\"}function Hn(e,t,r){return new Y(e,t,r,np(\"=\"))}function N0(e){return e.concreteTree.isConstant&&e.concreteTree.valueType===I}D.Base.prototype.analyzeFourFunction=function(e,t){var r=this.tryGetConcreteTree(e,t);return r.isError?new Y(e,t,this,r):new Y(e,t,this,te(`Unexpected node type ${this.type}`))};D.Expression.prototype.analyzeFourFunction=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return new Y(e,t,this,r);var n=r.getDependencies();if(n.length>0){var i=n[0],s,o=Xe[i];return o?s=o.isFunction?ss(i):qu(i):s=fp(i),new Y(e,t,this,s)}return new Y(e,t,this,r)};D.Assignment.prototype.analyzeFourFunction=function(e,t){return new Y(e,t,this,dp())};D.FunctionDefinition.prototype.analyzeFourFunction=function(e,t){return new Y(e,t,this,mp())};D.Equation.prototype.analyzeFourFunction=function(e,t){return new Y(e,t,this,ha())};function A0(e,t){return new Y(e,t,this,ku())}D.And.prototype.analyzeFourFunction=A0;D.DoubleInequality.prototype.analyzeFourFunction=A0;D.BaseComparator.prototype.analyzeFourFunction=A0;D.Regression.prototype.analyzeFourFunction=function(e,t){return new Y(e,t,this,Yu())};D.ParenSeq.prototype.analyzeFourFunction=function(e,t){return new Y(e,t,this,Xu())};D.Base.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);return r.isError?new Y(e,t,this,r):new Y(e,t,this,te(`Unexpected node type ${this.type}`))};D.Expression.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return new Y(e,t,this,r);var n=r.getDependencies();return n.length>0?new Y(e,t,this,tr(n)):new Y(e,t,this,r)};D.Assignment.prototype.analyzeScientific=function(e,t){var r=this._symbol;if(Xe[r])return new Y(e,t,this,qc(r));var n=Object.create(t);n[r]=ha();var i=this.tryGetConcreteTree(e,n);if(i.isError)return new Y(e,t,this,i);var s=i.getDependencies();return this.isEquation(e,i)?new Y(e,t,this,ha()):s.length>0?new Y(e,t,this,tr(s)):new Y(e,t,this,i)};D.FunctionDefinition.prototype.analyzeScientific=function(e,t){if(Xe[this._symbol])return new Y(e,t,this,qc(this._symbol));var r=this.tryGetConcreteTree(e,t);if(r.isError)return new Y(e,t,this,r);var n=this._argSymbols,i=r.getDependencies();if(i.indexOf(this._symbol)!==-1)return new Y(e,t,this,op(this._symbol));var s=i.filter(function(o){return n.indexOf(o)===-1});return s.length?new Y(e,t,this,ap(s,this._symbol,n)):new Y(e,t,this,r)};D.Equation.prototype.analyzeScientific=function(e,t){return new Y(e,t,this,ha())};function C0(e,t){return new Y(e,t,this,ku())}D.And.prototype.analyzeScientific=C0;D.DoubleInequality.prototype.analyzeScientific=C0;D.BaseComparator.prototype.analyzeScientific=C0;D.Regression.prototype.analyzeScientific=function(e,t){return new Y(e,t,this,Yu())};D.ParenSeq.prototype.analyzeScientific=function(e,t){return new Y(e,t,this,Xu())};D.Base.prototype.analyzeSingleExpressionScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);return r.isError?new Y(e,t,this,r):new Y(e,t,this,te(`Unexpected node type ${this.type}`))};D.Expression.prototype.analyzeSingleExpressionScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return new Y(e,t,this,r);var n=r.getDependencies();if(n.length>0){var i=n[0],s,o=Xe[i];return o?s=o.isFunction?ss(i):qu(i):s=fp(i),new Y(e,t,this,s)}return new Y(e,t,this,r)};D.Assignment.prototype.analyzeSingleExpressionScientific=function(e,t){return new Y(e,t,this,dp())};D.FunctionDefinition.prototype.analyzeSingleExpressionScientific=function(e,t){return new Y(e,t,this,mp())};D.Equation.prototype.analyzeSingleExpressionScientific=function(e,t){return new Y(e,t,this,ha())};function _0(e,t){return new Y(e,t,this,ku())}D.And.prototype.analyzeSingleExpressionScientific=_0;D.DoubleInequality.prototype.analyzeSingleExpressionScientific=_0;D.BaseComparator.prototype.analyzeSingleExpressionScientific=_0;D.Regression.prototype.analyzeSingleExpressionScientific=function(e,t){return new Y(e,t,this,Yu())};D.ParenSeq.prototype.analyzeSingleExpressionScientific=function(e,t){return new Y(e,t,this,Xu())};D.Base.prototype.getGraphInfo=function(e,t){var r=t.getDependencies(),n,i;switch(r.length){case 0:n=zN(t),i=t.boundDomain(\"x\");break;case 1:i=t.boundDomain(r[0]),i.type===\"known\"&&(n=zN(t));break;default:i=In();break}return{graphMode:this.getGraphMode(e,t),color:aa(this.userData,this.metaData),pointStyle:this.userData.pointStyle,lineStyle:this.userData.lineStyle,arrowMode:this.userData.arrowMode,operator:this.getOperator(),isLinear:!!n,linearCoefficients:n,domainBound:i}};function zN(e){switch(e.valueType){case I:return L0(e);case N:{var t=L0(e.elementAt(0)),r=L0(e.elementAt(1));return!t||!r?void 0:[t,r]}default:return}}function L0(e){var t=e.getDependencies();switch(t.length){case 0:return[+e.asValue(),0];case 1:if(e.polynomialOrder(t[0])>1)return;var r=e.getPolynomialCoefficients(t[0]);return[r[0]?+r[0].asValue():0,r[1]?+r[1].asValue():0];default:return}}var HN=new D.Constant(Ve(0,1));D.Base.prototype.getMoveStrategy=function(){};D.Assignment.prototype.getMoveStrategy=function(e,t,r,n,i){return this._expression.getMoveStrategy(e,t,r,n,i)};function t2(e){return{type:\"updateSliderNonlinear\",id:e.id,initialValue:e.initialValue,min:e.min,max:e.max,compiled:e.compiled,movesOn:e.movesOn,hasLinearComponent:e.hasLinearComponent}}function r2(e){return{type:\"updateGliderParameter\",span:e.span,movesOn:e.movesOn}}function n2(e){return{type:\"updateSliderForGlider\",id:e.sliderId,movesOn:e.movesOn,min:e.min,max:e.max}}function UN(e,t,r,n,i,s){var o=t.getDependencies();for(let b of o)if(i[b])return;for(var a=o.length-1;a>=0;a--){var u=o[a];if(!s[u]){var c=n[u];if(c!==void 0){var l=r[u];if(l.order===1){var p=l.tree,f=p.getPolynomialCoefficients(u),d=f[1]||HN,g=f[0]||HN;if(!(!g.isConstant||!d.isConstant)&&!(!isFinite(g.asValue())||!isFinite(d.asValue()))&&d.asValue()!==0){var m=[-g.asValue()/d.asValue(),1/d.asValue()];return{symbol:u,id:c,coefficients:m}}}}}}}function i2(e,t){for(var r in t){var n=t[r].evaluationState,i=n.assignment;if(i===e)return r}}function s2(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}function w0(e,t){var r=s2(e),n={};for(var i in t){var s=t[i].evaluationState.assignment;t[i].evaluationState.is_slidable&&r[s]&&(n[s]=i)}return n}function qN(e,t,r,n){for(var i=[],s=0;s<r.length;s++){var o=r[s],a={};i.push(a);for(var u=0;u<n.length;u++){var c=n[u],l=Object.create(t);l[c]=void 0;var p=o.tryGetConcreteTree(e,l);if(p.isError){a[c]={tree:p,order:1/0};continue}else a[c]={tree:p,order:p.polynomialOrder(c)}}}return i}function kN(e,t,r){for(var n=0;n<e.length;n++){var i=e[n];t[i].order!==0&&(r[i]=!0)}}D.ParenSeq.prototype.getMoveStrategy=function(e,t,r,n,i){if(r.valueType!==N||r.getDependencies().length!==0)return;for(var s=this.getDependencies(),o=w0(s,n),a=Object.keys(o),u=this.args,c=qN(e,t,u,a),l=[],p={},f={},d=0;d<2;d++){var g=u[d];let M=g.getInputSpan();if(g.isConstant){l[d]=M?{type:\"updateCoordinate\",inputSpan:M}:{type:\"none\"};continue}var m=UN(e,g,c[d],o,p,f);m&&(l[d]={type:\"updateSlider\",id:m.id,coefficients:m.coefficients},p[m.symbol]=!0,kN(a,c[d],f)),l[d]||(l[d]={type:\"none\"})}let[b,y]=l,h;if(b.type===\"none\"&&y.type===\"none\"&&a.length===1&&(h=a[0]),!h)return b.type!==\"none\"||y.type!==\"none\"?l:void 0;var x=o[h],P;try{var E=Object.create(t);E[h]=void 0,P=this.getConcreteTree(e,E).getCompiledFunction()}catch(M){return}KP(P);var T=n[x].evaluationState;return[t2({id:x,initialValue:T.constant_value,min:T.slider_min_number,max:T.slider_max_number,compiled:P,hasLinearComponent:b.type===\"updateSlider\"||y.type===\"updateSlider\"}),{type:\"none\"}]};D.FunctionCall.prototype.getMoveStrategy=function(e,t,r,n,i){if(this._symbol===\"glider\"&&!(!r.isTypedConstant||r.valueType!==N)){var s,o,a;switch(this.args[1].type){case\"Constant\":{var u=this.args[1].asValue();if(typeof u!=\"number\"||(s=this.args[0].getConcreteTree(e,t),!s.isTypedConstant))return;a=s.asTypedValue();let g=this.args[1].getInputSpan();return[g?r2({span:g,movesOn:a}):{type:\"none\"},{type:\"none\"}]}case\"Identifier\":{var c=this.args[1]._symbol,l=w0([c],n),p=l[c];if(p===void 0)return;var f=n[p].evaluationState,d=Object.create(t);return d[c]=void 0,s=this.args[0].getConcreteTree(e,d),s.isTypedConstant?(a=s.asTypedValue(),o={min:f.slider_min_number,max:f.slider_max_number},[n2({min:o.min,max:o.max,movesOn:a,sliderId:p}),{type:\"none\"}]):void 0}default:return}}};D.Image.prototype.getMoveStrategy=function(e,t,r,n,i){if(!(r.center.valueType!==N||r.center.getDependencies().length!==0||!r.width.isConstant||!r.height.isConstant||!r.radianAngle.isConstant||!r.opacity.isConstant)){var s=this.getDependencies(),o=w0(s,n),a=Object.keys(o),u=[this.width,this.height];this.center.type===\"ParenSeq\"?u.push(this.center.args[0],this.center.args[1]):this.center.type===\"Identifier\"&&(this.center.referencedStatementId=i2(this.center._symbol,n));for(var c={},l={},p=qN(e,t,u,a),f=[],d=[2,3,0,1],g=0;g<d.length;g++){var m=d[g],b=u[m];if(!b){f[m]={type:\"none\"};continue}if(b.isConstant){let h=b.getInputSpan();f[m]=h?{type:\"updateCoordinate\",inputSpan:h}:{type:\"none\"};continue}var y=UN(e,b,p[m],o,c,l);y&&(f[m]={type:\"updateSlider\",id:y.id,coefficients:y.coefficients},c[y.symbol]=!0,kN(a,p[m],l)),f[m]||(f[m]={type:\"none\"})}if(!(f[0].type===\"none\"&&f[1].type===\"none\"&&f[2].type===\"none\"&&f[3].type===\"none\"))return f}};D.Base.prototype.getDefaultDragMode=function(e){return\"NONE\"};D.Assignment.prototype.getDefaultDragMode=function(e){return e[0].type!==\"none\"&&e[1].type!==\"none\"?\"XY\":e[0].type!==\"none\"?\"X\":e[1].type!==\"none\"?\"Y\":\"NONE\"};D.ParenSeq.prototype.getDefaultDragMode=function(e){return e[0].type===\"updateSlider\"&&e[1].type===\"updateSlider\"?\"XY\":e[0].type===\"updateSlider\"?\"X\":e[1].type===\"updateSlider\"?\"Y\":e[0].type===\"updateSliderNonlinear\"&&e[0].hasLinearComponent?\"X\":\"NONE\"};D.FunctionCall.prototype.getDefaultDragMode=function(e){return this._symbol!==\"glider\"?\"NONE\":D.Assignment.prototype.getDefaultDragMode.call(this,e)};var o2=D.List;D.Base.prototype.tableInfo=function(e,t){return!1};D.Identifier.prototype.tableInfo=function(e,t){return e.validFirstColumnVariable(this._symbol)?{independent_variable:this._symbol,dependent_column:this.getInputString(),by_reference:!1}:!1};D.Expression.prototype.tableInfo=function(e,t){var r=t.getDependencies();if(Aa(this))return!1;switch(t.valueType){case N:case ft:if(r.length!==0||t.isMovablePoint&&(t.moveStrategy[0].type===\"updateSlider\"||t.moveStrategy[1].type===\"updateSlider\"))return!1;var n=o2.wrap(t).asValue();return{independent_variable:\"x\",dependent_column:\"y\",by_reference:!1,values:n};case I:if(r.length!==1)return!1;var i=r[0];return e.validFirstColumnVariable(i)?{independent_variable:i,dependent_column:this.getInputString(),by_reference:!1}:!1;default:return!1}};D.Assignment.prototype.tableInfo=function(e,t){if(t instanceof D.SolvedEquation||!this.getInputString().length||Aa(this)||Al(t.valueType))return!1;let r=t.getDependencies();if(r.length>1)return!1;let n;if(r.length===0){if(!e.tableableAsConstant(this._symbol))return!1;n=e.implicitIndependent(this._symbol)}else n=r[0];if(!e.validFirstColumnVariable(n))return!1;let i=e.assignmentForbidden(this._symbol)?_o(this.getInputString().replace(/[^=]*=/,\"\")):_o(this.getInputString().split(\"=\")[0]);return{independent_variable:n,dependent_column:i,by_reference:!e.assignmentForbidden(this._symbol)}};D.FunctionDefinition.prototype.tableInfo=function(e,t){if(this._argSymbols.length!==1||!this.getInputString().length)return!1;var r=t.getDependencies();if(r.length>1)return!1;var n=this._argSymbols[0];if(!e.validFirstColumnVariable(n))return!1;var i=e.assignmentForbidden(this._symbol),s=i?_o(this.getInputString().replace(/[^=]*=/,\"\")):_o(this.getInputString().split(\"=\")[0]);return{independent_variable:n,dependent_column:s,by_reference:!i}};D.BaseComparator.prototype.tableInfo=function(e,t){return!1};D.DoubleInequality.prototype.tableInfo=function(e,t){return!1};D.Equation.prototype.tableInfo=function(e,t){return!1};D.Base.prototype.tableError=function(){return this.isInequality()?v(\"shared-calculator-error-table-inequality-supplement\"):!(this instanceof D.Expression)&&!(this instanceof D.IRExpression)?v(\"shared-calculator-error-table-generic-supplement\"):!1};D.List.prototype.tableError=function(){return v(\"shared-calculator-error-table-list-supplement\")};D.Equation.prototype.tableError=D.Assignment.prototype.tableError=function(){return v(\"shared-calculator-error-table-equation-supplement\")};D.FunctionDefinition.prototype.tableError=function(){return v(\"shared-calculator-error-table-function-definition-supplement\")};D.Regression.prototype.tableError=function(){return v(\"shared-calculator-error-table-regression-supplement\")};D.List.prototype.elementAt=function(e){return e=Math.floor(e),e>=0&&e<this.args.length?this.args[e]:new D.Constant(NaN)};D.List.prototype.eachElement=function(t){for(var r=0;r<this.length;r++)t(this.elementAt(r),r)};D.List.prototype.mapElements=function(t){for(var r=[],n=0;n<this.length;n++)r.push(t(this.elementAt(n),n));return r};D.IRExpression.prototype.elementAt=function(e){var t=this._chunk.elementAt(e);return new cr(t)};D.ParenSeq.prototype.elementAt=function(e){return e<0||e>this.args.length-1?new D.Constant(NaN):this.args[e]};function a2(){return Qr(this._symbol)+\" \"}D.Identifier.prototype.printLatex=a2;D.Constant.prototype.printLatex=function(){return ea(this.asValue())};D.Ticker.prototype.printLatex=function(){return\"\\\\ticker\\\\left(\"+this.args.map(oi).join(\", \")+\"\\\\right)\"};D.Negative.prototype.printLatex=function(){return\"-\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\"};D.Add.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)+\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};D.PercentOf.prototype.printLatex=function(){return this.args[0].printLatex()+\" \\\\% \\\\operatorname{of} \"+this.args[1].printLatex()};D.Subtract.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)-\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};D.Multiply.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)*\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};D.DotMultiply.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\\\\cdot\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};D.CrossMultiply.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\\\\times\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};D.Divide.prototype.printLatex=function(){return\"\\\\frac{\"+this.args[0].printLatex()+\"}{\"+this.args[1].printLatex()+\"}\"};D.Exponent.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)^{\"+this.args[1].printLatex()+\"}\"};D.Assignment.prototype.printLatex=function(){return Qr(this._symbol)+\"=\"+this._expression.printLatex()};D.CoordinateEquation.prototype.printLatex=function(){return\"\\\\left(\"+this._symbols.map(e=>Qr(e)).join(\",\")+\"\\\\right)=\"+this._expression.printLatex()};D.Equation.prototype.printLatex=function(){return this._lhs.printLatex()+\"=\"+this._rhs.printLatex()};function If(e){switch(e){case\">\":return\">\";case\"<\":return\"<\";case\">=\":return\"\\\\ge \";case\"<=\":return\"\\\\le \";case\"=\":return\"=\"}return\"\"}D.BaseComparator.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\"+If(this.operator)+\"\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};D.DoubleInequality.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\"+If(this.args[1])+this.args[2].printLatex()+If(this.args[3])+\"\\\\left(\"+this.args[4].printLatex()+\"\\\\right)\"};D.And.prototype.printLatex=function(){if(!(this.args[0]instanceof D.BaseComparator)||!(this.args[1]instanceof D.BaseComparator))throw new Error(\"Not implemented\");if(this.args[0].args[1].printLatex()!==this.args[1].args[0].printLatex())throw new Error(\"Not implemented\");return\"\\\\left(\"+this.args[0].args[0].printLatex()+\"\\\\right)\"+If(this.args[0].operator)+\"\\\\left(\"+this.args[0].args[1].printLatex()+\"\\\\right)\"+If(this.args[1].operator)+\"\\\\left(\"+this.args[1].args[1].printLatex()+\"\\\\right)\"};function oi(e){return e.printLatex()}function u2(){switch(this._symbol){case\"sqrt\":return\"\\\\sqrt{\"+this.args[0].printLatex()+\"}\";case\"nthroot\":return\"\\\\sqrt[\"+this.args[1].printLatex()+\"]{\"+this.args[0].printLatex()+\"}\";case\"logbase\":return\"\\\\log_{\"+this.args[1].printLatex()+\"}\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\";default:return Qr(this._symbol)+\"\\\\left(\"+this.args.map(oi).join(\", \")+\"\\\\right)\"}}D.FunctionCall.prototype.printLatex=u2;D.SeededFunctionCall.prototype.printLatex=function(){return Qr(this._symbol)+\"\\\\left(\"+this.args.slice(1).map(oi).join(\", \")+\"\\\\right)\"};D.DotAccess.prototype.printLatex=function(){return\"(\"+this.args[0].printLatex()+\").(\"+this.args[1].printLatex()+\")\"};D.Prime.prototype.printLatex=function(){switch(this.args[0]._symbol){case\"logbase\":return\"\\\\log_{\"+this.args[0].args[1].printLatex()+\"}\"+Array(this.order+1).join(\"'\")+\"\\\\left(\"+this.args[0].args[0].printLatex()+\"\\\\right)\";default:return Qr(this.args[0]._symbol)+Array(this.order+1).join(\"'\")+\"\\\\left(\"+this.args[0].args.map(oi).join(\", \")+\"\\\\right)\"}};D.List.prototype.printLatex=function(){return\"\\\\left[\"+this.args.map(oi).join(\", \")+\"\\\\right]\"};D.Range.prototype.printLatex=function(){return\"\\\\left[\"+this.args[0].args.map(oi).join(\", \")+\" ... \"+this.args[1].args.map(oi).join(\", \")+\"\\\\right]\"};D.UpdateRule.prototype.printLatex=function(){return this.args[0].printLatex()+\"\\\\to(\"+this.args[1].printLatex()+\")\"};D.ListAccess.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\\\\left[\"+this.args[1].printLatex()+\"\\\\right]\"};D.ParenSeq.prototype.printLatex=function(){return\"\\\\left(\"+this.args.map(oi).join(\", \")+\"\\\\right)\"};D.BareSeq.prototype.printLatex=function(){return this.args.map(oi).join(\", \")};D.NamedCoordinateAccess.prototype.printLatex=function(){return\"\\\\left(\\\\left(\"+this.args[0].printLatex()+\"\\\\right).\"+this.symbol+\"\\\\right)\"};D.Norm.prototype.printLatex=function(){return\"\\\\left|\"+this.args[0].printLatex()+\"\\\\right|\"};D.Sum.prototype.printLatex=function(){return\"\\\\sum_{\"+this.args[0].printLatex()+\"=\"+this.args[1].printLatex()+\"}^{\"+this.args[2].printLatex()+\"}\\\\left(\"+this.args[3].printLatex()+\"\\\\right)\"};D.Product.prototype.printLatex=function(){return\"\\\\prod_{\"+this.args[0].printLatex()+\"=\"+this.args[1].printLatex()+\"}^{\"+this.args[2].printLatex()+\"}\\\\left(\"+this.args[3].printLatex()+\"\\\\right)\"};D.Integral.prototype.printLatex=function(){return\"\\\\int_{\"+this.args[1].printLatex()+\"}^{\"+this.args[2].printLatex()+\"}\\\\left(\"+this.args[3].printLatex()+\"\\\\right)d\"+this.args[0].printLatex()};D.FunctionExponent.prototype.printLatex=function(){return this.args[0].printLatex()+\"\\\\left(\"+this.args[1].printLatex()+\"\\\\right)^{\"+this.args[2].printLatex()+\"}\"};D.FunctionFactorial.prototype.printLatex=function(){return this.args[0].printLatex()+\"\\\\left(\"+this.args[1].printLatex()+\"\\\\right)!\"};function F0(e){return e.isConstant&&e.asValue()===!0}function c2(e){return e.isConstant&&e.isNaN()}D.Piecewise.prototype.printLatex=function(){var e=this;if(F0(e.args[0]))return e.args[1].printLatex();for(var t=[\"\\\\left\\\\{\"];;){if(F0(e.args[0])){t.push(e.args[1].printLatex());break}if(t.push(e.args[0].printLatex(),\": \"),c2(e.args[2])){t.push(e.args[1].printLatex());break}if(t.push(e.args[1].printLatex(),\", \"),!(e.args[2]instanceof D.Piecewise)){t.push(e.args[2].printLatex());break}e=e.args[2]}return t.push(\"\\\\right\\\\}\"),t.join(\"\")};D.Restriction.prototype.printLatex=function(){return F0(this.args[0])?\"\\\\left\\\\{\\\\right\\\\}\":\"\\\\left\\\\{\"+this.args[0].printLatex()+\"\\\\right\\\\}\"};D.FunctionDefinition.prototype.printLatex=function(){return Qr(this._symbol)+\"\\\\left(\"+this._argSymbols.map(Qr).join(\", \")+\"\\\\right) = \"+this._expression.printLatex()};D.Derivative.prototype.printLatex=function(){return\"\\\\frac{d}{d\"+Qr(this._symbol)+\"}\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\"};D.Regression.prototype.printLatex=function(){return\"\\\\left(\"+this._lhs.printLatex()+\"\\\\right)\\\\sim\\\\left(\"+this._rhs.printLatex()+\"\\\\right)\"};D.Histogram.prototype.printLatex=function(){return\"\\\\histogram\\\\left(\"+this.args.map(oi).join(\", \")+\"\\\\right)\"};D.DotPlot.prototype.printLatex=function(){return\"\\\\dotplot\\\\left(\"+this.args.map(oi).join(\", \")+\"\\\\right)\"};D.BoxPlot.prototype.printLatex=function(){return\"\\\\boxplot\\\\left(\"+this.args.map(oi).join(\", \")+\"\\\\right)\"};D.TTest.prototype.printLatex=function(){return\"\\\\TTest\\\\left(\"+this.args.map(oi).join(\", \")+\"\\\\right)\"};D.IndependentTTest.prototype.printLatex=function(){return\"\\\\IndependentTTest\\\\left(\"+this.args.map(oi).join(\", \")+\"\\\\right)\"};D.Stats.prototype.printLatex=function(){return\"\\\\Stats\\\\left(\"+this.args.map(oi).join(\", \")+\"\\\\right)\"};D.AssignmentExpression.prototype.printLatex=function(){return Qr(this._symbol)+\"=\"+this.args[1].printLatex()};D.ListComprehension.prototype.printLatex=function(){return\"\\\\left[\"+this._body.printLatex()+\"\\\\operatorname{for}\"+this._inputLists.map(oi).join(\", \")+\"\\\\right]\"};D.Substitution.prototype.printLatex=function(){return\"\\\\left(\\\\left(\"+this._body.printLatex()+\"\\\\right)\\\\operatorname{with}\"+this._assignments.map(oi).join(\", \")+\"\\\\right)\"};D.Construction.prototype.printLatex=function(){return\"\\\\construction \"};D.Base.prototype.getExpressionType=function(e,t){switch(e){case 114:case 115:case 116:return t&&W(t)?\"POINT3D_LIST\":\"POINT3D\";case 100:case 101:case 102:case 128:return\"CURVE3D_xyz_t\";case 119:return\"SEGMENT3D\";case 129:return\"VECTOR3D\";case 130:case 103:case 104:case 105:return\"SURFACE_xyz_uv\";case 110:return\"SURFACE_r_\\u03B8z\";case 124:return\"SURFACE_r_\\u03B8z_AMBIGUOUS\";case 109:return\"SURFACE_z_r\\u03B8\";case 111:return\"SURFACE_r_\\u03B8\\u03C6\";case 107:case 108:case 106:return\"SURFACE\";case 118:return\"SPHERE3D\";case 117:return\"TRIANGLE3D\";case 120:case 121:return\"SURFACE_AMBIGUOUS\";case 122:case 123:return\"SURFACE_CONSTANT_AMBIGUOUS\";case 112:case 113:case 210:return\"IMPLICIT_SURFACE\";case 126:case 127:return\"IMPLICIT_SURFACE_AMBIGUOUS\";case 3:case 4:return t&&W(t)?\"POINT_LIST\":\"SINGLE_POINT\";case 1:case 2:return\"X_OR_Y\";case 5:return\"PARAMETRIC\";case 6:return\"POLAR\";case 8:return\"IMPLICIT\";case 200:case 201:case 202:case 205:case 209:return\"SLICE\";case 211:case 206:return\"SLICE_r\\u03B8z_at_z\";case 203:return\"SLICE_zr\\u03B8_at_r\";case 204:return\"SLICE_zr\\u03B8_at_\\u03B8\";case 213:return\"SLICE_zr\\u03B8_at_xyz\";case 207:return\"SLICE_r\\u03B8\\u03C6_at_\\u03B8\";case 208:return\"SLICE_r\\u03B8\\u03C6_at_\\u03C6\";case 212:return\"SLICE_r\\u03B8\\u03C6_at_xyz\";case 214:case 215:return\"SLICE_xyz_uv\";default:return t!==void 0&&ne(t,we)?\"POLYGON\":\"X_OR_Y\"}};D.Histogram.prototype.getExpressionType=function(e,t){return\"HISTOGRAM\"};D.DotPlot.prototype.getExpressionType=function(e,t){return\"DOTPLOT\"};D.BoxPlot.prototype.getExpressionType=function(e,t){return\"BOXPLOT\"};function V0(e,t,r){let n=[],i={},s={},o={},a={},u={},c={},l={},p=0,f=[],d=[];if(!r){r=[];for(let y in t)t.hasOwnProperty(y)&&r.push(y)}for(let y in t){if(!t.hasOwnProperty(y))continue;let h=t[y].exportPenalty||0;for(;n.length<h+1;)n.push([]);n[h].push(y)}for(let y of n){let h={};for(let x of y){let P=t[x],E=t[x].exportPenalty||0,T=Cs(P),M=P.getLegalExports(e);for(let O of M)Xe[O]||i[O]||(T&&(u[O]=!0),E===0&&(a[O]=!0),h[O]=h[O]||[],h[O].push(x),h[O].length>1&&(!s[O]&&T&&(o[O]=!0),s[O]=!0))}for(let x in h)o[x]||(i[x]=h[x])}for(let y of r)l.hasOwnProperty(y)||g(y);function g(y){l[y]=l[y]||{};let h=l[y],x;h.id=y,h.index=p,h.lowlink=p,f.push(h),h.instack=!0,p++;let P=t[y].getDependencies();for(let E of P){if(!i.hasOwnProperty(E))continue;let T=i[E];for(let M of T)l.hasOwnProperty(M)?(x=l[M],x.instack&&(h.lowlink=Math.min(h.lowlink,x.index))):(g(M),x=l[M],h.lowlink=Math.min(h.lowlink,x.lowlink))}if(h.lowlink===h.index)if(x=f.pop(),x.instack=!1,x===h)m(h);else{let E=[x];for(;x=f.pop(),x.instack=!1,E.push(x),x!==h;);b(E)}}function m(y){d.push(y.id)}function b(y){let h=[];for(let x=y.length-1;x>=0;x--){let P=y[x],E=t[P.id].getLegalExports(e);Array.prototype.push.apply(h,E),h.push(E[0]),d.push(P.id)}h=Gl(h),h.sort();for(let x of h)c[x]=h}return{resolved:d,globallyDefined:a,tableDefined:u,multiplyDefined:s,multiplyDefinedByTables:o,cyclicallyDefined:c}}var l2=100;function Vg(e){for(var t=[],r=0;r<e;r++)t[r]={x:[],y:[],intersects:[]};return t}function p2(e,t,r,n){return r===1&&n===1||r===2&&n===2?function(i){return t(i)-e(i)}:r===1&&n===2||r===2&&n===1?function(i){return i-t(e(i))}:!1}function XN(e,t){t instanceof D.SolvedEquation?t=t._expression:t instanceof D.OptimizedRegression&&(t=t.model);var r=[],n=[];return t instanceof D.DoubleInequality?D.List.eachArgs(t._expressions,function(i){r.push(i[0].getCompiledFunction()),n.push(i[0].isConstant&&i[1].isNaN()),r.push(i[1].getCompiledFunction()),n.push(i[1].isConstant&&i[1].isNaN())}):D.List.wrap(t).eachElement(function(i){r.push(i.getCompiledFunction()),n.push(i.isConstant&&i.isNaN())}),{functions:r,skipIntersecting:n}}function f2(e,t){var r=[];for(var n in e)if(e.hasOwnProperty(n)&&String(n)!==String(t)&&e[n].shouldIntersect()){var i=e[n],s=XN(i.policy,i.concreteTree);r.push({id:n,graphMode:i.getGraphMode(),functions:s.functions,skipIntersecting:s.skipIntersecting})}return r}function d2(e,t){e.intersects=Array(e.x.length);for(var r=0;r<e.x.length;r++)e.intersects[r]=t}function m2(e,t){if(t===1){var r=e.y;e.y=e.x,e.x=r}}function y2(e,t){Array.prototype.push.apply(e.x,t.x),Array.prototype.push.apply(e.y,t.y),e.intersects&&t.intersects&&Array.prototype.push.apply(e.intersects,t.intersects)}function g2(e,t,r){var n=$I(e,t),i=n.poi.zeros,s=n.poi.extrema,o=[],a=0,u=0;for(a=0;a<i.x.length;a++){for(;u<s.x.length&&s.x[u]<i.x[a];u++)Zn(s.y[u],0)&&o.push(s.x[u]);o.push(i.x[a])}for(;u<s.x.length;u++)Zn(s.y[u],0)&&o.push(s.x[u]);return{x:o,y:o.map(r)}}function ZN(e,t,r){var n=e[r],i=n.getGraphInfo(),s=n.getGraphMode(),o,a,u;try{o=XN(n.policy,n.concreteTree),a=Vg(o.functions.length),u=f2(e,r)}catch(x){return Vg(0)}if(!u)return a;for(var c=0,l=0;l<u.length;l++)for(var p=u[l],f=0;f<o.functions.length;f++)if(!o.skipIntersecting[f]){for(var d=o.functions[f].fn,g=Dl(t,i,d),m=0;m<p.functions.length;m++)if(!u[l].skipIntersecting[m]){var b=p.functions[m].fn,y=p2(d,b,s,p.graphMode);if(y){var h;try{h=g2(y,g,d)}catch(x){return Vg(0)}if(c+=h.x.length,c>l2)return Vg(o.functions.length);d2(h,p.id),m2(h,s),y2(a[f],h)}}}return a}function h2(e){if(e.length<2)return\"text\";let t=e.split(\"`\").length-1;return t<2?\"text\":t===2&&e[0]===\"`\"&&e[e.length-1]===\"`\"?\"latex\":\"mixed\"}function b2(e){if(e.length===0)return[\"\"];let t=[],r=e.split(/(`)/),n=!1,i=\"\";for(let s=0;s<r.length;s++){let o=r[s];o.length&&(o===\"`\"?(i+=\"`\",n=!n,n||(t.push(i),i=\"\")):(i+=o,n||(t.push(i),i=\"\")))}return i.length&&t.push(i),t}function G0(e){return b2(e).map(x2)}function x2(e){let r=\"\\\\$({\"+[\"[a-zA-Z][0-9]*\",\"[a-zA-Z]_[a-zA-Z0-9]+\",\"[a-zA-Z]_\\\\{[a-zA-Z0-9]+\\\\}\",\"\\\\\\\\[a-zA-Z]+\",\"\\\\\\\\[a-zA-Z]+_{[a-zA-Z0-9]+}\",\"\\\\\\\\[a-zA-Z]+_[a-zA-Z0-9]+\"].join(\"})|\\\\$({\")+\"})\",n=new RegExp(r,\"g\"),i=[],s=0,o=0,a;for(;a=n.exec(e);){o=a.index,o>s&&i.push(e.substr(s,o-s));let u=a[0],c=u.replace(/[{}\\$]/g,\"\").replace(/^([a-zA-Z])([0-9]+)$/,\"$1_$2\");i.push({symbol:c,str:u}),s=a.index+u.length}return s<e.length&&i.push(e.substr(s)),{raw:e,parts:i}}function $N(e,t){return t?\"{\"+oh(e,{bigCutoff:1e7,digits:8})+\"}\":sh(e,{bigCutoff:1e7,digits:8})}function B0(e,t,r,n){return e.map(i=>P2(i,t,r,n)).join(\"\")}function P2(e,t,r,n){let i=[],s=h2(e.raw)===\"latex\";for(let o of e.parts)if(typeof o==\"string\")i.push(o);else{let a=new D.Identifier(o.symbol).tryGetConcreteTree(t,r);if(a.valueType===I&&a.getDependencies().length===0){let u=a.asValue();if(typeof u==\"number\"){i.push($N(u,s));continue}}else if(a.valueType===ie&&n<a.length&&a.getDependencies().length===0){let u=a.elementAt(n).asValue();if(typeof u==\"number\"){i.push($N(u,s));continue}}s?i.push(\"{?}\"):i.push(\"?\")}return i.join(\"\")}function WN(){let e={},t={},r={},n=[];for(let i in this.statements){if(!this.statements.hasOwnProperty(i))continue;let s=this.statements[i];if(!(s.type===\"Construction\"&&!this.policy.isGeometryEnabled())&&s.type!==\"Ticker\")switch(s.type){case\"Error\":break;case\"Regression\":{r[i]=[],n.push(i);break}default:{let o=s.getLegalExports(this.policy);if(o){for(let u of o)s.exportPenalty!==void 0&&s.exportPenalty>0?t[u]=i:e[u]=i;let a=[];for(let u of s.getDependencies())a.push(u);r[i]=eh(a,s.getDummyDependencies(),o)}break}}}for(let i of n){let s=this.statements[i],o=Co(s.userData.residualVariable);o&&(t[o]=i);let a=s.getDependencies().slice(),u={},c;for(;c=a.pop();){if(u[c])continue;u[c]=!0;let l=e[c]||t[c];if(l){a.push(...r[l]),r[i].push(c);continue}t[c]=i}}return{exportMap:e,weakExportMap:t,dependencyMap:r}}var Ef=class{constructor(){this.data={}}getChildIntersections(t){return this.data[t]||{count:0}}addListParent(t,r,n){if(_l(n.valueType,[N,ft]),r!==void 0)n.valueType===ft?this.addPoint(t,r,n.value[r]):this.addPoint(t,r,n.value);else{_l(n.valueType,[ft]);for(let i=0;i<n.value.length;i++)this.addPoint(t,i,n.value[i])}}addPrimitiveParent(t,r){if(_l(r.valueType,[N,ft]),r.valueType===N)this.addPoint(t,0,r.value);else for(let n=0;n<r.value.length;n++)this.addPoint(t,0,r.value[n])}addPoint(t,r,n){var s;let i=this.data[t]||{count:0};this.data[t]||(this.data[t]=i),i[r]||(i[r]=[]),(s=i[r])==null||s.push(n),i.count++}};var Mf=class{constructor(t){this.singleExpression=t.singleExpression}isGeometryEnabled(){return!1}is3dProduct(){return!1}is3dPolicy(){return!1}isBeta3d(){return!1}areAllScalesLinear(){return!0}assignmentForbidden(t){return this.substitutionForbidden(t)}substitutionForbidden(t){return t.slice(0,3)!==\"ans\"}isValidSlider(t){return!1}sliderVariables(){return[]}graphingEnabled(){return!1}ansEnabled(){return!this.singleExpression}dimensionVarsEnabled(){return!1}disabledFeatures(){return[\"Sum\",\"Product\",\"Integral\",\"List\",\"Derivative\",\"Piecewise\",\"Exponent\",\"PercentOf\",\"Substitution\"]}};var Df=class{constructor(t){this.singleExpression=t.singleExpression}isGeometryEnabled(){return!1}is3dProduct(){return!1}is3dPolicy(){return!1}isBeta3d(){return!1}areAllScalesLinear(){return!0}assignmentForbidden(t){return this.substitutionForbidden(t)}substitutionForbidden(t){return this.singleExpression?t.slice(0,3)!==\"ans\":t.slice(0,3)===\"tmp\"}isValidSlider(t){return!1}sliderVariables(){return[]}graphingEnabled(){return!1}ansEnabled(){return!this.singleExpression}dimensionVarsEnabled(){return!1}disabledFeatures(){return this.singleExpression?[\"Sum\",\"Product\",\"Integral\",\"Derivative\",\"Piecewise\",\"Substitution\",\"PercentOf\"]:[\"Sum\",\"Product\",\"Integral\",\"Derivative\",\"Piecewise\",\"Substitution\"]}};var Fa=typeof performance!=\"undefined\"?()=>performance.now():()=>Date.now();typeof self!=\"undefined\"&&self.WorkerGlobalScope&&(self.Fragile={countReferences:gm,Opcodes:bt,Types:Fe,getConstantListLength:fr,ParsenodeError:R});var{Constant:Eo,Seed:jN,FunctionCall:A2,Image:C2,Slider:_2,Table:L2,TableColumn:w2,Construction:F2}=D;function V2(e,t,r,n){switch(e){case\"fourFunction\":return new Mf({singleExpression:!1});case\"singleExpressionFourFunction\":return new Mf({singleExpression:!0});case\"scientific\":return new Df({singleExpression:!1});case\"singleExpressionScientific\":return new Df({singleExpression:!0});case\"graphing\":return new vl({enableGeometry:!1,enable3d:t,beta3d:r,scales:n});case\"geometry\":return new vl({enableGeometry:!0,enable3d:!1,beta3d:!1,scales:n});case\"graphing_3d\":return new Eg(r)}}var G2={fourFunction:Zf,singleExpressionFourFunction:Zf,scientific:dh,singleExpressionScientific:mh,graphing:Hl,graphing_3d:Hl,geometry:Hl},Io=\"**geo_construction_statement_id**\";function Di(e,t){var r=Ns(e,t);return r.isError||r instanceof D.Expression?r:ql()}function B2(e){let t=e.rawTree.userData,r=e.rawTree.metaData;return!!(t.cdf&&t.cdf.show&&r.distributionSpec)}function z2(e){let t=e.evaluationState.expression_type,r=e.rawTree.userData;return!r.clickableInfo||!r.clickableInfo.enabled?!1:tf(e.rawTree)?!0:e.getGraphMode()===4?!1:gI(t)}function Kt(e,t){let r=\"id\"+e;for(let[n,i]of t||[])r+=\"::\"+n+i;return r}var H2=new Eo(Ve(0,1)),U2=new Eo(Ve(1,1)),q2=new Eo(NaN);function Hi(e,t){return e?e===\"0\"?H2:e===\"1\"?U2:Di(e,t):q2}function Ou(e,t){if(e)return Di(e,t)}function k2(e){return e.slice(0,3)!==\"ans\"}function Y2(e){return e.slice(0,6)!==\"idref_\"}function QN(e,t){let{multiplyDefined:r,multiplyDefinedByTables:n,cyclicallyDefined:i}=e;for(let s in i){if(!i.hasOwnProperty(s))continue;let o=e.tableDefined[s]&&!e.globallyDefined[s],a=i[s].filter(k2).filter(Y2);t[s]=o?kb(a):Ud(a)}for(let s in r)r.hasOwnProperty(s)&&(t[s]=n[s]?qb(s):kc(s))}function Of(e,t,r){for(let n of r)e[n]||(e[n]=[]),e[n].push(t)}function KN(e,t,r){if(r.extraDepNodes)for(let n of r.extraDepNodes)n&&Of(e,t,n.getDependencies());r.clickHandler&&Of(e,t,r.clickHandler.getDependencies())}function X2(e,t,r){let n=e.evaluationState,i=e.rawTree,s=i.metaData.cdfMin,o=i.metaData.cdfMax,a={},u=i.type===\"Assignment\"?i._expression:i,c=u&&u.metaData&&u.metaData.distributionSpec,l=ua(t,r,s,a,-1/0),p=ua(t,r,o,a,1/0),f=!0,d=!0;if(isNaN(l)&&(f=!1,l=NaN),isNaN(p)&&(d=!1,p=NaN),f?d?l>p&&(f=!1,d=!1,n.error=rx().getError()):n.error=tx().getError():n.error=ex().getError(),f&&d){let b=new A2(\"cdf\",[u,new Eo(l),new Eo(p)]);n.cdf_evaluation=+b.tryGetConcreteTree(t,r).asValue()}let g=-1/0,m=1/0;if(c&&(c.discrete&&(g=0),c.symbol===\"binomialdist\"&&u.args&&u.args[0])){let b=+u.args[0].asValue();isFinite(b)&&(m=b)}i.metaData.evaluatedCDFMin=l,i.metaData.evaluatedCDFMax=p,n.cdf_min_valid=f,n.cdf_max_valid=d,n.cdf_min_default=g,n.cdf_max_default=m,n.is_single_identifier=!1,Mu(n,t,a)}function Z2(e,t,r,n){let i={},s=!0,o=NaN,a,u=!1;if(r){let c=r.tryGetConcreteTree(e,t);a=c.getDependencies().length===0?c.asValue():NaN,u=Array.isArray(a),o=u?a:+a;for(let l of c.getDependencies())i[l]=!0}if(u){for(let c of o)if(!isFinite(+c)){s=!1,o=NaN;break}}else isFinite(+o)||(s=!1,o=NaN);return r||(s=!0,n!==void 0&&(o=n)),{value:o,valid:s,missingVarsMap:i}}var vf={lineWidth:{parseNode:\"lineWidth\",valueOutputProp:\"computedLineWidth\",formulaOutputProp:\"\",validOutputProp:\"line_width_valid\",default:(e,t,r,n)=>{let i=r.isGeometryEnabled(),s=r.is3dPolicy(),o=n!==void 0&&ne(n,we);return i&&o?2:s?1:2.5},transform:void 0,shouldEvaluate:void 0,seed:\"lw\"},resolution:{parseNode:\"resolution\",valueOutputProp:\"computedResolution\",formulaOutputProp:\"\",validOutputProp:\"resolution_valid\",default:()=>{},transform:void 0,shouldEvaluate:void 0,seed:\"re\"},lineOpacity:{parseNode:\"lineOpacity\",valueOutputProp:\"computedLineOpacity\",formulaOutputProp:\"\",validOutputProp:\"line_opacity_valid\",default:(e,t,r,n)=>{let i=r.isGeometryEnabled(),s=n!==void 0&&ne(n,we);return i&&s?.6:.9},transform:void 0,shouldEvaluate:void 0,seed:\"lo\"},pointOpacity:{parseNode:\"pointOpacity\",valueOutputProp:\"computedPointOpacity\",formulaOutputProp:\"\",validOutputProp:\"point_opacity_valid\",default:(e,t,r)=>!e||!t?.9:e.getGraphMode(r,t)===4?1:.9,transform:void 0,shouldEvaluate:void 0,seed:\"po\"},pointSize:{parseNode:\"pointSize\",valueOutputProp:\"computedPointSize\",formulaOutputProp:\"\",validOutputProp:\"point_size_valid\",default:(e,t,r)=>r.is3dProduct()?3:9,shouldEvaluate:void 0,transform:void 0,seed:\"ps\"},fillOpacity:{parseNode:\"fillOpacity\",valueOutputProp:\"computedFillOpacity\",formulaOutputProp:\"\",validOutputProp:\"fill_opacity_valid\",default:(e,t,r,n)=>{let i=r.isGeometryEnabled(),s=n!==void 0&&ne(n,we);return i&&s?.2:r.is3dProduct()?1:.4},transform:void 0,shouldEvaluate:e=>{if(!e)return!1;let{expression_type:t,is_inequality:r}=e.evaluationState;return!!(t===\"POLYGON\"||t===\"PARAMETRIC\"||t===\"CURVE3D_xyz_t\"||t===\"SURFACE\"||t===\"SPHERE3D\"||t===\"SURFACE_AMBIGUOUS\"||t===\"SURFACE_CONSTANT_AMBIGUOUS\"||t===\"IMPLICIT_SURFACE\"||t===\"IMPLICIT_SURFACE_AMBIGUOUS\"||t===\"SURFACE_xyz_uv\"||t===\"SURFACE_z_r\\u03B8\"||t===\"SURFACE_r_\\u03B8z\"||t===\"SURFACE_r_\\u03B8\\u03C6\"||t===\"SURFACE_r_\\u03B8z_AMBIGUOUS\"||t===\"TRIANGLE3D\"||r)},seed:\"fo\"},labelSize:{parseNode:\"labelSize\",valueOutputProp:\"computedLabelSize\",formulaOutputProp:\"\",validOutputProp:\"label_size_valid\",transform:void 0,default:()=>1,shouldEvaluate:void 0,seed:\"ls\"},labelAngle:{parseNode:\"labelAngle\",valueOutputProp:\"computedLabelAngle\",formulaOutputProp:\"label_angle_value\",validOutputProp:\"label_angle_valid\",default:()=>0,transform:e=>`-\\\\trigAngleMultiplier*(${e})`,shouldEvaluate:void 0,seed:\"la\"}};function eA(e,t,r,n,i,s,o){let a=vf[s],u;e&&(u=e.tryGetConcreteTree(n,i));let c=a.default&&a.default(e,u,n,o),l=Z2(n,i,r[a.parseNode],c);r[a.valueOutputProp]=l.value,a.formulaOutputProp&&(t[a.formulaOutputProp]=l.value),t[a.validOutputProp]=l.valid,Mu(t,n,l.missingVarsMap)}function $2(e,t,r,n){let i,s,o;if(Cs(e.rawTree)&&e.evaluationState.column_data&&e.rawTree.columns)for(let a=0;a<e.evaluationState.column_data.length;a++){i=e.evaluationState.column_data[a];let u=e.rawTree.columns[a];po(u)||(s=u.header.metaData,o=s[n],eA(o,i,s,t,r,n,e.concreteTree.valueType))}else i=e.evaluationState,s=e.rawTree.metaData,o=s[n],eA(o,i,s,t,r,n,e.concreteTree.valueType)}function tA(e){return Ku(e[0],e[1],e[2]).formatHex()}function rA(e,t,r,n,i){let s;if(e){let o=e.tryGetConcreteTree(n,i),a=o.getDependencies().length>0?void 0:o.asValue(),{valueType:u}=o;if(s=!!(a&&(u===Gt||u===Wr)),s){let c=o&&o.valueType===Gt?tA(a):a.map(tA);t.colorLatexValue=c,r.color_latex_value=c}else delete t.colorLatexValue,delete r.color_latex_value}else s=!0;r.color_latex_valid=s}function W2(e,t,r){let n,i,s;if(Cs(e.rawTree)&&e.evaluationState.column_data&&e.rawTree.columns)for(let o=0;o<e.evaluationState.column_data.length;o++){n=e.evaluationState.column_data[o];let a=e.rawTree.columns[o];po(a)||(i=a.header.metaData,s=i.colorLatex,rA(s,i,n,t,r))}else n=e.evaluationState,i=e.rawTree.metaData,s=i.colorLatex,rA(s,i,n,t,r)}function J2(e){if(e.concreteTree.valueType===Gt&&e.concreteTree.getDependencies().length>0){let t=e.concreteTree._chunk;try{e.evaluationState.shader=zo(t)}catch(r){e.evaluationState.error=r instanceof D.Error?r.getError():te(r).getError()}}}function j2(e,t,r){let n=e.evaluationState,i=e.rawTree,s={},o=i.metaData.clickHandler;if(!o)return;let a=o.tryGetConcreteTree(t,r);!a.isError&&a.valueType!==Ke&&(a=Jl(le(a.valueType)));for(let c of a.getDependencies())t.validActionVariable(c)||(s[c]=!0);let u=Object.keys(s);u.length>0&&(a=tr(u).setDependencies(a.getDependencies())),a.isError&&!y0(t,a)?n.click_handler={status:\"error\",error:a.getError()}:a.isEmptyAction?n.click_handler={status:\"empty\"}:n.click_handler={status:\"maybe-valid\"},Mu(n,t,s)}function Q2(e,t,r){let n,i=e.evaluationState,s=e.rawTree,o,a;i.internal_domain_dependency?(n=i.internal_domain_dependency,n===\"u\"?(o=s.metaData.parametricDomain3DuMin,a=s.metaData.parametricDomain3DuMax):n===\"v\"?(o=s.metaData.parametricDomain3DvMin,a=s.metaData.parametricDomain3DvMax):(o=s.metaData.parametricDomainMin,a=s.metaData.parametricDomainMax)):i.expression_type===\"POLAR\"||NS(i.expression_type)?(o=s.metaData.polarDomainMin,a=s.metaData.polarDomainMax,n=\"theta\"):(o=s.metaData.parametricDomainMin,a=s.metaData.parametricDomainMax,n=\"t\");let u={},c=!!(o||a),l=ua(t,r,o,u,0),p=NaN;a?p=ua(t,r,a,u,NaN):i.expression_type===\"PARAMETRIC\"||i.expression_type===\"CURVE3D_xyz_t\"?p=1:i.expression_type===\"POLAR\"?p=Math.PI*12/+r.trigAngleMultiplier.asValue():(i.expression_type===\"SURFACE_r_\\u03B8z\"||i.expression_type===\"SURFACE_r_\\u03B8z_AMBIGUOUS\"||i.expression_type===\"SLICE_r\\u03B8z_at_z\")&&(p=Math.PI*2/+r.trigAngleMultiplier.asValue());let f=U0(l,p,i);({min:l,max:p}=f),s.metaData.evaluatedDomainMin=l,s.metaData.evaluatedDomainMax=p,(i.expression_type===\"POLAR\"||i.expression_type===\"SURFACE_r_\\u03B8z\"||i.expression_type===\"SURFACE_r_\\u03B8z_AMBIGUOUS\"||i.expression_type===\"SLICE_r\\u03B8z_at_z\")&&(s.metaData.isExplicitDomain=c),i.domains=[{variable:n,minNumber:l,maxNumber:p,minValid:f.minValid,maxValid:f.maxValid}],i.expression_type===\"PARAMETRIC\"&&delete u.t,i.expression_type===\"CURVE3D_xyz_t\"&&(delete u.t,delete u.u,delete u.v),Mu(i,t,u)}function K2(e,t,r){let n=e.evaluationState,i=n.expression_type,s=e.rawTree,o,a,u,c,l={},p=0,f=1,d=0,g=1;var m,b;SS(i)?(m=\"theta\",b=\"phi\",o=s.metaData.polarDomainMin,a=s.metaData.polarDomainMax,u=s.metaData.parametricDomain3DphiMin,c=s.metaData.parametricDomain3DphiMax,f=2*Math.PI/+r.trigAngleMultiplier.asValue(),g=Math.PI/+r.trigAngleMultiplier.asValue()):RS(i)?(m=\"r\",b=\"theta\",o=s.metaData.parametricDomain3DrMin,a=s.metaData.parametricDomain3DrMax,u=s.metaData.polarDomainMin,c=s.metaData.polarDomainMax,f=en.xmax,g=2*Math.PI/+r.trigAngleMultiplier.asValue()):(m=\"u\",b=\"v\",o=s.metaData.parametricDomain3DuMin,a=s.metaData.parametricDomain3DuMax,u=s.metaData.parametricDomain3DvMin,c=s.metaData.parametricDomain3DvMax),p=ua(t,r,o,l,p),f=ua(t,r,a,l,f),d=ua(t,r,u,l,d),g=ua(t,r,c,l,g);let y=U0(p,f,n);({min:p,max:f}=y);let h=U0(d,g,n);({min:d,max:g}=h),s.metaData.evaluatedDomain3DMin1=p,s.metaData.evaluatedDomain3DMax1=f,s.metaData.evaluatedDomain3DMin2=d,s.metaData.evaluatedDomain3DMax2=g,n.domains=[{variable:m,minNumber:p,minValid:y.minValid,maxNumber:f,maxValid:y.maxValid},{variable:b,minNumber:d,minValid:h.minValid,maxNumber:g,maxValid:h.maxValid}],(n.expression_type===\"SURFACE_xyz_uv\"||n.expression_type===\"SLICE_xyz_uv\")&&(delete l.u,delete l.v),Mu(n,t,l)}function ua(e,t,r,n,i){if(r){let s=r.tryGetConcreteTree(e,t);for(let o of s.getDependencies())n[o]=!0;return s.isConstant?+s.asValue():NaN}else return i}function U0(e,t,r){let n=!0,i=!0;return isFinite(e)||(n=!1,e=NaN),isFinite(t)||(i=!1,t=NaN),n?i?e>t&&(n=!1,i=!1,r.error=Kb().getError()):r.error=Qb().getError():r.error=jb().getError(),{min:e,max:t,minValid:n,maxValid:i}}function ez(e,t,r){let n=e.evaluationState,i=e.rawTree,s=i.metaData.vizAxisOffset,o=i.metaData.vizBreadth,a={},u=ua(t,r,s,a,1),c=ua(t,r,o,a,1),l=!0,p=!0;isFinite(u)||(l=!1,u=NaN),isFinite(c)||(p=!1,c=NaN),l?p||(n.error=ob().getError()):n.error=sb().getError(),i.metaData.evaluatedAxisOffset=u,i.metaData.evaluatedBreadth=c,n.viz_values={axisOffset:u,breadth:c},n.viz_valids={axisOffset:l,breadth:p},Mu(n,t,a)}function tz(e){return e.globalRandomSeed||[]}function z0(e,t,r,n,i){let s={},o={},a=[],u=[];for(let c in n)n[c]&&(o[c]=!0,a.push(c));for(let c in i)i[c]&&(s[c]=!0,u.push(c));for(;a.length||u.length;){for(;a.length;){let c=a.pop(),l=t[c];if(l)for(let p of l.getLegalExports(e))s[p]||(s[p]=!0,u.push(p))}for(;u.length;){let c=u.pop(),l=r[c];if(l)for(let p of l)o[p]||(o[p]=!0,a.push(p))}}return{ids:o,symbols:s}}function H0(e,t,r){if(e.isError||e.getDependencies().length||e.valueType!==Ke)return;let n=e.asValue();if(n)for(let i in n.updateRules){t[i]=bI(n,i);let{value:s,valueType:o}=n.updateRules[i];r[i]=new D.Assignment(i,st(o,s))}}var Gg=class{constructor(){this.childIntersections=new Ef;this.getCLSymbolMap=WN;this.statements={},this.analysis={},this.currentStatus={},this.currentLabel={},this.unpublishedIds={},this.dimensions={width:0,height:0},this.intersectId=void 0,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={},this.markedRegressionDirty=!1,this.use_degrees=!1,this.initialEvaluation=!1,this.globalEventCount=0,this.actions=!0,this.substitutions=!0,this.intervalComprehensions=!1,this.setEvaluationMode(\"graphing\"),this.setProduct(\"graphing\"),this.setBeta3d(!1),this.setRestrictedFunctions(!1),this.setForceEnableGeometryFunctions(!1),this.setFunctionDefinition(!0),this.setReplaceRoundWithReciprocal(!1),this.setDistributions(!0),this.invalidate()}invalidate(){delete this.statements[Io];for(let r in this.statements)this.statements.hasOwnProperty(r)&&this.markAsDirtyRoot(r);this.currentStatus={},this.analysis={};let t=this.viewState?{xAxisScale:this.viewState.xAxisScale,yAxisScale:this.viewState.yAxisScale}:void 0;this.policy=V2(this.evaluationMode,this.product===\"graphing-3d\",this.beta3d,t),this.parent_frame=G2[this.evaluationMode].getFrame({restrictedFunctions:this.restrictedFunctions,forceEnableGeometryFunctions:this.forceEnableGeometryFunctions,isGeometryCalculator:this.evaluationMode===\"geometry\",is3DCalculator:this.product===\"graphing-3d\",replaceRoundWithReciprocal:this.replaceRoundWithReciprocal,distributions:this.distributions,additionalFunctions:this.additionalFunctions,trigAngleMultiplier:new Eo(this.use_degrees?Math.PI/180:Ve(1,1)),initialEvaluation:new Eo(this.initialEvaluation?1:0),globalEventCount:new Eo(0),globalRandomSeed:new jN(this.globalRandomSeedString||\"\"),width:this.policy.dimensionVarsEnabled()?new Eo(Ve(this.dimensions.width,1)):tm(\"width\"),height:this.policy.dimensionVarsEnabled()?new Eo(Ve(this.dimensions.height,1)):tm(\"height\")}),this.frame=Object.create(this.parent_frame),this.lastFrame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame),this.lastClockTickTime=void 0}getAllActionUpdateSymbols(){var r;let t=new Set;for(let n in this.statements){let i=this.statements[n];i.getUpdateSymbols().forEach(o=>t.add(o)),i instanceof D.Ticker&&i.handler.getUpdateSymbols().forEach(o=>t.add(o));let s=this.analysis[n];(tf(i)||s&&s.getGraphMode()!==4&&gI(s.evaluationState.expression_type))&&((r=i.metaData.clickHandler)==null||r.getUpdateSymbols().forEach(o=>t.add(o)))}return[...new Set(t)]}processChangeSet(t){let r=Fa(),n={cacheWrites:0,cacheReads:0,cacheHits:0,cacheMisses:0};eS(n);let i={intersections:{},graphs:{}};t.isCompleteState&&(this.invalidate(),this.statements={},this.currentLabel={});let s=!!t.isCompleteState&&!t.isUndoRedoState;s!==this.initialEvaluation&&(this.initialEvaluation=s,this.invalidate()),t.hasOwnProperty(\"logInternalErrors\")&&hh(t.logInternalErrors),t.viewState&&this.setViewState(t.viewState),t.hasOwnProperty(\"degreeMode\")&&this.setDegreeMode(t.degreeMode),t.hasOwnProperty(\"globalRandomSeed\")&&this.setGlobalRandomSeed(t.globalRandomSeed),t.hasOwnProperty(\"evaluationMode\")&&this.setEvaluationMode(t.evaluationMode),t.hasOwnProperty(\"additionalFunctions\")&&this.setAdditionalFunctions(t.additionalFunctions),t.hasOwnProperty(\"restrictedFunctions\")&&this.setRestrictedFunctions(t.restrictedFunctions),t.hasOwnProperty(\"forceEnableGeometryFunctions\")&&this.setForceEnableGeometryFunctions(t.forceEnableGeometryFunctions),t.hasOwnProperty(\"distributions\")&&this.setDistributions(t.distributions),t.hasOwnProperty(\"functionDefinition\")&&this.setFunctionDefinition(t.functionDefinition),t.hasOwnProperty(\"replaceRoundWithReciprocal\")&&this.setReplaceRoundWithReciprocal(t.replaceRoundWithReciprocal),t.hasOwnProperty(\"pointsOfInterest\")&&this.setWorkerConfigProperty(\"pointsOfInterest\",t.pointsOfInterest),t.hasOwnProperty(\"plotSingleVariableImplicitEquations\")&&this.setWorkerConfigProperty(\"plotSingleVariableImplicitEquations\",t.plotSingleVariableImplicitEquations),t.hasOwnProperty(\"plotImplicits\")&&this.setWorkerConfigProperty(\"plotImplicits\",t.plotImplicits),t.hasOwnProperty(\"plotInequalities\")&&this.setWorkerConfigProperty(\"plotInequalities\",t.plotInequalities),t.hasOwnProperty(\"sliders\")&&this.setWorkerConfigProperty(\"sliders\",t.sliders),t.hasOwnProperty(\"actions\")&&this.setActions(!!t.actions),t.hasOwnProperty(\"substitutions\")&&this.setSubstitutions(!!t.substitutions),t.hasOwnProperty(\"intervalComprehensions\")&&this.setIntervalComprehensions(!!t.intervalComprehensions),t.hasOwnProperty(\"beta3d\")&&this.setBeta3d(!!t.beta3d),t.hasOwnProperty(\"product\")&&this.setProduct(t.product);let o;if(t.hasOwnProperty(\"selectedIds\")){let p=t.selectedIds||{};(this.intersectId===void 0||!p[this.intersectId])&&([o]=Object.keys(p),this.intersectId=o)}t.hasOwnProperty(\"dimensions\")&&this.setDimensions(t.dimensions);let a=Fa();this.processStatements(t,i);let u=Fa();n.processStatements=u-a,a=u,this.updateAnalysis(),u=Fa(),n.updateAnalysis=u-a,a=u,o!==void 0&&this._updateIntersections(o,i),u=Fa(),n.updateIntersections=u-a,a=u;let c=this._publishAllStatuses();u=Fa(),n.publishAllStatuses=u-a,a=u,this._computeAllLabels(),u=Fa(),n.computeAllLabels=u-a,a=u,this._computeAriaDescriptions(),u=Fa(),n.computeAriaDescriptions=u-a,a=u,this._graphAllChanged(i),u=Fa(),n.graphAllChanges=u-a;let l=this.processEvents(t.events);return this.unpublishedIds={},n.timeInWorker=u-r,{syncId:t.syncId,isCompleteState:t.isCompleteState,intersectionChanges:i.intersections,statusChanges:c,graphChanges:i.graphs,timingData:n,eventUpdates:l}}processStatements(t,r){if(t.removes)for(let n in t.removes){let i;if(!t.isCompleteState&&this.statements.hasOwnProperty(n)&&(i=this.statements[n].getAllIds()),this.removeStatement(n,r),!t.isCompleteState&&i)for(let s of i)r.graphs[s]=void 0}if(t.statements)for(let n in t.statements){let i=t.statements[n];i===null||this.addStatement(i,r)}}setViewState(t){if(Ao(t,this.viewState))return;let r=!!(this.viewState&&t.xAxisScale===this.viewState.xAxisScale&&t.yAxisScale===this.viewState.yAxisScale);if(this.viewState=t,r)for(let n in this.statements)this.statements.hasOwnProperty(n)&&(this.unpublishedIds[n]=!0);else this.invalidate()}getViewState(){return this.viewState}setDegreeMode(t){this.use_degrees=t,this.invalidate()}setDimensions(t){t!==void 0&&(this.dimensions=t,this.invalidate())}setGlobalRandomSeed(t){this.globalRandomSeedString=t,this.parent_frame.globalRandomSeed=new jN(t),this.dirtyExportedSymbolRoots.globalRandomSeed=!0}setEvaluationMode(t){this.evaluationMode=t,this.invalidate()}setProduct(t){this.product=t,this.invalidate()}setBeta3d(t){this.beta3d=t,this.invalidate()}setAdditionalFunctions(t){this.additionalFunctions=t,this.invalidate()}setRestrictedFunctions(t){this.restrictedFunctions=t,this.invalidate()}setForceEnableGeometryFunctions(t){this.forceEnableGeometryFunctions=t,this.invalidate()}setDistributions(t){this.distributions=t,this.invalidate()}setFunctionDefinition(t){this.functionDefinition=t,this.invalidate()}setReplaceRoundWithReciprocal(t){this.replaceRoundWithReciprocal=t,this.invalidate()}setActions(t){t!==this.actions&&(this.actions=t,this.invalidate())}setSubstitutions(t){t!==this.substitutions&&(this.substitutions=t,this.invalidate())}setIntervalComprehensions(t){t!==this.intervalComprehensions&&(this.intervalComprehensions=t,this.invalidate())}setWorkerConfigProperty(t,r){r!==$i[t]&&($i[t]=r,this.invalidate())}_publishAllStatuses(){let t={},r=this.currentStatus;this.currentStatus={};for(let n in this.unpublishedIds){if(!this.analysis.hasOwnProperty(n))continue;let i=this.analysis[n].evaluationState;Ao(i,r[n])||(t[n]=i),this.currentStatus[n]=i}return t}_computeAllLabels(){for(let t in this.currentLabel){let r=this.statements[t];if(!r)continue;let n=r.tryGetConcreteTree(this.policy,this.frame),i=1;(n.valueType===ft||n.valueType===Tr||n.valueType===Nr||n.valueType===ar||n.valueType===ur)&&(i=n.length);let s=[],o=this.currentLabel[t];if(ao(o))for(let a=0;a<i;a++)s.push(B0(o,this.policy,this.frame,a));Ao(s,r.computedLabels)||(r.computedLabels=s,this.unpublishedIds[t]=!0)}}_computeAriaDescriptions(){for(let t in this.analysis){let r=this.analysis[t],n=r.evaluationState,s=r.rawTree.userData,o;if(s.description?o=s.description:s.label&&(o=s.label),o){n.computed_description=[];let a=1;r.concreteTree.isList?a=r.concreteTree.length:n.dimensions&&n.dimensions.x&&Array.isArray(n.dimensions.x)&&(a=n.dimensions.x.length);for(let u=0;u<a;u++)n.computed_description.push(B0(G0(o),this.policy,this.frame,u))}}}_graphAllChanged(t){let r=this.getViewState(),n=!1;if(!(!r||!SR(r))){for(let i in this.unpublishedIds){if(!this.analysis.hasOwnProperty(i))continue;let s=this.analysis[i],o=s.evaluationState.expression_type,a=o===\"SINGLE_POINT\"||o===\"POINT_LIST\";if(Cs(s.rawTree)){let u=s.graph(r,void 0),c=s.rawTree.getAllIds();for(let l of c)u[l]?this._notifyGraphComputed(l,u[l],t):this._notifyGraphRemoved(l,t)}else s.evaluationState.is_graphable&&(s.rawTree.userData.shouldGraph||s.rawTree.userData.showLabel&&a)?(this._notifyGraphComputed(i,s.graph(r,this.childIntersections.getChildIntersections(i)),t),this.intersectId===i&&(n=!0)):this._notifyGraphRemoved(i,t)}li(this.unpublishedIds).length&&this.intersectId!==void 0&&(this.unpublishedIds.hasOwnProperty(this.intersectId)||(n=!0)),n&&this._updateIntersections(this.intersectId,t)}}_notifyGraphRemoved(t,r){r.graphs[t]=void 0}_notifyGraphComputed(t,r,n){tv(r),n.graphs[t]=r}_updateIntersections(t,r){if(!this.viewState)return;if(!this.analysis[t]||!this.analysis[t].shouldIntersect()){r.intersections[t]=[];return}let n=ZN(this.analysis,this.viewState,t);r.intersections[t]=n}getDisabledFeatures(){let t=this.policy.disabledFeatures();this.functionDefinition===!1&&(t=t.concat(\"FunctionDefinition\")),this.actions===!1&&(t=t.concat(\"UpdateRule\")),this.substitutions===!1&&(t=t.concat([\"Substitution\",\"ListComprehension\"]));let r=this.additionalFunctions||[];return t=t.filter(n=>!(n===\"Exponent\"&&r.indexOf(\"exponent\")!==-1||n===\"PercentOf\"&&r.indexOf(\"percent\")!==-1)),t}areFractionsDisallowed(){let{evaluationMode:t}=this;return t!==\"fourFunction\"&&t!==\"singleExpressionFourFunction\"?!1:!this.additionalFunctions||this.additionalFunctions.indexOf(\"fraction\")===-1}addStatement(t,r){if(!t)return;let n=t.id;this.markExportsDirty(n),this.markAsDirtyRoot(n);let i;if(t.type===\"statement\"){let c=t.latexSelection;i=c&&{input:t.latex,start:c.start,end:c.end}}let s={index:this.policy.ansEnabled()?t.index:void 0,disabledFeatures:this.getDisabledFeatures(),disallowFrac:this.areFractionsDisallowed(),allowIntervalComprehensions:!!this.intervalComprehensions,seedPrefix:Kt(n),writeIntegral:this.evaluationMode===\"geometry\",selection:i},o={extraDepNodes:[]};switch(t.type){case\"table\":let c=[];this.statements.hasOwnProperty(n)&&(c=this.statements[n].getAllIds()),t.shouldGraph=!0;let l=t.columns,p=[],f=T=>!T.replace(/\\\\space|\\\\ /g,\"\").match(/\\S/);for(let T=0;T<l.length;T++){let M,O,S,C=l[T];M=Ns(C.latex,Q(q({},s),{seedPrefix:Kt(n,[[\"tr\",0],[\"tc\",T]])})),O=[];let A=-1;for(let L=0;L<l[T].values.length;L++)f(C.values[L])?O.push(new Eo(NaN)):(O.push(Ns(C.values[L],Q(q({},s),{seedPrefix:Kt(n,[[\"tr\",L+1],[\"tc\",T]])}))),A=L);if(O=O.slice(0,A+1),S=new w2(M,O),S.id=C.id,S.header){if(S.header.userData=C,S.header.metaData={extraDepNodes:[]},C.colorLatex){let L=Di(C.colorLatex,Q(q({},s),{seedPrefix:Kt(n,[[\"tr\",0],[\"tc\",T],[\"cl\",T]])}));S.header.metaData.colorLatex=L,S.header.metaData.extraDepNodes.push(L)}if(C.pointSize){let L=Di(C.pointSize,Q(q({},s),{seedPrefix:Kt(n,[[\"tr\",0],[\"tc\",T],[\"ps\",T]])}));S.header.metaData.pointSize=L,S.header.metaData.extraDepNodes.push(L)}if(C.pointOpacity){let L=Di(C.pointOpacity,Q(q({},s),{seedPrefix:Kt(n,[[\"tr\",0],[\"tc\",T],[\"po\",T]])}));S.header.metaData.pointOpacity=L,S.header.metaData.extraDepNodes.push(L)}if(C.lineWidth){let L=Di(C.lineWidth,Q(q({},s),{seedPrefix:Kt(n,[[\"tr\",0],[\"tc\",T],[\"lw\",T]])}));S.header.metaData.lineWidth=L,S.header.metaData.extraDepNodes.push(L)}if(C.lineOpacity){let L=Di(C.lineOpacity,Q(q({},s),{seedPrefix:Kt(n,[[\"tr\",0],[\"tc\",T],[\"lo\",T]])}));S.header.metaData.lineOpacity=L,S.header.metaData.extraDepNodes.push(L)}}p.push(S)}this.statements[n]=new L2(p);let d=this.statements[n].getAllIds();c.forEach(T=>{d.indexOf(T)===-1&&this._notifyGraphRemoved(T,r)});break;case\"image\":let g=\"-\\\\trigAngleMultiplier*(\"+t.angle+\")\",m=Di(t.center,Q(q({},s),{seedPrefix:Kt(n,[[\"ic\",n]])})),b=Di(g,Q(q({},s),{seedPrefix:Kt(n,[[\"ia\",n]])})),y=Di(t.width,Q(q({},s),{seedPrefix:Kt(n,[[\"iw\",n]])})),h=Di(t.height,Q(q({},s),{seedPrefix:Kt(n,[[\"ih\",n]])})),x=Di(t.opacity,Q(q({},s),{seedPrefix:Kt(n,[[\"io\",n]])}));this.statements[n]=new C2({center:m,radianAngle:b,width:y,height:h,opacity:x},void 0);break;case\"ticker\":{this.statements[n]=new D.Ticker({handler:Di(t.handlerLatex,Q(q({},s),{allowDt:!0})),minStep:Di(t.minStepLatex||\"0\",s)});break}case\"geometry-toolbar-predicate\":{this.statements[n]=Di(`\\\\{${t.latex}:1,0\\\\}`,q({},s));break}default:t=t;let P,E=_o(t.latex);E.slice(-1)===\"=\"?P=E.substring(0,E.length-1):P=t.latex,this.statements[n]=Ns(P,s);for(let T in vf){let M=T;if(t[M]){let O=vf[M],S=t[M];O.transform&&(S=O.transform(S));let C=Hi(S,Q(q({},s),{seedPrefix:Kt(n,[[O.seed,n]])}));o[M]=C,o.extraDepNodes.push(C)}}if(t.colorLatex){let T=Ou(t.colorLatex,Q(q({},s),{seedPrefix:Kt(n,[[\"ac\",n]])}));o.colorLatex=T,o.extraDepNodes.push(T)}if(t.polarDomain&&t.polarDomain.min&&(o.polarDomainMin=Hi(t.polarDomain.min,Q(q({},s),{seedPrefix:Kt(n,[[\"lm\",n]])})),o.extraDepNodes.push(o.polarDomainMin)),t.polarDomain&&t.polarDomain.max&&(o.polarDomainMax=Hi(t.polarDomain.max,Q(q({},s),{seedPrefix:Kt(n,[[\"lM\",n]])})),o.extraDepNodes.push(o.polarDomainMax)),t.parametricDomain&&t.parametricDomain.min&&(o.parametricDomainMin=Hi(t.parametricDomain.min,Q(q({},s),{seedPrefix:Kt(n,[[\"lm\",n]])})),o.extraDepNodes.push(o.parametricDomainMin)),t.parametricDomain&&t.parametricDomain.max&&(o.parametricDomainMax=Hi(t.parametricDomain.max,Q(q({},s),{seedPrefix:Kt(n,[[\"lM\",n]])})),o.extraDepNodes.push(o.parametricDomainMax)),t.parametricDomain3Du&&t.parametricDomain3Du.min&&(o.parametricDomain3DuMin=Hi(t.parametricDomain3Du.min,Q(q({},s),{seedPrefix:Kt(n,[[\"lm\",n]])})),o.extraDepNodes.push(o.parametricDomain3DuMin)),t.parametricDomain3Du&&t.parametricDomain3Du.max&&(o.parametricDomain3DuMax=Hi(t.parametricDomain3Du.max,Q(q({},s),{seedPrefix:Kt(n,[[\"lM\",n]])})),o.extraDepNodes.push(o.parametricDomain3DuMax)),t.parametricDomain3Dv&&t.parametricDomain3Dv.min&&(o.parametricDomain3DvMin=Hi(t.parametricDomain3Dv.min,Q(q({},s),{seedPrefix:Kt(n,[[\"lm\",n]])})),o.extraDepNodes.push(o.parametricDomain3DvMin)),t.parametricDomain3Dv&&t.parametricDomain3Dv.max&&(o.parametricDomain3DvMax=Hi(t.parametricDomain3Dv.max,Q(q({},s),{seedPrefix:Kt(n,[[\"lM\",n]])})),o.extraDepNodes.push(o.parametricDomain3DvMax)),t.parametricDomain3Dr&&t.parametricDomain3Dr.min&&(o.parametricDomain3DrMin=Hi(t.parametricDomain3Dr.min,Q(q({},s),{seedPrefix:Kt(n,[[\"lm\",n]])})),o.extraDepNodes.push(o.parametricDomain3DrMin)),t.parametricDomain3Dr&&t.parametricDomain3Dr.max&&(o.parametricDomain3DrMax=Hi(t.parametricDomain3Dr.max,Q(q({},s),{seedPrefix:Kt(n,[[\"lM\",n]])})),o.extraDepNodes.push(o.parametricDomain3DrMax)),t.parametricDomain3Dphi&&t.parametricDomain3Dphi.min&&(o.parametricDomain3DphiMin=Hi(t.parametricDomain3Dphi.min,Q(q({},s),{seedPrefix:Kt(n,[[\"lm\",n]])})),o.extraDepNodes.push(o.parametricDomain3DphiMin)),t.parametricDomain3Dphi&&t.parametricDomain3Dphi.max&&(o.parametricDomain3DphiMax=Hi(t.parametricDomain3Dphi.max,Q(q({},s),{seedPrefix:Kt(n,[[\"lM\",n]])})),o.extraDepNodes.push(o.parametricDomain3DphiMax)),t.vizProps&&(t.vizProps.axisOffset&&(o.vizAxisOffset=Hi(t.vizProps.axisOffset,Q(q({},s),{seedPrefix:Kt(n,[[\"vo\",n]])})),o.extraDepNodes.push(o.vizAxisOffset)),t.vizProps.breadth&&(o.vizBreadth=Hi(t.vizProps.breadth,Q(q({},s),{seedPrefix:Kt(n,[[\"vb\",n]])})),o.extraDepNodes.push(o.vizBreadth))),t.cdf&&t.cdf.show){let T=vS(t.latex);T&&T.type===\"distribution\"&&(o.distributionSpec=T,o.cdfMin=Ou(t.cdf.min,Q(q({},s),{seedPrefix:Kt(n,[[\"lm\",n]])})),o.extraDepNodes.push(o.cdfMin),o.cdfMax=Ou(t.cdf.max,Q(q({},s),{seedPrefix:Kt(n,[[\"lM\",n]])})),o.extraDepNodes.push(o.cdfMax))}if(this.statements[n].shouldPromoteToSlider(this.policy)){let T=t.slider,M=!!(T&&T.isPlayingOnce),O=Ou(T&&T.softMin,s),S=Ou(T&&T.softMax,s),C=Ou(T&&T.min,Q(q({},s),{seedPrefix:Kt(n,[[\"lm\",n]])})),A=Ou(T&&T.max,Q(q({},s),{seedPrefix:Kt(n,[[\"lM\",n]])})),L=Ou(T&&T.step,Q(q({},s),{seedPrefix:Kt(n,[[\"ls\",n]])}));this.statements[n]=new _2(this.statements[n],{sliderMin:C,sliderMax:A,sliderStep:L,sliderIsPlayingOnce:M,sliderSoftMin:O,sliderSoftMax:S})}}let a=t.clickableInfo;a&&a.enabled&&a.latex&&(o.clickHandler=Di(a.latex,Q(q({},s),{allowIndex:!0}))),this.statements[n].userData=t,this.statements[n].metaData=o;let u=t.label;if(u){let c=this.currentLabel[n];(!c||c.raw!==u)&&(this.currentLabel[n]=G0(u))}else delete this.currentLabel[n]}removeStatement(t,r){let n=this.statements[t];if(n){if(this.markExportsDirty(t),Cs(n)){let i=this;n.getAllIds().forEach(function(s){i._notifyGraphRemoved(s,r)})}else this._notifyGraphRemoved(t,r);delete this.currentLabel[t],delete this.statements[t],delete this.analysis[t],delete this.currentStatus[t]}}markExportsDirty(t){if(this.statements[t]){bl(this.statements[t])&&(this.markedRegressionDirty=!0);for(let r of this.statements[t].getLegalExports(this.policy))this.dirtyExportedSymbolRoots[r]=!0}}markAsDirtyRoot(t){this.dirtyStatementRoots[t]=!0}getFrame(){return this.updateAnalysis(),this.frame}getAnalysis(){return this.updateAnalysis(),this.analysis}getEvaluationState(t){if(this.updateAnalysis(),!!this.analysis[t])return this.analysis[t].evaluationState}_updateRegressions(t){let r=this.frame,n=this.lastFrame,i=this.regressionFrame;if(!this.policy.graphingEnabled())return;let s=[];for(let l in t)t.hasOwnProperty(l)&&bl(t[l])&&s.push(l);let o=this;s.sort(function(l,p){let f=o.statements[l].userData&&o.statements[l].userData.residualVariable,d=o.statements[p].userData&&o.statements[p].userData.residualVariable;return f&&!d?-1:d&&!f?1:0});let a=V0(this.policy,t,s);QN(a,i);let u=a.resolved,c={};for(let l of u)if(l!==Io)if(bl(this.statements[l]))this.analysis[l]=t[l].analyze(this.policy,i,r,n,c),this.analysis[l].exportTo(this.policy,r),delete t[l];else{let p=t[l].tryGetConcreteTree(this.policy,i);t[l].exportTo(this.policy,p,i),c[l]={rawTree:t[l],concreteTree:p}}}buildSymbolToExpressionDirtyMap(){let t={};for(let r in this.statements){if(!this.statements.hasOwnProperty(r))continue;let n=this.statements[r],i=n.metaData;if(Of(t,r,n.getDependencies()),Of(t,r,n.getLegalExports(this.policy)),bl(n)&&n.userData&&n.userData.residualVariable&&Of(t,r,[Co(n.userData.residualVariable)]),KN(t,r,i),Cs(n)&&n.columns)for(let s=0;s<n.columns.length;s++){let o=n.columns[s];!po(o)&&o.header&&o.header.metaData&&KN(t,r,o.header.metaData)}}return t}buildChildIntersectionMap(){var n,i;let t=this.childIntersections,r=new Ef;for(let s in this.analysis){let o=this.analysis[s],{geometry:a}=o.evaluationState;if(a!=null&&a.call&&a.call.symbol===\"intersection\"&&this.statements[s].userData.shouldGraph&&!o.concreteTree.isError){let u=!!this.unpublishedIds[s],c=o.concreteTree.asTypedValue();for(let l of a.call.parents){let p=l&&this.frame[l[0]],f=p&&p.userData.id;if(f==null)continue;let d=l&&l[1],g=this.analysis[f];W(g.concreteTree.asTypedValue().valueType)?r.addListParent(f,d===void 0?void 0:d-1,c):r.addPrimitiveParent(f,c),u&&(this.unpublishedIds[f]=!0)}}}for(let s in t.data){let o=((n=t.data[s])==null?void 0:n.count)||0;(((i=r.data[s])==null?void 0:i.count)||0)<o&&(this.unpublishedIds[s]=!0)}return r}updateConstruction(){if(!this.policy.isGeometryEnabled){this.parent_frame.construction=yp();return}let t=[];for(let o in this.statements)this.statements[o].userData.isInConstructionsFolder&&t.push(o);let r=this.statements[Io],n=new F2(t);n.metaData={extraDepNodes:[]},n.userData={};let i={};for(let o of(r==null?void 0:r.getDependencies())||[])i[o]=!0;let s={};for(let o of n.getDependencies())s[o]=!0;(!r||!Ao(i,s))&&(this.statements[Io]=n,this.parent_frame.construction=n,this.markAsDirtyRoot(Io),this.markExportsDirty(Io))}updateAnalysis(){var f;this.updateConstruction();let t=this.buildSymbolToExpressionDirtyMap(),r=z0(this.policy,this.statements,t,this.dirtyStatementRoots,this.dirtyExportedSymbolRoots),n=this.markedRegressionDirty;for(let d in r.ids)this.statements[d]&&bl(this.statements[d])&&(n=!0);let i={};if(n){for(let d in this.statements)this.statements[d]&&(i[d]=this.statements[d]);this.frame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)}else{let d=r.ids;for(let m in d)this.statements[m]&&(i[m]=this.statements[m]);let g=r.symbols;for(let m in g)g[m]&&(delete this.frame[m],delete this.regressionFrame[m])}for(let d in i)i[d]&&(this.unpublishedIds[d]=!0);this.markedRegressionDirty=!1,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={};let s=this.analysis,o=this.frame;(this.evaluationMode===\"graphing\"||this.evaluationMode===\"geometry\"||this.evaluationMode===\"graphing_3d\")&&this._updateRegressions(i);let a=V0(this.policy,i);QN(a,o);let u=a.resolved;for(let d of u)if(d!==Io)switch(this.evaluationMode){case\"fourFunction\":case\"singleExpressionFourFunction\":s[d]=this.statements[d].analyzeFourFunction(this.policy,o,s),s[d].exportTo(this.policy,o);break;case\"scientific\":s[d]=this.statements[d].analyzeScientific(this.policy,o,s),s[d].exportTo(this.policy,o);break;case\"singleExpressionScientific\":s[d]=this.statements[d].analyzeSingleExpressionScientific(this.policy,o,s),s[d].exportTo(this.policy,o);break;case\"graphing\":case\"graphing_3d\":case\"geometry\":if(!this.policy.graphingEnabled())break;if(o.r){let g=Object.create(o);if(g.r=void 0,s[d]=this.statements[d].analyze(this.policy,g,s),s[d].getGraphMode()===6){s[d].exportTo(this.policy,o);continue}}s[d]=this.statements[d].analyze(this.policy,o,s),s[d].exportTo(this.policy,o);break}if(this.policy.graphingEnabled()){for(let d of u){if(d===Io)continue;let g=s[d],m=g.evaluationState.expression_type;for(let b in vf){let y=b;var c=vf[y];this.evaluationMode!==\"graphing_3d\"&&y===\"resolution\"||(!c.shouldEvaluate||c.shouldEvaluate(g))&&$2(g,this.policy,o,y)}W2(g,this.policy,o),this.product===\"graphing-3d\"&&J2(g),this.actions&&z2(g)&&j2(g,this.policy,o),m===\"PARAMETRIC\"||m===\"CURVE3D_xyz_t\"||m===\"POLAR\"||m===\"SURFACE_r_\\u03B8z\"||m===\"SURFACE_r_\\u03B8z_AMBIGUOUS\"||m===\"SLICE_r\\u03B8z_at_z\"?Q2(g,this.policy,o):m===\"SURFACE_xyz_uv\"||m===\"SLICE_xyz_uv\"||m===\"SURFACE_r_\\u03B8\\u03C6\"||m===\"SURFACE_z_r\\u03B8\"||m===\"SLICE_zr\\u03B8_at_r\"||m===\"SLICE_zr\\u03B8_at_\\u03B8\"||m===\"SLICE_zr\\u03B8_at_xyz\"||m===\"SLICE_r\\u03B8\\u03C6_at_\\u03B8\"||m===\"SLICE_r\\u03B8\\u03C6_at_\\u03C6\"||m===\"SLICE_r\\u03B8\\u03C6_at_xyz\"?K2(g,this.policy,o):m===\"BOXPLOT\"?ez(g,this.policy,o):B2(g)&&X2(g,this.policy,o)}this.childIntersections=this.buildChildIntersectionMap()}tz(t).forEach(function(d){s[d].evaluationState.depends_on_random_seed=!0});let l=z0(this.policy,this.statements,t,{[Io]:!0},{construction:!0});for(let d in l.ids){if(d===Io)continue;let g=s[d].evaluationState;g.geometry&&(g.geometry.unconstructable=!0)}let p;for(let d in this.statements)if((f=this.statements[d].parseOptions)!=null&&f.selection){p=d;break}if(p){let d=z0(this.policy,this.statements,t,{[p]:!0},{[`idref_${p}`]:!0});for(let g in d.ids){if(g===Io)continue;let m=s[g].evaluationState;m.geometry&&(m.geometry.depends_on_selected=!0)}}this.lastFrame=Object.create(this.parent_frame);for(let d in o)o.hasOwnProperty(d)&&(this.lastFrame[d]=o[d])}processEvents(t){if(!t||!this.actions)return;let r=Object.create(this.frame),n={},i=!1,s=!1,o;for(let c of t)switch(this.globalEventCount+=1,r.globalEventCount=new D.Constant(this.globalEventCount),c.type){case\"step\":{let p=this.statements[c.expressionId];if(!p)continue;let f=p.tryGetConcreteTree(this.policy,r);s=!0,H0(f,n,r);break}case\"click\":{let p=this.statements[c.expressionId];if(!p||!p.metaData.clickHandler)continue;r.index=new D.Constant(c.indexVar+1);let f=p.metaData.clickHandler.tryGetConcreteTree(this.policy,r);s=!0,i=!0,H0(f,n,r);break}case\"clock-tick\":{(o===void 0||c.isFirstTick&&!o.isFirstTick)&&(o=c);break}default:return c}if(o){let c=this.statements[o.id];if(c&&c instanceof D.Ticker){var a=c.minStep.tryGetConcreteTree(this.policy,r).asValue(),u=typeof a==\"number\"&&a>=0&&isFinite(a);if(u){let l=this.lastClockTickTime;if(this.lastClockTickTime=Date.now(),!o.isFirstTick&&l!==void 0){r.dt=new D.Constant(this.lastClockTickTime-l);let p=c.handler.tryGetConcreteTree(this.policy,r);H0(p,n,r)}}}}return{objectClicked:i,userAction:s,updates:n}}};var nA=class{constructor(t){this.context=new Gg,this.sendMessage=t}processChangeSet(t){var r=this.context.processChangeSet(t);this.sendMessage(\"processChangeSet\",r)}};Object.defineProperty(__dcg_chunk_exports__, 'a', { get: () => q });\nObject.defineProperty(__dcg_chunk_exports__, 'b', { get: () => Q });\nObject.defineProperty(__dcg_chunk_exports__, 'c', { get: () => rz });\nObject.defineProperty(__dcg_chunk_exports__, 'd', { get: () => J0 });\nObject.defineProperty(__dcg_chunk_exports__, 'e', { get: () => nz });\nObject.defineProperty(__dcg_chunk_exports__, 'f', { get: () => iz });\nObject.defineProperty(__dcg_chunk_exports__, 'g', { get: () => Ys });\nObject.defineProperty(__dcg_chunk_exports__, 'h', { get: () => sz });\nObject.defineProperty(__dcg_chunk_exports__, 'i', { get: () => oz });\nObject.defineProperty(__dcg_chunk_exports__, 'j', { get: () => UE });\nObject.defineProperty(__dcg_chunk_exports__, 'k', { get: () => qE });\nObject.defineProperty(__dcg_chunk_exports__, 'l', { get: () => As });\nObject.defineProperty(__dcg_chunk_exports__, 'm', { get: () => NR });\nObject.defineProperty(__dcg_chunk_exports__, 'n', { get: () => AJ });\nObject.defineProperty(__dcg_chunk_exports__, 'o', { get: () => ai });\nObject.defineProperty(__dcg_chunk_exports__, 'p', { get: () => xr });\nObject.defineProperty(__dcg_chunk_exports__, 'q', { get: () => Vt });\nObject.defineProperty(__dcg_chunk_exports__, 'r', { get: () => I });\nObject.defineProperty(__dcg_chunk_exports__, 's', { get: () => N });\nObject.defineProperty(__dcg_chunk_exports__, 't', { get: () => er });\nObject.defineProperty(__dcg_chunk_exports__, 'u', { get: () => ie });\nObject.defineProperty(__dcg_chunk_exports__, 'v', { get: () => sn });\nObject.defineProperty(__dcg_chunk_exports__, 'w', { get: () => ft });\nObject.defineProperty(__dcg_chunk_exports__, 'x', { get: () => Pr });\nObject.defineProperty(__dcg_chunk_exports__, 'y', { get: () => Be });\nObject.defineProperty(__dcg_chunk_exports__, 'z', { get: () => Wr });\nObject.defineProperty(__dcg_chunk_exports__, 'A', { get: () => we });\nObject.defineProperty(__dcg_chunk_exports__, 'B', { get: () => Nr });\nObject.defineProperty(__dcg_chunk_exports__, 'C', { get: () => De });\nObject.defineProperty(__dcg_chunk_exports__, 'D', { get: () => Tr });\nObject.defineProperty(__dcg_chunk_exports__, 'E', { get: () => me });\nObject.defineProperty(__dcg_chunk_exports__, 'F', { get: () => Hr });\nObject.defineProperty(__dcg_chunk_exports__, 'G', { get: () => fe });\nObject.defineProperty(__dcg_chunk_exports__, 'H', { get: () => Ur });\nObject.defineProperty(__dcg_chunk_exports__, 'I', { get: () => ye });\nObject.defineProperty(__dcg_chunk_exports__, 'J', { get: () => qr });\nObject.defineProperty(__dcg_chunk_exports__, 'K', { get: () => Le });\nObject.defineProperty(__dcg_chunk_exports__, 'L', { get: () => kr });\nObject.defineProperty(__dcg_chunk_exports__, 'M', { get: () => Ne });\nObject.defineProperty(__dcg_chunk_exports__, 'N', { get: () => ar });\nObject.defineProperty(__dcg_chunk_exports__, 'O', { get: () => Te });\nObject.defineProperty(__dcg_chunk_exports__, 'P', { get: () => ur });\nObject.defineProperty(__dcg_chunk_exports__, 'Q', { get: () => He });\nObject.defineProperty(__dcg_chunk_exports__, 'R', { get: () => Cn });\nObject.defineProperty(__dcg_chunk_exports__, 'S', { get: () => he });\nObject.defineProperty(__dcg_chunk_exports__, 'T', { get: () => Yr });\nObject.defineProperty(__dcg_chunk_exports__, 'U', { get: () => kn });\nObject.defineProperty(__dcg_chunk_exports__, 'V', { get: () => lr });\nObject.defineProperty(__dcg_chunk_exports__, 'W', { get: () => ui });\nObject.defineProperty(__dcg_chunk_exports__, 'X', { get: () => H });\nObject.defineProperty(__dcg_chunk_exports__, 'Y', { get: () => eE });\nObject.defineProperty(__dcg_chunk_exports__, 'Z', { get: () => dA });\nObject.defineProperty(__dcg_chunk_exports__, '_', { get: () => Xn });\nObject.defineProperty(__dcg_chunk_exports__, '$', { get: () => le });\nObject.defineProperty(__dcg_chunk_exports__, 'aa', { get: () => W });\nObject.defineProperty(__dcg_chunk_exports__, 'ba', { get: () => We });\nObject.defineProperty(__dcg_chunk_exports__, 'ca', { get: () => Al });\nObject.defineProperty(__dcg_chunk_exports__, 'da', { get: () => So });\nObject.defineProperty(__dcg_chunk_exports__, 'ea', { get: () => Nf });\nObject.defineProperty(__dcg_chunk_exports__, 'fa', { get: () => ne });\nObject.defineProperty(__dcg_chunk_exports__, 'ga', { get: () => la });\nObject.defineProperty(__dcg_chunk_exports__, 'ha', { get: () => Fe });\nObject.defineProperty(__dcg_chunk_exports__, 'ia', { get: () => tE });\nObject.defineProperty(__dcg_chunk_exports__, 'ja', { get: () => Af });\nObject.defineProperty(__dcg_chunk_exports__, 'ka', { get: () => Rz });\nObject.defineProperty(__dcg_chunk_exports__, 'la', { get: () => Ts });\nObject.defineProperty(__dcg_chunk_exports__, 'ma', { get: () => fa });\nObject.defineProperty(__dcg_chunk_exports__, 'na', { get: () => Ws });\nObject.defineProperty(__dcg_chunk_exports__, 'oa', { get: () => bA });\nObject.defineProperty(__dcg_chunk_exports__, 'pa', { get: () => Az });\nObject.defineProperty(__dcg_chunk_exports__, 'qa', { get: () => Cz });\nObject.defineProperty(__dcg_chunk_exports__, 'ra', { get: () => Zn });\nObject.defineProperty(__dcg_chunk_exports__, 'sa', { get: () => _z });\nObject.defineProperty(__dcg_chunk_exports__, 'ta', { get: () => Gr });\nObject.defineProperty(__dcg_chunk_exports__, 'ua', { get: () => Ac });\nObject.defineProperty(__dcg_chunk_exports__, 'va', { get: () => Gf });\nObject.defineProperty(__dcg_chunk_exports__, 'wa', { get: () => vA });\nObject.defineProperty(__dcg_chunk_exports__, 'xa', { get: () => Hz });\nObject.defineProperty(__dcg_chunk_exports__, 'ya', { get: () => Uz });\nObject.defineProperty(__dcg_chunk_exports__, 'za', { get: () => Rc });\nObject.defineProperty(__dcg_chunk_exports__, 'Aa', { get: () => PE });\nObject.defineProperty(__dcg_chunk_exports__, 'Ba', { get: () => OA });\nObject.defineProperty(__dcg_chunk_exports__, 'Ca', { get: () => kz });\nObject.defineProperty(__dcg_chunk_exports__, 'Da', { get: () => Yz });\nObject.defineProperty(__dcg_chunk_exports__, 'Ea', { get: () => Xz });\nObject.defineProperty(__dcg_chunk_exports__, 'Fa', { get: () => Wz });\nObject.defineProperty(__dcg_chunk_exports__, 'Ga', { get: () => Jz });\nObject.defineProperty(__dcg_chunk_exports__, 'Ha', { get: () => Vl });\nObject.defineProperty(__dcg_chunk_exports__, 'Ia', { get: () => Qz });\nObject.defineProperty(__dcg_chunk_exports__, 'Ja', { get: () => NA });\nObject.defineProperty(__dcg_chunk_exports__, 'Ka', { get: () => _A });\nObject.defineProperty(__dcg_chunk_exports__, 'La', { get: () => rH });\nObject.defineProperty(__dcg_chunk_exports__, 'Ma', { get: () => sH });\nObject.defineProperty(__dcg_chunk_exports__, 'Na', { get: () => oH });\nObject.defineProperty(__dcg_chunk_exports__, 'Oa', { get: () => li });\nObject.defineProperty(__dcg_chunk_exports__, 'Pa', { get: () => Fl });\nObject.defineProperty(__dcg_chunk_exports__, 'Qa', { get: () => UA });\nObject.defineProperty(__dcg_chunk_exports__, 'Ra', { get: () => Ao });\nObject.defineProperty(__dcg_chunk_exports__, 'Sa', { get: () => lH });\nObject.defineProperty(__dcg_chunk_exports__, 'Ta', { get: () => Cc });\nObject.defineProperty(__dcg_chunk_exports__, 'Ua', { get: () => _c });\nObject.defineProperty(__dcg_chunk_exports__, 'Va', { get: () => XA });\nObject.defineProperty(__dcg_chunk_exports__, 'Wa', { get: () => bH });\nObject.defineProperty(__dcg_chunk_exports__, 'Xa', { get: () => PH });\nObject.defineProperty(__dcg_chunk_exports__, 'Ya', { get: () => nh });\nObject.defineProperty(__dcg_chunk_exports__, 'Za', { get: () => tC });\nObject.defineProperty(__dcg_chunk_exports__, '_a', { get: () => wE });\nObject.defineProperty(__dcg_chunk_exports__, '$a', { get: () => Uf });\nObject.defineProperty(__dcg_chunk_exports__, 'ab', { get: () => oC });\nObject.defineProperty(__dcg_chunk_exports__, 'bb', { get: () => oh });\nObject.defineProperty(__dcg_chunk_exports__, 'cb', { get: () => Qr });\nObject.defineProperty(__dcg_chunk_exports__, 'db', { get: () => uC });\nObject.defineProperty(__dcg_chunk_exports__, 'eb', { get: () => Co });\nObject.defineProperty(__dcg_chunk_exports__, 'fb', { get: () => _o });\nObject.defineProperty(__dcg_chunk_exports__, 'gb', { get: () => ma });\nObject.defineProperty(__dcg_chunk_exports__, 'hb', { get: () => Xe });\nObject.defineProperty(__dcg_chunk_exports__, 'ib', { get: () => CF });\nObject.defineProperty(__dcg_chunk_exports__, 'jb', { get: () => $n });\nObject.defineProperty(__dcg_chunk_exports__, 'kb', { get: () => ki });\nObject.defineProperty(__dcg_chunk_exports__, 'lb', { get: () => yM });\nObject.defineProperty(__dcg_chunk_exports__, 'mb', { get: () => Ip });\nObject.defineProperty(__dcg_chunk_exports__, 'nb', { get: () => Om });\nObject.defineProperty(__dcg_chunk_exports__, 'ob', { get: () => Xi });\nObject.defineProperty(__dcg_chunk_exports__, 'pb', { get: () => BM });\nObject.defineProperty(__dcg_chunk_exports__, 'qb', { get: () => C8 });\nObject.defineProperty(__dcg_chunk_exports__, 'rb', { get: () => V8 });\nObject.defineProperty(__dcg_chunk_exports__, 'sb', { get: () => so });\nObject.defineProperty(__dcg_chunk_exports__, 'tb', { get: () => __ });\nObject.defineProperty(__dcg_chunk_exports__, 'ub', { get: () => Zr });\nObject.defineProperty(__dcg_chunk_exports__, 'vb', { get: () => hD });\nObject.defineProperty(__dcg_chunk_exports__, 'wb', { get: () => il });\nObject.defineProperty(__dcg_chunk_exports__, 'xb', { get: () => al });\nObject.defineProperty(__dcg_chunk_exports__, 'yb', { get: () => ul });\nObject.defineProperty(__dcg_chunk_exports__, 'zb', { get: () => ZP });\nObject.defineProperty(__dcg_chunk_exports__, 'Ab', { get: () => $P });\nObject.defineProperty(__dcg_chunk_exports__, 'Bb', { get: () => OP });\nObject.defineProperty(__dcg_chunk_exports__, 'Cb', { get: () => Tw });\nObject.defineProperty(__dcg_chunk_exports__, 'Db', { get: () => ZD });\nObject.defineProperty(__dcg_chunk_exports__, 'Eb', { get: () => Iw });\nObject.defineProperty(__dcg_chunk_exports__, 'Fb', { get: () => ey });\nObject.defineProperty(__dcg_chunk_exports__, 'Gb', { get: () => Lp });\nObject.defineProperty(__dcg_chunk_exports__, 'Hb', { get: () => WP });\nObject.defineProperty(__dcg_chunk_exports__, 'Ib', { get: () => JP });\nObject.defineProperty(__dcg_chunk_exports__, 'Jb', { get: () => WD });\nObject.defineProperty(__dcg_chunk_exports__, 'Kb', { get: () => Dw });\nObject.defineProperty(__dcg_chunk_exports__, 'Lb', { get: () => JD });\nObject.defineProperty(__dcg_chunk_exports__, 'Mb', { get: () => vw });\nObject.defineProperty(__dcg_chunk_exports__, 'Nb', { get: () => jD });\nObject.defineProperty(__dcg_chunk_exports__, 'Ob', { get: () => Ow });\nObject.defineProperty(__dcg_chunk_exports__, 'Pb', { get: () => Vw });\nObject.defineProperty(__dcg_chunk_exports__, 'Qb', { get: () => zw });\nObject.defineProperty(__dcg_chunk_exports__, 'Rb', { get: () => Hw });\nObject.defineProperty(__dcg_chunk_exports__, 'Sb', { get: () => Xo });\nObject.defineProperty(__dcg_chunk_exports__, 'Tb', { get: () => ao });\nObject.defineProperty(__dcg_chunk_exports__, 'Ub', { get: () => Z8 });\nObject.defineProperty(__dcg_chunk_exports__, 'Vb', { get: () => sF });\nObject.defineProperty(__dcg_chunk_exports__, 'Wb', { get: () => D });\nObject.defineProperty(__dcg_chunk_exports__, 'Xb', { get: () => en });\nObject.defineProperty(__dcg_chunk_exports__, 'Yb', { get: () => YY });\nObject.defineProperty(__dcg_chunk_exports__, 'Zb', { get: () => ly });\nObject.defineProperty(__dcg_chunk_exports__, '_b', { get: () => iv });\nObject.defineProperty(__dcg_chunk_exports__, '$b', { get: () => xT });\nObject.defineProperty(__dcg_chunk_exports__, 'ac', { get: () => _v });\nObject.defineProperty(__dcg_chunk_exports__, 'bc', { get: () => co });\nObject.defineProperty(__dcg_chunk_exports__, 'cc', { get: () => Ey });\nObject.defineProperty(__dcg_chunk_exports__, 'dc', { get: () => kv });\nObject.defineProperty(__dcg_chunk_exports__, 'ec', { get: () => tn });\nObject.defineProperty(__dcg_chunk_exports__, 'fc', { get: () => Ie });\nObject.defineProperty(__dcg_chunk_exports__, 'gc', { get: () => CT });\nObject.defineProperty(__dcg_chunk_exports__, 'hc', { get: () => pu });\nObject.defineProperty(__dcg_chunk_exports__, 'ic', { get: () => xO });\nObject.defineProperty(__dcg_chunk_exports__, 'jc', { get: () => RO });\nObject.defineProperty(__dcg_chunk_exports__, 'kc', { get: () => Ns });\nObject.defineProperty(__dcg_chunk_exports__, 'lc', { get: () => aS });\nObject.defineProperty(__dcg_chunk_exports__, 'mc', { get: () => Ko });\nObject.defineProperty(__dcg_chunk_exports__, 'nc', { get: () => vS });\nObject.defineProperty(__dcg_chunk_exports__, 'oc', { get: () => OS });\nObject.defineProperty(__dcg_chunk_exports__, 'pc', { get: () => gI });\nObject.defineProperty(__dcg_chunk_exports__, 'qc', { get: () => SS });\nObject.defineProperty(__dcg_chunk_exports__, 'rc', { get: () => RS });\nObject.defineProperty(__dcg_chunk_exports__, 'sc', { get: () => NS });\nObject.defineProperty(__dcg_chunk_exports__, 'tc', { get: () => ea });\nObject.defineProperty(__dcg_chunk_exports__, 'uc', { get: () => O3 });\nObject.defineProperty(__dcg_chunk_exports__, 'vc', { get: () => z7 });\nObject.defineProperty(__dcg_chunk_exports__, 'wc', { get: () => ff });\nObject.defineProperty(__dcg_chunk_exports__, 'xc', { get: () => kS });\nObject.defineProperty(__dcg_chunk_exports__, 'yc', { get: () => _I });\nObject.defineProperty(__dcg_chunk_exports__, 'zc', { get: () => LI });\nObject.defineProperty(__dcg_chunk_exports__, 'Ac', { get: () => wI });\nObject.defineProperty(__dcg_chunk_exports__, 'Bc', { get: () => GI });\nObject.defineProperty(__dcg_chunk_exports__, 'Cc', { get: () => Gs });\nObject.defineProperty(__dcg_chunk_exports__, 'Dc', { get: () => Li });\nObject.defineProperty(__dcg_chunk_exports__, 'Ec', { get: () => QS });\nObject.defineProperty(__dcg_chunk_exports__, 'Fc', { get: () => lW });\nObject.defineProperty(__dcg_chunk_exports__, 'Gc', { get: () => pW });\nObject.defineProperty(__dcg_chunk_exports__, 'Hc', { get: () => nR });\nObject.defineProperty(__dcg_chunk_exports__, 'Ic', { get: () => iR });\nObject.defineProperty(__dcg_chunk_exports__, 'Jc', { get: () => fW });\nObject.defineProperty(__dcg_chunk_exports__, 'Kc', { get: () => df });\nObject.defineProperty(__dcg_chunk_exports__, 'Lc', { get: () => dW });\nObject.defineProperty(__dcg_chunk_exports__, 'Mc', { get: () => uG });\nObject.defineProperty(__dcg_chunk_exports__, 'Nc', { get: () => mW });\nObject.defineProperty(__dcg_chunk_exports__, 'Oc', { get: () => yW });\nObject.defineProperty(__dcg_chunk_exports__, 'Pc', { get: () => gW });\nObject.defineProperty(__dcg_chunk_exports__, 'Qc', { get: () => gf });\nObject.defineProperty(__dcg_chunk_exports__, 'Rc', { get: () => Pg });\nObject.defineProperty(__dcg_chunk_exports__, 'Sc', { get: () => wJ });\nObject.defineProperty(__dcg_chunk_exports__, 'Tc', { get: () => VJ });\nObject.defineProperty(__dcg_chunk_exports__, 'Uc', { get: () => GJ });\nObject.defineProperty(__dcg_chunk_exports__, 'Vc', { get: () => FR });\nObject.defineProperty(__dcg_chunk_exports__, 'Wc', { get: () => BJ });\nObject.defineProperty(__dcg_chunk_exports__, 'Xc', { get: () => wG });\nObject.defineProperty(__dcg_chunk_exports__, 'Yc', { get: () => UJ });\nObject.defineProperty(__dcg_chunk_exports__, 'Zc', { get: () => qJ });\nObject.defineProperty(__dcg_chunk_exports__, '_c', { get: () => GR });\nObject.defineProperty(__dcg_chunk_exports__, '$c', { get: () => BR });\nObject.defineProperty(__dcg_chunk_exports__, 'ad', { get: () => Tg });\nObject.defineProperty(__dcg_chunk_exports__, 'bd', { get: () => zR });\nObject.defineProperty(__dcg_chunk_exports__, 'cd', { get: () => HR });\nObject.defineProperty(__dcg_chunk_exports__, 'dd', { get: () => UR });\nObject.defineProperty(__dcg_chunk_exports__, 'ed', { get: () => nj });\nObject.defineProperty(__dcg_chunk_exports__, 'fd', { get: () => ij });\nObject.defineProperty(__dcg_chunk_exports__, 'gd', { get: () => FG });\nObject.defineProperty(__dcg_chunk_exports__, 'hd', { get: () => sj });\nObject.defineProperty(__dcg_chunk_exports__, 'id', { get: () => oj });\nObject.defineProperty(__dcg_chunk_exports__, 'jd', { get: () => e0 });\nObject.defineProperty(__dcg_chunk_exports__, 'kd', { get: () => Ig });\nObject.defineProperty(__dcg_chunk_exports__, 'ld', { get: () => VG });\nObject.defineProperty(__dcg_chunk_exports__, 'md', { get: () => GG });\nObject.defineProperty(__dcg_chunk_exports__, 'nd', { get: () => xc });\nObject.defineProperty(__dcg_chunk_exports__, 'od', { get: () => HG });\nObject.defineProperty(__dcg_chunk_exports__, 'pd', { get: () => UG });\nObject.defineProperty(__dcg_chunk_exports__, 'qd', { get: () => vl });\nObject.defineProperty(__dcg_chunk_exports__, 'rd', { get: () => IB });\nObject.defineProperty(__dcg_chunk_exports__, 'sd', { get: () => YN });\nObject.defineProperty(__dcg_chunk_exports__, 'td', { get: () => uz });\nObject.defineProperty(__dcg_chunk_exports__, 'ud', { get: () => h2 });\nObject.defineProperty(__dcg_chunk_exports__, 'vd', { get: () => b2 });\nObject.defineProperty(__dcg_chunk_exports__, 'wd', { get: () => Mf });\nObject.defineProperty(__dcg_chunk_exports__, 'xd', { get: () => Df });\nObject.defineProperty(__dcg_chunk_exports__, 'yd', { get: () => Gg });\nObject.defineProperty(__dcg_chunk_exports__, 'zd', { get: () => nA });\n\n    return __dcg_chunk_exports__;\n  })();"
  const __dcg_shared_module_exports__ = eval(__dcg_shared_module_source__);
  const __dcg_worker_source_exports__ = (function () {
    // worker.js
    const __dcg_worker_source__ = `
      // store the code for the worker module as a function that takes the shared module exports as an argument
      const __dcg_worker_module__ = (__dcg_shared_module_exports__) => {
` + "var o={};__dcg_shared_module_exports__['td'].log=function(e){self.postMessage({log:JSON.stringify(e)})};var a=self;a.window=a;a.onmessage=function(e){var n=e.data&&e.data.connectionId;if(n)if(e.data.originalMessage.type===\"destroy\")delete o[n];else{var s=o[n];s||(s=new __dcg_shared_module_exports__['zd'](function(g,c){a.postMessage({connectionId:n,originalMessage:{type:g,payload:c}})}),o[n]=s),s.processChangeSet(e.data.originalMessage)}};a.loadMessageQueue&&(a.loadMessageQueue.forEach(function(e){a.onmessage(e)}),delete a.loadMessageQueue);\n" + `
      };
      // execute the shared module store its exports
      const __dcg_worker_shared_module_exports__ = ${__dcg_shared_module_source__};
      // call the worker module, passing in the shared module exports
      __dcg_worker_module__(__dcg_worker_shared_module_exports__);`

    let createWorker;
    if (typeof Blob !== 'undefined' && URL && typeof URL.createObjectURL === 'function') {
      createWorker = () => {
        const workerURL = URL.createObjectURL(new Blob([__dcg_worker_source__], { type: 'application/javascript' }))
        const worker = new Worker(workerURL);
        worker.revokeObjectURL = () => {
          URL.revokeObjectURL(workerURL);
        }
        return worker;
      }
    } else {
      // Just for testing in Node
      createWorker = () => {
        (new Function(__dcg_worker_source__))();
      }
    }

    return {createWorker, default: {createWorker}};
  })();
  var UG=__dcg_shared_module_exports__['f'](Um=>{var ze=Um&&Um.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r[n]=o[n])},t(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(e,i);function r(){this.constructor=e}e.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Gx=Um&&Um.__assign||function(){return Gx=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Gx.apply(this,arguments)};(function(){var t=-1,e=1,i=Math.min,r=Math.max;function o(){}function n(v,b){if(!b)throw new Error("prayer failed: "+v)}function a(v){n("a direction was passed",v===t||v===e)}function s(v){var b=document.implementation.createHTMLDocument("");if(b.body.innerHTML=v,b.body.children.length===1)return b.body.children[0];for(var d=document.createDocumentFragment();b.body.firstChild;)d.appendChild(b.body.firstChild);return d}var l=function(b,d,h){var y;switch(b){case"svg":case"path":y=document.createElementNS("http://www.w3.org/2000/svg",b);break;default:y=document.createElement(b)}for(var D in d){var L=d[D];L!==void 0&&y.setAttribute(D,typeof L=="string"?L:String(L))}if(h)for(var F=0;F<h.length;F++)y.appendChild(h[F]);return y};l.text=function(v){return document.createTextNode(v)},l.block=function(v,b,d){var h=l(v,b,[d.html()]);return d.setDOM(h),q.linkElementByBlockNode(h,d),h},l.entityText=function(v){var b=s(v);return n("entity parses to a single text node",b instanceof DocumentFragment&&b.childNodes.length===1&&b.childNodes[0]instanceof Text),b.childNodes[0]};function c(v,b){var d,h,y;if(typeof((d=v)===null||d===void 0?void 0:d.closest)=="function")return v.closest(b);if(!(v instanceof HTMLElement))return null;var D=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,L=v;do{if(D.call(L,b))return L;L=(y=(h=L==null?void 0:L.parentElement)!==null&&h!==void 0?h:L==null?void 0:L.parentNode)!==null&&y!==void 0?y:null}while(L!==null&&L.nodeType===1);return null}var p="\xA0",u="\u200B",g="\u02D9",m="\u2211",w="\u220F",C="\u2210",S="\u222B";function k(v){return v.getClientRects().length?v.getBoundingClientRect():{top:0,left:0,height:0,width:0,x:0,y:0,bottom:0,right:0}}function M(){return window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}function I(){return window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}var E=function(){var v,b;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(v=requestAnimationFrame,b=cancelAnimationFrame):(v=function(d){return setTimeout(d,13)},b=clearTimeout),function(d,h){var y=Date.now(),D,L=0;function F(){var Ce=(Date.now()-y)/d;Ce<=L?te():L=Ce,h(L,te,K)}function K(){D!==void 0&&b(D),D=void 0}function te(){K(),D=v(F)}h(d<=0?1:0,te,K)}}(),T=function(){function v(b){this.span=l("span",{class:"dcg-mq-aria-alert","aria-live":"assertive","aria-atomic":"true"}),this.msg="",this.items=[],this.controller=b}return v.prototype.attach=function(){var b=this.controller.container;this.span.parentNode!==b&&G(b).prepend(G(this.span))},v.prototype.queue=function(b,d){d===void 0&&(d=!1);var h="";if(b instanceof It){var y=b.mathspeak({ignoreShorthand:!0});d&&(b.parent&&b.parent.ariaLabel&&b.ariaLabel==="block"?h=b.parent.ariaLabel+" "+y:b.ariaLabel&&(h=b.ariaLabel+" "+y)),h===""&&(h=y)}else h=b||"";return this.items.push(h),this},v.prototype.queueDirOf=function(b){return a(b),this.queue(b===t?"before":"after")},v.prototype.queueDirEndOf=function(b){return a(b),this.queue(b===t?"beginning of":"end of")},v.prototype.alert=function(b){return this.attach(),b&&this.queue(b),this.items.length&&(this.msg=this.items.join(" ").replace(/ +(?= )/g,"").trim(),this.controller.containerHasFocus()&&(this.controller.options.logAriaAlerts&&this.msg&&console.log(this.msg),this.span.textContent=this.msg)),this.clear()},v.prototype.clear=function(){return this.items.length=0,this},v}(),A=function(){function v(b,d){var h;arguments.length===1&&(d=b),!(!b||!d)&&(this.ends=(h={},h[t]=b,h[e]=d,h))}return v.create=function(b,d){arguments.length===1&&(d=b),n("No half-empty DOMFragments",!!b==!!d);var h=new v(b,d);return n("last is a forward sibling of first",h.isValid()),h},v.prototype.isEmpty=function(){return this.ends===void 0},v.prototype.isOneNode=function(){return!!(this.ends&&this.ends[t]===this.ends[e])},v.prototype.isValid=function(){if(!this.ends||this.ends[t]===this.ends[e])return!0;var b;return this.eachNode(function(d){return b=d}),b===this.ends[e]},v.prototype.firstNode=function(){return n("Fragment is not empty",this.ends),this.ends[t]},v.prototype.lastNode=function(){return n("Fragment is not empty",this.ends),this.ends[e]},v.prototype.children=function(){var b=this.oneNode(),d=b.firstChild,h=b.lastChild;return d&&h?new v(d,h):new v},v.prototype.join=function(b){if(!this.ends)return b;if(!b.ends)return this;for(var d=!1,h=this.ends[e].nextSibling;h;){if(h===b.ends[t]){d=!0;break}h=h.nextSibling}return n("sibling must be a forward DOM sibling of this fragment",d),new v(this.ends[t],b.ends[e])},v.prototype.oneNode=function(){return n("Fragment has a single node",this.ends&&this.ends[t]===this.ends[e]),this.ends[t]},v.prototype.oneElement=function(){var b=this.oneNode();return n("Node is an Element",b.nodeType===Node.ELEMENT_NODE),b},v.prototype.oneText=function(){var b=this.oneNode();return n("Node is Text",b.nodeType===Node.TEXT_NODE),b},v.prototype.eachNode=function(b){if(!this.ends)return this;for(var d=this.ends[e],h=this.ends[t],y=void 0;h&&(y=h.nextSibling,b(h),h!==d);h=y);return this},v.prototype.eachElement=function(b){return this.eachNode(function(d){d.nodeType===Node.ELEMENT_NODE&&b(d)}),this},v.prototype.text=function(){var b="";return this.eachNode(function(d){b+=d.textContent||""}),b},v.prototype.toNodeArray=function(){var b=[];return this.eachNode(function(d){return b.push(d)}),b},v.prototype.toElementArray=function(){var b=[];return this.eachElement(function(d){return b.push(d)}),b},v.prototype.toDocumentFragment=function(){var b=document.createDocumentFragment();return this.eachNode(function(d){return b.appendChild(d)}),b},v.prototype.insertBefore=function(b){return this.insDirOf(t,b)},v.prototype.insertAfter=function(b){return this.insDirOf(e,b)},v.prototype.append=function(b){return b.appendTo(this.oneElement()),this},v.prototype.prepend=function(b){return b.prependTo(this.oneElement()),this},v.prototype.appendTo=function(b){return this.insAtDirEnd(e,b)},v.prototype.prependTo=function(b){return this.insAtDirEnd(t,b)},v.prototype.parent=function(){if(!this.ends)return this;var b=this.ends[t].parentNode;return b?new v(b):new v},v.prototype.wrapAll=function(b){if(b.textContent="",!this.ends)return this;var d=this.ends[t].parentNode,h=this.ends[e].nextSibling;return this.appendTo(b),d&&d.insertBefore(b,h),this},v.prototype.replaceWith=function(b){var d,h=(d=this.ends)===null||d===void 0?void 0:d[e],y=h==null?void 0:h.parentNode,D=h==null?void 0:h.nextSibling;this.detach();var L=b.toDocumentFragment();return!h||!y?this:(y.insertBefore(L,D||null),this)},v.prototype.nthElement=function(b){if(this.ends&&!(b<0||b!==Math.floor(b)))for(var d=this.ends[t];d;){if(d.nodeType===Node.ELEMENT_NODE){if(b<=0)return d;b-=1}if(d===this.ends[e])return;d=d.nextSibling}},v.prototype.firstElement=function(){return this.nthElement(0)},v.prototype.lastElement=function(){if(this.ends)for(var b=this.ends[e];b;){if(b.nodeType===Node.ELEMENT_NODE)return b;if(b===this.ends[t])return;b=b.previousSibling}},v.prototype.first=function(){return new v(this.firstElement())},v.prototype.last=function(){return new v(this.lastElement())},v.prototype.eq=function(b){return new v(this.nthElement(b))},v.prototype.slice=function(b){if(!this.ends)return this;var d=this.nthElement(b);return d?new v(d,this.ends[e]):new v},v.prototype.next=function(){for(var b=this.oneNode();b;)if(b=b.nextSibling,b&&b.nodeType===Node.ELEMENT_NODE)return new v(b);return new v},v.prototype.prev=function(){for(var b=this.oneNode();b;)if(b=b.previousSibling,b&&b.nodeType===Node.ELEMENT_NODE)return new v(b);return new v},v.prototype.empty=function(){return this.eachElement(function(b){b.textContent=""}),this},v.prototype.remove=function(){return this.toDocumentFragment(),this},v.prototype.detach=function(){return this.remove()},v.prototype.insDirOf=function(b,d){var h;if(!this.ends)return this;var y=(h=d.ends)===null||h===void 0?void 0:h[b];return!y||!y.parentNode?this.detach():(_(b,y.parentNode,this.toDocumentFragment(),y),this)},v.prototype.insAtDirEnd=function(b,d){return this.ends?(P(b,this.toDocumentFragment(),d),this):this},v.prototype.hasClass=function(b){var d=!1;return this.eachElement(function(h){h.classList.contains(b)&&(d=!0)}),d},v.prototype.addClass=function(b){for(var d=function(F){if(!F)return"continue";h.eachElement(function(K){K.classList.add(F)})},h=this,y=0,D=b.split(/\s+/);y<D.length;y++){var L=D[y];d(L)}return this},v.prototype.removeClass=function(b){for(var d=function(F){if(!F)return"continue";h.eachElement(function(K){K.classList.remove(F)})},h=this,y=0,D=b.split(/\s+/);y<D.length;y++){var L=D[y];d(L)}return this},v.prototype.toggleClass=function(b,d){if(d===!0)return this.addClass(b);if(d===!1)return this.removeClass(b);for(var h=function(K){if(!K)return"continue";y.eachElement(function(te){te.classList.toggle(K)})},y=this,D=0,L=b.split(/\s+/);D<L.length;D++){var F=L[D];h(F)}return this},v}(),G=A.create;function _(v,b,d,h){b.insertBefore(d,v===t?h:h.nextSibling)}function P(v,b,d){v===t?d.insertBefore(b,d.firstChild):d.appendChild(b)}var N=function(){function v(b,d,h){this.init(b,d,h)}return v.prototype.init=function(b,d,h){this.parent=b,this[t]=d,this[e]=h},v.copy=function(b){return new v(b.parent,b[t],b[e])},v}();function W(v,b){var d=v[t];if(d){var h=v[e];if(h)for(h=h[e];d!==h;d=d[e]){var y=b(d);if(y===!1)break}}}function X(v,b,d){var h=v[t];if(!h)return b;var y=v[e];if(!y)return b;for(y=y[e];h!==y;h=h[e])b=d(b,h);return b}var q=function(){function v(){var h;this[b]=0,this[d]=0,this.parent=0,this.ends=(h={},h[t]=0,h[e]=0,h),this.id=v.uniqueNodeId()}v.uniqueNodeId=function(){return v.idCounter+=1},v.getNodeOfElement=function(h){if(h){if(!h.nodeType)throw new Error("must pass an Element to NodeBase.getNodeOfElement");var y=h;return y.mqBlockNode||y.mqCmdNode}},v.linkElementByBlockNode=function(h,y){h.mqBlockNode=y},v.linkElementByCmdNode=function(h,y){h.mqCmdNode=y},v.prototype.setEnds=function(h){this.ends=h,n("No half-empty node ends",!!this.ends[t]==!!this.ends[e])},v.prototype.getEnd=function(h){return this.ends[h]},v.prototype.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},v.prototype.setDOM=function(h){return h&&n("DOM is an element or a text node",h.nodeType===Node.ELEMENT_NODE||h.nodeType===Node.TEXT_NODE),this._el=h,this},v.prototype.domFrag=function(){return G(this._el)},v.prototype.createDir=function(h,y){a(h);var D=this;return D.html(),D.domFrag().insDirOf(h,y.domFrag()),y[h]=D.adopt(y.parent,y[t],y[e]),D},v.prototype.createLeftOf=function(h){this.createDir(t,h)},v.prototype.selectChildren=function(h,y){return new ve(h,y)},v.prototype.bubble=function(h){for(var y=this.getSelfNode(),D=y;D;D=D.parent){var L=h(D);if(L===!1)break}return this},v.prototype.postOrder=function(h){var y=this.getSelfNode();return function D(L){return L?(L.eachChild(D),h(L),!0):!1}(y),y},v.prototype.isEmpty=function(){return this.ends[t]===0&&this.ends[e]===0},v.prototype.isQuietEmptyDelimiter=function(h){if(!this.isEmpty()||!h||!this.parent||this.parent.ctrlSeq===void 0)return!1;var y=this.parent.ctrlSeq.replace(/^\\(left|right)?/,"");return h.hasOwnProperty(y)},v.prototype.isStyleBlock=function(){return!1},v.prototype.isTextBlock=function(){return!1},v.prototype.children=function(){return new J(this.getEnd(t),this.getEnd(e))},v.prototype.eachChild=function(h){return W(this.ends,h),this},v.prototype.foldChildren=function(h,y){return X(this.ends,h,y)},v.prototype.withDirAdopt=function(h,y,D,L){var F=this.getSelfNode();return new J(F,F).withDirAdopt(h,y,D,L),this},v.prototype.adopt=function(h,y,D){var L=this.getSelfNode();return new J(L,L).adopt(h,y,D),this.getSelfNode()},v.prototype.disown=function(){var h=this.getSelfNode();return new J(h,h).disown(),this},v.prototype.remove=function(){return this.domFrag().remove(),this.disown()},v.prototype.shouldIgnoreSubstitutionInSimpleSubscript=function(h){return!(!h.disableAutoSubstitutionInSubscripts||!this.parent||!(this.parent.parent instanceof bs)||!this.parent.domFrag().hasClass("dcg-mq-sub"))},v.prototype.getSelfNode=function(){return this},v.prototype.parser=function(){n("Abstract parser() method is never called",!1)},v.prototype.html=function(){throw new Error("html() unimplemented in NodeBase")},v.prototype.text=function(){return""},v.prototype.latex=function(){var h={latex:"",startIndex:-1,endIndex:-1};return this.latexRecursive(h),h.latex},v.prototype.latexRecursive=function(h){},v.prototype.checkCursorContextOpen=function(h){h.startSelectionBefore===this&&(h.startIndex=h.latex.length),h.endSelectionBefore===this&&(h.endIndex=h.latex.length)},v.prototype.checkCursorContextClose=function(h){h.startSelectionAfter===this&&(h.startIndex=h.latex.length),h.endSelectionAfter===this&&(h.endIndex=h.latex.length)},v.prototype.finalizeTree=function(h,y){},v.prototype.contactWeld=function(h,y){},v.prototype.blur=function(h){},v.prototype.focus=function(){},v.prototype.intentionalBlur=function(){},v.prototype.reflow=function(){},v.prototype.registerInnerField=function(h,y){},v.prototype.chToCmd=function(h,y){n("Abstract chToCmd() method is never called",!1)},v.prototype.mathspeak=function(h){return""},v.prototype.seek=function(h,y){},v.prototype.siblingDeleted=function(h,y){},v.prototype.siblingCreated=function(h,y){},v.prototype.finalizeInsert=function(h,y){},v.prototype.fixDigitGrouping=function(h){},v.prototype.writeLatex=function(h,y){},v.prototype.write=function(h,y){};var b,d;return b=t,d=e,v.idCounter=0,v}();function B(v,b,d){n("a parent is always present",v),n("leftward is properly set up",function(){return b?b[e]===d&&b.parent===v:v.getEnd(t)===d}()),n("rightward is properly set up",function(){return d?d[t]===b&&d.parent===v:v.getEnd(e)===b}())}var J=function(){function v(b,d,h){var y,D;if(this.disowned=!1,h===void 0&&(h=t),a(h),n("no half-empty fragments",!b==!d),!b||!d){this.setEnds((y={},y[t]=0,y[e]=0,y));return}n("withDir is passed to Fragment",b instanceof It),n("oppDir is passed to Fragment",d instanceof It),n("withDir and oppDir have the same parent",b.parent===d.parent);var L=(D={},D[h]=b,D[-h]=d,D);this.setEnds(L);var F=0;this.each(function(K){F=K}),n("following direction siblings from start reaches end",F===L[e])}return v.prototype.getDOMFragFromEnds=function(){var b=this.ends[t],d=this.ends[e];return b===0||d===0?G():b===d?b.domFrag():b.domFrag().join(d.domFrag())},v.prototype.setEnds=function(b){this.ends=b},v.prototype.getEnd=function(b){return this.ends?this.ends[b]:0},v.prototype.domFrag=function(){return this.getDOMFragFromEnds()},v.prototype.withDirAdopt=function(b,d,h,y){return b===t?this.adopt(d,h,y):this.adopt(d,y,h)},v.prototype.adopt=function(b,d,h){var y;B(b,d,h);var D=this;this.disowned=!1;var L=D.ends[t];if(!L)return this;var F=D.ends[e];if(!F)return this;var K=(y={},y[t]=b.getEnd(t),y[e]=b.getEnd(e),y);return d||(K[t]=L),h?h[t]=F:K[e]=F,b.setEnds(K),F[e]=h,D.each(function(te){return te[t]=d,te.parent=b,d&&(d[e]=te),d=te,!0}),D},v.prototype.disown=function(){var b,d=this,h=d.ends[t];if(!h||d.disowned)return d;this.disowned=!0;var y=d.ends[e];if(!y)return d;var D=h.parent;B(D,h[t],h),B(D,y,y[e]);var L=(b={},b[t]=D.getEnd(t),b[e]=D.getEnd(e),b);if(h[t]){var F=h[t];F[e]=y[e]}else L[t]=y[e];if(y[e]){var K=y[e];K[t]=h[t]}else L[e]=h[t];return L[t]&&L[e]?D.setEnds(L):D.ends=L,d},v.prototype.remove=function(){return this.domFrag().remove(),this.disown()},v.prototype.each=function(b){return W(this.ends,b),this},v.prototype.fold=function(b,d){return X(this.ends,b,d)},v}(),f={},O={};function R(v){return v&&v.prototype instanceof It}var re=function(v){ze(b,v);function b(d,h,y){var D=v.call(this,d,h,y)||this;return D.ancestors={},D}return b.fromCursor=function(d){return new b(d.parent,d[t],d[e])},b}(N),ie=function(v){ze(b,v);function b(d,h,y){var D=v.call(this,d,0,0)||this;return D.upDownCache={},D.cursorElement=l("span",{class:"dcg-mq-cursor"},[l.text(u)]),D._domFrag=G(),D.controller=y,D.options=h,D.setDOMFrag(G(D.cursorElement)),D.blink=function(){G(D.cursorElement).toggleClass("dcg-mq-blink")},D}return b.prototype.setDOMFrag=function(d){return this._domFrag=d,this},b.prototype.domFrag=function(){return this._domFrag},b.prototype.show=function(){if(G(this.cursorElement).removeClass("dcg-mq-blink"),this.setDOMFrag(G(this.cursorElement)),this.intervalId)clearInterval(this.intervalId);else{var d=this[e];if(d){var h=this.selection;h&&h.getEnd(t)[t]===this[t]?this.domFrag().insertBefore(h.domFrag()):this.domFrag().insertBefore(d.domFrag())}else this.domFrag().appendTo(this.parent.domFrag().oneElement());this.parent.focus()}return this.intervalId=setInterval(this.blink,500),this},b.prototype.hide=function(){return this.intervalId&&clearInterval(this.intervalId),this.intervalId=0,this.domFrag().detach(),this.setDOMFrag(G()),this},b.prototype.withDirInsertAt=function(d,h,y,D){var L=this.parent;this.parent=h,this[d]=y,this[-d]=D,L!==h&&L.blur&&L.blur(this)},b.prototype.insDirOf=function(d,h){return a(d),this.domFrag().insDirOf(d,h.domFrag()),this.withDirInsertAt(d,h.parent,h[d],h),this.parent.domFrag().addClass("dcg-mq-hasCursor"),this},b.prototype.insLeftOf=function(d){return this.insDirOf(t,d)},b.prototype.insRightOf=function(d){return this.insDirOf(e,d)},b.prototype.insAtDirEnd=function(d,h){return a(d),this.domFrag().insAtDirEnd(d,h.domFrag().oneElement()),this.withDirInsertAt(d,h,0,h.getEnd(d)),h.focus(),this},b.prototype.insAtLeftEnd=function(d){return this.insAtDirEnd(t,d)},b.prototype.insAtRightEnd=function(d){return this.insAtDirEnd(e,d)},b.prototype.jumpUpDown=function(d,h){var y=this;y.upDownCache[d.id]=N.copy(y);var D=y.upDownCache[h.id];if(D){var L=D[e];L?y.insLeftOf(L):y.insAtRightEnd(D.parent)}else{var F=y.getBoundingClientRectWithoutMargin().left;h.seek(F,y)}y.controller.aria.queue(h,!0)},b.prototype.getBoundingClientRectWithoutMargin=function(){var d=this.domFrag();d.removeClass("dcg-mq-cursor");var h=k(d.oneElement()),y=h.left,D=h.right;return d.addClass("dcg-mq-cursor"),{left:y,right:D}},b.prototype.unwrapGramp=function(){var d=this.parent.parent,h=d.parent,y=d[e],D=this,L=d[t];if(d.disown().eachChild(function(he){return he.isEmpty()||(he.children().adopt(h,L,y).each(function(Me){return Me.domFrag().insertBefore(d.domFrag()),!0}),L=he.getEnd(e)),!0}),!this[e]){var F=this[t];if(F)this[e]=F[e];else for(;!this[e];){var K=this.parent[e];if(K)this.parent=K,this[e]=K.getEnd(t);else{this[e]=d[e],this.parent=h;break}}}var te=this[e];te?this.insLeftOf(te):this.insAtRightEnd(h),d.domFrag().remove();var Ce=d[t],me=d[e];Ce&&Ce.siblingDeleted(D.options,e),me&&me.siblingDeleted(D.options,t)},b.prototype.startSelection=function(){for(var d=this.anticursor=re.fromCursor(this),h=d.ancestors,y=d;y.parent;y=y.parent)h[y.parent.id]=y},b.prototype.endSelection=function(){delete this.anticursor},b.prototype.select=function(){var d,h=this.anticursor;if(this[t]===h[t]&&this.parent===h.parent)return!1;for(var y=this;y.parent;y=y.parent)if(y.parent.id in h.ancestors){d=y.parent;break}n("cursor and anticursor in the same tree",d);var D=d,L=h.ancestors[D.id],F,K,te=e;if(y[t]!==L){for(var Ce=y;Ce;Ce=Ce[e])if(Ce[e]===L[e]){te=t,F=y,K=L;break}}te===e&&(F=L,K=y),F instanceof N&&(F=F[e]),K instanceof N&&(K=K[t]),this.hide().selection=D.selectChildren(F,K);var me=this.selection.getEnd(te);return this.insDirOf(te,me),this.selectionChanged(),!0},b.prototype.resetToEnd=function(d){this.clearSelection();var h=d.root;this[e]=0,this[t]=h.getEnd(e),this.parent=h},b.prototype.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},b.prototype.deleteSelection=function(){var d=this.selection;d&&(this[t]=d.getEnd(t)[t],this[e]=d.getEnd(e)[e],d.remove(),this.selectionChanged(),delete this.selection)},b.prototype.replaceSelection=function(){var d=this.selection;return d&&(this[t]=d.getEnd(t)[t],this[e]=d.getEnd(e)[e],delete this.selection),d},b.prototype.depth=function(){for(var d=this,h=0;d=d.parent;)h+=d instanceof mr?1:0;return h},b.prototype.isTooDeep=function(d){return this.options.maxDepth!==void 0?this.depth()+(d||0)>this.options.maxDepth:!1},b.prototype.selectionChanged=function(){},b}(N),ve=function(v){ze(b,v);function b(d,h,y){var D=v.call(this,d,h,y)||this;return D._el=l("span",{class:"dcg-mq-selection"}),D.getDOMFragFromEnds().wrapAll(D._el),D}return b.prototype.isCleared=function(){return this._el===void 0},b.prototype.domFrag=function(){return this.isCleared()?this.getDOMFragFromEnds():G(this._el)},b.prototype.setEnds=function(d){n("Selection ends are never empty",d[t]&&d[e]),this.ends=d},b.prototype.getEnd=function(d){return this.ends[d]},b.prototype.adopt=function(d,h,y){return this.clear(),v.prototype.adopt.call(this,d,h,y)},b.prototype.clear=function(){var d=this.getDOMFragFromEnds();return this.domFrag().replaceWith(d),this._el=void 0,this},b.prototype.join=function(d,h){return h===void 0&&(h=""),this.fold("",function(y,D){return y+h+D[d]()})},b}(J),ae=function(){function v(b,d,h){this.textareaEventListeners={},this.id=b.id,this.data={},this.root=b,this.container=d,this.options=h,this.aria=new T(this.getControllerSelf()),this.ariaLabel="Math Input",this.ariaPostLabel="",b.controller=this.getControllerSelf(),this.cursor=b.cursor=new ie(b,h,this.getControllerSelf())}return v.prototype.getControllerSelf=function(){return this},v.prototype.handle=function(b,d){var h,y=this.options.handlers,D=(h=this.options.handlers)===null||h===void 0?void 0:h.fns[b];if(D){var L=y==null?void 0:y.APIClasses[this.KIND_OF_MQ];n("APIClass is defined",L);var F=new L(this);d===t||d===e?D(d,F):D(F)}},v.onNotify=function(b){v.notifyees.push(b)},v.prototype.notify=function(b){for(var d=0;d<v.notifyees.length;d+=1)v.notifyees[d](this.cursor,b);return this},v.prototype.setAriaLabel=function(b){var d=this.getAriaLabel();return b&&typeof b=="string"&&b!==""?this.ariaLabel=b:this.editable?this.ariaLabel="Math Input":this.ariaLabel="",this.ariaLabel!==d&&!this.containerHasFocus()&&this.updateMathspeak(),this},v.prototype.getAriaLabel=function(){return this.ariaLabel!=="Math Input"?this.ariaLabel:this.editable?"Math Input":""},v.prototype.setAriaPostLabel=function(b,d){var h=this;return b&&typeof b=="string"&&b!==""?(b!==this.ariaPostLabel&&typeof d=="number"&&(this._ariaAlertTimeout&&clearTimeout(this._ariaAlertTimeout),this._ariaAlertTimeout=setTimeout(function(){h.containerHasFocus()?h.aria.alert(h.root.mathspeak().trim()+" "+b.trim()):h.updateMathspeak()},d)),this.ariaPostLabel=b):(this._ariaAlertTimeout&&clearTimeout(this._ariaAlertTimeout),this.ariaPostLabel=""),this},v.prototype.getAriaPostLabel=function(){return this.ariaPostLabel||""},v.prototype.containerHasFocus=function(){return document.activeElement&&this.container.contains(document.activeElement)},v.prototype.getTextareaOrThrow=function(){var b=this.textarea;if(!b)throw new Error("expected a textarea");return b},v.prototype.getTextareaSpanOrThrow=function(){var b=this.textareaSpan;if(!b)throw new Error("expected a textareaSpan");return b},v.prototype.addTextareaEventListeners=function(b){if(this.textarea)for(var d in b){var h=d;this.removeTextareaEventListener(h),this.textarea.addEventListener(h,b[h])}},v.prototype.removeTextareaEventListener=function(b){if(this.textarea){var d=this.textareaEventListeners[b];d&&this.textarea.removeEventListener(b,d)}},v.prototype.exportMathSpeak=function(){return this.root.mathspeak()},v.prototype.updateMathspeak=function(){},v.prototype.scrollHoriz=function(){},v.prototype.selectionChanged=function(){},v.prototype.setOverflowClasses=function(){},v.notifyees=[],v}(),oe={},Z={},Q={handlers:!0,autoCommands:!0,quietEmptyDelimiters:!0,autoParenthesizedFunctions:!0,autoOperatorNames:!0,leftRightIntoCmdGoes:!0,maxDepth:!0,interpretTildeAsSim:!0},fe={},ye=function(){function v(b){this.version=b}return v.prototype.assertJquery=function(){return n("Interface versions > 2 do not depend on JQuery",this.version<=2),n("JQuery is set for interface v < 3",this.jQuery),this.jQuery},v}(),Re=function(){function v(){}return v}(),Ke=function(){window.console&&console.warn(`You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)},Ye;function _t(v){return Ke(),Ye||(Ye=ut(1)),Ye(v)}_t.prototype=Re.prototype,_t.VERSION="v0.10.1",_t.interfaceVersion=function(v){if(v!==1)throw"Only interface version 1 supported. You specified: "+v;return Ke=function(){window.console&&console.warn(`You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)},Ke(),_t},_t.getInterface=ut;var st=ut.MIN=1,Hi=ut.MAX=3;function ut(v){if(v!==1&&v!==2&&v!==3)throw"Only interface versions between "+st+" and "+Hi+" supported. You specified: "+v;var b=v;if(b<3){var d=window.jQuery;if(!d)throw"MathQuill interface version ".concat(b," requires jQuery 1.5.2+ to be loaded first");ye.prototype.jQuery=d}var h=Gx(Gx({},fe),{handlers:function(me){return{fns:me||{},APIClasses:K}}});function y(me,he){for(var Me in he)if(he.hasOwnProperty(Me)){if(Me==="substituteKeyboardEvents"&&b>=3)throw new Error(["As of interface version 3, the 'substituteKeyboardEvents'","option is no longer supported. Use 'overrideTypedText' and","'overrideKeystroke' instead."].join(" "));var Ge=he[Me],Fe=h[Me];me[Me]=Fe?Fe(Ge):Ge}}var D=b<3?ye:function(me){ze(he,me);function he(){return me!==null&&me.apply(this,arguments)||this}return he}(ye),L=function(me){ze(he,me);function he(Me){var Ge=me.call(this)||this;return Ge.__controller=Me,Ge.__options=Me.options,Ge.id=Me.id,Ge.data=Me.data,Ge}return he.prototype.mathquillify=function(Me){var Ge=this.__controller,Fe=Ge.root,Ue=Ge.container;Ge.createTextarea();var tt=G(Ue).addClass(Me).children().detach();Fe.setDOM(G(l("span",{class:"dcg-mq-root-block","aria-hidden":!0})).appendTo(Ue).oneElement()),q.linkElementByBlockNode(Fe.domFrag().oneElement(),Fe),this.latex(tt.text()),this.revert=function(){return Ge.removeMouseEventListener(),G(Ue).removeClass("dcg-mq-editable-field dcg-mq-math-mode dcg-mq-text-mode").empty().append(tt),b<3?this.__options.assertJquery()(Ue):Ue}},he.prototype.setAriaLabel=function(Me){return this.__controller.setAriaLabel(Me),this},he.prototype.getAriaLabel=function(){return this.__controller.getAriaLabel()},he.prototype.config=function(Me){return y(this.__options,Me),this},he.prototype.el=function(){return this.__controller.container},he.prototype.text=function(){return this.__controller.exportText()},he.prototype.mathspeak=function(){return this.__controller.exportMathSpeak()},he.prototype.latex=function(Me){if(arguments.length>0){this.__controller.renderLatexMath(Me);var Ge=this.__controller.cursor;return this.__controller.blurred&&Ge.hide().parent.blur(Ge),this}return this.__controller.exportLatex()},he.prototype.selection=function(){return this.__controller.exportLatexSelection()},he.prototype.html=function(){return this.__controller.root.domFrag().oneElement().innerHTML.replace(/ jQuery\d+="(?:\d+|null)"/g,"").replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?dcg-mq-cursor( dcg-mq-blink)?"?>.?<\/span>/i,"").replace(/ dcg-mq-hasCursor|dcg-mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},he.prototype.reflow=function(){return this.__controller.root.postOrder(function(Me){Me.reflow()}),this},he}(Re),F=function(me){ze(he,me);function he(){return me!==null&&me.apply(this,arguments)||this}return he.prototype.mathquillify=function(Me){return me.prototype.mathquillify.call(this,Me),this.__controller.editable=!0,this.__controller.addMouseEventListener(),this.__controller.editablesTextareaEvents(),this},he.prototype.focus=function(){return this.__controller.getTextareaOrThrow().focus(),this.__controller.scrollHoriz(),this},he.prototype.blur=function(){return this.__controller.getTextareaOrThrow().blur(),this},he.prototype.write=function(Me){this.__controller.writeLatex(Me),this.__controller.scrollHoriz();var Ge=this.__controller.cursor;return this.__controller.blurred&&Ge.hide().parent.blur(Ge),this},he.prototype.empty=function(){var Me,Ge=this.__controller.root,Fe=this.__controller.cursor;return Ge.setEnds((Me={},Me[t]=0,Me[e]=0,Me)),Ge.domFrag().empty(),delete Fe.selection,Fe.insAtRightEnd(Ge),this},he.prototype.cmd=function(Me){var Ge=this.__controller.notify(void 0),Fe=Ge.cursor;if(/^\\[a-z]+$/i.test(Me)&&!Fe.isTooDeep()){Me=Me.slice(1);var Ue=f[Me],tt;Ue&&(Ue.constructor?tt=new Ue(Me):tt=Ue(Me),Fe.selection&&tt.replaces(Fe.replaceSelection()),tt.createLeftOf(Fe.show()))}else Fe.parent.write(Fe,Me);return Ge.scrollHoriz(),Ge.blurred&&Fe.hide().parent.blur(Fe),this},he.prototype.select=function(){return this.__controller.selectAll(),this},he.prototype.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},he.prototype.moveToDirEnd=function(Me){return this.__controller.notify("move").cursor.insAtDirEnd(Me,this.__controller.root),this},he.prototype.moveToLeftEnd=function(){return this.moveToDirEnd(t)},he.prototype.moveToRightEnd=function(){return this.moveToDirEnd(e)},he.prototype.keystroke=function(Me,Ge){for(var Fe=Me.replace(/^\s+|\s+$/g,"").split(/\s+/),Ue=0;Ue<Fe.length;Ue+=1)this.__controller.keystroke(Fe[Ue],Ge);return this},he.prototype.typedText=function(Me){for(var Ge=0;Ge<Me.length;Ge+=1)this.__controller.typedText(Me.charAt(Ge));return this},he.prototype.dropEmbedded=function(Me,Ge,Fe){var Ue=Me-M(),tt=Ge-I(),ii=document.elementFromPoint(Ue,tt);this.__controller.seek(ii,Ue,tt);var Sr=new XM().setOptions(Fe);Sr.createLeftOf(this.__controller.cursor)},he.prototype.setAriaPostLabel=function(Me,Ge){return this.__controller.setAriaPostLabel(Me,Ge),this},he.prototype.getAriaPostLabel=function(){return this.__controller.getAriaPostLabel()},he.prototype.clickAt=function(Me,Ge,Fe){Fe=Fe||document.elementFromPoint(Me,Ge);var Ue=this.__controller,tt=Ue.root,ii=tt.domFrag().oneElement();return ii.contains(Fe)||(Fe=ii),Ue.seek(Fe,Me,Ge),Ue.blurred&&this.focus(),this},he.prototype.ignoreNextMousedown=function(Me){return this.__controller.cursor.options.ignoreNextMousedown=Me,this},he}(L),K={AbstractMathQuill:L,EditableField:F};n("API.StaticMath defined",oe.StaticMath),K.StaticMath=oe.StaticMath(K),n("API.MathField defined",oe.MathField),K.MathField=oe.MathField(K),n("API.InnerMathField defined",oe.InnerMathField),K.InnerMathField=oe.InnerMathField(K),oe.TextField&&(K.TextField=oe.TextField(K));var te=function(me){if(!me||!me.nodeType)return null;for(var he,Me=G(me).children().toElementArray(),Ge=0,Fe=Me;Ge<Fe.length;Ge++){var Ue=Fe[Ge];if(Ue.classList.contains("dcg-mq-root-block")){he=Ue;break}}var tt=q.getNodeOfElement(he),ii=tt&&tt.controller,Sr=ii&&K[ii.KIND_OF_MQ];return ii&&Sr?new Sr(ii):null};te.L=t,te.R=e,te.config=function(me){return y(D.prototype,me),this},te.registerEmbed=function(me,he){if(!/^[a-z][a-z0-9]*$/i.test(me))throw"Embed name must start with letter and be only letters and digits";Z[me]=he},te.StaticMath=Ce("StaticMath",K.StaticMath),te.MathField=Ce("MathField",K.MathField),te.InnerMathField=Ce("InnerMathField",K.InnerMathField),K.TextField&&(te.TextField=Ce("TextField",K.TextField)),te.prototype=L.prototype,te.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},te.EditableField.prototype=F.prototype,b<3&&(te.saneKeyboardEvents=il);function Ce(me,he){n(me+" is defined",he);function Me(Ge,Fe){if(!Ge||!Ge.nodeType)return null;var Ue=te(Ge);if(Ue instanceof he)return Ue;var tt=new at(new he.RootBlock,Ge,new D(b));return tt.KIND_OF_MQ=me,new he(tt).__mathquillify(Fe||{},b)}return Me.prototype=he.prototype,Me}return te}_t.noConflict=function(){return window.MathQuill=Ee,_t};var Ee=window.MathQuill;window.MathQuill=_t;function lo(v){v.moveOutOf=function(b){n("controller is defined",this.controller),this.controller.handle("moveOutOf",b)},v.deleteOutOf=function(b){n("controller is defined",this.controller),this.controller.handle("deleteOutOf",b)},v.selectOutOf=function(b){n("controller is defined",this.controller),this.controller.handle("selectOutOf",b)},v.upOutOf=function(){n("controller is defined",this.controller),this.controller.handle("upOutOf")},v.downOutOf=function(){n("controller is defined",this.controller),this.controller.handle("downOutOf")},v.reflow=function(){n("controller is defined",this.controller),this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}function Zr(v,b){throw v?v="'"+v+"'":v="EOF","Parse Error: "+b+" at "+v}var ne=function(){function v(b){this._=b}return v.prototype.parse=function(b){return this.skip(v.eof)._(""+b,d,Zr);function d(h,y){return y}},v.prototype.or=function(b){n("or is passed a parser",b instanceof v);var d=this;return new v(function(h,y,D){return d._(h,y,L);function L(F){return b._(h,y,D)}})},v.prototype.then=function(b){var d=this;return new v(function(h,y,D){return d._(h,L,D);function L(F,K){var te=b instanceof v?b:b(K);return n("a parser is returned",te instanceof v),te._(F,y,D)}})},v.prototype.many=function(){var b=this;return new v(function(d,h,y){for(var D=[];b._(d,L,F););return h(d,D);function L(K,te){return d=K,D.push(te),!0}function F(){return!1}})},v.prototype.times=function(b,d){arguments.length<2&&(d=b);var h=this;return new v(function(y,D,L){for(var F=[],K=!0,te,Ce=0;Ce<b;Ce+=1)if(K=!!h._(y,me,he),!K)return L(y,te);for(;Ce<d&&K;Ce+=1)h._(y,me,Me);return D(y,F);function me(Ge,Fe){return F.push(Fe),y=Ge,!0}function he(Ge,Fe){return te=Fe,y=Ge,!1}function Me(Ge,Fe){return!1}})},v.prototype.result=function(b){return this.then(v.succeed(b))},v.prototype.atMost=function(b){return this.times(0,b)},v.prototype.atLeast=function(b){var d=this;return d.times(b).then(function(h){return d.many().map(function(y){return h.concat(y)})})},v.prototype.map=function(b){return this.then(function(d){return v.succeed(b(d))})},v.prototype.skip=function(b){return this.then(function(d){return b.result(d)})},v.string=function(b){var d=b.length,h="expected '"+b+"'";return new v(function(y,D,L){var F=y.slice(0,d);return F===b?D(y.slice(d),F):L(y,h)})},v.regex=function(b){n("regexp parser is anchored",b.toString().charAt(1)==="^");var d="expected "+b;return new v(function(h,y,D){var L=b.exec(h);if(L){var F=L[0];return y(h.slice(F.length),F)}else return D(h,d)})},v.succeed=function(b){return new v(function(d,h){return h(d,b)})},v.fail=function(b){return new v(function(d,h,y){return y(d,b)})},v.letter=v.regex(/^[a-z]/i),v.letters=v.regex(/^[a-z]*/i),v.digit=v.regex(/^[0-9]/),v.digits=v.regex(/^[0-9]*/),v.whitespace=v.regex(/^\s+/),v.optWhitespace=v.regex(/^\s*/),v.any=new v(function(b,d,h){return b?d(b.slice(1),b.charAt(0)):h(b,"expected any character")}),v.all=new v(function(b,d,h){return d("",b)}),v.eof=new v(function(b,d,h){return b?h(b,"expected EOF"):d(b,b)}),v}(),nn=function(){function v(){this.fn=o}return v.prototype.listen=function(b){this.fn=b,clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.fn)},v.prototype.listenOnce=function(b){var d=this;this.listen(function(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];d.clearListener(),b.apply(void 0,h)})},v.prototype.clearListener=function(){this.fn=o,clearTimeout(this.timeoutId)},v.prototype.trigger=function(){for(var b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];this.fn.apply(this,b)},v}(),qe=function(){var v={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"},b={ArrowRight:"Right",ArrowLeft:"Left",ArrowDown:"Down",ArrowUp:"Up",Delete:"Del",Escape:"Esc"," ":"Spacebar"};function d(L){switch(y(L)){case"Right":case"Left":case"Down":case"Up":return!0}return!1}function h(L){return L.length===1&&L>="a"&&L<="z"}function y(L){var F;if(L.key===void 0){var K=L.which||L.keyCode;return v[K]||String.fromCharCode(K)}return h(L.key)?L.key.toUpperCase():(F=b[L.key])!==null&&F!==void 0?F:L.key}function D(L){var F=y(L),K=[];return L.ctrlKey&&K.push("Ctrl"),L.metaKey&&K.push("Meta"),L.altKey&&K.push("Alt"),L.shiftKey&&K.push("Shift"),K.length?(F!=="Alt"&&F!=="Control"&&F!=="Meta"&&F!=="Shift"&&K.push(F),K.join("-")):F}return function(F,K){var te=null,Ce=null,me=new nn;function he(){try{F instanceof HTMLTextAreaElement&&F.select()}catch(di){}}function Me(di){me.trigger(),me.clearListener(),F instanceof HTMLTextAreaElement&&(F.value=di),di&&he(),Ge=!!di}var Ge=!1;function Fe(){return!("selectionStart"in F)||!(F instanceof HTMLTextAreaElement)?!1:F.selectionStart!==F.selectionEnd}function Ue(){K.options&&K.options.overrideKeystroke?K.options.overrideKeystroke(D(te),te):K.keystroke(D(te),te)}function tt(di){me.trigger(di),di.target===F&&(te=di,Ce=null,Ge&&me.listenOnce(function(Zc){Zc&&Zc.type==="focusout"||he()}),Ue())}function ii(di){me.trigger(di),di.target===F&&(te&&Ce&&Ue(),Ce=di,d(di)?me.listenOnce(Or):me.listen(ci))}function Sr(di){me.trigger(di),di.target===F&&te&&!Ce&&(d(di)?me.listenOnce(Or):me.listen(ci))}function ci(){if(!Fe()&&F instanceof HTMLTextAreaElement){var di=F.value;te&&!te.altKey&&te.ctrlKey&&!te.metaKey&&te.shiftKey&&(te.key==="U"||te.key==="Unidentified"||te.key==="Process")||(di.length===1?(F.value="",K.options&&K.options.overrideTypedText?K.options.overrideTypedText(di):K.typedText(di)):Or())}}function Or(){F instanceof HTMLTextAreaElement&&F.value.length>1&&he()}function Ca(){te=null,Ce=null,me.clearListener(),F instanceof HTMLTextAreaElement&&(F.value="")}function Ua(di){me.trigger(),di.target===F&&(document.activeElement!==F&&F.focus(),me.listen(function(){if(F instanceof HTMLTextAreaElement){var nl=F.value;F.value="",nl&&K.paste(nl)}}))}function rp(di){me.trigger(di)}return K.options&&K.options.disableCopyPaste?K.addTextareaEventListeners({keydown:tt,keypress:ii,keyup:Sr,focusout:Ca,copy:function(di){di.preventDefault()},cut:function(di){di.preventDefault()},paste:function(di){me.trigger(),di.preventDefault()},input:rp}):K.addTextareaEventListeners({keydown:tt,keypress:ii,keyup:Sr,focusout:Ca,cut:function(){me.listenOnce(function(){K.cut()})},copy:function(){me.listenOnce(function(){K.copy()})},paste:Ua,input:rp}),{select:Me}}}(),Ze=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.exportText=function(){return this.root.foldChildren("",function(d,h){return d+h.text()})},b}(ae);ae.onNotify(function(v,b){if(b==="edit"||b==="replace"||b===void 0){var d=v.controller;if(!d||!d.options.enableDigitGrouping||d.blurred!==!1)return;d.disableGroupingForSeconds(1)}});var Qe=function(v){ze(b,v);function b(){var d=v!==null&&v.apply(this,arguments)||this;return d.handleTextareaFocusEditable=function(){var h=d.cursor;d.updateMathspeak(),d.blurred=!1,clearTimeout(d.blurTimeout),G(d.container).addClass("dcg-mq-focused"),h.parent||h.insAtRightEnd(d.root),h.selection?(h.selection.domFrag().removeClass("dcg-mq-blur"),d.selectionChanged()):h.show(),d.setOverflowClasses()},d.handleTextareaBlurEditable=function(){d.textareaSelectionTimeout&&(clearTimeout(d.textareaSelectionTimeout),d.textareaSelectionTimeout=0),d.disableGroupingForSeconds(0),d.blurred=!0,d.blurTimeout=setTimeout(function(){d.root.postOrder(function(h){h.intentionalBlur()}),d.cursor.clearSelection().endSelection(),d.blur(),d.updateMathspeak(),d.scrollHoriz()}),window.addEventListener("blur",d.handleWindowBlur)},d.handleTextareaFocusStatic=function(){d.blurred=!1},d.handleTextareaBlurStatic=function(){d.cursor.selection&&d.cursor.selection.clear(),setTimeout(function(){G(d.getTextareaSpanOrThrow()).detach(),d.blurred=!0})},d.handleWindowBlur=function(){clearTimeout(d.blurTimeout),d.cursor.selection&&d.cursor.selection.domFrag().addClass("dcg-mq-blur"),d.blur(),d.updateMathspeak()},d}return b.prototype.disableGroupingForSeconds=function(d){var h=this;clearTimeout(this.__disableGroupingTimeout),d===0?this.root.domFrag().removeClass("dcg-mq-suppress-grouping"):(this.root.domFrag().addClass("dcg-mq-suppress-grouping"),this.__disableGroupingTimeout=setTimeout(function(){h.root.domFrag().removeClass("dcg-mq-suppress-grouping")},d*1e3))},b.prototype.blur=function(){this.cursor.hide().parent.blur(this.cursor),G(this.container).removeClass("dcg-mq-focused"),window.removeEventListener("blur",this.handleWindowBlur),this.options&&this.options.resetCursorOnBlur&&this.cursor.resetToEnd(this)},b.prototype.addEditableFocusBlurListeners=function(){var d=this,h=d.cursor;this.addTextareaEventListeners({focus:this.handleTextareaFocusEditable,blur:this.handleTextareaBlurEditable}),d.blurred=!0,h.hide().parent.blur(h)},b.prototype.addStaticFocusBlurListeners=function(){this.addTextareaEventListeners({focus:this.handleTextareaFocusStatic,blur:this.handleTextareaBlurStatic})},b}(Ze),ce=!1,It=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.keystroke=function(d,h,y){var D=y.cursor;switch(d){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":y.ctrlDeleteDir(t);break;case"Shift-Backspace":case"Backspace":y.backspace();break;case"Esc":case"Tab":y.escapeDir(e,d,h);return;case"Shift-Tab":case"Shift-Esc":y.escapeDir(t,d,h);return;case"End":y.notify("move").cursor.insAtRightEnd(D.parent),y.aria.queue("end of").queue(D.parent,!0);break;case"Ctrl-End":y.notify("move").cursor.insAtRightEnd(y.root),y.aria.queue("end of").queue(y.ariaLabel).queue(y.root).queue(y.ariaPostLabel);break;case"Shift-End":y.selectToBlockEndInDir(e);break;case"Ctrl-Shift-End":y.selectToRootEndInDir(e);break;case"Home":y.notify("move").cursor.insAtLeftEnd(D.parent),y.aria.queue("beginning of").queue(D.parent,!0);break;case"Ctrl-Home":y.notify("move").cursor.insAtLeftEnd(y.root),y.aria.queue("beginning of").queue(y.ariaLabel).queue(y.root).queue(y.ariaPostLabel);break;case"Shift-Home":y.selectToBlockEndInDir(t);break;case"Ctrl-Shift-Home":y.selectToRootEndInDir(t);break;case"Left":y.moveLeft();break;case"Shift-Left":y.selectLeft();break;case"Ctrl-Left":break;case"Right":y.moveRight();break;case"Shift-Right":y.selectRight();break;case"Ctrl-Right":break;case"Up":y.moveUp();break;case"Down":y.moveDown();break;case"Shift-Up":y.withIncrementalSelection(function(L){if(D[t])for(;D[t];)L(t);else L(t)});break;case"Shift-Down":y.withIncrementalSelection(function(L){if(D[e])for(;D[e];)L(e);else L(e)});break;case"Ctrl-Up":break;case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":y.ctrlDeleteDir(e);break;case"Shift-Del":case"Del":y.deleteForward();break;case"Meta-A":case"Ctrl-A":y.selectAll();break;case"Ctrl-Alt-Up":D.parent.parent&&D.parent.parent instanceof b?y.aria.queue(D.parent.parent):y.aria.queue("nothing above");break;case"Ctrl-Alt-Down":D.parent&&D.parent instanceof b?y.aria.queue(D.parent):y.aria.queue("block is empty");break;case"Ctrl-Alt-Left":D.parent.parent&&D.parent.parent.getEnd(t)?y.aria.queue(D.parent.parent.getEnd(t)):y.aria.queue("nothing to the left");break;case"Ctrl-Alt-Right":D.parent.parent&&D.parent.parent.getEnd(e)?y.aria.queue(D.parent.parent.getEnd(e)):y.aria.queue("nothing to the right");break;case"Ctrl-Alt-Shift-Down":D.selection?y.aria.queue(D.selection.join("mathspeak"," ").trim()+" selected"):y.aria.queue("nothing selected");break;case"Ctrl-Alt-=":case"Ctrl-Alt-Shift-Right":y.ariaPostLabel.length?y.aria.queue(y.ariaPostLabel):y.aria.queue("no answer");break;default:return}y.aria.alert(),h==null||h.preventDefault(),y.scrollHoriz()},b.prototype.moveOutOf=function(d,h,y){n("overridden or never called on this node",!1)},b.prototype.moveTowards=function(d,h,y){n("overridden or never called on this node",!1)},b.prototype.deleteOutOf=function(d,h){n("overridden or never called on this node",!1)},b.prototype.deleteTowards=function(d,h){n("overridden or never called on this node",!1)},b.prototype.unselectInto=function(d,h){n("overridden or never called on this node",!1)},b.prototype.selectOutOf=function(d,h){n("overridden or never called on this node",!1)},b.prototype.selectTowards=function(d,h){n("overridden or never called on this node",!1)},b}(q);ae.onNotify(function(v,b){(b==="move"||b==="upDown")&&v.show().clearSelection()}),fe.leftRightIntoCmdGoes=function(v){if(v&&v!=="up"&&v!=="down")throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+v+'"';return v},ae.onNotify(function(v,b){b!=="upDown"&&(v.upDownCache={})}),ae.onNotify(function(v,b){b==="edit"&&v.show().deleteSelection()}),ae.onNotify(function(v,b){b!=="select"&&v.endSelection()});var Ie=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.keystroke=function(d,h){this.cursor.parent.keystroke(d,h,this.getControllerSelf())},b.prototype.escapeDir=function(d,h,y){a(d);var D=this.cursor;if(D.parent!==this.root&&(y==null||y.preventDefault()),D.parent!==this.root)return D.clearSelection(),D.parent.moveOutOf(d,D),D.controller.aria.alert(),this.notify("move")},b.prototype.moveDir=function(d){a(d);var h=this.cursor,y=h.options.leftRightIntoCmdGoes,D=h[d];return h.selection?h.insDirOf(d,h.selection.getEnd(d)):D?D.moveTowards(d,h,y):h.parent.moveOutOf(d,h,y),this.notify("move")},b.prototype.moveLeft=function(){return this.moveDir(t)},b.prototype.moveRight=function(){return this.moveDir(e)},b.prototype.moveUp=function(){return this.moveUpDown("up")},b.prototype.moveDown=function(){return this.moveUpDown("down")},b.prototype.moveUpDown=function(d){var h=this,y=h.notify("upDown").cursor,D,L;d==="up"?(D="upInto",L="upOutOf"):(D="downInto",L="downOutOf");var F=y[t],K=y[e],te=K&&K[D],Ce=F&&F[D];return te?y.insAtLeftEnd(te):Ce?y.insAtRightEnd(Ce):y.parent.bubble(function(me){var he=me[L];if(he&&(typeof he=="function"&&(he=he.call(me,y)),he instanceof It&&y.jumpUpDown(me,he),he!==!0))return!1}),h},b.prototype.deleteDir=function(d){a(d);var h=this.cursor,y=h[d],D=h.parent.parent,L=h.controller;if(y&&y instanceof It)y.sides?L.aria.queue(y.parent.chToCmd(y.sides[-d].ch).mathspeak({createdLeftOf:h})):!y.blocks&&y.parent.ctrlSeq!=="\\text"&&L.aria.queue(y);else if(D&&D instanceof It)if(D.sides)L.aria.queue(D.parent.chToCmd(D.sides[d].ch).mathspeak({createdLeftOf:h}));else if(D.blocks&&D.mathspeakTemplate)if(D.upInto&&D.downInto)L.aria.queue(D.mathspeakTemplate[1]);else{var F=D.mathspeakTemplate,K=d===t?F[0]:F[F.length-1];L.aria.queue(K)}else L.aria.queue(D);var te=h.selection;if(this.notify("edit"),!te){var Ce=h[d];Ce?Ce.deleteTowards(d,h):h.parent.deleteOutOf(d,h)}var me=h[t],he=h[e];return me.siblingDeleted&&me.siblingDeleted(h.options,e),he.siblingDeleted&&he.siblingDeleted(h.options,t),h.parent.bubble(function(Me){Me.reflow()}),this},b.prototype.ctrlDeleteDir=function(d){a(d);var h=this.cursor;if(!h[d]||h.selection)return this.deleteDir(d);this.notify("edit");var y;d===t?y=new J(h.parent.getEnd(t),h[t]):y=new J(h[e],h.parent.getEnd(e)),h.controller.aria.queue(y),y.remove(),h.insAtDirEnd(d,h.parent);var D=h[t],L=h[e];return D&&D.siblingDeleted(h.options,e),L&&L.siblingDeleted(h.options,t),h.parent.bubble(function(F){F.reflow()}),this},b.prototype.backspace=function(){return this.deleteDir(t)},b.prototype.deleteForward=function(){return this.deleteDir(e)},b.prototype.startIncrementalSelection=function(){n("Multiple selections can't be simultaneously open",!ce),ce=!0,this.notify("select");var d=this.cursor;d.anticursor||d.startSelection()},b.prototype.selectDirIncremental=function(d){n("A selection is open",ce),ce=!0;var h=this.cursor,y=h.selection;a(d);var D=h[d];D?y&&y.getEnd(d)===D&&h.anticursor[-d]!==D?D.unselectInto(d,h):D.selectTowards(d,h):h.parent.selectOutOf(d,h)},b.prototype.finishIncrementalSelection=function(){n("A selection is open",ce);var d=this.cursor;d.clearSelection(),d.select()||d.show();var h=d.selection;h&&d.controller.aria.clear().queue(h.join("mathspeak"," ").trim()+" selected"),ce=!1},b.prototype.withIncrementalSelection=function(d){var h=this;try{this.startIncrementalSelection();try{d(function(y){return h.selectDirIncremental(y)})}finally{this.finishIncrementalSelection()}}finally{ce=!1}},b.prototype.selectDir=function(d){this.withIncrementalSelection(function(h){return h(d)})},b.prototype.selectLeft=function(){return this.selectDir(t)},b.prototype.selectRight=function(){return this.selectDir(e)},b.prototype.selectAll=function(){this.notify("move");var d=this.cursor;d.insAtRightEnd(this.root),this.withIncrementalSelection(function(h){for(;d[t];)h(t)})},b.prototype.selectToBlockEndInDir=function(d){var h=this.cursor;this.withIncrementalSelection(function(y){for(;h[d];)y(d)})},b.prototype.selectToRootEndInDir=function(d){var h=this,y=this.cursor;this.withIncrementalSelection(function(D){for(;y[d]||y.parent!==h.root;)D(d)})},b}(Qe),sr=function(v){ze(b,v);function b(d){return v.call(this)||this}return b}(It),de=function(){function v(ci){var Or=new mr;return ci.adopt(Or,0,0),Or}function b(ci){for(var Or=ci[0]||new mr,Ca=1;Ca<ci.length;Ca+=1)ci[Ca].children().adopt(Or,Or.getEnd(e),0);return Or}var d=ne.string,h=ne.regex,y=ne.letter,D=ne.digit,L=ne.any,F=ne.optWhitespace,K=ne.succeed,te=ne.fail,Ce=y.map(function(ci){return new eo(ci)}),me=D.map(function(ci){return new ec(ci)}),he=h(/^[^${}\\_^]/).map(function(ci){return new Zl(ci)}),Me=h(/^[^\\a-eg-zA-Z]/).or(d("\\").then(h(/^[a-z]+/i).or(h(/^\s+/).result(" ")).or(L))).then(function(ci){var Or=f[ci];if(Or)if(Or.constructor){var Ca=Or;return new Ca(ci).parser()}else{var Ua=Or;return Ua(ci).parser()}else return te("unknown command: \\"+ci)}),Ge=Me.or(Ce).or(me).or(he),Fe=d("{").then(function(){return tt}).skip(d("}")),Ue=F.then(Fe.or(Ge.map(v))),tt=Ue.many().map(b).skip(F),ii=d("[").then(Ue.then(function(ci){return ci.join("latex")!=="]"?K(ci):te("")}).many().map(b).skip(F)).skip(d("]")),Sr=tt;return Sr.block=Ue,Sr.optBlock=ii,Sr}();fe.maxDepth=function(v){return typeof v=="number"?v:void 0};var it=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.cleanLatex=function(d){return d.replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},b.prototype.exportLatex=function(){return this.cleanLatex(this.root.latex())},b.prototype.writeLatex=function(d){var h=this.notify("edit").cursor;return h.parent.writeLatex(h,d),this},b.prototype.exportLatexSelection=function(){var d={latex:"",startIndex:-1,endIndex:-1},h=this.cursor.selection;if(h)d.startSelectionBefore=h.getEnd(t),d.endSelectionAfter=h.getEnd(e);else{var y=this.cursor[t];y?d.startSelectionAfter=y:d.startSelectionBefore=this.cursor.parent;var D=this.cursor[e];D?d.endSelectionBefore=D:d.endSelectionAfter=this.cursor.parent}this.root.latexRecursive(d);for(var L=d.latex,F=this.cleanLatex(L),K=d.startIndex,te=d.endIndex,Ce=0,me=0;me<d.endIndex;me++)L[me]!==F[Ce]?(me<d.startIndex&&(K-=1),te-=1):Ce+=1;return{latex:F,startIndex:K,endIndex:te}},b.prototype.classifyLatexForEfficientUpdate=function(d){if(typeof d=="string"){var h=d.match(/-?[0-9.]+$/g);if(h&&h.length===1)return{latex:d,prefix:d.substr(0,d.length-h[0].length),digits:h[0]}}},b.prototype.updateLatexMathEfficiently=function(d,h){var y,D,L,F,K=this.root,te,Ce=this.classifyLatexForEfficientUpdate(d);if(Ce){if(te=this.classifyLatexForEfficientUpdate(h),!te||te.prefix!==Ce.prefix)return!1}else return!1;var me=te.digits,he=Ce.digits,Me=!1,Ge=!1;me[0]==="-"&&(Me=!0,me=me.substr(1)),he[0]==="-"&&(Ge=!0,he=he.substr(1));for(var Fe=this.root.getEnd(e),Ue=[],tt=me.length-1;tt>=0;tt--){if(!Fe||Fe.ctrlSeq!==me[tt]||Fe.parent!==K)return!1;Ue.unshift(Fe),Fe=Fe[t]}if(Me&&!Ge){var ii=Fe;if(!ii||ii.ctrlSeq!=="-"||ii[e]!==Ue[0]||ii.parent!==K)return!1;var Sr=ii[t];if(Sr&&Sr.parent!==K)return!1;Ue[0][t]=ii[t],K.getEnd(t)===ii&&K.setEnds((y={},y[t]=Ue[0],y[e]=K.getEnd(e),y)),Sr&&(Sr[e]=Ue[0]),ii.domFrag().remove()}if(!Me&&Ge){var ci=new ol("-"),Or=document.createElement("span");Or.textContent="-",ci.setDOM(Or);var Ca=Ue[0][t];Ca&&(Ca[e]=ci),K.getEnd(t)===Ue[0]&&K.setEnds((D={},D[t]=ci,D[e]=K.getEnd(e),D)),ci.parent=K,ci[t]=Ue[0][t],ci[e]=Ue[0],Ue[0][t]=ci,ci.contactWeld(this.cursor),ci.domFrag().insertBefore(Ue[0].domFrag())}var Ua=Math.min(me.length,he.length);for(tt=0;tt<Ua;tt++){var rp=he[tt];Fe=Ue[tt],Fe.ctrlSeq!==rp&&(Fe.ctrlSeq=rp,Fe.domFrag().oneElement().textContent=rp,Fe.mathspeakName=rp)}if(me.length>he.length)for(Fe=Ue[he.length-1],K.setEnds((L={},L[t]=K.getEnd(t),L[e]=Fe,L)),Fe[e]=0,tt=me.length-1;tt>=Ua;tt--)Ue[tt].domFrag().remove();if(he.length>me.length){var di=document.createDocumentFragment();for(tt=Ua;tt<he.length;tt++){var Zc=document.createElement("span");Zc.className="dcg-mq-digit",Zc.textContent=he[tt];var nl=new ec(he[tt]);nl.parent=K,nl.setDOM(Zc),di.appendChild(Zc),nl[t]=K.getEnd(e),nl[e]=0;var tB=nl[t];tB[e]=nl,K.setEnds((F={},F[t]=K.getEnd(t),F[e]=nl,F))}K.domFrag().oneElement().appendChild(di)}var ZM=this.exportLatex();if(ZM!==d)return console.warn("tried updating latex efficiently but did not work. Attempted: "+d+" but wrote: "+ZM),!1;var e1=K.getEnd(e);return e1&&e1.fixDigitGrouping(this.cursor.options),!0},b.prototype.renderLatexMathFromScratch=function(d){var h,y=this.root,D=this.cursor,L=ne.all,F=ne.eof,K=de.skip(F).or(L.result(!1)).parse(d);if(y.setEnds((h={},h[t]=0,h[e]=0,h)),K&&K.children().adopt(y,0,0),K){var te=y.domFrag();te.children().remove(),te.oneElement().appendChild(K.html()),y.finalizeInsert(D.options,D)}else y.domFrag().empty()},b.prototype.renderLatexMath=function(d){var h=this.cursor,y=this.root;this.notify("replace"),h.clearSelection();var D=this.exportLatex();(!y.getEnd(t)||!y.getEnd(e)||D!==d)&&(this.updateLatexMathEfficiently(d,D)||this.renderLatexMathFromScratch(d),this.updateMathspeak()),h.insAtRightEnd(y)},b.prototype.renderLatexText=function(d){var h,y=this.root,D=this.cursor;y.domFrag().children().slice(1).remove(),y.setEnds((h={},h[t]=0,h[e]=0,h)),delete D.selection,D.show().insAtRightEnd(y);var L=ne.regex,F=ne.string,K=ne.eof,te=ne.all,Ce=F("$").then(de).skip(F("$").or(K)).map(function(Ue){var tt=new RootMathCommand(D);tt.createBlocks();var ii=tt.getEnd(t);return Ue.children().adopt(ii,0,0),tt}),me=F("\\$").result("$"),he=me.or(L(/^[^$]/)).map(function(Ue){return new Zl(Ue)}),Me=Ce.or(he).many(),Ge=Me.skip(K).or(te.result(!1)).parse(d);if(Ge){for(var Fe=0;Fe<Ge.length;Fe+=1)Ge[Fe].adopt(y,y.getEnd(e),0);G(y.html()).appendTo(y.domFrag().oneElement()),y.finalizeInsert(D.options,D)}},b}(Ie),nt=function(v){return!1};ye.prototype.ignoreNextMousedown=nt;var ue;(function(){ae.onNotify(function(v,b){(b==="edit"||b==="replace")&&ue&&ue.cursor===v&&ue.cb()})})();var Pi=function(v){ze(b,v);function b(){var d=v!==null&&v.apply(this,arguments)||this;return d.handleMouseDown=function(h){var y=c(h.target,".dcg-mq-root-block"),D=y&&q.getNodeOfElement(y)||q.getNodeOfElement(d.root.domFrag().oneElement()),L=D.domFrag().firstNode().ownerDocument,F=D.controller,K=F.cursor,te=K.blink,Ce=F.getTextareaSpanOrThrow(),me=F.getTextareaOrThrow();if(h.preventDefault(),h.target.unselectable=!0,K.options.ignoreNextMousedown(h)||(K.options.ignoreNextMousedown=nt,c(h.target,".dcg-mq-ignore-mousedown")))return;var he=null;function Me(Sr){he=Sr.target}function Ge(Sr){K.anticursor||K.startSelection(),F.seek(he,Sr.clientX,Sr.clientY).cursor.select(),K.selection&&K.controller.aria.clear().queue(K.selection.join("mathspeak")+" selected").alert(),he=null}function Fe(){y==null||y.removeEventListener("mousemove",Me),L==null||L.removeEventListener("mousemove",Ge),L==null||L.removeEventListener("mouseup",tt),ue=void 0}function Ue(){F.editable?(K.show(),K.controller.aria.queue(K.parent).alert()):G(Ce).detach()}function tt(){K.blink=te,K.selection||Ue(),Fe()}var ii;ue={cursor:K,cb:function(){ii=!0,K.blink=te,K.clearSelection(),Ue(),Fe()}},!(F.blurred&&(y&&!F.editable&&G(y).prepend(G(Ce)),me.focus(),ii))&&(K.blink=o,F.seek(h.target,h.clientX,h.clientY).cursor.startSelection(),y==null||y.addEventListener("mousemove",Me),L==null||L.addEventListener("mousemove",Ge),L==null||L.addEventListener("mouseup",tt))},d}return b.prototype.addMouseEventListener=function(){this.container.addEventListener("mousedown",this.handleMouseDown)},b.prototype.removeMouseEventListener=function(){this.container.removeEventListener("mousedown",this.handleMouseDown)},b.prototype.seek=function(d,h,y){for(var D=this.notify("select").cursor,L;d&&(L=q.getNodeOfElement(d),!L);)d=d.parentElement;return L||(L=this.root),D.clearSelection().show(),L.seek(h,D),this.scrollHoriz(),this},b}(it),We=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.setOverflowClasses=function(){var d=this.root.domFrag().oneElement(),h=!1,y=!1;if(!this.blurred){var D=k(d).width,L=d.scrollWidth,F=d.scrollLeft;h=L>D+F,y=F>0}d.classList.contains("dcg-mq-editing-overflow-right")!==h&&d.classList.toggle("dcg-mq-editing-overflow-right"),d.classList.contains("dcg-mq-editing-overflow-left")!==y&&d.classList.toggle("dcg-mq-editing-overflow-left")},b.prototype.scrollHoriz=function(){var d=this,h=this.cursor,y=h.selection,D=k(this.root.domFrag().oneElement());if(h.domFrag().isEmpty()&&!y){this.cancelScrollHoriz&&(this.cancelScrollHoriz(),this.cancelScrollHoriz=void 0);var L=this.root.domFrag().oneElement(),F=L.scrollLeft;E(this.getScrollAnimationDuration(),function(Ue,tt,ii){Ue>=1?(d.cancelScrollHoriz=void 0,L.scrollLeft=0,d.setOverflowClasses()):(d.cancelScrollHoriz=ii,tt(),L.scrollLeft=Math.round((1-Ue)*F))});return}else if(y){var Ce=k(y.domFrag().oneElement()),me=Ce.left-(D.left+20),he=Ce.right-(D.right-20);if(y.getEnd(t)===h[e])if(me<0)var te=me;else if(he>0)if(Ce.left-he<D.left+20)var te=me;else var te=he;else return;else if(he>0)var te=he;else if(me<0)if(Ce.right-me>D.right-20)var te=he;else var te=me;else return}else{var K=k(h.domFrag().oneElement()).left;if(K>D.right-20)var te=K-(D.right-20);else if(K<D.left+20)var te=K-(D.left+20);else return}var Me=this.root.domFrag().oneElement();if(!(te<0&&Me.scrollLeft===0)&&!(te>0&&Me.scrollWidth<=Me.scrollLeft+D.width)){this.cancelScrollHoriz&&(this.cancelScrollHoriz(),this.cancelScrollHoriz=void 0);var Ge=this.root.domFrag().oneElement(),Fe=Ge.scrollLeft;E(this.getScrollAnimationDuration(),function(Ue,tt,ii){Ue>=1?(d.cancelScrollHoriz=void 0,Ge.scrollLeft=Math.round(Fe+te),d.setOverflowClasses()):(d.cancelScrollHoriz=ii,tt(),Ge.scrollLeft=Math.round(Fe+Ue*te))})}},b.prototype.getScrollAnimationDuration=function(){var d;return(d=this.options.scrollAnimationDuration)!==null&&d!==void 0?d:100},b}(Pi);ye.prototype.substituteTextarea=function(){return l("textarea",{autocapitalize:"off",autocomplete:"off",autocorrect:"off",spellcheck:!1,"x-palm-disable-ste-all":!0})};function il(v,b){return qe(v[0],b)}ye.prototype.substituteKeyboardEvents=il;var at=function(v){ze(b,v);function b(){var d=v!==null&&v.apply(this,arguments)||this;return d.selectFn=o,d}return b.prototype.createTextarea=function(){this.textareaSpan=l("span",{class:"dcg-mq-textarea"});var d=this.options.substituteTextarea();if(!d.nodeType)throw"substituteTextarea() must return a DOM element, got "+d;this.textarea=G(d).appendTo(this.textareaSpan).oneElement();var h=this;h.cursor.selectionChanged=function(){h.selectionChanged()}},b.prototype.selectionChanged=function(){var d=this;d.textareaSelectionTimeout||(d.textareaSelectionTimeout=setTimeout(function(){d.setTextareaSelection()}))},b.prototype.setTextareaSelection=function(){this.textareaSelectionTimeout=0;var d="";this.cursor.selection&&(d=this.cleanLatex(this.cursor.selection.join("latex")),this.options.statelessClipboard&&(d="$"+d+"$")),this.selectFn(d)},b.prototype.staticMathTextareaEvents=function(){var d=this;this.removeTextareaEventListener("cut"),this.removeTextareaEventListener("paste"),d.options.disableCopyPaste?this.removeTextareaEventListener("copy"):this.addTextareaEventListeners({copy:function(){d.setTextareaSelection()}}),this.addStaticFocusBlurListeners(),d.selectFn=function(h){var y=d.getTextareaOrThrow();y instanceof HTMLTextAreaElement&&(y.value=h,h&&y.select())}},b.prototype.editablesTextareaEvents=function(){var d=this,h=d.getTextareaOrThrow(),y=d.getTextareaSpanOrThrow();if(this.options.version<3){var D=this.options.assertJquery(),L=this.options.substituteKeyboardEvents(D(h),this);this.selectFn=function(K){L.select(K)}}else{var F=qe(h,this).select;this.selectFn=F}G(this.container).prepend(G(y)),this.addEditableFocusBlurListeners(),this.updateMathspeak()},b.prototype.unbindEditablesEvents=function(){var d=this,h=d.getTextareaOrThrow(),y=d.getTextareaSpanOrThrow();this.selectFn=function(D){h instanceof HTMLTextAreaElement&&(h.value=D,D&&h.select())},G(y).remove(),this.removeTextareaEventListener("focus"),this.removeTextareaEventListener("blur"),d.blurred=!0,this.removeTextareaEventListener("cut"),this.removeTextareaEventListener("paste")},b.prototype.typedText=function(d){if(d===`
`)return this.handle("enter");var h=this.notify(void 0).cursor;h.parent.write(h,d),this.scrollHoriz()},b.prototype.cut=function(){var d=this,h=d.cursor;h.selection&&setTimeout(function(){d.notify("edit"),h.parent.bubble(function(y){y.reflow()}),d.options&&d.options.onCut&&d.options.onCut()})},b.prototype.copy=function(){this.setTextareaSelection()},b.prototype.paste=function(d){this.options.statelessClipboard&&(d.slice(0,1)==="$"&&d.slice(-1)==="$"?d=d.slice(1,-1):d="\\text{"+d+"}"),this.writeLatex(d).cursor.show(),this.scrollHoriz(),this.options&&this.options.onPaste&&this.options.onPaste()},b.prototype.setupStaticField=function(){this.mathspeakSpan=l("span",{class:"dcg-mq-mathspeak"}),G(this.container).prepend(G(this.mathspeakSpan)),this.updateMathspeak(),this.blurred=!0,this.cursor.hide().parent.blur(this.cursor)},b.prototype.updateMathspeak=function(){var d=this,h=d.getAriaLabel(),y=/[A-Za-z0-9]$/.test(h)?h+":":h,D=d.root.mathspeak().trim();this.aria.clear();var L=d.getTextareaOrThrow();d.mathspeakSpan?(L.setAttribute("aria-label",""),d.mathspeakSpan.textContent=(y+" "+D).trim()):L.setAttribute("aria-label",(y+" "+D+" "+d.ariaPostLabel).trim())},b}(We),On=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.finalizeInsert=function(d,h){var y=this;y.postOrder(function(F){F.finalizeTree(d)}),y.postOrder(function(F){F.contactWeld(h)}),y.postOrder(function(F){F.blur(h)}),y.postOrder(function(F){F.reflow()});var D=y[e],L=y[t];D&&D.siblingCreated(d,t),L&&L.siblingCreated(d,e),y.bubble(function(F){F.reflow()})},b.prototype.prepareInsertionAt=function(d){var h=d.options.maxDepth;if(h!==void 0){var y=d.depth();if(y>h)return!1;this.removeNodesDeeperThan(h-y)}return!0},b.prototype.removeNodesDeeperThan=function(d){for(var h=0,y=[[this,h]],D;D=y.shift();){var L=D;L[0].children().each(function(F){var K=F instanceof mr?1:0;h=L[1]+K,h<=d?y.push([F,h]):(K?F.children():F).remove()})}},b}(It),lr=function(){function v(b,d){this.childCount=b,this.render=d}return v}(),gr=function(v){ze(b,v);function b(d,h,y){var D=v.call(this)||this;return D.textTemplate=[""],D.mathspeakTemplate=[""],D.setCtrlSeqHtmlAndText(d,h,y),D}return b.prototype.setEnds=function(d){n("MathCommand ends are never empty",d[t]&&d[e]),this.ends=d},b.prototype.getEnd=function(d){return this.ends[d]},b.prototype.setCtrlSeqHtmlAndText=function(d,h,y){this.ctrlSeq||(this.ctrlSeq=d),h&&(this.domView=h),y&&(this.textTemplate=y)},b.prototype.replaces=function(d){d.disown(),this.replacedFragment=d},b.prototype.isEmpty=function(){return this.foldChildren(!0,function(d,h){return d&&h.isEmpty()})},b.prototype.parser=function(){var d=this,h=de.block;return h.times(this.numBlocks()).map(function(y){d.blocks=y;for(var D=0;D<y.length;D+=1)y[D].adopt(d,d.getEnd(e),0);return d})},b.prototype.createLeftOf=function(d){var h=this,y=h.replacedFragment;if(h.createBlocks(),v.prototype.createLeftOf.call(this,d),y){var D=h.getEnd(t);y.adopt(D,0,0),y.domFrag().appendTo(D.domFrag().oneElement()),h.placeCursor(d),h.prepareInsertionAt(d)}h.finalizeInsert(d.options,d),h.placeCursor(d)},b.prototype.createBlocks=function(){for(var d=this,h=d.numBlocks(),y=d.blocks=Array(h),D=0;D<h;D+=1){var L=y[D]=new mr;L.adopt(d,d.getEnd(e),0)}},b.prototype.placeCursor=function(d){d.insAtRightEnd(this.foldChildren(this.getEnd(t),function(h,y){return h.isEmpty()?h:y}))},b.prototype.moveTowards=function(d,h,y){var D;y==="up"?D=this.upInto:y==="down"&&(D=this.downInto);var L=D||this.getEnd(-d);h.insAtDirEnd(-d,L),h.controller.aria.queueDirEndOf(-d).queue(h.parent,!0)},b.prototype.deleteTowards=function(d,h){this.isEmpty()?h[d]=this.remove()[d]:this.moveTowards(d,h)},b.prototype.selectTowards=function(d,h){h[-d]=this,h[d]=this[d]},b.prototype.selectChildren=function(){return new ve(this,this)},b.prototype.unselectInto=function(d,h){var y=h.anticursor,D=y.ancestors[this.id];h.insAtDirEnd(-d,D)},b.prototype.seek=function(d,h){function y(K){var te,Ce=K.domFrag().oneElement(),me=k(Ce).left,he=me+Ce.offsetWidth;return te={},te[t]=me,te[e]=he,te}var D=this,L=y(D);if(d<L[t])return h.insLeftOf(D);if(d>L[e])return h.insRightOf(D);var F=L[t];D.eachChild(function(K){var te=y(K);if(d<te[t])return d-F<te[t]-d?K[t]?h.insAtRightEnd(K[t]):h.insLeftOf(D):h.insAtLeftEnd(K),!1;if(d>te[e]){K[e]?F=te[e]:L[e]-d<d-te[e]?h.insRightOf(D):h.insAtRightEnd(K);return}else return K.seek(d,h),!1})},b.prototype.numBlocks=function(){return this.domView.childCount},b.prototype.html=function(){var d=this.blocks;n("domView is defined",this.domView);var h=this.domView,y=h.render(d||[]);return this.setDOM(y),q.linkElementByCmdNode(y,this),y},b.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),d.latex+=this.ctrlSeq||"",this.eachChild(function(h){d.latex+="{";var y=d.latex.length;h.latexRecursive(d);var D=d.latex.length;y===D&&(d.latex+=" "),d.latex+="}"}),this.checkCursorContextClose(d)},b.prototype.text=function(){var d=this,h=0;return d.foldChildren(d.textTemplate[h],function(y,D){h+=1;var L=D.text();return y&&d.textTemplate[h]==="("&&L[0]==="("&&L.slice(-1)===")"?y+L.slice(1,-1)+d.textTemplate[h]:y+L+(d.textTemplate[h]||"")})},b.prototype.mathspeak=function(){var d=this,h=0;return d.foldChildren(d.mathspeakTemplate[h]||"Start"+d.ctrlSeq+" ",function(y,D){return h+=1,y+" "+D.mathspeak()+" "+(d.mathspeakTemplate[h]+" "||"End"+d.ctrlSeq+" ")})},b}(On),$o=function(v){ze(b,v);function b(d,h,y,D){var L=v.call(this)||this;return L.setCtrlSeqHtmlTextAndMathspeak(d,h?new lr(0,function(){return h.cloneNode(!0)}):void 0,y,D),L}return b.prototype.setCtrlSeqHtmlTextAndMathspeak=function(d,h,y,D){!y&&d&&(y=d.replace(/^\\/,"")),this.mathspeakName=D||y,v.prototype.setCtrlSeqHtmlAndText.call(this,d,h,[y||""])},b.prototype.parser=function(){return ne.succeed(this)},b.prototype.numBlocks=function(){return 0},b.prototype.replaces=function(d){d.remove()},b.prototype.createBlocks=function(){},b.prototype.moveTowards=function(d,h){h.domFrag().insDirOf(d,this.domFrag()),h[-d]=this,h[d]=this[d],h.controller.aria.queue(this)},b.prototype.deleteTowards=function(d,h){h[d]=this.remove()[d]},b.prototype.seek=function(d,h){var y=this.domFrag().oneElement(),D=k(y).left;return d-D<y.offsetWidth/2?h.insLeftOf(this):h.insRightOf(this),h},b.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),d.latex+=this.ctrlSeq||"",this.checkCursorContextClose(d)},b.prototype.text=function(){return this.textTemplate.join("")},b.prototype.mathspeak=function(d){return this.mathspeakName||""},b.prototype.placeCursor=function(){},b.prototype.isEmpty=function(){return!0},b}(gr),Zl=function(v){ze(b,v);function b(d,h,y){return v.call(this,d,l("span",{},[h||l.text(d)]),void 0,y)||this}return b}($o);function _n(v,b,d){return function(){return new Zl(v,b?l.entityText(b):void 0,d)}}var ht=function(v){ze(b,v);function b(d,h,y,D,L){var F=this;return L?F=v.call(this,d,l("span",{},[h||l.text(d||"")]),void 0,D)||this:F=v.call(this,d,l("span",{class:"dcg-mq-binary-operator"},h?[h]:[]),y,D)||this,F}return b}($o);function yn(v,b,d,h){return function(){return new ht(v,b?l.entityText(b):void 0,d,h)}}var mr=function(v){ze(b,v);function b(){var d=v!==null&&v.apply(this,arguments)||this;return d.ariaLabel="block",d}return b.prototype.join=function(d){return this.foldChildren("",function(h,y){return h+y[d]()})},b.prototype.html=function(){var d=document.createDocumentFragment();return this.eachChild(function(h){var y=h.html();d.appendChild(y)}),d},b.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),this.eachChild(function(h){return h.latexRecursive(d)}),this.checkCursorContextClose(d)},b.prototype.text=function(){var d=this.getEnd(t),h=this.getEnd(e);return d===h&&d!==0?d.text():this.join("text")},b.prototype.mathspeak=function(){var d="",h={};return this.controller&&(h=this.controller.options.autoOperatorNames),this.foldChildren([],function(y,D){if(D.isPartOfOperator)d+=D.mathspeak();else{if(d!==""){if(h._maxLength>0){var L=h[d.toLowerCase()];typeof L=="string"&&(d=L)}y.push(d+" "),d=""}var F=D.mathspeak(),K=D.ctrlSeq;isNaN(K)&&K!=="."&&(!D.parent||!D.parent.parent||!D.parent.parent.isTextBlock())&&(F=" "+F+" "),y.push(F)}return y}).join("").replace(/ +(?= )/g,"").replace(/(\.)([0-9]+)/g,function(y,D,L){return D+L.split("").join(" ").trim()})},b.prototype.keystroke=function(d,h,y){if(y.options.spaceBehavesLikeTab&&(d==="Spacebar"||d==="Shift-Spacebar")){h==null||h.preventDefault(),y.escapeDir(d==="Shift-Spacebar"?t:e,d,h);return}return v.prototype.keystroke.call(this,d,h,y)},b.prototype.moveOutOf=function(d,h,y){var D;if(y==="up"?D=this.parent.upInto:y==="down"&&(D=this.parent.downInto),!D&&this[d]){var L=-d;h.insAtDirEnd(L,this[d]),h.controller.aria.queueDirEndOf(L).queue(h.parent,!0)}else h.insDirOf(d,this.parent),h.controller.aria.queueDirOf(d).queue(this.parent)},b.prototype.selectOutOf=function(d,h){h.insDirOf(d,this.parent)},b.prototype.deleteOutOf=function(d,h){h.unwrapGramp()},b.prototype.seek=function(d,h){var y=this.getEnd(e);if(!y)return h.insAtRightEnd(this);var D=y.domFrag().oneElement(),L=k(D).left;if(L+D.offsetWidth<d)return h.insAtRightEnd(this);var F=this.getEnd(t);if(d<k(F.domFrag().oneElement()).left)return h.insAtLeftEnd(this);for(;d<k(y.domFrag().oneElement()).left;)y=y[t];return y.seek(d,h)},b.prototype.chToCmd=function(d,h){var y;return d.match(/^[a-eg-zA-Z]$/)?new eo(d):/^\d$/.test(d)?new ec(d):h&&h.typingSlashWritesDivisionSymbol&&d==="/"?f["\xF7"](d):h&&h.typingAsteriskWritesTimesSymbol&&d==="*"?f["\xD7"](d):h&&h.typingPercentWritesPercentOf&&d==="%"?f.percentof(d):(y=O[d]||f[d])?y.constructor?new y(d):y(d):new Zl(d)},b.prototype.write=function(d,h){var y=this.chToCmd(h,d.options);d.selection&&y.replaces(d.replaceSelection()),d.isTooDeep()||(y.createLeftOf(d.show()),h==="/"?d.controller.aria.alert("over"):d.controller.aria.alert(y.mathspeak({createdLeftOf:d})))},b.prototype.writeLatex=function(d,h){var y=ne.all,D=ne.eof,L=de.skip(D).or(y.result(!1)).parse(h);if(L&&!L.isEmpty()&&L.prepareInsertionAt(d)){L.children().adopt(d.parent,d[t],d[e]),G(L.html()).insertBefore(d.domFrag()),d[t]=L.getEnd(e),L.finalizeInsert(d.options,d);var F=L.getEnd(e),K=L.getEnd(t),te=F[e],Ce=K[t];te&&te.siblingCreated(d.options,t),Ce&&Ce.siblingCreated(d.options,e),d.parent.bubble(function(me){me.reflow()})}},b.prototype.focus=function(){return this.domFrag().addClass("dcg-mq-hasCursor"),this.domFrag().removeClass("dcg-mq-empty"),this},b.prototype.blur=function(d){return this.domFrag().removeClass("dcg-mq-hasCursor"),this.isEmpty()&&(this.domFrag().addClass("dcg-mq-empty"),d&&this.isQuietEmptyDelimiter(d.options.quietEmptyDelimiters)&&this.domFrag().addClass("dcg-mq-quiet-delimiter")),this},b}(On);ye.prototype.mouseEvents=!0,oe.StaticMath=function(v){var b;return b=function(d){ze(h,d);function h(y){var D=d.call(this,y)||this,L=D.innerFields=[];return D.__controller.root.postOrder(function(F){F.registerInnerField(L,v.InnerMathField)}),D}return h.prototype.__mathquillify=function(y,D){return this.config(y),d.prototype.mathquillify.call(this,"dcg-mq-math-mode"),this.__controller.setupStaticField(),this.__options.mouseEvents&&(this.__controller.addMouseEventListener(),this.__controller.staticMathTextareaEvents()),this},h.prototype.latex=function(y){var D=d.prototype.latex.apply(this,arguments);if(arguments.length>0){var L=this.innerFields=[];this.__controller.root.postOrder(function(F){F.registerInnerField(L,v.InnerMathField)}),this.__controller.updateMathspeak()}return D},h.prototype.setAriaLabel=function(y){return this.__controller.setAriaLabel(y),this},h.prototype.getAriaLabel=function(){return this.__controller.getAriaLabel()},h}(v.AbstractMathQuill),b.RootBlock=mr,b};var Eo=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b}(mr);lo(Eo.prototype),oe.MathField=function(v){var b;return b=function(d){ze(h,d);function h(){return d!==null&&d.apply(this,arguments)||this}return h.prototype.__mathquillify=function(y,D){return this.config(y),D>1&&(this.__controller.root.reflow=o),d.prototype.mathquillify.call(this,"dcg-mq-editable-field dcg-mq-math-mode"),delete this.__controller.root.reflow,this},h}(v.EditableField),b.RootBlock=Eo,b},oe.InnerMathField=function(v){return n("MathField class is defined",v.MathField),function(b){ze(d,b);function d(){return b!==null&&b.apply(this,arguments)||this}return d.prototype.makeStatic=function(){this.__controller.editable=!1,this.__controller.root.blur(),this.__controller.unbindEditablesEvents(),G(this.__controller.container).removeClass("dcg-mq-editable-field")},d.prototype.makeEditable=function(){this.__controller.editable=!0,this.__controller.editablesTextareaEvents(),this.__controller.cursor.insAtRightEnd(this.__controller.root),G(this.__controller.container).addClass("dcg-mq-editable-field")},d}(v.MathField)};var Mu=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.finalizeTree=function(d,h){this.sharedSiblingMethod(d,h)},b.prototype.siblingDeleted=function(d,h){this.sharedSiblingMethod(d,h)},b.prototype.siblingCreated=function(d,h){this.sharedSiblingMethod(d,h)},b.prototype.sharedSiblingMethod=function(d,h){h!==t&&this[e]instanceof b||this.fixDigitGrouping(d)},b.prototype.fixDigitGrouping=function(d){if(d.enableDigitGrouping){var h=this,y=this,D=0,L=[],F="\\ ",K=".",te=h;do if(/^[0-9]$/.test(te.ctrlSeq))h=te;else if(te.ctrlSeq===F)h=te,D+=1;else if(te.ctrlSeq===K)h=te,L.push(te);else break;while(te=h[t]);for(;te=y[e];)if(/^[0-9]$/.test(te.ctrlSeq))y=te;else if(te.ctrlSeq===F)y=te,D+=1;else if(te.ctrlSeq===K)y=te,L.push(te);else break;for(;y!==h&&h&&h.ctrlSeq===F;)h=h[e],D-=1;for(;y!==h&&y&&y.ctrlSeq===F;)y=y[t],D-=1;if(!(h===y&&h&&h.ctrlSeq===F)){var Ce=D>0||L.length>1;Ce?this.removeGroupingBetween(h,y):L[0]?(L[0]!==h&&this.addGroupingBetween(L[0][t],h),L[0]!==y&&this.removeGroupingBetween(L[0][e],y)):this.addGroupingBetween(y,h)}}},b.prototype.removeGroupingBetween=function(d,h){var y=d;do if(y instanceof b&&y.setGroupingClass(void 0),!y||y===h)break;while(y=y[e])},b.prototype.addGroupingBetween=function(d,h){for(var F=d,y=0,D=0,F=d;F&&(D+=1,F!==h);)F=F[t];var L=D%3;L===0&&(L=3);for(var F=d;F;){y+=1;var K=void 0;if(D>=4&&(y===D?K="dcg-mq-group-leading-"+L:y%3===0&&y!==D&&(K="dcg-mq-group-start"),K||(K="dcg-mq-group-other")),F instanceof b&&F.setGroupingClass(K),F===h)break;F=F[t]}},b.prototype.setGroupingClass=function(d){this._groupingClass!==d&&(this._groupingClass&&this.domFrag().removeClass(this._groupingClass),d&&this.domFrag().addClass(d),this._groupingClass=d)},b}($o),ec=function(v){ze(b,v);function b(d,h){return v.call(this,d,l("span",{class:"dcg-mq-digit"},[l.text(d)]),void 0,h)||this}return b.prototype.createLeftOf=function(d){var h=d[t],y=h&&h[t],D=d.parent.parent instanceof bs?d.parent.parent.sub:void 0;d.options.autoSubscriptNumerals&&d.parent!==D&&(h instanceof xn&&h.isItalic!==!1||h instanceof bs&&y instanceof xn&&y.isItalic!==!1)?(new UM().createLeftOf(d),v.prototype.createLeftOf.call(this,d),d.insRightOf(d.parent.parent)):v.prototype.createLeftOf.call(this,d)},b.prototype.mathspeak=function(d){if(d&&d.createdLeftOf){var h=d.createdLeftOf,y=h[t],D=y&&y[t],L=h.parent.parent instanceof bs?h.parent.parent.sub:void 0;if(h.options.autoSubscriptNumerals&&h.parent!==L&&(y instanceof xn&&y.isItalic!==!1||h[t]instanceof bs&&D instanceof xn&&D.isItalic!==!1))return"Subscript "+v.prototype.mathspeak.call(this)+" Baseline"}return v.prototype.mathspeak.call(this)},b}(Mu),xn=function(v){ze(b,v);function b(d,h){return v.call(this,d,l("var",{},[h||l.text(d)]))||this}return b.prototype.text=function(){var d=this.ctrlSeq||"";return this.isPartOfOperator?d[0]=="\\"?d=d.slice(1,d.length):d[d.length-1]==" "&&(d=d.slice(0,-1)):(this[t]&&!(this[t]instanceof b)&&!(this[t]instanceof ht)&&this[t].ctrlSeq!=="\\ "&&(d="*"+d),this[e]&&!(this[e]instanceof ht)&&!(this[e]instanceof bs)&&(d+="*")),d},b.prototype.mathspeak=function(){var d=this.ctrlSeq||"";return this.isPartOfOperator||d.length>1||this.parent&&this.parent.parent&&this.parent.parent.isTextBlock()?v.prototype.mathspeak.call(this):'"'+d+'"'},b}($o);function bi(v,b,d){return function(){return new xn(v,l.entityText(b))}}ye.prototype.autoCommands={_maxLength:0},fe.autoCommands=function(v){if(typeof v!="string"||!/^[a-z]+(?: [a-z]+)*$/i.test(v))throw'"'+v+'" not a space-delimited list of only letters';for(var b=v.split(" "),d={},h=0,y=0;y<b.length;y+=1){var D=b[y];if(D.length<2)throw'autocommand "'+D+'" not minimum length of 2';if(f[D]===an)throw'"'+D+'" is a built-in operator name';d[D]=1,h=r(h,D.length)}return d._maxLength=h,d},ye.prototype.quietEmptyDelimiters={},fe.quietEmptyDelimiters=function(v){v===void 0&&(v="");for(var b=v.split(" "),d={},h=0;h<b.length;h+=1){var y=b[h];d[y]=1}return d},ye.prototype.autoParenthesizedFunctions={_maxLength:0},fe.autoParenthesizedFunctions=function(v){if(typeof v!="string"||!/^[a-z]+(?: [a-z]+)*$/i.test(v))throw'"'+v+'" not a space-delimited list of only letters';for(var b=v.split(" "),d={},h=0,y=0;y<b.length;y+=1){var D=b[y];if(D.length<2)throw'autocommand "'+D+'" not minimum length of 2';d[D]=1,h=r(h,D.length)}return d._maxLength=h,d};var eo=function(v){ze(b,v);function b(d){var h=v.call(this,d)||this;return h.letter=d,h}return b.prototype.checkAutoCmds=function(d){if(!this.shouldIgnoreSubstitutionInSimpleSubscript(d.options)){var h=d.options.autoCommands,y=h._maxLength||0;if(y>0){for(var D="",L=this,F=0;L instanceof b&&L.ctrlSeq===L.letter&&F<y;)D=L.letter+D,L=L[t],F+=1;for(;D.length;){if(h.hasOwnProperty(D)){for(L=this,F=1;L&&F<D.length;F+=1,L=L[t]);new J(L,this).remove(),d[t]=L[t];var K=f[D],te;return R(K)?te=new K(D):te=K(D),te.createLeftOf(d)}D=D.slice(1)}}}},b.prototype.autoParenthesize=function(d){var h=d.parent.getEnd(e);if(!(h&&h instanceof ys&&h.ctrlSeq==="\\left(")&&!this.shouldIgnoreSubstitutionInSimpleSubscript(d.options)){for(var y="",D=this,L=0,F=d.options.autoParenthesizedFunctions,K=F._maxLength||0,te=d.options.autoOperatorNames;D instanceof b&&L<K;)y=D.letter+y,D=D[t],L+=1;for(;y.length;){if(F.hasOwnProperty(y)&&te.hasOwnProperty(y))return d.parent.write(d,"(");y=y.slice(1)}}},b.prototype.createLeftOf=function(d){v.prototype.createLeftOf.call(this,d),this.checkAutoCmds(d),this.autoParenthesize(d)},b.prototype.italicize=function(d){return this.isItalic=d,this.isPartOfOperator=!d,this.domFrag().toggleClass("dcg-mq-operator-name",!d),this},b.prototype.finalizeTree=function(d,h){this.sharedSiblingMethod(d,h)},b.prototype.siblingDeleted=function(d,h){this.sharedSiblingMethod(d,h)},b.prototype.siblingCreated=function(d,h){this.sharedSiblingMethod(d,h)},b.prototype.sharedSiblingMethod=function(d,h){h!==t&&this[e]instanceof b||this.autoUnItalicize(d)},b.prototype.autoUnItalicize=function(d){var h=d.autoOperatorNames;if(h._maxLength!==0&&!this.shouldIgnoreSubstitutionInSimpleSubscript(d)){for(var y=this.letter,D=this[t];D instanceof b;D=D[t])y=D.letter+y;for(var L=this[e];L instanceof b;L=L[e])y+=L.letter;var F=D&&D[e],K=L&&L[t];new J(F||this.parent.getEnd(t),K||this.parent.getEnd(e)).each(function(Ua){Ua instanceof b&&(Ua.italicize(!0).domFrag().removeClass("dcg-mq-first dcg-mq-last dcg-mq-followed-by-supsub"),Ua.ctrlSeq=Ua.letter)});var te=h._maxLength||0;e:for(var Ce=0,me=D[e]||this.parent.getEnd(t);me&&Ce<y.length;Ce+=1,me=me[e])for(var he=i(te,y.length-Ce);he>0;he-=1){var Me=y.slice(Ce,Ce+he),Ge=void 0;if(h.hasOwnProperty(Me)){for(var Fe=0,Ue=me;Fe<he;Fe+=1,Ue=Ue[e])Ue instanceof b&&(Ue.italicize(!1),Ge=Ue);var tt=oa.hasOwnProperty(Me);if(me.ctrlSeq=(tt?"\\":"\\operatorname{")+me.ctrlSeq,Ge.ctrlSeq+=tt?" ":"}",Do.hasOwnProperty(Me)){var ii=Ge[t],Sr=ii&&ii[t],ci=Sr&&Sr[t];ci.domFrag().addClass("dcg-mq-last")}if(this.shouldOmitPadding(me[t])||me.domFrag().addClass("dcg-mq-first"),!this.shouldOmitPadding(Ge[e]))if(Ge[e]instanceof bs){var Or=Ge[e],Ca=Or.siblingCreated=Or.siblingDeleted=function(){Or.domFrag().toggleClass("dcg-mq-after-operator-name",!(Or[e]instanceof ys))};Ca()}else Ge.domFrag().toggleClass("dcg-mq-last",!(Ge[e]instanceof ys));Ce+=he-1,me=Ge;continue e}}}},b.prototype.shouldOmitPadding=function(d){return!d||d.ctrlSeq==="."||d instanceof ht||d instanceof ip},b}(xn),oa={};ye.prototype.autoOperatorNames=Gu();var Do={limsup:1,liminf:1,projlim:1,injlim:1};function Gu(){for(var v={_maxLength:9},b="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),d=0;d<b.length;d+=1)oa[b[d]]=v[b[d]]=1;for(var h="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),d=0;d<h.length;d+=1)oa[h[d]]=1;for(var y="sin cos tan sec cosec csc cotan cot ctg".split(" "),d=0;d<y.length;d+=1)v[y[d]]=v["arc"+y[d]]=v[y[d]+"h"]=v["ar"+y[d]+"h"]=v["arc"+y[d]+"h"]=1;for(var D="gcf hcf lcm proj span".split(" "),d=0;d<D.length;d+=1)v[D[d]]=1;return v}fe.autoOperatorNames=function(v){if(typeof v!="string")throw'"'+v+'" not a space-delimited list';if(!/^[a-z\|\-]+(?: [a-z\|\-]+)*$/i.test(v))throw'"'+v+'" not a space-delimited list of letters or "|"';for(var b=v.split(" "),d={},h=0,y=0;y<b.length;y+=1){var D=b[y];if(D.length<2)throw'"'+D+'" not minimum length of 2';if(D.indexOf("|")<0)d[D]=D,h=r(h,D.length);else{var L=D.split("|");if(L.length>2)throw'"'+D+'" has more than 1 mathspeak delimiter';if(L[0].length<2)throw'"'+D[0]+'" not minimum length of 2';d[L[0]]=L[1].replace(/-/g," "),h=r(h,L[0].length)}}return d._maxLength=h,d};var an=function(v){ze(b,v);function b(d){return v.call(this,d||"")||this}return b.prototype.createLeftOf=function(d){for(var h=this.ctrlSeq,y=0;y<h.length;y+=1)new eo(h.charAt(y)).createLeftOf(d)},b.prototype.parser=function(){for(var d=this.ctrlSeq,h=new mr,y=0;y<d.length;y+=1)new eo(d.charAt(y)).adopt(h,h.getEnd(e),0);return ne.succeed(h.children())},b}($o);for(var tc in ye.prototype.autoOperatorNames)ye.prototype.autoOperatorNames.hasOwnProperty(tc)&&(f[tc]=an);f.operatorname=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.createLeftOf=function(){},b.prototype.numBlocks=function(){return 1},b.prototype.parser=function(){return de.block.map(function(d){var h=!0,y="",D=d.children();return D.each(function(L){L instanceof eo?y+=L.letter:h=!1}),h&&y==="ans"?HM():D})},b}(gr),f.f=function(v){ze(b,v);function b(){var d=this,h="f";return d=v.call(this,h)||this,d.letter=h,d.domView=new lr(0,function(){return l("var",{class:"dcg-mq-f"},[l.text("f")])}),d}return b.prototype.italicize=function(d){return this.domFrag().eachElement(function(h){return h.textContent="f"}),this.domFrag().toggleClass("dcg-mq-f",d),v.prototype.italicize.call(this,d)},b}(eo),f[" "]=f.space=function(){return new Mu("\\ ",l("span",{},[l.text(p)])," ")},f["."]=function(){return new Mu(".",l("span",{class:"dcg-mq-digit"},[l.text(".")]),".")},f["'"]=f.prime=_n("'","&prime;","prime"),f["\u2033"]=f.dprime=_n("\u2033","&Prime;","double prime"),f.backslash=_n("\\backslash ","\\","backslash"),O["\\"]||(O["\\"]=f.backslash),f.$=_n("\\$","$","dollar"),f.square=_n("\\square ","\u25A1","square"),f.mid=_n("\\mid ","\u2223","mid");var rl=function(v){ze(b,v);function b(d,h,y){return v.call(this,d,l("span",{class:"dcg-mq-nonSymbola"},[h||l.text(d)]))||this}return b}($o);f["@"]=function(){return new rl("@")},f["&"]=function(){return new rl("\\&",l.entityText("&amp;"),"and")},f["%"]=function(v){ze(b,v);function b(){return v.call(this,"\\%",l.text("%"),"percent")||this}return b.prototype.parser=function(){var d=ne.optWhitespace,h=ne.string;return d.then(h("\\operatorname{of}").map(function(){return WM()})).or(v.prototype.parser.call(this))},b}(rl),f["\u2225"]=f.parallel=_n("\\parallel ","&#x2225;","parallel"),f["\u2226"]=f.nparallel=_n("\\nparallel ","&#x2226;","not parallel"),f["\u27C2"]=f.perp=_n("\\perp ","&#x27C2;","perpendicular"),f.alpha=f.beta=f.gamma=f.delta=f.zeta=f.eta=f.theta=f.iota=f.kappa=f.mu=f.nu=f.xi=f.rho=f.sigma=f.tau=f.chi=f.psi=f.omega=function(v){return new xn("\\"+v+" ",l.entityText("&"+v+";"))},f.phi=bi("\\phi ","&#981;","phi"),f.phiv=f.varphi=bi("\\varphi ","&phi;","phi"),f.epsilon=bi("\\epsilon ","&#1013;","epsilon"),f.epsiv=f.varepsilon=bi("\\varepsilon ","&epsilon;","epsilon"),f.piv=f.varpi=bi("\\varpi ","&piv;","piv"),f.sigmaf=f.sigmav=f.varsigma=bi("\\varsigma ","&sigmaf;","sigma"),f.thetav=f.vartheta=f.thetasym=bi("\\vartheta ","&thetasym;","theta"),f.upsilon=f.upsi=bi("\\upsilon ","&upsilon;","upsilon"),f.gammad=f.Gammad=f.digamma=bi("\\digamma ","&#989;","gamma"),f.kappav=f.varkappa=bi("\\varkappa ","&#1008;","kappa"),f.rhov=f.varrho=bi("\\varrho ","&#1009;","rho"),f.pi=f.\u03C0=function(){return new rl("\\pi ",l.entityText("&pi;"),"pi")},f.lambda=function(){return new rl("\\lambda ",l.entityText("&lambda;"),"lambda")},f.Upsilon=f.Upsi=f.upsih=f.Upsih=function(){return new $o("\\Upsilon ",l("var",{style:"font-family: serif"},[l.entityText("&upsih;")]),"capital upsilon")},f.Gamma=f.Delta=f.Theta=f.Lambda=f.Xi=f.Pi=f.Sigma=f.Phi=f.Psi=f.Omega=f.forall=function(v){return new Zl("\\"+v+" ",l.entityText("&"+v+";"))};var Cr=function(v){ze(b,v);function b(d){var h=v.call(this)||this;return h.latexStr=d,h}return b.prototype.createLeftOf=function(d){var h=de.parse(this.latexStr);h.children().adopt(d.parent,d[t],d[e]),d[t]=h.getEnd(e),G(h.html()).insertBefore(d.domFrag()),h.finalizeInsert(d.options,d);var y=h.getEnd(e),D=y&&y[e];D&&D.siblingCreated(d.options,t);var L=h.getEnd(t),F=L&&L[t];F&&F.siblingCreated(d.options,e),d.parent.bubble(function(K){K.reflow()})},b.prototype.mathspeak=function(){return de.parse(this.latexStr).mathspeak()},b.prototype.parser=function(){var d=de.parse(this.latexStr).children();return ne.succeed(d)},b}(gr);f["\u2070"]=function(){return new Cr("^0")},f["\xB9"]=function(){return new Cr("^1")},f["\xB2"]=function(){return new Cr("^2")},f["\xB3"]=function(){return new Cr("^3")},f["\u2074"]=function(){return new Cr("^4")},f["\u2075"]=function(){return new Cr("^5")},f["\u2076"]=function(){return new Cr("^6")},f["\u2077"]=function(){return new Cr("^7")},f["\u2078"]=function(){return new Cr("^8")},f["\u2079"]=function(){return new Cr("^9")},f["\xBC"]=function(){return new Cr("\\frac14")},f["\xBD"]=function(){return new Cr("\\frac12")},f["\xBE"]=function(){return new Cr("\\frac34")},f["\u221A"]=function(){return new Cr("\\sqrt{}")};function tp(v){if(!v)return!1;var b=v[t];if(b){if(b instanceof ht||/^(\\ )|[,;:\(\[]$/.test(b.ctrlSeq))return!1}else return v.parent&&v.parent.parent&&v.parent.parent.isStyleBlock()?tp(v.parent.parent):!1;return!0}var ol=function(v){ze(b,v);function b(d,h,y){return v.call(this,d,h,void 0,y,!0)||this}return b.prototype.contactWeld=function(d,h){this.sharedSiblingMethod(d.options,h)},b.prototype.siblingCreated=function(d,h){this.sharedSiblingMethod(d,h)},b.prototype.siblingDeleted=function(d,h){this.sharedSiblingMethod(d,h)},b.prototype.sharedSiblingMethod=function(d,h){if(h!==e)return this.domFrag().oneElement().className=tp(this)?"dcg-mq-binary-operator":"",this},b}(ht);f["+"]=function(v){ze(b,v);function b(){return v.call(this,"+",l.text("+"))||this}return b.prototype.mathspeak=function(){return tp(this)?"plus":"positive"},b}(ol);var Au=function(v){ze(b,v);function b(){return v.call(this,"-",l.entityText("&minus;"))||this}return b.prototype.mathspeak=function(){return tp(this)?"minus":"negative"},b}(ol);f["\u2212"]=f["\u2014"]=f["\u2013"]=f["-"]=Au,f["\xB1"]=f.pm=f.plusmn=f.plusminus=function(){return new ol("\\pm ",l.entityText("&plusmn;"),"plus-or-minus")},f.mp=f.mnplus=f.minusplus=function(){return new ol("\\mp ",l.entityText("&#8723;"),"minus-or-plus")},O["*"]=f.sdot=f.cdot=yn("\\cdot ","&middot;","*","times");var va=function(v){ze(b,v);function b(){return v.call(this,"\\to ",l.entityText("&rarr;"),"to")||this}return b.prototype.deleteTowards=function(d,h){if(d===t){var y=h[t];new J(y,this).remove(),h[t]=y[t],new Au().createLeftOf(h),h[t].bubble(function(D){D.reflow()});return}v.prototype.deleteTowards.call(this,d,h)},b}(ht);f["\u2192"]=f.to=va;var Mm=function(v){ze(b,v);function b(d,h){var y=this,D=h?"Strict":"";return y=v.call(this,d["ctrlSeq".concat(D)],l.entityText(d["htmlEntity".concat(D)]),d["text".concat(D)],d["mathspeak".concat(D)])||this,y.data=d,y.strict=h,y}return b.prototype.swap=function(d){this.strict=d;var h=d?"Strict":"";this.ctrlSeq=this.data["ctrlSeq".concat(h)],this.domFrag().children().replaceWith(G(l.entityText(this.data["htmlEntity".concat(h)]))),this.textTemplate=[this.data["text".concat(h)]],this.mathspeakName=this.data["mathspeak".concat(h)]},b.prototype.deleteTowards=function(d,h){if(d===t&&!this.strict){this.swap(!0),this.bubble(function(y){y.reflow()});return}v.prototype.deleteTowards.call(this,d,h)},b}(ht),NM={ctrlSeq:"\\le ",htmlEntity:"&le;",text:"\u2264",mathspeak:"less than or equal to",ctrlSeqStrict:"<",htmlEntityStrict:"&lt;",textStrict:"<",mathspeakStrict:"less than"},BM={ctrlSeq:"\\ge ",htmlEntity:"&ge;",text:"\u2265",mathspeak:"greater than or equal to",ctrlSeqStrict:">",htmlEntityStrict:"&gt;",textStrict:">",mathspeakStrict:"greater than"},Y5=function(v){ze(b,v);function b(){return v.call(this,BM,!0)||this}return b.prototype.createLeftOf=function(d){var h=d[t];if(h instanceof ht&&h.ctrlSeq==="-"){var y=h;d[t]=y[t],y.remove(),new va().createLeftOf(d),d[t].bubble(function(D){D.reflow()});return}v.prototype.createLeftOf.call(this,d)},b}(Mm);f["<"]=f.lt=function(){return new Mm(NM,!0)},f[">"]=f.gt=Y5,f["\u2264"]=f.le=f.leq=function(){return new Mm(NM,!1)},f["\u2265"]=f.ge=f.geq=function(){return new Mm(BM,!1)},f.infty=f.infin=f.infinity=_n("\\infty ","&infin;","infinity"),f["\u2260"]=f.ne=f.neq=yn("\\ne ","&ne;","not equal");var KM=function(v){ze(b,v);function b(){return v.call(this,"=",l.text("="),"=","equals")||this}return b.prototype.createLeftOf=function(d){var h=d[t];if(h instanceof Mm&&h.strict){h.swap(!1),h.bubble(function(y){y.reflow()});return}v.prototype.createLeftOf.call(this,d)},b}(ht);f["="]=KM,f["\xD7"]=f.times=f.cross=yn("\\times ","&times;","[x]","times"),f["\xF7"]=f.div=f.divide=f.divides=yn("\\div ","&divide;","[/]","over");var qM=function(v){ze(b,v);function b(){return v.call(this,"\\sim ",l.text("~"),"~","tilde")||this}return b.prototype.createLeftOf=function(d){if(d[t]instanceof b){var h=d[t];d[t]=h[t],h.remove(),new zM().createLeftOf(d),d[t].bubble(function(y){y.reflow()});return}v.prototype.createLeftOf.call(this,d)},b}(ht),zM=function(v){ze(b,v);function b(){return v.call(this,"\\approx ",l.entityText("&approx;"),"\u2248","approximately equal")||this}return b.prototype.deleteTowards=function(d,h){if(d===t){var y=h[t];new J(y,this).remove(),h[t]=y[t],new qM().createLeftOf(h),h[t].bubble(function(D){D.reflow()});return}v.prototype.deleteTowards.call(this,d,h)},b}(ht);f.tildeNbsp=_n("~",p," "),f.sim=qM,f["\u2248"]=f.approx=zM,O["~"]=f.sim,f["~"]=f.tildeNbsp,fe.interpretTildeAsSim=function(v){var b=!!v;return b?f["~"]=f.sim:f["~"]=f.tildeNbsp,b};var Gm={sqrt:{width:"",html:function(){return l("svg",{preserveAspectRatio:"none",viewBox:"0 0 32 54"},[l("path",{d:"M0 33 L7 27 L12.5 47 L13 47 L30 0 L32 0 L13 54 L11 54 L4.5 31 L0 33"})])}},"|":{width:".4em",html:function(){return l("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[l("path",{d:"M4.4 0 L4.4 54 L5.6 54 L5.6 0"})])}},"[":{width:".55em",html:function(){return l("svg",{preserveAspectRatio:"none",viewBox:"0 0 11 24"},[l("path",{d:"M8 0 L3 0 L3 24 L8 24 L8 23 L4 23 L4 1 L8 1"})])}},"]":{width:".55em",html:function(){return l("svg",{preserveAspectRatio:"none",viewBox:"0 0 11 24"},[l("path",{d:"M3 0 L8 0 L8 24 L3 24 L3 23 L7 23 L7 1 L3 1"})])}},"(":{width:".55em",html:function(){return l("svg",{preserveAspectRatio:"none",viewBox:"3 0 106 186"},[l("path",{d:"M85 0 A61 101 0 0 0 85 186 L75 186 A75 101 0 0 1 75 0"})])}},")":{width:".55em",html:function(){return l("svg",{preserveAspectRatio:"none",viewBox:"3 0 106 186"},[l("path",{d:"M24 0 A61 101 0 0 1 24 186 L34 186 A75 101 0 0 0 34 0"})])}},"{":{width:".7em",html:function(){return l("svg",{preserveAspectRatio:"none",viewBox:"10 0 210 350"},[l("path",{d:"M170 0 L170 6 A47 52 0 0 0 123 60 L123 127 A35 48 0 0 1 88 175 A35 48 0 0 1 123 223 L123 290 A47 52 0 0 0 170 344 L170 350 L160 350 A58 49 0 0 1 102 301 L103 220 A45 40 0 0 0 58 180 L58 170 A45 40 0 0 0 103 130 L103 49 A58 49 0 0 1 161 0"})])}},"}":{width:".7em",html:function(){return l("svg",{preserveAspectRatio:"none",viewBox:"10 0 210 350"},[l("path",{d:"M60 0 L60 6 A47 52 0 0 1 107 60 L107 127 A35 48 0 0 0 142 175 A35 48 0 0 0 107 223 L107 290 A47 52 0 0 1 60 344 L60 350 L70 350 A58 49 0 0 0 128 301 L127 220 A45 40 0 0 1 172 180 L172 170 A45 40 0 0 1 127 130 L127 49 A58 49 0 0 0 70 0"})])}},"&#8741;":{width:".7em",html:function(){return l("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[l("path",{d:"M3.2 0 L3.2 54 L4 54 L4 0 M6.8 0 L6.8 54 L6 54 L6 0"})])}},"&lang;":{width:".55em",html:function(){return l("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[l("path",{d:"M6.8 0 L3.2 27 L6.8 54 L7.8 54 L4.2 27 L7.8 0"})])}},"&rang;":{width:".55em",html:function(){return l("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[l("path",{d:"M3.2 0 L6.8 27 L3.2 54 L2.2 54 L5.8 27 L2.2 0"})])}}},fs=function(v){ze(b,v);function b(d,h,y,D,L){var F=v.call(this,d,new lr(1,function(K){return l.block(h,y,K[0])}))||this;return F.ariaLabel=D||d.replace(/^\\/,""),F.mathspeakTemplate=["Start"+F.ariaLabel+",","End"+F.ariaLabel],F.shouldNotSpeakDelimiters=L&&L.shouldNotSpeakDelimiters,F}return b.prototype.mathspeak=function(d){return!this.shouldNotSpeakDelimiters||d&&d.ignoreShorthand?v.prototype.mathspeak.call(this):this.foldChildren("",function(h,y){return h+" "+y.mathspeak(d)}).trim()},b}(gr);f.mathrm=function(v){ze(b,v);function b(){return v.call(this,"\\mathrm","span",{class:"dcg-mq-roman dcg-mq-font"},"Roman Font",{shouldNotSpeakDelimiters:!0})||this}return b.prototype.isTextBlock=function(){return!0},b}(fs),f.mathit=function(){return new fs("\\mathit","i",{class:"dcg-mq-font"},"Italic Font")},f.mathbf=function(){return new fs("\\mathbf","b",{class:"dcg-mq-font"},"Bold Font")},f.mathsf=function(){return new fs("\\mathsf","span",{class:"dcg-mq-sans-serif dcg-mq-font"},"Serif Font")},f.mathtt=function(){return new fs("\\mathtt","span",{class:"dcg-mq-monospace dcg-mq-font"},"Math Text")},f.underline=function(){return new fs("\\underline","span",{class:"dcg-mq-non-leaf dcg-mq-underline"},"Underline")},f.overline=f.bar=function(){return new fs("\\overline","span",{class:"dcg-mq-non-leaf dcg-mq-overline"},"Overline")},f.overrightarrow=function(){return new fs("\\overrightarrow","span",{class:"dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-right"},"Over Right Arrow")},f.overleftarrow=function(){return new fs("\\overleftarrow","span",{class:"dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-left"},"Over Left Arrow")},f.overleftrightarrow=function(){return new fs("\\overleftrightarrow ","span",{class:"dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-leftright"},"Over Left and Right Arrow")},f.overarc=function(){return new fs("\\overarc","span",{class:"dcg-mq-non-leaf dcg-mq-overarc"},"Over Arc")},f.dot=function(){return new gr("\\dot",new lr(1,function(v){return l("span",{class:"dcg-mq-non-leaf"},[l("span",{class:"dcg-mq-dot-recurring-inner"},[l("span",{class:"dcg-mq-dot-recurring"},[l.text(g)]),l.block("span",{class:"dcg-mq-empty-box"},v[0])])])}))},f.textcolor=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.setColor=function(d){this.color=d,this.domView=new lr(1,function(h){return l.block("span",{class:"dcg-mq-textcolor",style:"color:"+d},h[0])}),this.ariaLabel=d.replace(/^\\/,""),this.mathspeakTemplate=["Start "+this.ariaLabel+",","End "+this.ariaLabel]},b.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d);var h=this.blocks[0];d.latex+="\\textcolor{"+this.color+"}{",h.latexRecursive(d),d.latex+="}",this.checkCursorContextClose(d)},b.prototype.parser=function(){var d=this,h=ne.optWhitespace,y=ne.string,D=ne.regex;return h.then(y("{")).then(D(/^[#\w\s.,()%-]*/)).skip(y("}")).then(function(L){return d.setColor(L),v.prototype.parser.call(d)})},b.prototype.isStyleBlock=function(){return!0},b}(gr);var Ij=f.class=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.parser=function(){var d=this,h=ne.string,y=ne.regex;return ne.optWhitespace.then(h("{")).then(y(/^[-\w\s\\\xA0-\xFF]*/)).skip(h("}")).then(function(D){return d.cls=D||"",d.domView=new lr(1,function(L){return l.block("span",{class:"dcg-mq-class ".concat(D)},L[0])}),d.ariaLabel=D+" class",d.mathspeakTemplate=["Start "+d.ariaLabel+",","End "+d.ariaLabel],v.prototype.parser.call(d)})},b.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d);var h=this.blocks[0];d.latex+="\\class{"+this.cls+"}{",h.latexRecursive(d),d.latex+="}",this.checkCursorContextClose(d)},b.prototype.isStyleBlock=function(){return!0},b}(gr),sx=/^[\+\-]?[\d]+$/;function ID(v){if(!v)return"";var b="";return v.eachChild(function(d){d.ctrlSeq!==void 0&&(b+=d.ctrlSeq)}),b}ye.prototype.charsThatBreakOutOfSupSub="";var bs=function(v){ze(b,v);function b(){var d=v!==null&&v.apply(this,arguments)||this;return d.ctrlSeq="_{...}^{...}",d}return b.prototype.setEnds=function(d){n("SupSub ends must be MathBlocks",d[t]instanceof mr&&d[e]instanceof mr),this.ends=d},b.prototype.getEnd=function(d){return this.ends[d]},b.prototype.createLeftOf=function(d){if(!(!this.replacedFragment&&!d[t]&&d.options.supSubsRequireOperand))return v.prototype.createLeftOf.call(this,d)},b.prototype.contactWeld=function(d){for(var h=t;h;h=h===t?e:!1){var y=this[h],D=void 0;if(y instanceof b){for(var L="sub";L;L=L==="sub"?"sup":!1){var F=this[L],K=y[L];if(F){if(!K)y.addBlock(F.disown());else if(F.isEmpty())D=new N(K,0,K.getEnd(t));else{F.domFrag().children().insAtDirEnd(-h,K.domFrag().oneElement());var te=F.children().disown();D=new N(K,te.getEnd(e),K.getEnd(t)),h===t?te.adopt(K,K.getEnd(e),0):te.adopt(K,0,K.getEnd(t))}this.placeCursor=function(Ce,me){return function(he){he.insAtDirEnd(-h,Ce||me)}}(K,F)}}this.remove(),d&&d[t]===this&&(h===e&&D?D[t]?d.insRightOf(D[t]):d.insAtLeftEnd(D.parent):d.insRightOf(y));break}}},b.prototype.finalizeTree=function(){var d=this.getEnd(t);d.write=function(h,y){if(h.options.autoSubscriptNumerals&&this===this.parent.sub&&"0123456789".indexOf(y)>=0){var D=this.chToCmd(y,h.options);D instanceof $o?h.deleteSelection():h.clearSelection().insRightOf(this.parent),D.createLeftOf(h.show()),h.controller.aria.queue("Baseline").alert(D.mathspeak({createdLeftOf:h}));return}h[t]&&!h[e]&&!h.selection&&h.options.charsThatBreakOutOfSupSub.indexOf(y)>-1&&(h.insRightOf(this.parent),h.controller.aria.queue("Baseline")),mr.prototype.write.call(this,h,y)}},b.prototype.moveTowards=function(d,h,y){h.options.autoSubscriptNumerals&&!this.sup?h.insDirOf(d,this):v.prototype.moveTowards.call(this,d,h,y)},b.prototype.deleteTowards=function(d,h){if(h.options.autoSubscriptNumerals&&this.sub){var y=this.sub.getEnd(-d);y instanceof $o?y.remove():y&&y.deleteTowards(d,h.insAtDirEnd(-d,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(t,h.insAtLeftEnd(this.sub)),this.sup&&h.insDirOf(-d,this))}else v.prototype.deleteTowards.call(this,d,h)},b.prototype.latexRecursive=function(d){if(this.checkCursorContextOpen(d),this.sub){d.latex+="_{";var h=d.latex.length;this.sub.latexRecursive(d);var y=d.latex.length;h===y&&(d.latex+=" "),d.latex+="}"}if(this.sup){d.latex+="^{";var h=d.latex.length;this.sup.latexRecursive(d);var y=d.latex.length;h===y&&(d.latex+=" "),d.latex+="}"}this.checkCursorContextClose(d)},b.prototype.text=function(){function d(h,y){var D=y&&y.text()||"";return y?h+(D.length===1?D:"("+(D||" ")+")"):""}return d("_",this.sub)+d("^",this.sup)},b.prototype.addBlock=function(d){this.supsub==="sub"?(this.sup=this.upInto=this.sub.upOutOf=d,d.adopt(this,this.sub,0).downOutOf=this.sub,d.setDOM(G(l("span",{class:"dcg-mq-sup"})).append(d.domFrag().children()).prependTo(this.domFrag().oneElement()).oneElement()),q.linkElementByBlockNode(d.domFrag().oneElement(),d)):(this.sub=this.downInto=this.sup.downOutOf=d,d.adopt(this,0,this.sup).upOutOf=this.sup,this.domFrag().removeClass("dcg-mq-sup-only"),d.setDOM(G(l("span",{class:"dcg-mq-sub"})).append(d.domFrag().children()).appendTo(this.domFrag().oneElement()).oneElement()),q.linkElementByBlockNode(d.domFrag().oneElement(),d),this.domFrag().append(G(l("span",{style:"display:inline-block;width:0"},[l.text(u)]))));for(var h=0;h<2;h+=1)(function(y,D,L,F){var K=y[D];K.deleteOutOf=function(te,Ce){if(Ce.insDirOf(this[te]?-te:te,this.parent),!this.isEmpty()){var me=this.getEnd(te);this.children().disown().withDirAdopt(te,Ce.parent,Ce[te],Ce[-te]).domFrag().insDirOf(-te,Ce.domFrag()),Ce[-te]=me}y.supsub=L,delete y[D],delete y["".concat(F,"Into")];var he=y[L];he["".concat(F,"OutOf")]=TD,delete he.deleteOutOf,D==="sub"&&y.domFrag().addClass("dcg-mq-sup-only").children().last().remove(),this.remove()}})(this,"sub sup".split(" ")[h],"sup sub".split(" ")[h],"down up".split(" ")[h])},b}(gr);function TD(v){var b=this.parent,d=v;do{if(d[e])return v.insLeftOf(b);d=d.parent.parent}while(d!==b);v.insRightOf(b)}var UM=function(v){ze(b,v);function b(){var d=v!==null&&v.apply(this,arguments)||this;return d.supsub="sub",d.domView=new lr(1,function(h){return l("span",{class:"dcg-mq-supsub dcg-mq-non-leaf"},[l.block("span",{class:"dcg-mq-sub"},h[0]),l("span",{style:"display:inline-block;width:0"},[l.text(u)])])}),d.textTemplate=["_"],d.mathspeakTemplate=["Subscript,",", Baseline"],d.ariaLabel="subscript",d}return b.prototype.finalizeTree=function(){this.downInto=this.sub=this.getEnd(t),this.sub.upOutOf=TD,v.prototype.finalizeTree.call(this)},b}(bs);f.subscript=f._=UM,f.superscript=f.supscript=f["^"]=function(v){ze(b,v);function b(){var d=v!==null&&v.apply(this,arguments)||this;return d.supsub="sup",d.domView=new lr(1,function(h){return l("span",{class:"dcg-mq-supsub dcg-mq-non-leaf dcg-mq-sup-only"},[l.block("span",{class:"dcg-mq-sup"},h[0])])}),d.textTemplate=["^(",")"],d.ariaLabel="superscript",d.mathspeakTemplate=["Superscript,",", Baseline"],d}return b.prototype.mathspeak=function(d){var h=this.upInto;if(h!==void 0){var y=ID(h);if((!d||!d.ignoreShorthand)&&sx.test(y)){if(y==="0")return"to the 0 power";if(y==="2")return"squared";if(y==="3")return"cubed";var D="";/^[+-]?\d{1,3}$/.test(y)&&(/(11|12|13|4|5|6|7|8|9|0)$/.test(y)?D="th":/1$/.test(y)?D="st":/2$/.test(y)?D="nd":/3$/.test(y)&&(D="rd"));var L=typeof h=="object"?h.mathspeak():y;return"to the "+L+D+" power"}}return v.prototype.mathspeak.call(this)},b.prototype.finalizeTree=function(){this.upInto=this.sup=this.getEnd(e),this.sup.downOutOf=TD,v.prototype.finalizeTree.call(this)},b}(bs);var ip=function(v){ze(b,v);function b(d,h,y){var D=v.call(this)||this;D.ariaLabel=y||d.replace(/^\\/,"");var L=new lr(2,function(F){return l("span",{class:"dcg-mq-large-operator dcg-mq-non-leaf"},[l("span",{class:"dcg-mq-to"},[l.block("span",{},F[1])]),l("big",{},[l.text(h)]),l("span",{class:"dcg-mq-from"},[l.block("span",{},F[0])])])});return $o.prototype.setCtrlSeqHtmlTextAndMathspeak.call(D,d,L),D}return b.prototype.createLeftOf=function(d){v.prototype.createLeftOf.call(this,d),d.options.sumStartsWithNEquals&&(new eo("n").createLeftOf(d),new KM().createLeftOf(d))},b.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),d.latex+=this.ctrlSeq+"_{";var h=d.latex.length;this.getEnd(t).latexRecursive(d);var y=d.latex.length;y===h&&(d.latex+=" "),d.latex+="}^{",h=d.latex.length,this.getEnd(e).latexRecursive(d),y=d.latex.length,h===y&&(d.latex+=" "),d.latex+="}",this.checkCursorContextClose(d)},b.prototype.mathspeak=function(){return"Start "+this.ariaLabel+" from "+this.getEnd(t).mathspeak()+" to "+this.getEnd(e).mathspeak()+", end "+this.ariaLabel+", "},b.prototype.parser=function(){for(var d=ne.string,h=ne.optWhitespace,y=ne.succeed,D=de.block,L=this,F=L.blocks=[new mr,new mr],K=0;K<F.length;K+=1)F[K].adopt(L,L.getEnd(e),0);return h.then(d("_").or(d("^"))).then(function(te){var Ce=F[te==="_"?0:1];return D.then(function(me){return me.children().adopt(Ce,Ce.getEnd(e),0),y(L)})}).many().result(L)},b.prototype.finalizeTree=function(){var d=this.getEnd(t),h=this.getEnd(e);d.ariaLabel="lower bound",h.ariaLabel="upper bound",this.downInto=d,this.upInto=h,d.upOutOf=h,h.downOutOf=d},b}(gr);f["\u2211"]=f.sum=f.summation=function(){return new ip("\\sum ",m,"sum")},f["\u220F"]=f.prod=f.product=function(){return new ip("\\prod ",w,"product")},f.coprod=f.coproduct=function(){return new ip("\\coprod ",C,"co product")},f["\u222B"]=f.int=f.integral=function(v){ze(b,v);function b(){var d=v.call(this,"\\int ","","integral")||this;return d.ariaLabel="integral",d.domView=new lr(2,function(h){return l("span",{class:"dcg-mq-int dcg-mq-non-leaf"},[l("big",{},[l.text(S)]),l("span",{class:"dcg-mq-supsub dcg-mq-non-leaf"},[l("span",{class:"dcg-mq-sup"},[l.block("span",{class:"dcg-mq-sup-inner"},h[1])]),l.block("span",{class:"dcg-mq-sub"},h[0]),l("span",{style:"display:inline-block;width:0"},[l.text(u)])])])}),d}return b.prototype.createLeftOf=function(d){gr.prototype.createLeftOf.call(this,d)},b}(ip);var J5=f.frac=f.dfrac=f.cfrac=f.fraction=function(v){ze(b,v);function b(){var d=v!==null&&v.apply(this,arguments)||this;return d.ctrlSeq="\\frac",d.domView=new lr(2,function(h){return l("span",{class:"dcg-mq-fraction dcg-mq-non-leaf"},[l.block("span",{class:"dcg-mq-numerator"},h[0]),l.block("span",{class:"dcg-mq-denominator"},h[1]),l("span",{style:"display:inline-block;width:0"},[l.text(u)])])}),d.textTemplate=["(",")/(",")"],d}return b.prototype.finalizeTree=function(){var d=this.getEnd(t),h=this.getEnd(e);this.upInto=h.upOutOf=d,this.downInto=d.downOutOf=h,d.ariaLabel="numerator",h.ariaLabel="denominator",this.getFracDepth()>1?this.mathspeakTemplate=["StartNestedFraction,","NestedOver",", EndNestedFraction"]:this.mathspeakTemplate=["StartFraction,","Over",", EndFraction"]},b.prototype.mathspeak=function(d){if(d&&d.createdLeftOf){var h=d.createdLeftOf;return h.parent.mathspeak()}var y=ID(this.getEnd(t)),D=ID(this.getEnd(e));if((!d||!d.ignoreShorthand)&&sx.test(y)&&sx.test(D)){var L=y==="1"||y==="-1",F="";if(D==="2"?F=L?"half":"halves":D==="3"?F=L?"third":"thirds":D==="4"?F=L?"quarter":"quarters":D==="5"?F=L?"fifth":"fifths":D==="6"?F=L?"sixth":"sixths":D==="7"?F=L?"seventh":"sevenths":D==="8"?F=L?"eighth":"eighths":D==="9"&&(F=L?"ninth":"ninths"),F!==""){for(var K="",te=!1,Ce=this[t];Ce&&Ce[t]!==void 0;Ce=Ce[t])if(Ce.ctrlSeq!=="\\ ")if(sx.test(Ce.ctrlSeq||""))te=!0;else{te=!1;break}return te&&(K+="and "),K+=this.getEnd(t).mathspeak()+" "+F,K}}return v.prototype.mathspeak.call(this)},b.prototype.getFracDepth=function(){var d=0,h=function(y,D){return y instanceof It&&y.ctrlSeq&&y.ctrlSeq.toLowerCase().search("frac")>=0&&(D+=1),y&&y.parent?h(y.parent,D):D};return h(this,d)},b}(gr),X5=f.over=O["/"]=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.createLeftOf=function(d){if(!this.replacedFragment){var h=d[t];if(!d.options.typingSlashCreatesNewFraction)for(;h&&!(h instanceof ht||h instanceof(f.text||o)||h instanceof ip||h.ctrlSeq==="\\ "||/^[,;:]$/.test(h.ctrlSeq));)h=h[t];if(h instanceof ip&&h[e]instanceof bs){h=h[e];var y=h[e];y instanceof bs&&y.ctrlSeq!=h.ctrlSeq&&(h=h[e])}if(h!==d[t]&&!d.isTooDeep(1)){var y=h[e],D=d[t];this.replaces(new J(y||d.parent.getEnd(t),D)),d[t]=h}}v.prototype.createLeftOf.call(this,d)},b}(J5),HM=function(){return new $o("\\operatorname{ans}",l("span",{class:"dcg-mq-ans"},[l.text("ans")]),"ans")};f.ans=HM;var WM=function(){return new $o("\\%\\operatorname{of}",l("span",{class:"dcg-mq-nonSymbola dcg-mq-operator-name"},[l.text("% of ")]),"percent of")};f.percent=f.percentof=WM;var Q5=function(v){ze(b,v);function b(){var d=v!==null&&v.apply(this,arguments)||this;return d.tokenId="",d.ctrlSeq="\\token",d.textTemplate=["token(",")"],d.mathspeakTemplate=["StartToken,",", EndToken"],d.ariaLabel="token",d}return b.prototype.html=function(){var d=l("span",{class:"dcg-mq-token dcg-mq-ignore-mousedown","data-dcg-mq-token":this.tokenId});return this.setDOM(d),q.linkElementByCmdNode(d,this),d},b.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),d.latex+="\\token{"+this.tokenId+"}",this.checkCursorContextClose(d)},b.prototype.mathspeak=function(){var d=[];return this.domFrag().children().eachElement(function(h){var y=h.getAttribute("aria-label");typeof y=="string"&&y!==""&&d.push(y)}),d.length>0?d.join(" ").trim():"token "+this.tokenId},b.prototype.parser=function(){var d=this;return de.block.map(function(h){var y=h.getEnd(t);if(y)for(d.tokenId+=y.ctrlSeq;y=y[e];)d.tokenId+=y.ctrlSeq;return d})},b}($o);f.token=Q5;var $M=function(v){ze(b,v);function b(){var d=v!==null&&v.apply(this,arguments)||this;return d.ctrlSeq="\\sqrt",d.domView=new lr(1,function(h){return l("span",{class:"dcg-mq-non-leaf dcg-mq-sqrt-container"},[l("span",{class:"dcg-mq-scaled dcg-mq-sqrt-prefix"},[Gm.sqrt.html()]),l.block("span",{class:"dcg-mq-non-leaf dcg-mq-sqrt-stem"},h[0])])}),d.textTemplate=["sqrt(",")"],d.mathspeakTemplate=["StartRoot,",", EndRoot"],d.ariaLabel="root",d}return b.prototype.parser=function(){return de.optBlock.then(function(d){return de.block.map(function(h){var y=new MD;return y.blocks=[d,h],d.adopt(y,0,0),h.adopt(y,d,0),y})}).or(v.prototype.parser.call(this))},b}(gr);f.sqrt=$M,f.hat=function(v){ze(b,v);function b(){var d=v!==null&&v.apply(this,arguments)||this;return d.ctrlSeq="\\hat",d.domView=new lr(1,function(h){return l("span",{class:"dcg-mq-non-leaf"},[l("span",{class:"dcg-mq-hat-prefix"},[l.text("^")]),l.block("span",{class:"dcg-mq-hat-stem"},h[0])])}),d.textTemplate=["hat(",")"],d}return b}(gr);var MD=function(v){ze(b,v);function b(){var d=v!==null&&v.apply(this,arguments)||this;return d.domView=new lr(2,function(h){return l("span",{class:"dcg-mq-nthroot-container dcg-mq-non-leaf"},[l.block("sup",{class:"dcg-mq-nthroot dcg-mq-non-leaf"},h[0]),l("span",{class:"dcg-mq-scaled dcg-mq-sqrt-container"},[l("span",{class:"dcg-mq-sqrt-prefix dcg-mq-scaled"},[Gm.sqrt.html()]),l.block("span",{class:"dcg-mq-sqrt-stem dcg-mq-non-leaf"},h[1])])])}),d.textTemplate=["sqrt[","](",")"],d}return b.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),d.latex+="\\sqrt[",this.getEnd(t).latexRecursive(d),d.latex+="]{",this.getEnd(e).latexRecursive(d),d.latex+="}",this.checkCursorContextClose(d)},b.prototype.mathspeak=function(){var d=this.getEnd(t).mathspeak(),h=this.getEnd(e).mathspeak();return this.getEnd(t).ariaLabel="Index",this.getEnd(e).ariaLabel="Radicand",d==="3"?"Start Cube Root, "+h+", End Cube Root":"Root Index "+d+", Start Root, "+h+", End Root"},b}($M);f.nthroot=MD,f.cbrt=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.createLeftOf=function(d){v.prototype.createLeftOf.call(this,d),new ec("3").createLeftOf(d),d.controller.moveRight()},b}(MD);var jM=function(v){ze(b,v);function b(d,h,y){var D=this,L=new lr(1,function(F){return l("span",{class:"dcg-mq-non-leaf"},[l("span",{class:"dcg-mq-diacritic-above"},[h]),l.block("span",{class:"dcg-mq-diacritic-stem"},F[0])])});return D=v.call(this,d,L,y)||this,D}return b}(gr);f.vec=function(){return new jM("\\vec",l.entityText("&rarr;"),["vec(",")"])},f.tilde=function(){return new jM("\\tilde",l.text("~"),["tilde(",")"])};var YM=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.setDOM=function(d){var h;v.prototype.setDOM.call(this,d);var y=this.domFrag().children();return y.isEmpty()||(this.delimFrags=(h={},h[t]=y.first(),h[e]=y.last(),h)),this},b}(gr),ys=function(v){ze(b,v);function b(d,h,y,D,L){var F,K=v.call(this,"\\left"+D,void 0,[h,y])||this;return K.side=d,K.sides=(F={},F[t]={ch:h,ctrlSeq:D},F[e]={ch:y,ctrlSeq:L},F),K}return b.prototype.numBlocks=function(){return 1},b.prototype.html=function(){var d=this,h=this.getSymbol(t),y=this.getSymbol(e);return this.domView=new lr(1,function(D){return l("span",{class:"dcg-mq-non-leaf dcg-mq-bracket-container"},[l("span",{style:"width:"+h.width,class:"dcg-mq-scaled dcg-mq-bracket-l dcg-mq-paren"+(d.side===e?" dcg-mq-ghost":"")},[h.html()]),l.block("span",{style:"margin-left:"+h.width+";margin-right:"+y.width,class:"dcg-mq-bracket-middle dcg-mq-non-leaf"},D[0]),l("span",{style:"width:"+y.width,class:"dcg-mq-scaled dcg-mq-bracket-r dcg-mq-paren"+(d.side===t?" dcg-mq-ghost":"")},[y.html()])])}),v.prototype.html.call(this)},b.prototype.getSymbol=function(d){var h=this.sides[d||e].ch;return Gm[h]||{width:"0",html:""}},b.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),d.latex+="\\left"+this.sides[t].ctrlSeq,this.getEnd(t).latexRecursive(d),d.latex+="\\right"+this.sides[e].ctrlSeq,this.checkCursorContextClose(d)},b.prototype.mathspeak=function(d){var h=this.sides[t].ch,y=this.sides[e].ch;if(h==="|"&&y==="|")this.mathspeakTemplate=["StartAbsoluteValue,",", EndAbsoluteValue"],this.ariaLabel="absolute value";else if(d&&d.createdLeftOf&&this.side){var D="";return this.side===t?D=this.textTemplate[0]:this.side===e&&(D=this.textTemplate[1]),(this.side===t?"left ":"right ")+Vu[D]}else this.mathspeakTemplate=["left "+Vu[h]+",",", right "+Vu[y]],this.ariaLabel=Vu[h]+" block";return v.prototype.mathspeak.call(this)},b.prototype.matchBrack=function(d,h,y){return y instanceof b&&y.side&&y.side!==-h&&(!d.restrictMismatchedBrackets||Am[this.sides[this.side].ch]===y.sides[y.side].ch||{"(":"]","[":")"}[this.sides[t].ch]===y.sides[e].ch)&&y},b.prototype.closeOpposing=function(d){d.side=0,d.sides[this.side]=this.sides[this.side];var h=d.delimFrags[this.side===t?t:e].removeClass("dcg-mq-ghost");this.replaceBracket(h,this.side)},b.prototype.createLeftOf=function(d){var h;if(!this.replacedFragment){var y=d.options;this.sides[t].ch==="|"?h=this.matchBrack(y,e,d[e])||this.matchBrack(y,t,d[t])||this.matchBrack(y,0,d.parent.parent):h=this.matchBrack(y,-this.side,d[-this.side])||this.matchBrack(y,-this.side,d.parent.parent)}if(h){var D=this.side=-h.side;this.closeOpposing(h),h===d.parent.parent&&d[D]&&new J(d[D],d.parent.getEnd(D),-D).disown().withDirAdopt(-D,h.parent,h,h[D]).domFrag().insDirOf(D,h.domFrag()),h.bubble(function(L){L.reflow()})}else h=this,D=h.side,h.replacedFragment?h.side=0:d[-D]&&(h.replaces(new J(d[-D],d.parent.getEnd(-D),D)),d[-D]=0),v.prototype.createLeftOf.call(this,d);D===t?d.insAtLeftEnd(h.getEnd(t)):d.insRightOf(h)},b.prototype.placeCursor=function(){},b.prototype.unwrap=function(){this.getEnd(t).children().disown().adopt(this.parent,this,this[e]).domFrag().insertAfter(this.domFrag()),this.remove()},b.prototype.deleteSide=function(d,h,y){var D=this.parent,L=this[d],F=D.getEnd(d);if(d===this.side){this.unwrap(),L?y.insDirOf(-d,L):y.insAtDirEnd(d,D);return}var K=y.options,te=!this.side;if(this.side=-d,this.matchBrack(K,d,this.getEnd(t).getEnd(this.side))){this.closeOpposing(this.getEnd(t).getEnd(this.side));var Ce=this.getEnd(t).getEnd(d);this.unwrap(),Ce&&Ce.siblingCreated(y.options,d),L?y.insDirOf(-d,L):y.insAtDirEnd(d,D)}else{if(this.matchBrack(K,d,this.parent.parent))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else if(h&&te){this.unwrap(),L?y.insDirOf(-d,L):y.insAtDirEnd(d,D);return}else{this.sides[d]=Z5(this),this.delimFrags[t].removeClass("dcg-mq-ghost"),this.delimFrags[e].removeClass("dcg-mq-ghost");var me=this.delimFrags[d].addClass("dcg-mq-ghost");this.replaceBracket(me,d)}if(L){var he=this.getEnd(t),Ce=he.getEnd(d);he.domFrag().removeClass("dcg-mq-empty"),new J(L,F,-d).disown().withDirAdopt(-d,he,Ce,0).domFrag().insAtDirEnd(d,he.domFrag().oneElement()),Ce&&Ce.siblingCreated(y.options,d),y.insDirOf(-d,L)}else h?y.insDirOf(d,this):y.insAtDirEnd(d,this.getEnd(t))}},b.prototype.replaceBracket=function(d,h){var y=this.getSymbol(h);if(d.children().replaceWith(G(y.html())),d.oneElement().style.width=y.width,h===t){var D=d.next();D.isEmpty()||(D.oneElement().style.marginLeft=y.width)}else{var L=d.prev();L.isEmpty()||(L.oneElement().style.marginRight=y.width)}},b.prototype.deleteTowards=function(d,h){this.deleteSide(-d,!1,h)},b.prototype.finalizeTree=function(){this.getEnd(t).deleteOutOf=function(d,h){this.parent.deleteSide(d,!0,h)},this.finalizeTree=this.intentionalBlur=function(){this.delimFrags[this.side===t?e:t].removeClass("dcg-mq-ghost"),this.side=0}},b.prototype.siblingCreated=function(d,h){h===-this.side&&this.finalizeTree()},b}(YM);function Z5(v){var b=v.side,d=v.sides[b];return{ch:Am[d.ch],ctrlSeq:Am[d.ctrlSeq]}}var Am={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|","\\lVert ":"\\rVert ","\\rVert ":"\\lVert "},Vu={"&lang;":"angle-bracket","&rang;":"angle-bracket","|":"pipe"};function GD(v,h,d){var h=h||v,y=Am[v],D=Am[h];O[v]=function(){return new ys(t,v,y,h,D)},O[y]=function(){return new ys(e,v,y,h,D)},Vu[v]=Vu[y]=d}GD("(","","parenthesis"),GD("[","","bracket"),GD("{","\\{","brace"),f.langle=function(){return new ys(t,"&lang;","&rang;","\\langle ","\\rangle ")},f.rangle=function(){return new ys(e,"&lang;","&rang;","\\langle ","\\rangle ")},O["|"]=function(){return new ys(t,"|","|","|","|")},f.lVert=function(){return new ys(t,"&#8741;","&#8741;","\\lVert ","\\rVert ")},f.rVert=function(){return new ys(e,"&#8741;","&#8741;","\\lVert ","\\rVert ")},f.left=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.parser=function(){var d=ne.regex,h=ne.string,y=ne.optWhitespace;return y.then(d(/^(?:[([|]|\\\{|\\langle(?![a-zA-Z])|\\lVert(?![a-zA-Z]))/)).then(function(D){var L=D.replace(/^\\/,"");return D=="\\langle"&&(L="&lang;",D=D+" "),D=="\\lVert"&&(L="&#8741;",D=D+" "),de.then(function(F){return h("\\right").skip(y).then(d(/^(?:[\])|]|\\\}|\\rangle(?![a-zA-Z])|\\rVert(?![a-zA-Z]))/)).map(function(K){var te=K.replace(/^\\/,"");K=="\\rangle"&&(te="&rang;",K=K+" "),K=="\\rVert"&&(te="&#8741;",K=K+" ");var Ce=new ys(0,L,te,D,K);return Ce.blocks=[F],F.adopt(Ce,0,0),Ce})})})},b}(gr),f.right=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.parser=function(){return ne.fail("unmatched \\right")},b}(gr);var AD=Gm["("],VD=Gm[")"],JM=function(v){ze(b,v);function b(){var d=v!==null&&v.apply(this,arguments)||this;return d.ctrlSeq="\\binom",d.domView=new lr(2,function(h){return l("span",{class:"dcg-mq-non-leaf dcg-mq-bracket-container"},[l("span",{style:"width:"+AD.width,class:"dcg-mq-paren dcg-mq-bracket-l dcg-mq-scaled"},[AD.html()]),l("span",{style:"margin-left:"+AD.width+"; margin-right:"+VD.width,class:"dcg-mq-non-leaf dcg-mq-bracket-middle"},[l("span",{class:"dcg-mq-array dcg-mq-non-leaf"},[l.block("span",{},h[0]),l.block("span",{},h[1])])]),l("span",{style:"width:"+VD.width,class:"dcg-mq-paren dcg-mq-bracket-r dcg-mq-scaled"},[VD.html()])])}),d.textTemplate=["choose(",",",")"],d.mathspeakTemplate=["StartBinomial,","Choose",", EndBinomial"],d.ariaLabel="binomial",d}return b}(YM);f.binom=f.binomial=JM,f.choose=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.createLeftOf=function(d){X5.prototype.createLeftOf(d)},b}(JM);var eB=function(v){ze(b,v);function b(){var d=v!==null&&v.apply(this,arguments)||this;return d.ctrlSeq="\\MathQuillMathField",d.domView=new lr(1,function(h){return l("span",{class:"dcg-mq-editable-field"},[l.block("span",{class:"dcg-mq-root-block","aria-hidden":"true"},h[0])])}),d}return b.prototype.parser=function(){var d=this,h=ne.string,y=ne.regex,D=ne.succeed;return h("[").then(y(/^[a-z][a-z0-9]*/i)).skip(h("]")).map(function(L){d.name=L}).or(D(void 0)).then(v.prototype.parser.call(this))},b.prototype.finalizeTree=function(d){var h=new at(this.getEnd(t),this.domFrag().oneElement(),d);h.KIND_OF_MQ="MathField",h.editable=!0,h.createTextarea(),h.editablesTextareaEvents(),h.cursor.insAtRightEnd(h.root),lo(h.root);function y(D){if(D.parentNode&&!G(D).hasClass("dcg-mq-root-block")&&y(D.parentNode),D.nodeType===Node.ELEMENT_NODE){var L=D;L.getAttribute("aria-hidden")==="true"&&(L.removeAttribute("aria-hidden"),G(D).children().eachElement(function(F){F.setAttribute("aria-hidden","true")}))}}y(this.domFrag().parent().oneElement()),this.domFrag().oneElement().removeAttribute("aria-hidden")},b.prototype.registerInnerField=function(d,h){var y=this.getEnd(t).controller,D=new h(y);d[this.name]=D,d.push(D)},b.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),this.getEnd(t).latexRecursive(d),this.checkCursorContextClose(d)},b.prototype.text=function(){return this.getEnd(t).text()},b}(gr);f.editable=f.MathQuillMathField=eB;var XM=function(v){ze(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.setOptions=function(d){function h(){return""}return this.text=d.text||h,this.domView=new lr(0,function(){return l("span",{},[s(d.htmlString||"")])}),this.latex=d.latex||h,this},b.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),d.latex+=this.latex(),this.checkCursorContextClose(d)},b.prototype.parser=function(){var d=this,h=ne.string,y=ne.regex,D=ne.succeed;return h("{").then(y(/^[a-z][a-z0-9]*/i)).skip(h("}")).then(function(L){return h("[").then(y(/^[-\w\s]*/)).skip(h("]")).or(D(void 0)).map(function(F){return d.setOptions(Z[L](F))})})},b}($o);if(f.embed=XM,window.jQuery){Ye=ut(1);for(var QM in Ye)(function(v,b){typeof b=="function"?(_t[v]=function(){return Ke(),b.apply(this,arguments)},_t[v].prototype=b.prototype):_t[v]=b})(QM,Ye[QM])}})()});function Nx(t){return t==null?t+"":typeof t=="object"||typeof t=="function"?Rx[dA.call(t)]||"object":typeof t}function QD(t){var e=!!t&&"length"in t&&t.length,i=Nx(t);return mc(t)||Zu(t)?!1:i==="array"||e===0||typeof e=="number"&&e>0&&e-1 in t}function Yu(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function uB(t,e){return e.toUpperCase()}function uc(t){return t.replace(dB,"ms-").replace(pB,uB)}function jm(){this.expando=Y.expando+jm.uid++}function mB(t){return t==="true"?!0:t==="false"?!1:t==="null"?null:t===+t+""?+t:hB.test(t)?JSON.parse(t):t}function ZG(t,e,i){var r;if(i===void 0&&t.nodeType===1)if(r="data-"+e.replace(gB,"-$&").toLowerCase(),i=t.getAttribute(r),typeof i=="string"){try{i=mB(i)}catch(o){}hc.set(t,e,i)}else i=void 0;return i}function bB(t,e,i,r){var o,n,a=20,s=r?function(){return r.cur()}:function(){return Y.css(t,e,"")},l=s(),c=i&&i[3]||(Y.cssNumber[e]?"":"px"),p=t.nodeType&&(Y.cssNumber[e]||c!=="px"&&+l)&&Bx.exec(Y.css(t,e));if(p&&p[3]!==c){for(l=l/2,c=c||p[3],p=+l||1;a--;)Y.style(t,e,p+c),(1-n)*(1-(n=s()/l||.5))<=0&&(a=0),p=p/n;p=p*2,Y.style(t,e,p+c),i=i||[]}return i&&(p=+p||+l||0,o=i[1]?p+(i[1]+1)*i[2]:+i[2],r&&(r.unit=c,r.start=p,r.end=o)),o}function Xu(){return!0}function Qu(){return!1}function yB(t,e){return t===xB()==(e==="focus")}function xB(){try{return ko.activeElement}catch(t){}}function t0(t,e,i,r,o,n){var a,s;if(typeof e=="object"){typeof i!="string"&&(r=r||i,i=void 0);for(s in e)t0(t,s,i,r,e[s],n);return t}if(r==null&&o==null?(o=i,r=i=void 0):o==null&&(typeof i=="string"?(o=r,r=void 0):(o=r,r=i,i=void 0)),o===!1)o=Qu;else if(!o)return t;return n===1&&(a=o,o=function(l){return Y().off(l),a.apply(this,arguments)},o.guid=a.guid||(a.guid=Y.guid++)),t.each(function(){Y.event.add(this,e,o,r,i)})}function Fx(t,e,i){if(!i){fr.get(t,e)===void 0&&Y.event.add(t,e,Xu);return}fr.set(t,e,!1),Y.event.add(t,e,{namespace:!1,handler:function(r){var o,n,a=fr.get(this,e);if(r.isTrigger&1&&this[e]){if(a.length)(Y.event.special[e]||{}).delegateType&&r.stopPropagation();else if(a=Px.call(arguments),fr.set(this,e,a),o=i(this,e),this[e](),n=fr.get(this,e),a!==n||o?fr.set(this,e,!1):n={},a!==n)return r.stopImmediatePropagation(),r.preventDefault(),n&&n.value}else a.length&&(fr.set(this,e,{value:Y.event.trigger(Y.extend(a[0],Y.Event.prototype),a.slice(1),this)}),r.stopImmediatePropagation())}})}function Wm(t,e,i){var r,o,n,a,s=t.style;return i=i||Kx(t),i&&(a=i.getPropertyValue(e)||i[e],a===""&&!mA(t)&&(a=Y.style(t,e)),!Io.pixelBoxStyles()&&o0.test(a)&&wB.test(e)&&(r=s.width,o=s.minWidth,n=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=r,s.minWidth=o,s.maxWidth=n)),a!==void 0?a+"":a}function bA(t,e){return{get:function(){if(t()){delete this.get;return}return(this.get=e).apply(this,arguments)}}}function vB(t){for(var e=t[0].toUpperCase()+t.slice(1),i=tA.length;i--;)if(t=tA[i]+e,t in yA)return t}function rA(t){var e=Y.cssProps[t]||iA[t];return e||(t in yA?t:iA[t]=vB(t)||t)}function xA(t,e,i){var r=Bx.exec(e);return r?Math.max(0,r[2]-(i||0))+(r[3]||"px"):e}function i0(t,e,i,r,o,n){var a=e==="width"?1:0,s=0,l=0;if(i===(r?"border":"content"))return 0;for(;a<4;a+=2)i==="margin"&&(l+=Y.css(t,i+nd[a],!0,o)),r?(i==="content"&&(l-=Y.css(t,"padding"+nd[a],!0,o)),i!=="margin"&&(l-=Y.css(t,"border"+nd[a]+"Width",!0,o))):(l+=Y.css(t,"padding"+nd[a],!0,o),i!=="padding"?l+=Y.css(t,"border"+nd[a]+"Width",!0,o):s+=Y.css(t,"border"+nd[a]+"Width",!0,o));return!r&&n>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-n-l-s-.5))||0),l}function aA(t,e,i){var r=Kx(t),o=!Io.boxSizingReliable()||i,n=o&&Y.css(t,"boxSizing",!1,r)==="border-box",a=n,s=Wm(t,e,r),l="offset"+e[0].toUpperCase()+e.slice(1);if(o0.test(s)){if(!i)return s;s="auto"}return(!Io.boxSizingReliable()&&n||!Io.reliableTrDimensions()&&Yu(t,"tr")||s==="auto"||!parseFloat(s)&&Y.css(t,"display",!1,r)==="inline")&&t.getClientRects().length&&(n=Y.css(t,"boxSizing",!1,r)==="border-box",a=l in t,a&&(s=t[l])),s=parseFloat(s)||0,s+i0(t,e,i||(n?"border":"content"),a,r,s)+"px"}function r0(t,e,i,r){var o;if(Array.isArray(e))Y.each(e,function(n,a){i||EB.test(t)?r(t,a):r0(t+"["+(typeof a=="object"&&a!=null?n:"")+"]",a,i,r)});else if(!i&&Nx(e)==="object")for(o in e)r0(t+"["+o+"]",e[o],i,r);else r(t,e)}var gc,oB,Px,nB,cA,aB,Rx,dA,Ox,pA,sB,Io,mc,Zu,ko,uA,Y,lB,hA,cB,e0,$m,dB,pB,_x,fr,hc,hB,gB,gA,Bx,nd,Ju,mA,fB,ZD,eA,o0,Kx,fA,wB,tA,yA,iA,CB,oA,SB,nA,sA,lA,EB,DB,kB,IB,H,Tt=__dcg_shared_module_exports__['e'](()=>{"use strict";gc=[],oB=Object.getPrototypeOf,Px=gc.slice,nB=gc.flat?function(t){return gc.flat.call(t)}:function(t){return gc.concat.apply([],t)},cA=gc.push,aB=gc.indexOf,Rx={},dA=Rx.toString,Ox=Rx.hasOwnProperty,pA=Ox.toString,sB=pA.call(Object),Io={},mc=function(e){return typeof e=="function"&&typeof e.nodeType!="number"&&typeof e.item!="function"},Zu=function(e){return e!=null&&e===e.window},ko=window.document;uA="3.6.0",Y=function(t,e){return new Y.fn.init(t,e)};Y.fn=Y.prototype={jquery:uA,constructor:Y,length:0,toArray:function(){return Px.call(this)},get:function(t){return t==null?Px.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=Y.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return Y.each(this,t)},map:function(t){return this.pushStack(Y.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(Px.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(Y.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(Y.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:cA,sort:gc.sort,splice:gc.splice};Y.extend=Y.fn.extend=function(){var t,e,i,r,o,n,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[s]||{},s++),typeof a!="object"&&!mc(a)&&(a={}),s===l&&(a=this,s--);s<l;s++)if((t=arguments[s])!=null)for(e in t)r=t[e],!(e==="__proto__"||a===r)&&(c&&r&&(Y.isPlainObject(r)||(o=Array.isArray(r)))?(i=a[e],o&&!Array.isArray(i)?n=[]:!o&&!Y.isPlainObject(i)?n={}:n=i,o=!1,a[e]=Y.extend(c,n,r)):r!==void 0&&(a[e]=r));return a};Y.extend({expando:"jQuery"+(uA+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!t||dA.call(t)!=="[object Object]"?!1:(e=oB(t),e?(i=Ox.call(e,"constructor")&&e.constructor,typeof i=="function"&&pA.call(i)===sB):!0)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},each:function(t,e){var i,r=0;if(QD(t))for(i=t.length;r<i&&e.call(t[r],r,t[r])!==!1;r++);else for(r in t)if(e.call(t[r],r,t[r])===!1)break;return t},makeArray:function(t,e){var i=e||[];return t!=null&&(QD(Object(t))?Y.merge(i,typeof t=="string"?[t]:t):cA.call(i,t)),i},inArray:function(t,e,i){return e==null?-1:aB.call(e,t,i)},merge:function(t,e){for(var i=+e.length,r=0,o=t.length;r<i;r++)t[o++]=e[r];return t.length=o,t},grep:function(t,e,i){for(var r,o=[],n=0,a=t.length,s=!i;n<a;n++)r=!e(t[n],n),r!==s&&o.push(t[n]);return o},map:function(t,e,i){var r,o,n=0,a=[];if(QD(t))for(r=t.length;n<r;n++)o=e(t[n],n,i),o!=null&&a.push(o);else for(n in t)o=e(t[n],n,i),o!=null&&a.push(o);return nB(a)},guid:1,support:Io});typeof Symbol=="function"&&(Y.fn[Symbol.iterator]=gc[Symbol.iterator]);Y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){Rx["[object "+e+"]"]=e.toLowerCase()});lB=function(t){var e,i,r,o,n,a,s,l=t.document,c=[],p=c.push,u=c.push,g=c.slice,m=/HTML$/i,w=/^[^{]+\{\s*\[native \w/,C=function(){r()};try{u.apply(c=g.call(l.childNodes),l.childNodes),c[l.childNodes.length].nodeType}catch(M){u={apply:c.length?function(I,E){p.apply(I,g.call(E))}:function(I,E){for(var T=I.length,A=0;I[T++]=E[A++];);I.length=T-1}}}function S(){}function k(M){var I=o.createElement("fieldset");try{return!!M(I)}catch(E){return!1}finally{I.parentNode&&I.parentNode.removeChild(I),I=null}}return e=S.support={},i=S.isXML=function(M){var I=M&&M.namespaceURI,E=M&&(M.ownerDocument||M).documentElement;return!m.test(I||E&&E.nodeName||"HTML")},r=S.setDocument=function(M){var I,E,T=M?M.ownerDocument||M:l;return T==o||T.nodeType!==9||!T.documentElement||(o=T,n=o.documentElement,a=!i(o),l!=o&&(E=o.defaultView)&&E.top!==E&&(E.addEventListener?E.addEventListener("unload",C,!1):E.attachEvent&&E.attachEvent("onunload",C)),e.attributes=k(function(A){return A.className="i",!A.getAttribute("className")}),e.getElementsByTagName=k(function(A){return A.appendChild(o.createComment("")),!A.getElementsByTagName("*").length}),I=w.test(n.compareDocumentPosition),s=I||w.test(n.contains)?function(A,G){var _=A.nodeType===9?A.documentElement:A,P=G&&G.parentNode;return A===P||!!(P&&P.nodeType===1&&(_.contains?_.contains(P):A.compareDocumentPosition&&A.compareDocumentPosition(P)&16))}:function(A,G){if(G){for(;G=G.parentNode;)if(G===A)return!0}return!1}),o},S.contains=function(M,I){return(M.ownerDocument||M)!=o&&r(M),s(M,I)},r(),e.sortDetached=k(function(M){return M.compareDocumentPosition(o.createElement("fieldset"))&1}),S}(window);Y.contains=lB.contains;cB=Y.fn.init=function(t,e,i){if(!t)return this;if(i=i||hA,typeof t=="string")throw new Error("$(string) implementation has been removed");if(t.nodeType)return this[0]=t,this.length=1,this;if(mc(t))throw new Error("$(function) implementation has been removed");return Y.makeArray(t,this)};cB.prototype=Y.fn;hA=Y(ko);e0=/[^\x20\t\r\n\f]+/g,$m=function(t,e,i,r,o,n,a){var s=0,l=t.length,c=i==null;if(Nx(i)==="object"){o=!0;for(s in i)$m(t,e,s,i[s],!0,n,a)}else if(r!==void 0&&(o=!0,mc(r)||(a=!0),c&&(a?(e.call(t,r),e=null):(c=e,e=function(p,u,g){return c.call(Y(p),g)})),e))for(;s<l;s++)e(t[s],i,a?r:r.call(t[s],s,e(t[s],i)));return o?t:c?e.call(t):l?e(t[0],i):n},dB=/^-ms-/,pB=/-([a-z])/g;_x=function(t){return t.nodeType===1||t.nodeType===9||!+t.nodeType};jm.uid=1;jm.prototype={cache:function(t){var e=t[this.expando];return e||(e={},_x(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var r,o=this.cache(t);if(typeof e=="string")o[uc(e)]=i;else for(r in e)o[uc(r)]=e[r];return o},get:function(t,e){return e===void 0?this.cache(t):t[this.expando]&&t[this.expando][uc(e)]},access:function(t,e,i){return e===void 0||e&&typeof e=="string"&&i===void 0?this.get(t,e):(this.set(t,e,i),i!==void 0?i:e)},remove:function(t,e){var i,r=t[this.expando];if(r!==void 0){if(e!==void 0)for(Array.isArray(e)?e=e.map(uc):(e=uc(e),e=e in r?[e]:e.match(e0)||[]),i=e.length;i--;)delete r[e[i]];(e===void 0||Y.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return e!==void 0&&!Y.isEmptyObject(e)}};fr=new jm,hc=new jm,hB=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,gB=/[A-Z]/g;Y.extend({hasData:function(t){return hc.hasData(t)||fr.hasData(t)},data:function(t,e,i){return hc.access(t,e,i)},removeData:function(t,e){hc.remove(t,e)},_data:function(t,e,i){return fr.access(t,e,i)},_removeData:function(t,e){fr.remove(t,e)}});Y.fn.extend({data:function(t,e){var i,r,o,n=this[0],a=n&&n.attributes;if(t===void 0){if(this.length&&(o=hc.get(n),n.nodeType===1&&!fr.get(n,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&(r=a[i].name,r.indexOf("data-")===0&&(r=uc(r.slice(5)),ZG(n,r,o[r])));fr.set(n,"hasDataAttrs",!0)}return o}return typeof t=="object"?this.each(function(){hc.set(this,t)}):$m(this,function(s){var l;if(n&&s===void 0)return l=hc.get(n,t),l!==void 0||(l=ZG(n,t),l!==void 0)?l:void 0;this.each(function(){hc.set(this,t,s)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){hc.remove(this,t)})}});gA=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Bx=new RegExp("^(?:([+-])=|)("+gA+")([a-z%]*)$","i"),nd=["Top","Right","Bottom","Left"],Ju=ko.documentElement,mA=function(t){return Y.contains(t.ownerDocument,t)},fB={composed:!0};Ju.getRootNode&&(mA=function(t){return Y.contains(t.ownerDocument,t)||t.getRootNode(fB)===t.ownerDocument});ZD=/^(?:checkbox|radio)$/i;(function(){var t=ko.createDocumentFragment(),e=t.appendChild(ko.createElement("div")),i=ko.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),Io.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Io.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",Io.option=!!e.lastChild})();eA=/^([^.]*)(?:\.(.+)|)/;Y.event={global:{},add:function(t,e,i,r,o){var n,a,s,l,c,p,u,g,m,w,C,S=fr.get(t);if(_x(t)){if(i.handler&&(n=i,i=n.handler,o=n.selector),o)throw new Error("Support for event delegation has been removed");for(i.guid||(i.guid=Y.guid++),(l=S.events)||(l=S.events=Object.create(null)),(a=S.handle)||(a=S.handle=function(k){return typeof Y!="undefined"&&Y.event.triggered!==k.type?Y.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(e0)||[""],c=e.length;c--;)if(s=eA.exec(e[c])||[],m=C=s[1],w=(s[2]||"").split(".").sort(),!!m){if(u=Y.event.special[m]||{},m=(o?u.delegateType:u.bindType)||m,u=Y.event.special[m]||{},p=Y.extend({type:m,origType:C,data:r,handler:i,guid:i.guid,selector:o,namespace:w.join(".")},n),(g=l[m])||(g=l[m]=[],g.delegateCount=0,(!u.setup||u.setup.call(t,r,w,a)===!1)&&t.addEventListener&&t.addEventListener(m,a)),u.add&&(u.add.call(t,p),p.handler.guid||(p.handler.guid=i.guid)),o)throw new Error("Support for event delegation has been removed");g.push(p),Y.event.global[m]=!0}}},remove:function(t,e,i,r,o){var n,a,s,l,c,p,u,g,m,w,C,S=fr.hasData(t)&&fr.get(t);if(!(!S||!(l=S.events))){for(e=(e||"").match(e0)||[""],c=e.length;c--;){if(s=eA.exec(e[c])||[],m=C=s[1],w=(s[2]||"").split(".").sort(),!m){for(m in l)Y.event.remove(t,m+e[c],i,r,!0);continue}for(u=Y.event.special[m]||{},m=(r?u.delegateType:u.bindType)||m,g=l[m]||[],s=s[2]&&new RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=n=g.length;n--;)p=g[n],(o||C===p.origType)&&(!i||i.guid===p.guid)&&(!s||s.test(p.namespace))&&(!r||r===p.selector||r==="**"&&p.selector)&&(g.splice(n,1),p.selector&&g.delegateCount--,u.remove&&u.remove.call(t,p));a&&!g.length&&((!u.teardown||u.teardown.call(t,w,S.handle)===!1)&&Y.removeEvent(t,m,S.handle),delete l[m])}Y.isEmptyObject(l)&&fr.remove(t,"handle events")}},dispatch:function(t){var e,i,r,o,n,a,s=new Array(arguments.length),l=Y.event.fix(t),c=(fr.get(this,"events")||Object.create(null))[l.type]||[],p=Y.event.special[l.type]||{};for(s[0]=l,e=1;e<arguments.length;e++)s[e]=arguments[e];if(l.delegateTarget=this,!(p.preDispatch&&p.preDispatch.call(this,l)===!1)){for(a=Y.event.handlers.call(this,l,c),e=0;(o=a[e++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,i=0;(n=o.handlers[i++])&&!l.isImmediatePropagationStopped();)(!l.rnamespace||n.namespace===!1||l.rnamespace.test(n.namespace))&&(l.handleObj=n,l.data=n.data,r=((Y.event.special[n.origType]||{}).handle||n.handler).apply(o.elem,s),r!==void 0&&(l.result=r)===!1&&(l.preventDefault(),l.stopPropagation()));return p.postDispatch&&p.postDispatch.call(this,l),l.result}},handlers:function(t,e){var i=[],r=e.delegateCount,o=t.target;if(r)throw new Error("Support for event delegtaion has been removed");return o=this,r<e.length&&i.push({elem:o,handlers:e.slice(r)}),i},addProp:function(t,e){Object.defineProperty(Y.Event.prototype,t,{enumerable:!0,configurable:!0,get:mc(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(i){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:i})}})},fix:function(t){return t[Y.expando]?t:new Y.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ZD.test(e.type)&&e.click&&Yu(e,"input")&&Fx(e,"click",Xu),!1},trigger:function(t){var e=this||t;return ZD.test(e.type)&&e.click&&Yu(e,"input")&&Fx(e,"click"),!0},_default:function(t){var e=t.target;return ZD.test(e.type)&&e.click&&Yu(e,"input")&&fr.get(e,"click")||Yu(e,"a")}},beforeunload:{postDispatch:function(t){t.result!==void 0&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}};Y.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)};Y.Event=function(t,e){if(!(this instanceof Y.Event))return new Y.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===void 0&&t.returnValue===!1?Xu:Qu,this.target=t.target&&t.target.nodeType===3?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&Y.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[Y.expando]=!0};Y.Event.prototype={constructor:Y.Event,isDefaultPrevented:Qu,isPropagationStopped:Qu,isImmediatePropagationStopped:Qu,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Xu,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Xu,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Xu,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}};Y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},Y.event.addProp);Y.each({focus:"focusin",blur:"focusout"},function(t,e){Y.event.special[t]={setup:function(){return Fx(this,t,yB),!1},trigger:function(){return Fx(this,t),!0},_default:function(){return!0},delegateType:e}});Y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){Y.event.special[t]={delegateType:e,bindType:e,handle:function(i){var r,o=this,n=i.relatedTarget,a=i.handleObj;return(!n||n!==o&&!Y.contains(o,n))&&(i.type=a.origType,r=a.handler.apply(this,arguments),i.type=e),r}}});Y.fn.extend({on:function(t,e,i,r){return t0(this,t,e,i,r)},one:function(t,e,i,r){return t0(this,t,e,i,r,1)},off:function(t,e,i){var r,o;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,Y(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if(typeof t=="object"){for(o in t)this.off(o,e,t[o]);return this}return(e===!1||typeof e=="function")&&(i=e,e=void 0),i===!1&&(i=Qu),this.each(function(){Y.event.remove(this,t,i,e)})}});o0=new RegExp("^("+gA+")(?!px)[a-z%]+$","i"),Kx=function(t){var e=t.ownerDocument.defaultView;return(!e||!e.opener)&&(e=window),e.getComputedStyle(t)},fA=function(t,e,i){var r,o,n={};for(o in e)n[o]=t.style[o],t.style[o]=e[o];r=i.call(t);for(o in e)t.style[o]=n[o];return r},wB=new RegExp(nd.join("|"),"i");(function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ju.appendChild(l).appendChild(c);var p=window.getComputedStyle(c);i=p.top!=="1%",s=e(p.marginLeft)===12,c.style.right="60%",n=e(p.right)===36,r=e(p.width)===36,c.style.position="absolute",o=e(c.offsetWidth/3)===12,Ju.removeChild(l),c=null}}function e(p){return Math.round(parseFloat(p))}var i,r,o,n,a,s,l=ko.createElement("div"),c=ko.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",Io.clearCloneStyle=c.style.backgroundClip==="content-box",Y.extend(Io,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),n},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),s},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var p,u,g,m;return a==null&&(p=ko.createElement("table"),u=ko.createElement("tr"),g=ko.createElement("div"),p.style.cssText="position:absolute;left:-11111px;border-collapse:separate",u.style.cssText="border:1px solid",u.style.height="1px",g.style.height="9px",g.style.display="block",Ju.appendChild(p).appendChild(u).appendChild(g),m=window.getComputedStyle(u),a=parseInt(m.height,10)+parseInt(m.borderTopWidth,10)+parseInt(m.borderBottomWidth,10)===u.offsetHeight,Ju.removeChild(p)),a}}))})();tA=["Webkit","Moz","ms"],yA=ko.createElement("div").style,iA={};CB=/^(none|table(?!-c[ea]).+)/,oA=/^--/,SB={position:"absolute",visibility:"hidden",display:"block"},nA={letterSpacing:"0",fontWeight:"400"};Y.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Wm(t,"opacity");return i===""?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,r){if(!(!t||t.nodeType===3||t.nodeType===8||!t.style)){var o,n,a,s=uc(e),l=oA.test(e),c=t.style;if(l||(e=rA(s)),a=Y.cssHooks[e]||Y.cssHooks[s],i!==void 0){if(n=typeof i,n==="string"&&(o=Bx.exec(i))&&o[1]&&(i=bB(t,e,o),n="number"),i==null||i!==i)return;n==="number"&&!l&&(i+=o&&o[3]||(Y.cssNumber[s]?"":"px")),!Io.clearCloneStyle&&i===""&&e.indexOf("background")===0&&(c[e]="inherit"),(!a||!("set"in a)||(i=a.set(t,i,r))!==void 0)&&(l?c.setProperty(e,i):c[e]=i)}else return a&&"get"in a&&(o=a.get(t,!1,r))!==void 0?o:c[e]}},css:function(t,e,i,r){var o,n,a,s=uc(e),l=oA.test(e);return l||(e=rA(s)),a=Y.cssHooks[e]||Y.cssHooks[s],a&&"get"in a&&(o=a.get(t,!0,i)),o===void 0&&(o=Wm(t,e,r)),o==="normal"&&e in nA&&(o=nA[e]),i===""||i?(n=parseFloat(o),i===!0||isFinite(n)?n||0:o):o}});Y.each(["height","width"],function(t,e){Y.cssHooks[e]={get:function(i,r,o){if(r)return CB.test(Y.css(i,"display"))&&(!i.getClientRects().length||!i.getBoundingClientRect().width)?fA(i,SB,function(){return aA(i,e,o)}):aA(i,e,o)},set:function(i,r,o){var n,a=Kx(i),s=!Io.scrollboxSize()&&a.position==="absolute",l=s||o,c=l&&Y.css(i,"boxSizing",!1,a)==="border-box",p=o?i0(i,e,o,c,a):0;return c&&s&&(p-=Math.ceil(i["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(a[e])-i0(i,e,"border",!1,a)-.5)),p&&(n=Bx.exec(r))&&(n[3]||"px")!=="px"&&(i.style[e]=r,r=Y.css(i,e)),xA(i,r,p)}}});Y.cssHooks.marginLeft=bA(Io.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Wm(t,"marginLeft"))||t.getBoundingClientRect().left-fA(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"});Y.each({margin:"",padding:"",border:"Width"},function(t,e){Y.cssHooks[t+e]={expand:function(i){for(var r=0,o={},n=typeof i=="string"?i.split(" "):[i];r<4;r++)o[t+nd[r]+e]=n[r]||n[r-2]||n[0];return o}},t!=="margin"&&(Y.cssHooks[t+e].set=xA)});Y.fn.extend({css:function(t,e){return $m(this,function(i,r,o){var n,a,s={},l=0;if(Array.isArray(r)){for(n=Kx(i),a=r.length;l<a;l++)s[r[l]]=Y.css(i,r[l],!1,n);return s}return o!==void 0?Y.style(i,r,o):Y.css(i,r)},t,e,arguments.length>1)}});(function(){var t=ko.createElement("input"),e=ko.createElement("select"),i=e.appendChild(ko.createElement("option"));t.type="checkbox",Io.checkOn=t.value!=="",Io.optSelected=i.selected,t=ko.createElement("input"),t.value="t",t.type="radio",Io.radioValue=t.value==="t"})();Io.focusin="onfocusin"in window;sA=/^(?:focusinfocus|focusoutblur)$/,lA=function(t){t.stopPropagation()};Y.extend(Y.event,{trigger:function(t,e,i,r){var o,n,a,s,l,c,p,u,g=[i||ko],m=Ox.call(t,"type")?t.type:t,w=Ox.call(t,"namespace")?t.namespace.split("."):[];if(n=u=a=i=i||ko,!(i.nodeType===3||i.nodeType===8)&&!sA.test(m+Y.event.triggered)&&(m.indexOf(".")>-1&&(w=m.split("."),m=w.shift(),w.sort()),l=m.indexOf(":")<0&&"on"+m,t=t[Y.expando]?t:new Y.Event(m,typeof t=="object"&&t),t.isTrigger=r?2:3,t.namespace=w.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=e==null?[t]:Y.makeArray(e,[t]),p=Y.event.special[m]||{},!(!r&&p.trigger&&p.trigger.apply(i,e)===!1))){if(!r&&!p.noBubble&&!Zu(i)){for(s=p.delegateType||m,sA.test(s+m)||(n=n.parentNode);n;n=n.parentNode)g.push(n),a=n;a===(i.ownerDocument||ko)&&g.push(a.defaultView||a.parentWindow||window)}for(o=0;(n=g[o++])&&!t.isPropagationStopped();)u=n,t.type=o>1?s:p.bindType||m,c=(fr.get(n,"events")||Object.create(null))[t.type]&&fr.get(n,"handle"),c&&c.apply(n,e),c=l&&n[l],c&&c.apply&&_x(n)&&(t.result=c.apply(n,e),t.result===!1&&t.preventDefault());return t.type=m,!r&&!t.isDefaultPrevented()&&(!p._default||p._default.apply(g.pop(),e)===!1)&&_x(i)&&l&&mc(i[m])&&!Zu(i)&&(a=i[l],a&&(i[l]=null),Y.event.triggered=m,t.isPropagationStopped()&&u.addEventListener(m,lA),i[m](),t.isPropagationStopped()&&u.removeEventListener(m,lA),Y.event.triggered=void 0,a&&(i[l]=a)),t.result}},simulate:function(t,e,i){var r=Y.extend(new Y.Event,i,{type:t,isSimulated:!0});Y.event.trigger(r,null,e)}});Y.fn.extend({trigger:function(t,e){return this.each(function(){Y.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return Y.event.trigger(t,e,i,!0)}});Io.focusin||Y.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(r){Y.event.simulate(e,r.target,Y.event.fix(r))};Y.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,o=fr.access(r,e);o||r.addEventListener(t,i,!0),fr.access(r,e,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,o=fr.access(r,e)-1;o?fr.access(r,e,o):(r.removeEventListener(t,i,!0),fr.remove(r,e))}}});EB=/\[\]$/;Y.param=function(t,e){var i,r=[],o=function(n,a){var s=mc(a)?a():a;r[r.length]=encodeURIComponent(n)+"="+encodeURIComponent(s==null?"":s)};if(t==null)return"";if(Array.isArray(t)||t.jquery&&!Y.isPlainObject(t))Y.each(t,function(){o(this.name,this.value)});else for(i in t)r0(i,t[i],e,o);return r.join("&")};Y.offset={setOffset:function(t,e,i){var r,o,n,a,s,l,c,p=Y.css(t,"position"),u=Y(t),g={};p==="static"&&(t.style.position="relative"),s=u.offset(),n=Y.css(t,"top"),l=Y.css(t,"left"),c=(p==="absolute"||p==="fixed")&&(n+l).indexOf("auto")>-1,c?(r=u.position(),a=r.top,o=r.left):(a=parseFloat(n)||0,o=parseFloat(l)||0),mc(e)&&(e=e.call(t,i,Y.extend({},s))),e.top!=null&&(g.top=e.top-s.top+a),e.left!=null&&(g.left=e.left-s.left+o),"using"in e?e.using.call(t,g):u.css(g)}};Y.fn.extend({offset:function(t){if(arguments.length)return t===void 0?this:this.each(function(o){Y.offset.setOffset(this,t,o)});var e,i,r=this[0];if(r)return r.getClientRects().length?(e=r.getBoundingClientRect(),i=r.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var t,e,i,r=this[0],o={top:0,left:0};if(Y.css(r,"position")==="fixed")e=r.getBoundingClientRect();else{for(e=this.offset(),i=r.ownerDocument,t=r.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&Y.css(t,"position")==="static";)t=t.parentNode;t&&t!==r&&t.nodeType===1&&(o=Y(t).offset(),o.top+=Y.css(t,"borderTopWidth",!0),o.left+=Y.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-Y.css(r,"marginTop",!0),left:e.left-o.left-Y.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&Y.css(t,"position")==="static";)t=t.offsetParent;return t||Ju})}});Y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=e==="pageYOffset";Y.fn[t]=function(r){return $m(this,function(o,n,a){var s;if(Zu(o)?s=o:o.nodeType===9&&(s=o.defaultView),a===void 0)return s?s[e]:o[n];s?s.scrollTo(i?s.pageXOffset:a,i?a:s.pageYOffset):o[n]=a},t,r,arguments.length)}});Y.each(["top","left"],function(t,e){Y.cssHooks[e]=bA(Io.pixelPosition,function(i,r){if(r)return r=Wm(i,e),o0.test(r)?Y(i).position()[e]+"px":r})});Y.each({Height:"height",Width:"width"},function(t,e){Y.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,r){Y.fn[r]=function(o,n){var a=arguments.length&&(i||typeof o!="boolean"),s=i||(o===!0||n===!0?"margin":"border");return $m(this,function(l,c,p){var u;return Zu(l)?r.indexOf("outer")===0?l["inner"+t]:l.document.documentElement["client"+t]:l.nodeType===9?(u=l.documentElement,Math.max(l.body["scroll"+t],u["scroll"+t],l.body["offset"+t],u["offset"+t],u["client"+t])):p===void 0?Y.css(l,c,s):Y.style(l,c,p,s)},e,a?o:void 0,a)}})});Y.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,r){return this.on(e,t,i,r)},undelegate:function(t,e,i){return arguments.length===1?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}});Y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){Y.fn[e]=function(i,r){return arguments.length>0?this.on(e,null,i,r):this.trigger(e)}});DB=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;Y.isArray=Array.isArray;Y.parseJSON=JSON.parse;Y.nodeName=Yu;Y.isFunction=mc;Y.isWindow=Zu;Y.camelCase=uc;Y.type=Nx;Y.now=Date.now;Y.isNumeric=function(t){var e=Y.type(t);return(e==="number"||e==="string")&&!isNaN(t-parseFloat(t))};Y.trim=function(t){return t==null?"":(t+"").replace(DB,"")};kB=window.jQuery,IB=window.$;Y.noConflict=function(t){return window.$===Y&&(window.$=IB),t&&window.jQuery===Y&&(window.jQuery=kB),Y};typeof noGlobal=="undefined"&&(window.jQuery=window.$=Y);H=Y});var vn,ad=__dcg_shared_module_exports__['e'](()=>{vn=()=>{let t="";try{t=location.search,t[0]=="?"&&(t=t.slice(1))}catch(r){}let e=t.split("&"),i={};for(let r of e){let o=r.split("=");o.length==2?i[o[0]]=decodeURIComponent(o[1]):i[o[0]]=!0}return i}});function pa(t,e){Ww&&Ww.notify(t,e)}function bf(t,e,i,r){if(e){e=__dcg_shared_module_exports__['a']({},e);for(var o in e)try{e[o]=JSON.stringify(e[o],null,2)}catch(n){e[o]="[[could not stringify]]"}}Ww&&Ww.leaveBreadcrumb(t,e,i,r)}var Ww,hd=__dcg_shared_module_exports__['e'](()=>{});function pz(t,e){if(e!=null){if(typeof t!="string")throw new Error("Must pass a string for an EventHandler name");if(typeof e!="function")throw new Error("Must pass a function for an EventHandler callback");return{bindings:{onMount:function(i){i[t.toLowerCase()]=function(r){r&&e.apply(this,arguments)}}}}}}var KO,qO=__dcg_shared_module_exports__['e'](()=>{KO=pz});function uz(t){var e=function(){return t};return e.isDCGViewConst=!0,e}function hz(t){return!!(typeof t=="function"&&t.isDCGViewConst)}var to,Is=__dcg_shared_module_exports__['e'](()=>{to={isConst:hz,makeConst:uz}});function gz(t,e,i){i===void 0?t.removeAttribute(e):t.setAttribute(e,i+"")}var Kv,Ok=__dcg_shared_module_exports__['e'](()=>{Kv={update:gz}});function mz(t,e){var i=e(),r;return to.isConst(e)||(r={onUpdate:function(o){var n=e();n!==i&&(i=n,Kv.update(o,t,n))}}),{value:i,bindings:r}}var zO,UO=__dcg_shared_module_exports__['e'](()=>{Is();Ok();zO=mz});function fz(t){return t[0]==="o"&&t[1]==="n"&&t[2].toUpperCase()===t[2]}var HO,WO=__dcg_shared_module_exports__['e'](()=>{HO=fz});function bz(t,e){_k[t]=e}function yz(t){return _k.hasOwnProperty(t)}function xz(t,e){var i=_k[t];return i(e)}var _k,Lf,Fk=__dcg_shared_module_exports__['e'](()=>{_k={};Lf={isCustomAttribute:yz,add:bz,parse:xz}});function wz(t,e,i){var r=t._bindings[e];r?r.push(i):t._bindings[e]=[i]}function vz(t,e){var i=t._bindings[e];if(i)for(var r=i.length,o=0;o<r;o++)i[o]()}var $n,Pf=__dcg_shared_module_exports__['e'](()=>{$n={add:wz,invoke:vz}});function Cz(t){Hh.push(t)}function Sz(t){var e=Hh;Hh=[];for(var i=0;i<e.length;i++){var r=e[i];r!==t&&Hh.push(r)}}function Ez(t,e){try{if(e&&e._isDCGView){t+=" ["+e._viewName+"]";var i=e.traceViewHierarchy();i.ancestors.length>0&&(t+=`
View Hierarchy:
`+i.formatted)}throw new Error(t)}catch(o){console.warn(o);for(var r=0;r<Hh.length;r++)Hh[r](o)}}var Hh,kl,Of=__dcg_shared_module_exports__['e'](()=>{Hh=[];kl={warn:Ez,addWarningHandler:Cz,removeWarningHandler:Sz}});function Iz(t,e,i){var r=!1;return function(){if(r){kl.warn(t+" is a one-time binding but was called multiple times",i);return}r=!0,e.apply(this,arguments)}}function Tz(t,e,i){var r=i.bindings;if(r)for(var o in r){var n=r[o];o in Dz&&(n=n.bind(null,e)),o in kz&&(n=Iz(o,n,t)),$n.add(t,o,n)}}function Mz(t,e){if(typeof e!="function")throw new Error('The "'+t+'" attr must be a function. It is: '+JSON.stringify(e));return Lf.isCustomAttribute(t)?Lf.parse(t,e):HO(t)?KO(t,e):zO(t,e)}function Gz(t,e,i){if(e)for(var r in e){var o=Mz(r,e[r]);if(o){var n=o.value;n!==void 0&&i.setAttribute(r,n),o.bindings&&Tz(t,i,o)}}}var Dz,kz,$O,jO=__dcg_shared_module_exports__['e'](()=>{qO();UO();WO();Fk();Pf();Of();Dz={onMount:!0,didMount:!0,willUnmount:!0,willUpdate:!0,onUpdate:!0,didUpdate:!0},kz={willMount:!0,onMount:!0,didMount:!0,willUnmount:!0,onUnmount:!0,didUnmount:!0};$O=Gz});function Az(){YO=!0}function Vz(t,e,i){if(typeof i!="function")throw new Error("bindText expects a function");var r=i();r==null&&(r="");var o=document.createTextNode(r);if(YO){var n=document.createElement("span");n.appendChild(o),e.appendChild(n)}else e.appendChild(o);$n.add(t,"onUpdate",function(){var a=i();a==null&&(a=""),r!==a&&(o.nodeValue=a,r=a)})}var YO,qv,Rk=__dcg_shared_module_exports__['e'](()=>{Pf();YO=!1;qv={bindText:Vz,enableSpanWrapping:Az}});function JO(t,e){var i=document.createTextNode(e);t.appendChild(i)}function Nk(t,e,i){if(this.tagName=t,this.attrs=e,this.children=i,Array.isArray(this.children))for(var r=0;r<this.children.length;r++){var o=typeof this.children[r];o!=="object"&&o!=="function"||(this.children[r]._parentElement=this)}}var Lz,XO,QO=__dcg_shared_module_exports__['e'](()=>{jO();Rk();Is();Of();Lz=qv.bindText;Nk.prototype._isDCGElement=!0;Nk.prototype.renderToDocFrag=function(t,e){if(this._domNode)throw new Error("Cannot remount a DCGElement");var i=this.children,r=document.createElement(this.tagName);this._domNode=r,$O(e,this.attrs,r),t.appendChild(r);for(var o=i.length,n=0;n<o;n++){var a=i[n];a._isDCGElement?a.renderToDocFrag(r,e):to.isConst(a)?JO(r,a()):typeof a=="function"?Lz(e,r,a):(kl.warn("Text should be a const or a getter: "+JSON.stringify(a),e),JO(r,a))}};XO=Nk});function ZO(t,e){if(t!=null)if(Array.isArray(t))for(var i=0;i<t.length;i++)ZO(t[i],e);else e.push(t)}function Pz(t,e){for(var i=[],r=arguments.length-1,o=2;o<=r;o++)ZO(arguments[o],i);if(typeof t=="string")return new XO(t,e,i);if(t&&t._isDCGViewClass)return new t(e,i);throw new Error("createElement expects a String or DCGViewClass")}var Il,Wh=__dcg_shared_module_exports__['e'](()=>{QO();Il=Pz});function Oz(){for(var t=this._element;t._isDCGView;)t=t._element;return t._domNode}function _z(t,e){if(e&&e._childViews.push(this),this.__generatedHTMLBefore)throw new Error("Cannot remount a DCGView");if(this.__generatedHTMLBefore=!0,this._element.renderToDocFrag(t,this),Array.isArray(this._siblingElements))for(var i=0;i<this._siblingElements.length;i++)this._siblingElements[i].renderToDocFrag(t,this)}function Fz(t,e,i){if(!t||!t._isDCGViewClass)throw new Error("Must pass a DCGView class to be mounted");if(!e||e.nodeType!==1)throw new Error("Must pass an HTMLElement for the node");if(e._mountedDCGView)throw new Error("This node is already mounted by a view");var r=new t(i),o=document.createDocumentFragment();return r.renderToDocFrag(o),e.innerHTML="",Bk(r),e._mountedDCGView=r,e.appendChild(o),Kk(r),qk(r),r}function Rz(t){var e=t._mountedDCGView;if(!e)throw new Error("This node is not mounted by a DCGView");zk(e),t.innerHTML="",delete t._mountedDCGView,Uk(e),Hk(e)}function Bk(t){t.willMount&&t.willMount(),$n.invoke(t,"willMount"),t._childViews.forEach(Bk)}function Kk(t){t._isMounted=!0,t.onMount&&t.onMount(),$n.invoke(t,"onMount"),t._childViews.forEach(Kk)}function qk(t){t.didMount&&t.didMount(),$n.invoke(t,"didMount"),t._childViews.forEach(qk)}function zk(t){t.willUnmount&&t.willUnmount(),$n.invoke(t,"willUnmount"),t._childViews.forEach(zk)}function Uk(t){t._isMounted=!1,t._childViews.forEach(Uk),$n.invoke(t,"onUnmount"),t.onUnmount&&t.onUnmount()}function Hk(t){t._childViews.forEach(Hk),$n.invoke(t,"didUnmount"),t.didUnmount&&t.didUnmount()}function Nz(t,e){var i=document.createDocumentFragment();return t.renderToDocFrag(i,e),i.firstChild}var vt,vd=__dcg_shared_module_exports__['e'](()=>{Pf();vt={renderToDocFrag:_z,findRootNode:Oz,createNodeForView:Nz,willMount:Bk,onMount:Kk,didMount:qk,willUnmount:zk,onUnmount:Uk,didUnmount:Hk,mountToNode:Fz,unmountFromNode:Rz}});function Bz(){if(!this._isMounted)return kl.warn("Trying to update view that is not mounted. Ignoring update.",this);if(!(this.shouldUpdate&&!this.shouldUpdate())){if(this.willUpdate&&this.willUpdate(),$n.invoke(this,"willUpdate"),$n.invoke(this,"onUpdate"),this.onUpdate&&this.onUpdate(),this.overrideChildUpdates)this.overrideChildUpdates();else for(var t=this._childViews,e=t.length,i=0;i<e;i++)t[i].update();$n.invoke(this,"didUpdate"),this.didUpdate&&this.didUpdate()}}var e2,t2=__dcg_shared_module_exports__['e'](()=>{Pf();Of();e2={update:Bz}});function Kz(t){var e=arguments.length;if(e<2)return t;for(var i=1;i<e;i++)for(var r=arguments[i],o=Object.keys(r),n=o.length,a=0;a<n;a++){var s=o[a];t[s]=r[s]}return t}var Tl,$h=__dcg_shared_module_exports__['e'](()=>{Tl=Kz});function qz(t){if(!t)throw new Error("must pass a spec to DCGView.createClass");if(typeof t.template!="function")throw new Error("must pass a template function to DCGView.createClass");var e=function(r,o){this._viewName=t.viewName||(this.constructor?this.constructor.name:"Anonymous DCGView"),this._setupProps(r,o),this.init&&this.init(),this._callTemplate()};e.prototype._setupProps=function(r,o){if(r){for(var n in r){var a=r[n];if(typeof a!="function"&&a!==void 0)throw new Error('The "'+n+'" prop must be a function. It is: '+JSON.stringify(a))}this.props=r}else this.props={};this.children=o,this._childViews=[],this._bindings={}},e.prototype._callTemplate=function(){if(this._element=this.template(),!this._element||!this._element._isDCGElement)throw new Error("template() must return a DCGElement");this._element._parentElement=this},e.prototype.bindFn=function(r){return r.bind(this)},e.prototype.findRootNode=vt.findRootNode,e.prototype.renderToDocFrag=vt.renderToDocFrag,e.prototype.const=to.makeConst,e.prototype.spread=Tl,e.prototype.createElement=Il,e.prototype.update=e2.update,e.prototype.traceViewHierarchy=function(){for(var r=[],o=this._parentElement;o;o=o._parentElement)r.unshift(o);var n=r.concat([this]).filter(function(a){return!(!a._isDCGView||a._isDCGSwitch&&a._parentElement&&a._parentElement._isDCGIf||a._isDCGIfDefinedWrapper||a._isDCGSwitchWrapper||a._isDCGSwitchUnionWrapper)}).map(function(a,s){for(var l="";s-- >0;)l+="  ";return l+"<"+a._viewName+">"}).join(`
`);return{ancestors:r,formatted:n}};for(var i in t)if(t.hasOwnProperty(i))if(!e.prototype.hasOwnProperty(i))e.prototype[i]=t[i];else throw new Error("Cannot override the "+i+"() method");return e._isDCGViewClass=!0,e.prototype._isDCGView=!0,e.prototype._isDCGElement=!0,e}var Yi,Qa=__dcg_shared_module_exports__['e'](()=>{Wh();vd();t2();Is();$h();Yi=qz});function i2(t){var e=t(),i=typeof e;if(i==="string")return e;if(!i||i!=="object")throw new Error("Unsupported type returned from style getter: "+i);var r="";for(var o in e){var n=e[o];e.hasOwnProperty(o)&&n!=null&&(r?r+=";"+o+":"+n:r=o+":"+n)}return r}function zz(t){var e,i=i2(t);return to.isConst(t)||(e={onUpdate:function(r){var o=i2(t);i!==o&&(Kv.update(r,"style",o),i=o)}}),{value:i,bindings:e}}var r2,o2=__dcg_shared_module_exports__['e'](()=>{Is();Ok();r2=zz});function n2(t){var e=t(),i=typeof e;if(i==="string")return e;if(!i||i!=="object")throw new Error("Unsupported type returned from class getter: "+i);var r="";for(var o in e)if(e.hasOwnProperty(o)){var n=e[o];n&&(r?r+=" "+o:r=o)}return r}function Uz(t,e,i){for(var r=[],o=t.className.replace(a2,"").split(s2),n=e.replace(a2,"").split(s2),a={},s=n.length-1;s>=0;s--)a[n[s]]=!0;var l=o.length;for(s=0;s<l;s++){var c=o[s];a.hasOwnProperty(c)||r.push(c)}return i?r.length?i+" "+r.join(" "):i:r.join(" ")}function Hz(t){var e,i=n2(t);return to.isConst(t)||(e={onUpdate:function(r){var o=n2(t);i!==o&&(r.className===i?(r.className=o,i=o):(r.className=Uz(r,i,o),i=o))}}),{value:i,bindings:e}}var a2,s2,l2,c2=__dcg_shared_module_exports__['e'](()=>{Is();a2=/^\s+|\s+$/g,s2=/\s+/;l2=Hz});function Wz(t){return function(e){if(typeof e!="function")throw new Error("The "+t+" attribute expects a function for the value");if(to.isConst(e))throw new Error("The "+t+" attribute does not expect a const for the value");var i={bindings:{}};return i.bindings[t]=e,i}}var Ml,d2=__dcg_shared_module_exports__['e'](()=>{Is();Ml=Wz});function p2(t){var e=t.length,i=new Array(e),r=new Array(e+1),o=0,n,a;for(a=0;a<e;a++){if(t[r[o]]<t[a])n=o+1;else{for(var s=1,l=o-1;s<=l;){var c=Math.ceil((s+l)/2);t[r[c]]<t[a]?s=c+1:l=c-1}n=s}i[a]=r[n-1],r[n]=a,n>o&&(o=n)}var p=new Array(o),u=r[o];for(a=o-1;a>=0;a--)p[a]=t[u],u=i[u];return p}var u2=__dcg_shared_module_exports__['e'](()=>{});function $z(t,e){var i={},r,o,n=[],a=[];for(r=0;r<e.length;r++)o=e[r],i[o]=r;for(r=0;r<t.length;r++)o=t[r],i[o]===void 0&&n.push(o);var s=[];for(r=0;r<t.length;r++){o=t[r];var l=i[o];l!==void 0&&s.push(l)}var c=p2(s),p={};for(r=0;r<c.length;r++)o=e[c[r]],p[o]=!0;for(r=e.length-1;r>=0;r--)o=e[r],!p[o]&&a.push({key:o,beforeKey:e[r+1]});return{removes:n,inserts:a}}var zv,Wk=__dcg_shared_module_exports__['e'](()=>{u2();zv=$z});function Xz(t,e){return Il(Jz,{items:t,keyFunction:e.key,viewFunction:e.item})}var jz,Yz,Jz,h2,g2=__dcg_shared_module_exports__['e'](()=>{Qa();Wk();Wh();vd();jz=Yi({viewName:"EachPlaceholder",_isDCGEachPlaceholder:!0,template:function(){return this.createElement("div",{style:this.const("display: none")})}}),Yz=Yi({viewName:"EachWrapper",_isDCGEachWrapper:!0,template:function(){return this.children[0]}}),Jz=Yi({viewName:"Each",_isDCGEach:!0,getKeys:function(){this._keyToItem={};var t=this.props.items(),e=this.props.keyFunction?t.map(this.props.keyFunction):t.slice(0);if(!this._chosenKeyType&&e.length&&(this._chosenKeyType=typeof e[0],this._chosenKeyType!=="string"&&this._chosenKeyType!=="number"))throw new Error("The key: "+JSON.stringify(e[0])+" is not a string or number");for(var i=0;i<e.length;i++){var r=e[i];if(typeof r!==this._chosenKeyType)throw new Error("Keys must be the same type. "+JSON.stringify(r)+" is not a "+this._chosenKeyType);if(r in this._keyToItem)throw new Error("The key: "+JSON.stringify(r)+" is not unique");this._keyToItem[r]=t[i]}return e},createViewForKey:function(t){var e=this._keyToItem[t],i=this.props.viewFunction.call(this,e,t),r=i;return r._isDCGView||(r=this.createElement(Yz,null,i)),this._keyToView[t]=r,r},template:function(){this._keyToView={},this._keys=this.getKeys(),this._element=this.createElement(jz,null),this._siblingElements=[];for(var t=0;t<this._keys.length;t++){var e=this._keys[t],i=this.createViewForKey(e);i._parentElement=this._element._parentElement,this._siblingElements.push(i)}return this._element},detachAllRemovedViews:function(){for(var t=this._childViews,e=0,i=t.length,r,o=0;o<i;o++)r=t[o],r._will_be_unmounted_?e++:t[o-e]=r;t.splice(i-e,e)},overrideChildUpdates:function(){var t=this._keys,e=this.getKeys();this._keys=e;var i=this._element.findRootNode().parentNode,r,o,n,a,s,l,c=zv(t,e),p=[];for(r=c.removes.length-1;r>=0;r--)l=c.removes[r],p.push(this._keyToView[l]);for(p.forEach(vt.willUnmount),r=0;r<c.removes.length;r++)l=c.removes[r],o=this._keyToView[l],delete this._keyToView[l],o._will_be_unmounted_=!0,i.removeChild(o.findRootNode());p.length>0&&this.detachAllRemovedViews(),p.forEach(vt.onUnmount),p.forEach(vt.didUnmount);var u=[];for(r=c.inserts.length-1;r>=0;r--)l=c.inserts[r].key,l in this._keyToView||(o=this.createViewForKey(l),u.push(o),vt.createNodeForView(o,this));for(u.forEach(vt.willMount),r=0;r<c.inserts.length;r++)s=c.inserts[r],n=this._keyToView[s.key].findRootNode(),s.beforeKey!==void 0?a=this._keyToView[s.beforeKey].findRootNode():a=null,i.insertBefore(n,a);u.forEach(vt.onMount),u.forEach(vt.didMount);var g=this._childViews,m=g.length-u.length;for(r=0;r<m;r++)g[r].update()}});h2=Xz});var Qz,Zz,m2,f2=__dcg_shared_module_exports__['e'](()=>{Qa();Wk();Is();vd();Qz=Yi({viewName:"ForWrapper",template:function(){return this.children[0]}}),Zz=Yi({viewName:"For",_isDCGFor:!0,getKeys:function(){this._keyToItem={};var t=this.props.each();if(!Array.isArray(t))throw new Error("<For each={}> must return an array");var e=this.props.key?t.map(this.props.key):t.slice(0);if(!this._chosenKeyType&&e.length&&(this._chosenKeyType=typeof e[0],this._chosenKeyType!=="string"&&this._chosenKeyType!=="number"))throw new Error("The key: "+JSON.stringify(e[0])+" is not a string or number");for(var i=0;i<e.length;i++){var r=e[i];if(typeof r!==this._chosenKeyType)throw new Error("Keys must be the same type. "+JSON.stringify(r)+" is not a "+this._chosenKeyType);if(r in this._keyToItem)throw new Error("The key: "+JSON.stringify(r)+" is not unique");this._keyToItem[r]=t[i]}return e},createViewForKey:function(t){var e=this._keyToItem[t],i=this._viewFunction.call(this,e,t),r=i;return r._isDCGView||(r=this.createElement(Qz,null,i)),this._keyToView[t]=r,r},template:function(){if(this._keyToView={},typeof this.props.each!="function")throw new Error("<For each={}> must be a function");if(this.children.length!==1)throw new Error("<For> expects a single child. You passed "+this.children.length);var t=this.children[0];if(!t||!t._isDCGElement)throw new Error("<For> expects the root node to be a DCGElement. You passed "+JSON.stringify(t));if(t._isDCGView)throw new Error("<For> expects the root node to not be a DCGView. Pass in something like <div> or <span>");if(t.children.length!==1)throw new Error("<For> expects a root node with a single child. You passed "+t.children.length);if(this._viewFunction=t.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<For> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof this._viewFunction!="function"){var e=JSON.stringify(this._viewFunction);throw new Error("<For> expects a function that constructs a DCGElement. You passed "+e)}if(to.isConst(this._viewFunction))throw new Error("<For> expects a function that constructs a DCGElement. You passed a constant");this._keys=this.getKeys();for(var i=[],r=0;r<this._keys.length;r++){var o=this._keys[r],n=this.createViewForKey(o);n._parentElement=this,i.push(n)}return t.children=i,t},detachAllRemovedViews:function(){for(var t=this._childViews,e=0,i=t.length,r,o=0;o<i;o++)r=t[o],r._will_be_unmounted_?e++:t[o-e]=r;t.splice(i-e,e)},overrideChildUpdates:function(){var t=this._keys,e=this.getKeys();this._keys=e;var i=this.findRootNode(),r,o,n,a,s,l,c=zv(t,e),p=[];for(r=c.removes.length-1;r>=0;r--)l=c.removes[r],p.push(this._keyToView[l]);for(p.forEach(vt.willUnmount),r=0;r<c.removes.length;r++)l=c.removes[r],o=this._keyToView[l],delete this._keyToView[l],o._will_be_unmounted_=!0,i.removeChild(o.findRootNode());p.length>0&&this.detachAllRemovedViews(),p.forEach(vt.onUnmount),p.forEach(vt.didUnmount);var u=[];for(r=c.inserts.length-1;r>=0;r--)l=c.inserts[r].key,l in this._keyToView||(o=this.createViewForKey(l),u.push(o),vt.createNodeForView(o,this));for(u.forEach(vt.willMount),r=0;r<c.inserts.length;r++)s=c.inserts[r],n=this._keyToView[s.key].findRootNode(),s.beforeKey!==void 0?a=this._keyToView[s.beforeKey].findRootNode():a=null,i.insertBefore(n,a);u.forEach(vt.onMount),u.forEach(vt.didMount);var g=this._childViews,m=g.length-u.length;for(r=0;r<m;r++)g[r].update()}}),m2=Zz});var e4,t4,Uv,$k=__dcg_shared_module_exports__['e'](()=>{Qa();Is();vd();e4=Yi({viewName:"SwitchWrapper",_isDCGSwitchWrapper:!0,template:function(){return this.children[0]}}),t4=Yi({viewName:"Switch",_isDCGSwitch:!0,updateKey:function(){this._key=this.props.key()},createView:function(){var t=this._viewFunction(this._key);t==null&&(t=this.createElement("div",{style:this.const("display: none")}));var e=this.createElement(e4,null,t);return e._parentElement=this,e},template:function(){if(this._key=void 0,typeof this.props.key!="function")throw new Error("<Switch key={}> must be a function");if(this.children.length!==1)throw new Error("<Switch> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof this._viewFunction!="function"){var t=JSON.stringify(this._viewFunction);throw new Error("<Switch> expects a function that constructs a DCGElement. You passed "+t)}if(to.isConst(this._viewFunction))throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a constant");return this.updateKey(),this.createView()},overrideChildUpdates:function(){var t=this._key;this.updateKey();var e=this._key;if(t===e)this._element.update();else{var i=this.findRootNode(),r=document.createTextNode("");i.parentNode.insertBefore(r,i),vt.willUnmount(this._element),this._childViews=[],i.parentNode.removeChild(i),vt.onUnmount(this._element),vt.didUnmount(this._element),this._element=this.createView();var o=vt.createNodeForView(this._element,this);vt.willMount(this._element),r.parentNode.insertBefore(o,r),r.parentNode.removeChild(r),vt.onMount(this._element),vt.didMount(this._element)}}}),Uv=t4});function b2(t,e,i){return Il(r4,{getCase:function(){var r=e();return t?r&&r[t]:r},buildChildView:function(r){var o=i[r];if(o)return o(e)}})}function o4(t,e){return typeof t=="string"?b2.bind(this,t,e):b2(void 0,t,e)}var i4,r4,Hv,jk=__dcg_shared_module_exports__['e'](()=>{Qa();vd();Wh();i4=Yi({viewName:"SwitchUnionWrapper",_isDCGSwitchUnionWrapper:!0,template:function(){return this.children[0]}}),r4=Yi({viewName:"SwitchUnion",_isDCGSwitchUnion:!0,updateCase:function(){this._case=this.props.getCase()},createView:function(){var t=this.props.buildChildView(this._case);t==null&&(t=this.createElement("div",{style:this.const("display: none")}));var e=this.createElement(i4,null,t);return e._parentElement=this,e},template:function(){return this._case=void 0,this.updateCase(),this.createView()},overrideChildUpdates:function(){var t=this._case;this.updateCase();var e=this._case;if(t===e)this._element.update();else{var i=this.findRootNode(),r=document.createTextNode("");i.parentNode.insertBefore(r,i),vt.willUnmount(this._element),this._childViews=[],i.parentNode.removeChild(i),vt.onUnmount(this._element),vt.didUnmount(this._element),this._element=this.createView();var o=vt.createNodeForView(this._element,this);vt.willMount(this._element),r.parentNode.insertBefore(o,r),r.parentNode.removeChild(r),vt.onMount(this._element),vt.didMount(this._element)}}});Hv=o4});var n4,y2,x2=__dcg_shared_module_exports__['e'](()=>{Qa();Is();$k();n4=Yi({viewName:"If",_isDCGIf:!0,template:function(){if(typeof this.props.predicate!="function")throw new Error("<If predicate={}> must be a function");if(this.children.length!==1)throw new Error("<If> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<If> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof this._viewFunction!="function"){var t=JSON.stringify(this._viewFunction);throw new Error("<If> expects a function that constructs a DCGElement. You passed "+t)}if(to.isConst(this._viewFunction))throw new Error("<If> expects a function that constructs a DCGElement. You passed a constant");var e=(function(){return!!this.props.predicate()}).bind(this),i=(function(r){if(r)return this._viewFunction()}).bind(this);return this.createElement(Uv,{key:e},i)}}),y2=n4});function l4(t,e){return Il(s4,{isDefined:function(){var i=t();return i!=null},buildChildView:function(){return e(t)}})}var a4,s4,w2,v2=__dcg_shared_module_exports__['e'](()=>{Qa();vd();Wh();a4=Yi({viewName:"IfDefinedWrapper",_isDCGIfDefinedWrapper:!0,template:function(){return this.children[0]}}),s4=Yi({viewName:"IfDefined",_isDCGIfDefined:!0,updateIsDefined:function(){this._isDefined=this.props.isDefined()},createView:function(){var t;this._isDefined&&(t=this.props.buildChildView()),t==null&&(t=this.createElement("div",{style:this.const("display: none")}));var e=this.createElement(a4,null,t);return e._parentElement=this,e},template:function(){return this._isDefined=void 0,this.updateIsDefined(),this.createView()},overrideChildUpdates:function(){var t=this._isDefined;this.updateIsDefined();var e=this._isDefined;if(t===e)this._element.update();else{var i=this.findRootNode(),r=document.createTextNode("");i.parentNode.insertBefore(r,i),vt.willUnmount(this._element),this._childViews=[],i.parentNode.removeChild(i),vt.onUnmount(this._element),vt.didUnmount(this._element),this._element=this.createView();var o=vt.createNodeForView(this._element,this);vt.willMount(this._element),r.parentNode.insertBefore(o,r),r.parentNode.removeChild(r),vt.onMount(this._element),vt.didMount(this._element)}}});w2=l4});function c4(t,e){var i=Hv(function(){return t()?"true":"false"},e);return i._viewName="IfElse",i}var C2,S2=__dcg_shared_module_exports__['e'](()=>{jk();C2=c4});var E2,D2=__dcg_shared_module_exports__['e'](()=>{Qa();$h();E2=Yi({viewName:"Textarea",computeValue:function(){var t=this.props.value();return t==null?"":t+""},template:function(){if(!this.props.value)throw new Error('<Textarea> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Textarea> expects an "onInput={}" prop');var t=Tl({},this.props,{onInput:(function(e){this.props.onInput(e.target.value),this._isMounted&&this.update()}).bind(this)});return this.props.disabled&&(t.disabled=(function(){if(this.props.disabled())return!0}).bind(this)),delete t.value,this.createElement("textarea",t,this.const(this.computeValue()))},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var t=this.computeValue();this.rootDOM.value!==t&&(this.rootDOM.value=t)}})});var k2,I2=__dcg_shared_module_exports__['e'](()=>{Qa();$h();k2=Yi({viewName:"Input",computeValue:function(){var t=this.props.value();return t==null?"":t+""},template:function(){if(!this.props.value)throw new Error('<Input> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Input> expects an "onInput={}" prop');var t=Tl({},this.props,{value:this.const(this.computeValue()),onInput:(function(e){this.props.onInput(e.target.value),this._isMounted&&this.update()}).bind(this)});return this.props.onEnterPressed&&(t.onKeypress=(function(e){e.which===13&&this.props.onEnterPressed()}).bind(this)),this.props.disabled&&(t.disabled=(function(){if(this.props.disabled())return!0}).bind(this)),t.hasOwnProperty("tabindex")||(t.tabindex=(function(){return this.props.disabled&&this.props.disabled()?"-1":"0"}).bind(this)),this.createElement("input",t)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var t=this.computeValue();this.rootDOM.value!==t&&(this.rootDOM.value=t)}})});var T2,M2=__dcg_shared_module_exports__['e'](()=>{Qa();$h();T2=Yi({viewName:"Checkbox",computeChecked:function(){return!!this.props.checked()},template:function(){if(!this.props.checked)throw new Error('<Checkbox> expects a "checked={}" prop');if(!this.props.onChange)throw new Error('<Checkbox> expects an "onChange={}" prop');var t=Tl({},this.props,{type:this.const("checkbox"),checked:this.const(this.computeChecked()?"checked":void 0),onChange:(function(e){this.props.onChange(e.target.checked),this._isMounted&&this.update()}).bind(this)});return this.createElement("input",t)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var t=this.computeChecked();this.rootDOM.checked!==t&&(this.rootDOM.checked=t)}})});var G2,A2=__dcg_shared_module_exports__['e'](()=>{g2();f2();$k();jk();x2();v2();S2();D2();I2();M2();G2={Each:h2,For:m2,Switch:Uv,SwitchUnion:Hv,If:y2,IfDefined:w2,IfElse:C2,Textarea:E2,Input:k2,Checkbox:T2}});var V2,L2=__dcg_shared_module_exports__['e'](()=>{Qa();V2=Yi({template:function(){}})});var d4,Za,Ts,P2=__dcg_shared_module_exports__['e'](()=>{Wh();Qa();vd();$h();Is();Fk();o2();c2();d2();A2();Of();Rk();L2();d4=qv.enableSpanWrapping,Za={createElement:Il,createClass:Yi,mountToNode:vt.mountToNode,unmountFromNode:vt.unmountFromNode,spread:Tl,const:to.makeConst,isConst:to.isConst,addCustomAttribute:Lf.add,Components:G2,addWarningHandler:kl.addWarningHandler,removeWarningHandler:kl.removeWarningHandler,_warn:kl.warn,enableSpanWrapping:d4,Class:V2};Za.addCustomAttribute("style",r2);Za.addCustomAttribute("class",l2);Za.addCustomAttribute("willMount",Ml("willMount"));Za.addCustomAttribute("onMount",Ml("onMount"));Za.addCustomAttribute("didMount",Ml("didMount"));Za.addCustomAttribute("willUnmount",Ml("willUnmount"));Za.addCustomAttribute("onUnmount",Ml("onUnmount"));Za.addCustomAttribute("didUnmount",Ml("didUnmount"));Za.addCustomAttribute("willUpdate",Ml("willUpdate"));Za.addCustomAttribute("onUpdate",Ml("onUpdate"));Za.addCustomAttribute("didUpdate",Ml("didUpdate"));Ts=Za});function _f(t,e){let r=new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(t);return r?decodeURIComponent(r[1].replace(/\+/g,"%20")):null}function p4(t,e){return new RegExp("[?|&]"+e+"(=|&|;|$)").test(t)}function u4(t,e,i){if(e!==encodeURIComponent(e))throw new Error("Programming error: parameter name should be URL-safe without encoding.");let r=encodeURIComponent(i);if(t.length){let o=t.split("#"),n=/\?/.test(t)?`${o[0]}&${e}=${r}`:`${o[0]}?${e}=${r}`;return o[1]!==void 0?`${n}#${o[1]}`:n}else return`?${e}=${r}`}function h4(t,e,i){let o=new RegExp("([?|&])"+e+"=([^&;]+?)(&|#|;|$)").exec(t);if(!o)return t;let n=o[1],a=o[2],s=`${n}${e}=${a}`,l=encodeURIComponent(i),c=`${n}${e}=${l}`;return t.replace(s,c)}function O2(t,e,i){return p4(t,e)?h4(t,e,i):u4(t,e,i)}var Wv=__dcg_shared_module_exports__['e'](()=>{});function x4(t){let e=b4.exec(t);if(e){let i=e[1];return!y4.test(i)}return!1}function $v(t,e){let i=vn(),r="";return e!==void 0?r=e:r=i.lang?""+i.lang:"",t===""||r===""||m4.test(t)||f4.test(t)||x4(t)?t:O2(t,"lang",r)}var m4,f4,b4,y4,_2=__dcg_shared_module_exports__['e'](()=>{ad();Wv();m4=/lang=[A-Za-z]+/,f4=/(cl|learn|help).desmos.com/,b4=/^(?:https?:)?(?:\/\/)?([^\s\/\?]+)/i,y4=/(^desmos\.com$)|(\.desmos.com$)/});var F2=__dcg_shared_module_exports__['e'](()=>{});var j=__dcg_shared_module_exports__['f']((_te,R2)=>{P2();Tt();hd();_2();F2();Ts.addWarningHandler(t=>pa(t));Ts.addCustomAttribute("href",function(t){let e=$v(t()),i={value:`${$v(t())}`,bindings:{onMount(r){if(!r.matches("a")&&!r.matches("use"))throw new Error("Cannot have an href on a non-link element.")}}};return i.bindings.onUpdate=function(r){let o=$v(t());e!==o&&(e=o,r.setAttribute("href",o))},i});Ts.addCustomAttribute("onTap",t=>({value:"",bindings:{onMount(e){H(e).on("dcg-tap",t)}}}));Ts.addCustomAttribute("ignoreRealClick",t=>({bindings:{onMount(e){H(e).on("click",function(i){t()&&i.preventDefault()})}}}));Ts.addCustomAttribute("onTapStart",t=>({bindings:{onMount(e){H(e).on("dcg-tapstart",t)}}}));Ts.addCustomAttribute("onTapMove",t=>({bindings:{onMount(e){H(e).on("dcg-tapmove",t)}}}));Ts.addCustomAttribute("onTapEnd",t=>({bindings:{onMount(e){H(e).on("dcg-tapend",t)}}}));Ts.addCustomAttribute("onLongHold",t=>({bindings:{onMount(e){H(e).on("dcg-longhold",t)}}}));Ts.addCustomAttribute("manageFocus",function(t){return t()===void 0?{}:{bindings:{onMount(e){t().shouldBeFocused()&&e.focus(),e.onfocus=function(i){t().shouldBeFocused()||t().onFocusedChanged(!0,i)},e.onblur=function(i){t().shouldBeFocused()&&t().onFocusedChanged(!1,i)}},onUpdate(e){let i=t().shouldBeFocused(),r=document.activeElement===e;i&&!r?e.focus():r&&!i&&e.blur()},willUnmount(e){e.onfocus=null,e.onblur=null}}}});R2.exports=Ts});var _3=__dcg_shared_module_exports__['f']((MSe,O3)=>{O3.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}});var R3=__dcg_shared_module_exports__['f']((GSe,F3)=>{var HW=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,WW=_3();F3.exports=function(t){var e=0,i,r=!0,o={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return t.replace(HW,function(n){if(n==="="){r=!0,e++;return}r?e===0?((WW[n]||t.charAt(t.length-2)==="/")&&(o.voidElement=!0),o.name=n):(o.attrs[i]=n.replace(/^['"]|['"]$/g,""),i=void 0):(i&&(o.attrs[i]=i),i=n),e++,r=!1}),o}});var B3=__dcg_shared_module_exports__['f']((ASe,N3)=>{var $W=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,jW=R3(),YW=Object.create?Object.create(null):{};function fM(t,e,i,r,o){var n=e.indexOf("<",r),a=e.slice(r,n===-1?void 0:n);/^\s*$/.test(a)&&(a=" "),(!o&&n>-1&&i+t.length>=0||a!==" ")&&t.push({type:"text",content:a})}N3.exports=function(e,i){i||(i={}),i.components||(i.components=YW);var r=[],o,n=-1,a=[],s={},l=!1;return e.replace($W,function(c,p){if(l){if(c!=="</"+o.name+">")return;l=!1}var u=c.charAt(1)!=="/",g=c.indexOf("<!--")===0,m=p+c.length,w=e.charAt(m),C;u&&!g&&(n++,o=jW(c),o.type==="tag"&&i.components[o.name]&&(o.type="component",l=!0),!o.voidElement&&!l&&w&&w!=="<"&&fM(o.children,e,n,m,i.ignoreWhitespace),s[o.tagName]=o,n===0&&r.push(o),C=a[n-1],C&&C.children.push(o),a[n]=o),(g||!u||o.voidElement)&&(g||n--,!l&&w!=="<"&&w&&(C=n===-1?r:a[n].children,fM(C,e,n,m,i.ignoreWhitespace)))}),!r.length&&e.length&&fM(r,e,0,0,i.ignoreWhitespace),r}});var z3=__dcg_shared_module_exports__['f']((VSe,q3)=>{function JW(t){var e=[];for(var i in t)e.push(i+'="'+t[i]+'"');return e.length?" "+e.join(" "):""}function K3(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?JW(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(K3,"")+"</"+e.name+">"}}q3.exports=function(t){return t.reduce(function(e,i){return e+K3("",i)},"")}});var H3=__dcg_shared_module_exports__['f']((LSe,U3)=>{U3.exports={parse:B3(),stringify:z3()}});var zG;function rB(t){zG=t(__dcg_shared_module_exports__['c'])}rB(function(t){function e(){window.consoleOverride=!0;var r=window.console.log;window.console.log=function(){for(var o=[],n=0;n<arguments.length;n++)o.push(arguments[n]);r.apply(window.console,[].concat([o.join(" ")],o))}}var i={ready:function(){try{window.TestBridge=i,parent.USING_SELENIUM&&e()}catch(r){}}};return i});var{ready:Gj}=zG;var Jj=__dcg_shared_module_exports__['h'](UG());var HG=function(){{var t={IS_IE8:navigator.userAgent.match(/MSIE 8.0/i)!==null,IS_IE9:navigator.userAgent.match(/MSIE 9.0/i)!==null,IS_IE:navigator.userAgent.match(/MSIE/i)!==null||navigator.userAgent.match(/Trident/i)!==null&&navigator.userAgent.match(/rv:11/i)!==null,IS_EDGE:navigator.userAgent.match(/Edge/i)!==null,IS_IPAD:navigator.userAgent.match(/iPad/i)!==null,IS_MOBILE:navigator.userAgent.match(/Mobile|Android/i)!==null,IS_ANDROID:navigator.userAgent.match(/Android/i)!==null,IS_IOS:navigator.userAgent.match(/(iPad|iPhone|iPod)/i)!==null||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,IS_CHROME:navigator.userAgent.match(/Chrome/i)!==null,IS_FIREFOX:navigator.userAgent.match(/Firefox/i)!==null,IS_SAFARI:navigator.userAgent.match(/^((?!chrome|android).)*safari/i)!==null,IS_APPLE:navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)!==null,IS_WINDOWS:navigator.platform.match(/(Win32)/i)!==null,IS_TOUCH:navigator.userAgent.match(/Touch/i)!==null,IS_KINDLE:navigator.userAgent.match(/Kindle/i)!==null||navigator.userAgent.match(/Silk/i)!==null,IS_BRAILLENOTE:navigator.userAgent.match(/KeyWeb/i)!==null,IS_IN_IFRAME:window.parent!==window};return t.IS_TABLET=t.IS_IPAD||t.IS_ANDROID||t.IS_KINDLE,t.IS_TOUCH_DEVICE=t.SHOULD_NOT_AUTOFOCUS=t.IS_IOS||t.IS_ANDROID||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i),t.IOS_VERSION=function(){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return e?[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]:null}(),t.MAC_VERSION=function(){var e=navigator.appVersion.match(/OS X (\d+)_(\d+)_?(\d+)?/);return e?[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]:null}(),t.CHROME_VERSION=function(){var e=navigator.appVersion.match(/Chrom(e|ium)\/([0-9]+)\.([0-9]+)\.?([0-9]+)?/);return e?[parseInt(e[2],10),parseInt(e[3],10),parseInt(e[4]||0,10)]:null}(),t.SUPPORTS_INPUTMODE=function(){var e="inputMode"in document.createElement("textarea");return!(!e||t.IS_IOS&&t.IOS_VERSION&&t.IOS_VERSION[0]<15)}(),t.SUPPORTS_CANVAS=function(){var e=document.createElement("canvas"),i=!!(e.getContext&&e.getContext("2d"));return i}(),t.PREFERS_REDUCED_MOTION=function(){return window.matchMedia("(prefers-reduced-motion: reduce)")===!0||window.matchMedia("(prefers-reduced-motion: reduce)").matches===!0||document.location.search.indexOf("prefersReducedMotion")>=0}(),t}}(),WG=HG,{SHOULD_NOT_AUTOFOCUS:Rj,IS_TOUCH_DEVICE:$G,IS_SAFARI:jG,IS_APPLE:Rr,IS_IOS:od,IS_ANDROID:Ax,IS_IPAD:ka,IS_IN_IFRAME:pc,IOS_VERSION:Hm,MAC_VERSION:Nj,CHROME_VERSION:Bj,IS_IE:YG,IS_EDGE:Kj,IS_CHROME:qj,IS_FIREFOX:Vx,IS_MOBILE:XD,IS_WINDOWS:JG,IS_TOUCH:XG,SUPPORTS_INPUTMODE:Lx,SUPPORTS_CANVAS:zj,PREFERS_REDUCED_MOTION:QG,translateRule:Uj}=HG;Tt();var wA=["exp|exponent ln|natural-log log","total length count mean median quantile quartile nCr nPr stats","stdev|standard-deviation stddev|standard-deviation","stdDev|standard-deviation stdevp|standard-deviation-population","stddevp|standard-deviation-population stdDevP|standard-deviation-population mad var|variance","varp|variance-population variance cov|co-variance covp|co-variance-population corr|correlation spearman","lcm mcm gcd mcd gcf mod ceil|ceiling floor round abs|absolute-value min max sign|signum signum sgn","sin|sine cos|cosine tan|tangent csc|co-secant sec|secant cot|co-tangent","sinh|hyperbolic-sine cosh|hyperbolic-cosine tanh|hyperbolic-tangent csch|hyperbolic-co-secant","sech|hyperbolic-secant coth|hyperbolic-co-tangent","arcsin|arc-sine arccos|arc-cosine arctan|arc-tangent arccsc|arc-co-secant arcsec|arc-secant","arccot|arc-co-tangent","arcsinh|hyperbolic-arc-sine arccosh|hyperbolic-arc-cosine arctanh|hyperbolic-arc-co-tangent","arccsch|hyperbolic-arc-co-secant arcsech|hyperbolic-arc-secant","arccoth|hyperbolic-arc-co-tangent","arsinh|hyperbolic-ar-sine arcosh|hyperbolic-ar-cosine artanh|hyperbolic-ar-co-tangent","arcsch|hyperbolic-ar-co-secant arsech|hyperbolic-ar-secant","arcoth|hyperbolic-ar-co-tangent","polygon","distance midpoint","sort shuffle join unique","erf|error-function","TTest|t-test ttest|t-test TScore|t-score tscore|t-score","iTTest|independent-t-test ittest|independent-t-test IndependentTTest","TScore|t-score Tscore|t-score tscore|t-score","normaldist|normal-distribution tdist|t-distribution poissondist|poisson-distribution","binomialdist|binomial-distribution","uniformdist|uniform-distribution","pdf cdf random inverseCdf inversecdf","histogram dotplot boxplot","pdf cdf","rgb hsv","for","width height","with"].join(" "),TB=["det|determinant","inv|inverse","transpose","rref|reduced-row-echelon-form","trace"].join(" ");wA+=" "+TB;var MB="alpha beta sqrt theta phi rho pi tau nthroot cbrt sum prod integral percent infinity infty cross";function pl(t){t||(t={});let e=[MB];return t.disallowAns||e.push("ans"),t.disallowFrac||e.push("frac"),t.additionalCommands&&(e=e.concat(t.additionalCommands)),e.join(" ")}function sa(t){t||(t={});let e=wA;return t.additionalOperators&&t.additionalOperators.length&&(e=`${e} ${t.additionalOperators.join(" ")}`),t.includeGeometryFunctions&&(e+=" "+Object.keys(__dcg_shared_module_exports__['j']).join(" ")),t.include3DFunctions&&(e+=" "+Object.keys(__dcg_shared_module_exports__['k']).join(" ")),e}var ul=function(t){if(!t)return;let e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX}},Rn=function(t,e){Object.assign(t.style,e)};function wp(t){return!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length))}function vA(t){if(document.readyState!=="loading")t();else{var e=function(){document.removeEventListener("DOMContentLoaded",e),t()};document.addEventListener("DOMContentLoaded",e)}}var CA=window.MathQuill.noConflict().getInterface(3);CA.config({leftRightIntoCmdGoes:"up",sumStartsWithNEquals:!0,supSubsRequireOperand:!0,charsThatBreakOutOfSupSub:"+-=<>*",autoCommands:pl(),autoSubscriptNumerals:!0,restrictMismatchedBrackets:!0,typingPercentWritesPercentOf:!0,substituteTextarea:function(){if(!Lx&&(od||Ax)){let e=document.createElement("span");return e.classList.add("dcg-mathquill-input-span"),e.setAttribute("tabindex","0"),e.setAttribute("role","textbox"),Rn(e,{display:"inline-block",height:"1px",width:"1px"}),e}if(JG&&XG){let e=document.createElement("textarea");return e.setAttribute("readonly",""),e.setAttribute("inputmode","none"),e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","none"),e.setAttribute("spellcheck","false"),e.setAttribute("autocomplete","off"),H(e).on("keydown",function(){this.readOnly=!1,this.select()}).on("blur",function(){this.readOnly=!0}),e}let t=document.createElement("textarea");return t.setAttribute("inputmode","none"),t.setAttribute("autocorrect","off"),t.setAttribute("autocapitalize","none"),t.setAttribute("spellcheck","false"),t.setAttribute("autocomplete","off"),t},autoOperatorNames:sa(),quietEmptyDelimiters:"( [",resetCursorOnBlur:!0,enableDigitGrouping:!0,disableAutoSubstitutionInSubscripts:!0,interpretTildeAsSim:!0});var hl=CA;ad();var po={},Ia=vn();if(typeof Desmos!="undefined"&&Desmos.config)for(qx in Desmos.config)Desmos.config.hasOwnProperty(qx)&&(Ia[qx]=Desmos.config[qx]);var qx,ws=function(t){return Ia.hasOwnProperty(t)},Vt=function(t){po[t]=ws(t)},Qi=function(t){po[t]=!ws("no"+t)};Vt("testing");Vt("maintenance");Vt("disableScrollFix");Vt("nativeOnscreenKeypad");Vt("hidden");Vt("disableMouseInteractions");Vt("advancedStyling");Vt("outofdom");Vt("beta3d");Ia.lang&&(po.language=Ia.lang);Ia.fontSize&&(po.fontSize=Ia.fontSize);Ia.backgroundColor&&(po.backgroundColor="#"+Ia.backgroundColor);Ia.textColor&&(po.textColor="#"+Ia.textColor);po.no_navigation_warning=ws("noconcat")||ws("testing");po.previewMessage="You're previewing some new accessibility features.";po.previewFeedbackUrl="mailto:feedback@desmos.com";var AB=location&&location.hostname==="preview.desmos.com";po.previewMode=ws("previewMode")||AB;Vt("lockViewport");Vt("authorFeatures");Vt("degreeMode");Vt("clearIntoDegreeMode");Vt("plaidMode");Vt("wireframe");Vt("editOnWeb");Vt("crossOriginSaveTest");Vt("showResetButtonOnGraphpaper");Vt("transparentBackground");Vt("forceLogModeRegressions");Qi("links");Qi("trace");Qi("zoomFit");Vt("expressionsCollapsed");Vt("invertedColors");Vt("projectorMode");Qi("images");Qi("folders");Qi("settingsMenu");Qi("expressionsTopbar");Qi("zoomButtons");Qi("keypad");Qi("graphpaper");Qi("expressions");Qi("branding");Qi("pointsOfInterest");Qi("plotSingleVariableImplicitEquations");Qi("plotImplicits");Qi("plotInequalities");Qi("notes");Qi("sliders");Vt("pauseWhenOffscreen");Vt("worksheetSVG");Qi("brailleControls");Vt("audioTraceKeypad");Vt("audioTraceSimult");Qi("audio");Vt("sciKeypad");Vt("4fnKeypad");Vt("ans");ws("braille")&&(po.braille=!0);Qi("qwertyKeyboard");Vt("restrictedFunctions");Vt("forceEnableGeometryFunctions");Qi("functionDefinition");Vt("singleExpression");Vt("restrictedEditing");Vt("replaceCommaWith10Exp");Vt("replaceRoundWithReciprocal");ws("typingAsteriskWritesTimesSymbol")&&(po.typingAsteriskWritesTimesSymbol=!0);Qi("substitutions");Vt("intervalComprehensions");Qi("logScales");Qi("labels");Qi("distributions");po["4fnKeypad"]?Vt("decimalToFraction"):Qi("decimalToFraction");Vt("translucentSurfaces");Vt("3d");Vt("disableWorkerOnZoom");Vt("disableLighting");ws("exponentButtonForSquareRoot")?po.additionalFunctions=["exponent"]:Ia.additionalFunctions&&typeof Ia.additionalFunctions=="string"&&(po.additionalFunctions=Ia.additionalFunctions.split(","));ws("actions")?po.actions=!0:ws("noactions")?po.actions=!1:ws("clickableObjects")&&(po.actions=!0);function uo(t){return po[t]}function SA(){return __dcg_shared_module_exports__['l'](po)}function wi(t,e){var i=/^\s*(\-|\+)?([0-9]+(\.[0-9]+)?)\s*$/;if(i.test(t))return parseFloat(t);var r=Object.create(__dcg_shared_module_exports__['hb']);return r.trigAngleMultiplier=new __dcg_shared_module_exports__['ta'](e?Math.PI/180:1),+__dcg_shared_module_exports__['kc'](t).tryGetConcreteTree(__dcg_shared_module_exports__['ib'],r).asValue()}function Ti(t,e){if(!isFinite(t))return t;if(!isFinite(e))return e;var i=__dcg_shared_module_exports__['ma'](t,e);if(t>0!=e>0||t===0||e===0)return 0;var r=t>0?1:-1,o=Math.abs(t).toExponential().split("e"),n=Math.abs(e).toExponential().split("e"),a=o[0],s=n[0],l=o[1],c=n[1];if(c!==l)return r*Math.pow(10,Math.max(parseFloat(l),parseFloat(c)));if(a[0]!==s[0])return parseFloat(i.toPrecision(1));for(var p=1,u=2;u<Math.min(a.length,s.length)&&(p++,a[u]===s[u]);u++);return parseFloat(i.toPrecision(p))}var EA={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function a0(t){let e=[],i=t.toLowerCase();if(i.slice(0,3)==="rgb")try{e=i.replace(/[^\d,]/g,"").split(",").slice(0,3).map(function(o){return parseInt(o,10)})}catch(o){n0(t)}else if(i[0]==="#"){var r=/^#?([a-f\d])([a-f\d])([a-f\d])$/;i=i.replace(r,function(o,n,a,s){return n+n+a+a+s+s});try{e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/.exec(i).slice(1).map(function(o){return parseInt(o,16)})}catch(o){n0(t)}}else e=EA[i];return VB(e)||n0(t),{R:e[0],G:e[1],B:e[2]}}function VB(t){return!__dcg_shared_module_exports__['Ta'](t)||t.length!==3?!1:__dcg_shared_module_exports__['xa'](t,function(e){return Number.isInteger(e)&&e>=0&&e<=255})}function n0(t){throw new Error("Invalid color string: "+t)}function DA(t){var e=t.R/255,i=t.G/255,r=t.B/255,o=[];return o[0]=.49*e+.31*i+.2*r,o[1]=.17697*e+.8124*i+.01063*r,o[2]=.01*i+.99*r,o=__dcg_shared_module_exports__['va'](o,function(n){return n/.17697}),{X:o[0],Y:o[1],Z:o[2]}}function kA(t){var e=95.047,i=100,r=108.883,o=t.X,n=t.Y,a=t.Z,s=[];return s[0]=116*Ym(n/i)-16,s[1]=500*(Ym(o/e)-Ym(n/i)),s[2]=200*(Ym(n/i)-Ym(a/r)),{L:s[0],a:s[1],b:s[2]}}function Ym(t){var e=.20689655172413793;return t>Math.pow(e,3)?Math.pow(t,1/3):t/(3*e*e)+4/29}function LB(t,e){var i=1,r=.045,o=.015,n=1,a=1,s=1,l=t.L,c=t.a,p=t.b,u=e.L,g=e.a,m=e.b,w=l-u,C=Math.sqrt(c*c+p*p),S=Math.sqrt(g*g+m*m),k=C-S,M=c-g,I=p-m,E=Math.sqrt(M*M+I*I-k*k),T=1+r*C,A=1+o*C,G=w/(i*s),_=k/(n*T),P=E/(a*A);return Math.sqrt(G*G+_*_+P*P)}function PB(t,e){var i=kA(DA(a0(t))),r=kA(DA(a0(e)));return LB(i,r)}function IA(t,e){var i=__dcg_shared_module_exports__['va'](e,function(o){return PB(t,o)}),r=__dcg_shared_module_exports__['Ca'](i);return e[i.indexOf(r)]}function OB({R:t,G:e,B:i}){return .2126729*(t/255)**2.4+.7151522*(e/255)**2.4+.072175*(i/255)**2.4}var s0=.342;function l0(t,e=!1,i=s0){if(typeof t!="string"||!t)return!1;try{let r=a0(t);return OB(r)>i?!e:e}catch(r){return!1}}function zx(t,e){var i=t.cachedViewState;return e.stripDefaults?__dcg_shared_module_exports__['Zc'](i):i}function _B(t){t.cachedViewState={type:t.type,id:t.id,title:t.title,hidden:t.hidden,readonly:t.readonly,collapsed:t.collapsed,secret:t.secret}}function FB(t){t.cachedUndoRedoDiffState=t.cachedViewState,t.cachedUndoRedoFullState=t.cachedViewState}function MA(t,e){let i=__dcg_shared_module_exports__['l'](__dcg_shared_module_exports__['Yc'](t));return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},i),gl(e)),{cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},cachedViewState:{}})}function GA(t){RB(t),ml(t),_B(t),FB(t)}function RB(t){var e=t.controller,i=e.getAllSelectedItems();t.collapsedChildIsSelected=t.collapsed&&__dcg_shared_module_exports__['ya'](i,r=>r.type!=="folder"&&r.folderId===t.id)}var NB={id:!1,type:!1,hidden:!0,secret:!0,collapsed:!0,title:!0,readonly:!0,disableGraphInteractions:!0};function AA(t,e){__dcg_shared_module_exports__['Tc']({from:e,to:t,props:NB})}function eh(t,e){t.collapsed=e}function VA(t,e){t.title=e}function LA(t,e){t.hidden=e}function OA(t,e){var i=__dcg_shared_module_exports__['tb'](t),r=__dcg_shared_module_exports__['tb'](e);if(__dcg_shared_module_exports__['ra'](i.n/i.d,t)&&__dcg_shared_module_exports__['ra'](r.n/r.d,e)){var o=__dcg_shared_module_exports__['vb'](i.d,r.d),n=i.n*(o/i.d),a=r.n*(o/r.d),s=a-n;return{nstart:n,nstep:s,lcm:o}}}var _A={folderId:"",secret:!1,readonly:!1},Ux={latex:"",color:"",hidden:!1,values:[],points:!0,lines:!1,dragMode:"NONE",pointStyle:"POINT",lineStyle:"SOLID",colorLatex:"",lineOpacity:"",lineWidth:"",pointOpacity:"",pointSize:"",disableGraphInteractions:!1};function Hx(t){let e=(t.columns||[]).map(function(i){return __dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},Ux),i)});return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},_A),t),{columns:e})}function FA(t){return t=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t),{columns:t.columns.map(function(e){return __dcg_shared_module_exports__['Qc'](Ux,e)})}),__dcg_shared_module_exports__['Qc'](_A,t)}function Wx(t){return{type:"table",id:t.id,columns:t.columns.map(function(e){return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},e),{tableId:t.id})})}}function KB(t){return __dcg_shared_module_exports__['mb'](t)!==null}var ih=KB;function qB(t){return isFinite(t)?__dcg_shared_module_exports__['bb'](t,{digits:8,bigCutoff:1e6,smallCutoff:.001}):"\\mathrm{undefined}"}function zB(t,e,i){let r=t.columnModels[e];r.error=i.error,r.discrete=i.discrete,r.disabled=i.dependent,r.draggable=!i.error&&!i.dependent,r.packedErrors=[],r.computedValues=[];let o=i.values;for(let n=o.length-1;n>=0;n--){let a=o[n];typeof a=="number"?r.computedValues[n]=qB(a):(r.computedValues[n]="",r.packedErrors[n]=a)}}function NA(t){let e=Cn(t);if(!e)return;let i=Ep(t);if(!i){t.isExpanded||rh(t,!0);return}e.row>=i.min&&e.row<i.max&&rh(t,!0)}function Ep(t){if(t.isExpanded)return;let e=ja(t);if(!(e<30))return{min:8,max:e-4}}function BA(t,e){let i=t.columnModels[e];return{values:i.values.slice(),dragMode:i.dragMode,hidden:i.hidden,id:i.id,color:i.color,points:i.points,lines:i.lines,pointStyle:i.pointStyle,lineStyle:i.lineStyle,latex:i.latex,colorLatex:i.colorLatex,lineOpacity:i.lineOpacity,lineWidth:i.lineWidth,pointSize:i.pointSize,pointOpacity:i.pointOpacity,disableGraphInteractions:i.disableGraphInteractions}}var UB=0;function HB(){return"table_guid_"+UB++}function WB(t,e,i){t.columnModels[e].values.splice(i,0,"")}function $B(t,e,i){t.columnModels[e].values.splice(i,1)}function KA(t,e,i){let{color:r}=i;(!r||!ih(r))&&(r=t.controller.getNextColor());let o=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},i),{type:"table-column",guid:HB(),index:e,error:void 0,table:t,color:r,packedErrors:[],computedValues:[],discrete:void 0,shouldGraph:void 0,disabled:void 0,draggable:void 0});return e===0&&(o.hidden=!0),o}function Xm(t,e){var i=t.table.formula;if(!i)return!1;var r=i.column_data[t.index];return r?!!r[e]:!1}function qA(t){return Xm(t,"color_latex_valid")}function zA(t){return Xm(t,"line_opacity_valid")}function UA(t){return Xm(t,"line_width_valid")}function HA(t){return Xm(t,"point_size_valid")}function WA(t){return Xm(t,"point_opacity_valid")}function $A(t){var e=t.table.formula;if(e){var i=e.column_data[t.index];if(i)return i.color_latex_value}}function jA(t){t.draggingOnGraphpaper?t.preTransientState||(t.preTransientState={columns:oh(t,{stripDefaults:!1}).columns}):delete t.preTransientState,ml(t);let e=Bn(t);var i=e&&e.hidden;__dcg_shared_module_exports__['ua'](t.columnModels,function(r){r.shouldGraph=!i&&!r.hidden&&!t.controller.is3dProduct()}),YB(t),JB(t),jB(t)}function ja(t){let e=2,i,r=Cn(t);return r&&r.row>e&&(e=r.row),t.columnModels.forEach(o=>{i=o.disabled?o.computedValues.length:o.values.length+1,i>e&&(e=i)}),e}function Qm(t){return t.columnModels.length}function YA(t,e){t.formula=e;for(let r=0;r<e.column_data.length&&r<Qm(t);r++){let o=e.column_data[r];zB(t,r,o)}let i=t.columnModels[t.columnModels.length-1];i.disabled=!0,i.error=void 0}function c0(t,e){for(let i=0;i<t.columnModels.length;i++)WB(t,i,e)}function JA(t,e){let i=Ep(t);i&&e===i.max-1&&rh(t,!0);for(var r=0;r<t.columnModels.length;r++)$B(t,r,e),r>0&&hV(t.columnModels[r])}function $x(t,e){let i={id:t.controller.generateId(),latex:e?e.latex:"",color:t.controller.getNextColor()},r=e?e.columnIndex:t.columnModels.length,o=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},Ux),i),{values:[]});var n=KA(t,r,o);t.columnModels.splice(r,0,n);for(var a=r+1;a<t.columnModels.length;a++)t.columnModels[a].index=a}function XA(t,e){t.columnModels.splice(e,1);for(var i=e;i<t.columnModels.length;i++)t.columnModels[i].index=i}function QA(t,e){var i,r=t.columnModels.length,o=[];for(i=0;i<r;i++)o.push("");var n=t.columnModels[0].values;if(e>1){var a=t.controller.isDegreeMode(),s=wi(n[0],a),l=wi(n[1],a);if(isFinite(s)&&isFinite(l)){var c=OA(s,l);if(c){var p=c.nstart,u=p/c.lcm;for(i=0;i<e;i++){var g=wi(n[i],a);if(!__dcg_shared_module_exports__['ra'](g,u))return o;p+=c.nstep,u=p/c.lcm}(""+s).length<8&&(""+l).length<8?o[0]=""+u:o[0]="\\frac{"+p+"}{"+c.lcm+"}"}}}return o}function jx(t,e){for(let o=0;o<t.columnModels.length;o++){let n=t.columnModels[o],a={cellLocation:{column:o,row:0}};e(n.latex,"tableHeader",a),e(n.colorLatex,"tableColumnColorLatex",a),e(n.pointSize,"tableColumnPointSize",a),e(n.pointOpacity,"tableColumnPointOpacity",a),e(n.lineWidth,"tableColumnLineWidth",a),e(n.lineOpacity,"tableColumnLineOpacity",a);for(var i=t.columnModels[o],r=0;r<i.values.length;r++)i.values[r]&&e(i.values[r],"tableCellValue",{cellLocation:{column:o,row:r+1}})}}function jB(t){let e=Wx({type:"table",id:t.id,secret:t.secret,readonly:t.readonly,folderId:t.folderId,columns:t.columnModels.map(function(r){return BA(t,r.index)})});for(var i=0;i<e.columns.length;i++)e.columns[i].hidden=!t.columnModels[i].shouldGraph;t.cachedParsableState=e}function ZA(t){return t.slice(0,t.length-1)}function oh(t,e){let i=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.cachedViewState),{columns:ZA(t.cachedViewState.columns)});return e.stripDefaults?FA(i):i}function YB(t){var e=t.columnModels.map(function(i,r){return BA(t,r)});t.cachedViewState={id:t.id,type:t.type,folderId:t.folderId,columns:e,secret:t.secret,readonly:t.readonly}}function d0(t,e){t.draggingOnGraphpaper=e}function JB(t){let e=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.cachedViewState),{columns:ZA(t.cachedViewState.columns)});t.cachedUndoRedoFullState=e,t.preTransientState&&(e=__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},e),t.preTransientState)),t.cachedUndoRedoDiffState=e}var XB={id:!1,type:!1,columns:!1,folderId:!0,secret:!0,readonly:!0,disableGraphInteractions:!0};function eV(t,e){__dcg_shared_module_exports__['Tc']({from:e,to:t,props:XB}),iV(t,e.columns)}function tV(t,e){let i=__dcg_shared_module_exports__['l'](Hx(t)),r=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},i),gl(e)),{columnModels:void 0,formula:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},isExpanded:!1});return iV(r,i.columns),r}function iV(t,e){t.columnModels=e.map(function(i,r){return KA(t,r,i)}),$x(t)}var RA=["x","y","z","u","v","w"];function p0(t,e,i){for(var r=[],o=Math.min(e.length,RA.length),n=0;n<o;n++)r.push({id:i.generateId(),latex:__dcg_shared_module_exports__['cb'](RA[n]+"_"+t),values:e[n],color:i.getNextColor(),hidden:!1,points:!0,lines:!1,dragMode:"NONE",pointStyle:"POINT",lineStyle:"SOLID",colorLatex:"",lineWidth:"",lineOpacity:"",pointOpacity:"",pointSize:"",disableGraphInteractions:!1});return{id:i.generateId(),type:"table",folderId:"",secret:!1,readonly:!1,columns:r}}function rV(t,e){let i=oh(t,{stripDefaults:!1});if(!i.columns||!e.columns)return e;for(var r=0;r<e.columns.length;r++){var o=i.columns[r],n=e.columns[r];if(o)for(var a in o)o.hasOwnProperty(a)&&(n.hasOwnProperty(a)||(n[a]=o[a]))}return e}function Cn(t){if(!t)return;let e=t.controller.getFocusLocation();if(e&&e.type==="table"&&e.id===t.id)return e.location}function jr(t,e){for(var i=0;i<t.columnModels.length;i++){let r=t.columnModels[i];if(r.id===e)return r}}function u0(t,e,i){let r=jr(t,e);r&&(r.points=i,i||(r.dragMode="NONE"))}function oV(t,e,i){let r=jr(t,e);r&&(r.pointStyle=i)}function nV(t,e,i){let r=jr(t,e);r&&(r.lines=i)}function aV(t,e,i){let r=jr(t,e);r&&(r.lineStyle=i)}function Yx(t,e,i){let r=jr(t,e);r&&(r.lineWidth=i)}function Jx(t,e,i){let r=jr(t,e);r&&(r.lineOpacity=i)}function Xx(t,e,i){let r=jr(t,e);r&&(r.pointSize=i)}function Qx(t,e,i){let r=jr(t,e);r&&(r.pointOpacity=i)}function sV(t,e,i){let r=jr(t,e);if(r)if(i.type==="inert")r.disableGraphInteractions=i.disableGraphInteractions,i.disableGraphInteractions&&(r.dragMode="NONE");else{let o=i.dragMode;r.dragMode=o,o!=="NONE"&&!r.points&&(r.points=!0),o!=="NONE"&&(r.disableGraphInteractions=!1)}}function lV(t,e,i){sV(t,e,{type:"draggable",dragMode:i})}function cV(t,e,i){let r=jr(t,e);!r||!ih(i)||(r.color=i,r.colorLatex="")}function Zx(t,e,i){let r=jr(t,e);r&&(r.colorLatex=i)}function rh(t,e){t.isExpanded=e}function dV(t,e,i){let r=jr(t,e);r&&(r.hidden=i,i&&uV(t))}function pV(t,e,i){let r=jr(t,e);r&&(r.boundingBoxes=i,uV(t))}function uV(t){let e=[];t.columnModels.forEach(i=>{i.boundingBoxes&&!i.hidden&&(e=e.concat(i.boundingBoxes))}),t.boundingBoxes=e}function ew(t,e){let i=jr(t,e);return i?!i.points&&!i.lines:!0}function fc(t,e,i){if(e.row===0){let n=t.columnModels[e.column].id,a=jr(t,n);if(!a)return;a.latex=i,e.column>=t.columnModels.length-1&&$x(t);return}for(var r=t.columnModels[e.column],o=r.values.length;o<e.row-1;o++)r.values[o]="";t.columnModels[r.index].values[e.row-1]=i,e.column>0&&hV(t.columnModels[r.index])}function hV(t){for(;t.values.length>0&&!t.values[t.values.length-1];)t.values.pop()}function gV(t,e){return!!t.columnModels[e.column]&&e.row>=0}function mV(t){let e;if(t.values){for(e of t.values)if(e!=="")return!1}if(t.computedValues){for(e of t.computedValues)if(e!=="")return!1}return!0}function fV(t,e){sV(t.table,t.id,{type:"inert",disableGraphInteractions:e})}function tw(t,e,i){let r=t.columnModels[i];return r.disabled?r.computedValues[e]||"":r.values[e]||""}function bV(t){let e=ja(t),i=Qm(t);for(let r=0;r<i;r++)if(tw(t,e-1,r)!=="")return!1;return!0}var yV={folderId:"",text:"",secret:!1,readonly:!1};function xV(t){return __dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},yV),t)}function wV(t){return __dcg_shared_module_exports__['Qc'](yV,t)}function vV(t,e){t.text=e}function CV(t,e){let i=__dcg_shared_module_exports__['l'](xV(t));return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},i),gl(e)),{cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},cachedViewState:{}})}function SV(t){ml(t),ZB(t),eK(t)}var QB={id:!1,type:!1,folderId:!0,text:!0,secret:!0,readonly:!0};function EV(t,e){__dcg_shared_module_exports__['Tc']({from:e,to:t,props:QB})}function iw(t,e){var i=t.cachedViewState;return e.stripDefaults?wV(i):i}function ZB(t){t.cachedViewState={type:t.type,id:t.id,folderId:t.folderId,text:t.text,secret:t.secret,readonly:t.readonly}}function eK(t){t.cachedUndoRedoDiffState=t.cachedViewState,t.cachedUndoRedoFullState=t.cachedViewState}var tK=0;function iK(){return"helper_item_"+tK++}function kV(t){return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t),{formula:__dcg_shared_module_exports__['rd'](),guid:iK(),cachedParsableState:{type:"statement",id:t.id,latex:t.latex,shouldGraph:!1}})}function IV(t,e,i){var l;e.formula=i;let r=e.proxy,o={numericValue:r.numericValue,listValue:r.listValue},{constant_value:n,zero_values:a}=i,s=n!=null?n:(l=(a||[])[0])==null?void 0:l.val;r.numericValue=__dcg_shared_module_exports__['Va'](s)?s:NaN,r.listValue=__dcg_shared_module_exports__['Ta'](s)&&__dcg_shared_module_exports__['xa'](s,__dcg_shared_module_exports__['Va'])?s.slice(0):void 0,__dcg_shared_module_exports__['Ra'](r.numericValue,o.numericValue)||t.runAfterDispatch(()=>{r.notifyPropertyChange("numericValue")}),__dcg_shared_module_exports__['Ra'](r.listValue,o.listValue)||t.runAfterDispatch(()=>{r.notifyPropertyChange("listValue")})}Tt();var h0={enabled:!1,latex:"",hoveredImage:"",depressedImage:""},rw={center:"\\left(0,0\\right)",angle:"0",width:"10",height:"10",opacity:"1",clickableInfo:h0,description:"",draggable:!1},TV=__dcg_shared_module_exports__['a']({folderId:"",hidden:!1,secret:!1,readonly:!1,disableGraphInteractions:!1,foreground:!1,name:""},rw);function ow(t){return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},TV),t),{clickableInfo:__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},h0),t.clickableInfo)})}function MV(t){var e=__dcg_shared_module_exports__['Qc'](TV,t),i=__dcg_shared_module_exports__['Rc'](h0,t.clickableInfo);return i===void 0?delete e.clickableInfo:e.clickableInfo=i,e}function g0(t){return __dcg_shared_module_exports__['Vc'](t,rw)}function nw(t){return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({type:"image",id:t.id},g0(t)),{guid:"",index:0,color:"",shouldGraph:t.hidden,showPoints:!1})}function GV(t,e){t.hidden=e}function la(t,e,i){t[e]=i}function AV(t,e){return t[e]}function VV(t,e){t.description=e}function LV(t,e){t.name=e}function sw(t,e){e.type==="inert"?(t.disableGraphInteractions=e.disableGraphInteractions,e.disableGraphInteractions&&(t.draggable=!1,t.clickableInfo=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.clickableInfo),{enabled:!1}))):e.type==="draggable"?(t.draggable=e.draggable,e.draggable&&(t.disableGraphInteractions=!1)):e.type==="clickable"&&(t.clickableInfo=e.clickableInfo,e.clickableInfo.enabled&&(t.disableGraphInteractions=!1))}function m0(t,e){sw(t,{type:"draggable",draggable:e})}function nh(t){if(t.formula){var e=t.formula.center_reference_id,i=t.formula.center_reference_symbol;if(!(!e||!i)){var r=t.controller.getItemModel(e);if(!(!r||r.type!=="expression")&&r.formula.assignment===i&&En(r))return r}}}function nK(t){var e=nh(t);if(!e)return!1;var i=qi(e);return!(!i||i==="NONE")}function vs(t){return!t.draggable||ca(t)?!1:nK(t)}function PV(t){if(!t.formula||!t.formula.center_is_point_literal)return!1;var e=t.formula.move_strategy;if(!e)return!1;var i=e[2],r=e[3],o=i&&i.type!=="none",n=r&&r.type!=="none";return!!(o||n)}function OV(t,e){t.opacity=e}function f0(t,e){t.foreground=e}function _V(t,e){t.image_url=e}function lw(t,e){e(t.opacity,"imageOpacity"),e(t.center,"imageCenter"),e(t.height,"imageHeight"),e(t.width,"imageWidth"),e(t.angle,"imageAngle")}function aK(t){let e=nw(t);e.color=t.color,e.index=t.index,e.guid=t.guid,e.shouldGraph=t.shouldGraph,e.showPoints=t.showPoints,t.cachedParsableState=e}function FV(t){t.draggingOnGraphpaper?t.preTransientState||(t.preTransientState={center:t.center,width:t.width,height:t.height}):delete t.preTransientState,ml(t);let e=Bn(t);t.shouldGraph=e&&e.hidden?!1:!t.hidden,t.showPoints=t.shouldGraph&&Sn(t)&&t.loadStatus==="loaded"&&!vs(t)&&t.controller.isTraceEnabled(),lK(t),cK(t),aK(t)}function RV(t,e){t.formula=e,t.error=sK(t)}function cw(t){return t.formula?t.formula.variables||[]:[]}function sK(t){var e={scale:t.controller.s("graphing-calculator-error-log-axes-image"),center:t.controller.s("graphing-calculator-error-image-invalid-center"),angle:t.controller.s("graphing-calculator-error-image-invalid-angle"),width:t.controller.s("graphing-calculator-error-image-invalid-width"),height:t.controller.s("graphing-calculator-error-image-invalid-height"),opacity:t.controller.s("graphing-calculator-error-image-invalid-opacity")};for(var i in t.formula.errorMap){var r=t.formula.errorMap[i];if(r)return e[i]}}function NV(t,e){return!t.formula||!t.formula.errorMap?!1:!!t.formula.errorMap[e]}function dw(t,e){var i=t.cachedViewState;return e.stripDefaults?MV(i):i}function lK(t){var e=t.cachedViewState.clickableInfo,i=!0,r=!0;if(e&&(e.depressedImage===t.clickableInfo.depressedImage&&(r=!1),e.hoveredImage===t.clickableInfo.hoveredImage&&(i=!1)),i&&(t.hoveredImageObj&&(H(t.hoveredImageObj).off("load"),delete t.hoveredImageObj),t.clickableInfo.hoveredImage)){t.hoveredImageObj=new Image;var o=function(){t.controller.requestRedrawGraph()},n=function(){};aw(t.hoveredImageObj,t.clickableInfo.hoveredImage,o,n)}if(r&&(t.depressedImageObj&&(H(t.depressedImageObj).off("load"),delete t.depressedImageObj),t.clickableInfo.depressedImage)){t.depressedImageObj=new Image;var o=function(){t.controller.requestRedrawGraph()},n=function(){};aw(t.depressedImageObj,t.clickableInfo.depressedImage,o,n)}if(t.cachedViewState.image_url!==t.image_url){H(t.imageObj).off("load"),t.imageObj=new Image;let a=function(){t.controller.dispatch({type:"image-load-success",id:t.id})},s=function(){t.controller.dispatch({type:"image-load-error",id:t.id})},c=t.controller.getGraphSettings().config.cacheRenderedSvgs?{fetchMimeType:{imageModel:t}}:void 0;aw(t.imageObj,t.image_url,a,s,c)}t.cachedViewState=__dcg_shared_module_exports__['a']({type:t.type,id:t.id,folderId:t.folderId,image_url:t.image_url,name:t.name,hidden:t.hidden,foreground:t.foreground,secret:t.secret,readonly:t.readonly,disableGraphInteractions:t.disableGraphInteractions},g0(t))}function b0(t,e){t.draggingOnGraphpaper=e}function cK(t){var e=t.cachedViewState;t.cachedUndoRedoFullState=t.cachedViewState,t.preTransientState&&(e=__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},e),t.preTransientState)),t.cachedUndoRedoDiffState=e}function dK(t){var e=document.createElement("canvas");e.width=2,e.height=2;var i=e.getContext("2d");return i.drawImage(t,0,0,2,2),e.toDataURL()}function aw(t,e,i,r,o={}){H(t).on("load.initial-image-load",function(){var s=t.width,l=t.height;s===1&&l===1?(H(t).off(".initial-image-load"),H(t).on("load",i),t.src=dK(t)):i()}).on("error",r);let n=/^data:/.test(e);n||(t.crossOrigin="anonymous");let{fetchMimeType:a}=o;a?n?(t.src=e,a.imageModel.mimeType=e.substring(5,e.indexOf(";"))):fetch(e).then(s=>{let l=s.headers.get("Content-type");return l&&(a.imageModel.mimeType=l),s.blob()}).then(s=>{let l=URL.createObjectURL(s);t.src=l}):t.src=e}function BV(t,e){let i=__dcg_shared_module_exports__['l'](ow(t));return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},i),gl(e)),{color:__dcg_shared_module_exports__['nd'].BLUE,loadStatus:"loading",failures:0,imageObj:new Image,hoveredImageObj:void 0,depressedImageObj:void 0,mimeType:void 0,shouldGraph:void 0,showPoints:void 0,error:void 0,formula:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{}})}var pK=__dcg_shared_module_exports__['a']({id:!1,type:!1,image_url:!0,name:!0,folderId:!0,hidden:!0,secret:!0,readonly:!0,disableGraphInteractions:!0,foreground:!0},__dcg_shared_module_exports__['Wc'](rw));function KV(t,e){__dcg_shared_module_exports__['Tc']({from:e,to:t,props:pK})}function qV(t){let{controller:e,files:i,id:r}=t,o={errors:[],tokens:[]};for(let n=0;n<i.length;n++){let a=i[n];if(!a.type.match("image/*")){o.errors.push(e.s("graphing-calculator-error-image-invalid-file",{file:a.name}));continue}o.tokens.push(hK({controller:e,file:a,id:r}))}return o}var uK=0;function hK(t){let{controller:e,file:i,id:r}=t,o=""+uK++;return e.getGraphSettings().config.imageUploadCallback(i,(n,a)=>{setTimeout(()=>{if(n)e.dispatch({type:"image-upload-error",token:o,error:n});else{let s=new Image;aw(s,a,function(){var p=s.width,u=s.height,g=Math.max(p,u)/Math.min(p,u);p<u?(u=10,p=Math.round(10*u/g)/10):(p=10,u=Math.round(10*p/g)/10),e.dispatch({type:"image-upload-success",token:o,url:a,width:p+"",height:u+"",name:i.name,id:r})},function(){e.dispatch({type:"image-upload-error",token:o,error:!0})})}})}),o}function pw(t,e){t.loadStatus=e,e==="loaded"&&(t.failures=0),e==="failed"&&(t.failures+=1)}function y0(t){t.imageObj.src=t.imageObj.src,pw(t,"loading")}function uw(t,e,i){sw(t,{type:"clickable",clickableInfo:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.clickableInfo),{[e]:i})})}function zV(t,e){sw(t,{type:"clickable",clickableInfo:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.clickableInfo),{latex:e})})}function Dp(t){var e;return!!(t.clickableInfo.enabled&&t.formula&&((e=t.formula.click_handler)==null?void 0:e.status)==="maybe-valid")}function x0(t,e){sw(t,{type:"inert",disableGraphInteractions:e})}var sh={handlerLatex:"",minStepLatex:"",open:!1,playing:!1};function hw(t){return{type:"ticker",id:t.id,handlerLatex:t.handlerLatex,minStepLatex:t.minStepLatex,shouldGraph:!1}}function UV(t){return __dcg_shared_module_exports__['Rc'](sh,t)}function gw(t){return __dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},sh),t)}var HV="dcg_ticker_guid_internal",mK=HV;function WV(){return w0(sh)}function fK(t){t.cachedParsableState=hw(t)}function $V(t,e){return e.stripDefaults?UV(t.cachedViewState):t.cachedViewState}function jV(t){return t.cachedUndoRedoDiffState}function YV(t){return t.cachedUndoRedoFullState}function bK(t){t.cachedViewState={handlerLatex:t.handlerLatex,minStepLatex:t.minStepLatex,playing:t.playing,open:t.open}}function yK(t){var e=t.cachedViewState;t.cachedUndoRedoDiffState=e,t.cachedUndoRedoFullState=e}function w0(t){let e=gw(t);return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},e),{type:"ticker",guid:HV,id:mK,avgDelta:0,lastTickTime:void 0,cachedViewState:{},cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},filteredBySearch:!1})}function JV(t,e){__dcg_shared_module_exports__['Uc'](e,t)}function XV(t,e){t.formula=e}function QV(t){bK(t),yK(t),fK(t)}function ZV(t,{currentFrameTime:e,previousFrameTime:i}){var a,s;if(!t.playing||((a=t.formula)==null?void 0:a.handler.status)!=="maybe-valid")return!1;if(t.lastTickTime==null||i==null)return!0;if(((s=t.formula)==null?void 0:s.minStep.status)!=="valid")return!1;let r=t.formula.minStep.value,o=t.lastTickTime+r;if(e>=o)return!0;let n=e-i;return o-e<n/2}function eL(t,e){t.lastTickTime=e}function tL(t){if(t.formula)return t.formula.handler.status==="error"?t.formula.handler.error:void 0}function iL(t){if(t.formula)return t.formula.minStep.status==="error"?t.formula.minStep.error:void 0}function Zm(t){var e;return((e=t.formula)==null?void 0:e.variables)||[]}function mw(t,e){e(t.handlerLatex,"tickerHandler"),e(t.minStepLatex,"tickerMinStep")}function xK(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function wK(t){return t.replace(/\\\\right\\(\\*[})\]|])/g,".*\\\\right\\$1").replace(/ ?\\([}\]])/g,".*\\$1")}function nL(t){let e=wK(xK(t));return new RegExp(e)}function vK(t){switch(t.type){case"TokenNode":case"Letter":return!0;case"OperatorName":{for(let e of t.arg.args)if(e.type!=="Letter")return!1;return!0}case"Cmd":{let e=__dcg_shared_module_exports__['hc'][t.val];return e===void 0?!0:e==="Ln"||e==="Log"||e==="Trig"}default:return!1}}function v0(t){let e;try{e=__dcg_shared_module_exports__['dc'](t)}catch(o){return}if(e.args.length===0||e.args.length>2)return;let i=e.args[0];if(!vK(i))return;let r;if(e.args.length>1){let o=e.args[1];if(o.type!=="SupSub")return;let{sup:n,sub:a}=o;if(n!==void 0||a===void 0)return;for(let s of a.args)if(s.type!=="Letter"&&s.type!=="Digit")return;r=a}return{base:i,subscript:r}}function Kn(t){return v0(t)!==void 0}function aL(t){let e=__dcg_shared_module_exports__['dc'](t),i=__dcg_shared_module_exports__['jc'](e);switch(i.type){case"Letter":return i.val;case"Cmd":return i.val;default:return}}function rL(t){return t.replace(/^(\\? )+|(\\? )+$/g,"")}function sL(t){try{let e=__dcg_shared_module_exports__['dc'](t),i=__dcg_shared_module_exports__['jc'](e);if(i.type==="Equals"&&(i=i.args[1]),i.type==="Call"){let r=i.args[1];return r.type==="Seq"?r.args:[r]}return}catch(e){return}}function tf(t){let e=t.indexOf("=");if(e===-1)return;let i=rL(t.slice(0,e));if(Kn(i))return i;try{let r=__dcg_shared_module_exports__['dc'](`${i}=0`),o=__dcg_shared_module_exports__['jc'](r);if(o.type==="Equals"&&__dcg_shared_module_exports__['ic'](o.args[0])){let n=t.indexOf("\\left(");if(n===-1&&(n=t.indexOf("(")),n===-1)return;let a=rL(t.slice(0,n));if(Kn(a))return a}}catch(r){}}function bw(t,e){let i=v0(e);if(i===void 0)return[];let r=[],o;try{o=__dcg_shared_module_exports__['dc'](t)}catch(n){return r}return ef(o,i,r,{wrapInBraces:!1}),r}function Cs(t,e){return bw(t,e).length!==0}function yw(t,e,i){return v0(i)===void 0?t:C0(t,e,i)}function C0(t,e,i){let r=bw(t,e);if(r.length===0)return t;let o="",n=0;for(let a of r){if(o+=t.slice(n,a.base.start),a.wrapInBraces&&(o+="{"),o+=i,n=a.base.end,a.subscript){let s=0,l=0;for(let c=a.subscript.start;c>=0;c--)if(t[c]==="{"&&(s+=1),t[c]==="_"){l=c;break}o+=t.slice(n,l),n=a.subscript.end;for(let c=a.subscript.end;c<t.length&&!(s<=0);c++)t[c]==="}"&&(s-=1,n=c+1)}a.wrapInBraces&&(o+="}")}return o+=t.slice(n,t.length),o}function oL(t,e){if(t.args.length!==e.args.length)return!1;for(let i=0;i<t.args.length;i++){let r=t.args[i],o=e.args[i];if(!(r.type==="Letter"&&o.type==="Letter"&&r.val===o.val)&&!(r.type==="Digit"&&o.type==="Digit"&&r.val===o.val))return!1}return!0}function CK(t,e,i){let r=t.arg.args,o=e.arg.args;if(r.length===o.length){for(let n=0;n<r.length;n++){let a=r[n],s=o[n];if(a.type!=="Digit"||a.type!==s.type||a.val!==s.val)return}i.push({base:e.span,wrapInBraces:!1})}}function ef(t,e,i,{wrapInBraces:r}){let{base:o,subscript:n}=e;for(let a=0;a<t.args.length;a++){let s=t.args[a],l;if(a+1<t.args.length){let c=t.args[a+1];c.type==="SupSub"&&c.sub!==void 0&&(l=c.sub)}switch(s.type){case"Letter":case"Cmd":if(o.type!==s.type||o.val!==s.val)break;n&&l&&oL(n,l)?i.push({base:s.span,subscript:l.span,wrapInBraces:r}):!n&&!l&&i.push({base:s.span,wrapInBraces:r});break;case"OperatorName":{if(o.type!==s.type||o.arg.args.length!==s.arg.args.length)break;let c=!0;for(let p=0;p<o.arg.args.length;p++){let u=o.arg.args[p],g=s.arg.args[p];if(u.type!=="Letter"||g.type!=="Letter"||u.val!==g.val){c=!1;break}}if(!c)break;n&&l&&oL(n,l)?i.push({base:s.span,subscript:l.span,wrapInBraces:r}):!n&&!l&&i.push({base:s.span,wrapInBraces:r});break}case"Digit":case"Symbol":case"EscapedSymbol":break;case"LeftRight":case"Sqrt":ef(s.arg,e,i,{wrapInBraces:!1});break;case"Frac":ef(s.num,e,i,{wrapInBraces:!1}),ef(s.den,e,i,{wrapInBraces:!1});break;case"SupSub":if(s.sup){let c=!1;for(let p=s.sup.span.start;p>=0;p--){let u=s.sup.span.input[p];if(u==="^")break;u==="{"&&(c=!0)}ef(s.sup,e,i,{wrapInBraces:!c})}break;case"TokenNode":{if(o.type!==s.type)break;CK(o,s,i)}break;default:{let c=s;throw new Error("Unexpected token type: "+c.type)}}}}var lh="dcg_geometry_toolbar_",lL={selection:{visible:!0},"box-selection":{visible:!0},"expression-edit":{visible:!0},point:{visible:!1},line:{visible:!1},segment:{visible:!1},ray:{visible:!1},vector:{visible:!1},circle:{visible:!1},arc:{visible:!1},parallel:{visible:!1},perpendicular:{visible:!1},midpoint:{visible:!1},polygon:{visible:!1},compass:{visible:!1},angle:{visible:!1},directedangle:{visible:!1},reflect:{visible:!1},translate:{visible:!1},rotate:{visible:!1},dilate:{visible:!1}};function cL(t){if(t.toolbar!=="all"){if(t.toolbar==="custom"){let e=__dcg_shared_module_exports__['Rc'](lL,t.toolbarState),i={toolbar:"custom"};return e!==void 0&&(i.toolbarState=e),i}return t}}function dL(t){return t===void 0?{toolbar:"all"}:t.toolbar==="custom"?{toolbar:"custom",toolbarState:__dcg_shared_module_exports__['Sc'](lL,t.toolbarState)}:t}function pL(t,e){return e.stripDefaults?cL(t.cachedViewState):t.cachedViewState}function S0(t){return t.cachedUndoRedoDiffState}function SK(t){t.toolbar==="custom"?t.cachedViewState={toolbar:"custom",toolbarState:__dcg_shared_module_exports__['l'](t.toolbarState)}:t.cachedViewState={toolbar:t.toolbar}}function uL(t){SK(t),EK(t),t.__cachedToolbarState=void 0}function hL(t){let e=[];for(let i in t.toolbarState){let r=i,o=t.toolbarState[r];o.visible&&o.disabledLatex&&e.push({type:"geometry-toolbar-predicate",id:`${lh}${r}`,latex:o.disabledLatex})}return e}function gL(t,e){if(!t.toolbarState[e].disabledLatex)return;let i=t.formulas[e];if(i!=null&&i.error)return{key:"shared-calculator-error-custom-toolbar-not-condition",vars:{}}}function mL(t,e,i){let r=e.replace(lh,"");r in t.toolbarState&&(t.formulas[r]=i)}function EK(t){var e=t.cachedViewState;t.cachedUndoRedoDiffState=e,t.cachedUndoRedoFullState=e}function xw(t){let e=dL(t);return{toolbar:e.toolbar,toolbarState:e.toolbar==="custom"?e.toolbarState:DK(),formulas:{},selectedToolForGroup:{},__cachedToolbarState:void 0,cachedViewState:e,cachedUndoRedoDiffState:e,cachedUndoRedoFullState:e}}function fL(){return xw(void 0)}function DK(){return{selection:{visible:!0},"box-selection":{visible:!0},"expression-edit":{visible:!0},point:{visible:!0},line:{visible:!0},segment:{visible:!0},ray:{visible:!0},vector:{visible:!1},circle:{visible:!0},arc:{visible:!1},parallel:{visible:!1},perpendicular:{visible:!1},midpoint:{visible:!1},polygon:{visible:!1},compass:{visible:!1},angle:{visible:!1},directedangle:{visible:!1},reflect:{visible:!1},translate:{visible:!1},rotate:{visible:!1},dilate:{visible:!1}}}function bL(t,e){t.toolbar=e,t.__cachedToolbarState=void 0}function yL(t,e,i){let{groups:r,items:o}=vw(t,i);for(let n of r){let a=o[n];a!=null&&a.dropdown&&a.dropdown.indexOf(e)!==-1?t.selectedToolForGroup[a.group]=e:a!=null&&a.dropdown&&kK(a.current)&&(t.selectedToolForGroup[a.group]=a.dropdown[0])}t.__cachedToolbarState=void 0}function ww(t,e,i){t.toolbarState[e]={visible:i.visible,disabledLatex:i.disabledLatex},t.__cachedToolbarState=void 0}function kp(t,e){return t.toolbar==="all"?!0:t.toolbar==="none"?!1:t.toolbarState[e].visible}function ch(t,e){if(t.toolbar==="all")return!0;let i=kp(t,e);if(i&&t.formulas[e]){let r=t.formulas[e],o=r==null?void 0:r.constant_value;return typeof o=="number"?!o:!0}return i||e==="selection"}function vw(t,e){var o;if(((o=t.__cachedToolbarState)==null?void 0:o.authorMode)===e)return t.__cachedToolbarState.state;let i={};for(let n of E0())if(n.dropdown){let a=n.dropdown.filter(s=>e||kp(t,s));if(a.sort((s,l)=>{let c=ch(t,s),p=ch(t,l),u=kp(t,s),g=kp(t,l);return(c?0:u?1:2)-(p?0:g?1:2)}),a.length>0){let s=t.selectedToolForGroup[n.group];(!s||a.indexOf(s)===-1)&&(s=a[0]),!e&&!ch(t,s)&&(s=a.find(l=>ch(t,l))||a[0]),i[n.group]={group:n.group,current:s,dropdown:a.length>1?a:void 0}}}else(e||kp(t,n.current))&&(i[n.group]=n);let r=Object.keys(i);t.__cachedToolbarState={authorMode:e,state:{groups:r,items:i}};for(let n of r){let a=i[n];t.selectedToolForGroup[n]=a==null?void 0:a.current}return{groups:r,items:i}}function E0(){return[{group:"selection",current:"selection",dropdown:["selection","box-selection"]},{group:"point",current:"point",dropdown:["point","midpoint"]},{group:"line",current:"segment",dropdown:["segment","line","ray","vector","parallel","perpendicular"]},{group:"circle",current:"circle",dropdown:["circle","compass","arc"]},{group:"angle",current:"angle",dropdown:["angle","directedangle"]},{group:"polygon",current:"polygon"}]}function kK(t){switch(t){case"box-selection":case"midpoint":case"parallel":case"perpendicular":case"compass":case"arc":return!0;default:return!1}}var hh="**dcg_geo_expression_edit_tool_preview**";function xL(t){return{controller:t,__itemModelArray:[],__itemIdToModel:{},__helperIdToModel:{},__toolPreviewIdToModel:{},__anyDependsOnRandomSeed:!1,__anyUnmutedTones:!1,__anyTones:!1,__anyIsAction:!1,selectedItemMap:{},drawOrder:[],colorIdx:0,expressionAnalysis:{},nextDisplayIndex:1,ticker:WV()}}function wL(t){for(var e=0;e<t.__itemModelArray.length;e++){var i=t.__itemModelArray[e];if(i.type==="image"&&i.loadStatus==="loading")return!0}return!1}function vL(t){var e=__dcg_shared_module_exports__['wa'](__dcg_shared_module_exports__['Pa'](t.controller.getColors()),r=>r!=__dcg_shared_module_exports__['nd'].ORANGE),i=e[t.colorIdx];return t.colorIdx=(t.colorIdx+1)%e.length,i}function gh(t,e){return t.__itemModelArray[e]}function mh(t){for(let e=0;e<t.__itemModelArray.length;e++){let i=t.__itemModelArray[e];if(fh(i))return i}}function Sw(t){for(let e=t.__itemModelArray.length-1;e>=0;e--){let i=t.__itemModelArray[e];if(fh(i))return i}}function Ip(t,e){var i;do{if(e--,e===-1)return;i=gh(t,e)}while(i&&!fh(i));return i}function Tp(t,e){var i,r=nf(t);do{if(e++,e===r)return;i=gh(t,e)}while(i&&!fh(i));return i}function Bn(t){if(t.type!=="folder"&&t.folderId){let e=t.controller.getListModel(),i=bl(e,t.folderId);if(i&&i.type==="folder")return i}}function CL(t,e){let i=bl(t,e);if(!i||i.type!=="folder")return 0;let r=0,o=t.__itemModelArray.length;for(var n=i.index+1;n<o;n++){let a=t.__itemModelArray[n];if(a.type==="folder"||a.folderId!==e)break;r+=1}return r}function SL(t,e){let i=bl(t,e);if(!i||i.type!=="folder")return[];let r=[],o=t.__itemModelArray.length;for(var n=i.index+1;n<o;n++){let a=t.__itemModelArray[n];if(a.type==="folder"||a.folderId!==e)break;r.push(a.id)}return r}function EL(t,e){let i=[],r=bl(t,e);if(!r||r.type!=="folder")return i;let o=t.__itemModelArray.length;for(let n=r.index+1;n<o;n++){let a=t.__itemModelArray[n];if(a.type==="folder"||a.folderId!==e)break;i.push(a)}return i}function DL(t){return!!(t&&t.readonly)}function rf(t){if(!t)return!1;if(t.secret)return!0;let e=Bn(t);return!!(e&&e.secret&&e.id!==__dcg_shared_module_exports__['_c'])}function fh(t){return!I0(t)}function kL(t){return t.id===__dcg_shared_module_exports__['_c']||t.type!=="folder"&&t.folderId===__dcg_shared_module_exports__['_c']}function I0(t){if(!t||t.filteredBySearch||kL(t))return!0;if(t.controller.isItemBeingDragged(t.id))return!!t.controller.shouldRenderDraggedItemAsToken();if(!t.controller.shouldShowAuthorFeatures()&&rf(t))return!0;let i=Bn(t);return!!(i&&i.collapsed&&!t.controller.getExpressionSearchStr())}function T0(t){return t.__itemModelArray}function IL(t){return __dcg_shared_module_exports__['Pa'](t.__helperIdToModel)}function bh(t){return __dcg_shared_module_exports__['Pa'](t.__toolPreviewIdToModel)}function yh(t,e){for(var i=0;i<t.__itemModelArray.length;i++){var r=t.__itemModelArray[i];ph(r,e)}for(var o in t.__toolPreviewIdToModel)ph(t.__toolPreviewIdToModel[o],e);if(t.ticker.open&&(e(t.ticker.handlerLatex,{type:"item",location:"tickerHandler",item:t.ticker}),e(t.ticker.minStepLatex,{type:"item",location:"tickerMinStep",item:t.ticker})),t.controller.isGeometry()){let a=t.controller.getGeometryToolbarModel().toolbarState;for(let s in a){let l=s,c=a[l];c.visible&&c.disabledLatex&&e(c.disabledLatex,{type:"geometry-toolbar",tool:l})}}}function ph(t,e){switch(t.type){case"expression":Lw(t,(r,o)=>e(r,{type:"item",location:o,item:t}));break;case"table":jx(t,(r,o,n)=>e(r,__dcg_shared_module_exports__['a']({type:"item",location:o,item:t},n)));break;case"image":lw(t,(r,o)=>e(r,{type:"item",location:o,item:t}));break;case"ticker":mw(t,(r,o)=>e(r,{type:"item",location:o,item:t}));break;case"folder":case"text":break;default:return t}}function dh(t,e){return!!t.replace(/([_^])([a-z0-9])/gi,"$1{$2}").match(e)}function TL(t,e){if(!Kn(e))return!1;let r=!1;return yh(t,o=>{Cs(o,e)&&(r=!0)}),r}function ML(t,e){let i=0,r=Kn(e);t.ticker.filteredBySearch=t.ticker.open&&!Cs(t.ticker.handlerLatex,e)&&!Cs(t.ticker.minStepLatex,e);for(let o of t.__itemModelArray){if(!r){o.filteredBySearch=!1,i++;continue}switch(o.filteredBySearch=!0,o.type){case"expression":Lw(o,s=>{Cs(s,e)&&(o.filteredBySearch=!1,i++)});let n=Es(o);o.label&&n&&o.label.match(Cw(e))&&(o.filteredBySearch=!1,i++);break;case"table":jx(o,s=>{Cs(s,e)&&(o.filteredBySearch=!1,i++)});break;case"image":lw(o,s=>{Cs(s,e)&&(o.filteredBySearch=!1,i++)});break;case"folder":case"text":break;default:return o}!o.filteredBySearch&&o.type!=="folder"&&o.folderId&&(t.__itemIdToModel[o.folderId].filteredBySearch=!1,i++)}return i}function GL(t,e){let i=0,r=nL(e);t.ticker.filteredBySearch=t.ticker.open&&!dh(t.ticker.handlerLatex,r)&&!dh(t.ticker.minStepLatex,r);for(var o=0;o<t.__itemModelArray.length;o++){if(!e){t.__itemModelArray[o].filteredBySearch=!1;continue}var n=t.__itemModelArray[o];switch(n.filteredBySearch=!0,n.type){case"expression":Lw(n,l=>{dh(l,r)&&(n.filteredBySearch=!1,i++)});let a=Es(n);n.label&&a&&(e==="\\operatorname{label}"||e.length>1&&"label".indexOf(e)===0||dh(n.label,r))&&(n.filteredBySearch=!1,i++);break;case"table":jx(n,l=>{dh(l,r)&&(n.filteredBySearch=!1,i++)});break;case"image":e==="\\operatorname{image}"||e.length>1&&"image".indexOf(e)===0?(n.filteredBySearch=!1,i++):lw(n,l=>{dh(l,r)&&(n.filteredBySearch=!1,i++)});break;case"folder":n.title&&n.title.indexOf(e)>=0&&(n.filteredBySearch=!1,i++);break;case"text":n.text.indexOf(e)>=0&&(n.filteredBySearch=!1,i++);break;default:return n}!n.filteredBySearch&&n.type!=="folder"&&n.folderId&&(t.__itemIdToModel[n.folderId].filteredBySearch=!1,i++)}return i}function Cw(t,e){return new RegExp("\\$\\{"+t.replace("{","\\{?").replace("}","\\}?").replace("_","\\_?")+"\\}",e)}function AL(t,e){let i=0;for(var r=0;r<t.__itemModelArray.length;r++){var o=t.__itemModelArray[r];if(o.type!=="expression")continue;if(Es(o)&&o.label){let a=o.label.match(Cw(e,"g"));a&&(i+=a.length)}}return yh(t,n=>{i+=bw(n,e).length}),i}function dd(t,e,i,r){i=i.trim().replace(/_\{([a-zA-Z0-9])\}/g,"_$1");for(var o=0;o<t.__itemModelArray.length;o++){let n=t.__itemModelArray[o];if(n.type==="expression"){let a=Es(n);n.label&&a&&n.label.match(Cw(e))&&bc(n,n.label.replace(Cw(e,"g"),"${"+i.trim()+"}"))}}yh(t,(n,a)=>{if(r&&r.limitToItem!==void 0&&(a.type!=="item"||r.limitToItem!==a.item.id)||r&&r.limitToFolder!==void 0&&(a.type!=="item"||a.item.type==="ticker"||a.item.type==="folder"||r.limitToFolder!==a.item.folderId))return;let s=yw(n,e,i);if(a.type==="geometry-toolbar"){let c=t.controller.getGeometryToolbarModel();ww(c,a.tool,{visible:!0,disabledLatex:s});return}let l=a.item;if(s!==n){let c;switch(a.cellLocation!==void 0&&l.columnModels&&(c=l.columnModels[a.cellLocation.column].id),a.location){case"latex":{Wn(l,s);break}case"cdfMin":{_w(l,s);break}case"cdfMax":{Fw(l,s);break}case"colorLatex":{hf(l,s);break}case"lineWidth":{Ih(l,s);break}case"resolution":{Pw(l,s);break}case"clickableInfoLatex":{Gw(l,s);break}case"fillOpacity":{df(l,s);break}case"lineOpacity":{kh(l,s);break}case"pointOpacity":{pf(l,s);break}case"pointSize":{uf(l,s);break}case"labelAngle":{Ow(l,s);break}case"labelSize":{gf(l,s);break}case"polarDomainMin":{qn(l,s,"theta");break}case"polarDomainMax":{zn(l,s,"theta");break}case"parametricDomainMin":{qn(l,s,"t");break}case"parametricDomainMax":{zn(l,s,"t");break}case"parametricDomain3DuMin":{qn(l,s,"u");break}case"parametricDomain3DuMax":{zn(l,s,"u");break}case"parametricDomain3DvMin":{qn(l,s,"v");break}case"parametricDomain3DvMax":{zn(l,s,"v");break}case"parametricDomain3DrMin":{qn(l,s,"r");break}case"parametricDomain3DrMax":{zn(l,s,"r");break}case"parametricDomain3DphiMin":{qn(l,s,"phi");break}case"parametricDomain3DphiMax":{zn(l,s,"phi");break}case"sliderMin":{Eh(l,s);break}case"sliderMax":{Dh(l,s);break}case"sliderStep":{cf(l,s);break}case"imageOpacity":{la(l,"opacity",s);break}case"imageCenter":{la(l,"center",s);break}case"imageHeight":{la(l,"height",s);break}case"imageWidth":{la(l,"width",s);break}case"imageAngle":{la(l,"angle",s);break}case"tickerHandler":{l.handlerLatex=s;break}case"tickerMinStep":{l.minStepLatex=s;break}case"tableHeader":case"tableCellValue":if(!a.cellLocation||l.type!=="table")break;fc(l,a.cellLocation,s);break;case"tableColumnColorLatex":{c&&Zx(l,c,s);break}case"tableColumnPointSize":{c&&Xx(l,c,s);break}case"tableColumnPointOpacity":{c&&Qx(l,c,s);break}case"tableColumnLineWidth":{c&&Yx(l,c,s);break}case"tableColumnLineOpacity":{c&&Jx(l,c,s);break}case"residualVariable":break;default:{let p=a.location;throw new Error(`Unexpected latex location ${p}`)}}}})}function Ew(t){var e=[];yh(t,function(o){if(!(o.indexOf("~")!==-1||o.indexOf("\\sim")!==-1))for(var n=/_(\d)|_\{(?:\s|\\space)*(\d+)(?:\s|\\space)*\}/g;;){var a=n.exec(o);if(!a)break;e.push(parseInt(a[1]||a[2],10))}}),e.sort(function(o,n){return o-n});for(var i=1,r=0;r<e.length;r++)e[r]===i&&i++;return i}function VL(t){var e=0;return yh(t,function(i){for(var r=/\\token\{(\d+)\}/g;;){var o=r.exec(i);if(!o)break;var n=parseInt(o[1],10);n>e&&(e=n)}}),e}function LL(t){var e={};return yh(t,function(i){if(!(i.indexOf("~")!==-1||i.indexOf("\\sim")!==-1))for(var r=/(\\?[a-zA-Z]+)_(\d)|(\\?[a-zA-Z]+)_\{(?:\s|\\space)*(\d+)(?:\s|\\space)*\}/g;;){var o=r.exec(i);if(!o)break;var n=o[1]||o[3],a=o[2]||o[4];n[0]!=="\\"&&(n=n[n.length-1]);var s=parseInt(a,10);e[n]||(e[n]=0),s>e[n]&&(e[n]=s)}}),e}function PL(t,e){var i=[],r={points:[],angles:[],polygons:[],other:[]};function o(n){if(!(MK(t,n.id)&&e!=="actual")&&!(n.id===hh&&e!=="preview")){if(n.type==="expression"&&n.folderId===__dcg_shared_module_exports__['_c']){wl(n)?r.points.push(n.id):ud(n)?r.angles.push(n.id):xl(n)?r.polygons.push(n.id):r.other.push(n.id);return}n.type==="table"?__dcg_shared_module_exports__['ua'](n.columnModels,function(a){i.push(a.id)}):i.push(n.id)}}t.__itemModelArray.forEach(o),bh(t).forEach(o),i.push.apply(i,r.polygons),i.push.apply(i,r.other),i.push.apply(i,r.angles),i.push.apply(i,r.points),t.drawOrder=i}function bl(t,e,i){let r=t.__itemIdToModel[e];if(r)return r;if(i&&i.includePreviewItems)return t.__toolPreviewIdToModel[e]}function OL(t,e){return!!t.__toolPreviewIdToModel[e]}function xh(t,e){var n;for(var i=[],r=0;r<t.__itemModelArray.length;r++){var o=t.__itemModelArray[r];o.type==="expression"&&((n=Er(o))==null?void 0:n.identifier)===e&&i.push(o)}return i}function IK(t,e){return t.__helperIdToModel[e]}function _L(t,e){var i=kV(e);t.__helperIdToModel[i.id]=i}function of(t){t.__anyUnmutedTones=t.__itemModelArray.some(e=>lf(e)),t.__anyTones=t.__anyUnmutedTones||t.__itemModelArray.some(e=>da(e))}function M0(t){t.__anyDependsOnRandomSeed=!1;for(var e=0;e<t.__itemModelArray.length;e++){var i=t.__itemModelArray[e];if(i&&"formula"in i&&i.formula&&i.formula.depends_on_random_seed){t.__anyDependsOnRandomSeed=!0;return}}}function FL(t){t.__anyIsAction=!1}function Dw(t){if(!t.__anyIsAction){if(t.ticker.open){t.__anyIsAction=!0;return}for(var e=0;e<t.__itemModelArray.length;e++){var i=t.__itemModelArray[e];if(i&&"formula"in i&&i.formula){if(i.type!=="expression"&&i.type!=="image")continue;let{formula:r}=i;if(r.hasOwnProperty("action_value")||r.hasOwnProperty("click_handler")){t.__anyIsAction=!0;return}}}}}function Mp(t){for(var e=!t.controller.shouldShowAuthorFeatures(),i=1,r=1,o=0;o<t.__itemModelArray.length;o++){var n=t.__itemModelArray[o];n.index=o,n.displayIndex=i,rf(n)&&(n.secretIndex=r,r+=1),!kL(n)&&(!e||!rf(n))&&(i+=1)}for(var a in t.selectedItemMap)t.__itemIdToModel[a]||delete t.selectedItemMap[a];t.nextDisplayIndex=i}function TK(t){t.__itemModelArray=[],t.__itemIdToModel={},t.__helperIdToModel={},t.__toolPreviewIdToModel={},t.__anyDependsOnRandomSeed=!1,t.__anyUnmutedTones=!1,t.__anyTones=!1}function nf(t){return t.__itemModelArray.length}function RL(t){return t.__itemModelArray.filter(e=>e.type==="expression"&&e.folderId===__dcg_shared_module_exports__['_c']&&!!Dn(e)).length}function NL(t){return t.nextDisplayIndex===1}function BL(t){for(var e=[],i=0;i<t.__itemModelArray.length;i++){var r=t.__itemModelArray[i];r.type==="expression"&&r.sliderExists&&e.push(r)}return e}function wh(t){var e;for(var i in t.selectedItemMap){if(e!==void 0)return;e=i}if(e!==void 0)return t.__itemIdToModel[e]}function MK(t,e){return!!t.selectedItemMap[e]}function KL(t){return __dcg_shared_module_exports__['a']({},t.selectedItemMap)}function kw(t){var e=[];for(var i in t.selectedItemMap)e.push(t.__itemIdToModel[i]);return e}function qL(t){return{list:t.__itemModelArray.map(function(e){return e.cachedUndoRedoDiffState}),ticker:jV(t.ticker)}}function G0(t){return{list:t.__itemModelArray.map(function(e){return e.cachedUndoRedoFullState}),ticker:YV(t.ticker)}}function zL(t,e){let i={list:t.__itemModelArray.map(function(o){switch(o.type){case"expression":return Aw(o,e);case"image":return dw(o,e);case"table":return oh(o,e);case"folder":return zx(o,e);case"text":return iw(o,e);default:return o}})},r=$V(t.ticker,e);return r&&(i.ticker=r),i}function UL(t){let e=0,i=/^[0-9]+$/;for(var r=t.list.length-1;r>=0;r--){var o=t.list[r];let n=o.id;if(i.test(n)){let a=parseInt(n,10);a>e&&(e=a)}if(o.type==="table"&&o.columns){for(let a=o.columns.length-1;a>=0;a--)if(n=o.columns[a].id,i.test(n)){let s=parseInt(n,10);s>e&&(e=s)}}}return e}function HL(t,e,i){i||(i={});var r,o;for(t.colorIdx=0,TK(t),t.expressionAnalysis={},r=0;r<e.list.length;r++){if(o=uh(t,e.list[r]),i.remapColors&&"color"in o&&o.color){var n=__dcg_shared_module_exports__['Pa'](t.controller.getColors());__dcg_shared_module_exports__['za'](n,o.color)||(o.color=IA(o.color,n))}t.__itemModelArray.push(o),t.__itemIdToModel[o.id]=o}if(t.ticker=w0(e.ticker),Mp(t),t.nextDisplayIndex===1){var a=uh(t,{type:"expression",id:t.controller.generateId(),color:t.controller.getNextColor()});Ma(t,a,t.__itemModelArray.length)}}function uh(t,e){switch(e.type){case"expression":return Vw(e,t.controller);case"table":return tV(e,t.controller);case"image":return BV(e,t.controller);case"folder":return MA(e,t.controller);case"text":return CV(e,t.controller);default:return e}}function WL(t,e){var i,r;let o=t.__itemIdToModel;for(t.__itemModelArray=[],t.__itemIdToModel={},i=0;i<e.list.length;i++){var n=e.list[i];if(r=o[n.id],r&&r.type===n.type)switch(r.type){case"expression":if(n.type!==r.type)throw new Error("invalid restoration");ZL(r,n);break;case"table":if(n.type!==r.type)throw new Error("invalid restoration");eV(r,n);break;case"image":if(n.type!==r.type)throw new Error("invalid restoration");KV(r,n);break;case"folder":{if(n.type!==r.type)throw new Error("invalid restoration");AA(r,n)}break;case"text":if(n.type!==r.type)throw new Error("invalid restoration");EV(r,n);break;default:return r}else r=uh(t,n);t.__itemModelArray.push(r),t.__itemIdToModel[r.id]=r}e.ticker&&JV(t.ticker,e.ticker),M0(t),Dw(t),of(t),Mp(t)}function $L(t,e,i){let r=i[0]&&i[0].tableId,o=bl(t,r||e);if(!o)return;let n;switch(o.type){case"expression":let a=!1;o.__workerNeedsDotplotXMode=!1;for(let c=0;c<i.length;c++){let p=i[c];if(p.graphMode===15){o.error=p.error;continue}"resolved"in p&&!p.resolved&&(a=!0),"boundingBox"in p&&p.boundingBox&&(n||(n=[]),n.push(p.boundingBox)),p.needsDotplotXMode&&(o.__workerNeedsDotplotXMode=!0)}o.unresolved=a,o.boundingBoxes=n;let s=1/0,l=-1/0;for(let c of i){if(c.graphMode!==6)continue;let p=c.sampledDomain;p&&(s=Math.min(s,p.min),l=Math.max(l,p.max))}isFinite(s)&&(o.__workerSampledDomainMin=s),isFinite(l)&&(o.__workerSampledDomainMax=l);return;case"table":for(let c=0;c<i.length;c++){let p=i[c];"boundingBox"in p&&p.boundingBox&&(n||(n=[]),n.push(p.boundingBox))}n&&pV(o,e,n);return;default:return}}function jL(t,e){var i,r,o,n=__dcg_shared_module_exports__['l'](t.expressionAnalysis);for(i in e){if(!e.hasOwnProperty(i))continue;o=e[i],r=bl(t,i);let a={isGraphable:!!o.is_graphable,isError:!!o.error,errorMessage:o.error?t.controller.unpack(o.error):void 0};if(r)switch(r.type){case"expression":if(k0(r,o),o.zero_values&&o.zero_values.length===1){let c=o.zero_values[0].val;__dcg_shared_module_exports__['Va'](c)&&(a.evaluation={type:"Number",value:c},a.evaluationDisplayed=!0),__dcg_shared_module_exports__['Ta'](c)&&c.every(__dcg_shared_module_exports__['Va'])&&(a.evaluation={type:"ListOfNumber",value:c.slice()},a.evaluationDisplayed=!0)}else o.hasOwnProperty("constant_value")&&__dcg_shared_module_exports__['Va'](o.constant_value)&&(a.evaluation={type:"Number",value:o.constant_value},a.evaluationDisplayed=!1);break;case"image":RV(r,o);break;case"table":YA(r,o);break;case"folder":case"text":break;default:return r}else i===t.ticker.id&&XV(t.ticker,o);let s=IK(t,i);if(s)IV(t.controller,s,o);else{let l=t.__toolPreviewIdToModel[i];l&&k0(l,o)}i.startsWith(lh)&&mL(t.controller.getGeometryToolbarModel(),i,o),i!==t.ticker.id&&!i.startsWith(lh)&&(n[i]=a)}M0(t),of(t),Dw(t),t.expressionAnalysis=n}function pi(t,e){t.selectedItemMap={},e&&(t.selectedItemMap[e.id]=!0)}function A0(t,e){t.selectedItemMap[e]?delete t.selectedItemMap[e]:t.selectedItemMap[e]=!0}function V0(t,e){t.selectedItemMap=__dcg_shared_module_exports__['a']({},e)}function pd(t,e,i,r){if(e===i)return;let o=t.__itemModelArray.splice(e,r);e<i&&(i=i-r+1),t.__itemModelArray.splice.apply(t.__itemModelArray,[i,0,...o]),Mp(t)}function Ma(t,e,i){var r=String(e.id);if(t.__itemIdToModel.hasOwnProperty(r))throw Error("Item with id '"+r+"' is already in list");t.__itemIdToModel[r]=e,t.__itemModelArray.splice(i,0,e),Mp(t)}function Ss(t,e){Ma(t,e,nf(t))}function vh(t,e){let i=[];var r=t.__itemModelArray[e];if(r.type==="folder"){let n=0,a=e+1;for(let s=a;s<t.__itemModelArray.length;s++){var o=t.__itemModelArray[s];if(o.type==="folder"||o.folderId!==r.id)break;Sn(o)&&pi(t,void 0),o.readonly?(s>a&&(t.__itemModelArray[s]=t.__itemModelArray[a],t.__itemModelArray[a]=o),Mo(o,""),a+=1):(delete t.__itemIdToModel[o.id],delete t.expressionAnalysis[r.id],n+=1)}n>0&&i.push(...t.__itemModelArray.splice(a,n))}return Sn(r)&&pi(t,void 0),i.push(...t.__itemModelArray.splice(e,1)),delete t.__itemIdToModel[r.id],delete t.expressionAnalysis[r.id],M0(t),i.some(n=>da(n))&&of(t),Mp(t),i}function YL(t){return t.__anyDependsOnRandomSeed}function JL(t){return t.__anyIsAction}function XL(t){return t.__anyUnmutedTones}function Ch(t,e){let i=bl(t,e);return i?vh(t,i.index):[]}function Iw(t){let e=wh(t);if(!e)return!1;let i=Ip(t,e.index);return i?(pi(t,i),i.index===nf(t)-1&&e.type==="expression"&&yl(e)&&vh(t,i.index),!0):!1}function Tw(t){let e=wh(t);if(!e)return!1;let i=Tp(t,e.index);return i?(pi(t,i),!0):!1}function Sn(t){return!!t.controller.getListModel().selectedItemMap[t.id]}function af(t,e){t.dragState=e}function sf(t){switch(t.type){case"expression":return Mw(t);case"image":return cw(t);case"table":return[];case"text":return[];case"folder":return[];default:return t}}function QL(t,e){for(let i of T0(t))i.type==="folder"&&eh(i,e)}function Sh(t){return t?t.type==="image"&&Dp(t)||t.type==="expression"&&Hn(t):!1}var GK=30,AK=10,Rw=__dcg_shared_module_exports__['nd'].RED,Nw=__dcg_shared_module_exports__['nd'].BLUE,Bw=__dcg_shared_module_exports__['nd'].GREEN,Kw=__dcg_shared_module_exports__['nd'].PURPLE,qw=__dcg_shared_module_exports__['nd'].ORANGE,zw=__dcg_shared_module_exports__['nd'].BLACK;function Gp(t,e){switch(e){case __dcg_shared_module_exports__['nd'].RED:return t.s("graphing-calculator-text-color-red");case __dcg_shared_module_exports__['nd'].BLUE:return t.s("graphing-calculator-text-color-blue");case __dcg_shared_module_exports__['nd'].GREEN:return t.s("graphing-calculator-text-color-green");case __dcg_shared_module_exports__['nd'].PURPLE:return t.s("graphing-calculator-text-color-purple");case __dcg_shared_module_exports__['nd'].ORANGE:return t.s("graphing-calculator-text-color-orange");case __dcg_shared_module_exports__['nd'].BLACK:return t.s("graphing-calculator-text-color-black");case __dcg_shared_module_exports__['nd'].GRAY:return t.s("graphing-calculator-text-color-gray");default:return t.s("graphing-calculator-text-color-unknown")}}var L0=t=>{if(!Array.isArray(t))return[t];let e=Array(Math.min(t.length,AK));for(let i=0;i<e.length;i++)e[i]=t[Math.round(i*t.length/e.length)];return e};function eP(t,e){switch(t.type){case"single-color":case"color-array":return L0(t.value).every(r=>l0(r,e));case"shader":case"image":return!1;default:let i=t;throw new Error("Unexpected ColorSwatchSpec type: "+i.type)}}function Uw(t,e,i=s0){switch(t.type){case"single-color":case"color-array":return L0(t.value).some(o=>l0(o,e,i));case"shader":case"image":return!0;default:let r=t;throw new Error("Unexpected ColorSwatchSpec type: "+r.type)}}var Th=t=>{switch(t.type){case"single-color":return t.value;case"color-array":let e=L0(t.value);if(e.length===0)return __dcg_shared_module_exports__['nd'].BLACK;if(e.length===1)return t.value[0];let i=GK/e.length;return`linear-gradient(to right${e.reduce((o,n,a)=>`${o}, ${n} ${a*i}px, ${n} ${(a+1)*i}px`,"")})`;case"shader":return"#808080";case"image":return'url("'+t.value+'")';default:let r=t;throw new Error("Unexpected ColorSwatchSpec type: "+r.type)}};var VK=0;function LK(){return"abstract_item_"+VK++}function gl(t){return{guid:LK(),controller:t,index:-1,displayIndex:-1,secretIndex:-1,isHiddenFromUI:!0,renderShell:!0}}function P0(t,e){t.secret=e}function Hw(t,e){t.readonly=e}function Mo(t,e){t.type!=="folder"&&(t.folderId=e)}function ml(t){t.isHiddenFromUI=I0(t)}function iP(t){return t.isHiddenFromUI||t.filteredBySearch?"none":t.renderShell?"shell":"render"}function Ds(t){let e=mf(t),i=e.type==="color-array"?{type:"single-color",value:e.value[0]}:e;return Th(i)}function mf(t){if(!t.colorLatex)return{type:"single-color",value:t.color};if(/^data:image/.test(t.colorLatex))return{type:"image",value:t.colorLatex};let e,i;return t.type==="expression"?(e=oP(t),i=rP(t)):t.type==="table-column"&&(e=$A(t),i=qA(t)),i&&e?Array.isArray(e)?{type:"color-array",value:e}:{type:"single-color",value:e}:{type:"single-color",value:t.color}}function ca(t){return t.type==="expression"||t.type==="image"||t.type==="table-column"?!!t.disableGraphInteractions:!1}function ff(t){let e=__dcg_shared_module_exports__['kc'](t);if(e.type!=="Assignment")return NaN;if(e._expression.type!=="Constant")return NaN;if(!new __dcg_shared_module_exports__['qd']({enableGeometry:!1,enable3d:!1,beta3d:!1,scales:void 0}).validLHS(e._symbol))return NaN;if(__dcg_shared_module_exports__['hb'][e._symbol])return NaN;let r=e._expression.asValue();return typeof r=="number"?r:NaN}hd();var Mh=class{suspend(){return new Promise((e,i)=>{if(this.audioContext)this.audioContext.suspend().then(()=>{e()}).catch(r=>{pa(r),i(r)});else{e();return}})}getResumedAudioContext(){return new Promise((e,i)=>{if(!this.audioContext){let r=window.AudioContext||window.webkitAudioContext;if(!r){i();return}try{this.audioContext=new r({latencyHint:"interactive",sampleRate:44100})}catch(o){i(o)}}this.audioContext&&(this.audioContext.state!=="running"?this.audioContext.resume().then(()=>{e({audioContext:this.audioContext,poiBuffer:this.poiBuffer})}).catch(r=>{pa(r),i(r)}):this.audioContext.resume().then(()=>{e({audioContext:this.audioContext,poiBuffer:this.poiBuffer})}).catch(r=>{pa(r),i(r)}))})}};ad();var $w=class{constructor(e,i){this.cb=e;this.document=i;this.observedAriaLiveElements=new WeakMap;this.destroyed=!1;this.onAriaLabelFocus=e=>{let i=e.target;if(this.isElement(i)){let r=i.getAttribute("aria-label");r&&this.cb(r,"label")}};this.document.documentElement.addEventListener("focus",this.onAriaLabelFocus,!0),this.ariaLiveContentObserver=new MutationObserver(r=>this.handleAriaLiveContentMutations(r)),i.documentElement.querySelectorAll('[aria-live="assertive"]').forEach(r=>this.startObservingAriaLiveElement(r)),this.treeObserver=new MutationObserver(r=>this.handleDocumentTreeMutations(r)),this.treeObserver.observe(i.documentElement,{childList:!0,subtree:!0,attributeFilter:["aria-live"]})}destroy(){this.destroyed=!0,this.document.documentElement.removeEventListener("focus",this.onAriaLabelFocus,!0),this.ariaLiveContentObserver.disconnect()}isObservingElement(e){return!!this.observedAriaLiveElements.get(e)}handleAriaLiveContentMutations(e){var r;let i=new Map;for(let o of e){if(!this.observedAriaLiveElements.get(o.target))continue;let n=i.get(o.target);n||(n=[],i.set(o.target,n)),n.push(o)}for(let[o,n]of i){let a=o.cloneNode(!0),s=[a.textContent||""];for(let l=n.length-1;l>=0;l--){let c=n[l];switch(c.type){case"attributes":{c.attributeName!==null&&a.setAttribute(c.attributeName,c.oldValue||""),s.push(a.textContent||"");break}case"characterData":{c.oldValue!==null&&(a.textContent=c.oldValue),a.textContent&&a.textContent!==s[s.length-1]&&s.push(a.textContent);break}case"childList":{if(c.addedNodes.length>1||c.removedNodes.length>1)throw new Error(`Expected at most one removed node and one added node, but got ${c.removedNodes.length} removed nodes and ${c.addedNodes.length} added nodes`);c.addedNodes.length===1&&((r=a.firstChild)==null||r.remove()),c.removedNodes.length===1&&c.removedNodes.forEach(p=>a.appendChild(p.cloneNode(!0))),a.textContent&&a.textContent!==s[s.length-1]&&s.push(a.textContent);break}}}for(let l of s.reverse())this.cb(l,"alert")}}startObservingAriaLiveElement(e){this.destroyed||e.getAttribute("aria-live")==="assertive"&&(this.observedAriaLiveElements.get(e)||(this.observedAriaLiveElements.set(e,!0),e.textContent&&this.cb(e.textContent,"alert"),this.ariaLiveContentObserver.observe(e,{attributes:!0,characterData:!0,childList:!0,attributeOldValue:!0,characterDataOldValue:!0})))}stopObservingAriaLiveElement(e){this.observedAriaLiveElements.set(e,!1)}handleDocumentTreeMutations(e){for(let i of e)i.addedNodes.forEach(r=>{this.isElement(r)&&r.getAttribute("aria-live")==="assertive"&&this.startObservingAriaLiveElement(r)}),this.isElement(i.target)&&i.attributeName==="aria-live"&&(i.target.getAttribute("aria-live")==="assertive"?this.startObservingAriaLiveElement(i.target):this.stopObservingAriaLiveElement(i.target)),i.removedNodes.forEach(r=>{this.isElement(r)&&(this.stopObservingAriaLiveElement(r),r.querySelectorAll('[aria-live="assertive"]').forEach(o=>this.stopObservingAriaLiveElement(o)))})}isElement(e){var r;let i=(r=this.document.defaultView)==null?void 0:r.Element;return i?e instanceof i:!1}};var vl,jw=[],nP="",PK;function Nr(){vl&&(vl.textContent="")}function Xe(t){jw.push(t)}function le(t){if(t!==void 0&&Xe(t),vl&&jw.length>0){let e=jw.join(" ").replace(/ +(?= )/g,"");vl.setAttribute("aria-relevant",nP===e&&Rr?"all":"additions text"),vl.textContent=e,nP=e}jw.length=0}function OK(){vl=document.createElement("p"),vl.setAttribute("aria-live","assertive"),vl.setAttribute("aria-atomic","true"),vl.classList.add("dcg-aria-alert"),document.body.appendChild(vl),vn().logAria&&(PK=new $w((e,i)=>__dcg_shared_module_exports__['td'].log(`[aria ${i}] ${e}`),document))}vA(OK);var _K=.25;function aP(t,e){return _K*__dcg_shared_module_exports__['pb'](t,0,FK(e))}function FK(t){return t<=0||!isFinite(t)?0:__dcg_shared_module_exports__['pb'](660/t,0,10)}var jo,RK="data:audio/mpeg;base64,//uQx"+"A".repeat(23)+"WGluZwAAAA8AAAACAAACcQCA"+"gICA".repeat(16)+"/".repeat(66)+"8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkI"+"A".repeat(320)+"//sQxAADgnABGiAAQBCqgCRMAAgEAH"+"/".repeat(15)+"7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq"+"/".repeat(18)+"9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAw"+"V".repeat(97)+"Q==";function NK(){jo&&(jo.src="about:blank",jo.load(),jo=void 0)}function Yw(){if(!(!ka&&!od)){if(!jo){let t=document.createElement("div");jo=document.createElement("audio"),t.appendChild(jo),jo.setAttribute("x-webkit-airplay","deny"),jo.controls=!1,jo.disableRemotePlayback=!0,jo.preload="auto",jo.loop=!0,jo.src=RK,jo.load()}jo.paused&&jo.play().catch(NK)}}function Jw(){jo&&jo.pause()}var sP=44100,Cl=Vx?.02:0,yf=class{constructor(e){this.expressionSynthMap=new Map;this.useOfflineContext=!1;this.globalUnmuteState=!1;this.hasEverInteractedWithMute=!1;this.maxGain=.5;this.handleVisibilityChange=()=>{this.audioContext&&document.visibilityState==="hidden"&&this.controller.dispatch({type:"mute-global"})};this.handleBeforeUnload=()=>{this.audioContext&&this.controller.dispatch({type:"mute-global"})};this.audioContextManager=new Mh,this.controller=e,document.addEventListener("visibilitychange",this.handleVisibilityChange),window.addEventListener("beforeunload",this.handleBeforeUnload)}setOfflineAudio(){this.useOfflineContext=!0}prepareToRenderAudio(e){this.useOfflineContext&&(this.offlineBuffer=void 0,this.audioContext=new OfflineAudioContext(1,e*sP,sP),this.audioContext.addEventListener("complete",i=>{this.offlineBuffer=i.renderedBuffer,this.clearAudioContext()}),this.createMainNodes(),this.recomputeAudio())}getHasEverInteractedWithMute(){return this.hasEverInteractedWithMute}registerMuteInteraction(){this.hasEverInteractedWithMute=!0}async startRendering(){return this.audioContext.startRendering()}getRenderedBuffer(){return this.offlineBuffer}clearAudioContext(){for(let e of this.expressionSynthMap.values())e.tearDown();this.audioContext=void 0,this.expressionSynthMap=new Map}async spinUpAudioContext(){if(!this.useOfflineContext){if(this.audioContext)this.audioContext.state==="suspended"&&!this.useOfflineContext&&await this.audioContext.resume();else{let e=await this.audioContextManager.getResumedAudioContext();this.audioContext=e.audioContext}this.gainNode||this.createMainNodes()}}createMainNodes(){this.audioContext&&(this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.compressor=this.audioContext.createDynamicsCompressor(),this.compressor.threshold.value=-10,this.compressor.knee.value=4,this.compressor.ratio.value=20,this.compressor.attack.value=.01,this.compressor.release.value=.01,this.gainNode.connect(this.compressor),this.compressor.connect(this.audioContext.destination))}async _recomputeAudio(e){var i,r,o,n,a,s,l;if(e.length!==0&&!(this.nothingShouldSound()&&((i=this.audioContext)==null?void 0:i.state)!=="running")){if(this.useOfflineContext){if(!this.audioContext)return}else await this.spinUpAudioContext();if(this.nothingShouldSound()){if(this.expressionSynthMap.size>0){for(let c of this.expressionSynthMap.values())c.tearDown();this.expressionSynthMap.clear()}}else for(let c of e){let p=c.type==="expression"?c.formula.typed_constant_value:void 0,u=c.id;p&&!this.expressionSynthMap.has(u)&&this.expressionSynthMap.set(u,new Xw(this,this.gainNode)),(r=this.expressionSynthMap.get(u))==null||r.updateFromValues(p),c.type==="remove"&&this.expressionSynthMap.has(u)?((o=this.expressionSynthMap.get(u))==null||o.tearDown(),this.expressionSynthMap.delete(u)):c.type==="expression"&&(xf(c)?(a=this.expressionSynthMap.get(u))==null||a.setGain(0):(n=this.expressionSynthMap.get(u))==null||n.setGain(this.maxGain))}this.audioContext&&(this.expressionSynthMap.size>0&&!this.isGlobalMuted()?(s=this.gainNode)==null||s.gain.setTargetAtTime(1,this.audioContext.currentTime+Cl,yc):(l=this.gainNode)==null||l.gain.setTargetAtTime(0,this.audioContext.currentTime+Cl,yc))}}nothingShouldSound(){return!this.globalUnmuteState||!this.hasAnyUnmutedTones()}recomputeAudio(){of(this.controller.getListModel());let i=this.controller.getAllItemModels().filter(n=>lf(n)),r=[],o=new Set(i.map(n=>n.id));for(let n of this.expressionSynthMap.keys())o.has(n)||r.push({id:n,type:"remove"});this._recomputeAudio([...i,...r])}isGlobalMuted(){return!this.globalUnmuteState}someExpressionsShouldPlayTones(){var e,i;return(i=(e=this.controller)==null?void 0:e.getAllItemModels())==null?void 0:i.some(r=>lf(r))}hasAnyUnmutedTones(){return XL(this.controller.getListModel())}handleAction(e){switch(e.type){case"mute-global":{Jw(),this.globalUnmuteState=!1;break}case"unmute-global":{Yw(),this.globalUnmuteState=!0,this.hasEverInteractedWithMute=!0;break}default:return e}this.recomputeAudio()}handleMuteKeyShortcut(){this.controller.toneItemsExist()?this.isGlobalMuted()?(this.controller.dispatch({type:"unmute-global"}),Xe(this.controller.s("graphing-calculator-narration-unmuted")),this.someExpressionsShouldPlayTones()||Xe(this.controller.s("graphing-calculator-narration-no-playing-tones"))):(this.controller.dispatch({type:"mute-global"}),Xe(this.controller.s("graphing-calculator-narration-muted"))):Xe(this.controller.s("graphing-calculator-narration-no-tone-expressions")),le()}};var yc=.005,BK=15e-5,Gh=20,Ah=2e4,O0=class{constructor(e,i){e.audioContext&&(this.audioContext=e.audioContext,this.oscillator=this.audioContext.createOscillator(),this.oscillator.type="sine",this.gain=this.audioContext.createGain(),this.gain.gain.value=0,this.oscillator.connect(this.gain),this.gain.connect(i),this.oscillator.start())}stop(e=0){this.gain.gain.setTargetAtTime(0,this.audioContext.currentTime+e+Cl,yc),setTimeout(()=>{this.oscillator.stop()},1e3*(2*yc+e+Cl)+1)}setFrequencyAndGain(e,i){(!isFinite(e)||!isFinite(i)||e>Ah||e<Gh)&&(i=0);let r=aP(i,e);r>0&&this.oscillator.frequency.setTargetAtTime(__dcg_shared_module_exports__['pb'](e,Gh,Ah),this.audioContext.currentTime+Cl,BK),this.gain.gain.setTargetAtTime(r,this.audioContext.currentTime+Cl,yc)}},Xw=class{constructor(e,i){e.audioContext&&(this.audioContext=e.audioContext,this.gain=this.audioContext.createGain(),this.gain.gain.value=0,this.gain.connect(i),this.synthesizers=[])}updateFromValues(e){var i,r,o;if(e&&e.valueType===__dcg_shared_module_exports__['V'])this.synthesizers.length>1?(this.tearDownSynthesizers(this.synthesizers.slice(1)),this.synthesizers.length=1):this.synthesizers.length===0&&(this.synthesizers=[this.makeSynth()]),(i=this.synthesizers[0])==null||i.setFrequencyAndGain(e.value[0],e.value[1]);else if(e&&e.valueType===__dcg_shared_module_exports__['W']){if(this.synthesizers.length>e.value.length&&(this.tearDownSynthesizers(this.synthesizers.slice(e.value.length)),this.synthesizers.length=e.value.length),e.value.length>this.synthesizers.length)for(let n=this.synthesizers.length;n<e.value.length;n++)this.synthesizers.push(this.makeSynth());for(let n=0;n<e.value.length;n++)this.synthesizers[n].setFrequencyAndGain(e.value[n][0],e.value[n][1])}else this.tearDownSynthesizers(this.synthesizers),this.synthesizers=[];this.synthesizers.length>0?(r=this.gain)==null||r.gain.setTargetAtTime(1,this.audioContext.currentTime+Cl,yc):(o=this.gain)==null||o.gain.setTargetAtTime(0,this.audioContext.currentTime+Cl,yc)}makeSynth(){return new O0(this,this.gain)}tearDownSynthesizers(e){if(e)for(let i of e)i.stop()}setGain(e){this.gain.gain.setTargetAtTime(e,this.audioContext.currentTime+Cl,yc)}tearDown(){this.tearDownSynthesizers(this.synthesizers),this.synthesizers=[]}};function F0(t){return t===void 0?NaN:+t}function Sl(t){return!!t&&t.type==="expression"&&!!t.formula&&!!t.formula.typed_constant_value&&!!t.formula.geometry}var dP={smallCutoff:1e-6,bigCutoff:1e9,digits:12};function pP(t){let e=t.formula;return e?t.controller.isDecimalToFractionEnabled()&&e.hasOwnProperty("constant_value")&&__dcg_shared_module_exports__['_a'](F0(e.constant_value)):!1}function Qw(t){return!!(t.formula&&t.formula.is_graphable)}function R0(t){let e=t.formula;if(!e)return!1;let r=!(e.operator==="="&&t.controller.isThreeDMode()&&(e.assignment==="x"||e.assignment==="y"||e.assignment==="z"||e.assignment==="r"))&&e.is_evaluable&&e.zero_values&&e.zero_values.length>0&&typeof e.zero_values[0].val!="boolean",o=pP(t)&&md(t),n=!!e.rgb_value&&t.formula.assignment;return r||o||n}function N0(t){let e=t.formula;return R0(t)?e.zero_values&&e.zero_values.length?e.zero_values[0].val:e.rgb_value?e.rgb_value:e.constant_value:pP(t)?t.formula.constant_value:NaN}function vf(t){var e=t.formula.ttest_results;if(!(!e||!isFinite(e.lessThan)))return{lessThan:e.lessThan,greaterThan:e.greaterThan,notEqual:e.notEqual}}function Vh(t){var e=t.formula.stats_results;if(!(!e||!isFinite(e.min)))return{min:e.min,q1:e.q1,median:e.median,q3:e.q3,max:e.max}}function gd(t,e){if(!isFinite(e))return t;let i=t.indexOf("=")+1;return wi(t.slice(i),!1)===e?t:t.slice(0,i)+__dcg_shared_module_exports__['uc'](e)}function yl(t){var e=t.latex||"",i=t.label||"",r=e+i;return r.split(" ").join("")===""}function qi(t,e={isReverseDrag:!1}){let i=t.dragMode==="AUTO"&&t.formula.default_drag_mode!==void 0?t.formula.default_drag_mode:t.dragMode;return t.controller.isThreeDMode()&&(i="NONE"),t.dragMode==="AUTO"&&!e.isReverseDrag&&Dn(t)&&(i="NONE"),__dcg_shared_module_exports__['m'](i,t.formula.move_strategy)}function zK(t){let e=qi(t);t.interactiveLabel&&e!=="NONE"&&Ef(t,!1)}function Ya(t,e,i){if(!t.sliderExists)return NaN;let r=Ga(t),o=ks(t),n=Ja(t);if(i&&i.overwriteStep!==void 0&&(n=i.overwriteStep),e=__dcg_shared_module_exports__['Zb']({target:e,hardMin:t.slider.hardMin?r:void 0,hardMax:t.slider.hardMax?o:void 0,step:n}),!i||!i.ignoreSoftLimits){if(!t.slider.hardMin&&e<r)return r;if(!t.slider.hardMax&&e>o)return o}return e}function B0(t,e,i={}){if(!t.sliderExists)return NaN;let r=Aa(t),o=Ga(t),n=ks(t),a=Ja(t);i.overwriteStep===void 0&&(i.overwriteStep=a||(n-o)/20);var s=0;switch(e){case"min":return Ya(t,o);case"max":return Ya(t,n);case"up":s=1;break;case"down":s=-1;break;case"bigup":s=5;break;case"bigdown":s=-5;break;default:return e}let l=r;for(var c=0;c<20;c++){let p=c/3*i.overwriteStep,u=r;if(s>0)r=Ya(t,l+p,i),r>u&&(s-=1);else if(s<0)r=Ya(t,l-p,i),r<u&&(s+=1);else break}return r}function Zw(t,e){if(t.sliderExists){t.slider.isPlaying&&ua(t,!1);var i=Ya(t,e,{ignoreSoftLimits:!0});t.latex=gd(t.latex,i)}}function uP(t,e,i){if(t.sliderExists){t.slider.isPlaying&&ua(t,!1),Ph(t);var r=B0(t,e,i);t.latex=gd(t.latex,r)}}function hP(t,e){if(t.sliderExists){t.slider.isPlaying&&ua(t,!1);var i=Ya(t,e);t.latex=gd(t.latex,i)}}function gP(t,e){if(!t.sliderExists||t.resetSliderAnimationTargetValue)return;var i=t.sliderLastTickTime;if(t.sliderLastTickTime=e,i===void 0)return;var r=e-i;let o=Ga(t),n=ks(t),a=Ja(t),s=t.slider.animationPeriod,l=t.slider.loopMode;if(isNaN(t.sliderAnimationTargetValue)){var c=Aa(t);isNaN(c)||(t.sliderAnimationTargetValue=c)}var p=a?a/2:0;if(l==="LOOP_FORWARD_REVERSE")t.sliderAnimationTargetValue>=n?Go(t,{playDirection:-1}):t.sliderAnimationTargetValue<=o&&Go(t,{playDirection:1});else if(l==="LOOP_FORWARD")Go(t,{playDirection:1}),t.sliderAnimationTargetValue>=n+p&&(t.sliderAnimationTargetValue=o-p);else if(l==="PLAY_ONCE")Go(t,{playDirection:1});else if(l==="PLAY_INDEFINITELY")Go(t,{playDirection:1});else throw new Error("Unexpected slider loop mode: "+l);isFinite(r)||(r=0);var u,g;if(l==="PLAY_INDEFINITELY")u=r/(s/4),a&&(u*=a),t.sliderAnimationTargetValue+=u,g=t.sliderAnimationTargetValue,a||(g=Ti(g-u*.1,g+u*.1)),g=Ya(t,g,{ignoreSoftLimits:!0}),t.latex=gd(t.latex,g);else{if(r=Math.min(r,s/10),u=(n-o)*r/s,t.sliderAnimationTargetValue+=u*t.slider.playDirection,t.sliderAnimationTargetValue=Math.max(o-p,Math.min(n+p,t.sliderAnimationTargetValue)),g=t.sliderAnimationTargetValue,!a){let m=u/r*16.666666666666668;g=Ti(g-m*.1,g+m*.1)}g=Ya(t,g),t.latex=gd(t.latex,g)}}function Mw(t){let e=t.formula;return e?e.is_single_identifier?[]:e.variables||[]:[]}function k0(t,e){t.formula=e,t.error=e.error,t.unresolved=!1,e.is_slider?(!t.sliderExists||t.resetSliderAnimationTargetValue)&&(t.sliderAnimationTargetValue=Aa(t),t.sliderDragging=!1,t.sliderExists=!0):t.sliderExists=!1,t.resetSliderAnimationTargetValue=!1;var i={};e.is_regression&&(i=e.regression.parameters,t.residualVariable=e.regression.residualVariable,t.controller.areLogModeRegressionsForced()&&(t.isLogModeRegression=!0)),__dcg_shared_module_exports__['Ra'](t.regressionParameters,i)||(t.regressionParameters=i)}function da(t){var e,i;return t.type==="expression"&&(((e=t.formula.typed_constant_value)==null?void 0:e.valueType)===__dcg_shared_module_exports__['V']||((i=t.formula.typed_constant_value)==null?void 0:i.valueType)===__dcg_shared_module_exports__['W'])}function K0(t){var i,r,o,n;if(!da(t)||((i=t.formula.typed_constant_value)==null?void 0:i.valueType)===__dcg_shared_module_exports__['W']||((r=t.formula.typed_constant_value)==null?void 0:r.valueType)===__dcg_shared_module_exports__['V']&&((o=t.formula.typed_constant_value)==null?void 0:o.value[0])>=Gh&&((n=t.formula.typed_constant_value)==null?void 0:n.value[0])<=Ah)return!1;let e=__dcg_shared_module_exports__['kc'](t.latex);return!!(e&&e._dependencies&&e._dependencies.length===1)}function xf(t){var e;return!!t.hidden||!!((e=Bn(t))!=null&&e.hidden)}function lf(t){return!da(t)||xf(t)?!1:t.formula.typed_constant_value.valueType===__dcg_shared_module_exports__['V']?t.formula.typed_constant_value.value[1]>0:t.formula.typed_constant_value.valueType===__dcg_shared_module_exports__['W']?t.formula.typed_constant_value.value.some(e=>e[1]>0):!1}function UK(t){if(t.shouldGraph=!Dn(t),t.folderId===__dcg_shared_module_exports__['_c']){let e=t.controller.getExpressionIdForIdentifier(t.controller.getHoveredOrFocusedTokenIdentifier())===t.id,i=t.controller.isItemSelected(t.id);(e||i||t.controller.getGhostMode())&&(t.shouldGraph=!0)}}function Dn(t){var i;if(!t)return!1;if(t.hidden)return!0;if((i=t==null?void 0:t.formula)!=null&&i.expression_type&&_h(t))return!0;let e=Bn(t);return!!(e&&e.hidden)}function HK(t){let e=t.formula&&t.formula.raw_slider_latex;if(!t.sliderExists||t.latex!==e){t.cachedDisplayLatex={storedLatex:t.latex,valueLatex:t.latex};return}let{latex:i}=t;if(t.cachedDisplayLatex.storedLatex!==i){t.cachedDisplayLatex={storedLatex:t.latex,valueLatex:t.latex};return}let r=bP(t);if(isFinite(r)){let o=t.controller.getFocusLocation();o&&o.type==="expression"&&o.id===t.id||(t.cachedDisplayLatex.valueLatex=gd(t.latex,r))}}function Cf(t){return t.cachedDisplayLatex.valueLatex}function mP(t){return __dcg_shared_module_exports__['Ya'](t).latex}function ev(t){return t.slider.hardMin?t.slider.min:mP(Ga(t))}function fP(t){return t.slider.hardMax?t.slider.max:mP(ks(t))}function Ga(t){if(t.slider.hardMin){let e=t.formula.slider_min_number;return isFinite(e)?e:NaN}else{let e=t.controller.isDegreeMode(),i=wi(t.slider.min,e),r=Aa(t),o=Ja(t),n=t.slider.hardMax?t.formula.slider_max_number:void 0,s=t.controller.is3dProduct()?__dcg_shared_module_exports__['Xb'].xmin:-10;if(i<s&&(s=i),r<s&&(s=r),n<s&&(s=n),o){let l=__dcg_shared_module_exports__['Zb']({target:s,hardMin:void 0,hardMax:n,step:o});l<=s?s=l:s=l-o}return s}}function ks(t){if(t.slider.hardMax){let e=t.formula.slider_max_number;return isFinite(e)?e:NaN}else{let e=t.controller.isDegreeMode(),i=wi(t.slider.max,e),r=Aa(t),o=Ja(t),n=t.slider.hardMin?t.formula.slider_min_number:void 0;return __dcg_shared_module_exports__['_b']({storedMax:i,sliderValue:r,step:o,hardMin:n,is3d:t.controller.is3dProduct()})}}function Ja(t){return t.formula.slider_step_number}function bP(t){if(!t.formula||!t.formula.is_slider)return;let e=t.formula.constant_value;if(e!==void 0)return+e}function Aa(t){let e=t.formula&&t.formula.raw_slider_latex;if(t.latex!==e)return ff(t.latex);let i=bP(t);return isFinite(i)?i:NaN}function q0(t){return t.slider.loopMode!=="PLAY_ONCE"?!1:Aa(t)>=ks(t)}function yP(t,e){return t.formula.viz_valids?!!t.formula.viz_valids[e]:!1}function xc(t,e){return t.vizProps[e]}function xP(t,e,i){t.vizProps=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.vizProps),{[e]:i})}function Lh(t,e){if(e.type==="inert")t.disableGraphInteractions=e.disableGraphInteractions,e.disableGraphInteractions&&(t.dragMode="NONE",t.clickableInfo=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.clickableInfo),{enabled:!1}),t.editableLabelMode="NONE",t.interactiveLabel=!1);else if(e.type==="drag-mode"){let i=e.dragMode;t.dragMode=i,i!=="NONE"&&(t.disableGraphInteractions=!1)}else e.type==="clickable"?(t.clickableInfo=e.clickableInfo,e.clickableInfo.enabled&&(t.disableGraphInteractions=!1)):e.type==="editable-label"?(t.editableLabelMode=e.editable,e.editable!=="NONE"&&(t.disableGraphInteractions=!1)):e.type==="interactive-label"&&(t.interactiveLabel=e.interactive,e.interactive&&(t.disableGraphInteractions=!1))}function wP(t,e,i){Lh(t,{type:"clickable",clickableInfo:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.clickableInfo),{[e]:i})})}function Gw(t,e){Lh(t,{type:"clickable",clickableInfo:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.clickableInfo),{latex:e})})}function Hn(t){var e;return!!(t.clickableInfo.enabled&&hk(t)&&((e=t.formula.click_handler)==null?void 0:e.status)==="maybe-valid")}function vP(t){return!!t.__workerNeedsDotplotXMode}function tv(t){return!!(t.formula&&t.formula.slider_min_valid)}function iv(t){return!!(t.formula&&t.formula.slider_max_valid)}function rv(t){return!!(t.formula&&t.formula.slider_step_valid)}function ov(t,e){var i;if(!e)throw new Error("Programming Error in test. Pass domain variable");return(i=t.formula.domains)==null?void 0:i.find(r=>r.variable===e)}function CP(t,e){if(!t.formula)return NaN;if(Rh(t)&&isFinite(t.__workerSampledDomainMin))return t.__workerSampledDomainMin;let i=ov(t,e),r=i==null?void 0:i.minNumber;return r!==void 0&&isFinite(r)?r:NaN}function SP(t,e){if(!t.formula)return NaN;if(Rh(t)&&isFinite(t.__workerSampledDomainMax))return t.__workerSampledDomainMax;let i=ov(t,e),r=i==null?void 0:i.maxNumber;return r!==void 0&&isFinite(r)?r:NaN}function EP(t,e){let i=ov(t,e);return i?i.minValid:!1}function DP(t,e){let i=ov(t,e);return i?i.maxValid:!1}function Aw(t,e){let i=t.cachedViewState;if((!e.stripDefaults||t.parametricDomain.min!==""||t.parametricDomain.max!=="")&&(i=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},i),{domain:{min:t.parametricDomain.min===""?"0":t.parametricDomain.min,max:t.parametricDomain.max===""?"1":t.parametricDomain.max}})),e.stripDefaults)return __dcg_shared_module_exports__['fd'](i,{is3d:t.controller.is3dProduct()});if(i.points===void 0||i.lines===void 0||i.fill===void 0){let r=__dcg_shared_module_exports__['l'](i);return r.points===void 0&&delete r.points,r.lines===void 0&&delete r.lines,r.fill===void 0&&delete r.fill,r}return i}function WK(t){let e=t.cachedViewState;e&&__dcg_shared_module_exports__['hd'](e,t)&&e.folderId===t.folderId&&e.color===t.color&&e.latex===t.latex&&e.showLabel===t.showLabel&&e.showAngleLabel===t.showAngleLabel&&e.label===t.label&&e.hidden===t.hidden&&e.secret===t.secret&&e.readonly===t.readonly&&e.disableGraphInteractions===t.disableGraphInteractions&&e.fill===t.fill&&e.points===t.points&&e.lines===t.lines&&e.extendTo3D===t.extendTo3D&&e.lineStyle===t.lineStyle&&e.arrowMode===t.arrowMode&&e.pointStyle===t.pointStyle&&e.dragMode===t.dragMode&&e.labelSize===t.labelSize&&e.labelOrientation===t.labelOrientation&&e.suppressTextOutline===t.suppressTextOutline&&e.interactiveLabel===t.interactiveLabel&&e.editableLabelMode===t.editableLabelMode&&e.residualVariable===t.residualVariable&&e.regressionParameters===t.regressionParameters&&e.isLogModeRegression===t.isLogModeRegression&&e.displayEvaluationAsFraction===t.displayEvaluationAsFraction&&e.slider===t.slider&&e.strictIntersection===t.strictIntersection||(t.cachedViewState=__dcg_shared_module_exports__['a']({type:t.type,id:t.id,folderId:t.folderId,color:t.color,latex:t.latex,showLabel:t.showLabel,showAngleLabel:t.showAngleLabel,label:t.label,hidden:t.hidden,secret:t.secret,readonly:t.readonly,disableGraphInteractions:t.disableGraphInteractions,points:t.points,lines:t.lines,extendTo3D:t.extendTo3D,lineStyle:t.lineStyle,arrowMode:t.arrowMode,pointStyle:t.pointStyle,fill:t.fill,dragMode:t.dragMode,labelSize:t.labelSize,labelOrientation:t.labelOrientation,suppressTextOutline:t.suppressTextOutline,interactiveLabel:t.interactiveLabel,editableLabelMode:t.editableLabelMode,residualVariable:t.residualVariable,regressionParameters:t.regressionParameters,isLogModeRegression:t.isLogModeRegression,displayEvaluationAsFraction:t.displayEvaluationAsFraction,slider:t.slider,strictIntersection:t.strictIntersection},__dcg_shared_module_exports__['gd'](t)))}function z0(t,e){e&&Ph(t),t.draggingOnGraphpaper=e}function $K(t){var e=t.memoizedUndoRedoStateParams,i=t.cachedViewState,r=t.preTransientState;if(t.cachedUndoRedoFullState=i,e&&e.viewState===i&&e.preTransientState===r)return;t.memoizedUndoRedoStateParams={viewState:i,preTransientState:r};let o;r?o=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},i),{latex:r.latex,slider:__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},i.slider),r.slider)}):o=__dcg_shared_module_exports__['a']({},i),delete o.regressionParameters,delete o.residualVariable,t.cachedUndoRedoDiffState=o}function Vw(t,e){let i=__dcg_shared_module_exports__['l'](__dcg_shared_module_exports__['ed'](t,{is3d:e.is3dProduct()})),{color:r}=i;return(!r||!ih(r))&&(r=e.getNextColor()),__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},i),gl(e)),{labelDropdownOpen:!1,formula:{error:void 0,operator:"=",variables:[]},error:void 0,unresolved:!1,color:r,pointStyle:i.pointStyle,lineStyle:i.lineStyle,arrowMode:i.arrowMode,displayEvaluationAsFraction:i.displayEvaluationAsFraction,shouldGraph:void 0,sliderDragging:void 0,sliderAnimationTargetValue:void 0,resetSliderAnimationTargetValue:!1,sliderLastTickTime:void 0,draggingOnGraphpaper:!1,cachedUndoRedoDiffState:void 0,cachedUndoRedoFullState:void 0,cachedParsableState:void 0,cachedViewState:void 0,cachedDisplayLatex:{storedLatex:"",valueLatex:""}})}function jK(t){let e=Bn(t),i=!!(e&&e.hidden),r=t.cachedViewState,o=t.index,n=t.showLabel&&!i,a=t.showAngleLabel,s=t.shouldGraph,l=t.memoizedParsableStateParams;if(l&&l.viewState===r&&l.index===o&&l.showLabel===n&&l.showAngleLabel===a&&l.shouldGraph===s)return;t.memoizedParsableStateParams={viewState:r,index:o,showLabel:n,showAngleLabel:a,shouldGraph:s};let c=__dcg_shared_module_exports__['id'](r);c.index=o,c.showLabel=n,c.showAngleLabel=a,c.shouldGraph=s,c.isInConstructionsFolder=t.folderId===__dcg_shared_module_exports__['_c'],t.cachedParsableState=c}function Lw(t,e){e(t.latex,"latex"),e(t.clickableInfo.latex,"clickableInfoLatex"),e(t.lineWidth,"lineWidth"),e(t.fillOpacity,"fillOpacity"),e(t.lineOpacity,"lineOpacity"),e(t.pointOpacity,"pointOpacity"),e(t.pointSize,"pointSize"),e(t.labelSize,"labelSize"),e(t.labelAngle,"labelAngle"),e(t.colorLatex,"colorLatex"),Pp(t)&&(e(t.parametricDomain.min,"parametricDomainMin"),e(t.parametricDomain.max,"parametricDomainMax")),(XP(t)||JP(t))&&(e(t.parametricDomain3Du.min,"parametricDomain3DuMin"),e(t.parametricDomain3Du.max,"parametricDomain3DuMax"),e(t.parametricDomain3Dv.min,"parametricDomain3DvMin"),e(t.parametricDomain3Dv.max,"parametricDomain3DvMax")),(Rh(t)||gv(t))&&(e(t.polarDomain.min,"polarDomainMin"),e(t.polarDomain.max,"polarDomainMax")),(ik(t)||tk(t))&&e(t.resolution,"resolution"),vc(t)&&(e(t.cdf.min,"cdfMin"),e(t.cdf.max,"cdfMax")),t.sliderExists&&(e(t.slider.min,"sliderMin"),e(t.slider.max,"sliderMax"),e(t.slider.step,"sliderStep")),t.residualVariable&&e(t.residualVariable,"residualVariable")}function Ao(t){return t.formula&&t.formula.assignment}function U0(t){return t.formula&&t.formula.shader}function Er(t){let e=t.cachedAssignmentOrFunctionName;if(e&&e.latex===t.latex)return e.result;let i=tf(t.latex),r=i?{latex:i,identifier:__dcg_shared_module_exports__['eb'](i)}:void 0;return t.cachedAssignmentOrFunctionName={latex:t.latex,result:r},r}function H0(t){let e=t.cachedFunctionCallArgumentsLatex;if(e&&e.latex===t.latex)return e.parsedArgs;let i=sL(t.latex);return t.cachedFunctionCallArgumentsLatex={latex:t.latex,parsedArgs:i},i}function kP(t){var i,r;let e=(r=(i=t.formula)==null?void 0:i.typed_constant_value)==null?void 0:r.valueType;return e==null?!1:__dcg_shared_module_exports__['aa'](e)}function W0(t){var r;let e=(r=Er(t))==null?void 0:r.latex;var i=e==null?void 0:e.match(/^(\\token\{\d+\})$/);if(i)return i[1]}function IP(t){var r,o;let e=(o=(r=t.formula)==null?void 0:r.typed_constant_value)==null?void 0:o.valueType,i=!1;if(e&&__dcg_shared_module_exports__['aa'](e)&&(i=!0,e=__dcg_shared_module_exports__['ba'](e)),e==null||!__dcg_shared_module_exports__['ca'](e))return"U";switch(e){case __dcg_shared_module_exports__['s']:return i?"P":"p";case __dcg_shared_module_exports__['C']:case __dcg_shared_module_exports__['K']:case __dcg_shared_module_exports__['I']:return i?"L":"l";case __dcg_shared_module_exports__['S']:return i?"V":"v";case __dcg_shared_module_exports__['G']:case __dcg_shared_module_exports__['E']:return i?"C":"c";case __dcg_shared_module_exports__['M']:case __dcg_shared_module_exports__['O']:return i?"A":"a";case __dcg_shared_module_exports__['A']:return"P";case __dcg_shared_module_exports__['Q']:return"T";default:return e}}function YK(t){var i,r;let e=(r=(i=t.formula)==null?void 0:i.typed_constant_value)==null?void 0:r.valueType;if(e==null||(__dcg_shared_module_exports__['aa'](e)&&(e=__dcg_shared_module_exports__['ba'](e)),!__dcg_shared_module_exports__['ca'](e)))return"unknown";switch(e){case __dcg_shared_module_exports__['s']:return"point";case __dcg_shared_module_exports__['C']:return"segment";case __dcg_shared_module_exports__['K']:return"ray";case __dcg_shared_module_exports__['I']:return"line";case __dcg_shared_module_exports__['S']:return"vector";case __dcg_shared_module_exports__['G']:return"arc";case __dcg_shared_module_exports__['E']:return"circle";case __dcg_shared_module_exports__['M']:return"angle";case __dcg_shared_module_exports__['O']:return"directedangle";case __dcg_shared_module_exports__['A']:return"polygon";case __dcg_shared_module_exports__['Q']:return"transformation";default:return e}return"unknown"}function $0(t){var i,r;let e=(r=(i=t.formula)==null?void 0:i.typed_constant_value)==null?void 0:r.valueType;if(e==null||(__dcg_shared_module_exports__['aa'](e)&&(e=__dcg_shared_module_exports__['ba'](e)),!__dcg_shared_module_exports__['ca'](e)))return"unknown";switch(e){case __dcg_shared_module_exports__['s']:return"point";case __dcg_shared_module_exports__['C']:case __dcg_shared_module_exports__['K']:case __dcg_shared_module_exports__['I']:case __dcg_shared_module_exports__['S']:return"line";case __dcg_shared_module_exports__['G']:return"arc";case __dcg_shared_module_exports__['E']:return"circle";case __dcg_shared_module_exports__['M']:return"angle";case __dcg_shared_module_exports__['O']:return"directedangle";case __dcg_shared_module_exports__['A']:return"polygon";case __dcg_shared_module_exports__['Q']:return"transformation";default:return e}return"unknown"}function TP(t){return t.indexOf("\\token{")!==-1}function MP(t){var r,o,n,a;let e=(o=(r=t.formula.geometry)==null?void 0:r.call)==null?void 0:o.symbol,i=(a=(n=t.formula)==null?void 0:n.typed_constant_value)==null?void 0:a.valueType;return!e||e==="apply"||__dcg_shared_module_exports__['$b'](e)&&i!==void 0&&!__dcg_shared_module_exports__['fa'](i,__dcg_shared_module_exports__['Q'])?YK(t):e}function JK(t){return!!(t.sliderExists&&(t.slider.isPlaying||t.sliderDragging)||t.draggingOnGraphpaper)}function GP(t){return!!(t.sliderExists&&t.sliderDragging||t.draggingOnGraphpaper)}function j0(t){var e=JK(t);e?t.preTransientState||(t.preTransientState={latex:t.latex,slider:{min:t.slider.min,max:t.slider.max,playDirection:t.slider.playDirection}}):delete t.preTransientState,(!t.sliderExists||!t.slider.isPlaying)&&(t.sliderLastTickTime=void 0),ml(t),UK(t),zK(t),WK(t),$K(t),jK(t),HK(t)}var XK=__dcg_shared_module_exports__['a']({id:!1,type:!1,color:!0,folderId:!0,latex:!0,showLabel:!0,showAngleLabel:!0,label:!0,hidden:!0,secret:!0,readonly:!0,disableGraphInteractions:!0,points:!0,lines:!0,lineStyle:!0,arrowMode:!0,pointStyle:!0,fill:!0,dragMode:!0,labelSize:!0,labelOrientation:!0,suppressTextOutline:!0,interactiveLabel:!0,editableLabelMode:!0,residualVariable:!0,regressionParameters:!0,isLogModeRegression:!0,displayEvaluationAsFraction:!0,slider:!0,strictIntersection:!0,angleType:!0,showAngleDirection:!0,extendTo3D:!1},__dcg_shared_module_exports__['Wc'](__dcg_shared_module_exports__['ad']));function ZL(t,e){__dcg_shared_module_exports__['Tc']({from:e,to:t,props:XK}),t.resetSliderAnimationTargetValue=!0,t.sliderAnimationTargetValue=void 0}function Eh(t,e){e?Go(t,{hardMin:!0,min:e}):Go(t,{hardMin:!1,min:t.controller.is3dProduct()?`${__dcg_shared_module_exports__['Xb'].xmin}`:"-10"})}function Dh(t,e){e?Go(t,{hardMax:!0,max:e}):Go(t,{hardMax:!1,max:t.controller.is3dProduct()?`${__dcg_shared_module_exports__['Xb'].xmax}`:"10"})}function Go(t,e){t.slider=__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},t.slider),e)}function ua(t,e){!t||t.slider.isPlaying===e||(Go(t,{isPlaying:e}),e&&(Ph(t),t.sliderAnimationTargetValue=Aa(t)))}function Ph(t){if(!t.slider.hardMin){let e=__dcg_shared_module_exports__['tc'](Ga(t));e!==t.slider.min&&Go(t,{min:e})}if(!t.slider.hardMax){let e=__dcg_shared_module_exports__['tc'](ks(t));e!==t.slider.max&&Go(t,{max:e})}}function Wn(t,e){var i=ff(e);if(isFinite(i)){let r=__dcg_shared_module_exports__['Yb']({target:i,step:Ja(t),hardMin:t.slider.hardMin?Ga(t):void 0,hardMax:t.slider.hardMax?ks(t):void 0});r.min||Go(t,{hardMin:!1,min:"-10"}),r.max||Go(t,{hardMax:!1,max:"10"}),r.step||Go(t,{step:""})}t.latex=e}function AP(t,e){Go(t,{loopMode:e,playDirection:1}),e==="PLAY_INDEFINITELY"&&Go(t,{hardMin:!1,hardMax:!1,min:"",max:""}),t.sliderAnimationTargetValue=Ga(t)}function Sf(t,e){e&&Ph(t),t.sliderDragging=e}function cf(t,e){Go(t,{step:e})}function VP(t,e){Go(t,{animationPeriod:e})}function md(t){return t.displayEvaluationAsFraction}function LP(t,e){t.displayEvaluationAsFraction=e}function bc(t,e){t.label=e}function Vp(t,e){ud(t)?t.showAngleLabel=e:t.showLabel=e}function PP(t,e){t.description=e}function qn(t,e,i){switch(i){case"theta":t.polarDomain=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.polarDomain),{min:e});break;case"t":t.parametricDomain=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.parametricDomain),{min:e});break;case"u":t.parametricDomain3Du=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.parametricDomain3Du),{min:e});break;case"v":t.parametricDomain3Dv=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.parametricDomain3Dv),{min:e});break;case"r":t.parametricDomain3Dr=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.parametricDomain3Dr),{min:e});break;case"phi":t.parametricDomain3Dphi=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.parametricDomain3Dphi),{min:e});break;default:return i}}function zn(t,e,i){switch(i){case"theta":t.polarDomain=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.polarDomain),{max:e});break;case"t":t.parametricDomain=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.parametricDomain),{max:e});break;case"u":t.parametricDomain3Du=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.parametricDomain3Du),{max:e});break;case"v":t.parametricDomain3Dv=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.parametricDomain3Dv),{max:e});break;case"r":t.parametricDomain3Dr=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.parametricDomain3Dr),{max:e});break;case"phi":t.parametricDomain3Dphi=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.parametricDomain3Dphi),{max:e});break;default:return i}}function Y0(t,e){t.isLogModeRegression=e}function nv(t,e){ih(e)&&(t.color=e,t.colorLatex="")}function J0(t,e){t.fill=e}function df(t,e){t.fillOpacity!==e&&(t.fillOpacity=e)}function kh(t,e){t.lineOpacity!==e&&(t.lineOpacity=e)}function pf(t,e){t.pointOpacity!==e&&(t.pointOpacity=e)}function uf(t,e){t.pointSize!==e&&(t.pointSize=e)}function Ih(t,e){t.lineWidth!==e&&(t.lineWidth=e)}function Pw(t,e){t.resolution!==e&&(t.resolution=e)}function hf(t,e){t.colorLatex!==e&&(t.colorLatex=e)}function OP(t,e){t.labelDropdownOpen=e}function Lp(t,e){Lh(t,{type:"drag-mode",dragMode:e})}function X0(t,e){t.points=e}function Q0(t,e){t.pointStyle!==e&&(t.pointStyle=e,e!=="POINT"&&(t.dragMode="NONE"))}function Z0(t,e){t.lines=e}function _P(t,e){t.extendTo3D=e}function av(t,e){t.lineStyle!==e&&(t.lineStyle=e)}function FP(t,e){t.arrowMode=e===QK(t)?"DEFAULT":e}function QK(t){return"NONE"}function gf(t,e){t.labelSize=e}function Ow(t,e){t.labelAngle=e}function ek(t,e){t.labelOrientation=e}function RP(t,e){t.suppressTextOutline=e}function Ef(t,e){Lh(t,{type:"interactive-label",interactive:e})}function sv(t,e){Lh(t,{type:"editable-label",editable:e})}function NP(t){return t.editableLabelMode}function Oh(t){let{editableLabelMode:e}=t;return e==="MATH"||e==="TEXT"}function BP(t,e){t.strictIntersection=e}function KP(t){return!!(qi(t)!=="NONE"&&Dn(t))}function qP(t,e){t.hidden=e,!e&&_h(t)&&(t.lines=t.points=t.fill=void 0)}function _h(t){if(El(t)&&!t.controller.isThreeDMode())return!1;let{points:e,lines:i,fill:r}=t,o=__dcg_shared_module_exports__['oc'](t.formula.expression_type,{points:e,lines:i,fill:r});return!o.points&&!o.lines&&!o.fill}function lv(t){return t.formula.map_type!==void 0?!1:Pp(t)||Rh(t)||gv(t)}function cv(t){return t.formula.map_type!==void 0?!1:XP(t)||JP(t)||rk(t)}function zP(t,e){switch(e){case"theta":return t.polarDomain.min;case"t":return t.parametricDomain.min;case"u":return t.parametricDomain3Du.min;case"v":return t.parametricDomain3Dv.min;case"r":return t.parametricDomain3Dr.min;case"phi":return t.parametricDomain3Dphi.min;default:return e}}function UP(t,e){switch(e){case"theta":return t.polarDomain.max;case"t":return t.parametricDomain.max;case"u":return t.parametricDomain3Du.max;case"v":return t.parametricDomain3Dv.max;case"r":return t.parametricDomain3Dr.max;case"phi":return t.parametricDomain3Dphi.max;default:return e}}function Fh(t){return!!t.formula.action_value&&Object.keys(t.formula.action_value).length>0}function HP(t){return!!t.sliderExists}function xl(t){return t.formula.expression_type==="POLYGON"}function El(t){return!!t.formula.is_inequality}function dv(t){return!!t.formula.is_regression}function Pp(t){return t.formula.expression_type==="PARAMETRIC"||t.formula.expression_type==="CURVE3D_xyz_t"&&!ok(t)&&!nk(t)}function pv(t){return t.formula.expression_type==="POINT3D"}function tk(t){return t.formula.expression_type==="CURVE3D_xyz_t"||t.formula.expression_type==="SLICE"||t.formula.expression_type==="SLICE_r\u03B8z_at_z"||t.formula.expression_type==="SLICE_zr\u03B8_at_r"||t.formula.expression_type==="SLICE_zr\u03B8_at_\u03B8"||t.formula.expression_type==="SLICE_zr\u03B8_at_xyz"||t.formula.expression_type==="SLICE_r\u03B8\u03C6_at_\u03B8"||t.formula.expression_type==="SLICE_r\u03B8\u03C6_at_\u03C6"||t.formula.expression_type==="SLICE_r\u03B8\u03C6_at_xyz"||t.formula.expression_type==="SLICE_xyz_uv"}function WP(t){return t.formula.expression_type==="SLICE_zr\u03B8_at_r"||t.formula.expression_type==="SLICE_r\u03B8\u03C6_at_\u03B8"}function $P(t){return t.formula.expression_type==="SLICE_zr\u03B8_at_\u03B8"||t.formula.expression_type==="SLICE_r\u03B8\u03C6_at_\u03C6"}function ik(t){switch(t.formula.expression_type){case"SURFACE_xyz_uv":case"SURFACE_z_r\u03B8":case"SURFACE_r_\u03B8z":case"SURFACE_r_\u03B8z_AMBIGUOUS":case"SURFACE_r_\u03B8\u03C6":case"SURFACE":case"SURFACE_AMBIGUOUS":case"SURFACE_CONSTANT_AMBIGUOUS":case"IMPLICIT_SURFACE":case"IMPLICIT_SURFACE_AMBIGUOUS":case"TRIANGLE3D":case"SPHERE3D":return!0;default:return!1}}function uv(t){return t.formula.expression_type==="TRIANGLE3D"}function jP(t){return t.formula.expression_type==="SPHERE3D"}function YP(t){return t.formula.expression_type==="IMPLICIT_SURFACE"||t.formula.expression_type==="IMPLICIT_SURFACE_AMBIGUOUS"}function hv(t){return ZK(t)||eq(t)}function ZK(t){return t.formula.expression_type==="X_OR_Y"||t.formula.expression_type==="IMPLICIT"||t.formula.expression_type==="SURFACE_AMBIGUOUS"||t.formula.expression_type==="SURFACE_CONSTANT_AMBIGUOUS"||t.formula.expression_type==="IMPLICIT_SURFACE_AMBIGUOUS"}function eq(t){return!t.formula.is_inequality&&(t.formula.expression_type==="POLAR"||t.formula.expression_type==="SURFACE_r_\u03B8z_AMBIGUOUS")}function Rh(t){return t.formula.expression_type==="POLAR"}function gv(t){return __dcg_shared_module_exports__['sc'](t.formula.expression_type)}function rk(t){return __dcg_shared_module_exports__['rc'](t.formula.expression_type)}function JP(t){return __dcg_shared_module_exports__['qc'](t.formula.expression_type)}function XP(t){return t.formula.expression_type==="SURFACE_xyz_uv"||t.formula.expression_type==="SLICE_xyz_uv"}function ud(t){let e=t.formula.typed_constant_value;if(!e)return!1;let i=e.valueType;return i===__dcg_shared_module_exports__['M']||i===__dcg_shared_module_exports__['N']||i===__dcg_shared_module_exports__['O']||i===__dcg_shared_module_exports__['P']}function Es(t){let e=ud(t);return e&&t.showAngleLabel||!e&&t.showLabel}function QP(t){if(wl(t))return!0;let e=t.formula.typed_constant_value;if(!e)return!1;let i=e.valueType;return i===__dcg_shared_module_exports__['C']||i===__dcg_shared_module_exports__['D']||i===__dcg_shared_module_exports__['M']||i===__dcg_shared_module_exports__['N']||i===__dcg_shared_module_exports__['O']||i===__dcg_shared_module_exports__['P']}function ok(t){return t.formula.expression_type==="SEGMENT3D"}function nk(t){return t.formula.expression_type==="VECTOR3D"}function En(t){return t.formula.expression_type==="SINGLE_POINT"}function Df(t){return t.formula.expression_type==="POINT_LIST"}function wl(t){return t.formula.expression_type==="POINT_LIST"||t.formula.expression_type==="SINGLE_POINT"}function mv(t){return t.formula.expression_type==="POINT3D_LIST"}function fd(t){let e=Va(t);return!!(e&&e.type==="visualization"&&e.symbol==="boxplot")}function wc(t){let e=Va(t);return!!(e&&e.type==="visualization"&&e.symbol==="dotplot")}function Op(t){let e=Va(t);return!!(e&&e.type==="visualization"&&e.symbol==="histogram")}function fv(t){var e=fd(t)||wc(t)||Op(t);return e}function ak(t){return t.formula.expression_type==="TTEST"}function ZP(t){return t.formula.expression_type==="STATS"}function bd(t){let e=Va(t);return!!(e&&e.type==="distribution")}function eO(t){let{formula:e}=t;return e?!!e.is_discrete_distribution:!1}function Va(t){if(t.controller.areDistributionsEnabled()&&t.latex)return(!t.cachedParseToplevelFunction||t.cachedParseToplevelFunction.latex!==t.latex)&&(t.cachedParseToplevelFunction={latex:t.latex,spec:__dcg_shared_module_exports__['nc'](t.latex)}),t.cachedParseToplevelFunction.spec}function sk(t){return kf(t)&&bd(t)}function kf(t){return!!t.formula.expression_type}function lk(t){return!!t.formula.is_concrete_list}function vc(t){return!sk(t)||lk(t)?!1:t.cdf.show}function bv(t){return t.cdf.min}function yv(t){return t.cdf.max}function tO(t){var e=F0(t.formula.cdf_min_default);return e===-1/0?"-\\infty":isFinite(e)?e+"":"-\\infty"}function iO(t){var e=F0(t.formula.cdf_max_default);return e===1/0?"\\infty":isFinite(e)?e+"":"\\infty"}function rO(t,e){t.cdf=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.cdf),{show:e})}function _w(t,e){t.cdf=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.cdf),{min:e})}function Fw(t,e){t.cdf=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.cdf),{max:e})}function xv(t){return!!t.formula&&t.formula.cdf_min_valid!==!1}function wv(t){return!!t.formula&&t.formula.cdf_max_valid!==!1}function ck(t){return!!t.formula&&t.formula.fill_opacity_valid!==!1}function oO(t){return!!t.formula&&t.formula.line_opacity_valid!==!1}function nO(t){return!!t.formula&&t.formula.point_opacity_valid!==!1}function dk(t){return!!t.formula&&t.formula.label_size_valid!==!1}function pk(t){return!!t.formula&&t.formula.label_angle_valid!==!1}function vv(t){return!!t.formula&&t.formula.point_size_valid!==!1}function Cv(t){return!!t.formula&&t.formula.line_width_valid!==!1}function aO(t){return!!t.formula&&t.formula.resolution_valid!==!1}function rP(t){return!!t.formula&&t.formula.color_latex_valid!==!1}function oP(t){return t.formula&&t.formula.color_latex_value}function sO(t){return t.formula&&t.formula.label_angle_value}function uk(t){var e=t.formula&&t.formula.cdf_evaluation;return isFinite(e)?e:0}function hk(t){if(!t||!__dcg_shared_module_exports__['pc'](t.formula.expression_type))return!1;let e=qi(t);return!(e&&e!=="NONE")}function lO(t){t.showLabel=__dcg_shared_module_exports__['bd'].showLabel,t.showAngleLabel=__dcg_shared_module_exports__['bd'].showAngleLabel,t.label=__dcg_shared_module_exports__['bd'].label,t.hidden=__dcg_shared_module_exports__['bd'].hidden,t.dragMode=__dcg_shared_module_exports__['bd'].dragMode,t.fill=__dcg_shared_module_exports__['bd'].fill,t.points=__dcg_shared_module_exports__['bd'].points,t.pointStyle=__dcg_shared_module_exports__['bd'].pointStyle,t.lines=__dcg_shared_module_exports__['bd'].lines,t.lineStyle=__dcg_shared_module_exports__['bd'].lineStyle,t.slider=t.controller.is3dProduct()?__dcg_shared_module_exports__['dd']:__dcg_shared_module_exports__['cd'],t.latex="",t.labelSize="",t.labelOrientation="default",t.displayEvaluationAsFraction=__dcg_shared_module_exports__['bd'].displayEvaluationAsFraction,t.strictIntersection=__dcg_shared_module_exports__['bd'].strictIntersection,t.suppressTextOutline=!1,t.interactiveLabel=!1,t.editableLabelMode=__dcg_shared_module_exports__['bd'].editableLabelMode,__dcg_shared_module_exports__['Uc'](__dcg_shared_module_exports__['ad'],t)}function Sv(t){return!!t.formula.move_strategy}function gk(t,e){Lh(t,{type:"inert",disableGraphInteractions:e})}function ji(t,e){let i=t;i._dcgSaveClassName&&i._dcgSaveClassName(e)}function _i(t){let e=t;e._dcgRestoreClassName&&e._dcgRestoreClassName()}function cO(t,e){t.translate(e.left,e.top)}function tq(t,e){var i=document.createRange();i.selectNode(t);var r=i.getBoundingClientRect(),o=r.width>0&&r.height>0;if(!o)return;var n=window.getComputedStyle(t.parentElement),a=t.nodeValue||"";if(!a)return;var s=parseFloat(n.fontSize);let l=-.228*s,c=n.fontStyle+" "+n.fontWeight+" "+n.fontSize+" "+n.fontFamily;return{type:"text",rect:{left:r.left-e.pointCenterX,right:r.right-e.pointCenterY,top:r.top-e.pointCenterY,bottom:r.bottom-e.pointCenterY},text:a,color:n.color||"#000",font:c,y:r.height+l,hasOutline:e.hasOutline}}function dO(t,e,i){t.save(),t.font=e.font,i?(t.strokeStyle="#FFF",t.lineWidth=3,t.miterLimit=2,t.strokeText(e.text,0,e.y)):(t.fillStyle=e.color,t.fillText(e.text,0,e.y)),t.restore()}function pO(t,e,i){t.save(),i?(t.strokeStyle="#FFF",t.lineWidth=3):(e.fillColor&&(t.fillStyle=e.fillColor),e.strokeColor&&(t.strokeStyle=e.strokeColor)),t.beginPath();for(let r of e.instructions)switch(r.type){case"moveTo":t.moveTo(r.x,r.y);break;case"lineTo":t.lineTo(r.x,r.y);break;case"arcTo":t.arcTo(r.cx,r.cy,r.x,r.y,r.radius);break;case"ellipse":t.ellipse(r.centerX,r.centerY,r.radiusX,r.radiusY,r.rotation,r.startAngle,r.endAngle,r.anticlockwise);break}t.closePath(),i?t.stroke():(e.strokeColor&&t.stroke(),e.fillColor&&t.fill()),t.restore()}function iq(t,e){var i=t.getBoundingClientRect(),r=i.width>0&&i.height>0;if(r){var o=5,n=3,a=-o,s=i.width+o,l=-o,c=i.height+o,p=[{type:"moveTo",x:a+n,y:l},{type:"lineTo",x:s-n,y:l},{type:"arcTo",cx:s,cy:l,x:s,y:l+n,radius:n},{type:"lineTo",x:s,y:c-n},{type:"arcTo",cx:s,cy:c,x:s-n,y:c,radius:n},{type:"lineTo",x:a+n,y:c},{type:"arcTo",cx:a,cy:c,x:a,y:c-n,radius:n},{type:"lineTo",x:a,y:l+n},{type:"arcTo",cx:a,cy:l,x:a+n,y:l,radius:n}];return{type:"path",disableGlow:!0,rect:{left:i.left-e.pointCenterX,right:i.right-e.pointCenterX,top:i.top-e.pointCenterY,bottom:i.bottom-e.pointCenterY},instructions:p,strokeColor:"#C2C2C2",fillColor:"rgba(255,255,255,.75)"}}}function rq(t,e,i){var r=t.getBoundingClientRect(),o=r.width>0&&r.height>0;if(o){var n=r.width,a=parseFloat(e.borderTopWidth||"1px"),s=e.borderTopColor||"#000",l=[{type:"moveTo",x:0,y:0},{type:"lineTo",x:n,y:0},{type:"lineTo",x:n,y:a},{type:"lineTo",x:0,y:a}];return{type:"path",rect:{left:r.left-i.pointCenterX,right:r.right-i.pointCenterX,top:r.top-i.pointCenterY,bottom:r.bottom-i.pointCenterY},instructions:l,fillColor:s}}}function uO(t,e){var i=Math.sqrt(t[0]*t[0]+t[1]*t[1]),r=Math.sqrt(e[0]*e[0]+e[1]*e[1]),o=t[0]*e[0]+t[1]*e[1],n=Math.acos(o/(i*r));return t[0]*e[1]-t[1]*e[0]<0&&(n*=-1),n}function oq(t,e,i,r,o,n,a,s,l){var c=Math.cos(o),p=Math.sin(o),u=(t-s)/2,g=(e-l)/2,m=c*u+p*g,w=-p*u+c*g,C=i*i,S=r*r,k=m*m,M=w*w,I=Math.sqrt((C*S-C*M-S*k)/(C*M+S*k));n===a&&(I*=-1);var E=I*i*w/r,T=-I*r*m/i,A=(t+s)/2,G=(e+l)/2,_=c*E-p*T+A,P=p*E+c*T+G,N=[1,0],W=[(m-E)/i,(w-T)/r],X=[(-m-E)/i,(-w-T)/r],q=uO(N,W),B=uO(N,X);return{centerX:_,centerY:P,radiusX:i,radiusY:r,startAngle:q,endAngle:B,rotation:o,anticlockwise:a===0}}var hO={};function nq(t,e){var i=t+"-"+e,r=hO[i];if(r)return r;r=[],hO[i]=r;var o=e.split(" ");if(o.length!==4)return r;var n=parseFloat(o[0]),a=parseFloat(o[2]),s=parseFloat(o[1]),l=parseFloat(o[3]),c=a-n,p=l-s;function u(A){return(A-n)/c}function g(A){return(A-s)/p}var m="[0-9-.]+",w="(M"+m+" "+m+")",C="(L"+m+" "+m+")",S="(A"+m+" "+m+" "+m+" "+m+" "+m+" "+m+" "+m+")",k=new RegExp(w+"|"+C+"|"+S,"g"),M=t.match(k);if(!M||!M.length)return r;var I=NaN,E=NaN;for(let A of M){var T=A.substr(1).split(" ").map(parseFloat);switch(A[0]){case"M":I=u(T[0]),E=g(T[1]),r.push({type:"moveTo",x:I,y:E});break;case"L":I=u(T[0]),E=g(T[1]),r.push({type:"lineTo",x:I,y:E});break;case"A":let G=T[0]/c,_=T[1]/p,P=T[2],N=T[3],W=T[4],X=u(T[5]),q=g(T[6]),B=oq(I,E,G,_,P,N,W,X,q);I=X,E=q,r.push(__dcg_shared_module_exports__['a']({type:"ellipse"},B));break}}return r}function aq(t,e){var i=t.childNodes[0];if(!(!i||i.nodeName!=="path")){var r=t.getBoundingClientRect(),o=r.width>0&&r.height>0;if(o){var n=i.getAttribute("d")||"",a=t.getAttribute("viewBox")||"",s=nq(n,a),l=window.getComputedStyle(t),c=r.width,p=r.height;s=__dcg_shared_module_exports__['l'](s);for(let u of s)switch(u.type){case"moveTo":case"lineTo":u.x*=c,u.y*=p;break;case"arcTo":u.x*=c,u.y*=p,u.cx*=c,u.cy*=p,u.radius*=c;break;case"ellipse":u.centerX*=c,u.centerY*=p,u.radiusX*=c,u.radiusY*=p;break;default:return u}return{type:"path",rect:{left:r.left-e.pointCenterX,right:r.right-e.pointCenterX,top:r.top-e.pointCenterY,bottom:r.bottom-e.pointCenterY},fillColor:l.color||"#000",instructions:s}}}}function gO(t,e,i){var r=window.getComputedStyle(t);if(r.borderTopWidth!=="0px"){let s=rq(t,r,e);s&&i.push(s)}for(var o=t.childNodes,n=0;n<o.length;n++){var a=o[n];if(a.nodeType===3){let s=tq(a,e);s&&i.push(s)}else if(a.nodeName==="svg"){let s=aq(a,e);s&&i.push(s)}else a.nodeType===1&&gO(a,e,i)}}function Ev(t,e){let i=[];if(e.hasBorder){let r=iq(t,e);r&&i.push(r)}return gO(t,e,i),i}function Dv(t,e){ji(e,"dcg-svg-label"),e.save(),_i(e);for(let i of t){switch(e.save(),cO(e,i.rect),i.type){case"path":i.disableGlow||pO(e,i,!0);break;case"text":i.hasOutline&&dO(e,i,!0);break;default:return i}e.restore()}for(let i of t){switch(e.save(),cO(e,i.rect),i.type){case"path":pO(e,i,!1);break;case"text":dO(e,i,!1);break;default:return i}e.restore()}e.restore()}var mO="v1.9";ad();function sq(t){function e(i){requestAnimationFrame(e),t(i)}requestAnimationFrame(e)}function lq(t){function e(){setTimeout(e,Bh),t(Date.now())}setTimeout(e,Bh)}var fO=vn().timeoutLoop,Bh=0;typeof fO=="string"&&(Bh=parseFloat(fO),isNaN(Bh)&&(Bh=1e3/60));var bO=Bh>0?lq:sq;var cq=0,dq="guid_"+Math.round(Math.random()*1e6)+"_"+new Date().getTime()+"_",mk=class{constructor(){this.__observers={},this.__eventObservers={},this.__oldProperties={},this.__propertyComparators={},this.guid=dq+ ++cq}unobserveAll(){this.__observers={},this.__eventObservers={}}getProperty(e){return this[e]}getOldProperty(e){return this.__oldProperties[e]}setProperty(e,i){var r=this[e];this[e]=i;var o=this.__propertyComparators[e];if(o){if(o(r,i))return}else if(__dcg_shared_module_exports__['Ra'](r,i))return;this.__oldProperties[e]=r,this.notifyPropertyChange(e)}setProperties(e){for(var i in e)e.hasOwnProperty(i)&&this.setProperty(i,e[i])}setPropertyComparator(e,i){this.__propertyComparators[e]=i}notifyPropertyChange(e){this.__callObservers(this.__observers,e,this)}observe(e,i){this.__addObservers(this.__observers,e,i)}unobserve(e){this.__removeObservers(this.__observers,e)}observeAndSync(e,i){this.observe(e,i);for(var r=e.split(" "),o=0;o<r.length;o++){var n=r[o].split("."),a=n[0];this.hasOwnProperty(a)&&i(a,this)}}triggerEvent(e,i){this.__callObservers(this.__eventObservers,e,i)}observeEvent(e,i){this.__addObservers(this.__eventObservers,e,i)}unobserveEvent(e){this.__removeObservers(this.__eventObservers,e)}__callObservers(e,i,r){var o=e[i];if(o)for(var n=0;n<o.length;n++)o[n].callback(i,r)}__removeObservers(e,i){for(var r=i.split(" "),o=0;o<r.length;o++){var n=r[o].split("."),a=n[0],s=n[1];if(a&&s){var l=e[a],c=[];if(!l)continue;for(var p=0;p<l.length;p++){var u=l[p];u.namespace!==s&&c.push(u)}e[a]=c}else if(a)delete e[a];else if(s)for(a in e)e.hasOwnProperty(a)&&this.__removeObservers(e,a+"."+s)}}__addObservers(e,i,r){for(var o=i.split(" "),n=0;n<o.length;n++){var a=o[n].split("."),s=a[0];if(!s)throw"Must supply a property to observe";var l=a[1],c={namespace:l,callback:r},p=e[s];p?p.push(c):e[s]=[c]}}},Zi=mk;var bk=new Zi;bO(function(t){bk.triggerEvent("tick",t)});var fk=0;function Cc(t){return fk+=1,bk.observeEvent("tick."+fk,function(e,i){t(i)}),fk}function _p(t){bk.unobserveEvent("tick."+t)}function Iv(t){var e=[];for(let r of t)if(!(!r||typeof r!="string")){var i=r.split("-")[0];e.push(r),e.push(i);for(let o in Fp){let n=Fp[o];o.split("-")[0]===i&&n.useAsRoot&&e.push(o)}}return e}var Fp={en:{displayName:"English (US)",userGuideURL:"https://docs.google.com/document/d/1gV-WgDjgR9hKKb32ffeUpjwggNAgfqxl0Gsg6xocbok/preview",useAsRoot:!1},es:{displayName:"Espa\xF1ol (LATAM)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ES-ES.pdf",useAsRoot:!0},et:{displayName:"Eesti",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ru:{displayName:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_RU.pdf",useAsRoot:!1},da:{displayName:"Dansk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},de:{displayName:"Deutsch",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_DE.pdf",useAsRoot:!1},"pt-BR":{displayName:"Portugu\xEAs (Brasil)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!0},"pt-PT":{displayName:"Portugu\xEAs (Portugal)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ca:{displayName:"Catal\xE0",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},fr:{displayName:"Fran\xE7ais",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_FR.pdf",useAsRoot:!1},it:{displayName:"Italiano",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_IT.pdf",useAsRoot:!1},is:{displayName:"\xCDslenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},nl:{displayName:"Nederlands",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},no:{displayName:"Norsk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"sv-SE":{displayName:"Svenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!0},hu:{displayName:"Magyar",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},cs:{displayName:"\u010Ce\u0161tina",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},pl:{displayName:"Polski",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_PL.pdf",useAsRoot:!1},id:{displayName:"Bahasa Indonesia",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},vi:{displayName:"Ti\u1EBFng Vi\u1EC7t",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_VI.pdf",useAsRoot:!1},el:{displayName:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_EL.pdf",useAsRoot:!1},uk:{displayName:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ka:{displayName:"\u10E5\u10D0\u10E0\u10D7\u10E3\u10DA\u10D8",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},th:{displayName:"\u0E20\u0E32\u0E29\u0E32\u0E44\u0E17\u0E22",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},tr:{displayName:"T\xFCrk\xE7e",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_TR.pdf",useAsRoot:!1},"zh-CN":{displayName:"\u7B80\u4F53\u4E2D\u6587",useAsRoot:!0,userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-CN.pdf"},"zh-TW":{displayName:"\u7E41\u9AD4\u4E2D\u6587",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-TW.pdf",useAsRoot:!1},ko:{displayName:"\uD55C\uAD6D\uC5B4",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ja:{displayName:"\u65E5\u672C\u8A9E",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_JA.pdf",useAsRoot:!1}};var yO=`account-shell-button-cancel = Cancel
account-shell-button-mygraphs-cancel = Cancel
account-shell-label-success = Success
account-shell-link-help = Help
account-shell-link-read-blog = Read our blog
account-shell-link-try-a-quest = Try a quest
account-shell-text-3d-expression-list-notice = Please share any bugs, questions, or suggestions at: <1>feedback@desmos.com</1>
account-shell-text-welcome-to-3d = Welcome to Desmos 3D (Beta)
shared-button-close-dialog = Close Dialog
shared-button-close-message = Close Message
shared-button-read-more = Read More
shared-calculator-button-braille-mode-nemeth = Nemeth
shared-calculator-button-braille-mode-ueb = UEB
shared-calculator-button-controlbar-functions = functions
shared-calculator-button-go = Go
shared-calculator-error-3d-bad-equality-slice = We don't support this type of equality restriction.
shared-calculator-error-3d-equality-and-other-restriction = Cannot combine an equality restriction with any other restrictions.
shared-calculator-error-3d-length-type-error = Function '{ $fn }' cannot be applied to { $arg } in the 3d calculator. Use '{ $alternativeFn }' to find the number of elements in a list.
shared-calculator-error-action-merge-free-variable = Cannot combine an action that depends on free variable '{ $symbol }'.
shared-calculator-error-add-arguments-to-definition-many = Try including '{ $symbols }' and '{ $lastSymbol }' as arguments by defining the function as '{ $newSignature }'.
shared-calculator-error-add-arguments-to-definition-one = Try including '{ $lastSymbol }' as an argument by defining the function as '{ $newSignature }'.
shared-calculator-error-add-type-error = Cannot add { $symbol1 } and { $symbol2 }.
shared-calculator-error-adjacent-mixed-number = Sorry, I don't know what to do with mixed number '{ $mixedNumber }'. Try using a '*' symbol around it.
shared-calculator-error-adjacent-numbers = Sorry, I don't know what to do with adjacent numbers '{ $left }' and '{ $right }'. Try using parentheses or a '*' symbol.
shared-calculator-error-and-type-error = Cannot apply { $symbol } to { $symbol1 } and { $symbol2 }.
shared-calculator-error-ans-undefined = The previous expression didn't define any value for ans.
shared-calculator-error-assignments-unsupported = This calculator does not support defining variables.
shared-calculator-error-bad-for-input-list-dependency = A definition on the right-hand side of 'for' can't depend on input variable '{ $symbol }'.
shared-calculator-error-bad-for-interval-dependency = Parameter bounds on the right-hand side of 'for' can't depend on input variable '{ $symbol }'.
shared-calculator-error-bad-implicit-call = Use parentheses around the argument of '{ $symbol }'.
shared-calculator-error-bad-integral-bound-dependency = Integration bounds can't depend on integration variable '{ $symbol }'.
shared-calculator-error-bad-interval-comprehension-arity =
    { $count ->
        [one] You can't use 'for' to parameterize { $type } using 1 parameter.
       *[other] You can't use 'for' to parameterize { $type } using { $count } parameters.
    }
shared-calculator-error-bad-log-exponent = Only { $form } is supported. Otherwise, use parens.
shared-calculator-error-bad-product-bound-dependency = Product bounds can't depend on product index '{ $symbol }'.
shared-calculator-error-bad-sample-size = Sample size must be a finite, non-negative number.
shared-calculator-error-bad-sum-bound-dependency = Summation bounds can't depend on summation index '{ $symbol }'.
shared-calculator-error-bad-symbol-context = You can't use '{ $symbol }' in this context.
shared-calculator-error-bad-trig-exponent = Only { $form1 } and { $form2 } are supported. Otherwise, use parens.
shared-calculator-error-bad-tuple-dimensions = Points may only have { $symbol } coordinates.
shared-calculator-error-binary-operator-missing-operand = You need something on both sides of the '{ $symbol }' symbol.
shared-calculator-error-blank-expression = You haven't written anything yet.
shared-calculator-error-boxplot-breadth-invalid = Invalid height. Try using any number.
shared-calculator-error-boxplot-offset-invalid = Invalid offset. Try using any number.
shared-calculator-error-cannot-assign-color = Cannot assign a color to '{ $variable }'.
shared-calculator-error-cannot-redefine = You can't redefine '{ $symbol }' because it's already defined.
shared-calculator-error-cannot-redefine-root = You can't define '{ $symbol }' because '{ $symbolRoot }' is already defined.
shared-calculator-error-cannot-restrict = Cannot create a restriction based on '{ $variable }' in this type of expression.
shared-calculator-error-cannot-restrict-with-equality = Cannot create an equality restriction based on '{ $variable }' in this type of expression.
shared-calculator-error-cannot-subscript = '{ $symbol }' cannot have a subscript.
shared-calculator-error-cant-combine-spherical-and-cylindrical = Can't combine spherical and cylindrical coordinates.
shared-calculator-error-cdf-max-invalid = Invalid cdf max. Try using any number.
shared-calculator-error-cdf-max-less-than-min = Invalid cdf limits. Min should be less than max.
shared-calculator-error-cdf-min-invalid = Invalid cdf min. Try using any number.
shared-calculator-error-cdf-too-many-arguments = 'cdf' should be called on a distribution with at most two numbers. { $recommendation }
shared-calculator-error-cdf-too-many-arguments-recommendation = For example, try typing: D.cdf(-1,1) where D=normaldist().
shared-calculator-error-cdf-wrong-arity = 'cdf' should be called on a distribution with at least one number. { $recommendation }
shared-calculator-error-cdf-wrong-arity-recommendation = For example, try typing: D.cdf(x) where D=normaldist().
shared-calculator-error-clickable-object-assignment-not-defined = "{ $symbol }" is not defined. Try using a different variable or adding a slider.
shared-calculator-error-clickable-object-assignment-not-identifier = Invalid symbol. Try using a single letter.
shared-calculator-error-clickable-object-invalid-expression = Can't evaluate this. Try a number or simple expression.
shared-calculator-error-colon-missing-condition = The left side of a ':' must be a condition, like 'x>1'.
shared-calculator-error-color-arity = '{ $symbol }' should be called with 3 arguments. { $recommendation }
shared-calculator-error-color-arity-recommendation = For example, try typing: { $recommendation }.
shared-calculator-error-color-not-assigned = To use a color, you must assign it to a variable.
shared-calculator-error-combine-type-error = Cannot combine { $symbol1 } and { $symbol2 }.
shared-calculator-error-comparator-type-error = Cannot compare { $symbol1 } to { $symbol2 }.
shared-calculator-error-complicated-double-inequality = We only support solved double inequalities. Try deleting one side of the inequality.
shared-calculator-error-complicated-polar-implicit = Polar equations must be linear in r.
shared-calculator-error-constant-unsupported = This calculator does not support the constant '{ $symbol }'.
shared-calculator-error-custom-toolbar-not-condition = Please write a valid condition and make sure every referenced variable is defined.
shared-calculator-error-deeply-nested = Definitions are nested too deeply.
shared-calculator-error-dependency-cycle = '{ $symbols }' and '{ $lastSymbol }' can't be defined in terms of each other.
shared-calculator-error-depends-on-deleted-geo-object = This depends on a geometric object that's no longer defined.
shared-calculator-error-derivative-missing-body = What do you want to take the derivative of?
shared-calculator-error-derivative-type-error = Cannot take the derivative of { $symbol }.
shared-calculator-error-derivative-variable-type-error = Cannot take derivative with respect to '{ $symbol1 }' because it is { $symbol2 }.
shared-calculator-error-differential-with-superscript = Integration variable cannot have a superscript.
shared-calculator-error-distribution-as-function = Cannot call distribution '{ $symbol }' as a function. Try '{ $symbol }.pdf(x)'.
shared-calculator-error-divide-type-error = Cannot divide { $symbol1 } by { $symbol2 }.
shared-calculator-error-domain-max-invalid = Invalid domain max. Try using any number.
shared-calculator-error-domain-max-less-than-min = Invalid domain limits. Min should be less than max.
shared-calculator-error-domain-min-invalid = Invalid domain min. Try using any number.
shared-calculator-error-dot-lhs-type-error = Cannot call '.{ $symbol }' on { $type }.
shared-calculator-error-duplicate-update-rules = An action cannot specify multiple update rules for '{ $symbol }'.
shared-calculator-error-empty-paren = Parentheses cannot be empty.
shared-calculator-error-empty-pipe = Absolute value symbol cannot be empty.
shared-calculator-error-empty-radical = Radical cannot be empty.
shared-calculator-error-empty-radical-index = Radical index cannot be empty.
shared-calculator-error-empty-square-bracket = Square brackets cannot be empty.
shared-calculator-error-empty-subscript = Subscripts cannot be empty.
shared-calculator-error-empty-superscript = Superscripts cannot be empty.
shared-calculator-error-equation-required = Try adding an equals sign to turn this into an equation.
shared-calculator-error-equation-required-symbol = Try adding '{ $lhs }' to the beginning of this equation.
shared-calculator-error-equations-unsupported = This calculator does not support this type of equation.
shared-calculator-error-event-handler-type-error = This should be an action. Try '{ $example }'.
shared-calculator-error-exponent-type-error = Cannot raise { $symbol1 } to { $symbol2 }.
shared-calculator-error-feature-unavailable = This feature is not available in the current calculator.
shared-calculator-error-fraction-empty = You need a numerator and denominator for your fraction.
shared-calculator-error-fraction-missing-denominator = You need a denominator for the bottom of your fraction.
shared-calculator-error-fraction-missing-numerator = You need a numerator for the top of your fraction.
shared-calculator-error-function-definition-unsupported = This calculator does not support function definitions.
shared-calculator-error-function-not-defined = Function '{ $dependency }' is not defined.
shared-calculator-error-function-type-error-1 = Function '{ $fn }' cannot be applied to { $arg }.
shared-calculator-error-function-type-error-2 = Function '{ $fn }' cannot be applied to { $arg1 } and { $arg2 }.
shared-calculator-error-function-type-error-many = Function '{ $fn }' cannot be applied to these arguments.
shared-calculator-error-function-unsupported = This calculator does not support the '{ $symbol }' function.
shared-calculator-error-geometry-length-type-error = Function '{ $fn }' cannot be applied to { $arg } in the geometry calculator. Use '{ $alternativeFn }' to find the number of elements in a list.
shared-calculator-error-gpu-function-unsupported = Cannot use the '{ $symbol }' function here.
shared-calculator-error-gpu-integral-unsupported = Cannot use integrals here.
shared-calculator-error-gpu-long-product = Products may not have more than { $maxTermCount } terms here.
shared-calculator-error-gpu-long-sum = Sums may not have more than { $maxTermCount } terms here.
shared-calculator-error-gpu-max-list-size = Lists may not have more than { $maxListSize } elements here.
shared-calculator-error-gpu-variable-list-length = List length cannot depend on variable '{ $symbol }' here.
shared-calculator-error-gpu-variable-product = Product bound cannot depend on variable '{ $symbol }' here.
shared-calculator-error-gpu-variable-sum = Sum bound cannot depend on variable '{ $symbol }' here.
shared-calculator-error-heterogeneous-list = All elements of a list must have the same type.
shared-calculator-error-identifier-as-function = '{ $symbol }' is a function. Try using parentheses.
shared-calculator-error-illegal-bin-width = The second argument to '{ $symbol }' must be a positive number.
shared-calculator-error-illegal-dot-call = Function '{ $symbol }' cannot be called with dot notation.
shared-calculator-error-implicits-disabled = Plotting implicit equations and inequalities is disabled.
shared-calculator-error-incorrect-list-comprehension-input = Definitions on the right-hand side of 'for' must set a variable equal to a list. Try i=[1...10].
shared-calculator-error-incorrect-product-lower-bound = Lower bound of a product must set a variable equal to a number. Try n=1.
shared-calculator-error-incorrect-sum-lower-bound = Lower bound of a sum must set a variable equal to a number. Try n=1.
shared-calculator-error-index-type-error = Cannot index { $symbol1 } with { $symbol2 }.
shared-calculator-error-inequalities-disabled = Plotting inequalities is disabled.
shared-calculator-error-inequalities-unsupported = This calculator does not support inequalities.
shared-calculator-error-inequality-chain-too-long = Cannot chain more than 2 inequalities.
shared-calculator-error-integral-argument-type-error = Cannot take the integral of { $symbol }.
shared-calculator-error-integral-lower-bound-type-error = Lower bound of an integral cannot be { $symbol }.
shared-calculator-error-integral-missing-body = What do you want to take the integral of?
shared-calculator-error-integral-missing-bound = Integrals must have upper and lower bounds.
shared-calculator-error-integral-missing-differential = Integrand must end with an integration variable, like dx.
shared-calculator-error-integral-upper-bound-type-error = Upper bound of an integral cannot be { $symbol }.
shared-calculator-error-invalid-dependent-first-table-column = This column header can't be defined elsewhere in the calculator.
shared-calculator-error-invalid-double-inequality-3d = Sorry, we don't plot double inequalities in this calculator.
shared-calculator-error-invalid-double-inequality-variables = We only plot double inequalities of x and y.
shared-calculator-error-invalid-first-table-column = First column may not be { $most } or { $last }.
shared-calculator-error-invalid-half-empty-range = Range must have an upper and lower bound.
shared-calculator-error-invalid-implicit-variables = We only support implicit equations of x and y.
shared-calculator-error-invalid-inequality-variables = We only plot inequalities of x and y, or r and \u03B8.
shared-calculator-error-invalid-interval-comprehension-invalid-bound = Parameter bounds on the right-hand side of 'for' must be of the form '0<{ $identifier }<1'.
shared-calculator-error-invalid-interval-comprehension-return-type = You can't use 'for' to parameterize { $type }.
shared-calculator-error-invalid-lhs = Sorry, you can't graph { $symbol } as a function of anything yet.
shared-calculator-error-invalid-operator-name = Operator names may only contain letters.
shared-calculator-error-invalid-regression-parameter = '{ $symbol }' may not be used as a regression parameter. Try using a list.
shared-calculator-error-invalid-subscript = Subscripts may only contain letters and digits. '{ $symbol }' is not allowed.
shared-calculator-error-invalid-table-entry = Table entries must be simple expressions. { $supplement }
shared-calculator-error-invalid-table-header = Table headers must be simple expressions. { $supplement }
shared-calculator-error-list-comprehension-input-type-error = A definition on the right-hand side of 'for' must be a list, but { $identifier } is { $actual }. Try { $identifier }={ $example }.
shared-calculator-error-list-type-error = Cannot store { $symbol1 } in a list.
shared-calculator-error-log-scale-box-plot = Cannot plot a box plot on a log scale.
shared-calculator-error-log-scale-dot-plot = Cannot plot a dot plot on a log scale.
shared-calculator-error-log-scale-histogram = Cannot plot a histogram on a log scale.
shared-calculator-error-log-scale-type-error = Cannot plot { $symbol } on a log scale.
shared-calculator-error-logbase-unsupported = This calculator does not support specifying the base of a logarithm. Try 'log' or 'ln'.
shared-calculator-error-malformed-list = Lists are written like this: [1, 2, 3].
shared-calculator-error-malformed-point = Points are written like this: (1, 2).
shared-calculator-error-matrix-add-dimensions = Cannot add matrices with different dimensions.
shared-calculator-error-matrix-assignment = This calculator does not support this type of variable definition. Try using 'New Matrix'.
shared-calculator-error-matrix-element-type-error = Cannot use { $arg } as an element of a matrix.
shared-calculator-error-matrix-fractional-power = A matrix can only be raised to integer powers.
shared-calculator-error-matrix-invalid-variable = Cannot use '{ $symbol }' as a variable.
shared-calculator-error-matrix-multiply-dimensions = Cannot multiply matrices with incompatible dimensions.
shared-calculator-error-matrix-power-dimensions = Only square matrices can be raised to a power.
shared-calculator-error-matrix-subtract-dimensions = Cannot subtract matrices with different dimensions.
shared-calculator-error-max-list-size = Lists may not have more than { $maxListSize } elements.
shared-calculator-error-method-requires-list = '{ $symbol }' requires a list. For example, try typing: { $recommendation }.
shared-calculator-error-mismatched-braces = Expected '{ $symbol1 }' to match '{ $symbol2 }'.
shared-calculator-error-mismatched-double-inequality = Double inequalities must both go the same way, e.g. { $example }.
shared-calculator-error-multiply-defined = You've defined '{ $dependency }' in more than one place. Try deleting some of the definitions of '{ $dependency }'.
shared-calculator-error-multiply-type-error = Cannot multiply { $symbol1 } by { $symbol2 }.
shared-calculator-error-multiply-type-error-2d = Ambiguous multiplication of { $symbol1 } by { $symbol2 }. Try typing: (1, 2) * (2, 1).
shared-calculator-error-multiply-type-error-3d = Ambiguous multiplication of { $symbol1 } by { $symbol2 }. Try typing: (1, 2, 3) cross (2, 1, 0).
shared-calculator-error-multiply-type-error-cross = Cannot take the cross product of { $symbol1 } and { $symbol2 }.
shared-calculator-error-negative-type-error = Cannot negate { $symbol }.
shared-calculator-error-nested-interval-comprehension = You can't yet use 'for' to introduce a new parameter to an already parameterized point.
shared-calculator-error-non-arithmetic-range = Ranges must be arithmetic sequences.
shared-calculator-error-non-list-double-reducer = Both arguments of '{ $symbol }' must be lists. For example, try typing: { $recommendation }.
shared-calculator-error-non-list-parameterized-reducer = The first argument of '{ $symbol }' must be a list. For example, try typing: { $recommendation }.
shared-calculator-error-non-singular-inverse = Singular matrices do not have an inverse.
shared-calculator-error-non-square-determinant = Only square matrices have a determinant.
shared-calculator-error-non-square-inverse = Only square matrices have an inverse.
shared-calculator-error-non-square-trace = Only square matrices have a trace.
shared-calculator-error-optimization-error = We couldn't find any region where this model is defined.
shared-calculator-error-ordered-pair-access-type-error = Cannot access a coordinate of { $symbol }.
shared-calculator-error-parameter-already-defined = You can't use '{ $dependency }' as a parameter of this function because '{ $dependency }' is already defined.
shared-calculator-error-parse-error = Sorry, I don't understand this.
shared-calculator-error-pdf-wrong-arity = 'pdf' should be called on a distribution with a number. { $recommendation }
shared-calculator-error-pdf-wrong-arity-recommendation = For example, try typing: D.pdf(x) where D=normaldist().
shared-calculator-error-percent-missing-of = '%' must be used with 'of'. Try '25% of 12'.
shared-calculator-error-piecewise-branch-type-error = Cannot use { $symbol1 } and { $symbol2 } as the branches in a piecewise. Every branch must have the same type.
shared-calculator-error-piecewise-condition-type-error = The condition in a piecewise expression must be { $symbol1 } but was { $symbol2 }.
shared-calculator-error-piecewise-missing-condition = A piecewise expression must have at least one condition.
shared-calculator-error-piecewise-part-missing-condition = Every part of a piecewise expression must have a condition except the last.
shared-calculator-error-point-type-error = Cannot use { $symbol1 } as a coordinate of { $symbol2 }.
shared-calculator-error-points-unsupported = This calculator does not support points.
shared-calculator-error-polygon-unsupported-in-3d = This calculator does not support the 'polygon' function. Try 'triangle' instead.
shared-calculator-error-prime-without-paren = Primed function calls must use parentheses.
shared-calculator-error-primed-function-arity = Prime notation can only be used for functions of a single argument.
shared-calculator-error-product-argument-type-error = Cannot take the product of { $symbol }.
shared-calculator-error-product-infinite-bound-type-error = Product bounds must be finite numbers.
shared-calculator-error-product-lower-bound-type-error = Lower bound of a product cannot be { $symbol }.
shared-calculator-error-product-missing-body = What do you want to take the product of?
shared-calculator-error-product-missing-bound = Products must have upper and lower bounds.
shared-calculator-error-product-upper-bound-type-error = Upper bound of a product cannot be { $symbol }.
shared-calculator-error-random-arity = 'random' should be called with no arguments, or an optional number of samples. For example, try random() or random(10).
shared-calculator-error-random-from-broadcast-distribution = Cannot sample from a list of distributions
shared-calculator-error-regression-type-error = Cannot regress { $symbol1 } against { $symbol2 }.
shared-calculator-error-regressions-unsupported = This calculator does not support regressions.
shared-calculator-error-self-referential-function = The definition of function '{ $symbol }' cannot depend on '{ $symbol }'.
shared-calculator-error-shadowed-index = You can't use '{ $symbol }' as an index because it's already defined.
shared-calculator-error-shadowed-integration-variable = You can't use '{ $symbol }' as an integration variable because it's already defined.
shared-calculator-error-shadowed-list-comprehension-input = You can't define '{ $symbol }' more than once on the right-hand side of 'for'.
shared-calculator-error-single-variable-implicit-equations-disabled = Plotting single-variable implicit equations is disabled.
shared-calculator-error-slider-limit-references-export = Slider limits cannot depend on the slider variable '{ $symbol }'.
shared-calculator-error-slider-max-invalid = Invalid slider max. Try using any number.
shared-calculator-error-slider-max-less-than-min = Invalid slider limits. Min should be less than max.
shared-calculator-error-slider-min-invalid = Invalid slider min. Try using any number.
shared-calculator-error-slider-step-invalid = Invalid slider step. Try using any number.
shared-calculator-error-substitution-ambiguous-comma = Ambiguous use of ',' and '{ $operation }'. Add parentheses around the '{ $operation }' expression.
shared-calculator-error-substitution-body-action = The left hand side of a 'with' substitution cannot be an action.
shared-calculator-error-substitution-body-regression-parameter-dependency = The left hand side of a '{ $operator }' substitution cannot depend on '{ $symbol }' because '{ $symbol }' is a regression parameter.
shared-calculator-error-substitution-duplicate-assignment = A 'with' expression cannot make multiple substitutions for '{ $symbol }'.
shared-calculator-error-substitution-function-lhs = Substituting for '{ $symbol }' is not allowed because it is a function.
shared-calculator-error-substitution-illegal-lhs = Substituting for '{ $symbol }' is not allowed.
shared-calculator-error-substitution-invalid-assignments = 'with' must be followed by one or more variable definitions.
shared-calculator-error-substitution-local-lhs = Substituting for variable '{ $symbol }' is not allowed because it is locally defined.
shared-calculator-error-substitution-nested = Using one 'with' expression inside another 'with' expression is not allowed.
shared-calculator-error-substitution-type-error = Cannot substitute { $actual } for { $expected }.
shared-calculator-error-substitution-unsupported-interval = Intervals are not allowed on the right-hand side of 'with'. You might want to try using 'for' instead.
shared-calculator-error-subtract-type-error = Cannot subtract { $symbol2 } from { $symbol1 }.
shared-calculator-error-sum-argument-type-error = Cannot take the sum of { $symbol }.
shared-calculator-error-sum-infinite-bound-type-error = Summation bounds must be finite numbers.
shared-calculator-error-sum-lower-bound-type-error = Lower bound of a sum cannot be { $symbol }.
shared-calculator-error-sum-missing-body = What do you want to take the sum of?
shared-calculator-error-sum-missing-bound = Sums must have upper and lower bounds.
shared-calculator-error-sum-upper-bound-type-error = Upper bound of a sum cannot be { $symbol }.
shared-calculator-error-superscript-with-prime = Superscripts and primes cannot be combined.
shared-calculator-error-table-entry-type-error = Table entry cannot be { $symbol }.
shared-calculator-error-table-equation-supplement = Equations are not allowed.
shared-calculator-error-table-function-definition-supplement = Function definitions are not allowed.
shared-calculator-error-table-generic-supplement = This type of expression is not allowed.
shared-calculator-error-table-header-type-error = Table header cannot be { $symbol }.
shared-calculator-error-table-inequality-supplement = Inequalities are not allowed.
shared-calculator-error-table-list-supplement = Lists are not allowed.
shared-calculator-error-table-regression-supplement = Regressions are not allowed.
shared-calculator-error-tdist-wrong-arity = 'tdist' requires 1 argument. For example, try typing: tdist(1).
shared-calculator-error-ticker-min-step-nonnegative = Min step must evaluate to a non-negative number.
shared-calculator-error-token-with-subscript = Tokens may not have subscripts.
shared-calculator-error-too-many-arguments = '{ $symbol }' accepts at most { $max } arguments.
shared-calculator-error-too-many-variables-many-symbols = Too many variables. Try defining '{ $variables }' or '{ $lastVariable }'.
shared-calculator-error-too-many-variables-no-symbols = Too many variables, I don't know what to do with this.
shared-calculator-error-too-many-variables-one-symbol = Too many variables. Try defining '{ $variable }'.
shared-calculator-error-transformation-definition-expected-types-1 = Try using { $arg }.
shared-calculator-error-transformation-definition-expected-types-2 = Try using { $arg1 } and { $arg2 }.
shared-calculator-error-transformation-definition-expected-types-use-fewer-1 = Try using just { $arg }.
shared-calculator-error-transformation-definition-expected-types-use-fewer-2 = Try using just { $arg1 } and { $arg2 }.
shared-calculator-error-transformation-definition-type-error-1 = A { $fn } cannot be defined using { $arg }. { $expectedTypeMessage }
shared-calculator-error-transformation-definition-type-error-2 = A { $fn } cannot be defined using { $arg1 } and { $arg2 }. { $expectedTypeMessage }
shared-calculator-error-transformation-definition-type-error-many = A '{ $fn }' cannot be defined with these arguments.
shared-calculator-error-transformation-definition-type-error-use-more-1 = A { $fn } cannot be defined using just { $arg }. { $expectedTypeMessage }
shared-calculator-error-transformation-definition-type-error-use-more-2 = A { $fn } cannot be defined using just { $arg1 } and { $arg2 }. { $expectedTypeMessage }
shared-calculator-error-transformation-type-error-1 = Transformation '{ $fn }' cannot be applied to { $arg }.
shared-calculator-error-transformation-type-error-2 = Transformation '{ $fn }' cannot be applied to { $arg1 } and { $arg2 }.
shared-calculator-error-transformation-type-error-many = Transformation '{ $fn }' cannot be applied to these arguments.
shared-calculator-error-ttest-list-too-short = Lists for '{ $symbol }' must have at least 2 elements.
shared-calculator-error-two-numbers-error = Cannot make a polygon from two numbers.
shared-calculator-error-unary-operator-missing-left = You need something before the '{ $symbol }' symbol.
shared-calculator-error-unary-operator-missing-right = You need something after the '{ $symbol }' symbol.
shared-calculator-error-unexpected-inequality = Cannot use an inequality here.
shared-calculator-error-unexpected-prime = Sorry, I don't understand this use of prime notation.
shared-calculator-error-unexpected-subscript = Only functions and variables may have subscripts.
shared-calculator-error-unexpected-symbol = Sorry, I don't understand the way that '{ $symbol }' is used here.
shared-calculator-error-unplottable-polar-function = We can't plot \u03B8 as a function of r. Try plotting r(\u03B8) instead.
shared-calculator-error-unrecognized-symbol = Sorry, I don't understand the '{ $symbol }' symbol.
shared-calculator-error-update-rule-function-lhs = '{ $symbol }' cannot be updated because it is a function.
shared-calculator-error-update-rule-illegal-lhs = Variable '{ $symbol }' cannot be updated.
shared-calculator-error-update-rule-local-lhs = Variable '{ $symbol }' cannot be updated because it is locally defined.
shared-calculator-error-update-rule-non-identifier-lhs = The left hand side of '{ $arrow }' should be a variable name like '{ $example }'.
shared-calculator-error-update-rule-type-error = Cannot update a variable to { $symbol }.
shared-calculator-error-update-rule-undefined-lhs = Variable '{ $symbol }' must be defined to be updated.
shared-calculator-error-use-r-for-cylindrical-coordinates = Can't combine '\u03C1' and 'z'. Try 'r' for cylindrical coordinates.
shared-calculator-error-use-rho-for-spherical-coordinates = Can't combine 'r' and '\u03C6'. Try '\u03C1' (rho) for spherical coordinates.
shared-calculator-error-variable-as-function = Variable '{ $dependency }' can't be used as a function.
shared-calculator-error-variable-function-free-variable = Function '{ $functionSymbol }' cannot depend on free variable '{ $variableSymbol }'.
shared-calculator-error-variable-invalid-function-name = This calculator can not use '{ $symbol }' as a function name.
shared-calculator-error-variable-length-distribution-list = The length of a list of distributions can't depend on free variable '{ $symbol }'.
shared-calculator-error-variable-length-product-body-depends-on-index = Can't take the product of a list whose length depends on product index '{ $symbol }'.
shared-calculator-error-variable-length-sum-body-depends-on-index = Can't sum a list whose length depends on summation index '{ $symbol }'.
shared-calculator-error-variable-length-top-level-list = Can't plot a list whose length depends on free variable '{ $symbol }'.
shared-calculator-error-variable-seed = Random seed cannot depend on free variable '{ $symbol }'.
shared-calculator-error-variable-unsupported = This calculator does not support the '{ $symbol }' variable.
shared-calculator-error-variables-unsupported = This calculator does not support variables like '{ $variable }'.
shared-calculator-error-write-integral = Type '{ $command }' for { $symbol }.
shared-calculator-error-wrong-arity-many-arg = Function '{ $dependency }' requires { $assignment_arity } arguments. { $supplement }
shared-calculator-error-wrong-arity-single-arg-too-few = Function '{ $dependency }' requires an argument. { $supplement }
shared-calculator-error-wrong-arity-single-arg-too-many = Function '{ $dependency }' requires only 1 argument. { $supplement }
shared-calculator-error-wrong-arity-supplement = For example, try typing: { $recommendation }.
shared-calculator-error-wrong-two-arg-arity = Function '{ $symbol }' requires 2 arguments. For example, try typing: { $recommendation }.
shared-calculator-error-zero-arg-reducer = Function '{ $symbol }' requires at least one argument. For example, try typing: { $symbol }(1, 2).
shared-calculator-label-toast-learn-more = Learn more
shared-calculator-label-toast-undo = Undo
shared-calculator-label-value-type-action = an action
shared-calculator-label-value-type-angle = an angle
shared-calculator-label-value-type-any = an unknown object
shared-calculator-label-value-type-arc = an arc
shared-calculator-label-value-type-bool = a true/false value
shared-calculator-label-value-type-circle = a circle
shared-calculator-label-value-type-color = a color
shared-calculator-label-value-type-directed-angle = a directed angle
shared-calculator-label-value-type-distribution = a distribution
shared-calculator-label-value-type-empty-list = an empty list
shared-calculator-label-value-type-error = an error object
shared-calculator-label-value-type-lambda-point = a parameterized point
shared-calculator-label-value-type-lambda-point3d = a parameterized 3d point
shared-calculator-label-value-type-line = a line
shared-calculator-label-value-type-list-of-3d-points = a list of 3D points
shared-calculator-label-value-type-list-of-angles = a list of angles
shared-calculator-label-value-type-list-of-any = a list of unknown objects
shared-calculator-label-value-type-list-of-arcs = a list of arcs
shared-calculator-label-value-type-list-of-bool = a list of true/false values
shared-calculator-label-value-type-list-of-circles = a list of circles
shared-calculator-label-value-type-list-of-colors = a list of colors
shared-calculator-label-value-type-list-of-directed-angles = a list of directed angles
shared-calculator-label-value-type-list-of-distributions = a list of distributions
shared-calculator-label-value-type-list-of-lambda-point = a list of parameterized points
shared-calculator-label-value-type-list-of-lambda-point3d = a list of parameterized 3d points
shared-calculator-label-value-type-list-of-lines = a list of lines
shared-calculator-label-value-type-list-of-numbers = a list of numbers
shared-calculator-label-value-type-list-of-points = a list of points
shared-calculator-label-value-type-list-of-polygons = a list of polygons
shared-calculator-label-value-type-list-of-rays = a list of rays
shared-calculator-label-value-type-list-of-restrictions = a list of restrictions
shared-calculator-label-value-type-list-of-segment3d = a list of 3d segments
shared-calculator-label-value-type-list-of-segments = a list of segments
shared-calculator-label-value-type-list-of-sphere3d = a list of 3d sphere
shared-calculator-label-value-type-list-of-tone = a list of tones
shared-calculator-label-value-type-list-of-transformations = a list of transformations
shared-calculator-label-value-type-list-of-triangle3d = a list of 3d triangles
shared-calculator-label-value-type-list-of-vector3d = a list of 3d vectors
shared-calculator-label-value-type-list-of-vectors = a list of vectors
shared-calculator-label-value-type-number = a number
shared-calculator-label-value-type-point = a point
shared-calculator-label-value-type-point3d = a 3d point
shared-calculator-label-value-type-polygon = a polygon
shared-calculator-label-value-type-ray = a ray
shared-calculator-label-value-type-restriction = a restriction
shared-calculator-label-value-type-seed = a string
shared-calculator-label-value-type-segment = a segment
shared-calculator-label-value-type-segment3d = a 3d segment
shared-calculator-label-value-type-sphere3d = a 3d sphere
shared-calculator-label-value-type-tone = a tone
shared-calculator-label-value-type-transformation = a transformation
shared-calculator-label-value-type-triangle3d = a 3d triangle
shared-calculator-label-value-type-vector = a vector
shared-calculator-label-value-type-vector3d = a 3d vector
shared-calculator-narration-author-mode = Author Mode
shared-calculator-narration-author-mode-off = Author mode off
shared-calculator-narration-author-mode-on = Author mode on
shared-calculator-narration-braille-mode = Braille Mode
shared-calculator-narration-control-toggle-switch-to-default = { $toggled } selected. Press Enter to switch to { $default }.
shared-calculator-narration-control-toggle-switch-to-toggled = { $default } selected. Press Enter to switch to { $toggled }.
shared-calculator-narration-disable-tool = Disable { $tool } when this condition is true
shared-calculator-narration-display-as-decimal = Displaying as fraction. Press Enter to display as Decimal
shared-calculator-narration-display-as-fraction = Displaying as decimal. Press Enter to display as Fraction
shared-calculator-narration-expression-index = Expression { $index }
shared-calculator-narration-expression-list = Expression List
shared-calculator-narration-hotkey-braille-mode-nemeth = Braille mode Nemeth
shared-calculator-narration-hotkey-braille-mode-off = Braille mode off
shared-calculator-narration-hotkey-braille-mode-ueb = Braille mode UEB
shared-calculator-narration-input-error = input has an error
shared-calculator-narration-item-clickable = { $item } clickable
shared-calculator-narration-item-selected = { $item } selected
shared-calculator-narration-item-unknown = Unknown
shared-calculator-narration-item-unselected = { $item } unselected
shared-calculator-narration-keypad = keypad
shared-calculator-narration-keypad-controlbar = Control Bar
shared-calculator-narration-keypad-key-10-n = Times ten to the power of
shared-calculator-narration-keypad-key-abs = Absolute Value
shared-calculator-narration-keypad-key-action-to = Set Value To
shared-calculator-narration-keypad-key-action-with = Substitute With
shared-calculator-narration-keypad-key-alpha = Alpha
shared-calculator-narration-keypad-key-angle = Angle
shared-calculator-narration-keypad-key-angles = Angles
shared-calculator-narration-keypad-key-ans = Answer
shared-calculator-narration-keypad-key-arc = Arc
shared-calculator-narration-keypad-key-arccos = Inverse Cosine
shared-calculator-narration-keypad-key-arccot = Inverse Cotangent
shared-calculator-narration-keypad-key-arccsc = Inverse Cosecant
shared-calculator-narration-keypad-key-arcsec = Inverse Secant
shared-calculator-narration-keypad-key-arcsin = Inverse Sine
shared-calculator-narration-keypad-key-arctan = Inverse Tangent
shared-calculator-narration-keypad-key-area = Area
shared-calculator-narration-keypad-key-backspace = Backspace
shared-calculator-narration-keypad-key-beta = Beta
shared-calculator-narration-keypad-key-binomialdist = Binomial Distribution
shared-calculator-narration-keypad-key-boxplot = Box Plot
shared-calculator-narration-keypad-key-ceil = Ceiling
shared-calculator-narration-keypad-key-center = Center
shared-calculator-narration-keypad-key-circle = Circle
shared-calculator-narration-keypad-key-corr = Correlation
shared-calculator-narration-keypad-key-cos = Cosine
shared-calculator-narration-keypad-key-cosh = Hyperbolic Cosine
shared-calculator-narration-keypad-key-cot = Cotangent
shared-calculator-narration-keypad-key-coterminal = Coterminal
shared-calculator-narration-keypad-key-coth = Hyperbolic Cotangent
shared-calculator-narration-keypad-key-cov = Co Variance
shared-calculator-narration-keypad-key-covp = Population Co Variance
shared-calculator-narration-keypad-key-csc = Cosecant
shared-calculator-narration-keypad-key-csch = Hyperbolic Cosecant
shared-calculator-narration-keypad-key-cubed = Cubed
shared-calculator-narration-keypad-key-decimal = Decimal
shared-calculator-narration-keypad-key-dilate = Dilate
shared-calculator-narration-keypad-key-directed-angle = Directed Angle
shared-calculator-narration-keypad-key-directed-angles = Directed Angles
shared-calculator-narration-keypad-key-distance = Distance
shared-calculator-narration-keypad-key-divide = Divide
shared-calculator-narration-keypad-key-dotplot = Dot Plot
shared-calculator-narration-keypad-key-enter = Enter
shared-calculator-narration-keypad-key-erf = Error Function
shared-calculator-narration-keypad-key-exp = Exponent
shared-calculator-narration-keypad-key-factorial = Factorial
shared-calculator-narration-keypad-key-floor = Floor
shared-calculator-narration-keypad-key-fraction = A over B
shared-calculator-narration-keypad-key-glider = Glider
shared-calculator-narration-keypad-key-histogram = Histogram
shared-calculator-narration-keypad-key-int = Integral
shared-calculator-narration-keypad-key-intersection = Intersection
shared-calculator-narration-keypad-key-inversecdf = Inverse CDF function
shared-calculator-narration-keypad-key-ittest = Independent T Test
shared-calculator-narration-keypad-key-left-arrow = Left Arrow
shared-calculator-narration-keypad-key-left-bracket = Left Bracket
shared-calculator-narration-keypad-key-left-paren = Left Parenthesis
shared-calculator-narration-keypad-key-line = Line
shared-calculator-narration-keypad-key-ln = Natural Log
shared-calculator-narration-keypad-key-log = Log
shared-calculator-narration-keypad-key-loga = Log A
shared-calculator-narration-keypad-key-mean = Mean
shared-calculator-narration-keypad-key-median = Median
shared-calculator-narration-keypad-key-midpoint = Midpoint
shared-calculator-narration-keypad-key-minus = Minus
shared-calculator-narration-keypad-key-normaldist = Normal Distribution
shared-calculator-narration-keypad-key-nthroot = Nth Root
shared-calculator-narration-keypad-key-parallel = Parallel
shared-calculator-narration-keypad-key-pdf = Probability Density Function
shared-calculator-narration-keypad-key-percent-of = Percent Of
shared-calculator-narration-keypad-key-perimeter = Perimeter
shared-calculator-narration-keypad-key-perpendicular = Perpendicular
shared-calculator-narration-keypad-key-phi = Phi
shared-calculator-narration-keypad-key-pi = Pi
shared-calculator-narration-keypad-key-plus = Plus
shared-calculator-narration-keypad-key-poissondist = Poisson Distribution
shared-calculator-narration-keypad-key-polygon = Polygon
shared-calculator-narration-keypad-key-prime = Function derivative
shared-calculator-narration-keypad-key-product = Product
shared-calculator-narration-keypad-key-quantile = Quantile
shared-calculator-narration-keypad-key-quartile = Quartile
shared-calculator-narration-keypad-key-radius = Radius
shared-calculator-narration-keypad-key-random = Random Number
shared-calculator-narration-keypad-key-ray = Ray
shared-calculator-narration-keypad-key-reciprocal = Reciprocal
shared-calculator-narration-keypad-key-reflect = Reflect
shared-calculator-narration-keypad-key-rho = Rho
shared-calculator-narration-keypad-key-right-arrow = Right Arrow
shared-calculator-narration-keypad-key-right-bracket = Right Bracket
shared-calculator-narration-keypad-key-right-paren = Right Parenthesis
shared-calculator-narration-keypad-key-rotate = Rotate
shared-calculator-narration-keypad-key-round = Round
shared-calculator-narration-keypad-key-sec = Secant
shared-calculator-narration-keypad-key-segment = Segment
shared-calculator-narration-keypad-key-segments = Segments
shared-calculator-narration-keypad-key-shift = Shift
shared-calculator-narration-keypad-key-sin = Sine
shared-calculator-narration-keypad-key-sinh = Hyperbolic Sine
shared-calculator-narration-keypad-key-spearman = Spearman Rank Correlation
shared-calculator-narration-keypad-key-sphere = Sphere
shared-calculator-narration-keypad-key-sqrt = Square Root
shared-calculator-narration-keypad-key-squared = Squared
shared-calculator-narration-keypad-key-stats = Summary statistics
shared-calculator-narration-keypad-key-stdev = Standard Deviation
shared-calculator-narration-keypad-key-stdevp = Standard Deviation of Population
shared-calculator-narration-keypad-key-subscript = Subscript
shared-calculator-narration-keypad-key-sum = Sum
shared-calculator-narration-keypad-key-superscript = Superscript
shared-calculator-narration-keypad-key-supplement = Supplement
shared-calculator-narration-keypad-key-tan = Tangent
shared-calculator-narration-keypad-key-tanh = Hyperbolic Tangent
shared-calculator-narration-keypad-key-tau = Tau
shared-calculator-narration-keypad-key-tdist = Student-t Distribution
shared-calculator-narration-keypad-key-theta = Theta
shared-calculator-narration-keypad-key-times = Times
shared-calculator-narration-keypad-key-toggle-audio-trace = Toggle Audio Trace
shared-calculator-narration-keypad-key-toggle-letters = Toggle Letters
shared-calculator-narration-keypad-key-toggle-numbers = Toggle Numbers
shared-calculator-narration-keypad-key-tone = Tone
shared-calculator-narration-keypad-key-translate = Translate
shared-calculator-narration-keypad-key-triangle = Triangle
shared-calculator-narration-keypad-key-tscore = T Score
shared-calculator-narration-keypad-key-ttest = T Test
shared-calculator-narration-keypad-key-uniformdist = Uniform Distribution
shared-calculator-narration-keypad-key-vector = Vector
shared-calculator-narration-keypad-key-vertices = Vertices
shared-calculator-narration-keypad-key-ythroot = Yth Root
shared-calculator-narration-keypad-plus-minus = Plus-Minus
shared-calculator-narration-math-input-error-message = expression has error
shared-calculator-narration-settings-display-size = Display Size
shared-calculator-narration-settings-display-size-default = Display size: default
shared-calculator-narration-settings-display-size-large = Display size: large
shared-calculator-narration-show-as-decimal = Show as Decimal
shared-calculator-narration-show-as-fraction = Show as Fraction
shared-calculator-narration-six-key-mode-off = Six Key Braille Input off
shared-calculator-narration-six-key-mode-on = Six Key Braille Input on
shared-calculator-text-customize-toolbar = Customize the Toolbar
shared-calculator-text-search-results =
    { $count ->
        [0] No results.
        [one] 1 result.
       *[other] { $count } results.
    }
shared-label-opens-in-new-tab = (opens in new tab)
shared-label-to = to
basic-calculator-button-controlbar-abc = abc
basic-calculator-button-controlbar-clear = clear
basic-calculator-button-controlbar-clear-all = clear all
basic-calculator-button-controlbar-func = func
basic-calculator-button-controlbar-main = main
basic-calculator-button-turn-braille-mode-off = Turn { $mode } off
basic-calculator-error-fractions-unavailable = Fractions are not available in the current calculator.
basic-calculator-heading-braille-table-type-this = Type this
basic-calculator-heading-braille-table-typeset = Typeset
basic-calculator-label-answer-hint = Your answers show up on this side.
basic-calculator-label-controlbar-deg = deg
basic-calculator-label-controlbar-rad = rad
basic-calculator-label-convert-to-decimal = Convert to decimal.
basic-calculator-label-convert-to-fraction = Convert to fraction.
basic-calculator-label-reverse-contrast = Reverse Contrast
basic-calculator-label-six-key-input = Six Key Braille Input
basic-calculator-link-download-braille-equations = Download Braille Equations
basic-calculator-link-view-braille-examples = View more examples
basic-calculator-narration-calc-description-fourfunction = Desmos Four-Function Calculator
basic-calculator-narration-calc-description-scientific = Desmos Scientific Calculator
basic-calculator-narration-controlbar-abc = A B C
basic-calculator-narration-controlbar-backspace = backspace
basic-calculator-narration-controlbar-clear = clear
basic-calculator-narration-controlbar-clear-all = clear all
basic-calculator-narration-controlbar-degrees = Degrees
basic-calculator-narration-controlbar-functions = Functions
basic-calculator-narration-controlbar-main = main
basic-calculator-narration-controlbar-radians = Radians
basic-calculator-narration-controlbar-redo = Redo
basic-calculator-narration-controlbar-settings = settings
basic-calculator-narration-controlbar-undo = Undo
basic-calculator-narration-convert-to-decimal = Displaying as fraction. Press Enter to display as Decimal
basic-calculator-narration-convert-to-fraction = Displaying as decimal. Press Enter to display as Fraction
basic-calculator-narration-hotkey-six-key-input-off = Six Key Braille Input off
basic-calculator-narration-hotkey-six-key-input-on = Six Key Braille Input on
basic-calculator-text-braille-mode-is-on = { $mode } is on!
basic-calculator-text-how-to-type-braille = Use a Refreshable Braille display, or just type Braille with a keyboard.
geometry-label-construct-instruction = Click down here to construct
geometry-label-pick-tool-instruction = Pick a tool to get started
graphing-calculator-button-audio-trace-hear-graph = Hear Graph
graphing-calculator-button-audio-trace-stop-graph = Stop Graph
graphing-calculator-button-change-image = Change Image
graphing-calculator-button-clear-graph = Delete All
graphing-calculator-button-done = Done
graphing-calculator-button-draggable = Draggable
graphing-calculator-button-edit-graph-on-desmos-logo = edit graph on
graphing-calculator-button-editable-math = Editable Math
graphing-calculator-button-editable-text = Editable Text
graphing-calculator-button-find-cdf = Find Cumulative Probability (CDF)
graphing-calculator-button-funcs = funcs
graphing-calculator-button-functions = functions
graphing-calculator-button-functions-menu-custom-colors = Custom Colors
graphing-calculator-button-functions-menu-number-theory = Number Theory
graphing-calculator-button-geometry-label-points-checkbox = Label Points
graphing-calculator-button-hide-folder-from-students-2 = Hide this folder from students.
graphing-calculator-button-keypad-audio-trace-off = Audio Trace Off
graphing-calculator-button-keypad-describe-axes = Describe Axes
graphing-calculator-button-keypad-describe-curve = Describe Curve
graphing-calculator-button-keypad-describe-curve-short = Curve
graphing-calculator-button-keypad-describe-point = Describe Point
graphing-calculator-button-keypad-describe-point-short = Point
graphing-calculator-button-label = Label
graphing-calculator-button-label-editable = Editable
graphing-calculator-button-label-show-on-hover = Show on hover
graphing-calculator-button-label-text-outline = Text outline
graphing-calculator-button-load-image-retry = Retry.
graphing-calculator-button-move-to-folder-action = Move
graphing-calculator-button-place-image-behind-graphs = Place behind graphs
graphing-calculator-button-regression-log-mode = Log Mode
graphing-calculator-button-regression-plot-residuals = plot
graphing-calculator-button-replace = Replace
graphing-calculator-button-reset-graph = Reset
graphing-calculator-button-settings-degrees = Degrees
graphing-calculator-button-settings-radians = Radians
graphing-calculator-button-settings-zoom-square = Zoom Square
graphing-calculator-button-show-all-table-rows = Show all
graphing-calculator-button-slider-add-all-variables = all
graphing-calculator-button-visual-parameters-binned = Binned
graphing-calculator-button-visual-parameters-center = Center
graphing-calculator-button-visual-parameters-count = Count
graphing-calculator-button-visual-parameters-density = Density
graphing-calculator-button-visual-parameters-exact = Exact
graphing-calculator-button-visual-parameters-exclude-outliers = Exclude Outliers
graphing-calculator-button-visual-parameters-left = Left
graphing-calculator-button-visual-parameters-relative = Relative
graphing-calculator-error-equation-contains-unresolved-details = This equation contains fine detail that has not been fully resolved.
graphing-calculator-error-expression-replacement = Replacement must be a valid function or variable name.
graphing-calculator-error-expression-search = Can only rename a valid function or variable name.
graphing-calculator-error-failed-to-load-image = Failed to load image.
graphing-calculator-error-image-invalid-angle = Invalid angle. Try using any number.
graphing-calculator-error-image-invalid-center = Invalid center. Try, for example, (0,0).
graphing-calculator-error-image-invalid-file = The file "{ $file }" is not an image
graphing-calculator-error-image-invalid-height = Invalid height. Try using any number.
graphing-calculator-error-image-invalid-opacity = Invalid opacity. Try using any number.
graphing-calculator-error-image-invalid-width = Invalid width. Try using any number.
graphing-calculator-error-log-axes-image = Cannot plot images on a log scale.
graphing-calculator-error-tone-frequency-out-of-range = Tones can only play for frequencies between { $min }Hz and { $max }Hz.
graphing-calculator-heading-advanced = Advanced
graphing-calculator-heading-audio-trace-describe = Describe
graphing-calculator-heading-audio-trace-navigation = Navigation
graphing-calculator-heading-audio-trace-screen-reader = Screen Reader
graphing-calculator-heading-calculus = Calculus
graphing-calculator-heading-clickable = Clickable
graphing-calculator-heading-dist-tab-distributions = Distributions
graphing-calculator-heading-dist-tab-visualizations = Visualizations
graphing-calculator-heading-drag = Drag
graphing-calculator-heading-fill = Fill
graphing-calculator-heading-functions-menu-advanced = Advanced
graphing-calculator-heading-functions-menu-polar = Polar Coordinates
graphing-calculator-heading-functions-menu-sound = Sound
graphing-calculator-heading-geometry = Geometry
graphing-calculator-heading-geometry-measurements = Properties & Measurements
graphing-calculator-heading-geometry-tools = Geometry Tools
graphing-calculator-heading-geometry-transformations = Transformations
graphing-calculator-heading-hyperbolic-trig = Hyperbolic Trig Functions
graphing-calculator-heading-image-opacity = Opacity
graphing-calculator-heading-inverse-trig = Inverse Trig Functions
graphing-calculator-heading-keypad-audio-trace-point-of-interest = <1>Point</1><2>of Interest</2>
graphing-calculator-heading-label = Label
graphing-calculator-heading-label-orientation = Orientation
graphing-calculator-heading-lines = Lines
graphing-calculator-heading-lists = List Operations
graphing-calculator-heading-points = Points
graphing-calculator-heading-regression-parameters = Parameters
graphing-calculator-heading-regression-residuals = Residuals
graphing-calculator-heading-regression-statistics = Statistics
graphing-calculator-heading-slider-animation-mode = Animation Mode
graphing-calculator-heading-slider-speed = Speed
graphing-calculator-heading-stat-tests = Statistical Tests
graphing-calculator-heading-stats = Statistics
graphing-calculator-heading-style = Style
graphing-calculator-heading-surfaces = Surfaces
graphing-calculator-heading-trig = Trig Functions
graphing-calculator-heading-visual-parameters-bar-heights = Bar Heights
graphing-calculator-heading-visual-parameters-bin-alignment = Bin Alignment
graphing-calculator-heading-visual-parameters-display-properties = Display Properties
graphing-calculator-heading-visual-parameters-x-values = X Values
graphing-calculator-label-add-depressed-image-tooltip = Add Depressed Image
graphing-calculator-label-add-hovered-image-tooltip = Add Hovered Image
graphing-calculator-label-add-item-tooltip = Add Item
graphing-calculator-label-add-slider = add slider:
graphing-calculator-label-angle-tooltip = Angle
graphing-calculator-label-animation-properties-tooltip = Animation Properties
graphing-calculator-label-audio-trace-curve = Curve
graphing-calculator-label-audio-trace-need-screen-reader = Your Screen Reader needs to be on to hear these.
graphing-calculator-label-audio-trace-point = Point
graphing-calculator-label-audio-trace-speed = Speed
graphing-calculator-label-audio-trace-volume = Volume
graphing-calculator-label-axes = Axes
graphing-calculator-label-braille-size-etc11 = ETC Romeo/Juliet (11.5 x 11 in)
graphing-calculator-label-braille-size-etc8 = ETC Romeo/Juliet (8.5 x 11 in)
graphing-calculator-label-braille-size-vpmax11 = VP Max (11.5 x 11 in)
graphing-calculator-label-braille-size-vpmax8 = VP Max (8.5 x 11 in)
graphing-calculator-label-cdf-maximum = Max:
graphing-calculator-label-cdf-minimum = Min:
graphing-calculator-label-change-depressed-image-tooltip = Change Depressed Image
graphing-calculator-label-change-hovered-image-tooltip = Change Hovered Image
graphing-calculator-label-convert-to-table-tooltip = Convert to Table
graphing-calculator-label-create-table = Create Table
graphing-calculator-label-depressed = Depressed
graphing-calculator-label-disable-graph-interactions = Disable Graph Interactions
graphing-calculator-label-disable-zoom = Disable zooming
graphing-calculator-label-display-properties = Preferences
graphing-calculator-label-drop-image-here = Drop Image Here
graphing-calculator-label-duplicate-expression-tooltip = Duplicate
graphing-calculator-label-edit-graph-bounds = Graph Bounds
graphing-calculator-label-edit-list-tooltip = Edit List
graphing-calculator-label-evaluation-list = { $count } element list
graphing-calculator-label-expression-delete-tooltip = Delete
graphing-calculator-label-expression-lowercase = expression
graphing-calculator-label-extend-to-3d = Extend to 3D
graphing-calculator-label-folder-lowercase = folder
graphing-calculator-label-geometry-move-to-folder-placeholder = Folder name
graphing-calculator-label-geometry-tools = Geometry Tools
graphing-calculator-label-geometry-tools-dropdown-menu-angle = Angle tools
graphing-calculator-label-geometry-tools-dropdown-menu-circle = Circle tools
graphing-calculator-label-geometry-tools-dropdown-menu-line = Line tools
graphing-calculator-label-geometry-tools-dropdown-menu-point = Point tools
graphing-calculator-label-geometry-tools-dropdown-menu-polygon = Polygon tools
graphing-calculator-label-geometry-tools-dropdown-menu-selection = Selection tools
graphing-calculator-label-geometry-tools-dropdown-menu-transformation = Transformation tools
graphing-calculator-label-geometry-tools-open-dropdown-menu-transformation = Open { $item } menu
graphing-calculator-label-hide-expression-list-tooltip = Hide Expression List
graphing-calculator-label-hide-keypad = Hide Keypad
graphing-calculator-label-hovered = Hovered
graphing-calculator-label-image-angle = Angle:
graphing-calculator-label-image-center = Center:
graphing-calculator-label-image-height = Height:
graphing-calculator-label-image-lowercase = image
graphing-calculator-label-image-opacity = Opacity:
graphing-calculator-label-image-width = Width:
graphing-calculator-label-label-size-tooltip = Label Scale Factor
graphing-calculator-label-line-thickness-3d-tooltip = Line Thickness
graphing-calculator-label-line-thickness-tooltip = Line Thickness (px)
graphing-calculator-label-list-index = Use <1>index</1> to reference the clicked index in the list.
graphing-calculator-label-lock-expression-tooltip = Prevent Editing
graphing-calculator-label-more-viewport-options = More Options
graphing-calculator-label-new-transformation = New Transformation
graphing-calculator-label-note-lowercase = note
graphing-calculator-label-opacity-tooltip = Opacity (0 to 1)
graphing-calculator-label-open-graph-tooltip = Open Graph
graphing-calculator-label-open-graph-with-shortcut-tooltip = Open Graph (CTRL+O)
graphing-calculator-label-poi-unknown = unknown coordinates
graphing-calculator-label-point-size-3d-tooltip = Point Size
graphing-calculator-label-point-size-tooltip = Point Size (px)
graphing-calculator-label-powered-by = powered by
graphing-calculator-label-randomize-tooltip = Randomize
graphing-calculator-label-recent-transformations = Recent Transformations
graphing-calculator-label-recenter = Center Origin
graphing-calculator-label-redo-tooltip = Redo
graphing-calculator-label-redo-with-shortcut-tooltip = Redo (CTRL+Y)
graphing-calculator-label-reference-count =
    { $count ->
        [one] (1 reference)
       *[other] ({ $count } references)
    }
graphing-calculator-label-regression-log-mode-help-tooltip = Log mode help
graphing-calculator-label-regression-parameters-not-exact = Parameters might not be exact. Click to learn more.
graphing-calculator-label-regression-what-is-rmse-tooltip = What is RMSE? Click to learn more.
graphing-calculator-label-regression-why-is-negative-tooltip = Why is this negative? Click to learn more.
graphing-calculator-label-remove-depressed-image = Remove depressed image
graphing-calculator-label-remove-hovered-image = Remove hovered image
graphing-calculator-label-rename = rename
graphing-calculator-label-resolution-tooltip = 3D Grid Sample Resolution
graphing-calculator-label-search-expressions = Search this graph
graphing-calculator-label-settings-all-axes = All axes:
graphing-calculator-label-settings-arrows = Arrows
graphing-calculator-label-settings-axis-labels-3d = Labels
graphing-calculator-label-settings-axis-numbers = Axis Numbers
graphing-calculator-label-settings-domain-plane = XY plane
graphing-calculator-label-settings-grid = Grid
graphing-calculator-label-settings-hidden-objects = Reveal { $count } hidden objects
graphing-calculator-label-settings-lock-viewport = Lock Viewport
graphing-calculator-label-settings-minor-gridlines = Minor Gridlines
graphing-calculator-label-settings-numbers-3d = Numbers
graphing-calculator-label-settings-one-quadrant = One Quadrant
graphing-calculator-label-settings-reverse-contrast = Reverse contrast
graphing-calculator-label-settings-six-key-braille = Six Key Braille Input
graphing-calculator-label-settings-step = Step:
graphing-calculator-label-settings-translucent-surfaces = Translucent surfaces
graphing-calculator-label-settings-x-axis = X-Axis
graphing-calculator-label-settings-y-axis = Y-Axis
graphing-calculator-label-show-keypad = Show Keypad
graphing-calculator-label-slider-disabled-while-ticker-playing = Sliders are disabled while the ticker is running.
graphing-calculator-label-slider-step = Step:
graphing-calculator-label-table-lowercase = table
graphing-calculator-label-ticker-close = cancel
graphing-calculator-label-ticker-help-tooltip = On slow computers, this might run slower. Use local variable "dt" to capture the actual update speed.
graphing-calculator-label-ticker-lowercase = ticker
graphing-calculator-label-ticker-min-step = Min Step Time
graphing-calculator-label-ticker-pause = pause
graphing-calculator-label-ticker-play = play
graphing-calculator-label-tooltip-geometry-settings = Geometry Settings
graphing-calculator-label-tooltip-graph-settings = Graph Settings
graphing-calculator-label-tooltip-open-graph = Open Graph
graphing-calculator-label-tooltip-reset = Reset
graphing-calculator-label-tooltip-show-list = Show List
graphing-calculator-label-tooltip-viewport-default = Default Viewport
graphing-calculator-label-tooltip-zoom-default-orientation = Default Orientation
graphing-calculator-label-tooltip-zoom-in = Zoom In
graphing-calculator-label-tooltip-zoom-out = Zoom Out
graphing-calculator-label-tooltip-zoom-xy-orientation = XY Orientation
graphing-calculator-label-undo-tooltip = Undo
graphing-calculator-label-undo-with-shortcut-tooltip = Undo (CTRL+Z)
graphing-calculator-label-unlock-expression-tooltip = Allow Editing
graphing-calculator-label-update-on-click = On click:
graphing-calculator-link-edit-on-desmos = edit graph on
graphing-calculator-link-learn-more = Learn more.
graphing-calculator-link-view-braille-examples = View examples
graphing-calculator-narration-3d-graphpaper-label = three-dimensional graph paper
graphing-calculator-narration-3d-orientation-options-label = Orientation
graphing-calculator-narration-add-expression = Add expression
graphing-calculator-narration-add-folder = Add folder
graphing-calculator-narration-add-image = Add image
graphing-calculator-narration-add-item-menu = Add Item Menu
graphing-calculator-narration-add-note = Add note
graphing-calculator-narration-add-slider-prompt = Add slider for { $vars }
graphing-calculator-narration-add-table = Add table
graphing-calculator-narration-add-ticker = Add Ticker
graphing-calculator-narration-all-folders-collapsed = all folders collapsed
graphing-calculator-narration-all-folders-expanded = all folders expanded
graphing-calculator-narration-audio-instructions-enter-audio-trace-mac = Press OPTION+T for audio trace.
graphing-calculator-narration-audio-instructions-enter-audio-trace-windows = Press ALT+T for audio trace.
graphing-calculator-narration-audio-trace-branch-not-found = Branch { $branch } does not exist.
graphing-calculator-narration-audio-trace-cannot-change-slider-value = Unable to adjust slider
graphing-calculator-narration-audio-trace-description-branch-count = Branches: { $branches }.
graphing-calculator-narration-audio-trace-description-color = Color: { $color }.
graphing-calculator-narration-audio-trace-description-multiple-extrema = { $count } extrema.
graphing-calculator-narration-audio-trace-description-multiple-intercepts = { $count } intercepts.
graphing-calculator-narration-audio-trace-description-multiple-intersections = { $count } intersections.
graphing-calculator-narration-audio-trace-description-multiple-labels = { $count } point labels.
graphing-calculator-narration-audio-trace-description-multiple-roots = { $count } zero crossings.
graphing-calculator-narration-audio-trace-description-no-curve-selected = No curve selected.
graphing-calculator-narration-audio-trace-description-one-extremum = 1 extremum.
graphing-calculator-narration-audio-trace-description-one-intercept = 1 intercept.
graphing-calculator-narration-audio-trace-description-one-intersection = 1 intersection.
graphing-calculator-narration-audio-trace-description-one-label = 1 point label.
graphing-calculator-narration-audio-trace-description-one-root = 1 zero crossing.
graphing-calculator-narration-audio-trace-description-shading-above = Shading above.
graphing-calculator-narration-audio-trace-description-shading-below = Shading below.
graphing-calculator-narration-audio-trace-description-shading-in-regions = Shading in regions.
graphing-calculator-narration-audio-trace-description-shading-left = Shading on the left.
graphing-calculator-narration-audio-trace-description-shading-right = Shading on the right.
graphing-calculator-narration-audio-trace-description-visible-grid = Grid lines are visible.
graphing-calculator-narration-audio-trace-description-visible-x-axis = X axis visible.
graphing-calculator-narration-audio-trace-description-visible-x-axis-and-label = X axis visible and is labeled { $label }.
graphing-calculator-narration-audio-trace-description-visible-x-axis-range = X axis visible from { $xmin } to { $xmax }.
graphing-calculator-narration-audio-trace-description-visible-x-axis-range-and-label = X axis visible from { $xmin } to { $xmax } and is labeled { $label }.
graphing-calculator-narration-audio-trace-description-visible-y-axis = Y axis visible.
graphing-calculator-narration-audio-trace-description-visible-y-axis-and-label = Y axis visible and is labeled { $label }.
graphing-calculator-narration-audio-trace-description-visible-y-axis-range = Y axis visible from { $ymin } to { $ymax }.
graphing-calculator-narration-audio-trace-description-visible-y-axis-range-and-label = Y axis visible from { $ymin } to { $ymax } and is labeled { $label }.
graphing-calculator-narration-audio-trace-description-visible-z-axis = Z axis visible.
graphing-calculator-narration-audio-trace-description-visible-z-axis-and-label = Z axis visible and is labeled { $label }.
graphing-calculator-narration-audio-trace-description-visible-z-axis-range = Z axis visible from { $zmin } to { $zmax }.
graphing-calculator-narration-audio-trace-description-visible-z-axis-range-and-label = Z axis visible from { $zmin } to { $zmax } and is labeled { $label }.
graphing-calculator-narration-audio-trace-expression-with-column = Expression { $index } column { $column }
graphing-calculator-narration-audio-trace-first-point = First point
graphing-calculator-narration-audio-trace-first-slider = First slider.
graphing-calculator-narration-audio-trace-instructions-disable-mac = To disable audio trace, press OPTION+T.
graphing-calculator-narration-audio-trace-instructions-disable-windows = To disable audio trace, press ALT+T.
graphing-calculator-narration-audio-trace-instructions-expression-navigation-mac = To move between expressions, press COMMAND+Up-Arrow or COMMAND+Down-Arrow.
graphing-calculator-narration-audio-trace-instructions-expression-navigation-windows = To move between expressions, press ALT+Up-Arrow or ALT+Down-Arrow.
graphing-calculator-narration-audio-trace-instructions-hear-graph = To hear the graph, press H.
graphing-calculator-narration-audio-trace-instructions-use-arrow-keys = Use Arrow keys to navigate.
graphing-calculator-narration-audio-trace-last-point = Last point
graphing-calculator-narration-audio-trace-last-slider = Last slider.
graphing-calculator-narration-audio-trace-multiple-sliders-paused = { $sliders } animating sliders were paused.
graphing-calculator-narration-audio-trace-no-more-pois = No more points of interest
graphing-calculator-narration-audio-trace-no-sliders-paused = No animating sliders were paused.
graphing-calculator-narration-audio-trace-one-slider-paused = One animating slider was paused.
graphing-calculator-narration-audio-trace-playback-speed = Graph playback speed { $speed }
graphing-calculator-narration-audio-trace-poi-count = Points of interest, { $x }.
graphing-calculator-narration-audio-trace-point-type-definition = Definition
graphing-calculator-narration-audio-trace-point-type-extremum = Extremum
graphing-calculator-narration-audio-trace-point-type-intercept = Intercept
graphing-calculator-narration-audio-trace-point-type-intersection = Intersection
graphing-calculator-narration-audio-trace-point-type-intersection-with-curves = Intersection with { $curves }
graphing-calculator-narration-audio-trace-point-type-label = Label
graphing-calculator-narration-audio-trace-point-type-not-a-poi = Not a P O I
graphing-calculator-narration-audio-trace-point-type-root = Zero
graphing-calculator-narration-audio-trace-point-type-trace = Trace
graphing-calculator-narration-audio-trace-property-branch-number = Branch { $branch }.
graphing-calculator-narration-audio-trace-property-type-before-coordinates = { $type } at
graphing-calculator-narration-audio-trace-property-x = X: { $x }.
graphing-calculator-narration-audio-trace-property-y = Y: { $y }.
graphing-calculator-narration-audio-trace-slider-value-unknown = Unable to determine slider value
graphing-calculator-narration-audio-trace-sound-effects-disabled = Sound effects have been disabled.
graphing-calculator-narration-audio-trace-traceable-curves =
    { $sketchCount ->
        [one] 1 audio traceable curve.
       *[other] { $sketchCount } audio traceable curves.
    }
graphing-calculator-narration-audio-trace-tracing-different-expression = Tracing { $expression }.
graphing-calculator-narration-audio-trace-unable-to-play = Unable to play audio.
graphing-calculator-narration-audio-trace-unable-to-trace-this-expression = Unable to audio trace this expression.
graphing-calculator-narration-audio-trace-unsupported-expression = { $expression } cannot be audio traced.
graphing-calculator-narration-audio-trace-volume = Volume { $volume } percent
graphing-calculator-narration-cdf-maximum = Max
graphing-calculator-narration-cdf-minimum = Min
graphing-calculator-narration-click-action = Click Action
graphing-calculator-narration-clickable-image-options = Clickable Image Options
graphing-calculator-narration-collapse = Collapse
graphing-calculator-narration-collapse-folder-index = Collapse Folder { $index }
graphing-calculator-narration-collapse-folder-title = Collapse { $folder } folder
graphing-calculator-narration-color-unknown = unknown
graphing-calculator-narration-computed-cell-role-description = computed cell
graphing-calculator-narration-configure-toolbar = Geometry Toolbar Configuration
graphing-calculator-narration-create-table = Create Table
graphing-calculator-narration-create-table-expression = Create Table from Expression { $index }
graphing-calculator-narration-create-table-secret-expression = Create Table from Secret Expression { $index }
graphing-calculator-narration-delete = Delete
graphing-calculator-narration-delete-expression = Delete Expression { $index }
graphing-calculator-narration-delete-folder-index = Delete Folder { $index }
graphing-calculator-narration-delete-folder-title = Delete { $folder } folder
graphing-calculator-narration-delete-image = Delete Image { $index }
graphing-calculator-narration-delete-secret-expression = Delete Secret Expression { $index }
graphing-calculator-narration-delete-table = Delete Table { $index }
graphing-calculator-narration-delete-text = Delete Note { $index }
graphing-calculator-narration-describe = Unknown object
graphing-calculator-narration-describe-expression = Expression { $index }
graphing-calculator-narration-describe-folder-index = Folder { $index }
graphing-calculator-narration-describe-folder-title = { $folder } folder
graphing-calculator-narration-describe-image = Image { $index }
graphing-calculator-narration-describe-secret-expression = Secret expression { $index }
graphing-calculator-narration-describe-table = Table { $index }
graphing-calculator-narration-describe-text = Note { $index }
graphing-calculator-narration-description-collapsed-folder = Collapsed Folder
graphing-calculator-narration-description-collapsed-readonly-folder = Collapsed Locked Folder
graphing-calculator-narration-description-collapsed-secret-folder = Collapsed Secret Folder
graphing-calculator-narration-description-collapsed-secret-readonly-folder = Collapsed Secret Locked Folder
graphing-calculator-narration-description-folder = Folder
graphing-calculator-narration-description-hidden-collapsed-folder = Hidden Collapsed Folder
graphing-calculator-narration-description-hidden-collapsed-readonly-folder = Hidden Collapsed Locked Folder
graphing-calculator-narration-description-hidden-collapsed-secret-folder = Hidden Collapsed Secret Folder
graphing-calculator-narration-description-hidden-collapsed-secret-readonly-folder = Hidden Collapsed Secret Locked Folder
graphing-calculator-narration-description-hidden-folder = Hidden Folder
graphing-calculator-narration-description-hidden-readonly-folder = Hidden Locked Folder
graphing-calculator-narration-description-hidden-secret-folder = Hidden Secret Folder
graphing-calculator-narration-description-hidden-secret-readonly-folder = Hidden Secret Locked Folder
graphing-calculator-narration-description-readonly-folder = Locked Folder
graphing-calculator-narration-description-secret-folder = Secret Folder
graphing-calculator-narration-description-secret-readonly-folder = Secret Locked Folder
graphing-calculator-narration-dist-tab-distributions = Distributions
graphing-calculator-narration-dist-tab-visualizations = Visualizations
graphing-calculator-narration-domain3d-maximum = domain { $term } Maximum:
graphing-calculator-narration-domain3d-minimum = domain { $term } Minimum:
graphing-calculator-narration-drag-mode-x = X
graphing-calculator-narration-drag-mode-xy = X and Y
graphing-calculator-narration-drag-mode-y = Y
graphing-calculator-narration-draggable-image-off-screen-prompt = { " " }not completely visible on screen
graphing-calculator-narration-duplicate = Duplicate
graphing-calculator-narration-duplicate-expression = Duplicate Expression { $index }
graphing-calculator-narration-duplicate-folder-index = Duplicate Folder { $index }
graphing-calculator-narration-duplicate-folder-title = Duplicate { $folder } folder
graphing-calculator-narration-duplicate-image = Duplicate Image { $index }
graphing-calculator-narration-duplicate-secret-expression = Duplicate Secret Expression { $index }
graphing-calculator-narration-duplicate-table = Duplicate Table { $index }
graphing-calculator-narration-duplicate-text = Duplicate Note { $index }
graphing-calculator-narration-edit-action = Edit Action
graphing-calculator-narration-edit-expression-list = Edit Expression List
graphing-calculator-narration-edit-folder-title = Edit Folder { $index } Title
graphing-calculator-narration-edit-graph-on-desmos = Edit graph on Desmos
graphing-calculator-narration-edit-image-title = Edit Image { $index } Title
graphing-calculator-narration-edit-list-mode-off = Edit list mode off.
graphing-calculator-narration-edit-list-mode-on = Edit list mode on.
graphing-calculator-narration-edit-on-desmos = Edit graph on Desmos
graphing-calculator-narration-edit-slider-variable-limits = Edit { $variable } Limits
graphing-calculator-narration-edit-text-title = Note { $index }
graphing-calculator-narration-edit-title = Edit Title
graphing-calculator-narration-editable-label-mode = Editable label mode
graphing-calculator-narration-editable-point-label-at-coordinates = Editable point label at { $coordinates }
graphing-calculator-narration-expand = Expand
graphing-calculator-narration-expand-folder-index = Expand Folder { $index }
graphing-calculator-narration-expand-folder-title = Expand { $folder } folder
graphing-calculator-narration-expression-audio-trace-mac = To audio trace, press OPTION+T.
graphing-calculator-narration-expression-audio-trace-windows = To audio trace, press ALT+T.
graphing-calculator-narration-expression-bar = Expression Bar
graphing-calculator-narration-expression-evaluation-has-graph = Has graph.
graphing-calculator-narration-expression-evaluation-has-graph-and-regression = Has graph and regression. To access statistics, press Tab.
graphing-calculator-narration-expression-evaluation-has-regression = Has regression. To access statistics, press Tab.
graphing-calculator-narration-expression-evaluation-is-distribution = is distribution.
graphing-calculator-narration-expression-evaluation-is-t-test = is T test. To access statistics, press Tab.
graphing-calculator-narration-expression-hidden-label = Hidden { $label }
graphing-calculator-narration-expression-index-table = Expression { $index } table
graphing-calculator-narration-expression-label = Label
graphing-calculator-narration-expression-tone-muted = Muted tone.
graphing-calculator-narration-expression-tone-unmuted = Unmuted tone.
graphing-calculator-narration-fill-opacity = Fill Opacity:
graphing-calculator-narration-fill-visible = Fill visible
graphing-calculator-narration-folder-collapsed = folder collapsed
graphing-calculator-narration-folder-expanded = folder expanded
graphing-calculator-narration-folder-has-items = { $folder } has { $count } items
graphing-calculator-narration-functions = Functions
graphing-calculator-narration-geometry-added-object-type = Added { $type }.
graphing-calculator-narration-geometry-added-object-type-and-point = Added { $type } and 1 point.
graphing-calculator-narration-geometry-added-object-type-and-points = Added { $type } and { $points } points.
graphing-calculator-narration-geometry-added-points = Added { $points } points.
graphing-calculator-narration-geometry-angle-at-coordinates-through-points = { $itemDescription } through { $parent1 }, { $parent2 }, and { $parent3 } at { $x1 } { $y1 }
graphing-calculator-narration-geometry-angle-of-polygon-at-coordinates = { $itemDescription } of { $parent } at { $x } { $y }
graphing-calculator-narration-geometry-angle-with-assignment = Angle { $assignment }
graphing-calculator-narration-geometry-angle-with-measurement-and-assignment = { $measurementText } Angle { $assignment }
graphing-calculator-narration-geometry-arc-with-assignment = Arc { $assignment }
graphing-calculator-narration-geometry-circle-with-assignment = Circle { $assignment }
graphing-calculator-narration-geometry-construction-icon-label = Token Count
graphing-calculator-narration-geometry-construction-role-description = construction
graphing-calculator-narration-geometry-deselect-all = Deselect All
graphing-calculator-narration-geometry-dilated-item = dilated { $item }
graphing-calculator-narration-geometry-directed-angle-with-assignment = Directed Angle { $assignment }
graphing-calculator-narration-geometry-directed-angle-with-measurement-and-assignment = { $measurementText } Directed Angle { $assignment }
graphing-calculator-narration-geometry-edge-of-polygon = Edge { $polygonEdge } of { $item }
graphing-calculator-narration-geometry-glider-with-assignment = GliderW { $assignment }
graphing-calculator-narration-geometry-hidden-construction-description = Hidden { $description }
graphing-calculator-narration-geometry-intersection-with-assignment = Intersection { $assignment }
graphing-calculator-narration-geometry-item-at-coordinates-and-intersection = { $itemDescription } intersecting { $parent1 } and { $parent2 } at { $x } { $y }
graphing-calculator-narration-geometry-item-at-coordinates-and-parent = { $itemDescription } of { $parent } at { $x } { $y }
graphing-calculator-narration-geometry-item-at-coordinates-to-coordinates = { $itemDescription } from { $x1 } { $y1 } to { $x2 } { $y2 }
graphing-calculator-narration-geometry-item-at-coordinates-with-middle-and-end = { $itemDescription } starting at { $x1 } { $y1 } middle at { $x2 } { $y2 } and end at { $x3 } { $y3 }
graphing-calculator-narration-geometry-item-at-coordinates-with-radius = { $itemDescription } at { $x } { $y } with radius { $radius }.
graphing-calculator-narration-geometry-item-to-line-passing-through-point-at-coordinates-to-coordinates = { $itemDescription } to { $parent1 } passing through { $parent2 } from { $x1 } { $y1 } to { $x2 } { $y2 }
graphing-calculator-narration-geometry-line-with-assignment = Line { $assignment }
graphing-calculator-narration-geometry-list-of-angles = List of { $count } angles
graphing-calculator-narration-geometry-list-of-any = List of { $count } unknown objects
graphing-calculator-narration-geometry-list-of-arcs = List of { $count } arcs
graphing-calculator-narration-geometry-list-of-circles = List of { $count } circles
graphing-calculator-narration-geometry-list-of-directed-angles = List of { $count } directed angles
graphing-calculator-narration-geometry-list-of-lines = List of { $count } lines
graphing-calculator-narration-geometry-list-of-points = List of { $count } points
graphing-calculator-narration-geometry-list-of-polygons = List of { $count } polygons
graphing-calculator-narration-geometry-list-of-rays = List of { $count } rays
graphing-calculator-narration-geometry-list-of-segments = List of { $count } segments
graphing-calculator-narration-geometry-midpoint-with-assignment = Midpoint { $assignment }
graphing-calculator-narration-geometry-moved-to-coordinates = Moved to x: { $x }, y: { $y }.
graphing-calculator-narration-geometry-near-item = Near { $item }.
graphing-calculator-narration-geometry-no-tool-inputs = No inputs exist
graphing-calculator-narration-geometry-nothing-selected = Nothing selected.
graphing-calculator-narration-geometry-parallel-with-assignment = Parallel { $assignment }
graphing-calculator-narration-geometry-perpendicular-with-assignment = Perpendicular { $assignment }
graphing-calculator-narration-geometry-point-with-assignment = Point { $assignment }
graphing-calculator-narration-geometry-polygon-with-assignment = Polygon { $assignment } with { $sideCount } sides
graphing-calculator-narration-geometry-quadrilateral-with-assignment = Quadrilateral { $assignment }
graphing-calculator-narration-geometry-ray-with-assignment = Ray { $assignment }
graphing-calculator-narration-geometry-reflected-item = reflected { $item }
graphing-calculator-narration-geometry-rotated-item = rotated { $item }
graphing-calculator-narration-geometry-segment-with-assignment = Segment { $assignment }
graphing-calculator-narration-geometry-token-navigator-depth = Depth: { $depth }
graphing-calculator-narration-geometry-token-navigator-label = Token Navigator
graphing-calculator-narration-geometry-tool-cancelled = Cancelled.
graphing-calculator-narration-geometry-tool-disabled = The { $tool } tool is disabled.
graphing-calculator-narration-geometry-transformed-item = transformed { $item }
graphing-calculator-narration-geometry-translated-item = translated { $item }
graphing-calculator-narration-geometry-triangle-with-assignment = Triangle { $assignment }
graphing-calculator-narration-geometry-unable-to-move = Unable to move.
graphing-calculator-narration-geometry-unlabeled-angle = Angle { $index }
graphing-calculator-narration-geometry-unlabeled-angle-with-measurement = { $measurementText } Angle
graphing-calculator-narration-geometry-unlabeled-arc = Arc { $index }
graphing-calculator-narration-geometry-unlabeled-circle = Circle { $index }
graphing-calculator-narration-geometry-unlabeled-directed-angle = Directed Angle { $index }
graphing-calculator-narration-geometry-unlabeled-directed-angle-with-measurement = { $measurementText } Directed Angle
graphing-calculator-narration-geometry-unlabeled-glider = Glider { $index }
graphing-calculator-narration-geometry-unlabeled-intersection = Intersection { $index }
graphing-calculator-narration-geometry-unlabeled-line = Line { $index }
graphing-calculator-narration-geometry-unlabeled-midpoint = Midpoint { $index }
graphing-calculator-narration-geometry-unlabeled-parallel = Parallel { $index }
graphing-calculator-narration-geometry-unlabeled-perpendicular = Perpendicular { $index }
graphing-calculator-narration-geometry-unlabeled-point = Point { $index }
graphing-calculator-narration-geometry-unlabeled-polygon = Polygon { $index } with { $sideCount } sides
graphing-calculator-narration-geometry-unlabeled-quadrilateral = Quadrilateral { $index }
graphing-calculator-narration-geometry-unlabeled-ray = Ray { $index }
graphing-calculator-narration-geometry-unlabeled-segment = Segment { $index }
graphing-calculator-narration-geometry-unlabeled-triangle = Triangle { $index }
graphing-calculator-narration-geometry-unlabeled-vector = Vector { $index }
graphing-calculator-narration-geometry-vector-with-assignment = Vector { $assignment }
graphing-calculator-narration-graph-settings-controls = Graph Settings Controls
graphing-calculator-narration-graphpaper-label = graph paper
graphing-calculator-narration-hide = Hide
graphing-calculator-narration-hide-animation-properties = Hide Animation Properties
graphing-calculator-narration-hide-expression = Hide Expression { $index }
graphing-calculator-narration-hide-expression-list = Hide expression list
graphing-calculator-narration-hide-folder-index = Hide Folder { $index }
graphing-calculator-narration-hide-folder-title = Hide { $folder } folder
graphing-calculator-narration-hide-image = Hide Image { $index }
graphing-calculator-narration-hide-options = Hide Options
graphing-calculator-narration-hide-options-expression = Hide Options for Expression { $index }
graphing-calculator-narration-hide-options-image = Hide Options for Image { $index }
graphing-calculator-narration-hide-options-secret-expression = Hide Options for Secret Expression { $index }
graphing-calculator-narration-hide-secret-expression = Hide Secret Expression { $index }
graphing-calculator-narration-hide-table = Hide Table { $index }
graphing-calculator-narration-hide-table-column = Hide Column
graphing-calculator-narration-hide-text = Hide Note { $index }
graphing-calculator-narration-image-styles = Styles
graphing-calculator-narration-item-at-coordinates = { $itemDescription } at { $x } { $y }
graphing-calculator-narration-item-hidden = Item hidden.
graphing-calculator-narration-item-visible = Item visible.
graphing-calculator-narration-item-with-list-index = index { $listIndex } of { $item }
graphing-calculator-narration-items-deleted =
    { $count ->
        [one] { $count } item deleted.
       *[other] { $count } items deleted.
    }
graphing-calculator-narration-keypad-hidden = Keypad hidden
graphing-calculator-narration-keypad-key-next-curve = Next Curve
graphing-calculator-narration-keypad-key-next-poi = Next Point of Interest
graphing-calculator-narration-keypad-key-next-point = Next Point
graphing-calculator-narration-keypad-key-previous-curve = Previous Curve
graphing-calculator-narration-keypad-key-previous-poi = Previous Point of Interest
graphing-calculator-narration-keypad-key-previous-point = Previous Point
graphing-calculator-narration-keypad-key-speed-down = Speed Down
graphing-calculator-narration-keypad-key-speed-up = Speed Up
graphing-calculator-narration-keypad-key-volume-down = Volume Down
graphing-calculator-narration-keypad-key-volume-up = Volume Up
graphing-calculator-narration-keypad-visible = Keypad visible
graphing-calculator-narration-label-angle = Label Angle:
graphing-calculator-narration-label-size = Label Size:
graphing-calculator-narration-label-text = Label Text
graphing-calculator-narration-label-visible = Label visible
graphing-calculator-narration-line-opacity = Line Opacity:
graphing-calculator-narration-line-style-dashed = Dashed
graphing-calculator-narration-line-style-dotted = Dotted
graphing-calculator-narration-line-style-solid = Solid
graphing-calculator-narration-lines-visible = Lines visible
graphing-calculator-narration-locked-items-not-deleted =
    { $count ->
        [one] { $count } locked item could not be deleted.
       *[other] { $count } locked items could not be deleted.
    }
graphing-calculator-narration-main-desmos-geometry = Desmos Geometry
graphing-calculator-narration-main-desmos-graphing-calculator = Desmos Graphing Calculator
graphing-calculator-narration-make-clickable = make clickable
graphing-calculator-narration-menu-drag-enabled = Drag Enabled
graphing-calculator-narration-movable-point-off-screen-prompt = { " " }not visible on screen
graphing-calculator-narration-movable-point-prefix = Point
graphing-calculator-narration-movable-point-suffix-usage-instructions = { " " }is movable. Press Arrows or Shift+Arrows to adjust.
graphing-calculator-narration-mute = Mute
graphing-calculator-narration-mute-all = Mute all
graphing-calculator-narration-mute-expression = Mute Expression { $index }
graphing-calculator-narration-mute-secret-expression = Mute Secret Expression { $index }
graphing-calculator-narration-muted = Muted
graphing-calculator-narration-no-geometry-tools-available = No geometry tools available.
graphing-calculator-narration-no-playing-tones = No currently playing tones
graphing-calculator-narration-no-tone-expressions = No tones in this graph
graphing-calculator-narration-open-graph = Open Graph
graphing-calculator-narration-options-menu = Options Menu
graphing-calculator-narration-options-menu-closed = Options menu closed.
graphing-calculator-narration-options-menu-open = Options menu open.
graphing-calculator-narration-pause-variable-animation = Pause { $variable } Animation
graphing-calculator-narration-play-variable-animation = Play { $variable } Animation
graphing-calculator-narration-poi-graph-point = Point
graphing-calculator-narration-point-size = Point Size:
graphing-calculator-narration-point-style-cross = Cross
graphing-calculator-narration-point-style-open = Open
graphing-calculator-narration-point-style-point = Point
graphing-calculator-narration-points-visible = Points visible
graphing-calculator-narration-powered-by-desmos = Powered by Desmos
graphing-calculator-narration-redo = Redo
graphing-calculator-narration-rename = Rename
graphing-calculator-narration-rename-expression = Rename in Expression { $index }
graphing-calculator-narration-rename-secret-expression = Rename in Secret Expression { $index }
graphing-calculator-narration-rename-table = Rename in Table { $index }
graphing-calculator-narration-run-action-icon = Run Action
graphing-calculator-narration-settings-all-axes-max = Max for x, y, and z
graphing-calculator-narration-settings-all-axes-min = Min for x, y, and z
graphing-calculator-narration-settings-angle = Angle Settings
graphing-calculator-narration-settings-cartesian-grid = Cartesian Grid
graphing-calculator-narration-settings-polar-grid = Polar Grid
graphing-calculator-narration-settings-show-both = Show Both
graphing-calculator-narration-settings-show-positive = Show Positive
graphing-calculator-narration-settings-x-axis-label-placeholder = e.g. \u201Cx\u201D
graphing-calculator-narration-settings-x-axis-max = X Axis Maximum:{ " " }
graphing-calculator-narration-settings-x-axis-min = X Axis Minimum:{ " " }
graphing-calculator-narration-settings-x-axis-step = X Axis Step Size:{ " " }
graphing-calculator-narration-settings-y-axis-label-placeholder = e.g. \u201Cy\u201D
graphing-calculator-narration-settings-y-axis-max = Y Axis Maximum:{ " " }
graphing-calculator-narration-settings-y-axis-min = Y Axis Minimum:{ " " }
graphing-calculator-narration-settings-y-axis-step = Y Axis Step Size:{ " " }
graphing-calculator-narration-settings-z-axis-max = Z Axis Maximum:{ " " }
graphing-calculator-narration-settings-z-axis-min = Z Axis Minimum:{ " " }
graphing-calculator-narration-show = Show
graphing-calculator-narration-show-animation-properties = Show Animation Properties
graphing-calculator-narration-show-expression = Show Expression { $index }
graphing-calculator-narration-show-folder-index = Show Folder { $index }
graphing-calculator-narration-show-folder-title = Show { $folder } folder
graphing-calculator-narration-show-image = Show Image { $index }
graphing-calculator-narration-show-options = Show Options
graphing-calculator-narration-show-options-expression = Show Options for Expression { $index }
graphing-calculator-narration-show-options-image = Show Options for Image { $index }
graphing-calculator-narration-show-options-secret-expression = Show Options for Secret Expression { $index }
graphing-calculator-narration-show-secret-expression = Show Secret Expression { $index }
graphing-calculator-narration-show-table = Show Table { $index }
graphing-calculator-narration-show-table-column = Show Column
graphing-calculator-narration-show-text = Show Note { $index }
graphing-calculator-narration-slider-animate-faster = Animate Faster
graphing-calculator-narration-slider-animate-slower = Animate Slower
graphing-calculator-narration-slider-animating-at-speed = Animating at { $speed }x
graphing-calculator-narration-slider-loop-forwards-and-backwards = Loop forwards and backwards
graphing-calculator-narration-slider-maximum = Slider Maximum:
graphing-calculator-narration-slider-minimum = Slider Minimum:
graphing-calculator-narration-slider-play-indefinitely = Play indefinitely
graphing-calculator-narration-slider-play-once = Play once
graphing-calculator-narration-slider-repeat-one-direction = Repeat in one direction
graphing-calculator-narration-slider-step = Slider Step Size:
graphing-calculator-narration-slider-trace-no-sliders = No sliders to trace.
graphing-calculator-narration-slider-trace-off = Slider trace off.
graphing-calculator-narration-slider-trace-on = Slider trace on.
graphing-calculator-narration-slider-variable-paused = { $variable } paused
graphing-calculator-narration-slider-variable-playing = { $variable } playing
graphing-calculator-narration-slider-variable-restarted = { $variable } restarted
graphing-calculator-narration-surfaces-visible = Surfaces visible
graphing-calculator-narration-table-column-header = Column header { $column }
graphing-calculator-narration-table-no-column-header = No column header
graphing-calculator-narration-table-row-column = Row { $row } Col { $column }
graphing-calculator-narration-tick-action = Tick Action
graphing-calculator-narration-toggle-audio-trace = Toggle Audio Trace
graphing-calculator-narration-toggle-letters = Toggle Letters
graphing-calculator-narration-transformations-menu = Transformations Menu
graphing-calculator-narration-unable-to-add-expression = Unable to add expression
graphing-calculator-narration-unable-to-add-note = Unable to add note
graphing-calculator-narration-unable-to-add-table = Unable to add table
graphing-calculator-narration-undo = Undo
graphing-calculator-narration-unmute = Unmute
graphing-calculator-narration-unmute-all = Unmute all
graphing-calculator-narration-unmute-expression = Unmute Expression { $index }
graphing-calculator-narration-unmute-secret-expression = Unmute Secret Expression { $index }
graphing-calculator-narration-unmuted = Unmuted
graphing-calculator-narration-viewport-default = Graph viewport default
graphing-calculator-narration-viewport-updated = Graph viewport updated.
graphing-calculator-narration-viewport-zoom-in = Graph zoom in
graphing-calculator-narration-viewport-zoom-out = Graph zoom out
graphing-calculator-narration-viewport-zoom-square = Graph zoom square
graphing-calculator-narration-visual-parameters-height = Height
graphing-calculator-narration-visual-parameters-offset = Offset
graphing-calculator-narration-visual-parameters-width = Width
graphing-calculator-narration-x-percentage-coordinate = { $x } percent from left.
graphing-calculator-narration-y-percentage-coordinate = { $y } percent from top.
graphing-calculator-narration-zoom-options-label = Zoom
graphing-calculator-text-add-screen-reader-label-placeholder = Add screen reader label
graphing-calculator-text-arrow-mode-both = Both
graphing-calculator-text-arrow-mode-default = Default
graphing-calculator-text-arrow-mode-none = None
graphing-calculator-text-arrow-mode-positive = Positive
graphing-calculator-text-audio-trace-no-implicit-support = Sorry, but I can't trace implicit curves yet.
graphing-calculator-text-audio-trace-no-parametric-support = Sorry, but I can't trace parametric curves yet.
graphing-calculator-text-audio-trace-no-polar-support = Sorry, but I can't trace polar curves yet.
graphing-calculator-text-audio-trace-off = Audio trace off.
graphing-calculator-text-audio-trace-on = Audio trace on.
graphing-calculator-text-color-black = black
graphing-calculator-text-color-blue = blue
graphing-calculator-text-color-gray = gray
graphing-calculator-text-color-green = green
graphing-calculator-text-color-orange = orange
graphing-calculator-text-color-purple = purple
graphing-calculator-text-color-red = red
graphing-calculator-text-color-unknown = color unknown
graphing-calculator-text-enter-pareneter = Enter the { $param }.
graphing-calculator-text-folder-placeholder = Untitled folder
graphing-calculator-text-geometry-arrow-mode = Arrow Mode: { $mode }
graphing-calculator-text-geometry-delete-selected-objects =
    { $count ->
        [one] Delete 1 object
       *[other] Delete { $count } objects
    }
graphing-calculator-text-geometry-delete-selected-unlocked-objects =
    { $count ->
        [one] Delete 1 unlocked object
       *[other] Delete { $count } unlocked objects
    }
graphing-calculator-text-geometry-glider = glider
graphing-calculator-text-geometry-hide-objects =
    { $count ->
        [one] Hide
       *[other] Hide all
    }
graphing-calculator-text-geometry-intersection = intersection
graphing-calculator-text-geometry-move-to-folder-message =
    { $count ->
        [one] Move to folder:
       *[other] Move { $count } objects to folder:
    }
graphing-calculator-text-geometry-multi-select-more-dropdown = More
graphing-calculator-text-geometry-multi-select-transform = Transform
graphing-calculator-text-geometry-no-constructed-objects = No constructed objects yet.
graphing-calculator-text-geometry-select-hint = Select a { $type }
graphing-calculator-text-geometry-selected-objects =
    { $count ->
        [one] 1 object selected
       *[other] { $count } objects selected
    }
graphing-calculator-text-geometry-show-objects =
    { $count ->
        [one] Show
       *[other] Show all
    }
graphing-calculator-text-geometry-tool-angle-display-name = Angle
graphing-calculator-text-geometry-tool-angle-hint-1 = Choose a starting point
graphing-calculator-text-geometry-tool-angle-hint-2 = Choose a vertex point
graphing-calculator-text-geometry-tool-angle-hint-3 = Choose an endpoint
graphing-calculator-text-geometry-tool-angles-hint-1 = Choose a starting point or a polygon
graphing-calculator-text-geometry-tool-arc-display-name = Arc
graphing-calculator-text-geometry-tool-arc-hint-1 = Choose a point (start)
graphing-calculator-text-geometry-tool-arc-hint-2 = Choose a point (middle)
graphing-calculator-text-geometry-tool-arc-hint-3 = Choose a point (end)
graphing-calculator-text-geometry-tool-box-selection-display-name = Box Select
graphing-calculator-text-geometry-tool-circle-display-name = Circle
graphing-calculator-text-geometry-tool-circle-hint-center = Choose a point (center)
graphing-calculator-text-geometry-tool-circle-hint-radius = Choose a point (radius)
graphing-calculator-text-geometry-tool-compass-display-name = Compass
graphing-calculator-text-geometry-tool-compass-hint-center = Choose a center point
graphing-calculator-text-geometry-tool-compass-hint-segment = Choose a segment to set the radius
graphing-calculator-text-geometry-tool-dilate-display-name = Dilate
graphing-calculator-text-geometry-tool-dilation-hint-center = Choose point (center)
graphing-calculator-text-geometry-tool-dilation-hint-scale-factor = Scale factor
graphing-calculator-text-geometry-tool-directed-angle-display-name = Directed Angle
graphing-calculator-text-geometry-tool-directedangle-display-name = Directed angle
graphing-calculator-text-geometry-tool-expression-edit-display-name = Insert into current expression.
graphing-calculator-text-geometry-tool-expression-edit-generic-hint-0 = No valid inputs
graphing-calculator-text-geometry-tool-expression-edit-generic-hint-1 = Choose { $type }
graphing-calculator-text-geometry-tool-expression-edit-generic-hint-2 = Choose { $type1 } or { $type2 }
graphing-calculator-text-geometry-tool-expression-edit-generic-hint-any-object = Choose any object
graphing-calculator-text-geometry-tool-expression-edit-generic-hint-many = Choose one of the following: { $types }
graphing-calculator-text-geometry-tool-line-display-name = Line
graphing-calculator-text-geometry-tool-line-hint-end = Choose a 2nd point
graphing-calculator-text-geometry-tool-line-hint-start = Choose a 1st point
graphing-calculator-text-geometry-tool-midpoint-display-name = Midpoint
graphing-calculator-text-geometry-tool-midpoint-hint = Choose a segment
graphing-calculator-text-geometry-tool-parallel-display-name = Parallel
graphing-calculator-text-geometry-tool-parallel-hint-point = Choose a point to pass through
graphing-calculator-text-geometry-tool-parallel-hint-straight-line = Choose a line to be parallel to
graphing-calculator-text-geometry-tool-perpendicular-display-name = Perpendicular
graphing-calculator-text-geometry-tool-perpendicular-hint-point = Choose a point to pass through
graphing-calculator-text-geometry-tool-perpendicular-hint-straight-line = Choose a line to be perpendicular to
graphing-calculator-text-geometry-tool-point-display-name = Point
graphing-calculator-text-geometry-tool-point-hint = Select or create a point
graphing-calculator-text-geometry-tool-polygon-display-name = Polygon
graphing-calculator-text-geometry-tool-polygon-hint-finish-point = Choose another point, or click an existing point to finish
graphing-calculator-text-geometry-tool-polygon-hint-first-point = Choose a point
graphing-calculator-text-geometry-tool-polygon-hint-next-point = Choose another point
graphing-calculator-text-geometry-tool-ray-display-name = Ray
graphing-calculator-text-geometry-tool-ray-hint-end = Choose a point (direction)
graphing-calculator-text-geometry-tool-ray-hint-start = Choose a point (vertex)
graphing-calculator-text-geometry-tool-reflect-display-name = Reflect
graphing-calculator-text-geometry-tool-reflection-hint-choose-line = Choose line of reflection
graphing-calculator-text-geometry-tool-rotate-display-name = Rotate
graphing-calculator-text-geometry-tool-rotation-hint-angle = Choose angle
graphing-calculator-text-geometry-tool-rotation-hint-angle-end = Choose angle end point
graphing-calculator-text-geometry-tool-rotation-hint-angle-start = Construct or choose an angle
graphing-calculator-text-geometry-tool-rotation-hint-angle-vertex = Complete angle: choose 2 more points
graphing-calculator-text-geometry-tool-rotation-hint-center = Choose point (center)
graphing-calculator-text-geometry-tool-segment-display-name = Segment
graphing-calculator-text-geometry-tool-segment-hint-end = Choose another point
graphing-calculator-text-geometry-tool-segment-hint-start = Choose a point
graphing-calculator-text-geometry-tool-selection-display-name = Select
graphing-calculator-text-geometry-tool-translate-display-name = Translate
graphing-calculator-text-geometry-tool-translation-hint-from-with-vector = Choose start point or a vector
graphing-calculator-text-geometry-tool-translation-hint-to = Choose end point
graphing-calculator-text-geometry-tool-vector-copy-display-name = Copy of Vector
graphing-calculator-text-geometry-tool-vector-copy-hint-end = Choose new start point for copy
graphing-calculator-text-geometry-tool-vector-display-name = Vector
graphing-calculator-text-geometry-tool-vector-end-point-display-name = Vector End Point
graphing-calculator-text-geometry-tool-vector-hint-end = Choose end point
graphing-calculator-text-geometry-tool-vector-hint-start = Choose start point or a vector to copy
graphing-calculator-text-geometry-tool-vector-start-point-display-name = Vector Start Point
graphing-calculator-text-image-placeholder = Unnamed image
graphing-calculator-text-label-orientation-above = Above
graphing-calculator-text-label-orientation-above-left = Above Left
graphing-calculator-text-label-orientation-above-right = Above Right
graphing-calculator-text-label-orientation-below = Below
graphing-calculator-text-label-orientation-below-left = Below Left
graphing-calculator-text-label-orientation-below-right = Below Right
graphing-calculator-text-label-orientation-default = Default
graphing-calculator-text-label-orientation-left = Left
graphing-calculator-text-label-orientation-right = Right
graphing-calculator-text-loading-image = Loading image...
graphing-calculator-text-note-placeholder = Empty note
graphing-calculator-text-parameter-name-binwidth = Bin Width
graphing-calculator-text-parameter-name-data = Data Set
graphing-calculator-text-parameter-name-dof = Degrees of Freedom
graphing-calculator-text-parameter-name-height = Height
graphing-calculator-text-parameter-name-max = Maximum
graphing-calculator-text-parameter-name-mean = Mean
graphing-calculator-text-parameter-name-min = Minimum
graphing-calculator-text-parameter-name-offset = Offset
graphing-calculator-text-parameter-name-probsuccess = Success Probability
graphing-calculator-text-parameter-name-stddev = Standard Deviation
graphing-calculator-text-parameter-name-trials = Trials
graphing-calculator-text-refreshable-braille-display-note = Use a refreshable Braille display, or just type Braille with a keyboard.
graphing-calculator-text-regression-potentially-inaccurate-parameters = Some parameters may be too large or small to represent accurately.
graphing-calculator-text-table-created = Table created.
graphing-calculator-text-table-more-rows = { $rowCount } more rows
graphing-calculator-text-toast-choose-one-file = You can only choose one file as a replacement
graphing-calculator-text-toast-error-importing-graph = Error importing graph. Check the URL?
graphing-calculator-text-toast-error-no-folders = Only graphs without folders can be inserted into a folder.
graphing-calculator-text-toast-expression-size-limit = Maximum expression size reached.
graphing-calculator-text-toast-graph-cleared = Graph cleared.
graphing-calculator-text-toast-graph-reset = Graph reset.
graphing-calculator-text-toast-image-upload-failed = Image upload failed.
graphing-calculator-text-toast-imported-graph = Graph imported!
graphing-calculator-text-toast-importing-graph = Importing graph...
graphing-calculator-text-toast-no-file-selected = You did not select a file
graphing-calculator-text-toast-uploading-images = Uploading images...
graphing-calculator-text-toast-zoom-to-fit = We zoomed to fit your data.
graphing-calculator-text-zoom-fit = Zoom Fit
matrix-calculator-narration-keypad-key-det = Determinant
matrix-calculator-narration-keypad-key-inverse = Inverse
matrix-calculator-narration-keypad-key-rref = Reduced row echelon form
matrix-calculator-narration-keypad-key-trace = Trace
matrix-calculator-narration-keypad-key-transpose = Transpose
frontpage-text-header-terms-update = We've updated our Terms of Service.

























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































`;var yd=class{constructor(e){this.value=e}valueOf(){return this.value}},br=class extends yd{constructor(e="???"){super(e)}toString(e){return`{${this.value}}`}},La=class extends yd{constructor(e,i={}){super(e),this.opts=i}toString(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(i){return e.reportError(i),this.value.toString(10)}}},Sc=class extends yd{constructor(e,i={}){super(e),this.opts=i}toString(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(i){return e.reportError(i),new Date(this.value).toISOString()}}};var xO=100,uq="\u2068",hq="\u2069";function gq(t,e,i){if(i===e||i instanceof La&&e instanceof La&&i.value===e.value)return!0;if(e instanceof La&&typeof i=="string"){let r=t.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value);if(i===r)return!0}return!1}function wO(t,e,i){return e[i]?Kh(t,e[i].value):(t.reportError(new RangeError("No default")),new br)}function yk(t,e){let i=[],r=Object.create(null);for(let o of e)o.type==="narg"?r[o.name]=If(t,o.value):i.push(If(t,o));return{positional:i,named:r}}function If(t,e){switch(e.type){case"str":return e.value;case"num":return new La(e.value,{minimumFractionDigits:e.precision});case"var":return mq(t,e);case"mesg":return fq(t,e);case"term":return bq(t,e);case"func":return yq(t,e);case"select":return xq(t,e);default:return new br}}function mq(t,{name:e}){let i;if(t.params)if(Object.prototype.hasOwnProperty.call(t.params,e))i=t.params[e];else return new br(`$${e}`);else if(t.args&&Object.prototype.hasOwnProperty.call(t.args,e))i=t.args[e];else return t.reportError(new ReferenceError(`Unknown variable: $${e}`)),new br(`$${e}`);if(i instanceof yd)return i;switch(typeof i){case"string":return i;case"number":return new La(i);case"object":if(i instanceof Date)return new Sc(i.getTime());default:return t.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof i}`)),new br(`$${e}`)}}function fq(t,{name:e,attr:i}){let r=t.bundle._messages.get(e);if(!r)return t.reportError(new ReferenceError(`Unknown message: ${e}`)),new br(e);if(i){let o=r.attributes[i];return o?Kh(t,o):(t.reportError(new ReferenceError(`Unknown attribute: ${i}`)),new br(`${e}.${i}`))}return r.value?Kh(t,r.value):(t.reportError(new ReferenceError(`No value: ${e}`)),new br(e))}function bq(t,{name:e,attr:i,args:r}){let o=`-${e}`,n=t.bundle._terms.get(o);if(!n)return t.reportError(new ReferenceError(`Unknown term: ${o}`)),new br(o);if(i){let s=n.attributes[i];if(s){t.params=yk(t,r).named;let l=Kh(t,s);return t.params=null,l}return t.reportError(new ReferenceError(`Unknown attribute: ${i}`)),new br(`${o}.${i}`)}t.params=yk(t,r).named;let a=Kh(t,n.value);return t.params=null,a}function yq(t,{name:e,args:i}){let r=t.bundle._functions[e];if(!r)return t.reportError(new ReferenceError(`Unknown function: ${e}()`)),new br(`${e}()`);if(typeof r!="function")return t.reportError(new TypeError(`Function ${e}() is not callable`)),new br(`${e}()`);try{let o=yk(t,i);return r(o.positional,o.named)}catch(o){return t.reportError(o),new br(`${e}()`)}}function xq(t,{selector:e,variants:i,star:r}){let o=If(t,e);if(o instanceof br)return wO(t,i,r);for(let n of i){let a=If(t,n.key);if(gq(t,o,a))return Kh(t,n.value)}return wO(t,i,r)}function xk(t,e){if(t.dirty.has(e))return t.reportError(new RangeError("Cyclic reference")),new br;t.dirty.add(e);let i=[],r=t.bundle._useIsolating&&e.length>1;for(let o of e){if(typeof o=="string"){i.push(t.bundle._transform(o));continue}if(t.placeables++,t.placeables>xO)throw t.dirty.delete(e),new RangeError(`Too many placeables expanded: ${t.placeables}, max allowed is ${xO}`);r&&i.push(uq),i.push(If(t,o).toString(t)),r&&i.push(hq)}return t.dirty.delete(e),i.join("")}function Kh(t,e){return typeof e=="string"?t.bundle._transform(e):xk(t,e)}var Tv=class{constructor(e,i,r){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=i,this.args=r}reportError(e){if(!this.errors)throw e;this.errors.push(e)}memoizeIntlObject(e,i){let r=this.bundle._intls.get(e);r||(r={},this.bundle._intls.set(e,r));let o=JSON.stringify(i);return r[o]||(r[o]=new e(this.bundle.locales,i)),r[o]}};function vO(t,e){let i=Object.create(null);for(let[r,o]of Object.entries(t))e.includes(r)&&(i[r]=o.valueOf());return i}var wq=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function CO(t,e){let i=t[0];if(i instanceof br)return new br(`NUMBER(${i.valueOf()})`);if(i instanceof La||i instanceof Sc)return new La(i.valueOf(),__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},i.opts),vO(e,wq)));throw new TypeError("Invalid argument to NUMBER")}var vq=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function SO(t,e){let i=t[0];if(i instanceof br)return new br(`DATETIME(${i.valueOf()})`);if(i instanceof La||i instanceof Sc)return new Sc(i.valueOf(),__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},i.opts),vO(e,vq)));throw new TypeError("Invalid argument to DATETIME")}var Tf=class{constructor(e,{functions:i,useIsolating:r=!0,transform:o=n=>n}={}){this._terms=new Map,this._messages=new Map,this._intls=new WeakMap,this.locales=Array.isArray(e)?e:[e],this._functions=__dcg_shared_module_exports__['a']({NUMBER:CO,DATETIME:SO},i),this._useIsolating=r,this._transform=o}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e,{allowOverrides:i=!1}={}){let r=[];for(let o=0;o<e.body.length;o++){let n=e.body[o];if(n.id.startsWith("-")){if(i===!1&&this._terms.has(n.id)){r.push(new Error(`Attempt to override an existing term: "${n.id}"`));continue}this._terms.set(n.id,n)}else{if(i===!1&&this._messages.has(n.id)){r.push(new Error(`Attempt to override an existing message: "${n.id}"`));continue}this._messages.set(n.id,n)}}return r}formatPattern(e,i=null,r=null){if(typeof e=="string")return this._transform(e);let o=new Tv(this,r,i);try{return xk(o,e).toString(o)}catch(n){if(o.errors)return o.errors.push(n),new br().toString(o);throw n}}};var wk=/^(-?[a-zA-Z][\w-]*) *= */gm,EO=/\.([a-zA-Z][\w-]*) *= */y,Cq=/\*?\[/y,vk=/(-?[0-9]+(?:\.([0-9]+))?)/y,Sq=/([a-zA-Z][\w-]*)/y,DO=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,Eq=/^[A-Z][A-Z0-9_-]*$/,Mv=/([^{}\n\r]+)/y,Dq=/([^\\"\n\r]*)/y,kO=/\\([\\"])/y,IO=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,kq=/^\n+/,TO=/ +$/,Iq=/ *\r?\n/g,Tq=/( *)$/,Mq=/{\s*/y,MO=/\s*}/y,Gq=/\[\s*/y,Aq=/\s*] */y,Vq=/\s*\(\s*/y,Lq=/\s*->\s*/y,Pq=/\s*:\s*/y,Oq=/\s*,?\s*/y,_q=/\s+/y,qh=class{constructor(e){this.body=[],wk.lastIndex=0;let i=0;for(;;){let P=wk.exec(e);if(P===null)break;i=wk.lastIndex;try{this.body.push(l(P[1]))}catch(N){if(N instanceof SyntaxError)continue;throw N}}function r(P){return P.lastIndex=i,P.test(e)}function o(P,N){if(e[i]===P)return i++,!0;if(N)throw new N(`Expected ${P}`);return!1}function n(P,N){if(r(P))return i=P.lastIndex,!0;if(N)throw new N(`Expected ${P.toString()}`);return!1}function a(P){P.lastIndex=i;let N=P.exec(e);if(N===null)throw new SyntaxError(`Expected ${P.toString()}`);return i=P.lastIndex,N}function s(P){return a(P)[1]}function l(P){let N=p(),W=c();if(N===null&&Object.keys(W).length===0)throw new SyntaxError("Expected message value or attributes");return{id:P,value:N,attributes:W}}function c(){let P=Object.create(null);for(;r(EO);){let N=s(EO),W=p();if(W===null)throw new SyntaxError("Expected attribute value");P[N]=W}return P}function p(){let P;if(r(Mv)&&(P=s(Mv)),e[i]==="{"||e[i]==="}")return u(P?[P]:[],1/0);let N=A();return N?P?u([P,N],N.length):(N.value=G(N.value,kq),u([N],N.length)):P?G(P,TO):null}function u(P=[],N){for(;;){if(r(Mv)){P.push(s(Mv));continue}if(e[i]==="{"){P.push(g());continue}if(e[i]==="}")throw new SyntaxError("Unbalanced closing brace");let B=A();if(B){P.push(B),N=Math.min(N,B.length);continue}break}let W=P.length-1,X=P[W];typeof X=="string"&&(P[W]=G(X,TO));let q=[];for(let B of P)B instanceof Gv&&(B=B.value.slice(0,B.value.length-N)),B&&q.push(B);return q}function g(){n(Mq,SyntaxError);let P=m();if(n(MO))return P;if(n(Lq)){let N=S();return n(MO,SyntaxError),__dcg_shared_module_exports__['a']({type:"select",selector:P},N)}throw new SyntaxError("Unclosed placeable")}function m(){if(e[i]==="{")return g();if(r(DO)){let[,P,N,W=null]=a(DO);if(P==="$")return{type:"var",name:N};if(n(Vq)){let X=w();if(P==="-")return{type:"term",name:N,attr:W,args:X};if(Eq.test(N))return{type:"func",name:N,args:X};throw new SyntaxError("Function names must be all upper-case")}return P==="-"?{type:"term",name:N,attr:W,args:[]}:{type:"mesg",name:N,attr:W}}return M()}function w(){let P=[];for(;;){switch(e[i]){case")":return i++,P;case void 0:throw new SyntaxError("Unclosed argument list")}P.push(C()),n(Oq)}}function C(){let P=m();return P.type!=="mesg"?P:n(Pq)?{type:"narg",name:P.name,value:M()}:P}function S(){let P=[],N=0,W;for(;r(Cq);){o("*")&&(W=N);let X=k(),q=p();if(q===null)throw new SyntaxError("Expected variant value");P[N++]={key:X,value:q}}if(N===0)return null;if(W===void 0)throw new SyntaxError("Expected default variant");return{variants:P,star:W}}function k(){n(Gq,SyntaxError);let P;return r(vk)?P=I():P={type:"str",value:s(Sq)},n(Aq,SyntaxError),P}function M(){if(r(vk))return I();if(e[i]==='"')return E();throw new SyntaxError("Invalid expression")}function I(){let[,P,N=""]=a(vk),W=N.length;return{type:"num",value:parseFloat(P),precision:W}}function E(){o('"',SyntaxError);let P="";for(;;){if(P+=s(Dq),e[i]==="\\"){P+=T();continue}if(o('"'))return{type:"str",value:P};throw new SyntaxError("Unclosed string literal")}}function T(){if(r(kO))return s(kO);if(r(IO)){let[,P,N]=a(IO),W=parseInt(P||N,16);return W<=55295||57344<=W?String.fromCodePoint(W):"\uFFFD"}throw new SyntaxError("Unknown escape sequence")}function A(){let P=i;switch(n(_q),e[i]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return _(e.slice(P,i))}return e[i-1]===" "?_(e.slice(P,i)):!1}function G(P,N){return P.replace(N,"")}function _(P){let N=P.replace(Iq,`
`),W=Tq.exec(P)[1].length;return new Gv(N,W)}}},Gv=class{constructor(e,i){this.value=e,this.length=i}};var Rq=["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"],mo=class{constructor(e){this.value=e}},Av=class t{constructor(e,i){this.bundles=e;this.onError=i}static fromSources(e,i,r){let o=[];for(let{lang:n,source:a}of e){let s=n.split("-")[0],l=new Tf(n,__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},r),{useIsolating:Rq.indexOf(s)>=0}));l.addResource(new qh(a),{allowOverrides:!1}),l.addResource(new qh(`
l10n-internal-date-day-month-year = {DATETIME($d, month: "short", day: "numeric", year: "numeric")}
l10n-internal-date-day-month = {DATETIME($d, month: "short", day: "numeric")}
l10n-internal-time = {DATETIME($d, minute: "numeric", hour: "numeric")}
      `),{allowOverrides:!1}),o.push(l)}return new t(o,i)}format(e,i){for(let r of this.bundles){if(!r.hasMessage(e))continue;let o=r.getMessage(e);if(!(o!=null&&o.value))return;let n=[],a=r.formatPattern(o.value,this.coerceNumericVariables(i),n);for(let s of n)this.onError(`Error formatting ${e} for locale ${r.locales.join(",")}: ${s}`);return a}this.onError(`Couldn't find message for key ${e} for locales ${this.getLocales().join(",")}`)}formatDate(e,i){return i.showYear?this.format("l10n-internal-date-day-month-year",{d:e}):this.format("l10n-internal-date-day-month",{d:e})}formatTime(e){let i=this.format("l10n-internal-time",{d:e});return this.getLocales()[0]==="en"?i==null?void 0:i.toLowerCase():i}hasTranslation(e,i){for(let r of this.bundles)if(r.locales.indexOf(i)>=0)return r.hasMessage(e);return!1}coerceNumericVariables(e){let i={};for(let r in e){let o=e[r];o instanceof mo?i[r]=o.value:typeof o=="number"?i[r]=`${o}`:i[r]=o}return i}getLocales(){return this.bundles.reduce((e,i)=>e.concat(i.locales),[])}};var Vv="",Ck={},GO={},Sk={},Nq=["ar","hy-AM","hi","tr","xx-XX"];function Lv(t){Vv=t||""}function Ek(t){for(let e in t)delete Sk[e],GO[e]=t[e]}function Dk(t,e){let i=e!=null?e:Vv;return VO(i).hasTranslation(t,i)}function Xa(t,e){if(e)for(var i in e)e.hasOwnProperty(i)&&(t=t.split("__"+i+"__").join(e[i]));return t}function Pa(t,e,i){return AO(t,e!=null?e:{},i!=null?i:Vv)}function Dl(t){return function(i,r){return AO(i,r!=null?r:{},t())}}function Bq(t){let e={};for(let i in t){let r=t[i];r!==void 0&&(e[i]=r)}return e}function AO(t,e,i){let o=VO(i).format(t,Bq(e));return o==null?(__dcg_shared_module_exports__['td'].warn(`Could not format string ${t}`),""):o}function VO(t){let e=Sk[t];if(!e){Ck[t]||(Ck[t]=Iv([t]));let i=[];for(let o of Ck[t]){let n=GO[o];n&&i.push({lang:o,source:n})}let r={};t==="xx-XX"&&(r.transform=o=>o.replace(/[a-z]/gi,"\u2666")),e=Sk[t]=Av.fromSources([...i,{lang:"en",source:yO}],o=>{__dcg_shared_module_exports__['td'].warn(o)},r)}return e}function Mf(){return Vv}function kk(t){return Fp.hasOwnProperty(t)||__dcg_shared_module_exports__['za'](Nq,t)}function xd(t,e){if(t==null)return"";if(typeof t=="string")return t;if(typeof t=="number")return""+t;let i=t.vars,r;if(i){r={};for(let o in i)i.hasOwnProperty(o)&&(r[o]=xd(i[o],e))}return Pa(t.key,r,e)}var Pv={cb20221031:"1"};var Gf=typeof desmosLocaleData=="object"?desmosLocaleData:{};function Kq(){for(var t=Iv([uo("language"),navigator.userLanguage,navigator.language]),e=0;e<t.length;e++){var i=t[e];if(kk(i))return i}return"en"}async function LO(t){if(Gf[t]||t==="en"||t==="xx-XX")return Lv(t),!0;if(!kk(t)){let r=t.indexOf("-")!==-1?t.split("-")[0]:t;for(let o in Fp)if(r===o.split("-")[0]&&Fp[o].useAsRoot){t=o;break}}let e=await fetch(`/api/v1/calculator/language/${t}.ftl?${new URLSearchParams(Pv)}`,{headers:{Accept:"application/json"}});if(!e.ok)throw e.status===404&&__dcg_shared_module_exports__['td'].warn(t+" is not an available language."),void 0;let i=await e.json();return Gf[t]=i[t],Ek(Gf),Lv(t),!0}function Ov(t){return!!Gf[t]}Ek(Gf);Lv(Kq());function Vf(t,e){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t)return!0;return!1}function Ik(t){return Vf(t,Mk)}function Tk(t){return Vf(t,Gk)}function PO(t){return Vf(t,Ak)}function qq(t){return Vf(t,Af)}function zq(t){return Vf(t,Vk)}var Mk={OPEN:"OPEN",CROSS:"CROSS",POINT:"POINT"},Gk={SOLID:"SOLID",DASHED:"DASHED",DOTTED:"DOTTED"},Ak={NONE:"NONE",AUTO:"AUTO",X:"X",Y:"Y",XY:"XY"},Af={POINTS:"POINTS",LINES:"LINES",POINTS_AND_LINES:"POINTS_AND_LINES"},Vk={DEFAULT:"default",CENTER:"center",CENTER_AUTO:"center_auto",AUTO_CENTER:"auto_center",ABOVE:"above",ABOVE_LEFT:"above_left",ABOVE_RIGHT:"above_right",ABOVE_AUTO:"above_auto",BELOW:"below",BELOW_LEFT:"below_left",BELOW_RIGHT:"below_right",BELOW_AUTO:"below_auto",LEFT:"left",AUTO_LEFT:"auto_left",RIGHT:"right",AUTO_RIGHT:"auto_right"};function Uq(t){return{id:t.id,type:t.type,columns:t.columns.map(Hq)}}function Hq(t){return{id:t.id,latex:t.latex,color:t.color,hidden:t.hidden,pointStyle:t.pointStyle,pointSize:t.pointSize,pointOpacity:t.pointOpacity,lineStyle:t.lineStyle,lineWidth:t.lineWidth,lineOpacity:t.lineOpacity,points:t.points,lines:t.lines,dragMode:t.dragMode,values:t.values.slice()}}function Wq(t){var e=["latex","color","lineStyle","lineWidth","lineOpacity","pointStyle","pointSize","pointOpacity","points","lines","fill","fillOpacity","hidden","secret","dragMode","label","showLabel","labelSize","labelOrientation","interactiveLabel","readonly"],i={id:t.id,type:t.type};return e.forEach(function(r){t.hasOwnProperty(r)&&(i[r]=t[r])}),t.hasOwnProperty("parametricDomain")&&(i.parametricDomain={min:t.parametricDomain.min,max:t.parametricDomain.max}),t.hasOwnProperty("parametricDomain3Du")&&(i.parametricDomain3Du={min:t.parametricDomain3Du.min,max:t.parametricDomain3Du.max}),t.hasOwnProperty("parametricDomain3Dv")&&(i.parametricDomain3Dv={min:t.parametricDomain3Dv.min,max:t.parametricDomain3Dv.max}),t.hasOwnProperty("parametricDomain3Dr")&&(i.parametricDomain3Dr={min:t.parametricDomain3Dr.min,max:t.parametricDomain3Dr.max}),t.hasOwnProperty("parametricDomain3Dphi")&&(i.parametricDomain3Dphi={min:t.parametricDomain3Dphi.min,max:t.parametricDomain3Dphi.max}),t.hasOwnProperty("polarDomain")&&(i.polarDomain={min:t.polarDomain.min,max:t.polarDomain.max}),t.hasOwnProperty("domain")&&(i.domain={min:t.domain.min,max:t.domain.max}),t.slider&&(t.slider.hardMin&&(i.sliderBounds=i.sliderBounds||{},i.sliderBounds.min=t.slider.min),t.slider.hardMax&&(i.sliderBounds=i.sliderBounds||{},i.sliderBounds.max=t.slider.max),t.slider.step&&(i.sliderBounds=i.sliderBounds||{},i.sliderBounds.step=t.slider.step),i.playing=!!t.slider.isPlaying),i}function $q(t){return{id:t.id,type:t.type,hidden:t.hidden,secret:t.secret}}function jq(t){return{id:t.id,type:t.type,hidden:t.hidden,secret:t.secret}}function Yq(t){return{id:t.id,type:t.type,secret:t.secret}}function _v(t){switch(t.type){case"expression":return Wq(t);case"table":return Uq(t);case"folder":return jq(t);case"image":return $q(t);case"text":return Yq(t);default:return t}}function zh(t,e){return t.hasOwnProperty("id")?t.id+"":e.generateId()}function Jq(t,e){var i={type:"expression",id:zh(t,e)};if(i.type="expression",i.id=zh(t,e),t.hasOwnProperty("latex")&&(i.latex=t.latex+""),t.hasOwnProperty("color")&&(i.color=t.color+""),t.hasOwnProperty("points")&&(i.points=!!t.points),t.hasOwnProperty("lines")&&(i.lines=!!t.lines),t.hasOwnProperty("style")&&(__dcg_shared_module_exports__['td'].warn("As of API v1.1 the 'style' property is deprecated and has been split into 'pointStyle' and 'lineStyle'."),Ik(t.style)?i.pointStyle=t.style:Tk(t.style)?i.lineStyle=t.style:__dcg_shared_module_exports__['td'].warn("Invalid style: '"+t.style+"'.")),t.hasOwnProperty("pointStyle")&&(Ik(t.pointStyle)?i.pointStyle=t.pointStyle:__dcg_shared_module_exports__['td'].warn("Invalid pointStyle: '"+t.pointStyle+"'.")),t.hasOwnProperty("pointSize")&&(i.pointSize=""+t.pointSize),t.hasOwnProperty("pointOpacity")&&(i.pointOpacity=""+t.pointOpacity),t.hasOwnProperty("lineStyle")&&(Tk(t.lineStyle)?i.lineStyle=t.lineStyle:__dcg_shared_module_exports__['td'].warn("Invalid lineStyle: '"+t.lineStyle+"'.")),t.hasOwnProperty("lineWidth")&&(i.lineWidth=""+t.lineWidth),t.hasOwnProperty("lineOpacity")&&(i.lineOpacity=""+t.lineOpacity),t.hasOwnProperty("hidden")&&(i.hidden=!!t.hidden),t.hasOwnProperty("readonly")&&(i.readonly=!!t.readonly),t.hasOwnProperty("secret")&&(i.secret=!!t.secret),t.hasOwnProperty("sliderBounds")&&t.sliderBounds&&(i.slider={min:__dcg_shared_module_exports__['tc'](t.sliderBounds.min),max:__dcg_shared_module_exports__['tc'](t.sliderBounds.max),step:__dcg_shared_module_exports__['tc'](t.sliderBounds.step)},i.slider.min&&(i.slider.hardMin=!0),i.slider.max&&(i.slider.hardMax=!0)),t.hasOwnProperty("playing")){let{playing:r}=t;typeof r!="boolean"?__dcg_shared_module_exports__['td'].warn(`Invalid value for 'playing'. Expected a boolean but got '${r}'.`):(i.slider||(i.slider={}),i.slider.isPlaying=r)}return t.hasOwnProperty("parametricDomain3Du")&&t.parametricDomain3Du&&(i.parametricDomain3Du={min:__dcg_shared_module_exports__['tc'](t.parametricDomain3Du.min),max:__dcg_shared_module_exports__['tc'](t.parametricDomain3Du.max)}),t.hasOwnProperty("parametricDomain3Dv")&&t.parametricDomain3Dv&&(i.parametricDomain3Dv={min:__dcg_shared_module_exports__['tc'](t.parametricDomain3Dv.min),max:__dcg_shared_module_exports__['tc'](t.parametricDomain3Dv.max)}),t.hasOwnProperty("parametricDomain3Dr")&&t.parametricDomain3Dr&&(i.parametricDomain3Dr={min:__dcg_shared_module_exports__['tc'](t.parametricDomain3Dr.min),max:__dcg_shared_module_exports__['tc'](t.parametricDomain3Dr.max)}),t.hasOwnProperty("parametricDomain3Dphi")&&t.parametricDomain3Dphi&&(i.parametricDomain3Dphi={min:__dcg_shared_module_exports__['tc'](t.parametricDomain3Dphi.min),max:__dcg_shared_module_exports__['tc'](t.parametricDomain3Dphi.max)}),t.hasOwnProperty("parametricDomain")&&t.parametricDomain?(i.parametricDomain={min:__dcg_shared_module_exports__['tc'](t.parametricDomain.min),max:__dcg_shared_module_exports__['tc'](t.parametricDomain.max)},t.hasOwnProperty("domain")&&__dcg_shared_module_exports__['td'].warn("Both 'parametricDomain' and the deprecated 'domain' property were specified. Using 'parametricDomain'.")):t.hasOwnProperty("domain")&&(__dcg_shared_module_exports__['td'].warn("The 'domain' property is deprecated.Use 'parametricDomain' to specify the domain for parametric functions"),i.parametricDomain={min:__dcg_shared_module_exports__['tc'](t.domain.min),max:__dcg_shared_module_exports__['tc'](t.domain.max)}),t.hasOwnProperty("polarDomain")&&t.polarDomain&&(i.polarDomain={min:__dcg_shared_module_exports__['tc'](t.polarDomain.min),max:__dcg_shared_module_exports__['tc'](t.polarDomain.max)}),t.hasOwnProperty("dragMode")&&(PO(t.dragMode)?i.dragMode=t.dragMode:__dcg_shared_module_exports__['td'].warn("Invalid dragMode: '"+t.dragMode+"'.")),t.hasOwnProperty("label")&&(i.label=t.label+""),t.hasOwnProperty("showLabel")&&(i.showLabel=!!t.showLabel),t.hasOwnProperty("showAngleLabel")&&(i.showAngleLabel=!!t.showAngleLabel),t.hasOwnProperty("labelSize")&&(typeof t.labelSize=="string"?i.labelSize=t.labelSize:__dcg_shared_module_exports__['td'].warn("Invalid labelSize: "+t.labelSize)),t.hasOwnProperty("labelOrientation")&&(zq(t.labelOrientation)?i.labelOrientation=t.labelOrientation:__dcg_shared_module_exports__['td'].warn("Invalid labelOrientation: "+t.labelOrientation)),t.hasOwnProperty("fill")&&(i.fill=!!t.fill),t.hasOwnProperty("fillOpacity")&&(i.fillOpacity=""+t.fillOpacity),i}function Xq(t,e){var i={id:zh(t,e)};return t.hasOwnProperty("latex")&&(i.latex=t.latex+""),t.hasOwnProperty("color")&&(i.color=t.color+""),t.hasOwnProperty("hidden")&&(i.hidden=!!t.hidden),t.hasOwnProperty("points")&&(i.points=!!t.points),t.hasOwnProperty("lines")&&(i.lines=!!t.lines),t.hasOwnProperty("values")&&t.values&&(i.values=t.values.map(function(r){return r+""})),t.hasOwnProperty("pointStyle")&&(Ik(t.pointStyle)?i.pointStyle=t.pointStyle:__dcg_shared_module_exports__['td'].warn("Invalid pointStyle: '"+t.pointStyle+"'.")),t.hasOwnProperty("pointSize")&&(i.pointSize=""+t.pointSize),t.hasOwnProperty("pointOpacity")&&(i.pointOpacity=""+t.pointOpacity),t.hasOwnProperty("lineStyle")&&(Tk(t.lineStyle)?i.lineStyle=t.lineStyle:__dcg_shared_module_exports__['td'].warn("Invalid lineStyle: '"+t.lineStyle+"'.")),t.hasOwnProperty("lineWidth")&&(i.lineWidth=""+t.lineWidth),t.hasOwnProperty("lineOpacity")&&(i.lineOpacity=""+t.lineOpacity),t.hasOwnProperty("columnMode")&&(__dcg_shared_module_exports__['td'].warn("As of API v1.1 the 'columnMode' property is deprecated and has been split into individual 'points' and 'lines' properties."),t.columnMode===Af.POINTS_AND_LINES?(i.points=!0,i.lines=!0):t.columnMode===Af.LINES?(i.points=!1,i.lines=!0):(i.points=!0,i.lines=!1),i.lines&&!i.points&&t.hasOwnProperty("dragMode")&&t.dragMode!=="NONE"&&(__dcg_shared_module_exports__['td'].warn("A 'lines' value of true and 'points' value of false is only compatible with a dragMode of 'NONE'. Proceeding by setting 'points' to true."),i.points=!0),qq(t.columnMode)&&__dcg_shared_module_exports__['td'].warn("Invalid columnMode: '"+t.columnMode+"'.")),t.hasOwnProperty("dragMode")&&(PO(t.dragMode)?i.dragMode=t.dragMode==="AUTO"?"NONE":t.dragMode:__dcg_shared_module_exports__['td'].warn("Invalid dragMode: '"+t.dragMode+"'.")),i}function Qq(t,e){var i={type:"table",id:zh(t,e)};return t.hasOwnProperty("columns")&&t.columns&&(i.columns=t.columns.map(function(r){return Xq(r,e)})),i}function Zq(t,e){var i={type:"folder",id:zh(t,e)};return t.hasOwnProperty("hidden")&&(i.hidden=!!t.hidden),i}function ez(t,e){var i={type:"image",id:zh(t,e)};return t.hasOwnProperty("hidden")&&(i.hidden=!!t.hidden),i}function Fv(t,e,i){var r=t.type;if(e&&r&&r!==e){__dcg_shared_module_exports__['td'].warn("Cannot change type of expression from '"+e+"' to '"+r+"'.");return}switch(r){case void 0:case"expression":return Jq(t,i);case"image":return ez(t,i);case"table":return Qq(t,i);case"folder":return Zq(t,i);default:if(e){__dcg_shared_module_exports__['td'].warn("Cannot modify expressions of type: '"+e+"' through the API.");return}else{__dcg_shared_module_exports__['td'].warn("Invalid expression type: '"+r+"'.");return}}}var Rv={};__dcg_shared_module_exports__['g'](Rv,{LARGE:()=>rz,MEDIUM:()=>Lk,SMALL:()=>iz,VERY_LARGE:()=>oz,VERY_SMALL:()=>tz});var tz=9,iz=12,Lk=16,rz=20,oz=24;var je=function(t,e,i){var r=document.createElement("img"),o,n;if(r.onerror=e,r.onload=function(){n&&!(i&&i.noRevoke)&&je.revokeObjectURL(n),e&&e(je.scale(r,i))},je.isInstanceOf("Blob",t)||je.isInstanceOf("File",t))o=n=je.createObjectURL(t),r._type=t.type;else if(typeof t=="string")o=t,i&&i.crossOrigin&&(r.crossOrigin=i.crossOrigin);else return!1;return o?(r.src=o,r):je.readFile(t,function(a){var s=a.target;s&&s.result?r.src=s.result:e&&e(a)})},Nv=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;je.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"};je.transformCoordinates=function(){};je.getTransformedOptions=function(t){return t};je.renderImageToCanvas=function(t,e,i,r,o,n,a,s,l,c){return t.getContext("2d").drawImage(e,i,r,o,n,a,s,l,c),t};je.hasCanvasOption=function(t){return t.canvas||t.crop};je.scale=function(t,e){e=e||{};var i=document.createElement("canvas"),r=t.getContext||je.hasCanvasOption(e)&&i.getContext,o=t.naturalWidth||t.width,n=t.naturalHeight||t.height,a=o,s=n,l,c,p,u,g,m,w,C,S,k=function(){var I=Math.max((p||a)/a,(u||s)/s);I>1&&(a=Math.ceil(a*I),s=Math.ceil(s*I))},M=function(){var I=Math.min((l||a)/a,(c||s)/s);I<1&&(a=Math.ceil(a*I),s=Math.ceil(s*I))};return r&&(e=je.getTransformedOptions(e),w=e.left||0,C=e.top||0,e.sourceWidth?(g=e.sourceWidth,e.right!==void 0&&e.left===void 0&&(w=o-g-e.right)):g=o-w-(e.right||0),e.sourceHeight?(m=e.sourceHeight,e.bottom!==void 0&&e.top===void 0&&(C=n-m-e.bottom)):m=n-C-(e.bottom||0),a=g,s=m),l=e.maxWidth,c=e.maxHeight,p=e.minWidth,u=e.minHeight,r&&l&&c&&e.crop?(a=l,s=c,S=g/m-l/c,S<0?(m=c*g/l,e.top===void 0&&e.bottom===void 0&&(C=(n-m)/2)):S>0&&(g=l*m/c,e.left===void 0&&e.right===void 0&&(w=(o-g)/2))):((e.contain||e.cover)&&(p=l=l||p,u=c=c||u),e.cover?(M(),k()):(k(),M())),r?(i.width=a,i.height=s,je.transformCoordinates(i,e),je.renderImageToCanvas(i,t,w,C,g,m,0,0,a,s)):(t.width=a,t.height=s,t)};je.createObjectURL=function(t){return Nv?Nv.createObjectURL(t):!1};je.revokeObjectURL=function(t){return Nv?Nv.revokeObjectURL(t):!1};je.readFile=function(t,e,i){if(window.FileReader){var r=new FileReader;if(r.onload=r.onerror=e,i=i||"readAsDataURL",r[i])return r[i](t),r}return!1};(!window.navigator||!window.navigator.platform||!/iP(hone|od|ad)/.test(window.navigator.platform))&&(OO=je.renderImageToCanvas,je.detectSubsampling=function(t){var e,i;return t.width*t.height>1024*1024?(e=document.createElement("canvas"),e.width=e.height=1,i=e.getContext("2d"),i.drawImage(t,-t.width+1,0),i.getImageData(0,0,1,1).data[3]===0):!1},je.detectVerticalSquash=function(t,e){var i=t.naturalHeight||t.height,r=document.createElement("canvas"),o=r.getContext("2d"),n,a,s,l,c;for(e&&(i/=2),r.width=1,r.height=i,o.drawImage(t,0,0),n=o.getImageData(0,0,1,i).data,a=0,s=i,l=i;l>a;)c=n[(l-1)*4+3],c===0?s=l:a=l,l=s+a>>1;return l/i||1},je.renderImageToCanvas=function(t,e,i,r,o,n,a,s,l,c){if(e._type==="image/jpeg"){var p=t.getContext("2d"),u=document.createElement("canvas"),g=1024,m=u.getContext("2d"),w,C,S,k;if(u.width=g,u.height=g,p.save(),w=je.detectSubsampling(e),w&&(i/=2,r/=2,o/=2,n/=2),C=je.detectVerticalSquash(e,w),w||C!==1){for(r*=C,l=Math.ceil(g*l/o),c=Math.ceil(g*c/n/C),s=0,k=0;k<n;){for(a=0,S=0;S<o;)m.clearRect(0,0,g,g),m.drawImage(e,i,r,o,n,-S,-k,o,n),p.drawImage(u,0,0,g,g,a,s,l,c),S+=g,a+=l;k+=g,s+=c}return p.restore(),t}}return OO(t,e,i,r,o,n,a,s,l,c)});var OO,nz=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);je.blobSlice=nz&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)};je.metaDataParsers={jpeg:{65505:[]}};je.parseMetaData=function(t,e,i){i=i||{};var r=this,o=i.maxMetaDataSize||262144,n={},a=!(window.DataView&&t&&t.size>=12&&t.type==="image/jpeg"&&je.blobSlice);(a||!je.readFile(je.blobSlice.call(t,0,o),function(s){var l=s.target.result,c=new DataView(l),p=2,u=c.byteLength-4,g=p,m,w,C,S;if(c.getUint16(0)===65496){for(;p<u&&(m=c.getUint16(p),m>=65504&&m<=65519||m===65534);){if(w=c.getUint16(p+2)+2,p+w>c.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(C=je.metaDataParsers.jpeg[m],C)for(S=0;S<C.length;S+=1)C[S].call(r,c,p,w,n,i);p+=w,g=p}!i.disableImageHead&&g>6&&(l.slice?n.imageHead=l.slice(0,g):n.imageHead=new Uint8Array(l).subarray(0,g))}else console.log("Invalid JPEG file: Missing JPEG marker.");e(n)},"readAsArrayBuffer"))&&e(n)};var az=je.hasCanvasOption;je.hasCanvasOption=function(t){return az(t)||t.orientation};je.transformCoordinates=function(t,e){var i=t.getContext("2d"),r=t.width,o=t.height,n=e.orientation;if(n)switch(n>4&&(t.width=o,t.height=r),n){case 2:i.translate(r,0),i.scale(-1,1);break;case 3:i.translate(r,o),i.rotate(Math.PI);break;case 4:i.translate(0,o),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-o);break;case 7:i.rotate(.5*Math.PI),i.translate(r,-o),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-r,0);break}};je.getTransformedOptions=function(t){if(!t.orientation||t.orientation===1)return t;var e={},i;for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);switch(t.orientation){case 2:e.left=t.right,e.right=t.left;break;case 3:e.left=t.right,e.top=t.bottom,e.right=t.left,e.bottom=t.top;break;case 4:e.top=t.bottom,e.bottom=t.top;break;case 5:e.left=t.top,e.top=t.left,e.right=t.bottom,e.bottom=t.right;break;case 6:e.left=t.top,e.top=t.right,e.right=t.bottom,e.bottom=t.left;break;case 7:e.left=t.bottom,e.top=t.right,e.right=t.top,e.bottom=t.left;break;case 8:e.left=t.bottom,e.top=t.left,e.right=t.top,e.bottom=t.right;break}return t.orientation>4&&(e.maxWidth=t.maxHeight,e.maxHeight=t.maxWidth,e.minWidth=t.minHeight,e.minHeight=t.minWidth,e.sourceWidth=t.sourceHeight,e.sourceHeight=t.sourceWidth),e};je.ExifMap=function(){return this};je.ExifMap.prototype.map={Orientation:274};je.ExifMap.prototype.get=function(t){return this[t]||this[this.map[t]]};je.getExifThumbnail=function(t,e,i){var r,o,n;if(!i||e+i>t.byteLength){console.log("Invalid Exif data: Invalid thumbnail data.");return}for(r=[],o=0;o<i;o+=1)n=t.getUint8(e+o),r.push((n<16?"0":"")+n.toString(16));return"data:image/jpeg,%"+r.join("%")};je.exifTagTypes={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,i){return t.getUint16(e,i)},size:2},4:{getValue:function(t,e,i){return t.getUint32(e,i)},size:4},5:{getValue:function(t,e,i){return t.getUint32(e,i)/t.getUint32(e+4,i)},size:8},9:{getValue:function(t,e,i){return t.getInt32(e,i)},size:4},10:{getValue:function(t,e,i){return t.getInt32(e,i)/t.getInt32(e+4,i)},size:8}};je.exifTagTypes[7]=je.exifTagTypes[1];je.getExifValue=function(t,e,i,r,o,n){var a=je.exifTagTypes[r],s,l,c,p,u,g;if(!a){console.log("Invalid Exif data: Invalid tag type.");return}if(s=a.size*o,l=s>4?e+t.getUint32(i+8,n):i+8,l+s>t.byteLength){console.log("Invalid Exif data: Invalid data offset.");return}if(o===1)return a.getValue(t,l,n);for(c=[],p=0;p<o;p+=1)c[p]=a.getValue(t,l+p*a.size,n);if(a.ascii){for(u="",p=0;p<c.length&&(g=c[p],g!=="\0");p+=1)u+=g;return u}return c};je.parseExifTag=function(t,e,i,r,o){var n=t.getUint16(i,r);o.exif[n]=je.getExifValue(t,e,i,t.getUint16(i+2,r),t.getUint32(i+4,r),r)};je.parseExifTags=function(t,e,i,r,o){var n,a,s;if(i+6>t.byteLength){console.log("Invalid Exif data: Invalid directory offset.");return}if(n=t.getUint16(i,r),a=i+2+12*n,a+4>t.byteLength){console.log("Invalid Exif data: Invalid directory size.");return}for(s=0;s<n;s+=1)this.parseExifTag(t,e,i+2+12*s,r,o);return t.getUint32(a,r)};je.parseExifData=function(t,e,i,r,o){if(!o.disableExif){var n=e+10,a,s,l;if(t.getUint32(e+4)===1165519206){if(n+8>t.byteLength){console.log("Invalid Exif data: Invalid segment size.");return}if(t.getUint16(e+8)!==0){console.log("Invalid Exif data: Missing byte alignment offset.");return}switch(t.getUint16(n)){case 18761:a=!0;break;case 19789:a=!1;break;default:console.log("Invalid Exif data: Invalid byte alignment marker.");return}if(t.getUint16(n+2,a)!==42){console.log("Invalid Exif data: Missing TIFF marker.");return}s=t.getUint32(n+4,a),r.exif=new je.ExifMap,s=je.parseExifTags(t,n,n+s,a,r),s&&!o.disableExifThumbnail&&(l={exif:{}},s=je.parseExifTags(t,n,n+s,a,l),l.exif[513]&&(r.exif.Thumbnail=je.getExifThumbnail(t,n+l.exif[513],l.exif[514]))),r.exif[34665]&&!o.disableExifSub&&je.parseExifTags(t,n,n+r.exif[34665],a,r),r.exif[34853]&&!o.disableExifGps&&je.parseExifTags(t,n,n+r.exif[34853],a,r)}}};je.metaDataParsers.jpeg[65505].push(je.parseExifData);je.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"};je.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}};je.ExifMap.prototype.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)};(function(t){var e=t.tags,i=t.map,r;for(r in e)e.hasOwnProperty(r)&&(i[e[r]]=r)})(je.ExifMap.prototype);je.ExifMap.prototype.getAll=function(){var t={},e,i;for(e in this)this.hasOwnProperty(e)&&(i=this.tags[e],i&&(t[i]=this.getText(i)));return t};function _O(t,e){for(var i=[.92,.86,.8,.7,.6,.5,.4,.3,.2,.1],r,o=0;o<i.length;o++)if(r=t.toDataURL("image/jpeg",i[o]),r.length<e)return r;return r}function sz(t,e){for(var i=t.toDataURL().length,r=t.width,o=t.height,n=document.createElement("canvas"),a,s=0;s<2;s++){var l=Math.sqrt(e/i);r=Math.round(l*r),o=Math.round(l*o),n.height=o,n.width=r;var c=n.getContext("2d");if(c.drawImage(t,0,0,r,o),a=n.toDataURL(),i=a.length,i<e)return a}return a}function lz(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height).data,r=3;r<i.length;r+=4)if(i[r]!==255)return!0;return!1}function Bv(t,e){var i={orientation:!0,canvas:!0,maxWidth:1600,maxHeight:1600};je(t,function(r){if(!r.toDataURL){e(!0);return}var o=2e5,n;if(t.type==="image/jpeg")n=_O(r,o);else if(n=r.toDataURL(),n.length>o){var a=n.length>.75*r.width*r.height,s=a&&!lz(r);n=s?_O(r,o):sz(r,o)}e(null,n)},i)}var Pk={showGrid:!0,showXAxis:!0,showYAxis:!0,xAxisStep:0,yAxisStep:0,xAxisScale:"linear",yAxisScale:"linear",xAxisMinorSubdivisions:0,yAxisMinorSubdivisions:0,xAxisArrowMode:"NONE",yAxisArrowMode:"NONE",xAxisLabel:"",yAxisLabel:"",xAxisNumbers:!0,yAxisNumbers:!0,polarMode:!1,polarNumbers:!0,degreeMode:!1,randomSeed:"",restrictGridToFirstQuadrant:!1,userLockedViewport:!1},FO={threeDMode:!1,worldRotation3D:[],axis3D:[0,0,1],speed3D:0,showPlane3D:!0,showNumbers3D:!0,plane3dOpacity:"",backgroundColor3d:"#FFF",showAxis3D:!0,showAxisLabels3D:!0,showBox3D:!0},cz={squareAxes:!0},dz=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},FO),cz),{product:"graphing"});function RO(t){return t in FO}var wd=__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},Pk),dz),NO=Object.keys(Pk);function BO(t){return t in Pk}var Uh=t=>isFinite(t)&&(t>0||t===0);var Ec=class t extends Zi{constructor(){super();this.highlightPropertyMultipliers={};this.stateProperties=[],this.cloneProperties=[],this.highlightPropertyMultipliers={},this.config=new Zi;for(var i in wd)wd.hasOwnProperty(i)&&this.addStateProperty(i,wd[i]);this.labelHangingColor="rgba(150,150,150,1)",this.lastChangedAxis="x",this.addDynamicProperties()}addDynamicProperties(){var i=this;function r(n,a,s){i.cloneProperties.push(n);function l(){i.setProperty(n,i.config.projectorMode?s:a)}i.config.observe("projectorMode",l),l()}function o(n,a,s,l,c){i.cloneProperties.push(n);function p(){var g;i.config.projectorMode?g=i.highlight?c:l:g=i.highlight?s:a,i.setProperty(n,g)}var u=[a,s,l,c];i.highlightPropertyMultipliers[n]=u.map(function(g){return g/u[0]}),i.observe("highlight",p),i.config.observe("projectorMode",p),p()}r("labelSize",14,19),r("majorAxisOpacity",.4,1),r("minorAxisOpacity",.12,.25),r("axisOpacity",.9,.9),r("axisLineWidth",1.5,2),r("axisLineOffset",.25,0),r("pixelsPerLabel",80,120),o("curveOpacity",.7,1,.7,1),r("globalCurveColor",void 0,void 0),r("disableFill",!1,!1),o("graphLineWidth",2.5,3.5,5,7),o("pointLineWidth",9,11,15,17)}setController(i){this.controller=i,this.registerCallbacks()}getHighlightPropertyMultiplier(i,r){var o=r?1:0;return this.config.projectorMode?this.highlightPropertyMultipliers[i][2+o]:this.highlightPropertyMultipliers[i][o]}getFillOpacityMultiplier(){return this.highlight&&this.controller&&this.controller.isGeometry()?2:1}addStateProperty(i,r){this[i]=r,this.stateProperties.push(i),this.cloneProperties.push(i)}static fromObject(i){var r=new t;return r.cloneProperties.forEach(function(o){i.hasOwnProperty(o)&&r.setProperty(o,i[o])}),r}registerCallbacks(){var i=()=>{var r;(r=this.controller)==null||r.requestRedrawGraph()};this.stateProperties.forEach(r=>{this.observe(r,i)}),this.config.observe("backgroundColor",i),this.config.observe("textColor",i),this.config.observe("invertedColors",i),this.observe("backgroundColor",i),this.observe("textColor",i),this.config.observe("enableTabindex",i),this.config.observeAndSync("projectorMode",i)}_validateSetting(i,r){var o;switch(i){case"xAxisMinorSubdivisions":case"yAxisMinorSubdivisions":o=Math.round(Math.min(Math.max(0,r),5)),r!==o&&__dcg_shared_module_exports__['td'].warn("minorSubdivisions must be an integer between 0 and 5. You provided "+r+", which we changed to "+o+".");break;case"degreeMode":case"projectorMode":case"showGrid":case"showXAxis":case"showYAxis":case"xAxisNumbers":case"yAxisNumbers":case"polarNumbers":case"enableTabindex":case"invertedColors":o=r==="false"?!1:!!r,r!==o&&__dcg_shared_module_exports__['td'].warn(i+" must be a Boolean. You provided "+r+" ("+typeof r+"), which we changed to "+o+" ("+typeof o+").");break;case"xAxisStep":case"yAxisStep":o=parseFloat(r),isFinite(r)||(o=0,__dcg_shared_module_exports__['td'].warn(i+" must be a number. You provided "+r+", which we changed to "+o+"."));break;case"xAxisScale":case"yAxisScale":o=r,!this.config.logScales&&r==="logarithmic"?(o="linear",__dcg_shared_module_exports__['td'].warn("Must set logScales: true to set "+i+" to 'logarithmic'.")):r!=="linear"&&r!=="logarithmic"&&(o="linear",__dcg_shared_module_exports__['td'].warn(i+' must be "linear" or "logarithmic". You provided '+r+", which we changed to "+o+"."));break;case"xAxisArrowMode":case"yAxisArrowMode":o=__dcg_shared_module_exports__['Xc'][r],o!==r&&(o="NONE",__dcg_shared_module_exports__['td'].warn(`unknown AxisArrowMode. Allowed values are: 
`+__dcg_shared_module_exports__['Oa'](__dcg_shared_module_exports__['Xc']).join(`
`)));break;case"xAxisLabel":case"yAxisLabel":o=r,typeof r!="string"&&(o="",__dcg_shared_module_exports__['td'].warn(i+" must be a string. you provided a "+typeof r+"."));break;case"randomSeed":o=r,typeof r!="string"&&(o=""+r,__dcg_shared_module_exports__['td'].warn("randomSeed must be a string. you provided a "+typeof r+"."));break;case"backgroundColor":o=r,typeof r!="string"&&(o="",__dcg_shared_module_exports__['td'].warn(i+" must be a string. you provided a "+typeof r+".")),o||(o="#fff"),o[0]!=="#"&&(o="#"+o);break;case"textColor":o=r,typeof r!="string"&&(o="",__dcg_shared_module_exports__['td'].warn(i+" must be a string. you provided a "+typeof r+".")),o||(o="#000"),o[0]!=="#"&&(o="#"+o);break;case"fontSize":o=r,typeof r!="number"&&(o=parseInt(o,10),__dcg_shared_module_exports__['td'].warn("fontSize must be a number. Attempted to convert "+r+" to "+o+"."));break;case"language":o=r,typeof r!="string"&&(o="",__dcg_shared_module_exports__['td'].warn(i+" must be a string. you provided a "+typeof r+".")),r!=="en"&&!Ov(r)&&(o="en",__dcg_shared_module_exports__['td'].warn(r+" is not currently an available language."));break;default:o=r;break}return o}validateSettings(i){var r={},o=!1;for(var n in i)this.stateProperties.indexOf(n)>=0?r[n]=this._validateSetting(n,i[n]):(__dcg_shared_module_exports__['td'].warn('Invalid graph setting "'+n+'".'),o=!0);return o&&__dcg_shared_module_exports__['td'].warn(`Available graph settings are: 
`+this.stateProperties.join(`
`)),r}getBackgroundColor({invertWhite:i}={invertWhite:!1}){var r=__dcg_shared_module_exports__['jd'](this.config.backgroundColor||"#fff");return this.config.invertedColors&&(r!=="#ffffff"||i)?__dcg_shared_module_exports__['md'](r):r}getTextColor({invertBlack:i}={invertBlack:!1}){var r=__dcg_shared_module_exports__['jd'](this.config.textColor||"#000");return this.config.invertedColors&&(r!=="#000000"||i)?__dcg_shared_module_exports__['md'](r):r}};Tt();var y3=__dcg_shared_module_exports__['h'](j());function jv(t){var e=t&&t.id;if(t&&t.type==="table"){var i=Cn(t);if(i){var r=t.columnModels[i.column];e=r?r.id:void 0}else e=void 0}return e}function N2(t,e,i){var r=t.getAllSelectedItems(),o={};for(var n of r){var a=jv(n);a!==void 0&&(o[a]=!0,i[a]||e.selectSketch(a))}for(let s in i)o[s]||e.deselectSketch(s);return o}var Ms=function(t,e,i){if(t===void 0||e===void 0)return!1;let r,o=e.getBoundingClientRect().height,n=t.getBoundingClientRect().height,a=ul(t),s=ul(e);if(!a||!s)return!1;let l=e.scrollTop,c=a.top+l-s.top,p=c-i,u=n+c+i-o;return p>=u?r=Math.min(Math.max(l,u),p):r=.5*(p+u),r!==l?(e.scrollTop=r,e.scrollTop!=l):!1};function Np(t,e,i,r=3){let[o,n,a,s]=t,{x:l,y:c}=e.mathToPixels.mapPoint({x:o,y:n}),{x:p,y:u}=e.mathToPixels.mapPoint({x:a,y:s}),g=Math.min(r,Math.max(e.screen.width,e.screen.height)),m={xmin:-g,ymin:-g,xmax:e.screen.width+g,ymax:e.screen.height+g},w=l-p,C=c-u,S=-w,k=-C,M=l-m.xmin,I=m.xmax-l,E=c-m.ymin,T=m.ymax-c,A=[],G=[];if(w!==0){let B=M/w,J=I/S;w<0?(A.push(B),G.push(J)):(A.push(J),G.push(B))}if(C!==0){let B=E/C,J=T/k;C<0?(A.push(B),G.push(J)):(A.push(J),G.push(B))}(i===17||i===24)&&(A.push(0),G.push(1)),i===19&&A.push(0);let _=Math.max(...A),P=Math.min(...G);if(_>P)return{mapped:[l,c,p,u],clipped:[]};let N=l+S*_,W=c+k*_,X=l+S*P,q=c+k*P;return N<m.xmin&&X<m.xmin||N>m.xmax&&X>m.xmax||W<m.ymin&&q<m.ymin||W>m.ymax&&q>m.ymax?{mapped:[l,c,p,u],clipped:[]}:{mapped:[l,c,p,u],clipped:[N,W,X,q]}}var cn=class{constructor(e,i,r){this.pattern=r,this.replen=this.pattern[0]+this.pattern[1],i/this.replen>1e3&&(this.pattern[0]=i*this.pattern[0]/this.replen/1e3,this.pattern[1]=i*this.pattern[1]/this.replen/1e3),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null,this.ctx=e}static getDashedPattern(e,i){let r=e.lineWidth*11/(i?3.5:2.5),o=r*7/11;return[r,o]}static getDottedPattern(e,i,r){let o=.5*e.lineWidth*.1/(r?3.5:2.5),n=o*8/.1;return i&&(n*=2),[o,n]}static getTotalSegmentLength(e){if(e.length<4)return 0;let i=0,r=0,o=e[0],n=e[1];for(;isNaN(o)||isNaN(n);){if(r+=2,r>=e.length)return 0;o=e[r],n=e[r+1]}let a,s;for(r+=2;r<e.length;r+=2)a=e[r],s=e[r+1],!(isNaN(a)||isNaN(s))&&(i+=__dcg_shared_module_exports__['la'](a-o,s-n),o=a,n=s);return i}start(e,i){this.px=e,this.py=i}next(e,i){if(this.px===null||this.py===null)throw new Error("Must call start before calling next");let r=this.pattern[this.pstate],o=Math.sqrt(Math.pow(e-this.px,2)+Math.pow(i-this.py,2));if(o>1e-5){for(;o+this.dstaccum>=r;){let n=e-this.px,a=i-this.py,s=r-this.dstaccum;n*=s/o,a*=s/o,this.pstate===0&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(this.px+n,this.py+a)),this.dstaccum=0,this.px+=n,this.py+=a,this.pstate=this.pstate===0?1:0,r=this.pattern[this.pstate],o-=s}this.pstate===0&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(e,i))}this.px=e,this.py=i,this.dstaccum+=o}close(){this.pstate=0,this.dstaccum=0,this.px=null,this.py=null}drawSegment(e){let i=0,r=e[0],o=e[1];for(;isNaN(r)||isNaN(o);){if(i+=2,i>=e.length)return;r=e[i],o=e[i+1]}this.start(r,o);let n,a;for(i+=2;i<e.length;i+=2)n=e[i],a=e[i+1],!(isNaN(n)||isNaN(a))&&this.next(n,a);this.close()}};var Cd=10,Sd=3;function Yv(t,e){return t+1e-8*(e-t)>t&&e-t>1e-300&&e-t<1e300}function K2(t,e){return t>1e-300&&Yv(t,e)}var er=class t{constructor(e=-10,i=10,r=-10,o=10,n=-2,a=2){this.xmin=e,this.xmax=i,this.ymin=r,this.ymax=o,this.zmin=n,this.zmax=a}static fromObject({xmin:e,xmax:i,ymin:r,ymax:o,zmin:n,zmax:a}){return new t(e,i,r,o,n,a)}toObject(){return{xmin:this.xmin,ymin:this.ymin,zmin:this.zmin,xmax:this.xmax,ymax:this.ymax,zmax:this.zmax}}equals(e){return!(this.xmin!==e.xmin||this.ymin!==e.ymin||this.zmin!==e.zmin||this.xmax!==e.xmax||this.ymax!==e.ymax||this.zmax!==e.zmax)}isXValid(e){return e==="linear"?Yv(this.xmin,this.xmax):K2(this.xmin,this.xmax)}isYValid(e){return e==="linear"?Yv(this.ymin,this.ymax):K2(this.ymin,this.ymax)}isZValid(){return this.zmin===void 0||this.zmax===void 0?!1:Yv(this.zmin,this.zmax)}isValid(e){return this.isXValid(e.xAxisScale)&&this.isYValid(e.yAxisScale)}isSquare(e,i){return Math.abs(e.height-e.width*this.aspectRatio(i))<1}isSquare3D(){let{xmin:e,xmax:i,ymin:r,ymax:o,zmin:n,zmax:a}=this;if(n===void 0||a===void 0)return!1;let s=[i-e,o-r,a-n];return Math.min(...s)/Math.max(...s)>.99999}aspectRatio(e){let i=Cd/Sd,r=e.yAxisScale==="linear"?this.ymax-this.ymin:Math.log10(this.ymax/this.ymin)*i,o=e.xAxisScale==="linear"?this.xmax-this.xmin:Math.log10(this.xmax/this.xmin)*i;return r/o}getSquaredAxisLimits({axis:e,screen:i,settings:r}){let[o,n,a,s,l]=e==="y"?[{min:this.ymin,max:this.ymax},{min:this.xmin,max:this.xmax},i.height/i.width,r.yAxisScale,r.xAxisScale]:[{min:this.xmin,max:this.xmax},{min:this.ymin,max:this.ymax},i.width/i.height,r.xAxisScale,r.yAxisScale];if(s==="logarithmic"){let p=l==="logarithmic"?Math.log(n.max)-Math.log(n.min):(n.max-n.min)*Sd/(Cd*Math.LOG10E),{min:u,max:g}=q2({min:Math.log(o.min),max:Math.log(o.max)},a*p);return{min:Math.exp(u),max:Math.exp(g)}}let c=l==="logarithmic"?(Math.log10(n.max)-Math.log10(n.min))*Cd/Sd:n.max-n.min;return q2(o,c*a)}squareXAxis(e,i){let{min:r,max:o}=this.getSquaredAxisLimits({axis:"x",screen:e,settings:i}),n=new t(r,o,this.ymin,this.ymax);return n.isXValid(i.xAxisScale)?n:this}squareYAxis(e,i){let{min:r,max:o}=this.getSquaredAxisLimits({axis:"y",screen:e,settings:i}),n=new t(this.xmin,this.xmax,r,o);return n.isYValid(i.yAxisScale)?n:this}squareCrop(e,i){return this.aspectRatio({xAxisScale:i.xAxisScale,yAxisScale:i.yAxisScale})>e.height/e.width?this.squareYAxis(e,i):this.squareXAxis(e,i)}polarDiameter(){let e=Math.abs(this.xmax),i=Math.abs(this.xmin),r=Math.abs(this.ymax),o=Math.abs(this.ymin);return 1.5*Math.max(e,i,r,o)}largestR(){return Math.sqrt(Math.pow(Math.max(-this.xmin,this.xmax),2)+Math.pow(Math.max(-this.ymin,this.ymax),2))}smallestR(){return this.xmin<=0&&this.xmax>=0&&this.ymin<=0&&this.ymax>=0?0:this.xmin<=0&&this.xmax>=0?Math.min(Math.abs(this.ymin),Math.abs(this.ymax)):this.ymin<=0&&this.ymax>=0?Math.min(Math.abs(this.xmin),Math.abs(this.xmax)):Math.sqrt(Math.pow(Math.max(this.xmin,-this.xmax),2)+Math.pow(Math.max(this.ymin,-this.ymax),2))}};function q2(t,e){let i=.5*(t.min+t.max),[r,o]=[i-.5*e,i+.5*e];return Math.abs((o-r)/e-1)>.1?{min:-.5*e,max:.5*e}:{min:r,max:o}}var Jv={IS_HOVERED:1.2,IS_PRESSED:1.4,IS_GHOSTED:.4},Ff={IS_HOVERED:.5,IS_DEPRESSED:.3},Jk={IS_GHOSTED:.4},Xv={IS_HOVERED:.3,IS_DEPRESSED:.5},Qv={IS_GHOSTED:.4},Rf=1;var Dc,Bp=new Map,Zv=0;function U2(t,e,i){let r=t.imageObj;if(Dc&&Dc.color===e&&Dc.img===r)return Dc.canvas;Dc?(Dc.color=e,Dc.img=r):Dc={color:e,img:r,canvas:document.createElement("canvas")};let o=Dc.canvas,n=t.mimeType==="image/svg+xml";o.width=0,o.width=n?i.width:r.width,o.height=n?i.height:r.height;let a=o.getContext("2d");return a.drawImage(r,0,0,o.width,o.height),a.fillStyle=e,a.globalCompositeOperation="source-atop",a.fillRect(0,0,o.width,o.height),o}function w4(t,e){if(e.width*e.height>1e3*1e3*window.devicePixelRatio*window.devicePixelRatio)return t.imageObj;let i=t.image_url,r=Bp.get(i),o;if(!r||e.width!==r.size.width||e.height!==r.size.height){r&&(Bp.delete(i),Zv-=r.canvas.width*r.canvas.height);let a=t.imageObj,s=document.createElement("canvas");s.width=e.width,s.height=e.height;var n=s.getContext("2d");n.drawImage(a,0,0,s.width,s.height);let l=20*1e3*1e3;if(s.width*s.height>l)return t.imageObj;for(Zv+=s.width*s.height;Zv>l;){let[c,p]=Array.from(Bp)[0];Bp.delete(c),Zv-=p.canvas.width*p.canvas.height}Bp.set(i,{canvas:s,size:e}),o=s}else Bp.delete(i),Bp.set(i,r),o=r.canvas;return o}function eC(t,e,i,r={cacheRenderedSvgs:!1}){let{ctx:o,projection:n}=t,a=e.formula;if(!a||!a.dimensions.x)return;let s=a.dimensions;for(let l=0;l<s.x.length;l++){let c=s.x[l],p=s.y[l],u=s.width[l],g=s.height[l],m=s.radianAngle[l];if(!isFinite(c)||!isFinite(p)||!isFinite(u)||!isFinite(g)||!isFinite(m))continue;ji(o,"dcg-svg-image"),o.save(),_i(o),o.globalAlpha=s.opacity[l];let w=n.mapy(g)-n.mapy(0),C=n.mapx(u)-n.mapx(0),S=m===0?1:Math.abs(C/u*(g/w)),k=n.mapx(c),M=n.mapy(p),I=k-C/2,E=M+w*S/2,T=g<0?-1:1,A=u<0?-1:1,G=I*A,_=E*T,P=Math.abs(C),N=Math.abs(w);m!==0&&(o.translate(k,M),o.scale(1,1/S),o.rotate(m),o.translate(-k,-M)),o.scale(A,T);let W=i.shouldDrawHovered(t,e.id,l),X=i.shouldDrawPressed(e.id,l),q=r.currentKeyboardAttention&&r.currentKeyboardAttention.calcId===e.id&&(r.currentKeyboardAttention.listIndex===void 0||r.currentKeyboardAttention.listIndex===l),J=e.imageObj,f=window.devicePixelRatio*(n.screen.width/n.screen.height),O={width:Math.floor(P*f),height:Math.floor(N*f)};X?e.depressedImageObj?J=e.depressedImageObj:J=U2(e,"rgba(50,50,50,0.2)",O):W?e.hoveredImageObj?J=e.hoveredImageObj:J=U2(e,"rgba(200,200,200,0.2)",O):r.cacheRenderedSvgs&&e.mimeType==="image/svg+xml"&&(J=w4(e,O)),o.drawImage(J,G,_,P,N*S);let R=0,re=3;if(Sn(e)&&e.controller.isTraceEnabled()&&(o.beginPath(),o.rect(G-R,_-R,P+2*R,N*S+2*R),o.restore(),o.save(),o.strokeStyle="#6993C7",o.lineWidth=re,o.stroke()),q){let ie=o.globalAlpha;R=5,o.beginPath(),o.roundRect?o.roundRect(G-R,_-R,P+2*R,N*S+2*R,R):o.rect(G-R,_-R,P+2*R,N*S+2*R),o.restore(),o.save(),o.strokeStyle=__dcg_shared_module_exports__['nd'].FOCUS_OUTLINE,o.globalAlpha=1,o.lineWidth=re,o.stroke(),o.globalAlpha=ie}o.restore()}}function dn(t,e){let i=t;i._dcgStartNamedGroup&&i._dcgStartNamedGroup(e)}function Nf(t,e){let i=t;i._dcgSetTitle&&i._dcgSetTitle(e)}function pn(t){let e=t;e._dcgEndNamedGroup&&e._dcgEndNamedGroup()}function H2(t){return t.uncommitted?"#ccc":!t.selected&&!t.hovered&&W2(t)===1?__dcg_shared_module_exports__['ld'](t.color,.2):t.color}function W2(t){let e=.6;return t.hidden?t.selected?e=.4:e=.25:t.selected||t.isPoint?e=1:t.hovered&&(e=.8),t.isTransparentObject&&(e*=.3),e}function v4(t){return t.hidden?t.isPoint?0:t.selected?.3:.2:t.selected||t.isPoint||t.hovered?1:.7}function $2(t,e){if(t=t.replace(/#/,""),t.length===3)var i=parseInt(t.slice(0,1)+t.slice(0,1),16),r=parseInt(t.slice(1,2)+t.slice(1,2),16),o=parseInt(t.slice(2,3)+t.slice(2,3),16);else if(t.length===6)var i=parseInt(t.slice(0,2),16),r=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16);else var i=0,r=0,o=0;return`rgba(${i}, ${r}, ${o}, ${e})`}function Kf(t){return $2(H2(t),v4(t))}function tC(t){return $2(H2(t),W2(t))}function iC(t){return Math.abs(Math.abs(t)-Math.PI/2)<1e-6}var Yh=1.4,j2=1.5,nC={};function Z2(t={}){return Object.keys(t).length}function oC(t,e={}){return Z2(e)===0?t:t.filter((i,r)=>!e[r])}function Y2(t,e){let i=[];for(let r=0;r<t;r++)i.push(e);return i}function D4(){return!!Object.keys(nC).length}var Qk=function(t,e){let i=3;return e&&(i+=e),new er(-i,t.width+i,-i,t.height+i)};function J2(t,e){let{displayAsRightAngle:i,rx:r,ry:o,startAngle:n,deltaAngle:a,yscreen:s,xscreen:l}=t;if(i){let c=r*Math.cos(-n),p=r*Math.cos(-n-a),u=o*Math.sin(-n),g=o*Math.sin(-n-a);e.moveTo(l+c,s+u),e.lineTo(l+c+p,s+u+g),e.lineTo(l+p,s+g)}else e.ellipse(l,s,r,o,0,-n,-n-a,a>0)}var Ed=class t{constructor(e,i,r){if(this.controller=e,this.getExpressionAriaLabel=r,i.config.plaidMode){let o=["RED","BLUE","GREEN","PURPLE","ORANGE","BLACK"];for(let n of o)nC[__dcg_shared_module_exports__['nd'][n]]=document.createElement("img"),nC[__dcg_shared_module_exports__['nd'][n]].setAttribute("src","/assets/img/april-fools/"+n.toLowerCase()+".png")}}redrawToCtx(e,i,r,o,n,a,s){let{ctx:l,projection:c}=e;dn(l,"expressions");let p=c.settings.highlight,u=this.controller.isGeometry();o.forEach(g=>{let m=i[g],w=r[g];m!==void 0&&(u&&c.settings.setProperty("highlight",m.showHighlight),dn(l,"sketch"),c.settings.takingScreenshot&&Nf(l,this.getExpressionAriaLabel(g)),t.drawSketchToCtx({sketch:i[g],drawContext:e,poiLabelsLayer:n,clickableObjectsLayer:a,geometryContext:this.controller.getGeoModel(),showMovablePoints:s==null?void 0:s.showMovablePoints}),pn(l)),w&&w.shouldGraph&&w.foreground&&eC(e,w,a,{currentKeyboardAttention:this.controller.get2dPOIController().keyboardAttentionManager.getKeyboardAttention(),cacheRenderedSvgs:this.controller.getGraphSettings().config.cacheRenderedSvgs})}),pn(l),c.settings.setProperty("highlight",p)}static eachSegment(e,i){for(let r of e.branches)if(r.graphMode!==15)for(let o of r.segments)i(r,o)}static drawSketchToCtx({sketch:e,drawContext:i,poiLabelsLayer:r,clickableObjectsLayer:o,geometryContext:n,showMovablePoints:a}){var S,k,M,I,E;if(!e.branches||!e.branches.length)return;let{ctx:s,projection:l}=i,c=s.lineWidth,p=s.globalAlpha,u=l.settings.globalCurveColor?l.settings.globalCurveColor:e.color,g=nC[u],m;g&&g.complete&&g.naturalWidth>0?m=s.createPattern(g,"repeat"):m=u,s.lineJoin="round",s.lineCap="round";let w=!!l.settings.takingScreenshot,C=!!a;for(let T of e.branches){if(T.graphMode===3||T.graphMode===4||T.graphMode===15||T.graphMode===22)continue;let A=1;o.shouldDrawHovered(i,e.id,T.listIndex)&&(A=Jv.IS_HOVERED),o.shouldDrawPressed(e.id,T.listIndex)&&(A=Jv.IS_PRESSED),o.shouldDrawGhosted(e.id)&&(A=Jv.IS_GHOSTED),A*=(S=n==null?void 0:n.getToolFadeOpacity(e.id))!=null?S:1,A*=l.settings.getFillOpacityMultiplier(),s.strokeStyle=u,s.fillStyle=T.color&&!l.settings.globalCurveColor&&!D4()?T.color:m,T.graphMode!==6&&(s.desmos_batching=!0,s.beginPath());for(let G of T.segments){let _=(k=T.graphMode)!=null?k:2;if(_===7&&!l.settings.disableFill)t.fillPolygonToCtx(s,l,G,T.fillOpacity===void 0?NaN:T.fillOpacity*A);else if(_!==8){let P=T.operator,N=!l.settings.disableFill&&(P=="<"||P==">"||P=="<="||P==">="),W=P=="<="||P=="<";N&&t.fillGraphStrokeToCtx(s,l,G,W,_)}}s.globalAlpha=t._clampedOpacity(T.fillOpacity===void 0?NaN:T.fillOpacity*A,.4),T.graphMode!==6&&(s.fill(),s.desmos_batching=!1),s.globalAlpha=1;for(let G of T.segments){let _=2;T.graphMode&&(_=T.graphMode);let P=G,N=T.lineWidth!==void 0,W=T.lineWidth,X=2.5,q=(M=T.arrowMode)!=null?M:"DEFAULT";if(s.strokeStyle=T.color,s.fillStyle=T.color,N&&(W<=0||!isFinite(W)))continue;s.lineWidth=N?W:X;let B=l.settings.graphLineWidth/X,J=1.3;l.settings.highlight&&(J*=5/7),e.tokenSelected?(B*=j2,J/=j2):e.tokenHovered&&(B*=Yh,J/=Yh),s.lineWidth*=B,s.globalAlpha*=l.settings.curveOpacity,s.globalAlpha=t._clampedOpacity(l.settings.curveOpacity===1?1:T.lineOpacity,.9);let f=T.operator,O="default";f==="<"||f===">"||f==="!="?O="DASHED":f==="<="||f===">="?O="SOLID":e.style==="DASHED"||T.style==="DASHED"?O="DASHED":(e.style==="DOTTED"||T.style==="DOTTED")&&(O="DOTTED",N&&(s.lineWidth*=2)),s.globalAlpha*=(I=n==null?void 0:n.getToolFadeOpacity(e.id))!=null?I:1;let R=!T.isIntersectionExtension&&o.shouldDrawHovered(i,e.id,T.listIndex),re=!T.isIntersectionExtension&&o.shouldDrawPressed(e.id,T.listIndex),ie=o.shouldDrawGhosted(e.id);ie?s.globalAlpha*=Jk.IS_GHOSTED:(re||R)&&(s.save(),s.lineWidth+=4.5,s.globalAlpha*=re?Ff.IS_DEPRESSED:Ff.IS_HOVERED,t.drawGraphStrokeToCtx(s,l,P,{type:O,graphMode:_,op:f,arrowMode:q,arrowHeadBaseWidth:(s.lineWidth-4.5)*J,opacityMultiplier:re?Ff.IS_DEPRESSED:Ff.IS_HOVERED}),s.restore()),t.drawGraphStrokeToCtx(s,l,P,{type:O,graphMode:_,op:f,arrowMode:q,arrowHeadBaseWidth:s.lineWidth*J,opacityMultiplier:((E=n==null?void 0:n.getToolFadeOpacity(e.id))!=null?E:1)*(ie?Jk.IS_GHOSTED:Rf)})}}s.lineWidth=c,s.globalAlpha=p,s.strokeStyle=u,t.eachSegment(e,(function(T,A){var G;if(T.graphMode===3&&T.showPoint||T.graphMode===4&&w){let _=A,P=[],N;if(T.interactiveLabel&&e.labels)for(let ie=0,ve=e.labels.length;ie<ve;ie++){let ae=e.labels[ie];if(ae.type==="poi"){let oe=r.isOpenPOI(ae.poi),Z=r.getHoveredPOI()===ae.poi;P.push(oe||Z),!oe&&Z&&(N=ie)}}let W=T.graphMode===4&&w&&!C&&T.pointOpacity===1,X=1;typeof T.pointSize=="number"?X=T.pointSize/9:Array.isArray(T.pointSize)&&(X=T.pointSize.map(function(ie){return ie/9}));let q;Array.isArray(T.color)&&(q=T.color);let B=o.getHoveredObjectById(e.id),J=o.shouldDrawHovered(i,e.id,void 0),f=o.getPressedObject(),O=o.shouldDrawPressed(e.id,f==null?void 0:f.listIndex),R=o.shouldDrawGhosted(e.id),re=T.droppedIndices;if((J||O)&&!R){let ie=_.length;re&&(ie+=Z2(re));let ve=Y2(ie,0),ae=Array.isArray(X)?X.slice():Y2(ie,X);O&&f?f.listIndex===void 0?(ve=ve.map(()=>Xv.IS_DEPRESSED),ae=ae.map(oe=>oe*1.5)):(ve[f.listIndex]=Xv.IS_DEPRESSED,ae[f.listIndex]*=1.5):J&&B&&(ve=ve.map((oe,Z)=>B.listIndexes===void 0||B.listIndexes[Z]?Xv.IS_HOVERED:oe),ae=ae.map((oe,Z)=>B.listIndexes===void 0||B.listIndexes[Z]?oe*1.5:oe)),t.drawPointsToCtx({ctx:s,projection:l,segment:_,style:T.style,sizeOverrideIdxs:P,opacityOverrideIdx:N,sizeFactor:ae,opacityFactor:ve,colorOverrides:q,baseOpacity:T.pointOpacity,droppedIndices:re,sketch:e,isKeyboardFocused:o.isKeyboardFocused(e.id,void 0)}),s.restore()}t.drawPointsToCtx({ctx:s,projection:l,segment:_,style:T.style,sizeOverrideIdxs:P,opacityOverrideIdx:N,sizeFactor:X,opacityFactor:((G=n==null?void 0:n.getToolFadeOpacity(e.id))!=null?G:1)*(R?Qv.IS_GHOSTED:Rf),colorOverrides:q,baseOpacity:W?.9:T.pointOpacity,droppedIndices:re,sketch:e})}}).bind(this))}static drawGraphStrokeToCtx(e,i,r,o){let n={arrowHeadBaseWidth:e.lineWidth},{type:a,graphMode:s,op:l,arrowMode:c,arrowHeadBaseWidth:p}=Object.assign({},n,o);if(s===20||s===21){let[C,S,k]=r,M=i.mathToPixels.mapX(C),I=i.mathToPixels.mapY(S),E=i.mathToPixels.dangerouslyGetXScaleFactor(),T=i.mathToPixels.dangerouslyGetYScaleFactor(),A=Math.abs(k*E),G=Math.abs(k*T),_,P;if(s===21?(_=-r[3],P=-r[4]):(_=0,P=2*Math.PI),e.save(),ji(e,"dcg-svg-curve"),e.desmos_batching||e.beginPath(),a==="DASHED"){let N=cn.getDashedPattern(e,!!i.settings.highlight);e.setLineDash(N)}else if(a==="DOTTED"){let N=cn.getDottedPattern(e,!!i.settings.config.projectorMode,!!i.settings.highlight);e.setLineDash(N)}e.ellipse(M,I,A,G,0,_,P,_>P),e.desmos_batching||e.stroke(),_i(e),e.restore();return}else if(s===23){let[C,S,k,M,I]=r,E=!I&&iC(M),T=Dd(M,i),A=i.mathToPixels.mapX(C),G=i.mathToPixels.mapY(S),_=i.mathToPixels.dangerouslyGetXScaleFactor(),P=i.mathToPixels.dangerouslyGetYScaleFactor(),N=_>P?_/P:1,W=_>P?1:P/_,X=Math.abs(N*T),q=Math.abs(W*T);if(e.save(),ji(e,"dcg-svg-curve"),e.globalAlpha=.4*o.opacityMultiplier,e.desmos_batching||e.beginPath(),e.moveTo(A,G),e.lineTo(A+X*Math.cos(-k),G+q*Math.sin(-k)),J2({displayAsRightAngle:E,rx:X,ry:q,startAngle:k,deltaAngle:M,yscreen:G,xscreen:A},e),e.lineTo(A,G),!e.desmos_batching&&!I&&e.fill(),e.globalAlpha=o.opacityMultiplier,e.desmos_batching||e.beginPath(),J2({displayAsRightAngle:E,rx:X,ry:q,startAngle:k,deltaAngle:M,yscreen:G,xscreen:A},e),I){let B=-k-M,J=A+X*Math.cos(B),f=G+q*Math.sin(B);eI(e,J,f,-k,-M,10,X)}e.globalAlpha=o.opacityMultiplier,e.desmos_batching||e.stroke(),e.lineWidth=1.5,e.globalAlpha=.2*o.opacityMultiplier,e.moveTo(A+1.5*X*Math.cos(-k),G+1.5*q*Math.sin(-k)),e.lineTo(A,G),e.lineTo(A+1.5*X*Math.cos(-k-M),G+1.5*q*Math.sin(-k-M)),e.stroke(),_i(e),e.restore()}else if(s===17||s===18||s===19||s===24){let{clipped:C,mapped:S}=Np(r,i,s,e.lineWidth);if(C.length===0)return;let[k,M,I,E]=C,[T,A,G,_]=S;e.save(),ji(e,"dcg-svg-curve");let P;if(e.desmos_batching||e.beginPath(),a=="DASHED"?(P=new cn(e,cn.getTotalSegmentLength(C),cn.getDashedPattern(e,!!i.settings.highlight)),P.drawSegment(C)):a=="DOTTED"?(P=new cn(e,cn.getTotalSegmentLength(C),cn.getDottedPattern(e,!!i.settings.config.projectorMode,!!i.settings.highlight)),P.drawSegment(C)):(e.moveTo(k,M),e.lineTo(I,E)),s===17){let N=X2(a)*p,{startArrow:W,endArrow:X}=I4(k4(s,c));W&&As(e,G,_,T,A,N),X&&As(e,T,A,G,_,N)}else if(s===24&&(T!==G||A!==_)){let N=X2(a)*p;As(e,T,A,G,_,N)}e.desmos_batching||e.stroke(),_i(e),e.restore();return}let u=__dcg_shared_module_exports__['Pc'](s,l!=="=",i.settings),g=__dcg_shared_module_exports__['Jc'](r,i.mathToPixels,u),m=__dcg_shared_module_exports__['Kc'](g,Qk(i.screen,e.lineWidth));if(m.length===0)return;e.save(),ji(e,"dcg-svg-curve");let w;if(e.desmos_batching||e.beginPath(),a=="DASHED")w=new cn(e,cn.getTotalSegmentLength(m),cn.getDashedPattern(e,!!i.settings.highlight)),w.drawSegment(m);else if(a=="DOTTED")w=new cn(e,cn.getTotalSegmentLength(m),cn.getDottedPattern(e,!!i.settings.config.projectorMode,!!i.settings.highlight)),w.drawSegment(m);else if((a==="SOLID"||a==="default")&&e.lineWidth===1)if(m.length>4||m[0]!==m[2]&&m[1]!==m[3]){e.moveTo(m[0],m[1]);for(let S=0;S<m.length;S+=2)e.lineTo(m[S],m[S+1])}else{e.moveTo(__dcg_shared_module_exports__['sa'](m[0]),__dcg_shared_module_exports__['sa'](m[1]));for(let S=0;S<m.length;S+=2)e.lineTo(__dcg_shared_module_exports__['sa'](m[S]),__dcg_shared_module_exports__['sa'](m[S+1]))}else{e.moveTo(m[0],m[1]);for(let C=0;C<m.length;C+=2)e.lineTo(m[C],m[C+1])}e.desmos_batching||e.stroke(),_i(e),e.restore()}static mapPointToScreen(e,i,r){let n=e.mapx(i);if(n<-20||n>e.screen.width+20)return null;let a=e.mapy(r);return a<-20||a>e.screen.height+20?null:{x:n,y:a}}static drawPointToCtx(e){let{ctx:i,projection:r,sketch:o,x:n,y:a}=e,{sizeFactor:s}=e,l=i.lineWidth,c=i.fillStyle,p=i.strokeStyle,u=t.mapPointToScreen(r,n,a);if(!u||e.sizeFactor!==void 0&&(e.sizeFactor<=0||!isFinite(e.sizeFactor)))return!1;ji(i,"dcg-svg-point"),e.alpha!==void 0?i.globalAlpha=e.alpha:i.globalAlpha=.9,e.opacityFactor!==void 0&&(i.globalAlpha*=e.opacityFactor),i.desmos_batching||i.beginPath();let g=r.settings.pointLineWidth;if(e.overrideSize&&(g=r.settings.config.projectorMode?17:11,i.lineWidth=g),o.tokenSelected?s?s*=1.5:s=1.5:o.tokenHovered&&(s?s*=Yh:s=Yh),s!==void 0&&(g*=s,i.lineWidth=g),e.colorOverride&&(i.fillStyle=e.colorOverride,i.strokeStyle=e.colorOverride),e.style==="CROSS"){let m=g*.4;i.moveTo(u.x-m,u.y-m),i.lineTo(u.x+m,u.y+m),i.moveTo(u.x+m,u.y-m),i.lineTo(u.x-m,u.y+m),i.lineWidth=g*.3}else if(e.style==="OPEN"){let m=g*.42;i.moveTo(u.x+m,u.y),i.arc(u.x,u.y,m,0,Math.PI*2,!0),i.closePath(),i.fillStyle="white",i.lineWidth=g*.25,i.fill()}else i.moveTo(u.x-.1,u.y-.1),i.lineTo(u.x-.1,u.y+.1),i.lineTo(u.x+.1,u.y+.1),i.lineTo(u.x+.1,u.y-.1);if(i.desmos_batching||i.stroke(),i.globalAlpha=1,e.isKeyboardFocused){let m=g/2+6;i.lineWidth=2,i.strokeStyle="#6A93D2",i.beginPath(),i.moveTo(u.x+m,u.y),i.arc(u.x,u.y,m,0,Math.PI*2,!0),i.stroke(),i.closePath()}return i.lineWidth=l,i.fillStyle=c,i.strokeStyle=p,_i(i),!0}static drawPointsToCtx(e){let{ctx:i,projection:r,segment:o,style:n,sizeOverrideIdxs:a,opacityOverrideIdx:s,sizeFactor:l,opacityFactor:c,colorOverrides:p,baseOpacity:u,droppedIndices:g}=e,m=i.lineWidth;i.lineWidth=r.settings.pointLineWidth;let w;Array.isArray(u)?(w=u.map((function(C){return t._clampedOpacity(C,.9)}).bind(this)),w=oC(w,g)):w=t._clampedOpacity(u,.9),Array.isArray(l)&&(l=oC(l,g)),Array.isArray(c)&&(c=oC(c,g)),p&&(p=oC(p,g));for(let C=0;C<o.length;C++)t.drawPointToCtx({ctx:i,projection:r,sketch:e.sketch,x:o[C][0],y:o[C][1],alpha:s===C?.6:Array.isArray(w)?w[C]:w,style:n,overrideSize:a[C],sizeFactor:Array.isArray(l)?l[C]:l,opacityFactor:Array.isArray(c)?c[C]:c,colorOverride:p&&p[C],isKeyboardFocused:e.isKeyboardFocused});i.lineWidth=m}static fillGraphStrokeToCtx(e,i,r,o,n){e.globalAlpha=n===6?.2:.4;let a=null,s=null,l;if(n===6){s=__dcg_shared_module_exports__['Ec'];let p=o?0:i.viewport.polarDiameter(),u=i.settings.degreeMode?180:2*Math.PI;a=__dcg_shared_module_exports__['Nc'](r,p,u)}else n===2?(s=__dcg_shared_module_exports__['Gc'],l=o?i.viewport.ymin:i.viewport.ymax,a=__dcg_shared_module_exports__['Oc'](r,l)):n===1&&(s=__dcg_shared_module_exports__['Fc'],l=o?i.viewport.xmin:i.viewport.xmax,a=__dcg_shared_module_exports__['Oc'](r,l));if(a===null||s===null)return;let c=Qk(i.screen);for(let p of a){let u=__dcg_shared_module_exports__['Pc'](n,!0,i.settings),g=__dcg_shared_module_exports__['Jc'](p,i.mathToPixels,u),m=__dcg_shared_module_exports__['Mc'](g,c,s,!1);if(m.length>=6){ji(e,"dcg-svg-region"),e.desmos_batching||e.beginPath(),e.moveTo(m[0],m[1]);for(let w=2;w<m.length;w+=2)e.lineTo(m[w],m[w+1]);e.lineTo(m[0],m[1]),e.desmos_batching||e.fill(),_i(e)}}e.globalAlpha=1}static _clampedOpacity(e,i){return typeof e!="number"?i:e<0?0:e>1?1:isFinite(e)?e:i}static fillPolygonToCtx(e,i,r,o){let n=Qk(i.screen);e.globalAlpha=t._clampedOpacity(o*i.settings.getFillOpacityMultiplier(),.4);let a=__dcg_shared_module_exports__['Jc'](r,i.mathToPixels,__dcg_shared_module_exports__['Hc']),s=__dcg_shared_module_exports__['Mc'](a,n,__dcg_shared_module_exports__['Ec'],!1);if(s.length>=6){ji(e,"dcg-svg-region"),e.desmos_batching||e.beginPath(),e.moveTo(s[0],s[1]);for(let l=2;l<s.length;l+=2)e.lineTo(s[l],s[l+1]);e.desmos_batching||e.fill(),_i(e)}e.globalAlpha=1}};function k4(t,e){return t===17?e==="DEFAULT"?"NONE":e:"NONE"}function I4(t){switch(t){case"NONE":return{startArrow:!1,endArrow:!1};case"POSITIVE":return{startArrow:!1,endArrow:!0};case"BOTH":return{startArrow:!0,endArrow:!0};default:let e=t;throw new Error("Unexpected arrowMode: "+e)}}function X2(t){switch(t){case"default":case"SOLID":case"DASHED":return 4;case"DOTTED":return 2;default:let e=t;throw new Error("Unexpected line style "+e)}}function As(t,e,i,r,o,n){let a=Math.atan2(o-i,r-e),s=r-n*Math.cos(a-Math.PI/9),l=o-n*Math.sin(a-Math.PI/9),c=r-n*Math.cos(a+Math.PI/9),p=o-n*Math.sin(a+Math.PI/9),u=r-(n-2)*Math.cos(a-Math.PI/18),g=o-(n-2)*Math.sin(a-Math.PI/18),m=r-(n-2)*Math.cos(a+Math.PI/18),w=o-(n-2)*Math.sin(a+Math.PI/18);t.moveTo(r,o),t.lineTo(s,l),t.lineTo(c,p),t.lineTo(r,o),t.lineTo(u,g),t.lineTo(m,w),t.lineTo(r,o)}function eI(t,e,i,r,o,n,a){let s=r+o,l=n*Math.min(1,Math.max(.5,Math.abs(o)/.8)),c=o<=0,p=Math.PI/2;a<25?p+=.25:p+=.1,c||(p*=-1);let u=e+Math.cos(s+p),g=i+Math.sin(s+p);As(t,u,g,e,i,l)}function Dd(t,e){let i=20;return e.settings.config.projectorMode&&(i*=1.4),i}var sC=class{constructor(e){this.savedPOI=[],this.controller=e}redrawToCtx(e,i,r,o,n){let{ctx:a,projection:s}=e,l=[];for(var c=0;c<n.length;c++){var p=n[c],u=i[p];if(u){u.showHighlight&&!this.controller.isGeometry()&&this.drawSketchHighlight({sketch:u,drawContext:e,poiLabelsLayer:r,clickableObjectsLayer:o,geometryContext:this.controller.getGeoModel()});var g=u.getPOI();(u.showPOI||g.length&&g[0].isAttachedToPlottedPoint())&&l.push.apply(l,this.drawPOIs(g,a,"#AAAAAA",s))}}this.savedPOI=l}getDrawnPOI(){return this.savedPOI}drawSketchHighlight(e){e.drawContext.projection.settings.setProperty("highlight",!0),Ed.drawSketchToCtx(e),e.drawContext.projection.settings.setProperty("highlight",!1)}drawPOIs(e,i,r,o){i.lineWidth=o.settings.pointLineWidth,i.strokeStyle=r||"#AAAAAA",i.fillStyle=r||"#AAAAAA",i.lineJoin="round",i.lineCap="round";var n=i.globalAlpha;i.globalAlpha=.01;var a=[],s,l=e.length,c;if(l&&e[0].isAttachedToPlottedPoint())for(s=0;s<l;s++)c=e[s],Ed.mapPointToScreen(o,c.x,c.y)&&a.push(c);else for(s=0;s<l;s++)c=e[s],Ed.drawPointToCtx(__dcg_shared_module_exports__['a']({ctx:i,projection:o},c))&&a.push(c);return i.globalAlpha=n,a}};var lC=class{redrawToCtx(e,i){let{ctx:r,projection:o}=e;if(i){r.save(),r.lineWidth=2,r.fillStyle="rgba(0,0,0,.15)",r.strokeStyle="rgba(0,0,0,.4)";var n=o.mapx(i.left),a=o.mapy(i.top),s=o.mapx(i.right),l=o.mapy(i.bottom),c=s-n,p=l-a;r.fillRect(n,a,c,p),r.strokeRect(n,a,c,p),r.restore()}}};var Ic=__dcg_shared_module_exports__['h'](j());var{If:M4}=Ic.Components,cC=class extends Ic.Class{init(){this.controller=this.props.grapher().controller,this.poiController=this.props.grapher().poiController}template(){return Ic.createElement(M4,{predicate:this.bindFn(this.showCursor)},()=>Ic.createElement("div",{class:Ic.const("dcg-geo-keyboard-cursor"),style:()=>({top:`${this.getPosition().y}px`,left:`${this.getPosition().x}px`})}))}getPosition(){let e=this.poiController.getGeoKeyboardPt(),i=this.props.grapher().getProjection();return{x:i.mapx(e.x),y:i.mapy(e.y)}}showCursor(){return this.controller.isVirtualMouseAllowed()}};var Zh,Je,Uf,rI,iI;function kn(t,e){var i=Object.keys(e),r;for(r=0;r<i.length;r++)t=t.replace(new RegExp("\\{"+i[r]+"\\}","gi"),e[i[r]]);return t}function dC(t){var e,i,r;if(!t)throw new Error("cannot create a random attribute name for an undefined object");e="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i="";do for(i="",r=0;r<12;r++)i+=e[Math.floor(Math.random()*e.length)];while(t[i]);return i}function G4(t,e){var i,r,o={},n,a;for(t=t.split(","),e=e||10,i=0;i<t.length;i+=2)r="&"+t[i+1]+";",n=parseInt(t[i],e),o[r]="&#"+n+";";return o["\\xa0"]="&#160;",o}function A4(t){var e={left:"start",right:"end",center:"middle",start:"start",end:"end"};return e[t]||e.start}iI=G4("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);Zh={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}};Uf=function(t,e){this.__root=t,this.__ctx=e};Uf.prototype.addColorStop=function(t,e){var i=this.__ctx.__createElement("stop"),r,o;i.setAttribute("offset",t),e.indexOf("rgba")!==-1?(r=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,o=r.exec(e),i.setAttribute("stop-color",kn("rgb({r},{g},{b})",{r:o[1],g:o[2],b:o[3]})),i.setAttribute("stop-opacity",o[4])):i.setAttribute("stop-color",e),this.__root.appendChild(i)};rI=function(t,e){this.__root=t,this.__ctx=e};Je=function(t){var e={width:500,height:500,enableMirroring:!1},i;if(arguments.length>1?(i=e,i.width=arguments[0],i.height=arguments[1]):t?i=t:i=e,!(this instanceof Je))return new Je(i);this._randomPostfix="-"+function(){return"xxxxxxxx".replace(/x/g,function(o){return(Math.random()*16|0).toString(16)})}(),this._svgClassNames=[],this.width=i.width||e.width,this.height=i.height||e.height,this.enableMirroring=i.enableMirroring!==void 0?i.enableMirroring:e.enableMirroring,this.canvas=this,this.__document=i.document||document,i.ctx?this.__ctx=i.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)};Je.prototype.__createElement=function(t,e,i){typeof e=="undefined"&&(e={});var r=this.__document.createElementNS("http://www.w3.org/2000/svg",t),o=Object.keys(e),n,a;for(i&&(r.setAttribute("fill","none"),r.setAttribute("stroke","none")),n=0;n<o.length;n++)a=o[n],r.setAttribute(a,e[a]);var s=this._svgClassNames&&this._svgClassNames[this._svgClassNames.length-1];return s&&r.setAttribute("class",s),r};Je.prototype.__setDefaultStyles=function(){var t=Object.keys(Zh),e,i;for(e=0;e<t.length;e++)i=t[e],this[i]=Zh[i].canvas};Je.prototype.__applyStyleState=function(t){var e=Object.keys(t),i,r;for(i=0;i<e.length;i++)r=e[i],this[r]=t[r]};Je.prototype.__getStyleState=function(){var t,e={},i=Object.keys(Zh),r;for(t=0;t<i.length;t++)r=i[t],e[r]=this[r];return e};Je.prototype.__applyStyleToCurrentElement=function(t){var e=this.__currentElement,i=this.__currentElementsToStyle;i&&(e.setAttribute(t,""),e=i.element,i.children.forEach(function(m){m.setAttribute(t,"")}));var r=Object.keys(Zh),o,n,a,s,l,c;for(o=0;o<r.length;o++)if(n=Zh[r[o]],a=this[r[o]],n.apply){if(a instanceof rI){if(a.__ctx)for(;a.__ctx.__defs.childNodes.length;)s=a.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[s]=s,this.__defs.appendChild(a.__ctx.__defs.childNodes[0]);e.setAttribute(n.apply,kn("url(#{id})",{id:a.__root.getAttribute("id")}))}else if(a instanceof Uf)e.setAttribute(n.apply,kn("url(#{id})",{id:a.__root.getAttribute("id")}));else if(n.apply.indexOf(t)!==-1&&n.svg!==a)if((n.svgAttr==="stroke"||n.svgAttr==="fill")&&a.indexOf("rgba")!==-1){l=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,c=l.exec(a),e.setAttribute(n.svgAttr,kn("rgb({r},{g},{b})",{r:c[1],g:c[2],b:c[3]}));var p=c[4],u=this.globalAlpha;u!=null&&(p*=u),e.setAttribute(n.svgAttr+"-opacity",p)}else{var g=n.svgAttr;if(r[o]==="globalAlpha"&&(g=t+"-"+n.svgAttr,e.getAttribute(g)))continue;e.setAttribute(g,a)}}};Je.prototype.__closestGroupOrSvg=function(t){return t=t||this.__currentElement,t.nodeName==="g"||t.nodeName==="svg"?t:this.__closestGroupOrSvg(t.parentNode)};Je.prototype.getSerializedSvg=function(t){var e=new XMLSerializer().serializeToString(this.__root),i,r,o,n,a,s;if(s=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi,s.test(e)&&(e=e.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),t)for(i=Object.keys(iI),r=0;r<i.length;r++)o=i[r],n=iI[o],a=new RegExp(o,"gi"),a.test(e)&&(e=e.replace(a,n));return e};Je.prototype.getSvg=function(){return this.__root};Je.prototype._dcgStartNamedGroup=function(t){var e=this.__createElement("g");e.setAttribute("id",t+this._randomPostfix);var i=this.__closestGroupOrSvg();this.__groupStack.push(i),i.appendChild(e),this.__currentElement=e};Je.prototype._dcgEndNamedGroup=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElement||(this.__currentElement=this.__root.childNodes[1])};Je.prototype._dcgSaveClassName=function(t){this._svgClassNames.push(t),this.__currentElement&&this.__currentElement.tagName==="path"&&!this.__currentDefaultPath&&(this.__currentElement.getAttribute("class")||this.__currentElement.setAttribute("class",t))};Je.prototype._dcgRestoreClassName=function(){this._svgClassNames.pop()};Je.prototype.save=function(){var t=this.__createElement("g"),e=this.__closestGroupOrSvg();this.__groupStack.push(e),e.appendChild(t),this.__currentElement=t,this.__stack.push(this.__getStyleState())};Je.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var t=this.__stack.pop();this.__applyStyleState(t)};Je.prototype.__addTransform=function(t){var e=this.__closestGroupOrSvg();if(e.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:e,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var i=this.__createElement("g");e.appendChild(i),this.__currentElement=i}var r=this.__currentElement.getAttribute("transform");r?r+=" ":r="",r+=t,this.__currentElement.setAttribute("transform",r)};Je.prototype.scale=function(t,e){e===void 0&&(e=t),this.__addTransform(kn("scale({x},{y})",{x:t,y:e}))};Je.prototype.rotate=function(t){var e=t*180/Math.PI;this.__addTransform(kn("rotate({angle},{cx},{cy})",{angle:e,cx:0,cy:0}))};Je.prototype.translate=function(t,e){this.__addTransform(kn("translate({x},{y})",{x:t,y:e}))};Je.prototype.transform=function(t,e,i,r,o,n){this.__addTransform(kn("matrix({a},{b},{c},{d},{e},{f})",{a:t,b:e,c:i,d:r,e:o,f:n}))};Je.prototype.beginPath=function(){var t,e;this.__currentDefaultPath="",this.__currentPosition={},t=this.__createElement("path",{},!0),e=this.__closestGroupOrSvg(),e.appendChild(t),this.__currentElement=t};Je.prototype.__applyCurrentDefaultPath=function(){var t=this.__currentElement;t.nodeName==="path"?t.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",t.nodeName)};Je.prototype.__addPathCommand=function(t){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=t};Je.prototype.moveTo=function(t,e){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:t,y:e},this.__addPathCommand(kn("M {x} {y}",{x:t,y:e}))};Je.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")};Je.prototype.lineTo=function(t,e){this.__currentPosition={x:t,y:e},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(kn("L {x} {y}",{x:t,y:e})):this.__addPathCommand(kn("M {x} {y}",{x:t,y:e}))};Je.prototype.bezierCurveTo=function(t,e,i,r,o,n){this.__currentPosition={x:o,y:n},this.__addPathCommand(kn("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:t,cp1y:e,cp2x:i,cp2y:r,x:o,y:n}))};Je.prototype.quadraticCurveTo=function(t,e,i,r){this.__currentPosition={x:i,y:r},this.__addPathCommand(kn("Q {cpx} {cpy} {x} {y}",{cpx:t,cpy:e,x:i,y:r}))};var tI=function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]};Je.prototype.arcTo=function(t,e,i,r,o){var n=this.__currentPosition&&this.__currentPosition.x,a=this.__currentPosition&&this.__currentPosition.y;if(!(typeof n=="undefined"||typeof a=="undefined")){if(o<0)throw new Error("IndexSizeError: The radius provided ("+o+") is negative.");if(n===t&&a===e||t===i&&e===r||o===0){this.lineTo(t,e);return}var s=tI([n-t,a-e]),l=tI([i-t,r-e]);if(s[0]*l[1]===s[1]*l[0]){this.lineTo(t,e);return}var c=s[0]*l[0]+s[1]*l[1],p=Math.acos(Math.abs(c)),u=tI([s[0]+l[0],s[1]+l[1]]),g=o/Math.sin(p/2),m=t+g*u[0],w=e+g*u[1],C=[-s[1],s[0]],S=[l[1],-l[0]],k=function(E){var T=E[0],A=E[1];return A>=0?Math.acos(T):-Math.acos(T)},M=k(C),I=k(S);this.lineTo(m+C[0]*o,w+C[1]*o),this.arc(m,w,o,M,I)}};Je.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")};Je.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")};Je.prototype.rect=function(t,e,i,r){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+r),this.lineTo(t,e+r),this.lineTo(t,e),this.closePath()};Je.prototype.fillRect=function(t,e,i,r){var o,n;o=this.__createElement("rect",{x:t,y:e,width:i,height:r},!0),n=this.__closestGroupOrSvg(),n.appendChild(o),this.__currentElement=o,this.__applyStyleToCurrentElement("fill")};Je.prototype.strokeRect=function(t,e,i,r){var o,n;o=this.__createElement("rect",{x:t,y:e,width:i,height:r},!0),n=this.__closestGroupOrSvg(),n.appendChild(o),this.__currentElement=o,this.__applyStyleToCurrentElement("stroke")};Je.prototype.__clearCanvas=function(){for(var t=this.__closestGroupOrSvg(),e=t.getAttribute("transform"),i=this.__root.childNodes[1],r=i.childNodes,o=r.length-1;o>=0;o--)r[o]&&i.removeChild(r[o]);this.__currentElement=i,this.__groupStack=[],e&&this.__addTransform(e)};Je.prototype.clearRect=function(t,e,i,r){if(t===0&&e===0&&i===this.width&&r===this.height){this.__clearCanvas();return}var o,n=this.__closestGroupOrSvg();o=this.__createElement("rect",{x:t,y:e,width:i,height:r,fill:"#FFFFFF"},!0),n.appendChild(o)};Je.prototype.createLinearGradient=function(t,e,i,r){var o=this.__createElement("linearGradient",{id:dC(this.__ids),x1:t+"px",x2:i+"px",y1:e+"px",y2:r+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(o),new Uf(o,this)};Je.prototype.createRadialGradient=function(t,e,i,r,o,n){var a=this.__createElement("radialGradient",{id:dC(this.__ids),cx:r+"px",cy:o+"px",r:n+"px",fx:t+"px",fy:e+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(a),new Uf(a,this)};Je.prototype.__parseFont=function(){var t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i,e=t.exec(this.font),i={style:e[1]||"normal",size:e[4]||"10px",family:e[6]||"sans-serif",weight:e[3]||"normal",decoration:e[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(i.decoration="underline"),this.__fontHref&&(i.href=this.__fontHref),i};Je.prototype.__wrapTextLink=function(t,e){if(t.href){var i=this.__createElement("a");return i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.href),i.appendChild(e),i}return e};Je.prototype.__applyText=function(t,e,i,r){var o=this.__parseFont(),n=this.__closestGroupOrSvg(),a=this.__createElement("text",{"font-family":o.family,"font-size":o.size,"font-style":o.style,"font-weight":o.weight,"text-decoration":o.decoration,x:e,y:i,"text-anchor":A4(this.textAlign)},!0);a.appendChild(this.__document.createTextNode(t)),this.__currentElement=a,this.__applyStyleToCurrentElement(r),n.appendChild(this.__wrapTextLink(o,a))};Je.prototype.fillText=function(t,e,i){this.__applyText(t,e,i,"fill")};Je.prototype.strokeText=function(t,e,i){this.__applyText(t,e,i,"stroke")};Je.prototype.measureText=function(t){return this.__ctx.font=this.font,this.__ctx.measureText(t)};Je.prototype.arc=function(t,e,i,r,o,n){if(r!==o){r=r%(2*Math.PI),o=o%(2*Math.PI),r===o&&(o=(o+2*Math.PI-.001*(n?-1:1))%(2*Math.PI));var a=t+i*Math.cos(o),s=e+i*Math.sin(o),l=t+i*Math.cos(r),c=e+i*Math.sin(r),p=n?0:1,u=0,g=o-r;g<0&&(g+=2*Math.PI),n?u=g>Math.PI?0:1:u=g>Math.PI?1:0,this.lineTo(l,c),this.__addPathCommand(kn("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:i,ry:i,xAxisRotation:0,largeArcFlag:u,sweepFlag:p,endX:a,endY:s})),this.__currentPosition={x:a,y:s}}};Je.prototype.clip=function(){var t=this.__closestGroupOrSvg(),e=this.__createElement("clipPath"),i=dC(this.__ids),r=this.__createElement("g");this.__applyCurrentDefaultPath(),t.removeChild(this.__currentElement),e.setAttribute("id",i),e.appendChild(this.__currentElement),this.__defs.appendChild(e),t.setAttribute("clip-path",kn("url(#{id})",{id:i})),t.appendChild(r),this.__currentElement=r};Je.prototype.drawImage=function(){var t=Array.prototype.slice.call(arguments),e=t[0],i,r,o,n,a=0,s=0,l,c,p,u,g,m,w,C,S,k,M;if(t.length===3)i=t[1],r=t[2],l=e.width,c=e.height,o=l,n=c;else if(t.length===5)i=t[1],r=t[2],o=t[3],n=t[4],l=e.width,c=e.height;else if(t.length===9)a=t[1],s=t[2],l=t[3],c=t[4],i=t[5],r=t[6],o=t[7],n=t[8];else throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);p=this.__closestGroupOrSvg(),w=this.__currentElement;var I="translate("+i+", "+r+")";if(e instanceof Je){if(u=e.getSvg().cloneNode(!0),u.childNodes&&u.childNodes.length>1){for(g=u.childNodes[0];g.childNodes.length;)M=g.childNodes[0].getAttribute("id"),this.__ids[M]=M,this.__defs.appendChild(g.childNodes[0]);if(m=u.childNodes[1],m){var E=m.getAttribute("transform"),T;E?T=E+" "+I:T=I,m.setAttribute("transform",T),p.appendChild(m)}}}else(e.nodeName==="CANVAS"||e.nodeName==="IMG")&&(C=this.__createElement("image"),C.setAttribute("width",o),C.setAttribute("height",n),C.setAttribute("opacity",this.globalAlpha),C.setAttribute("preserveAspectRatio","none"),(a||s||l!==e.width||c!==e.height)&&(S=this.__document.createElement("canvas"),S.width=o,S.height=n,k=S.getContext("2d"),k.drawImage(e,a,s,l,c,0,0,o,n),e=S),C.setAttribute("transform",I),C.setAttribute("xlink:href",e.nodeName==="CANVAS"?e.toDataURL():e.getAttribute("src")),p.appendChild(C))};Je.prototype.createPattern=function(t,e){var i=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),r=dC(this.__ids),o;return i.setAttribute("id",r),i.setAttribute("width",t.width),i.setAttribute("height",t.height),t.nodeName==="CANVAS"||t.nodeName==="IMG"?(o=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),o.setAttribute("width",t.width),o.setAttribute("height",t.height),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.nodeName==="CANVAS"?t.toDataURL():t.getAttribute("src")),i.appendChild(o),this.__defs.appendChild(i)):t instanceof Je&&(i.appendChild(t.__root.childNodes[1]),this.__defs.appendChild(i)),new rI(i,this)};Je.prototype.setLineDash=function(t){t&&t.length>0?this.lineDash=t.join(","):this.lineDash=null};Je.prototype.ellipse=function(t,e,i,r,o,n,a,s){if(n!==a){n=n%(2*Math.PI),a=a%(2*Math.PI),n===a&&(a=(a+2*Math.PI-.001*(s?-1:1))%(2*Math.PI));var l=t+Math.cos(-o)*i*Math.cos(a)+Math.sin(-o)*r*Math.sin(a),c=e-Math.sin(-o)*i*Math.cos(a)+Math.cos(-o)*r*Math.sin(a),p=t+Math.cos(-o)*i*Math.cos(n)+Math.sin(-o)*r*Math.sin(n),u=e-Math.sin(-o)*i*Math.cos(n)+Math.cos(-o)*r*Math.sin(n),g=s?0:1,m=0,w=a-n;w<0&&(w+=2*Math.PI),s?m=w>Math.PI?0:1:m=w>Math.PI?1:0,this.lineTo(p,u),this.__addPathCommand(kn("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:i,ry:r,xAxisRotation:o*(180/Math.PI),largeArcFlag:m,sweepFlag:g,endX:l,endY:c})),this.__currentPosition={x:l,y:c}}};Je.prototype._dcgSetTitle=function(t){var e=this.__currentElement,i=!1,r,o=e.getElementsByTagName("title");o.length>0?r=o[0]:(r=this.__document.createElementNS("http://www.w3.org/2000/svg","title"),i=!0),r.textContent=t,i&&e.appendChild(r)};Je.prototype.drawFocusRing=function(){};Je.prototype.createImageData=function(){};Je.prototype.getImageData=function(){};Je.prototype.putImageData=function(){};Je.prototype.globalCompositeOperation=function(){};Je.prototype.setTransform=function(){};var t_=Je;Tt();var Tc=document.createElement("canvas").getContext("2d"),ha=class t{constructor(e,i){this._label=e,this._fontSize=i,this._layout=V4(e,i)}getRect(){return this.getRectWhenCenteredAt({x:0,y:0})}getRectWhenCenteredAt(e){return{left:this._layout.left+e.x,right:this._layout.right+e.x,top:this._layout.top+e.y,bottom:this._layout.bottom+e.y}}getBoundsWhenCenteredAt(e,i){switch(i){case"x":return{lower:this._layout.left+e,upper:this._layout.right+e};case"y":return{lower:this._layout.top+e,upper:this._layout.bottom+e};default:let r=i;throw new Error(`Unknown axis: ${r}`)}}getWidth(){return this._layout.right-this._layout.left}getHeight(){return this._layout.bottom-this._layout.top}getDimensionAlongAxis(e){switch(e){case"x":return this.getWidth();case"y":return this.getHeight();default:let i=e;throw new Error(`Unknown axis: ${i}`)}}clampBoundsWithinRect(e,i){let r,o;return e.x+this._layout.left<i.left?r=i.left-this._layout.left:e.x+this._layout.right>i.right?r=i.right-this._layout.right:r=e.x,e.y+this._layout.top<i.top?o=i.top-this._layout.top:e.y+this._layout.bottom>i.bottom?o=i.bottom-this._layout.bottom:o=e.y,{x:r,y:o}}getValue(){return this._label.value}getMinusWidth(){return this.getValue()<0?(t.setCtxFontSize(Tc,this._fontSize),Tc.measureText("-1").width-Tc.measureText("1").width):0}getString(){return this._label.superscript?this._label.mantissa+"^"+this._label.superscript:this._label.string}drawCenteredAt(e,i,r){let o=i.x,n=t.computeBaselineFromCenter(i.y,this._fontSize);r&&ji(e,r),e.save(),r&&_i(e),t.setCtxFontSize(e,this._fontSize),this._label.superscript?(e.strokeText(this._label.mantissa,this._layout.mantissa_x+o,this._layout.mantissa_y+n),e.strokeText(this._label.superscript,this._layout.superscript_x+o,this._layout.superscript_y+n),e.fillText(this._label.mantissa,this._layout.mantissa_x+o,this._layout.mantissa_y+n),e.fillText(this._label.superscript,this._layout.superscript_x+o,this._layout.superscript_y+n)):(e.strokeText(this._label.string,this._layout.mantissa_x+o,this._layout.mantissa_y+n),e.fillText(this._label.string,this._layout.mantissa_x+o,this._layout.mantissa_y+n)),e.restore()}static computeBaselineFromCenter(e,i){return e+.272*i}static setCtxFontSize(e,i){e.font=i+"px Arial",e.textAlign="center"}};function V4(t,e){if(t.superscript){let i=e;ha.setCtxFontSize(Tc,i);let r=Tc.measureText(t.mantissa).width,o=Math.round(.8*e);ha.setCtxFontSize(Tc,o);let n=Tc.measureText(t.superscript).width,a=0,s=e/5,l=r/2+n/2,c=-e/4,p=c-o/2,u=s+i/2,g=a-r/2,m=l+n/2;return{top:p,bottom:u,left:g,right:m,mantissa_height:i,mantissa_width:r,mantissa_x:a,mantissa_y:s,superscript_height:o,superscript_width:n,superscript_x:l,superscript_y:c}}else{let i=e;ha.setCtxFontSize(Tc,e);let r=Tc.measureText(t.string).width,o=0,n=0,a=n-i/2,s=n+i/2,l=o-r/2,c=o+r/2;return{top:a,bottom:s,left:l,right:c,mantissa_height:i,mantissa_width:r,mantissa_x:o,mantissa_y:n}}}function L4(t,e,i,r){let o=Math.ceil(t/i),n=Math.floor(e/i),a=1/i;if(!(o>n)&&!(n-o>1e4))for(let s=o;s<=n;s++)r(s/a)}var oI={base:10,major:[1,2,5],minor:[5,4,5]},P4={base:10,major:[Math.PI,2*Math.PI,5*Math.PI],minor:[4,4,5]},O4={base:2,major:[Math.PI/3],minor:[3]};function _4(t){return t?{base:10,major:[t,2*t,5*t],minor:[4,4,5]}:oI}function nI(t,e){let{major:i,minor:r,base:o}=e,n=1/0,a=1/0;for(let s=0;s<i.length;s++){let l=i[s],c=Math.ceil(Math.log(t/l)/Math.log(o)),p=l*Math.pow(o,c);if(p<n){n=p;let u=r[s];a=n/u}}return{major:n,minor:a}}function F4(t,e,i){return 1+(e-t)/i}function i_(t){let e=t.screen.width,i=t.screen.height,r=t.viewport.xmax-t.viewport.xmin,o=t.viewport.ymax-t.viewport.ymin,n=t.settings.pixelsPerLabel;return{majorStepX:n/e*r,majorStepY:n/i*o}}function kd(t){let e=l=>{let[c,p,u,g,m]=l==="x"?[t.viewport.xmin,t.viewport.xmax,t.settings.xAxisStep,t.settings.xAxisNumbers,t.settings.xAxisMinorSubdivisions]:[t.viewport.ymin,t.viewport.ymax,t.settings.yAxisStep,t.settings.yAxisNumbers,t.settings.yAxisMinorSubdivisions],w=p-c,C=Math.abs(u!=null?u:NaN),S=0,k=0;if(C&&C!==Math.PI){let M=F4(c,p,C);if(M>=3&&M<100){let I=0;if(g){let T=0;L4(c,p,C,function(A){let G=new ha(__dcg_shared_module_exports__['Ya'](A,w),t.settings.labelSize);T=Math.max(G.getDimensionAlongAxis(l),T)}),I=T+10}else I=m===1?8:20;let E=l==="x"?"width":"height";M*I<=t.screen[E]&&(S=C,C===3||C===5?k=1:k=C/4)}}if(!S){let M=i_(t)[l==="x"?"majorStepX":"majorStepY"],I=nI(M,__dcg_shared_module_exports__['Ya'](C,w).string.indexOf("\u03C0")>=0?M>=1?P4:O4:_4(C));S=I.major,k=I.minor}return{majorStep:S,minorStep:k}},i=()=>{var l,c;if(Math.abs((l=t.settings.xAxisStep)!=null?l:NaN)===Math.abs((c=t.settings.yAxisStep)!=null?c:NaN)){let{xmin:g,xmax:m,ymin:w,ymax:C}=t.viewport,S=t.screen.width/(m-g),k=t.screen.height/(C-w),M=S/k,I=.01;if(M>=1-I&&M<=2){let{majorStep:E,minorStep:T}=e("y");return{x:{majorStep:E,minorStep:T},y:{majorStep:E,minorStep:T}}}if(M<=1-I&&M>=.5){let{majorStep:E,minorStep:T}=e("x");return{x:{majorStep:E,minorStep:T},y:{majorStep:E,minorStep:T}}}}return{x:e("x"),y:e("y")}},r=()=>{let{xAxisScale:l,yAxisScale:c}=t.settings,p=l==="logarithmic",u=c==="logarithmic";return!p&&!u?i():{x:p?{majorStep:NaN,minorStep:NaN}:e("x"),y:u?{majorStep:NaN,minorStep:NaN}:e("y")}},{x:o,y:n}=r(),{xAxisMinorSubdivisions:a=0,yAxisMinorSubdivisions:s=0}=t.settings;return{majorStepX:o.majorStep,minorStepX:a>0?o.majorStep/a:o.minorStep,majorStepY:n.majorStep,minorStepY:s>0?n.majorStep/s:n.minorStep}}function r_(t){let e=i_(t),i=nI(e.majorStepX,oI),r=nI(e.majorStepY,oI),o=i.major>r.major?i:r;return{majorStepR:o.major,minorStepR:o.minor}}Tt();var oi={};__dcg_shared_module_exports__['g'](oi,{ALT:()=>z4,BACKSPACE:()=>es,CAPSLOCK:()=>U4,CONTROL:()=>q4,DELETE:()=>og,DOWN:()=>un,END:()=>ig,ENTER:()=>Fa,ESCAPE:()=>Yo,HOME:()=>rg,LEFT:()=>Gl,PAGEDOWN:()=>tg,PAGEUP:()=>eg,RIGHT:()=>Al,SHIFT:()=>$f,SPACEBAR:()=>Id,TAB:()=>Ps,UP:()=>Jo,default:()=>R4,isBacktick:()=>B4,isHelp:()=>K4,isRedo:()=>Wf,isSelectAll:()=>N4,isSwitchPanes:()=>sI,isUndo:()=>Hf,lookup:()=>be,lookupChar:()=>Dr});var o_=function(){{var t=function(){for(var e={8:this.BACKSPACE="Backspace",9:this.TAB="Tab",13:this.ENTER="Enter",16:this.SHIFT="Shift",17:this.CONTROL="Control",18:this.ALT="Alt",20:this.CAPSLOCK="CapsLock",27:this.ESCAPE="Esc",32:this.SPACEBAR="Space",33:this.PAGEUP="PageUp",34:this.PAGEDOWN="PageDown",35:this.END="End",36:this.HOME="Home",37:this.LEFT="Left",38:this.UP="Up",39:this.RIGHT="Right",40:this.DOWN="Down",46:this.DELETE="Del"},i={Backspace:this.BACKSPACE,Tab:this.TAB,Enter:this.ENTER,Shift:this.SHIFT,Control:this.CONTROL,Alt:this.ALT,CapsLock:this.CAPSLOCK,Escape:this.ESCAPE," ":this.SPACEBAR,PageUp:this.PAGEUP,PageDown:this.PAGEDOWN,End:this.END,Home:this.HOME,ArrowLeft:this.LEFT,ArrowUp:this.UP,ArrowRight:this.RIGHT,ArrowDown:this.DOWN,Delete:this.DELETE},r={UIKeyInputUpArrow:this.UP,UIKeyInputDownArrow:this.DOWN,UIKeyInputLeftArrow:this.LEFT,UIKeyInputRightArrow:this.RIGHT,UIKeyInputEscape:this.ESCAPE,UIKeyInputPageUp:this.PAGEUP,UIKeyInputPageDown:this.PAGEDOWN},o=["0123456789abcdefghijklmnopqrstuvwxyz","\xBA\xA1\u2122\xA3\xA2\u221E\xA7\xB6\u2022\xAA\xE5\u222B\xE7\u2202 \u0192\xA9\u02D9 \u2206\u02DA\xAC\xB5 \xF8\u03C0\u0153\xAE\xDF\u2020 \u221A\u2211\u2248\xA5\u03A9","\u201A\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB0\xB7\xC5\u0131\xC7\xCE\xB4\xCF\u02DD\xD3\u02C6\xD4\uF8FF\xD2\xC2\u02DC\xD8\u220F\u0152\u2030\xCD\u02C7\xA8\u25CA\u201E\u02DB\xC1\xB8"].map(function(g){return g.split("")}),n=o[0],a=o[1],s=o[2],l={},c={},p=0;p<n.length;p++){var u=n[p];a[p]!==" "&&(l[a[p]]=u.toUpperCase()),s[p]!==" "&&(c[s[p]]=u.toUpperCase())}this.isUndo=function(g){return!g.altKey&&!g.shiftKey&&(g.ctrlKey||g.metaKey)&&(g.key=="z"||g.which==90)},this.isRedo=function(g){return!g.altKey&&(g.ctrlKey||g.metaKey)&&(g.key==="y"||g.which==89||g.shiftKey&&(g.key==="Z"||g.key==="z"||g.which===90))},this.isSelectAll=function(g){return!g.altKey&&(g.ctrlKey||g.metaKey)&&(g.key==="a"||g.key==="A"||g.which==65)},this.isBacktick=function(g){return!g.altKey&&!g.ctrlKey&&!g.metaKey&&!g.shiftKey&&(g.key==="`"||g.which==192)},this.isHelp=function(g){return!g.altKey&&(g.ctrlKey||g.metaKey)&&(g.key==="/"||g.which==191)},this.isSwitchPanes=function(g){return g.key==="F6"||g.key==="f6"||g.which===117||g.keyCode===117},this.lookup=function(g){return i[g.key]||e[g.which]||r[g.key]},this.lookupChar=function(g){if(!g.key)return String.fromCharCode(g.which);if(WG.IS_APPLE&&g.altKey){var m=g.shiftKey?c:l;if(m[g.key])return m[g.key]}if(g.key.length===1)return g.key.toUpperCase();if(g.key==="Enter")return String.fromCharCode(13);if(g.key==="Tab")return String.fromCharCode(9)}};return new t}}(),R4=o_,{isUndo:Hf,isRedo:Wf,isSelectAll:N4,isBacktick:B4,isHelp:K4,isSwitchPanes:sI,BACKSPACE:es,TAB:Ps,ENTER:Fa,SHIFT:$f,CONTROL:q4,ALT:z4,CAPSLOCK:U4,ESCAPE:Yo,SPACEBAR:Id,PAGEUP:eg,PAGEDOWN:tg,END:ig,HOME:rg,LEFT:Gl,UP:Jo,RIGHT:Al,DOWN:un,DELETE:og,lookup:be,lookupChar:Dr}=o_;var H4=document.location.href.indexOf("dcgDebugTouchTracking=dcgYES")!==-1,Td,ng;window._touchtracking_id_counter==null&&(window._touchtracking_id_counter=0);window._touchtracking_id_counter+=1;var Yf="touchtracking_id_"+window._touchtracking_id_counter,kr=function(t){ng&&(ng.value="("+Date.now()+") "+t+`
`+ng.value)};function lg(t){if(t.classList.add("dcg-tap-container",Yf),H4){Td&&Td.remove(),Td=document.createElement("div"),Rn(Td,{position:"absolute",bottom:"10px",right:"10px"});let e=document.createElement("textarea");e.setAttribute("rows","30"),e.setAttribute("cols","40"),Td.append(e);let i=document.createElement("div");i.id="dcg-touchtracking-debug-copy",i.classList.add("dcg-btn-blue"),i.innerText="COPY LOGS",Td.append(i),ng=Td.querySelector("textarea"),t.append(Td),i.addEventListener("mousedown",function(){ng&&(ng.select(),document.execCommand("copy"))},!0),kr("monitor touches")}}var cg=0,ts=1,Jf=2,ag=3,Gc=4,Ut=cg,lI={},Os={},Mc=[],cI=0,jf=null,uC=null,Kp=!1,pC=null,n_=Kp,Md=function(t){t.type.startsWith("key")?Kp=!0:t.type.startsWith("pointer")&&(Kp=!1);let e=document.activeElement;e&&!e.closest(".dcg-tap-container."+Yf)&&(e=null),e!==pC?(pC&&pC.classList.remove("dcg-focus-visible"),e&&Kp&&e.classList.add("dcg-focus-visible")):n_!==Kp&&e&&(Kp?e.classList.add("dcg-focus-visible"):e.classList.remove("dcg-focus-visible")),n_=Kp,pC=e};document.addEventListener("keydown",Md,{capture:!0});document.addEventListener("keydown",Md);document.addEventListener("pointerdown",Md);document.addEventListener("pointerdown",Md,{capture:!0});document.addEventListener("focusin",Md,{capture:!0});document.addEventListener("focusin",Md);document.addEventListener("focusout",Md,{capture:!0});document.addEventListener("focusout",Md);var a_,ga=[],dI=function(t){if(!(t instanceof Element))return[];let e=t.closest(".dcg-tap-container."+Yf);if(!e)return[];let i=t,r=[];for(;i;){if(r.push(i),i===e)return r;i=i.parentNode}return[]},hC=function(t,e){uC=null,Ut=t,kr("beginMode:"+Ut),Ut===ts?Mc=dI(e.originalEvent.touches[0].target):Mc=dI(e.target),Mc.forEach(i=>{i.classList.add("dcg-depressed"),d_(i)&&i.classList.add("dcg-focus-by-tap")}),Mc.forEach(function(i){let r=H(i);r.data({originalScrollTop:r.scrollTop(),originalScrollLeft:r.scrollLeft()})}),Os={}};function qp(t){return t.matches('input, textarea, select, [role="textbox"]')||t.classList.contains("dcg-mathquill-input-span")||t.matches("[contenteditable=true]")}var dg=function(t){if(!(t instanceof Element))return!1;let e=t.closest(".dcg-tap-container");return e?e.matches(".dcg-tap-container."+Yf):!1},d_=function(t){return Ut!==ag&&!qp(t)&&dg(t)},pg=function(t,e){uC=null;let i=!1;kr("endMode:"+Ut),document.querySelectorAll(".dcg-depressed").forEach(o=>{o.classList.remove("dcg-depressed")});let r=document.activeElement;if(!h_(t.target)&&r&&d_(r))try{r.blur()}catch(o){}if(document.querySelectorAll(".dcg-focus-by-tap").forEach(o=>o.classList.remove("dcg-focus-by-tap")),Mc.forEach(function(o){let n=H(o),a=n.data("originalScrollTop")-n.scrollTop(),s=n.data("originalScrollLeft")-n.scrollLeft();(a||s)&&(Os.scroll=!0)}),Os["dcg-tapstart"]===1&&Os["dcg-tapend"]===1&&!Os["dcg-tapcancel"]&&!Os.scroll){kr("potential dcg-tap");let o=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;if(t&&!t.device&&o===0&&n===0){kr("event appears to be simulated"),i=!0,Ut=ag;let l=t.target.getBoundingClientRect();o=(l.left+l.right)/2,n=(l.top+l.bottom)/2}kr("potential dcg-tap coords:"+o+":"+n);let a=!1,s=!1;for(let l of Mc){if(a)break;let c;if(typeof l.getBoundingClientRect=="function"&&(c=l.getBoundingClientRect()),typeof l.getAttribute=="function"&&l.getAttribute("tapboundary")==="true"&&(a=!0),!(c&&(o<c.left||n<c.top||o>c.right||n>c.bottom))){uC=l,s=!0,Jn("dcg-tap",t,{target:uC,touches:e.touches,changedTouches:e.changedTouches});break}}kr("result of dcg-tap:  did_dispatch="+s+"  did_escape="+a)}Ut===ts||Ut===Gc?jf=setTimeout(function(){jf=null,cI=new Date().getTime()},1e3):i&&(jf=setTimeout(function(){jf=null,cI=new Date().getTime()},100)),Mc=[],Ut=cg},sg=function(){return jf||new Date().getTime()-cI<500},p_=function(t){return t.identifier!==void 0?t.identifier:t.pointerId},s_=function(t){let e=[];for(let i of t)e.push({identifier:p_(i),x:i.pageX,y:i.pageY,screenX:i.screenX,screenY:i.screenY,pageX:i.pageX,pageY:i.pageY,clientX:i.clientX,clientY:i.clientY});return e},Jn=function(t,e,i){let r=p_(e),o=s_(i.touches),n=s_(i.changedTouches);if(kr("dispatchEvent:"+t),t==="dcg-tapstart")lI[r]={type:t,pageX:n[0].pageX,pageY:n[0].pageY};else if(t==="dcg-tapmove"){let c=n[0],p=lI[r];if(p&&c.pageX===p.pageX&&c.pageY===p.pageY||(Ut===ts||Ut===Gc)&&p&&p.type==="dcg-tapstart"&&Math.abs(p.pageX-c.pageX)+Math.abs(p.pageY-c.pageY)<2)return;lI[r]={type:t,pageX:n[0].pageX,pageY:n[0].pageY}}let a=t.toLowerCase();Os[a]===void 0?Os[a]=1:Os[a]++;let s=H.event.fix(e.originalEvent);s.type=t,s.device=Ut===ts||Ut===Gc?"touch":Ut===ag?"keyboard":"mouse",s.touches=o,s.changedTouches=n,s.target=i.target?i.target:e.target;let l=s.device!=="keyboard"&&Os["dcg-longhold"]>0;s.wasLongheld=function(){return l},s.preventTap=function(){Os["dcg-tapcancel"]=1},clearTimeout(a_),s.type==="dcg-tapstart"&&s.device!=="keyboard"&&s.touches.length===1&&(a_=setTimeout(function(){Jn("dcg-longhold",e,i)},500)),s.target&&s.target.nodeName&&s.target.nodeName.toLowerCase()==="a"&&s.type==="dcg-tap"&&s.device==="keyboard"&&s.target.click&&s.target.click(),kr("trigger event:"+s.type),H(s.target).trigger(s)},gC=function(t){let e=Mc,i=!!Mc.length,r=document.querySelectorAll(".dcg-tap-container."+Yf+" .dcg-hovered"),o=Array.from(r).filter(dg),n=[],a=[],s=[];t&&dI(t).forEach(function(l){(!i||e.indexOf(l)!==-1)&&(o.indexOf(l)===-1&&s.push(l),n.push(l))});for(let l of o)n.indexOf(l)===-1&&a.push(l);a.forEach(l=>{l&&l.classList.remove("dcg-hovered"),H(l).trigger("tipsyhide")}),s.forEach(l=>{l&&l.classList.add("dcg-hovered"),H(l).trigger("tipsyshow")})},mC=function(t){for(let e of ga)if(e.pointerId===t)return!0;return!1},pI=function(t){for(let e=0;e<ga.length;e++)if(ga[e].pointerId===t){ga.splice(e,1)[0];return}},u_=function(t){Ut===cg&&hC(Gc,t),gC(null),ga.push(t.originalEvent),Jn("dcg-tapstart",t,{touches:ga,changedTouches:[t.originalEvent]})},l_=function(t){pI(t.originalEvent.pointerId);let e={touches:ga,changedTouches:[t.originalEvent]};Jn("dcg-tapcancel",t,e),ga.length===0&&pg(t,e)},c_=function(t){pI(t.originalEvent.pointerId);let e={touches:ga,changedTouches:[t.originalEvent]};Jn("dcg-tapend",t,e),ga.length===0&&pg(t,e)},fC=function(t){return t.originalEvent.pointerType==="touch"},ug=function(t,e){t.trim().split(/\s+/).forEach(function(i){let r=W4?{passive:!1}:void 0;document.addEventListener(i,function(o){kr("document.on:"+o.type),e(H.event.fix(o))},r)})};ug("pointerdown MSPointerDown",function(t){if(!(Ut===Jf||Ut===ts||!fC(t))){if(mC(t.originalEvent.pointerId)){kr("exit. pointer id already exists: "+t.originalEvent.pointerId);return}u_(t)}});ug("pointermove MSPointerMove",function(t){Ut===Jf||Ut===ts||!fC(t)||(mC(t.originalEvent.pointerId)||(kr("pointer id already exists: "+t.originalEvent.pointerId),u_(t)),pI(t.originalEvent.pointerId),ga.push(t.originalEvent),Jn("dcg-tapmove",t,{touches:ga,changedTouches:[t.originalEvent]}))});H(document).on("pointercancel MSPointerCancel",function(t){if(kr("document.on:"+t.type),Ut!==Gc||!fC(t)||!mC(t.originalEvent.pointerId))return;l_(t);let e;for(;e=ga.pop();){let i=H.Event(e,{originalEvent:e});l_(i)}});H(document).on("pointerup MSPointerUp",function(t){if(kr("document.on:"+t.type),Ut!==Gc||!fC(t)||!mC(t.originalEvent.pointerId))return;c_(t);let e;for(;e=ga.pop();){let i=H.Event(e,{originalEvent:e});c_(i)}});var W4=function(){let t=!1;try{let e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",function(){},e),window.removeEventListener("test",function(){},e)}catch(e){}return t}();ug("touchstart",function(t){Ut===Jf||Ut===Gc||(Ut===cg&&hC(ts,t),gC(null),Jn("dcg-tapstart",t,{touches:t.originalEvent.touches,changedTouches:t.originalEvent.changedTouches}))});ug("touchmove",function(t){Ut===ts&&Jn("dcg-tapmove",t,{touches:t.originalEvent.touches,changedTouches:t.originalEvent.changedTouches})});ug("touchcancel",function(t){if(Ut!==ts)return;let e={touches:t.originalEvent.touches,changedTouches:t.originalEvent.changedTouches};Jn("dcg-tapcancel",t,e),t.originalEvent.touches.length===0&&pg(t,e)});ug("touchend",function(t){if(Ut!==ts)return;let e={touches:t.originalEvent.touches,changedTouches:t.originalEvent.changedTouches};Jn("dcg-tapend",t,e),t.originalEvent.touches.length===0&&pg(t,e)});H(document).on("mousedown",function(t){if(kr("document.on:"+t.type),!(t.button===1||t.button===2)){if(Ut===ts||Ut===Gc||sg()){!t.target.matches("input, textarea, select")&&dg(t.target)&&t.preventDefault(),kr("abort mousedown: "+Ut+":"+sg());return}hC(Jf,t),Jn("dcg-tapstart",t,{touches:[t],changedTouches:[t]})}});var h_=function(t){if(!(t instanceof Element))return!1;let e=!!t.closest(".dcg-do-not-blur"),i=!!t.closest(".dcg-do-blur");return!!(e&&!i&&dg(t))};H(document).on("mousedown",function(t){if(kr("document.on:"+t.type),!!h_(t.target)){t.preventDefault();try{let e=window.getSelection();if(e.rangeCount===1){let i=e.getRangeAt(0);i.startContainer===i.endContainer&&i.startContainer.closest(".dcg-text-selectable")&&e.removeAllRanges()}}catch(e){}}});H(document).on("mouseleave",function(t){if(kr("document.on:"+t.type),Ut===cg){if(sg()){kr("abort mouseleave: "+Ut+":"+sg());return}gC(null)}});H(document).on("mousemove",function(t){if(kr("document.on:"+t.type),!(t.button===1||t.button===2)&&!(Ut===ts||Ut===Gc)){if(sg()){kr("abort mousemove: "+Ut+":"+sg());return}gC(t.target),Jn("dcg-tapmove",t,{touches:[t],changedTouches:[t]})}});H(document).on("mouseup",function(t){if(kr("document.on:"+t.type),t.button===1||t.button===2||Ut!==Jf)return;let e={touches:[],changedTouches:[t]};Jn("dcg-tapend",t,e),pg(t,e)});H(document).on("keydown",function(t){if(kr("document.on:"+t.type),!(be(t)!==Fa&&be(t)!==Id||!dg(t.target))&&Ut!==ag){if(t.target.matches('a:not([ontap]), button:not([ontap]), input, textarea, select, [role="textbox"], [contenteditable="true"]'))return;t.preventDefault(),hC(ag,t),Jn("dcg-tapstart",t,{touches:[t],changedTouches:[t]})}});H(document).on("keyup",function(t){if(kr("document.on:"+t.type),be(t)!==Fa&&be(t)!==Id||!dg(t.target)||Ut!==ag)return;let e={touches:[],changedTouches:[t]};Jn("dcg-tapend",t,e),pg(t,e)});function g_(){return Ut!==cg}Tt();function Ri(){document.activeElement&&qp(document.activeElement)&&H(document.activeElement).trigger("blur")}var $4=/`[^`]*`/g,j4=/^[\+\-]?[\d]*(\.\d+)?$/,Y4=t=>{if(t!=null){let e=t.match(/`/g);return(e!=null&&e.length||0)%2==0}return!0},J4=t=>{let e=[];if(t==null||t.length==0)return e;let i=0,r;for(;r=$4.exec(t);){let n=t.slice(i,r.index);n.length>0&&e.push({from:i,to:r.index,type:"text",text:n}),i=r.index+r[0].length,e.push({from:r.index,to:i,type:"math",text:r[0].slice(1,-1)})}let o=t.slice(i);return o.length>0&&e.push({from:i,to:t.length,type:"text",text:o}),e},m_=hl.StaticMath(document.createElement("span"));function Xo(t){let e="",i=[];Y4(t)?i=J4(t):i=[{from:0,to:t.length,type:"text",text:t}];for(let r of i)e+=r.type==="text"?r.text:Vo(r.text);return e}function Vo(t){let e="";return j4.test(t)?(/^\+/.test(t)?(e="positive ",t=t.slice(1)):/^\-/.test(t)&&(e="negative ",t=t.slice(1)),e+=t.replace(/(\.)([0-9]+)/g,(i,r,o)=>r+o.split("").join(" ").trim())):(m_.latex(t),e=m_.mathspeak().trim()),e}var ni=class{constructor(e){this.model=e;this.s=e.s}createOutput(){return this.model.createCustomToolOutput(this.getSpec())}clearTentativeOutputs(){let e=this.getSpec();var i={},r=this.model.getNonObjectsState().ui.currentTool.idMap;for(let o in r){let n=r[o];!this.model.isObjectALockedToolInput(n)&&this.model.isObjectUncommitted(n)&&(i[o]=n)}this.model.deleteObjectsAndRememberReusableId(i),this.model.tentativelyMatchToolInput(e,""),this.createOutput()}didLockInput(e){var n;let{currentTool:i}=this.model.getNonObjectsState().ui,r=i.inputIndex,o=e.inputs[r];o&&(n=o.numberInputInfo)!=null&&n.defaultLatex&&!i.idMap[o.id]&&this.onNumberInput(o.numberInputInfo.defaultLatex)}shouldReferenceSpecificItemInList(e,i){return!i}getExpandedReferenceForDef(e,i){return this.shouldReferenceSpecificItemInList(e,i)?e.referenceLatex:e.assignment}getListIndexForHover(e,i){if(this.shouldReferenceSpecificItemInList(e,i))return e.listIndex}_getOrCreatePoint(e,i,r){var c,p;let o=this.model.getOrCreatePointNearMouse(e,r);if(o.type==="def")return{createdNew:!1,def:o.def,reference:this.getExpandedReferenceForDef(o.def,i),previewOnly:!1};let n=this.createPointDefinition(o.spec,i),a=o.spec.type==="point-reference"?o.spec.targetSpec.parentDefs:o.spec.parentDefs,s=0;for(let u=0;u<a.length;u++){let g=a[u];if(g.polygonEdgeInfo){let m=this.model.createToolInputDependency({type:"polygon-segment",parents:[(c=g.polygonEdgeInfo)==null?void 0:c.polygonDef.referenceLatex],edgeNumber:((p=g.polygonEdgeInfo)==null?void 0:p.edgeNumber)||0},this.getSpec(),s);n.parents[u]=m,s+=1,this.model.setObjectHovered({tokenId:m,listIndex:void 0})}else this.model.setObjectHovered({calcId:g.calcId,listIndex:this.getListIndexForHover(g,i)})}return{createdNew:!0,def:void 0,reference:this.model._createInputObject(n),previewOnly:n.type==="point"&&n.previewOnly}}_isReadyToCommit(){return this.model.getNonObjectsState().ui.currentTool.inputIndex>=this.getSpec().inputs.length}_getFirstMissingInput(){let{inputIndex:e}=this.model.getNonObjectsState().ui.currentTool;return this.getSpec().inputs[e]}canNextInputBePoint(){let e=this._getFirstMissingInput();return e&&e.type==="point"?!0:!!(e&&e.type==="union"&&e.valueTypes.indexOf(__dcg_shared_module_exports__['s'])!==-1)}getNonPointInputType(){let e=this._getFirstMissingInput();if(!(!e||e.type==="point"))return e.type==="union"?e:e.type}isValidNextInputType(e){if(this.canNextInputBePoint()&&__dcg_shared_module_exports__['da'](e,__dcg_shared_module_exports__['s']))return!0;let i=this._getFirstMissingInput();if(!i)return!1;let r=[];if(i.type==="union")r=i.valueTypes;else{let o=i.type;switch(o){case"point":r=[__dcg_shared_module_exports__['s']];break;case"straight":r=[...__dcg_shared_module_exports__['ea']];break;case"angle":r=[__dcg_shared_module_exports__['M'],__dcg_shared_module_exports__['O']];break;case"arc":r=[__dcg_shared_module_exports__['G']];break;case"circle":r=[__dcg_shared_module_exports__['E']];break;case"polygon":r=[__dcg_shared_module_exports__['A']];break;case"segment":r=[__dcg_shared_module_exports__['C']];break;case"vector":r=[__dcg_shared_module_exports__['S']];break;default:return o}}return i.numberInputInfo&&r.push(__dcg_shared_module_exports__['r']),r.some(o=>__dcg_shared_module_exports__['da'](e,o))}getAllValidNextInputTypes(){return __dcg_shared_module_exports__['Z'].filter(e=>this.isValidNextInputType(e))}getHint(){let e=this._getFirstMissingInput();return e?e.hint!==void 0?this.s(e.hint):this.s("graphing-calculator-text-geometry-select-hint",{type:e.type}):""}getSpecIdToLockIn(e,i){let r=e.inputs[i];if(r)return r.id}tryCommitResults(){if(this.model.attemptLockToolInputIn(this.getSpec()),this._isReadyToCommit()){let e=this.model.getUncommittedObjects();for(let r in e)e[r].type==="expression-edit-preview-latex"&&delete e[r];let i=__dcg_shared_module_exports__['a']({},this.model.getNonObjectsState().ui.currentTool.idMap);return this.model.commitObjects(),this.model.deselectAllObjects(),this.model.cancelToolplay(),{committed:e,toolIdToLatex:i}}return{committed:void 0}}tentativelyAddInput({target:e,pointInfo:i},r){var n,a;let o;if(e)if(e.polygonEdgeInfo){let s=this.model.createToolInputDependency({type:"polygon-segment",parents:[(n=e.polygonEdgeInfo)==null?void 0:n.polygonDef.referenceLatex],edgeNumber:((a=e.polygonEdgeInfo)==null?void 0:a.edgeNumber)||0},this.getSpec(),0);this.model.setObjectHovered({tokenId:s,listIndex:void 0}),o=s}else o=this.getExpandedReferenceForDef(e,r),this.model.setObjectHovered({calcId:e.calcId,listIndex:this.getListIndexForHover(e,r)});else i&&(o=i.reference,i!=null&&i.def&&!i.createdNew&&!i.previewOnly&&this.model.setObjectHovered({calcId:i.def.calcId,listIndex:this.getListIndexForHover(i.def,r)}));o&&this.model.tentativelyMatchToolInput(this.getSpec(),o)}onFocus(e){this.clearTentativeOutputs(),e&&this.tentativelyAddInput({target:e},!1),this.createOutput()}onMove(e){this.clearTentativeOutputs();let i=this.canNextInputBePoint(),r=this.getNonPointInputType(),o=!1;if(r){let n=this.model.getObjectDefUnderMouse(e.pt,e.tolerance);n&&this.model.objectIsInstanceOf(n,r)&&(this.tentativelyAddInput({target:n},e.shift),o=!0)}if(!o&&i){let n=this._getOrCreatePoint(e.pt,e.shift,e.tolerance);o=!n.previewOnly,this.isDegenerateInput(n.reference)?n.def&&this.model.setObjectHovered({calcId:n.def.calcId,listIndex:this.getListIndexForHover(n.def,e.shift)}):this.tentativelyAddInput({pointInfo:n},e.shift)}return this.createOutput(),o}isDegenerateInput(e){return!!this.model.getNonObjectsState().ui.currentTool.lockedIds[e]}getNumberInputLatex(){let e=this.getSpec(),{inputIndex:i,idMap:r}=this.model.getNonObjectsState().ui.currentTool,o=e.inputs[i];return o!=null&&o.numberInputInfo&&r[`${o.id}-number`]||""}onNumberInput(e){this.clearTentativeOutputs();let i=this.getSpec();this.model.storeNumberInputLatex(i,e),this.createOutput()}createPointDefinition(e,i){let r=e.parentDefs,o;switch(e.type){case"point-reference":{o={type:"point-reference",parents:[this.getExpandedReferenceForDef(r[0],i)]};break}default:{let n=r.map(a=>this.getExpandedReferenceForDef(a,i));o=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},e),{parents:n})}}return o}shouldUseJitEdges(){return!0}shouldHighlightRelevantObjects(){return!0}};function bC(t,e){if(typeof e=="object")return e.valueTypes.some(i=>__dcg_shared_module_exports__['da'](t,i));switch(e){case"point":return t===__dcg_shared_module_exports__['s'];case"straight":return t===__dcg_shared_module_exports__['I']||t===__dcg_shared_module_exports__['K']||t===__dcg_shared_module_exports__['C']||t===__dcg_shared_module_exports__['S'];case"angle":return t===__dcg_shared_module_exports__['M']||t===__dcg_shared_module_exports__['O'];case"arc":return t===__dcg_shared_module_exports__['G'];case"circle":return t===__dcg_shared_module_exports__['E'];case"polygon":return t===__dcg_shared_module_exports__['A'];case"segment":return t===__dcg_shared_module_exports__['C'];case"vector":return t===__dcg_shared_module_exports__['S'];default:return e}}var uI="graphing-calculator-text-geometry-tool-vector-hint-start",f_="graphing-calculator-text-geometry-tool-vector-hint-end",b_="graphing-calculator-text-geometry-tool-vector-copy-hint-end",Qf=class extends ni{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-vector-display-name",this.toolName="vector",this.toolType="simple",this.icon=[{type:"stroked-path",path:[32,68,65,35],lineWidth:"large",arrow:!0},{type:"point",x:32,y:68},{type:"point",x:68,y:32}]}getExpressionEditHint(i){return i===0?this.s(uI):this.firstInputIsVector()?this.s(b_):this.s(f_)}firstInputIsVector(){let{idMap:i}=this.model.getNonObjectsState().ui.currentTool,r=i[1],o=r&&this.model.findDefsForInputId(r)[0];return o&&o.typedRuntimeValue.valueType===__dcg_shared_module_exports__['S']}getSpec(){return this.firstInputIsVector()?{inputs:[{type:"union",valueTypes:[__dcg_shared_module_exports__['s'],__dcg_shared_module_exports__['S']],id:"1",hint:uI},{type:"point",id:"2",hint:b_}],outputs:[{id:"3",type:"vector-copy",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}:{inputs:[{type:"union",valueTypes:[__dcg_shared_module_exports__['s'],__dcg_shared_module_exports__['S']],id:"1",hint:uI},{type:"point",id:"2",hint:f_}],outputs:[{id:"3",type:"vector",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};function X4(t){return Array.isArray(t)&&t.length===2&&t.every(e=>Array.isArray(e)&&e.length===2&&e.every(i=>!Array.isArray(i)&&!isNaN(i)))}function Ac(t){if(!X4(t))return __dcg_shared_module_exports__['kb'](__dcg_shared_module_exports__['S']);let e=t[1][0],i=t[1][1],r=t[1][0]+t[0][0],o=t[1][1]+t[0][1];return[[e,i],[r,o]]}function hI(t){let e=t.formula.geometry&&t.formula.geometry.call;return!e||!e.parents?[]:e.parents.map(i=>i===void 0?"":i[0])}function Vc(t,e={}){let i=t.formula.typed_constant_value.value,r=t.formula.typed_constant_value.valueType;return e.listIndex!==void 0&&__dcg_shared_module_exports__['aa'](r)&&(r=__dcg_shared_module_exports__['ba'](r),i=i[e.listIndex]),{value:i,valueType:r}}function yC(t,e,i){var C,S,k,M,I,E,T;let r,o=[],n=(C=t.formula.geometry.call)==null?void 0:C.symbol,a=((S=t.formula.assignment)==null?void 0:S[0])==="$",s=hI(t),l=e.getGeoTokenInfoFromIdentifier(s[0]),c=e.getGeoTokenInfoFromIdentifier(s[1]),{value:p}=Vc(t,i),u=p[0],g=p[1],m=(k=i.poi)==null?void 0:k.ariaLabel,w=m!==void 0&&m!==""?m:t.label;switch(n){case"intersection":w?r=e.s("graphing-calculator-narration-geometry-intersection-with-assignment",{assignment:Xo(w)}):a?r=e.s("graphing-calculator-narration-geometry-unlabeled-intersection",{index:t.id}):r=e.s("graphing-calculator-narration-geometry-intersection-with-assignment",{assignment:(M=t.formula.assignment)!=null?M:""}),i.includeDetails&&typeof u=="number"&&typeof g=="number"&&l!==void 0&&c!==void 0?o.push(e.s("graphing-calculator-narration-geometry-item-at-coordinates-and-intersection",{itemDescription:r,parent1:l.description,parent2:c.description,x:vi(e,u),y:Ci(e,g)})):o.push(r);break;case"midpoint":w?r=e.s("graphing-calculator-narration-geometry-midpoint-with-assignment",{assignment:Xo(w)}):a?r=e.s("graphing-calculator-narration-geometry-unlabeled-midpoint",{index:t.id}):r=e.s("graphing-calculator-narration-geometry-midpoint-with-assignment",{assignment:(I=t.formula.assignment)!=null?I:""}),i.includeDetails&&typeof u=="number"&&typeof g=="number"&&l!==void 0?o.push(e.s("graphing-calculator-narration-geometry-item-at-coordinates-and-parent",{itemDescription:r,parent:l.description,x:vi(e,u),y:Ci(e,g)})):o.push(r);break;case"glider":w?r=e.s("graphing-calculator-narration-geometry-glider-with-assignment",{assignment:Xo(w)}):a?r=e.s("graphing-calculator-narration-geometry-unlabeled-glider",{index:t.id}):r=e.s("graphing-calculator-narration-geometry-glider-with-assignment",{assignment:(E=t.formula.assignment)!=null?E:""}),i.includeDetails&&typeof u=="number"&&typeof g=="number"?o.push(e.s("graphing-calculator-narration-item-at-coordinates",{itemDescription:r,x:vi(e,u),y:Ci(e,g)})):o.push(r);break;default:w?r=e.s("graphing-calculator-narration-geometry-point-with-assignment",{assignment:Xo(w)}):a?r=e.s("graphing-calculator-narration-geometry-unlabeled-point",{index:t.id}):r=e.s("graphing-calculator-narration-geometry-point-with-assignment",{assignment:(T=t.formula.assignment)!=null?T:""}),i.includeDetails&&typeof u=="number"&&typeof g=="number"?o.push(e.s("graphing-calculator-narration-item-at-coordinates",{itemDescription:r,x:vi(e,u),y:Ci(e,g)})):o.push(r)}return o}function y_(t,e,i){var g,m,w,C;let r,o=[],n=((g=t.formula.assignment)==null?void 0:g[0])==="$",{value:a}=Vc(t,i),s=(m=a[0])==null?void 0:m[0],l=(w=a[0])==null?void 0:w[1],c=a[1],p=e.get2dProjection(),u=p&&p.viewport;return n?r=e.s("graphing-calculator-narration-geometry-unlabeled-circle",{index:t.id}):r=e.s("graphing-calculator-narration-geometry-circle-with-assignment",{assignment:(C=t.formula.assignment)!=null?C:""}),i.includeDetails&&u&&typeof s=="number"&&typeof l=="number"&&typeof c=="number"?o.push(e.s("graphing-calculator-narration-geometry-item-at-coordinates-with-radius",{itemDescription:r,x:vi(e,s),y:Ci(e,l),radius:Vo(__dcg_shared_module_exports__['Ya'](c,u.xmax-u.xmin).latex)})):o.push(r),o}function x_(t,e,i){var m,w,C,S,k,M,I,E;let r="",o=[],n=((m=t.formula.assignment)==null?void 0:m[0])==="$",{value:a}=Vc(t,i);n?r=e.s("graphing-calculator-narration-geometry-unlabeled-arc",{index:t.id}):r=e.s("graphing-calculator-narration-geometry-arc-with-assignment",{assignment:(w=t.formula.assignment)!=null?w:""});let s=(C=a[0])==null?void 0:C[0],l=(S=a[0])==null?void 0:S[1],c=(k=a[1])==null?void 0:k[0],p=(M=a[1])==null?void 0:M[1],u=(I=a[2])==null?void 0:I[0],g=(E=a[2])==null?void 0:E[1];return i.includeDetails&&typeof s=="number"&&typeof l=="number"&&typeof c=="number"&&typeof p=="number"&&typeof u=="number"&&typeof g=="number"?o.push(e.s("graphing-calculator-narration-geometry-item-at-coordinates-with-middle-and-end",{itemDescription:r,x1:vi(e,s),y1:Ci(e,l),x2:vi(e,c),y2:Ci(e,p),x3:vi(e,u),y3:Ci(e,g)})):o.push(r),o}function w_(t,e,i){var g,m,w,C,S,k,M,I;let{value:r}=Vc(t,i),o=r.length;if(i.polygonEdge!==void 0)if(i.polygonEdge>=0&&i.polygonEdge<r.length){let E=r[i.polygonEdge],T=r[(i.polygonEdge+1)%r.length];r=[E,T]}else return[e.s("shared-calculator-narration-item-unknown")];let n,a=[],s=((g=t.formula.assignment)==null?void 0:g[0])==="$",l=(m=r[0])==null?void 0:m[0],c=(w=r[0])==null?void 0:w[1],p=(C=r[1])==null?void 0:C[0],u=(S=r[1])==null?void 0:S[1];return o===3?s?n=e.s("graphing-calculator-narration-geometry-unlabeled-triangle",{index:t.id}):n=e.s("graphing-calculator-narration-geometry-triangle-with-assignment",{assignment:(k=t.formula.assignment)!=null?k:""}):o===4?s?n=e.s("graphing-calculator-narration-geometry-unlabeled-quadrilateral",{index:t.id}):n=e.s("graphing-calculator-narration-geometry-quadrilateral-with-assignment",{assignment:(M=t.formula.assignment)!=null?M:""}):s?n=e.s("graphing-calculator-narration-geometry-unlabeled-polygon",{index:t.id,sideCount:o}):n=e.s("graphing-calculator-narration-geometry-polygon-with-assignment",{assignment:(I=t.formula.assignment)!=null?I:"",sideCount:o}),i.polygonEdge!==void 0?i.includeDetails&&typeof l=="number"&&typeof c=="number"&&typeof p=="number"&&typeof u=="number"?a.push(e.s("graphing-calculator-narration-geometry-item-at-coordinates-to-coordinates",{itemDescription:n,x1:vi(e,l),y1:Ci(e,c),x2:vi(e,p),y2:Ci(e,u)})):a.push(n):i.includeDetails&&typeof l=="number"&&typeof c=="number"?a.push(e.s("graphing-calculator-narration-item-at-coordinates",{itemDescription:n,x:vi(e,l),y:Ci(e,c)})):a.push(n),a}function v_(t,e,i){var S,k,M,I,E,T,A,G,_,P,N,W;let r="",o=[],n=(S=t.formula.geometry.call)==null?void 0:S.symbol,a=((k=t.formula.assignment)==null?void 0:k[0])==="$",s=hI(t),l=e.getGeoTokenInfoFromIdentifier(s[0]),c=e.getGeoTokenInfoFromIdentifier(s[1]),{value:p,valueType:u}=Vc(t,i),g,m,w,C;return n==="vector"?[[g,m],[w,C]]=Ac(p):(g=(M=p[0])==null?void 0:M[0],m=(I=p[0])==null?void 0:I[1],w=(E=p[1])==null?void 0:E[0],C=(T=p[1])==null?void 0:T[1]),n==="parallel"?a?r=e.s("graphing-calculator-narration-geometry-unlabeled-parallel",{index:t.id}):r=e.s("graphing-calculator-narration-geometry-parallel-with-assignment",{assignment:(A=t.formula.assignment)!=null?A:""}):n==="perpendicular"?a?r=e.s("graphing-calculator-narration-geometry-unlabeled-perpendicular",{index:t.id}):r=e.s("graphing-calculator-narration-geometry-perpendicular-with-assignment",{assignment:(G=t.formula.assignment)!=null?G:""}):u===__dcg_shared_module_exports__['I']?a?r=e.s("graphing-calculator-narration-geometry-unlabeled-line",{index:t.id}):r=e.s("graphing-calculator-narration-geometry-line-with-assignment",{assignment:(_=t.formula.assignment)!=null?_:""}):u===__dcg_shared_module_exports__['K']?a?r=e.s("graphing-calculator-narration-geometry-unlabeled-ray",{index:t.id}):r=e.s("graphing-calculator-narration-geometry-ray-with-assignment",{assignment:(P=t.formula.assignment)!=null?P:""}):u===__dcg_shared_module_exports__['C']?a?r=e.s("graphing-calculator-narration-geometry-unlabeled-segment",{index:t.id}):r=e.s("graphing-calculator-narration-geometry-segment-with-assignment",{assignment:(N=t.formula.assignment)!=null?N:""}):u===__dcg_shared_module_exports__['S']&&(a?r=e.s("graphing-calculator-narration-geometry-unlabeled-vector",{index:t.id}):r=e.s("graphing-calculator-narration-geometry-vector-with-assignment",{assignment:(W=t.formula.assignment)!=null?W:""})),(n==="parallel"||n==="perpendicular")&&i.includeDetails&&typeof g=="number"&&typeof m=="number"&&typeof w=="number"&&typeof C=="number"&&l!==void 0&&c!==void 0?o.push(e.s("graphing-calculator-narration-geometry-item-to-line-passing-through-point-at-coordinates-to-coordinates",{itemDescription:r,parent1:l.description,parent2:c.description,x1:vi(e,g),y1:Ci(e,m),x2:vi(e,w),y2:Ci(e,C)})):i.includeDetails&&typeof g=="number"&&typeof m=="number"&&typeof w=="number"&&typeof C=="number"?o.push(e.s("graphing-calculator-narration-geometry-item-at-coordinates-to-coordinates",{itemDescription:r,x1:vi(e,g),y1:Ci(e,m),x2:vi(e,w),y2:Ci(e,C)})):o.push(r),o}function C_(t,e,i){var g,m,w,C;let r="",o=[],{value:n,valueType:a}=Vc(t,i),s=(g=n[0])==null?void 0:g[0],l=(m=n[0])==null?void 0:m[1],c=(w=t.formula.assignment)!=null?w:"",p="",u=(C=e.getGrapher())==null?void 0:C.getGraphSketch(t.id);if(u&&"labels"in u){let S=u.labels;S.length>0&&"text"in S[0]&&(p=Xo(S[0].text))}if(a===__dcg_shared_module_exports__['M']?/^\$/.test(c)?p!==""?r=e.s("graphing-calculator-narration-geometry-unlabeled-angle-with-measurement",{measurementText:p}):r=e.s("graphing-calculator-narration-geometry-unlabeled-angle",{index:t.id}):p!==""?r=e.s("graphing-calculator-narration-geometry-angle-with-measurement-and-assignment",{measurementText:p,assignment:c}):r=e.s("graphing-calculator-narration-geometry-angle-with-assignment",{assignment:c}):a===__dcg_shared_module_exports__['O']&&(/^\$/.test(c)?p!==""?r=e.s("graphing-calculator-narration-geometry-unlabeled-directed-angle-with-measurement",{measurementText:p}):r=e.s("graphing-calculator-narration-geometry-unlabeled-directed-angle",{index:t.id}):p!==""?r=e.s("graphing-calculator-narration-geometry-directed-angle-with-measurement-and-assignment",{measurementText:p,assignment:c}):r=e.s("graphing-calculator-narration-geometry-directed-angle-with-assignment",{assignment:c})),i.includeDetails&&typeof s=="number"&&typeof l=="number"){let S=hI(t),k=e.getGeoTokenInfoFromIdentifier(S[0]),M=e.getGeoTokenInfoFromIdentifier(S[1]),I=e.getGeoTokenInfoFromIdentifier(S[2]);k!==void 0&&M!==void 0&&I!==void 0?o.push(e.s("graphing-calculator-narration-geometry-angle-at-coordinates-through-points",{itemDescription:r,x1:vi(e,s),y1:Ci(e,l),parent1:k.description,parent2:M.description,parent3:I.description})):k!==void 0?o.push(e.s("graphing-calculator-narration-geometry-angle-of-polygon-at-coordinates",{itemDescription:r,parent:k.description,x:vi(e,s),y:Ci(e,l)})):o.push(e.s("graphing-calculator-narration-item-at-coordinates",{itemDescription:r,x:vi(e,s),y:Ci(e,l)}))}else o.push(r);return o}function S_(t,e,i){let{value:r,valueType:o}=Vc(t,i),n=[],a=r.length;switch(__dcg_shared_module_exports__['ba'](o)){case __dcg_shared_module_exports__['s']:n.push(e.s("graphing-calculator-narration-geometry-list-of-points",{count:a}));break;case __dcg_shared_module_exports__['E']:n.push(e.s("graphing-calculator-narration-geometry-list-of-circles",{count:a}));break;case __dcg_shared_module_exports__['G']:n.push(e.s("graphing-calculator-narration-geometry-list-of-arcs",{count:a}));break;case __dcg_shared_module_exports__['A']:n.push(e.s("graphing-calculator-narration-geometry-list-of-polygons",{count:a}));break;case __dcg_shared_module_exports__['I']:n.push(e.s("graphing-calculator-narration-geometry-list-of-lines",{count:a}));break;case __dcg_shared_module_exports__['K']:n.push(e.s("graphing-calculator-narration-geometry-list-of-rays",{count:a}));break;case __dcg_shared_module_exports__['C']:n.push(e.s("graphing-calculator-narration-geometry-list-of-segments",{count:a}));break;case __dcg_shared_module_exports__['M']:n.push(e.s("graphing-calculator-narration-geometry-list-of-angles",{count:a}));break;case __dcg_shared_module_exports__['O']:n.push(e.s("graphing-calculator-narration-geometry-list-of-directed-angles",{count:a}));break;default:n.push(e.s("graphing-calculator-narration-geometry-list-of-any",{count:a}));break}return n[0]=`${n[0]}.`,n}var ai=__dcg_shared_module_exports__['h'](j());var Q4=1,Lc=class{constructor(e,i,r,o,n,a,s){this.x=e,this.y=i,this.type=r,this.sketch=o,this.branch=n,this.pointIdxOnBranch=a,this.bareLabel=s===void 0?!1:s,this.id=Q4++}getLabel(){let e=this.sketch&&this.sketch.branches[this.branch];return e&&"labels"in e&&e.labels&&e.labels[this.pointIdxOnBranch]||""}getGraphMode(){return this.sketch.branches[this.branch].graphMode}getCompiledFunction(){let e=this.sketch.branches[this.branch];if(!(!("compiled"in e)||!e.compiled))return e.compiled.fn}isAttachedToPlottedPoint(){return this.type===1006||this.type===1008}isMovable(){return this.getGraphMode()===4}isPersistent(){return this.type===1008}getLabelSize(){let e=this.sketch&&this.sketch.branches[this.branch];return this.type===1008&&e&&"labelSize"in e?e.labelSize===void 0?1:e.labelSize:1}getLabelRotation(){let e=this.sketch&&this.sketch.branches[this.branch];return this.type===1008&&e&&"labelAngle"in e?e.labelAngle===void 0?0:e.labelAngle:0}getPointOpacity(){let e=this.sketch&&this.sketch.branches[this.branch];if(e&&"pointOpacity"in e){let i=e.pointOpacity;if(i!==void 0){let r;return Array.isArray(i)?r=i[this.pointIdxOnBranch]:r=i,isFinite(r)?Math.max(0,Math.min(1,r)):.9}}return this.isMovable()?1:.9}getPointSize(){let e=this.sketch&&this.sketch.branches[this.branch];if(this.isMovable())return 22;if(e&&"pointSize"in e){let i=e.pointSize;if(i!==void 0){let r;return Array.isArray(i)?r=i[this.pointIdxOnBranch]:r=i,isFinite(r)?Math.max(0,r):9}}return 9}getTextOutline(){if(this.hasEditableLabel())return!1;let e=this.sketch&&this.sketch.branches[this.branch];return this.type===1008&&e&&"suppressTextOutline"in e?!e.suppressTextOutline:!0}hasInteractiveLabel(){let e=this.sketch&&this.sketch.branches[this.branch];return e&&"interactiveLabel"in e?!!e.interactiveLabel:!1}hasEditableLabel(){let e=this.sketch&&this.sketch.branches[this.branch];return e&&"editableLabel"in e?!!e.editableLabel:!1}isBareLabel(){return this.bareLabel}getMovablePoint(){return this.sketch.getMovablePointByIndex(this.pointIdxOnBranch)}isSelected(){return this.sketch.showHighlight}};function xC(t,e,i){return Math.max(e,Math.min(i,t))}var hg=class{constructor(e){let i=e.data,r=e.width,o=e.height;this.imageData=e;for(let l=1;l<r;l++)i[l]+=i[l-1];for(let l=1;l<o;l++)i[l*r]+=i[l*r-r];let n=r*o-r-o+1,a=r-1;for(var s=0;s<n;s++){let l=1+s%a,p=(1+Math.floor(s/a))*r,u=l-1+p,g=l+p-r,m=l-1+p-r;i[p+l]+=i[u]+i[g]-i[m]}}getSumForValidRect(e){let i=e.left-1,r=e.right-1,o=e.top-1,n=e.bottom-1,a=this.imageData.width,s=this.imageData.data,l=s[i+o*a],c=s[r+o*a],p=s[i+n*a],u=s[r+n*a];return i>=0&&o>=0?u-c-p+l:i>=0?u-p:o>=0?u-c:u}getSum(e){let i={left:xC(Math.floor(e.left),0,this.imageData.width),right:xC(Math.ceil(e.right),0,this.imageData.width),top:xC(Math.floor(e.top),0,this.imageData.height),bottom:xC(Math.ceil(e.bottom),0,this.imageData.height)};return i.left>=i.right||i.top>=i.bottom?0:this.getSumForValidRect(i)}};var Ad=1/2,Gd=document.createElement("canvas"),mI=[];function Z4(t,e){if(!(e.width*e.height>0))return new hg({width:0,height:0,data:[]});Gd.width=0,Gd.width=Math.round(e.width*Ad),Gd.height=Math.round(e.height*Ad);let r=Gd.getContext("2d");r.save(),r.scale(Gd.width/t.canvas.width,Gd.height/t.canvas.height),r.drawImage(t.canvas,0,0),r.restore();var o=r.getImageData(0,0,Gd.width,Gd.height),n=o.data;n.length/4,mI.length,mI=new Array(n.length/4);for(var a=mI,s=0;s<a.length;s++)a[s]=n[s*4+3];var l=new hg({width:o.width,height:o.height,data:a});return l}function E_(t){for(var e=0;e<t.length;e++){var i=e6(e,t);t[e]=[i]}return t.map(function(r){return r[0]})}function e6(t,e){var i=1/0,r=-1,o=e[t];if(o.length===1)return o[0];for(var n=0;n<o.length;n++){var a=e[t][n].staticScore,s=t6(t,n,e),l=a+s;(r===-1||l<i)&&(i=l,r=n)}return o[r]}function t6(t,e,i){for(var r=0,o=i[t][e],n=0;n<i.length;n++)if(n!==t){for(var a=0,s=i[n],l=s.length-1;l>=0;l--){var c=s[l],p=Math.max(0,Math.min(o.right,c.right)-Math.max(o.left,c.left)),u=Math.max(0,Math.min(o.bottom,c.bottom)-Math.max(o.top,c.top));a+=p*u}r+=a/s.length}return r}function i6(t,e){var i=e.getSum({left:t.left*Ad,right:t.right*Ad,top:t.top*Ad,bottom:t.bottom*Ad});return i/=200,i/=Ad*Ad,i}function r6(t,e){var i=0;return e.forEach(function(r){i+=D_(t,r)}),i}function o6(t,e){var i=D_(t,e);return 10*(t.width*t.height-i)}function D_(t,e){var i=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left)),r=Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top));return i*r}function k_(t,e,i){let r;return()=>(r||(r={domObstructions:i,viewport:{left:0,right:e.width,top:0,bottom:e.height},integralImage:Z4(t,e)}),r)}function wC(t,e){if(!(e.length<=1)){var i=t();for(var r of e)r.staticScore+=o6(r,i.viewport),r.staticScore+=r6(r,i.domObstructions),r.staticScore+=i6(r,i.integralImage)}}function I_(t,e){var i=e.nakedLabel?0:e.pt_radius,r=Math.round(i/Math.sqrt(2)),o=[],n=e.pt_x,a=e.pt_y,s=e.width,l=e.height,c=400;o.push({cx_s:0,cy_s:0,cx_a:0,cy_a:0,staticScore:c,orientation:"center",matches:{default:1,center:1,center_auto:1,auto_center:1}}),o.push({cx_s:.5,cx_a:i+3,cy_s:0,cy_a:0,staticScore:c,orientation:"right",matches:{default:1,right:1,center_auto:1,auto_right:1}}),o.push({cx_s:-.5,cx_a:-i-3,cy_s:0,cy_a:0,staticScore:c,orientation:"left",matches:{default:1,left:1,center_auto:1,auto_left:1}}),o.push({cx_s:0,cx_a:0,cy_s:-.5,cy_a:-i,staticScore:c,orientation:"above",matches:{default:1,above:1,auto_center:1,above_auto:1}}),o.push({cx_s:-.5,cx_a:-r,cy_s:-.5,cy_a:-r,staticScore:c,orientation:"tl",matches:{default:1,above_left:1,above_auto:1,auto_left:1}}),o.push({cx_s:.5,cx_a:r,cy_s:-.5,cy_a:-r,staticScore:c,orientation:"tr",matches:{default:1,above_right:1,above_auto:1,auto_right:1}}),o.push({cx_s:0,cx_a:0,cy_s:.5,cy_a:i,staticScore:c,orientation:"below",matches:{default:1,below:1,auto_center:1,below_auto:1}}),o.push({cx_s:-.5,cx_a:-r,cy_s:.5,cy_a:r,staticScore:c,orientation:"bl",matches:{default:1,below_left:1,below_auto:1,auto_left:1}}),o.push({cx_s:.5,cx_a:r,cy_s:.5,cy_a:r,staticScore:c,orientation:"br",matches:{default:1,below_right:1,below_auto:1,auto_right:1}});var p=Math.cos(e.rotation),u=Math.sin(e.rotation),g=o.map(function(m){var w=m.cx_s*s+m.cx_a,C=m.cy_s*l+m.cy_a;let S=w*p-C*u,k=C*p+w*u,M=`calc(${m.cx_s*100-50}% + ${m.cx_a}px)`,I=`calc(${m.cy_s*100-50}% + ${m.cy_a}px)`,E=-s/2,T=s/2,A=-l/2,G=l/2;if(e.rotation){let _=n6([{x:E*p-A*u,y:A*p+E*u},{x:E*p-G*u,y:G*p+E*u},{x:T*p-A*u,y:A*p+T*u},{x:T*p-G*u,y:G*p+T*u}]);E=_.left,T=_.right,A=_.top,G=_.bottom}return E=Math.round(n+S+E),T=Math.round(n+S+T),A=Math.round(a+k+A),G=Math.round(a+k+G),{pt_x:Math.round(n),pt_y:Math.round(a),left:E,right:T,top:A,bottom:G,width:T-E,height:G-A,transform:`translate(${M},${I})`,staticScore:e.priorOrientation===m.orientation?m.staticScore-20:m.staticScore,orientation:m.orientation,matches:m.matches}});return e.enforceOrientation&&e.enforceOrientation!=="default"?g=__dcg_shared_module_exports__['wa'](g,function(m){return!!m.matches[e.enforceOrientation]}):e.nakedLabel?g=__dcg_shared_module_exports__['wa'](g,function(m){return m.orientation==="center"}):e.keepOrientation&&e.priorOrientation?g=__dcg_shared_module_exports__['wa'](g,function(m){return m.orientation===e.priorOrientation}):g=__dcg_shared_module_exports__['wa'](g,function(m){return m.orientation!=="center"}),wC(t,g),g}function T_(t,e){var i=[],r=e.width,o=e.height,n=r/2,a=o/2,s=e.pt_x1,l=e.pt_y1,c=e.pt_x2,p=e.pt_y2,u=5,g=(p-l)/(c-s),m=Math.atan2(p-l,c-s)+Math.PI/2,w=u*Math.cos(m),C=u*Math.sin(m),S=Math.min(l,p)-Math.abs(C)-o,k=Math.max(l,p)+Math.abs(C),M=[.5,.4,.6,.2,.8],I=[0,20,20,40,40],E=[];for(let N of M)E.push({x:s*(1-N)+c*N,y:l*(1-N)+p*N});for(let N=0;N<E.length;N++){let W=E[N];var T,A,G,_;if(g>=2||g<=-2){G=_=W.y-a;let J=Math.abs((c-s)/(p-l)*a)+Math.abs(w);T=W.x+J,A=W.x-J-r}else if(g<=.05&&g>=-.05){T=A=W.x-n;let J=Math.abs(g*n)+Math.abs(C);G=W.y-J-o,_=W.y+J}else w>0?(T=W.x+w,A=W.x-w-r):(T=W.x+w-r,A=W.x-w),C>0?(G=W.y+C,_=W.y-C-o):(G=W.y+C-o,_=W.y-C);G<S?G=S:G>k&&(G=k),_<S?_=S:_>k&&(_=k);let X=(c-s)*(G-l)-(p-l)*(T-s)>0,q=N.toString()+(X?"-a":"-b");i.push({pt_x:W.x,pt_y:W.y,left:T,top:G,staticScore:I[N],orientation:q,matches:{[q]:1}});let B=N.toString()+(X?"-b":"-a");i.push({pt_x:W.x,pt_y:W.y,left:A,top:_,staticScore:I[N],orientation:B,matches:{[B]:1}})}var P=i.map(function(N){let W=Math.round(N.left),X=Math.round(N.left+r),q=Math.round(N.top),B=Math.round(N.top+o);return{pt_x:Math.round(N.pt_x),pt_y:Math.round(N.pt_y),transform:`translate(${N.left-N.pt_x}px,${N.top-N.pt_y}px)`,left:W,right:X,top:q,bottom:B,width:X-W,height:B-q,staticScore:e.priorOrientation===N.orientation?N.staticScore-20:N.staticScore,orientation:N.orientation,matches:N.matches}});return e.keepOrientation&&e.priorOrientation&&(P=__dcg_shared_module_exports__['wa'](P,function(N){return N.orientation===e.priorOrientation})),wC(t,P),P}function M_(t,e){var i=[],r=e.pt_x,o=e.pt_y,n=e.width,a=e.height;let s=-(e.startAngle+e.deltaAngle/2),l=e.isRightAngle?e.radius*Math.sqrt(2)-1:e.radius+4,c=l+Math.sqrt(e.width*e.width/4+e.height*e.height/4),p=[],u=c*Math.sin(s);u>l+1/2*a&&(u=l+1/2*a),u<-l-1/2*a&&(u=-l-1/2*a),p.push({x:r+c*Math.cos(s)-n/2,y:o+u-a/2});for(let m=0;m<p.length;m++){let w=p[m],C=m.toString()+"-a";i.push({pt_x:w.x,pt_y:w.y,left:w.x,top:w.y,staticScore:0,orientation:C,matches:{[C]:1}})}var g=i.map(function(m){let w=Math.round(m.left),C=Math.round(m.left+n),S=Math.round(m.top),k=Math.round(m.top+a);return{pt_x:Math.round(m.pt_x),pt_y:Math.round(m.pt_y),transform:`translate(${m.left-m.pt_x}px,${m.top-m.pt_y}px)`,left:w,right:C,top:S,bottom:k,width:C-w,height:k-S,staticScore:e.priorOrientation===m.orientation?m.staticScore-20:m.staticScore,orientation:m.orientation,matches:m.matches}});return e.keepOrientation&&e.priorOrientation&&(g=__dcg_shared_module_exports__['wa'](g,function(m){return m.orientation===e.priorOrientation})),wC(t,g),g}function G_(t,e){for(var i=[],r=e.width,o=e.height,n=10,a=Math.round(n/Math.sqrt(2)),s=0,l=50,c=0,p=0,u=0,g=0;g<e.path.length-2;g+=2)u+=1,c+=e.path[g],p+=e.path[g+1];var m=c/u,w=p/u;i.push({left:m-r/2,top:w-o/2,staticScore:s,orientation:"center",matches:{center:1}}),i.push({left:m+n+3,top:w-o/2,staticScore:l,orientation:"right",matches:{right:1}}),i.push({left:m-(n+r)-3,top:w-o/2,staticScore:l,orientation:"left",matches:{left:1}}),i.push({left:m-r/2,top:w-(o+n),staticScore:l,orientation:"top",matches:{top:1}}),i.push({left:m-(r+a),top:w-(o+a),staticScore:l,orientation:"tl",matches:{tl:1}}),i.push({left:m+a,top:w-(o+a),staticScore:l,orientation:"tr",matches:{tr:1}}),i.push({left:m-r/2,top:w+n,staticScore:l,orientation:"bottom",matches:{bottom:1}}),i.push({left:m-(r+a),top:w+a,staticScore:l,orientation:"bl",matches:{bl:1}}),i.push({left:m+a,top:w+a,staticScore:l,orientation:"br",matches:{br:1}});var C=i.map(function(S){let k=Math.round(S.left),M=Math.round(S.left+r),I=Math.round(S.top),E=Math.round(S.top+o);return{pt_x:Math.round(m),pt_y:Math.round(w),transform:`translate(${S.left-m}px,${S.top-w}px)`,left:k,right:M,top:I,bottom:E,width:M-k,height:E-I,staticScore:e.priorOrientation===S.orientation?S.staticScore-20:S.staticScore,orientation:S.orientation,matches:S.matches}});return e.keepOrientation&&e.priorOrientation&&(C=__dcg_shared_module_exports__['wa'](C,function(S){return S.orientation===e.priorOrientation})),wC(t,C),C}function n6(t){let e=t[0].x,i=t[0].x,r=t[0].y,o=t[0].y;for(var n=t.length-1;n>=1;n--){let{x:a,y:s}=t[n];a<e&&(e=a),a>i&&(i=a),s<r&&(r=s),s>o&&(o=s)}return{left:e,right:i,top:r,bottom:o}}var CC=__dcg_shared_module_exports__['h'](j());var A_=__dcg_shared_module_exports__['h'](j());var Lo=__dcg_shared_module_exports__['h'](j());function Ne(t){return{shouldBeFocused:()=>Up(t),onFocusedChanged:e=>{fI(t,e)}}}function Up(t){let e=t.predicate;if(e&&!e())return!1;let i=t.controller.getFocusLocation();return i&&__dcg_shared_module_exports__['Ra'](i,t.location)}function fI(t,e){let i=t.predicate;i&&!i()||(e?t.controller.dispatch({type:"set-focus-location",location:t.location}):t.controller.dispatch({type:"blur-focus-location",location:t.location}))}var{If:vC}=Lo.Components,Vl=class extends Lo.Class{init(){this.controller=this.props.controller()}template(){return Lo.createElement("span",{class:()=>{var i,r;let e=this.parentOrChildHovered();return{"dcg-geo-token-view":!0,"dcg-static-token":(r=(i=this.props).isStatic)==null?void 0:r.call(i),"dcg-selected-token":this.isTokenSelected(),"dcg-hidden-token":this.isHidden(),"dcg-token-has-label":this.hasLabel(),"dcg-child-of-hovered-token":e==="child","dcg-parent-of-hovered-token":e==="parent","dcg-assignment-token":!!this.getAssignment(),"dcg-graph-interactions-disabled":this.isGraphInteractionDisabled()}},style:()=>({color:this.getColor()}),role:this.bindFn(this.getAriaRole),"dcg-token-type":()=>this.getTokenInfo().iconType,"aria-roledescription":()=>this.props.insideGroup()?void 0:this.controller.s("graphing-calculator-narration-geometry-construction-role-description"),"aria-label":this.bindFn(this.getAriaLabel),"aria-selected":this.bindFn(this.isTokenSelected),tabindex:()=>this.props.putInTabOrder()?0:-1,manageFocus:()=>this.props.focusLocation?Ne({controller:this.controller,location:this.props.focusLocation()}):void 0,onTapStart:this.bindFn(this.onTapStart),onTap:this.bindFn(this.onTap),onPointerOver:this.bindFn(this.onPointerOver),onPointerOut:this.bindFn(this.onPointerOut)},Lo.createElement("span",{class:Lo.const("dcg-token-background")}),Lo.createElement("span",{class:()=>({"dcg-token-icon":!0,[this.getAdditionalTokenClass()]:this.getAdditionalTokenClass(),"dcg-token-is-list":this.getIsList()&&!this.getAssignment()}),style:()=>({"--dcg-icon-angle":this.getIconAngle()})},Lo.createElement(vC,{predicate:()=>!!this.getIcon()},()=>Lo.createElement("i",{class:this.bindFn(this.getIcon)}))),Lo.createElement(vC,{predicate:()=>!!this.getAssignment()},()=>Lo.createElement(Te,{latex:this.bindFn(this.getAssignment),config:this.const({})})),Lo.createElement(vC,{predicate:()=>this.hasLabel()},()=>Lo.createElement("span",{class:()=>({"dcg-token-label":!0})},()=>this.getLabel())),Lo.createElement(vC,{predicate:this.bindFn(this.isGraphInteractionDisabled)},()=>Lo.createElement("i",{class:Lo.const("dcg-icon-lock")})))}getIconAngle(){let e=this.controller.getItemsByIdentifier(this.props.identifier());if(!e||e.length!==1)return;let i=e[0];if(!i||!i.formula||!i.formula.typed_constant_value)return;let r;switch(this.getIconType()){case"vector":case"translate":if(i.formula.typed_constant_value.valueType!==__dcg_shared_module_exports__['S'])return;let[o,n]=i.formula.typed_constant_value.value[0];r=__dcg_shared_module_exports__['ka'](o,n);break;case"segment":{if(i.formula.typed_constant_value.valueType!==__dcg_shared_module_exports__['C'])return;let[[a,s],[l,c]]=i.formula.typed_constant_value.value;r=__dcg_shared_module_exports__['ka'](l-a,c-s);break}case"line":{if(i.formula.typed_constant_value.valueType!==__dcg_shared_module_exports__['I'])return;let[[a,s],[l,c]]=i.formula.typed_constant_value.value;r=__dcg_shared_module_exports__['ka'](l-a,c-s);break}case"ray":{if(i.formula.typed_constant_value.valueType!==__dcg_shared_module_exports__['K'])return;let[[a,s],[l,c]]=i.formula.typed_constant_value.value;r=__dcg_shared_module_exports__['ka'](l-a,c-s);break}}return r!==void 0?`${-Number(r).toFixed(2)}rad`:void 0}getAdditionalTokenClass(){if(this.getAssignment()||this.hasError())return"";switch(this.getIconType()){case"glider":return"dcg-token-glider";case"line":return"dcg-token-line";case"segment":return"dcg-token-segment";case"ray":return"dcg-token-ray";case"intersection":return"dcg-token-intersection";case"midpoint":return"dcg-token-midpoint";case"parallel":return"dcg-token-parallel";case"perpendicular":return"dcg-token-perpendicular";case"rotate":return"dcg-token-rotate";case"circle":return"dcg-token-circle";case"arc":return"dcg-token-arc";case"vector":return"dcg-token-vector";case"dilate":return"dcg-token-dilate";case"reflect":return"dcg-token-reflect";case"translate":return"dcg-token-translate";case"transformation":return"dcg-token-transformation";case"point":case"start":case"end":return"dcg-token-point";case"polygon":return"dcg-token-polygon";case"angle":return"dcg-token-angle";case"angles":return"dcg-token-angles";case"directedangle":case"directedangles":return"dcg-token-directedangle"}return""}getIdFromParentRef(e){if(e)return this.controller.getExpressionIdForIdentifier(e[0])}isGraphInteractionDisabled(){let e=this.props.controller().getExpressionIdForIdentifier(this.props.identifier())||"",i=this.controller.getItemModel(e);return!!i&&(i.type==="expression"||i.type==="image")&&!!i.disableGraphInteractions}parentOrChildHovered(){var c,p,u,g,m,w;if(!this.props.showParentChildrenHover||!this.props.showParentChildrenHover())return!1;let e=this.controller.getHoveredOrFocusedTokenIdentifier(),i=this.controller.getExpressionIdForIdentifier(e),r=this.props.identifier(),o=this.props.controller().getExpressionIdForIdentifier(r)||"";if(!i)return!1;let n=this.controller.getItemModel(i),a=this.controller.getItemModel(o);if(!n||n.type!=="expression"||!a||a.type!=="expression")return!1;let s=((u=(p=(c=n.formula)==null?void 0:c.geometry)==null?void 0:p.call)==null?void 0:u.parents)||[],l=((w=(m=(g=a.formula)==null?void 0:g.geometry)==null?void 0:m.call)==null?void 0:w.parents)||[];for(let C=0;C<s.length;C++)if(this.getIdFromParentRef(s[C])===o)return"parent";for(let C=0;C<l.length;C++)if(this.getIdFromParentRef(l[C])===i)return"child";return!1}willUnmount(){this.implicitMouseOut()}didUpdate(){let e=this.props.identifier();this.currentlyActiveIdentifier&&e!==this.currentlyActiveIdentifier&&this.implicitMouseOut()}implicitMouseOut(){this.currentlyActiveIdentifier&&this.controller.runAfterDispatch(()=>{let e=this.currentlyActiveIdentifier;e&&(this.currentlyActiveIdentifier=void 0,this.controller.dispatch({type:"unset-active-token",identifier:e,style:"hovered"}))})}isHidden(){return this.getTokenInfo().isHidden}hasError(){let e=this.getTokenInfo();return!e||e.hasError}getIcon(){if(this.getAssignment())return;let e=this.getTokenInfo();if(this.hasError())return"dcg-icon-error";switch(e.iconType){case"point":case"glider":case"intersection":case"strictintersection":case"midpoint":case"start":case"end":return"dcg-icon-point";case"translate":case"vector":return"dcg-icon-vector";case"dilate":return"dcg-icon-dilation";case"rotate":return"dcg-icon-rotation";case"reflect":return"dcg-icon-reflection";case"transformation":return"dcg-icon-title";case"angle":case"angles":case"directedangle":case"directedangles":return"dcg-icon-angle";case"polygon":return"dcg-icon-polygon-solid";case"apply":case"arc":case"circle":case"clockwise":case"counterclockwise":case"error":case"line":case"parallel":case"perpendicular":case"ray":case"reflex":case"segment":case"segments":case"unknown":case"vertices":return;default:return e.iconType}}hasLabel(){return!!this.getLabel()}getLabel(){if(this.getAssignment())return"";let e=this.getTokenInfo().label.trim();return e.length<=2?e:""}getAssignment(){let e=this.props.identifier();return e[0]!=="$"?__dcg_shared_module_exports__['cb'](e):""}getAriaLabel(){let{description:e}=this.getTokenInfo();return this.isHidden()?this.controller.s("graphing-calculator-narration-geometry-hidden-construction-description",{description:e}):e}isTransformation(){var e;return((e=this.getTokenInfo())==null?void 0:e.groupType)==="transformation"}getColor(){if(this.getAssignment())return;let e=this.getTokenInfo();return this.hasError()?"#fa824c":this.isTransformation()||this.isHidden()?"#aaa":e.color}getIconType(){return this.getTokenInfo().iconType}getIsList(){return this.getTokenInfo().isList}getTokenInfo(){let e=this.props.identifier();return this.controller.getTokenRenderInfoByIdentifier(e)}onPointerOver(e){var i,r;(r=(i=this.props).isStatic)!=null&&r.call(i)||e.pointerType==="mouse"&&(this.currentlyActiveIdentifier=this.props.identifier(),this.controller.dispatch({type:"set-active-token",identifier:this.currentlyActiveIdentifier,style:"hovered"}))}onPointerOut(e){var i,r;(r=(i=this.props).isStatic)!=null&&r.call(i)||e.pointerType==="mouse"&&this.currentlyActiveIdentifier&&(this.controller.dispatch({type:"unset-active-token",identifier:this.currentlyActiveIdentifier,style:"hovered"}),this.currentlyActiveIdentifier=void 0)}onTapStart(e){var i,r;(r=(i=this.props).isStatic)!=null&&r.call(i)||e.handle()}onTap(e){var i,r;(r=(i=this.props).isStatic)!=null&&r.call(i)||(e.handle(),this.props.focusLocation&&this.controller.dispatch({type:"set-focus-location",location:this.props.focusLocation()}),this.controller.dispatch({type:"select-expression-that-defines-token",identifier:this.props.identifier(),toggle:this.isTokenSelected(),multiSelectMode:this.controller.isMultiSelectEnabled()&&!!e.shiftKey}))}isTokenSelected(){let e=this.getTokenInfo();return!!(e&&e.isSelected)}getAriaRole(){var e,i;if(!((i=(e=this.props).isStatic)!=null&&i.call(e)))return this.props.insideGroup()?"option":"button"}};var gg=t=>{let e=function(){return t};return e.isDcgViewConst=!0,e},mg=class{constructor(e,i,r){this.tokenController=e,this.mathNode=i,this.isStatic=r}updateTokens(e){if(!this.mathNode)return;if(!this.lastTokenInfo||this.lastTokenInfo.latex!==e)if(!this.tokenController.doesLatexContainToken(e))this.lastTokenInfo={latex:e,tokens:[]};else{let r=[];this.mathNode.querySelectorAll(".dcg-mq-token").forEach(o=>{r.push(o)}),this.lastTokenInfo={latex:e,tokens:r}}let i=this.lastTokenInfo.tokens;for(let r of i){let o=r.dcgTokenView;if(o)o.update();else{let n=r.getAttribute("data-dcg-mq-token")||"",a=A_.mountToNode(Vl,r,{controller:gg(this.tokenController),identifier:gg("$"+n),insideMQ:gg(!0),insideGroup:gg(!1),putInTabOrder:gg(!1),isStatic:gg(this.isStatic)});r.dcgTokenView=a}}}};var Te=class extends CC.Class{template(){return this.children.length===1?this.children[0]:CC.createElement("div",{onMount:e=>this.onMountMathquill(e)})}onMount(){this.children.length===1&&this.onMountMathquill(this.findRootNode())}onMountMathquill(e){this.props.tokenController&&(this.mathquillTokenHelper=new mg(this.props.tokenController(),e,!0)),this.staticMath=hl.StaticMath(e,__dcg_shared_module_exports__['a']({},this.props.config())),e.classList.add("dcg-static-mathquill-view"),this.updateMathquill()}didUpdate(){this.updateMathquill()}updateMathquill(){var e;this.updateMathquillAria(),this.updateMathquillLatex(),(e=this.mathquillTokenHelper)==null||e.updateTokens(this.props.latex())}updateMathquillLatex(){if(!this.staticMath)return;let e=this.props.latex();this.lastLatex!==e&&(this.staticMath.latex(e),this.lastLatex=e,this.props.onReflow&&this.props.onReflow())}updateMathquillAria(){if(!this.staticMath||!this.props.getAriaLabel)return;let e=this.props.getAriaLabel();e!==this.staticMath.getAriaLabel()&&this.staticMath.setAriaLabel(e)}};Tt();var ure=function(){{var t="_*_";H.Event.prototype.wasHandled=function(e){e=e||t;var i=this.originalEvent,r=i&&i.handledBy;if(r&&r[e])return!0;if(e!==t)return!1;var o=this.target.closest("[handleEvent]");return o&&o!==this.currentTarget?o.getAttribute("handleEvent")!=="false":!1},H.Event.prototype.handle=function(e){e=e||t;var i=this.originalEvent;if(i){var r=i.handledBy;r||(r=i.handledBy={}),r[e]=!0}}}}();var Ra=__dcg_shared_module_exports__['h'](j());Tt();function fg(t){let e=__dcg_shared_module_exports__['ac'](t),i=0;for(;!__dcg_shared_module_exports__['cc'](e);)i+=1,e=__dcg_shared_module_exports__['bc'](e);return i}var{If:s6}=Ra.Components,bg=500,l6=30,Se=class t extends Ra.Class{constructor(){super(...arguments),this.lastLatexProp="",this.wasFocusedLastUpdate=!1}template(){return Ra.createElement("div",{class:Ra.const("dcg-mq-container")},Ra.createElement(s6,{predicate:()=>this.getPlaceholder().trim().length>0},()=>Ra.createElement("span",{class:Ra.const("dcg-mq-placeholder")},Ra.createElement(Te,{config:()=>this.props.config(),latex:()=>this.getPlaceholder()}))),Ra.createElement("div",{class:()=>({"dcg-math-field":!0,"dcg-no-fadeout":this.props.noFadeout&&this.props.noFadeout(),"dcg-invalid":this.props.hasError(),"dcg-focus":this.props.isFocused()}),didMount:e=>this.didMountMathquill(e),"data-dcg-label":()=>this.props.dataLabelAttributeValue?this.props.dataLabelAttributeValue():void 0}))}didMount(){this.children.length===1&&this.didMountMathquill(this.findRootNode())}willUnmount(){this.$mathField.off(".view"),this.mathField=void 0}getPlaceholder(){return!this.props.placeholder||this.props.isFocused()||this.props.latex()?"":this.props.placeholder()}didMountMathquill(e){this.cachedConfig=this.getCacheableMQConfig();let i=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.cachedConfig),{handlers:{reflow:r=>{this.props.onReflow&&this.mathField&&this.props.onReflow(r)}},onCut:()=>{this.mathField&&this.props.onUserChangedLatex(this.mathField.latex())},onPaste:()=>{this.mathField&&this.props.onUserChangedLatex(this.mathField.latex())},overrideTypedText:r=>{this.mathField&&this.viewCanAcceptText(r)&&(this.props.onUserTypedText?this.props.onUserTypedText(r):(this.mathField.typedText(r),this.props.onUserChangedLatex(this.mathField.latex())))},overrideKeystroke:(r,o)=>{if(r==="Backspace"&&o.preventDefault(),!this.mathField)return;if(r==="Spacebar"&&this.props.disableSpace&&this.props.disableSpace())return o.preventDefault();let n=be(o);if(n==="Up"||n==="Down"||n==="Left"||n==="Right"||n==="Esc"){let a=[];o.ctrlKey&&a.push("Ctrl"),o.metaKey&&a.push("Meta"),o.altKey&&a.push("Alt"),o.shiftKey&&a.push("Shift"),a.length?(a.push(n),r=a.join("-")):r=n}this.props.onUserPressedKey?this.props.onUserPressedKey(r,o):(this.mathField.keystroke(r,o),this.props.onUserChangedLatex(this.mathField.latex())),this.maybeTriggerOnSelectionChange()}});this.props.needsSystemKeypad&&this.props.needsSystemKeypad()&&(i.substituteTextarea=()=>{let r=document.createElement("textarea");return r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","none"),r.setAttribute("spellcheck","false"),r.setAttribute("autocomplete","off"),r}),this.props.tokenController&&(this.mathquillTokenHelper=new mg(this.props.tokenController(),e,!1)),this.$mathField=H(e),this.mathField=hl.MathField(e,i),e._mqMathFieldInstance=this.mathField,e._mqViewInstance=this,this.$mathField.on("focusin.view focusout.view",r=>this.onFocusEvent(r)).on("paste.view",r=>this.onPasteEvent(r)),!Lx&&(od||Ax)&&this.$mathField.on("keypress.view",r=>this.onKeypressEvent(r)),this.hookupMQTapTouch(),this.updateMathquill()}getCacheableMQConfig(){let e=__dcg_shared_module_exports__['a']({},this.props.config());return this.props.capExpressionSize()&&(e.maxDepth=l6),e}didUpdate(){this.updateMathquill()}updateMathquill(){var e;this.updateMathquillConfig(),this.updateMathquillAria(),this.updateMathquillLatex(),this.updateMathquillFocused(),this.updateMathquillPostLabel(),(e=this.mathquillTokenHelper)==null||e.updateTokens(this.props.latex())}onFocusEvent(e){let i=this.isFocused();i!==this.shouldBeFocused()&&this.props.onFocusedChanged(i,e)}onPasteEvent(e){let i="",r=window.clipboardData,o=e.originalEvent;r&&r.getData?i=r.getData("Text"):o&&o.clipboardData&&o.clipboardData.getData&&(i=o.clipboardData.getData("text/plain"));var n=this.viewCanAcceptText(i);return!n&&this.props.onExpressionSizeExceeded&&this.props.onExpressionSizeExceeded(),n}viewCanAcceptText(e){return t.canAcceptText(this.mathField,this.props.capExpressionSize(),e)}static canAcceptText(e,i,r){if(!e)return!1;if(!i)return!0;let o=e.latex();return fg(o)+fg(r)<=bg}onKeypressEvent(e){if(e.stopPropagation(),e.preventDefault(),!!this.mathField){var i=e.key&&e.key.length===1?e.key:void 0;i&&this.viewCanAcceptText(i)&&(this.props.onUserTypedText?this.props.onUserTypedText(i):(this.mathField.typedText(i),this.props.onUserChangedLatex(this.mathField.latex())))}}hookupMQTapTouch(){this.$mathField.on("dcg-tapstart.view",()=>{let e="dcg-tapend.mathquill-selection-change";H(document).on(e,()=>{this.maybeTriggerOnSelectionChange(),H(document).off(e)})}),this.$mathField.on("dcg-tap.view",e=>{let i=e;if(i.device!=="touch"||i.target.closest(".dcg-mq-ignore-mousedown")||!this.mathField)return;let r=i.changedTouches[0];this.mathField.clickAt(r.clientX,r.clientY,r.target),this.isFocused()||this.mathField.focus();let o;setTimeout(function(){o=Date.now()},0),this.mathField.ignoreNextMousedown(function(){return o===void 0?!0:Date.now()-o<500})})}updateMathquillConfig(){if(!this.mathField)return;let e=this.getCacheableMQConfig();__dcg_shared_module_exports__['Ra'](e,this.cachedConfig)||(this.cachedConfig=e,this.mathField.config(e))}updateMathquillAria(){if(!this.mathField)return;let e=this.props.getAriaLabel();e!==this.mathField.getAriaLabel()&&this.mathField.setAriaLabel(e)}updateMathquillPostLabel(){this.mathField&&this.mathField.setAriaPostLabel(this.props.getAriaPostLabel(),this.props.hasError()?5e3:1e3)}updateMathquillLatex(){let e=this.props.latex();this.mathField&&this.lastLatexProp!==e&&(this.props.capExpressionSize()&&fg(e)>bg||(this.lastLatexProp=e,this.mathField.latex()!==e&&this.mathField.latex(e)))}updateMathquillFocused(){if(!this.mathField)return;let e=this.isFocused(),i=this.shouldBeFocused();i&&i!==this.wasFocusedLastUpdate&&this.props.selectOnFocus&&this.props.selectOnFocus()&&this.mathField.select(),this.wasFocusedLastUpdate=i,e!==i&&(i?this.mathField.focus():this.mathField.blur())}isFocused(){return!!(document.activeElement&&this.$mathField[0].contains(document.activeElement))}shouldBeFocused(){return this.props.isFocused()}maybeTriggerOnSelectionChange(){let e=this.props.onSelectionChanged;if(!e||!this.mathField)return;let i=this.mathField.selection();__dcg_shared_module_exports__['Ra'](i,this.lastSelection)||(this.lastSelection=i,e(i))}static getFocusedMathquill(){if(!document.activeElement)return;let e=document.activeElement.closest(".dcg-mq-editable-field");if(e)return e._mqMathFieldInstance}static getMQViewInstance(e){let i=e.el();if(i)return i._mqViewInstance}static applyArrowKeyAndReturnIfWasAtBounds(e,i,r){var o=e.selection();let n=o.startIndex===0&&o.endIndex===o.latex.length;if((i==="Up"||i==="Down")&&n)return e.keystroke(i,r),!0;e.keystroke(i,r);var a=e.selection(),s=a.latex!==o.latex||a.startIndex!==o.startIndex||a.endIndex!==o.endIndex;return!s}static simulateKeypress(e,i){var r=t.getMQViewInstance(e);r&&(r.props.onUserPressedKey?r.props.onUserPressedKey(i):(e.keystroke(i),r.props.onUserChangedLatex(e.latex())),r.maybeTriggerOnSelectionChange())}static simulateUserChangedLatex(e){var i=t.getMQViewInstance(e);i&&i.mathField&&i.props.onUserChangedLatex(i.mathField.latex())}static handleKeystrokeAndDecideIfSpecialEvent(e,i,r){return i==="Enter"||i==="Delete"&&e.latex()===""||i==="Backspace"&&e.latex()===""?!0:i==="Up"||i==="Down"||i==="Left"||i==="Right"?t.applyArrowKeyAndReturnIfWasAtBounds(e,i,r):(e.keystroke(i,r),!1)}};var{If:c6,Input:d6,For:V_,Switch:p6,IfElse:u6}=ai.Components;function h6(t,e){return e?e.getPOIById(t):null}function Hp(t,e){return 1e3*(t.pixelsToMath.mapX(t.mathToPixels.mapX(e)+.5)-t.pixelsToMath.mapX(t.mathToPixels.mapX(e)-.5))}function EC(t,e){return 1e3*(t.pixelsToMath.mapY(t.mathToPixels.mapY(e)+.5)-t.pixelsToMath.mapY(t.mathToPixels.mapY(e)-.5))}function g6(t,{x:e,y:i}){let r=Hp(t,e),o=EC(t,i);return{xscale:r,yscale:o}}function m6(t,e){var i,r=!1;let o="",n="";if(t.type==="poi"){let u=t.poi,{xscale:g,yscale:m}=g6(e,u);i=u.getLabel();let w=u.getGraphMode(),C;var a=u.type===1007&&u.getCompiledFunction();if(a){var s=w===1,l=s?u.y:u.x;if(C=__dcg_shared_module_exports__['Za'](l,g,m,a),s){var c=C[0];C[0]=C[1],C[1]=c}}else C=[__dcg_shared_module_exports__['Ya'](u.x,g),__dcg_shared_module_exports__['Ya'](u.y,m)];r=!isFinite(C[1].value),o=C[0].superscript?C[0].mantissa+"^{"+C[0].superscript+"}":C[0].string,n=C[1].superscript?C[1].mantissa+"^{"+C[1].superscript+"}":C[1].string,o==="undefined"&&(o="\\mathrm{undefined}"),n==="undefined"&&(n="\\mathrm{undefined}")}else i=t.text;var p=i&&__dcg_shared_module_exports__['ud'](i);return i?p==="latex"?{is_hole:r,type:"latex",text:i.substr(1,i.length-2)}:p==="text"?{is_hole:r,type:"text",text:i}:{is_hole:r,type:"mixed",text:i}:t.type==="poi"?t.poi.hasEditableLabel()?{is_hole:r,type:"text",text:""}:{is_hole:r,type:"latex",text:"\\left("+o+",\\space "+n+"\\right)"}:{is_hole:r,type:"text",text:"?"}}function L_(t,e,i){let r=t.s("graphing-calculator-label-poi-unknown"),o=e.getProjection();return!o||!o.viewport||i&&(r=DC(t,i.x,i.y)),r}var P_=4,bI=class extends ai.Class{getClassName(){var e;return((e=this.props.point())==null?void 0:e.y)!==void 0?"dcg-audio-trace-line dcg-audio-trace-line--horizontal":"dcg-audio-trace-line"}getTraceCoord(){var o,n;let e=(o=this.props.point())==null?void 0:o.x,i=(n=this.props.point())==null?void 0:n.y,r=this.props.projection();if(e!==void 0)return`${Math.round(10*r.mapx(e))/10-P_/2}px`;if(i!==void 0)return`${Math.round(10*r.mapy(i))/10-P_/2}px`}getStyle(){var r;let e=this.getTraceCoord(),i=(r=this.props.point())==null?void 0:r.color;return{"--dcg-trace-coord":e,"--dcg-trace-color":i}}template(){return ai.createElement("div",{class:this.bindFn(this.getClassName),style:this.bindFn(this.getStyle)})}},yg=class extends ai.Class{constructor(){super(...arguments),this.labelsDirty=!1,this.traceLinePt=void 0}init(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.cachedLabelDict={},this.cachedLabelOrder=[],this.hoveredPOI=void 0,this.openedPOI2Sketch={},this.takingScreenshot=!1}template(){return ai.createElement("div",{class:ai.const("dcg-graph-outer"),style:this.const({"z-index":0}),didMount:this.bindFn(this.didMountRoot)},ai.createElement(V_,{each:()=>this.cachedLabelOrder},ai.createElement("div",null,e=>ai.createElement("div",{class:()=>this.getLabelClasses(e),style:()=>this.getLabelStyles(e),didMount:i=>this.linkLabelContainerNode(e,i)},ai.createElement("div",{class:ai.const("dcg-pt"),style:()=>this.getDotStyles(e)}),ai.createElement("div",{class:ai.const("dcg-label"),didMount:i=>this.linkLabelDOMNode(e,i)},this.renderLabelContent(e))))),ai.createElement(c6,{predicate:()=>!0},()=>ai.createElement(bI,{point:()=>this.traceLinePt,projection:()=>this.grapher.getProjection()})))}setTraceLine(e){__dcg_shared_module_exports__['Ra'](e,this.traceLinePt)||(this.traceLinePt=e,this.update())}renderLabelContent(e){return ai.createElement(p6,{key:()=>this.getLabelContent(e).type},i=>i==="text"?ai.createElement("span",{class:ai.const("dcg-label-raw-text")},()=>this.getLabelContent(e).text):i==="latex"?ai.createElement(Te,{latex:()=>this.getLabelContent(e).text,config:this.bindFn(this.getMQConfig)}):i==="mixed"?ai.createElement(V_,{each:()=>__dcg_shared_module_exports__['vd'](this.getLabelContent(e).text),key:(r,o)=>`${r}${o}`},ai.createElement("span",null,r=>u6(()=>__dcg_shared_module_exports__['ud'](r)==="latex",{true:()=>ai.createElement(Te,{latex:()=>r.substr(1,r.length-2),config:this.bindFn(this.getMQConfig)}),false:()=>ai.createElement("span",{class:ai.const("dcg-label-raw-text")},()=>r)}))):i==="MATH"?ai.createElement("div",{class:()=>({"dcg-editable-label-border":!0,"dcg-do-not-blur":!0,"dcg-focus":this.shouldEditableLabelBeFocused(e),"dcg-empty-label":this.getEditableLabelText(e).trim().length===0}),style:()=>({"border-color":__dcg_shared_module_exports__['ld'](this.getEditableLabelTextColor(e),.3)})},ai.createElement(Se,{latex:()=>this.getEditableLabelText(e),placeholder:()=>"",isFocused:()=>this.shouldEditableLabelBeFocused(e),capExpressionSize:()=>!!this.controller.getGraphSettings().config.capExpressionSize,selectOnFocus:ai.const(!1),config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.controller.s("graphing-calculator-narration-editable-point-label-at-coordinates",{coordinates:L_(this.controller,this.grapher,this.cachedLabelDict[e])}),getAriaPostLabel:this.const(""),onUserChangedLatex:r=>this.onLabelInput(r,e),onExpressionSizeExceeded:()=>this.controller.dispatch({type:"expression-size-exceeded"}),onFocusedChanged:r=>this.onEditableLabelFocusChange(r,e),hasError:this.const(!1),noFadeout:this.const(!0),needsSystemKeypad:()=>!this.controller.isKeypadEnabled()})):ai.createElement("div",{class:()=>({"dcg-resizing-text-input-container":!0,"dcg-editable-label-border":!0,"dcg-focus":this.shouldEditableLabelBeFocused(e),"dcg-empty-label":this.getEditableLabelText(e).trim().length===0}),style:()=>({"border-color":__dcg_shared_module_exports__['ld'](this.getEditableLabelTextColor(e),.3)}),onScroll:r=>{r.target&&(r.target.scrollLeft=0)}},ai.createElement(d6,{"aria-label":()=>this.controller.s("graphing-calculator-narration-editable-point-label-at-coordinates",{coordinates:L_(this.controller,this.grapher,this.cachedLabelDict[e])}),onInput:r=>this.onLabelInput(r,e),value:()=>this.getEditableLabelText(e),onFocus:()=>this.onEditableLabelFocusChange(!0,e),onBlur:()=>this.onEditableLabelFocusChange(!1,e)}),ai.createElement("span",{class:ai.const("dcg-text-input-content")},()=>this.getEditableLabelText(e)||" ")))}getSketchIdFromLabelId(e){var i=this.cachedLabelDict[e];if(i)return i.sketchId}getEditableLabelTextColor(e){let i=this.getSketchIdFromLabelId(e);if(!i)return"#000";let r=this.controller.getItemModel(i);return!r||r.type!=="expression"?"#000":Ds(r)}onEditableLabelFocusChange(e,i){let r=this.getSketchIdFromLabelId(i);r&&(e?this.controller.dispatch({type:"set-focus-location",location:{type:"editable-label",id:r}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"editable-label",id:r}}),this.update())}shouldEditableLabelBeFocused(e){let i=this.getSketchIdFromLabelId(e),r=this.controller.getFocusLocation();return!(!r||r.type!=="editable-label"||!i||r.id!==i)}onLabelInput(e,i){let r=this.getSketchIdFromLabelId(i);if(!r)return;let o=this.controller.getItemModel(r);if(!o||o.type!=="expression")return;let n=e;this.controller.getItemEditableLabelMode(r)==="MATH"&&n.length>0&&(n="`"+n+"`"),this.controller.dispatch({type:"set-item-label",id:r,label:n})}getEditableLabelText(e){let i=this.getSketchIdFromLabelId(e);if(!i)return"";let r=this.controller.getItemModel(i);return!r||r.type!=="expression"?"":this.controller.getItemEditableLabelMode(i)==="MATH"?r.label.substr(1,r.label.length-2):r.label}linkLabelDOMNode(e,i){var r=this.cachedLabelDict[e];r&&(r.labelDOM=i)}linkLabelContainerNode(e,i){var r=this.cachedLabelDict[e];r&&(r.containerDOM=i)}getLabelClasses(e){var i=this.cachedLabelDict[e];return i?i.classes:{}}getLabelStyles(e){var i=this.cachedLabelDict[e];return i?i.styles:{}}getDotStyles(e){var i=this.cachedLabelDict[e];return i?i.dotStyles:{}}getLabelContent(e){var i=this.cachedLabelDict[e];if(i){let r=this.getSketchIdFromLabelId(e);if(!r)return{is_hole:!1,type:"text",text:""};let o=this.controller.getItemEditableLabelMode(r);return i.classes["dcg-editable-label"]&&o!==void 0&&o!=="NONE"?{is_hole:!1,type:o,text:""}:i.content}return{is_hole:!1,type:"text",text:""}}didMountRoot(e){this.node=e}computeHoveredLabel(e,i){var r;this.hoveredPOI?this.isOpenPOI(this.hoveredPOI)?this.grapher.setLayerClass("hoveredPOI","dcg-mouse-over-opened-poi"):(r=this.computeLabel(e,{poi:this.hoveredPOI,type:"poi"},i,"hovered"),this.grapher.setLayerClass("hoveredPOI","dcg-mouse-over-closed-poi")):this.grapher.setLayerClass("hoveredPOI",void 0);var o=this.getHoveredInteractiveLabel();o&&!o.bareLabel?this.grapher.setLayerClass("interactiveLabel","dcg-mouse-over-opened-poi"):this.grapher.setLayerClass("interactiveLabel",void 0),r&&this.saveLabelToCache(r)}computeTraceLabel(e,i){if(this.traceInfo){var r=this.traceInfo.pt;if(r){var o=new Lc(r.x,r.y,1007,this.traceInfo.branchInfo.sketch,this.traceInfo.branchInfo.branch,0),n=this.computeLabel(e,{poi:o,type:"poi"},i,"trace");n&&this.saveLabelToCache(n)}}}computeLabel(e,i,r,o){let{projection:n}=e,a=i.type==="poi"?i.poi.id+"":i.id;o==="trace"&&(a="*trace*");let s=i.poi,l=n.mapx(s.x),c=n.mapy(s.y),p=l,u=c;if(i.type!=="poi"&&(l=0,c=0),n.coordsAreOnscreen(l,c,20)){if(this.isHiddenInteractiveLabel(s))return;let g=!1,m,w=s.sketch,C=w&&w.branches[0];C&&(g=!!("nakedLabel"in C&&C.nakedLabel),m="labelOrientation"in C?C.labelOrientation:void 0);let S=w.id,k=this.controller.getItemModel(S);if(s.hasEditableLabel()&&k&&k.type==="expression"&&!En(k))return;let M=m6(i,n),I=s.pointIdxOnBranch,E=s.getLabelSize();this.grapher.settings.config.projectorMode&&(E*=1.2),Array.isArray(E)&&(E=E[I]);let T=s.getLabelRotation();Array.isArray(T)&&(T=T[I]);let A=s.getPointOpacity()*this.controller.getGeoModel().getToolFadeOpacity(S),G=!!s.getTextOutline(),_=s.isPersistent(),P=s.isAttachedToPlottedPoint(),N=s.hasInteractiveLabel(),W=s.hasEditableLabel()&&!this.takingScreenshot,X=!!(k&&k.type==="expression"&&Hn(k)),q=this.grapher.clickableObjectsLayer.shouldDrawPressed(S,s.pointIdxOnBranch),B=this.grapher.clickableObjectsLayer.shouldDrawHovered(e,S,s.pointIdxOnBranch),J=this.grapher.clickableObjectsLayer.isKeyboardFocused(S,s.pointIdxOnBranch),f=w.color;if(q){let Ke=__dcg_shared_module_exports__['nb'](f);Ke.l>.2?Ke.l-=.2:Ke.l+=.1,f=Ke.toString()}else if(B){let Ke=__dcg_shared_module_exports__['nb'](f);Ke.l>.2?Ke.l-=.1:Ke.l+=.2,f=Ke.toString()}let O=!_,R=!!P;N&&(R=!0,O=!0),o==="trace"&&(R=!1,O=!0);let re=r[a],ie=re&&re.labelDOM,ve=re&&re.containerDOM,ae=re&&re.width,oe=re&&re.height,Z=re&&re.orientation,Q={"dcg-poi-label":!0,"dcg-tracept":o==="trace","dcg-opened":o==="opened","dcg-hole":M.is_hole,"dcg-show-border":O,"dcg-hide-dot":R,"dcg-naked-label":g,"dcg-editable-label":W,"dcg-has-outline":G,"dcg-focus":J,"dcg-underlined-label":!!(X&&k&&k.type==="expression"&&k.hidden)};isFinite(E)||(E=1);let fe=Math.round(E*1100)/10,ye={left:l+"px",top:c+"px","font-size":fe+"%"};T&&!this.takingScreenshot&&(ye.transform=`rotate(${T}rad)`),_&&f&&(ye.color=f),ye.opacity=`${Math.min(.99,A)}`;let Re={};return o==="trace"&&(Re["background-color"]=f,Re["border-color"]=f),{id:a,sketchId:S,poi:s,x:s.x,y:s.y,screenX:l,screenY:c,top:u,left:p,width:ae,height:oe,labelDOM:ie,containerDOM:ve,forcedOrientation:m,isNakedLabel:g,isClickable:X,orientation:Z,rotation:T,classes:Q,styles:ye,dotStyles:Re,content:M,hasBorder:s.hasEditableLabel(),opacity:A,hasOutline:G||s.hasEditableLabel(),objectSpec:i.type!=="poi"?i.type==="angle"?{type:i.type,segments:[n.mapx(i.segments[0]),n.mapy(i.segments[1]),i.segments[2],i.segments[3]]}:{type:i.type,segments:n.map_xy_pairs(i.segments)}:void 0}}}computeAllLabels(e,i){var r={},o,n,a=this.grapher.graphSketches;this.grapher.getSketchOrder().forEach(c=>{var p=a[c];if(p){var u=p.labels;if(u.length)for(var g=0;g<u.length;g++){let m=u[g],w=this.computeLabel(e,m,i,"opened");w&&(Array.isArray(p.color)&&(w.styles.color=p.color[g]),this.saveLabelToCache(w))}}});var s={};for(o in this.openedPOI2Sketch){var l=h6(o,a[this.openedPOI2Sketch[o]]);l&&(s[o]=l.sketch.id,n=this.computeLabel(e,{poi:l,type:"poi"},i,"opened"),n&&this.saveLabelToCache(n))}return this.openedPOI2Sketch=s,r}saveLabelToCache(e){var i=e.id;this.cachedLabelDict[i]||this.cachedLabelOrder.push(i),this.cachedLabelDict[i]=e}markLabelsDirty(){this.labelsDirty=!0}getInteractiveLabelUnderPoint(e){let i;for(var r=this.cachedLabelOrder.length-1;r>=0;r--){let o=this.cachedLabelOrder[r],n=this.cachedLabelDict[o];if(!n||!n.width||!n.height)continue;let a=n.screenX,s=n.screenY,{left:l,top:c,width:p,height:u}=n;if(p>0&&u>0&&e.x>a+l&&e.x<a+l+p&&e.y>s+c&&e.y<s+c+u){let g=this.getSketchIdFromLabelId(o);if(g===void 0)continue;let m=this.controller.getItemModel(g);if(!m||m.type!=="expression")continue;if(Oh(m))return{type:"editable",model:m};!i&&KP(m)?i={type:"draggable",model:m,label:{x:n.x,y:n.y}}:!i&&n.isClickable&&(i={type:"clickable",model:m,poi:n.poi})}}return i}positionLabels(e,i,r,o,n){var a=!this.labelsDirty;this.labelsDirty=!1;var s=[];i.forEach(u=>{var g=r[u];if(!g||!g.labelDOM)return;let m,w=this.getSketchIdFromLabelId(u);if(w!==void 0){let A=this.grapher.getGraphSketch(w);A&&A.branches&&(m=A.branches[0].pointSize)}(m===void 0||typeof m!="number"||m<0)&&(m=9);let S=(this.grapher.settings.config.projectorMode?14:10)*m/9;var k=g.screenX,M=g.screenY,I=g.labelDOM.clientWidth,E=g.labelDOM.clientHeight;if(!(I>0&&E>0))return;let T=0;this.takingScreenshot&&g.hasBorder&&(T=5),s.push({renderedLabel:g,pt_x:k,pt_y:M,pt_radius:S+T,rotation:g.rotation,nakedLabel:g.isNakedLabel,width:I,height:E,keepOrientation:a,priorOrientation:g.orientation,enforceOrientation:g.forcedOrientation})});var l=k_(e,o,n),c=s.map(u=>{if(u.renderedLabel.objectSpec){if(u.renderedLabel.objectSpec.type==="segment")return T_(l,{pt_x1:u.renderedLabel.objectSpec.segments[0],pt_y1:u.renderedLabel.objectSpec.segments[1],pt_x2:u.renderedLabel.objectSpec.segments[2],pt_y2:u.renderedLabel.objectSpec.segments[3],pt_radius:10,width:u.width,height:u.height,keepOrientation:u.keepOrientation,priorOrientation:u.priorOrientation||""});if(u.renderedLabel.objectSpec.type==="polygon")return G_(l,{path:u.renderedLabel.objectSpec.segments,pt_radius:10,width:u.width,height:u.height,keepOrientation:u.keepOrientation,priorOrientation:u.priorOrientation||""});if(u.renderedLabel.objectSpec.type==="angle"){let g=u.renderedLabel.objectSpec.segments,m=this.grapher.settings.config.projectorMode?30:20;return M_(l,{pt_x:g[0],pt_y:g[1],startAngle:g[2],deltaAngle:g[3],isRightAngle:iC(g[3]),radius:m,pt_radius:10,width:u.width,height:u.height,keepOrientation:u.keepOrientation,priorOrientation:u.priorOrientation||""})}}else return I_(l,u);return[]}),p=E_(c);p.forEach(function(u,g){var m=s[g].renderedLabel;m.orientation=u.orientation;let w=u.left-u.pt_x,C=u.top-u.pt_y;m.left=w,m.top=C,m.width=u.width,m.height=u.height;var S=m.labelDOM;if(S){S.style.transform=u.transform,S.setAttribute("dcg-label-orientation",u.orientation);var k=m.containerDOM;k&&(k.style.left=u.pt_x+"px",k.style.top=u.pt_y+"px"),setTimeout(()=>S.classList.add("dcg-enable-transition"),1)}})}copyToCtx(e){dn(e,"labels");var i=this.node.getBoundingClientRect();this.cachedLabelOrder.forEach(r=>{var o=this.cachedLabelDict[r];if(!o)return;var n=o.labelDOM;if(!n)return;let a={pointCenterX:o.screenX,pointCenterY:o.screenY,hasOutline:!!o.hasOutline,hasBorder:!!o.hasBorder};var s=this.computeRotatedCenter(a.pointCenterX,a.pointCenterY,o.rotation);let l=Ev(n,a);e.save(),e.globalAlpha=o.opacity,e.rotate(o.rotation),e.translate(s.x-i.left,s.y-i.top),Dv(l,e),e.restore()}),pn(e)}computeRotatedCenter(e,i,r){var o=Math.cos(-r),n=Math.sin(-r),a=e*o-i*n,s=i*o+e*n;return{x:a,y:s}}drawForScreenshot(e,i,r,o){this.takingScreenshot=!0,this.redraw(e,r,o),this.takingScreenshot=!1,this.copyToCtx(i)}redraw(e,i,r){let{ctx:o}=e;var n=this.cachedLabelDict;this.cachedLabelDict={},this.cachedLabelOrder=[],this.computeAllLabels(e,n),this.computeHoveredLabel(e,n),this.computeTraceLabel(e,n),this.update(),this.positionLabels(o,this.cachedLabelOrder,this.cachedLabelDict,i,r)}clearOpenedPOI(){this.openedPOI2Sketch={}}closePOI(e){delete this.openedPOI2Sketch[e.id]}openPOI(e){this.openedPOI2Sketch[e.id]=e.sketch.id}isOpenPOI(e){return this.openedPOI2Sketch.hasOwnProperty(e.id)}isOpenInteractiveLabel(e){return this.isOpenPOI(e)?e.hasInteractiveLabel():!1}isHiddenInteractiveLabel(e){return!e||!e.hasInteractiveLabel()?!1:!this.isOpenPOI(e)&&this.getHoveredPOI()!==e}setHoveredPOI(e){this.hoveredPOI=e}getHoveredPOI(){return this.hoveredPOI}getHoveredInteractiveLabel(){var e=this.getHoveredPOI();if(e&&e.hasInteractiveLabel())return e}setTraceInfo(e){this.traceInfo=e}isTracing(){return!!this.traceInfo}getTraceInfo(){return this.traceInfo}getMQConfig(){return this.controller.getMathquillConfig({})}};function Si(t,e){if(!t)return"";let{controller:i}=t;if(t.type==="expression"){let r=i.isItemSecret(t.id);switch(e){case"describe":return r?i.s("graphing-calculator-narration-describe-secret-expression",{index:t.secretIndex}):i.s("graphing-calculator-narration-describe-expression",{index:t.displayIndex});case"delete":return r?i.s("graphing-calculator-narration-delete-secret-expression",{index:t.secretIndex}):i.s("graphing-calculator-narration-delete-expression",{index:t.displayIndex});case"duplicate":return r?i.s("graphing-calculator-narration-duplicate-secret-expression",{index:t.secretIndex}):i.s("graphing-calculator-narration-duplicate-expression",{index:t.displayIndex});case"show":return r?i.s("graphing-calculator-narration-show-secret-expression",{index:t.secretIndex}):i.s("graphing-calculator-narration-show-expression",{index:t.displayIndex});case"hide":return r?i.s("graphing-calculator-narration-hide-secret-expression",{index:t.secretIndex}):i.s("graphing-calculator-narration-hide-expression",{index:t.displayIndex});case"show-options":return r?i.s("graphing-calculator-narration-show-options-secret-expression",{index:t.secretIndex}):i.s("graphing-calculator-narration-show-options-expression",{index:t.displayIndex});case"hide-options":return r?i.s("graphing-calculator-narration-hide-options-secret-expression",{index:t.secretIndex}):i.s("graphing-calculator-narration-hide-options-expression",{index:t.displayIndex});case"create_table":return r?i.s("graphing-calculator-narration-create-table-secret-expression",{index:t.secretIndex}):i.s("graphing-calculator-narration-create-table-expression",{index:t.displayIndex});case"rename":return r?i.s("graphing-calculator-narration-rename-secret-expression",{index:t.secretIndex}):i.s("graphing-calculator-narration-rename-expression",{index:t.displayIndex});case"mute":return r?i.s("graphing-calculator-narration-mute-secret-expression",{index:t.secretIndex}):i.s("graphing-calculator-narration-mute-expression",{index:t.displayIndex});case"unmute":return r?i.s("graphing-calculator-narration-unmute-secret-expression",{index:t.secretIndex}):i.s("graphing-calculator-narration-unmute-expression",{index:t.displayIndex})}}if(t.type==="image")switch(e){case"describe":return i.s("graphing-calculator-narration-describe-image",{index:t.displayIndex});case"delete":return i.s("graphing-calculator-narration-delete-image",{index:t.displayIndex});case"duplicate":return i.s("graphing-calculator-narration-duplicate-image",{index:t.displayIndex});case"show":return i.s("graphing-calculator-narration-show-image",{index:t.displayIndex});case"hide":return i.s("graphing-calculator-narration-hide-image",{index:t.displayIndex});case"show-options":return i.s("graphing-calculator-narration-show-options-image",{index:t.displayIndex});case"hide-options":return i.s("graphing-calculator-narration-hide-options-image",{index:t.displayIndex});case"edit_title":return i.s("graphing-calculator-narration-edit-image-title",{index:t.displayIndex})}if(t.type==="text")switch(e){case"describe":return i.s("graphing-calculator-narration-describe-text",{index:t.displayIndex});case"delete":return i.s("graphing-calculator-narration-delete-text",{index:t.displayIndex});case"duplicate":return i.s("graphing-calculator-narration-duplicate-text",{index:t.displayIndex});case"show":return i.s("graphing-calculator-narration-show-text",{index:t.displayIndex});case"hide":return i.s("graphing-calculator-narration-hide-text",{index:t.displayIndex});case"edit_title":return i.s("graphing-calculator-narration-edit-text-title",{index:t.displayIndex})}if(t.type==="table")switch(e){case"describe":return i.s("graphing-calculator-narration-describe-table",{index:t.displayIndex});case"delete":return i.s("graphing-calculator-narration-delete-table",{index:t.displayIndex});case"duplicate":return i.s("graphing-calculator-narration-duplicate-table",{index:t.displayIndex});case"show":return i.s("graphing-calculator-narration-show-table",{index:t.displayIndex});case"hide":return i.s("graphing-calculator-narration-hide-table",{index:t.displayIndex});case"rename":return i.s("graphing-calculator-narration-rename-table",{index:t.displayIndex})}if(t.type==="folder"){let r=!!t.title;switch(e){case"describe":return r?i.s("graphing-calculator-narration-describe-folder-title",{folder:t.title}):i.s("graphing-calculator-narration-describe-folder-index",{index:t.displayIndex});case"collapse":return r?i.s("graphing-calculator-narration-collapse-folder-title",{folder:t.title}):i.s("graphing-calculator-narration-collapse-folder-index",{index:t.displayIndex});case"expand":return r?i.s("graphing-calculator-narration-expand-folder-title",{folder:t.title}):i.s("graphing-calculator-narration-expand-folder-index",{index:t.displayIndex});case"show":return r?i.s("graphing-calculator-narration-show-folder-title",{folder:t.title}):i.s("graphing-calculator-narration-show-folder-index",{index:t.displayIndex});case"hide":return r?i.s("graphing-calculator-narration-hide-folder-title",{folder:t.title}):i.s("graphing-calculator-narration-hide-folder-index",{index:t.displayIndex});case"duplicate":return r?i.s("graphing-calculator-narration-duplicate-folder-title",{folder:t.title}):i.s("graphing-calculator-narration-duplicate-folder-index",{index:t.displayIndex});case"delete":return r?i.s("graphing-calculator-narration-delete-folder-title",{folder:t.title}):i.s("graphing-calculator-narration-delete-folder-index",{index:t.displayIndex});case"edit_title":return i.s("graphing-calculator-narration-edit-folder-title",{index:t.displayIndex})}}switch(e){case"describe":return i.s("graphing-calculator-narration-describe");case"delete":return i.s("graphing-calculator-narration-delete");case"duplicate":return i.s("graphing-calculator-narration-duplicate");case"expand":return i.s("graphing-calculator-narration-expand");case"collapse":return i.s("graphing-calculator-narration-collapse");case"show":return i.s("graphing-calculator-narration-show");case"hide":return i.s("graphing-calculator-narration-hide");case"show-options":return i.s("graphing-calculator-narration-show-options");case"hide-options":return i.s("graphing-calculator-narration-hide-options");case"create_table":return i.s("graphing-calculator-narration-create-table");case"rename":return i.s("graphing-calculator-narration-rename");case"edit_title":return i.s("graphing-calculator-narration-edit-title");case"mute":return i.s("graphing-calculator-narration-mute");case"unmute":return i.s("graphing-calculator-narration-unmute");default:return e}}function eb(t,e,i={includeDetails:!0}){var a;if(!t)return e.s("graphing-calculator-narration-geometry-nothing-selected");let r=i.description?i.description:"";if(t.type!=="expression"){if(t.type==="image"){let s=r!==""?r:Si(t,"describe"),{x:l,y:c}=t.formula.dimensions;l&&c&&typeof l[0]=="number"&&typeof c[0]=="number"?r=e.s("graphing-calculator-narration-item-at-coordinates",{itemDescription:s,x:vi(e,l[0]),y:Ci(e,c[0])}):r=s}}else(!t.latex||!((a=t.formula)!=null&&a.typed_constant_value))&&(r=r!==""?r:Si(t,"describe"));let o=i.poi&&i.poi.sketch.showPOI&&i.poi.type==="static-labeled-point";!r&&Sl(t)?(r=f6(t,e,i),r=y6(r,t,e,i)):i.includeDetails&&i.poi&&!o&&(r=e.s("graphing-calculator-narration-item-at-coordinates",{itemDescription:r,x:vi(e,i.poi.x),y:Ci(e,i.poi.y)}));let n=r;return i.includeSelectionState&&!Sh(t)&&!o&&(n=xI(n,t,e)),Sh(t)&&(n=e.s("shared-calculator-narration-item-clickable",{item:n})),n}function f6(t,e,i={includeDetails:!0}){let{value:r,valueType:o}=Vc(t,i);if(!r)return e.s("shared-calculator-narration-item-unknown");let n=[];if(__dcg_shared_module_exports__['aa'](o))n=S_(t,e,i);else switch(o){case __dcg_shared_module_exports__['s']:n=yC(t,e,i);break;case __dcg_shared_module_exports__['E']:n=y_(t,e,i);break;case __dcg_shared_module_exports__['G']:n=x_(t,e,i);break;case __dcg_shared_module_exports__['A']:n=w_(t,e,i);break;case __dcg_shared_module_exports__['I']:case __dcg_shared_module_exports__['K']:case __dcg_shared_module_exports__['C']:case __dcg_shared_module_exports__['S']:n=v_(t,e,i);break;case __dcg_shared_module_exports__['M']:case __dcg_shared_module_exports__['O']:n=C_(t,e,i);break;default:n.push(e.s("shared-calculator-narration-item-unknown"))}let a=n.join(" "),s=t.formula.geometry&&t.formula.geometry.call;return s&&(a=b6(a,s,e)),a}function b6(t,e,i){let r,o=e.parents;if(__dcg_shared_module_exports__['$b'](e.symbol))r=e.symbol;else if(e.symbol==="apply"){let n=o[0],a=n?i.getItemsByIdentifier(n[0]):[];for(let s of a){if(s.type!=="expression")continue;let l=s.formula.geometry;if(!(!l||!l.call)){r=l.call.symbol;break}}}else return t;switch(r){case"dilate":return i.s("graphing-calculator-narration-geometry-dilated-item",{item:t});case"rotate":return i.s("graphing-calculator-narration-geometry-rotated-item",{item:t});case"translate":return i.s("graphing-calculator-narration-geometry-translated-item",{item:t});case"reflect":return i.s("graphing-calculator-narration-geometry-reflected-item",{item:t});default:return i.s("graphing-calculator-narration-geometry-transformed-item",{item:t})}}function y6(t,e,i,r){var o,n;return r.listIndex!==void 0&&((n=(o=e.formula)==null?void 0:o.geometry)!=null&&n.valueType)&&__dcg_shared_module_exports__['aa'](e.formula.geometry.valueType)?i.s("graphing-calculator-narration-item-with-list-index",{listIndex:r.listIndex+1,item:t}):r.polygonEdge!==void 0?i.s("graphing-calculator-narration-geometry-edge-of-polygon",{polygonEdge:r.polygonEdge+1,item:t}):t}function xI(t,e,i){return(e&&Sn(e)?i.s("shared-calculator-narration-item-selected",{item:t}):i.s("shared-calculator-narration-item-unselected",{item:t})).trim()}function kC(t,e){let i=t[e];return Array.isArray(i)&&t.tableInfo?i[t.tableInfo.rowIndex]:i}var tb=class{constructor(e){this.grapher=e,this.renderedPointsIdOrder=[],this.renderedPoints={},this.speakThrottledAlert=__dcg_shared_module_exports__['Ma'](()=>{this.speakAriaAlert()},1e3,{leading:!0,trailing:!0})}redraw(e,i){let{ctx:r,projection:o}=e;var n=this.grapher.graphSketches,a=this.renderedPoints;this.renderedPoints={},this.renderedPointsIdOrder=[];let s=this.grapher.poiController.keyboardAttentionManager.getKeyboardAttention(),l=s==null?void 0:s.calcId,c=(s==null?void 0:s.listIndex)||0;var p=I=>{let E=!!s&&l===I.sketch.id&&c===I.listIndex;var T=this.processPOI(r,o,I,a[I.id],i,E);T&&(this.renderedPoints[I.id]=T,this.renderedPoints[I.id].poi=I,this.renderedPointsIdOrder.push(I.id))};this.grapher.getSketchOrder().forEach(I=>{var E=n[I];E&&(E.getMovablePoints().forEach(p),E.getStaticLabeledPoints().forEach(p))});var u=this.renderedPoints[this.hoveredPointId],g=this.renderedPoints[this.pressedPointId],m=u&&u.poi,w=g&&g.poi;m||this.setHoveredPointId(void 0),w||this.setPressedPointId(void 0);var C=w||m,S,k;C?(S=C.type==="movable-point"&&C.tableInfo&&C.tableInfo.dragX,k=C.type==="movable-point"&&C.tableInfo&&C.tableInfo.dragY,S&&k||!S&&!k?this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point"):S?this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point-ew"):this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point-ns")):this.grapher.setLayerClass("movablePoints",void 0);let M=this.getPOIUnderAttention();if(!M)this.lastAriaAlert=void 0;else{if(!this.renderedPoints[M.id])return;let E=this.getAriaAlert({id:M.id,lastAriaAlert:this.lastAriaAlert,includeUsageInstructions:!1});E!=null&&E.updated&&this.speakThrottledAlert()}}_clampedOpacity(e){return e<0?0:e>1?1:__dcg_shared_module_exports__['Wa'](e)?e:1}getAllRenderedObjects(e){return this.renderedPointsIdOrder.filter(i=>e?this.renderedPoints[i].type===e:!0).map(i=>this.renderedPoints[i])}getOrderedTabTargets(e){let i=[];return this.renderedPointsIdOrder.forEach(r=>{let o=this.renderedPoints[r];if(e&&o.type!==e||this.getTabIndex(r)===-1)return;let n=o.poi;i.push({calcId:n.sketch.id,listIndex:n.listIndex,polygonEdge:void 0,description:this.getAriaLabel(r)})}),i}drawForScreenshot(e,i,r,o){var n=this.grapher.graphSketches;for(let c in n){var a=n[c],s=a.branches[0],l;s.graphMode===4&&(l=s.pointOpacity),a.getMovablePoints().forEach(p=>{var u={screenX:i.mapx(p.x),screenY:i.mapy(p.y),color:p.color,pointOpacity:l,animationPercent:0};this.drawMovablePointOnCtx(e,p.sketch,u,r,o)})}}processPOI(e,i,r,o,n,a){var s=r.id,l=r.x,c=r.y,p=i.mapx(l),u=i.mapy(c),g=i.coordsAreOnscreen(p,u,20);if(!g&&!a)return;var m=r.sketch?this.grapher.controller.getItemModel(r.sketch.id):void 0,w=!!(m&&Sn(m));if(!(m&&this.grapher.controller.shouldIgnoreGraphInteractions(m)))return o||(r.type==="movable-point"?o={type:"movable",id:s,pointOnScreen:g,poi:r,projection:i,screenX,screenY,color:kC(r,"color"),pointOpacity:kC(r,"pointOpacity"),pointIsHovered:!1,pointIsPressed:!1,selected:w,lastHoverActionTime:0,animationPercent:0}:m&&m.type==="expression"&&m.label!==void 0&&m.showLabel&&qi(m)!=="NONE"?o={type:"draggable-label",id:s,pointOnScreen:g,selected:w,poi:r,projection:i,screenX,screenY}:o={type:"static",id:s,pointOnScreen:g,poi:r,projection:i,screenX,screenY,selected:w}),o.pointOnScreen=g,o.poi=r,o.projection=i,o.screenX=p,o.screenY=u,o.type==="movable"&&(o.color=kC(o.poi,"color"),o.pointOpacity=kC(o.poi,"pointOpacity"),o.selected=w,this.updateMovablePointAnimation(o,a),this.drawMovablePointOnCtx(e,o.poi.sketch,o,n)),o}drawMovablePointOnCtx(e,i,r,o,n){var w;var a;n?a=n:a=this.grapher.settings.config.projectorMode?13.5:10.5,i.tokenSelected||(i.tokenHovered?a*=Yh:i.showHighlight&&(a*=1.2));var s=Array.isArray(r.color)?r.color[0]:r.color,l=r.screenX,c=r.screenY,p=r.animationPercent||0;o.push({left:l-a,right:l+a,top:c-a,bottom:c+a}),e.save();var u=e.globalAlpha;let g=this.shouldDrawGhosted(i.id)?Qv.IS_GHOSTED:Rf;var m=this._clampedOpacity(g*r.pointOpacity);m*=(w=this.grapher.controller.getGeoModel().getToolFadeOpacity(i.id))!=null?w:1,e.fillStyle=s,e.globalAlpha=.35*m,e.beginPath(),e.moveTo(l+a,c),e.arc(l,c,a,0,Math.PI*2,!0),e.closePath(),e.fill(),e.globalAlpha=m,a*=.3+.7*p,e.beginPath(),e.moveTo(l+a,c),e.arc(l,c,a,0,Math.PI*2,!0),e.closePath(),e.fill(),e.globalAlpha=u,e.restore()}updateMovablePointAnimation(e,i){var r=Date.now(),o=e.id,n=this.hoveredPointId===o||i,a=this.pressedPointId===o;e.pointIsPressed=a,n!==e.pointIsHovered&&(e.pointIsHovered=n,e.lastHoverActionTime=r);var s=e.animationPercent||0,l=r-e.lastHoverActionTime,c=.004*l;a?s=1:n?(s+=c,s>=1?s=1:this.requestRedrawNextFrame()):(s-=c,s<=0?s=0:this.requestRedrawNextFrame()),e.animationPercent=s}shouldDrawGhosted(e){if(!e)return!1;let i=this.grapher.controller.getItemModel(e);return!i||i.type!=="expression"?!1:Dn(i)}getTabIndex(e){if(this.grapher.controller.getActiveTool()!=="selection")return-1;let i=this.renderedPoints[e];if(!i)return-1;let r=i.poi,o=this.grapher.controller.getItemEditableLabelMode(r.sketch.id),n=this.grapher.controller.getItemModel(r.sketch.id),a=n&&n.type==="expression"&&!Hn(n)&&(i.type==="movable"||o===void 0||o==="NONE");var s=this.grapher.settings;let l=s.config.graphpaper&&s.config.enableTabindex;return a&&l?0:-1}getAriaHidden(){var e=this.grapher.settings;return!e.config.graphpaper}getAriaLabel(e){var i=this.getAriaAlert({id:e,includeUsageInstructions:!1});return i&&i.completeMessage}speakAriaAlert(){var r;let e=(r=this.getPOIUnderAttention())==null?void 0:r.id;if(e){let o=this.renderedPoints[e];if(!o||o.type==="static")return this.lastAriaAlert=void 0,!1}let i=this.getAriaAlert({id:e,lastAriaAlert:this.lastAriaAlert,includeUsageInstructions:!0});return this.lastAriaAlert=i,i&&i.completeMessage?(le(i.completeMessage),!0):!1}getAriaAlert(e){let{id:i,lastAriaAlert:r,includeUsageInstructions:o}=e;if(!i)return;var n=this.renderedPoints[i];if(!n)return;let{controller:a}=this.grapher,s=n.poi.sketch?a.getItemModel(n.poi.sketch.id):void 0;if(!(!s||s.type!=="expression")){r&&r.id!==i&&(r=void 0);var l=n.poi,c=n.pointOnScreen,p=n.projection;if(!(!l||!p)){var u=p.viewport;if(u){var g=r==null?void 0:r.label,m=l.ariaLabel;a.isGeometry()&&Sl(s)&&(m=yC(s,a,{poi:l,includeDetails:!1}).join(" "));var w=g!==m,C=!!(r!=null&&r.selected),S=n.selected,k=C!==S,M=r==null?void 0:r.coordX,I=r==null?void 0:r.coordY,E=l.x,T=l.y,A=E!==M||T!==I,G=r&&(w||k||A),_=vi(a,E),P=Ci(a,T),N=`${_} ${P}`,W=m||a.s("graphing-calculator-narration-movable-point-prefix"),X=!a.isGeometry()&&(n.type==="movable"||n.type==="draggable-label")&&o?a.s("graphing-calculator-narration-movable-point-suffix-usage-instructions"):"",q=c?"":a.s("graphing-calculator-narration-movable-point-off-screen-prompt"),B;if(r?w||!A&&k?B=W+q:A?B=N+q:B="":B=a.s("graphing-calculator-narration-item-at-coordinates",{itemDescription:W,x:_,y:P})+X+q,a.isGeometry()&&(n.type==="movable"||n.type==="draggable-label")){let J=a.getActiveTool();(J==="selection"||J==="box-selection")&&(B=xI(B||m||"",s,a))}return{id:i,coordX:E,coordY:T,label:m,selected:S,completeMessage:B,updated:G}}}}}setHoveredPointId(e){e!==this.hoveredPointId&&(this.hoveredPointId=e,this.requestRedrawNextFrame())}isMovingPoint(){return!!this.pressedPointId}setPressedPointId(e){e!==this.pressedPointId&&(this.pressedPointId=e,this.requestRedrawNextFrame())}getPOIUnderAttention(){let e=this.grapher.poiController.keyboardAttentionManager.getKeyboardAttention();if(!e)return;let i=e.listIndex||0;for(let r in this.renderedPoints){let n=this.renderedPoints[r].poi;if(n.sketch.id===e.calcId&&n.listIndex===i)return n}}requestRedrawNextFrame(){this.grapher.controller.requestRedrawGraph()}};function DC(t,e,i){return vi(t,e)+" "+Ci(t,i)}function vi(t,e){let i=t.getGraphSettings().showXAxis,r=t.get2dProjection();if(!r)return"";let{width:o}=r.screen;return i?t.s("graphing-calculator-narration-audio-trace-property-x",{x:Vo(__dcg_shared_module_exports__['Ya'](e,Hp(r,e)).latex)}):t.s("graphing-calculator-narration-x-percentage-coordinate",{x:Math.round(r.mathToPixels.mapX(e)/o*1e3)/10})}function Ci(t,e){let i=t.getGraphSettings().showYAxis,r=t.get2dProjection();if(!r)return"";let{height:o}=r.screen;return i?t.s("graphing-calculator-narration-audio-trace-property-y",{y:Vo(__dcg_shared_module_exports__['Ya'](e,Hp(r,e)).latex)}):t.s("graphing-calculator-narration-y-percentage-coordinate",{y:Math.round(r.mathToPixels.mapY(e)/o*1e3)/10})}var x6=Math.hypot&&Math.hypot(1/0,NaN)===1/0;function O_(t){return t===1/0||t===-1/0}var Vd=x6?Math.hypot:function(t,e){if(O_(t)||O_(e))return 1/0;if(isNaN(t)||isNaN(e))return NaN;if(t===0&&e===0)return 0;if(Math.abs(t)>Math.abs(e)){let i=e/t;return Math.abs(t)*Math.sqrt(i*i+1)}else{let i=t/e;return Math.abs(e)*Math.sqrt(i*i+1)}};function xg(t){let e=[[t.x0,t.y0],[t.x1,t.y1],[t.x2,t.y2]],[i,r]=__dcg_shared_module_exports__['xb'](e),o=__dcg_shared_module_exports__['sb'](t.x0-i,t.y0-r);return{x:i,y:r,radius:o}}function IC(t){let e=[[t.x0,t.y0],[t.x1,t.y1],[t.x2,t.y2]],[i,r]=__dcg_shared_module_exports__['xb'](e);return{startAngle:Math.atan2(t.y0-r,t.x0-i),deltaAngle:__dcg_shared_module_exports__['yb'](e)}}var __=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),w6=(t,e)=>t.x*e.x+t.y*e.y;function MC(t,e){return Vd(t.x-e.x,t.y-e.y)}function F_(t,e){let i={x:t.x1,y:t.y1},r={x:t.x2,y:t.y2},o=__(e,i),n=__(r,i),a=MC(i,r),s=a*a;return w6(o,n)/s}function vI(t){return[{x1:t.left,y1:t.top,x2:t.left,y2:t.bottom,extendStart:!1,extendEnd:!1},{x1:t.left,y1:t.top,x2:t.right,y2:t.top,extendStart:!1,extendEnd:!1},{x1:t.right,y1:t.top,x2:t.right,y2:t.bottom,extendStart:!1,extendEnd:!1},{x1:t.left,y1:t.bottom,x2:t.right,y2:t.bottom,extendStart:!1,extendEnd:!1}]}function v6(t){let{angle:e,width:i,height:r,center:o}=t,n=o.x,a=o.y,s=Math.cos(-e),l=Math.sin(-e),c=i/2,p=r/2,u={x:n+s*-c-l*-p,y:a+l*-c+s*-p},g={x:n+s*c-l*-p,y:a+l*c+s*-p},m={x:n+s*c-l*p,y:a+l*c+s*p},w={x:n+s*-c-l*p,y:a+l*-c+s*p};return[{x1:u.x,y1:u.y,x2:g.x,y2:g.y,extendStart:!1,extendEnd:!1},{x1:g.x,y1:g.y,x2:m.x,y2:m.y,extendStart:!1,extendEnd:!1},{x1:m.x,y1:m.y,x2:w.x,y2:w.y,extendStart:!1,extendEnd:!1},{x1:w.x,y1:w.y,x2:u.x,y2:u.y,extendStart:!1,extendEnd:!1}]}function C6(t,e){let i=vI(t);return!!(GC(e,i[0])||GC(e,i[1])||GC(e,i[2])||GC(e,i[3]))}function S6(t,e){let i=vI(t);return!!(Ll(e,i[0],!1)||Ll(e,i[1],!1)||Ll(e,i[2],!1)||Ll(e,i[3],!1)||Ll(e,i[0],!0)||Ll(e,i[1],!0)||Ll(e,i[2],!0)||Ll(e,i[3],!0))}function E6(t,e){let i=vI(t);return!!(Ld(e,i[0],!1)||Ld(e,i[1],!1)||Ld(e,i[2],!1)||Ld(e,i[3],!1)||Ld(e,i[0],!0)||Ld(e,i[1],!0)||Ld(e,i[2],!0)||Ld(e,i[3],!0))}function D6(t,e){return t.left<=e.left&&t.right>=e.right&&t.top<=e.top&&t.bottom>=e.bottom}function k6(t,e){return t.left<=e.x&&e.x<=t.right&&t.top<=e.y&&e.y<=t.bottom}function AC(t,e){if(!e.extendStart){let i=t.left<=e.x1&&e.x1<=t.right,r=t.top<=e.y1&&e.y1<=t.bottom;if(i&&r)return!0}return C6(t,e)}function z_(t,e){let i={x:e.x0,y:e.y0};return!!(k6(t,i)||E6(t,e))}function U_(t,e){let i={left:e.x-e.radius,right:e.x+e.radius,top:e.y-e.radius,bottom:e.y+e.radius};return!!(D6(t,i)||S6(t,e))}function I6(t,e){let i=t.x-e.center.x,r=t.y-e.center.y,o=Math.atan2(r,i),n=Vd(i,r),a={x:n*Math.cos(o+e.angle),y:n*Math.sin(o+e.angle)};return Math.abs(a.x)<=e.width/2&&Math.abs(a.y)<=e.height/2}function H_(t,e){if(e.length<4)return!1;let i={x1:NaN,y1:NaN,x2:e[0],y2:e[1],extendStart:!1,extendEnd:!1};for(var r=2;r<e.length;r+=2)if(i.x1=i.x2,i.y1=i.y2,i.x2=e[r],i.y2=e[r+1],AC(t,i))return!0;return!1}function W_(t,e){var i=v6(e);for(let r of i)if(AC(t,r))return!0;return!!I6({x:t.left,y:t.top},e)}function T6(t,e,i){let r=e.x1-t.x,o=e.x2-t.x,n=e.y1-t.y,a=e.y2-t.y,s=t.radius,l=o-r,c=a-n,p=l*l+c*c,u=r*a-o*n,g=Math.sqrt(s*s*p-u*u);if(g<0)return;if(c>=0)var m=1;else var m=-1;let w=i?-1*m:1*m;return{x:t.x+(u*c+w*m*l*g)/p,y:t.y+(-u*l+w*Math.abs(c)*g)/p}}function M6(t,e){let i=t.y2-t.y1,r=t.x1-t.x2,o=e.y2-e.y1,n=e.x1-e.x2,a=i*t.x1+r*t.y1,s=o*e.x1+n*e.y1,l=i*n-o*r;if(l!==0)return{x:(n*a-r*s)/l,y:(i*s-o*a)/l}}function wI(t,e){let i=F_(e,t);return!(isNaN(i)||i<0&&!e.extendStart||i>1&&!e.extendEnd)}function G6(t,e){let{x:i,y:r}=xg(e),{startAngle:o,deltaAngle:n}=IC(e),a=Math.atan2(t.y-r,t.x-i);return __dcg_shared_module_exports__['ja'](a,o,n)}function Ll(t,e,i){let r=T6(t,e,i);if(r!=null&&wI(r,e))return r}function Ld(t,e,i){let r=Ll(xg(t),e,!1)||N_,o=B_(i,K_(t,r),q_(e));if(o||(r=Ll(xg(t),e,!0)||N_,o=B_(i,K_(t,r),q_(e))),o&&G6(r,t))return r}var N_={x:NaN,y:NaN};function GC(t,e){let i=M6(t,e);if(i!=null&&wI(i,t)&&wI(i,e))return i}function B_(t,e,i){let r=e.x*i.y-e.y*i.x;return r>0&&t||r<0&&!t}function K_(t,e){let{x:i,y:r}=xg(t),{deltaAngle:o}=IC(t);return o>0?{x:r-e.y,y:e.x-i}:{x:e.y-r,y:i-e.x}}function q_(t){return{x:t.x2-t.x1,y:t.y2-t.y1}}var ct=__dcg_shared_module_exports__['h'](j());var bo=__dcg_shared_module_exports__['h'](j());Tt();function VC(t){return Array.from(t.querySelectorAll('input:enabled, button:enabled, select:enabled, textarea:enabled, [tabindex="0"], a[href]')).filter(e=>!e.getAttribute("aria-hidden")&&!e.getAttribute("aria-disabled")&&wp(e))}function $_(t){return function(i){if(be(i)==Ps&&t){let r=VC(t);if(r.length===0)return;let o=r[0],n=r[r.length-1];i.shiftKey&&document.activeElement===o?(i.preventDefault(),H(n).trigger("focus")):!i.shiftKey&&document.activeElement===n?(i.preventDefault(),H(o).trigger("focus")):document.activeElement&&!t.contains(document.activeElement)&&(i.preventDefault(),H(o).trigger("focus"))}}}Tt();function wg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}var{IfElse:V6}=bo.Components,L6=500,Pl=5,ib=2,CI=class extends bo.Class{constructor(){super(...arguments),this.offsetLeft=0}init(){this.uuid=this.props.uuid()}gravity(){var e,i;return((i=(e=this.props).gravity)==null?void 0:i.call(e))||"s"}template(){return bo.createElement("div",{class:()=>{var e,i,r,o;return{"dcg-tooltip-positioning-container":!0,"dcg-tooltip-gravity-n-s":this.gravity()==="n"||this.gravity()==="s","dcg-tooltip-gravity-e-w":this.gravity()==="e"||this.gravity()==="w","dcg-tooltip-theme-light":((i=(e=this.props).theme)==null?void 0:i.call(e))==="light","dcg-tooltip-theme-dark":((o=(r=this.props).theme)==null?void 0:o.call(r))!=="light"}},style:()=>{var e,i,r,o;return{top:`${this.props.hitAreaRect().top+(((i=(e=this.props).offset)==null?void 0:i.call(e).top)||0)}px`,left:`${this.props.hitAreaRect().left+(((o=(r=this.props).offset)==null?void 0:o.call(r).left)||0)}px`,width:`${this.props.hitAreaRect().width}px`,height:`${this.props.hitAreaRect().height}px`}}},bo.createElement("div",{class:bo.const("dcg-tooltip-message-container"),style:this.bindFn(this.getMessageStyle)},bo.createElement("div",{role:bo.const("tooltip"),id:this.const(this.uuid),class:()=>({"dcg-tooltip-message":!0,"dcg-sticky-not-stuck":this.props.isStickyAndNotStuck()}),onMount:e=>this.tooltipMessage=e,style:()=>({left:`${Math.round(this.offsetLeft)}px`})},V6(()=>!!this.props.customTooltipView,{true:()=>this.props.customTooltipView(),false:()=>bo.createElement("span",null,this.props.tooltip)}))),bo.createElement("div",{class:()=>({"dcg-tooltip-arrow":!0,[this.getTooltipGravityClass()]:!0}),style:()=>{var e,i;return((i=(e=this.props).theme)==null?void 0:i.call(e))==="light"?this.getArrowWithBorderStyle():this.getSolidArrowStyle()}}))}updatePositionIfNecessary(){if(this.gravity()!=="s"&&this.gravity()!=="n")return;let e=this.tooltipMessage.getBoundingClientRect(),i=this.tooltipMessage.closest(".dcg-tap-container");if(!i)return;let r=i.getBoundingClientRect();e.right+ib>r.right?this.offsetLeft=r.right-e.right-ib:e.left-ib<r.left&&(this.offsetLeft=r.left-e.left+ib),this.offsetLeft!==0&&this.update()}didMount(){this.updatePositionIfNecessary()}getTooltipGravityClass(){switch(this.gravity()){case"n":return"dcg-tooltip-gravity-n";case"s":return"dcg-tooltip-gravity-s";case"e":return"dcg-tooltip-gravity-e";case"w":return"dcg-tooltip-gravity-w"}}getArrowWithBorderStyle(){let e=this.gravity(),i=this.getBackgroundColor(),r="#bbb",o="8px",n={width:o,height:o,border:`1px solid ${r}`,background:i};switch(e){case"s":return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},n),{top:"100%",left:"50%","margin-top":"1px","border-right":"0","border-bottom":"0"});case"n":return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},n),{bottom:"100%",left:"50%","margin-bottom":"1px","border-left":"0","border-top":"0"});case"e":return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},n),{top:"50%",left:"100%","margin-left":"1px","border-right":"0","border-top":"0"});case"w":return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},n),{top:"50%",right:"100%","margin-right":"1px","border-left":"0","border-bottom":"0"});default:return e}}getSolidArrowStyle(){let e=this.gravity(),i=this.getBackgroundColor(),r=`transparent transparent ${i} transparent`,o=`${i} transparent transparent transparent`,n=`transparent ${i} transparent transparent`,a=`transparent transparent transparent ${i}`,s=`-${Pl}px`;switch(e){case"s":return{top:"100%",left:"50%",border:`${Pl}px solid transparent`,"border-color":r,"margin-top":s,"margin-left":s};case"n":return{bottom:"100%",left:"50%",border:`${Pl}px solid transparent`,"border-color":o,"margin-bottom":s,"margin-left":s};case"e":return{top:"50%",left:"100%",border:`${Pl}px solid transparent`,"border-color":n,"margin-left":`-${Pl}px`,"margin-top":s};case"w":return{top:"50%",right:"100%",border:`${Pl}px solid transparent`,"border-color":a,"margin-right":s,"margin-top":s};default:return e}}getBackgroundColor(){var e,i;return((i=(e=this.props).theme)==null?void 0:i.call(e))==="light"?"#fff":this.props.isStickyAndNotStuck()?"#666":"#000"}getMessageStyle(){let e=this.props.hitAreaRect(),i=this.gravity(),r=this.props.maxWidth();switch(i){case"s":return{top:"100%",width:`${r}px`,transform:"translate(-50%, 0)",left:`${.5*e.width}px`,"margin-top":`${Pl}px`,"text-align":"center"};case"n":return{bottom:"100%",width:`${r}px`,transform:"translate(-50%, 0)",left:`${.5*e.width}px`,"margin-bottom":`${Pl}px`,"text-align":"center"};case"e":return{transform:"translate(0, -50%)",left:"100%",width:`${r}px`,top:`${.5*e.height}px`,"margin-left":`${Pl}px`,"text-align":"left"};case"w":return{transform:"translate(0, -50%)",right:"100%",width:`${r}px`,top:`${.5*e.height}px`,"margin-right":`${Pl}px`,"text-align":"right"};default:return i}}};function P6(){return document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}var De=class extends bo.Class{init(){this.uuid=`dcg-tooltip-${wg()}`}template(){return bo.createElement("div",{class:()=>{var e,i;return{"dcg-tooltip-hit-area-container":!0,"dcg-display-block":(i=(e=this.props).displayBlock)==null?void 0:i.call(e),"dcg-tooltip-disabled":this.props.disabled&&this.props.disabled()}},handleevent:bo.const("true"),didMount:e=>{this.isMounted=!0,this.hitAreaNode=e,this.setupEventListeners(this.hitAreaNode)},onTap:()=>{if(this.shouldStickOnTargetClick())if(this.isStuck)this.clearTimeouts(),this.hideTooltip();else{if(this.props.disabled&&this.props.disabled())return;this.showTooltip(),this.stickTooltip()}else if(this.shouldShowOnTapstart()){if(this.props.disabled&&this.props.disabled())return;this.showTooltip(),this.setUpHideOnExternalMousedown()}else this.hideTooltipImmediately()}},this.children)}shouldShowOnTapstart(){return this.props.showOnTapstart&&this.props.showOnTapstart()}didUpdate(){this.updateTooltip()}updateTooltip(){if(!this.wrapperRef)return;if(!this.props.tooltip()){this.hideTooltip();return}let e=this.hitAreaNode.getBoundingClientRect(),i=this.wrapperRef.elt.getBoundingClientRect(),{originalTop:r,originalLeft:o}=this.wrapperRef,n=e.top-i.top,a=e.left-i.left;Math.abs(n-r)>3||Math.abs(a-o)>3?this.hideTooltip():this.wrapperRef.view.update()}handleShowEvent(e){if(this.props.disabled&&this.props.disabled())return;let i=this.props.delay?this.props.delay():L6;this.clearTimeouts(),this.showTooltipTimeout=setTimeout(e,i)}hideTooltipImmediately(){this.clearTimeouts(),this.hideTooltip()}handleHideEvent(){this.clearTimeouts(),this.hideTooltipTimeout=setTimeout(this.bindFn(this.hideTooltip),150)}setupEventListeners(e){H(e).on("tipsyshow",i=>{i.target===e&&this.handleShowEvent(()=>{this.showTooltip()})}).on("tipsyhide",i=>{i.target!==e||this.isStuck||this.handleHideEvent()})}willUnmount(){this.clearTimeouts(),this.isMounted=!1,this.hideTooltip()}setUpHideOnExternalMousedown(){H(document).on(`mousedown.dcg-tooltip-${this.uuid} touchstart.dcg-tooltip-${this.uuid} pointerdown.dcg-tooltip-${this.uuid}`,e=>{this.wrapperRef&&(this.hitAreaNode.contains(e.target)||this.wrapperRef.elt.contains(e.target)||this.hideTooltip())})}stickTooltip(){this.isMounted&&this.wrapperRef&&(this.isStuck||(this.setUpHideOnExternalMousedown(),this.isStuck=!0,this.updateTooltip()))}clearTimeouts(){clearTimeout(this.showTooltipTimeout),clearTimeout(this.hideTooltipTimeout)}showTooltip(){var m,w,C;if(!this.isMounted||this.wrapperRef||!this.props.tooltip())return;let e=this.hitAreaNode.getBoundingClientRect(),i=document.createElement("div");i.className="dcg-tooltip-mount-pt";let r=this.hitAreaNode.closest(".dcg-tap-container"),o=P6();(!!o&&o.contains(this.hitAreaNode)&&o.closest(".dcg-tap-container")?o:r).appendChild(i);let a=i.getBoundingClientRect(),s=e.left-a.left,l=e.top-a.top,c=200;if((w=(m=this.props).noWrap)!=null&&w.call(m)){let S=(C=i.closest(".dcg-tap-container"))==null?void 0:C.getBoundingClientRect();S&&(c=S.width-2*ib)}let p=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.props),{isStickyAndNotStuck:()=>this.shouldStickOnTargetClick()&&!this.isStuck,maxWidth:()=>c,hitAreaRect:()=>({top:l||0,left:s||0,width:e.width||0,height:e.height||0}),uuid:()=>this.uuid});this.setupEventListeners(i),H(i).on("dcg-tap",()=>{this.shouldStickOnTargetClick()&&this.stickTooltip()});let u=bo.mountToNode(CI,i,p);H(document).on(`keydown.dcg-tooltip-${this.uuid}`,S=>{be(S)===Yo&&this.hideTooltip()});let g=()=>this.updateTooltip();window.addEventListener("scroll",g,!0),this.wrapperRef={elt:i,view:u,originalLeft:s,originalTop:l,onScroll:g},this.assignAriaDescribedBy()}hideTooltip(){this.clearTimeouts(),this.wrapperRef&&(this.isStuck=!1,H(document).off(`.dcg-tooltip-${this.uuid}`),window.removeEventListener("scroll",this.wrapperRef.onScroll,!0),this.restoreAriaDescribedBy(),bo.unmountFromNode(this.wrapperRef.elt),this.wrapperRef.elt.parentNode&&this.wrapperRef.elt.parentNode.removeChild(this.wrapperRef.elt),this.wrapperRef=void 0)}assignAriaDescribedBy(){let e=VC(this.hitAreaNode)[0]||this.hitAreaNode;this.originalDescribedBy=e.getAttribute("aria-describedby"),e.setAttribute("aria-describedby",this.uuid)}restoreAriaDescribedBy(){let e=VC(this.hitAreaNode)[0]||this.hitAreaNode;this.originalDescribedBy?e.setAttribute("aria-describedby",this.originalDescribedBy):e.removeAttribute("aria-describedby")}shouldStickOnTargetClick(){return!!this.props.sticky&&this.props.sticky()}};var Pc=__dcg_shared_module_exports__['h'](j());var LC=class extends Pc.Class{template(){return Pc.createElement("div",{class:Pc.const("dcg-dot-dot-dropdown")},Pc.createElement("span",null),Pc.createElement("span",null),Pc.createElement("span",null))}};var ma=__dcg_shared_module_exports__['h'](j());var vg=class extends ma.Class{template(){return ma.createElement("span",{class:ma.const("dcg-navigate-back"),onTap:this.props.onBack,"aria-label":this.props.ariaLabel,role:ma.const("button"),tabindex:ma.const("0"),handleEvent:ma.const("true"),manageFocus:this.const(Ne({controller:this.props.controller(),location:{type:"geo-header-back-link"}}))},ma.createElement("i",{class:ma.const("dcg-icon-chevron-left"),"aria-hidden":ma.const("true")}),ma.createElement("div",{class:ma.const("dcg-navigate-back-message")},this.props.message))}};var hi=__dcg_shared_module_exports__['h'](j());var Na=__dcg_shared_module_exports__['h'](j());var $e=class extends Na.Class{template(){return Na.createElement("div",{role:Na.const("checkbox"),tabindex:()=>this.props.disabled&&this.props.disabled()?-1:0,"aria-label":()=>{var e,i;return(i=(e=this.props).ariaLabel)==null?void 0:i.call(e)},"aria-labelledby":()=>{var e,i;return(i=(e=this.props).labelledBy)==null?void 0:i.call(e)},"aria-describedby":()=>{var e,i;return(i=(e=this.props).describedBy)==null?void 0:i.call(e)},"aria-disabled":()=>this.props.disabled&&this.props.disabled(),"aria-checked":this.props.checked,manageFocus:()=>{var e,i;return(i=(e=this.props).manageFocus)==null?void 0:i.call(e)},class:()=>({"dcg-component-checkbox":!0,"dcg-checked":this.props.checked(),"dcg-disabled":this.props.disabled&&this.props.disabled(),"dcg-small":this.props.small&&this.props.small(),[this.props.class===void 0?"":this.props.class()]:this.props.class!==void 0}),style:()=>this.props.style?this.props.style():{},onTap:this.bindFn(this.onChange)},Na.createElement("span",{class:Na.const("dcg-checkbox")},Na.createElement("i",{class:Na.const("dcg-icon-check"),"aria-hidden":Na.const("true")})),Na.createElement("span",{class:Na.const("dcg-checkbox-children")},this.children))}onChange(e){let i=e.target;i&&i.getAttribute("href")||this.props.disabled&&this.props.disabled()||this.props.onChange(!this.props.checked())}};var Tn=__dcg_shared_module_exports__['h'](j());var{Input:O6,If:_6}=Tn.Components,PC=class extends Tn.Class{init(){this.controller=this.props.controller(),this.cacheFolderList(),this.newFolderTitle=""}willUpdate(){this.cacheFolderList()}template(){return Tn.createElement(_6,{predicate:()=>this.getMovableItemCount()>0},()=>Tn.createElement("div",{class:Tn.const("dcg-move-to-folder")},Tn.createElement("div",{class:Tn.const("dcg-move-to-folder-title")},this.bindFn(this.getMoveMessage)),Tn.createElement("div",{class:Tn.const("dcg-move-to-folder-flex")},Tn.createElement(O6,{"aria-label":this.bindFn(this.getMoveMessage),value:()=>this.newFolderTitle,onInput:e=>{this.newFolderTitle=e,this.update()},placeholder:()=>this.controller.s("graphing-calculator-label-geometry-move-to-folder-placeholder"),didMount:e=>{e.onkeydown=function(i){let r=be(i);(r==="Backspace"||r==="Del")&&i.stopPropagation()}},onEnterPressed:this.bindFn(this.onEnterPressed)}),Tn.createElement("div",{class:()=>({"dcg-btn-blue":!0,"dcg-disabled":!this.newFolderTitle}),role:Tn.const("button"),tabindex:()=>this.newFolderTitle?0:-1,onTap:this.bindFn(this.createNewFolder)},()=>this.controller.s("graphing-calculator-button-move-to-folder-action")))))}getMovableItemCount(){return this.controller.getAllSelectedItems().filter(i=>!this.controller.isItemReadonly(i.id)).length}getMoveMessage(){return this.controller.s("graphing-calculator-text-geometry-move-to-folder-message",{count:new mo(this.getMovableItemCount())})}onEnterPressed(){let e=!1;this.folderList.forEach(i=>{i.title===this.newFolderTitle&&(e=!0,this.chooseFolder(i.id))}),e||this.createNewFolder()}chooseFolder(e){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"folderId",value:e}})}createNewFolder(){this.newFolderTitle&&this.controller.dispatch({type:"update-all-selected-items",update:{prop:"folderId",value:this.newFolderTitle,createFolder:!0}})}cacheFolderList(){this.folderList=[],this.controller.getAllItemModels().forEach(e=>{e.type==="folder"&&!this.controller.isGeoFolder(e)&&this.folderList.push(e)})}};var FC=__dcg_shared_module_exports__['h'](j());var si=__dcg_shared_module_exports__['h'](j());var OC=__dcg_shared_module_exports__['h'](j());var F6=.9,Wp=class extends OC.Class{template(){return OC.createElement("div",{class:()=>{var e,i;return{"dcg-color-swatch":!0,"dcg-color-evaluation":(i=(e=this.props).isEvaluation)==null?void 0:i.call(e),"dcg-light-color":Uw(this.props.color(),this.props.invertSwatches(),F6)}},style:()=>({background:Th(this.props.color())})})}};var rb=__dcg_shared_module_exports__['h'](j());var Cg=class extends rb.Class{template(){return rb.createElement(De,__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.props),{customTooltipView:()=>rb.createElement(Te,{latex:this.props.tooltip,config:this.const({})}),theme:this.const("light"),noWrap:this.const(!0)}),this.children)}};var{For:j_,If:SI}=si.Components,yo=class extends si.Class{init(){this.controller=this.props.controller()}template(){return si.createElement("div",{class:si.const("dcg-color-picker-container")},si.createElement(j_,{each:()=>this.getColorValues()},si.createElement("div",{class:si.const("dcg-color-picker-menu dcg-do-not-blur")},e=>si.createElement("div",{class:si.const("dcg-color-tile"),handleevent:si.const("true"),role:si.const("button"),tabindex:si.const("0"),"aria-label":()=>Gp(this.controller,e),"aria-pressed":()=>this.isSelected(e),onTap:()=>this.props.onColorSelected(e)},si.createElement(Wp,{color:()=>({type:"single-color",value:e}),invertSwatches:()=>this.controller.invertSwatches()}),si.createElement(SI,{predicate:()=>this.isSelected(e)},()=>si.createElement("i",{class:si.const("dcg-icon-check"),"aria-hidden":si.const("true")}))))),si.createElement(SI,{predicate:()=>this.getUniqueCustomColors().length>0},()=>si.createElement(j_,{each:this.bindFn(this.getUniqueCustomColors),key:e=>e.assignmentLatex},si.createElement("div",{class:si.const("dcg-color-picker-menu dcg-do-not-blur")},e=>si.createElement(Cg,{tooltip:()=>e.assignmentLatex},si.createElement("div",{class:si.const("dcg-color-tile"),handleevent:si.const("true"),role:si.const("button"),tabindex:si.const(0),"aria-label":()=>Vo(e.assignmentLatex),"aria-pressed":()=>this.props.colorLatex()===e.assignmentLatex,onTap:()=>this.props.onCustomColorSelected(e.assignmentLatex)},si.createElement(Wp,{color:()=>this.getColorValue(e),invertSwatches:()=>this.controller.invertSwatches()}),si.createElement(SI,{predicate:()=>this.props.colorLatex()===e.assignmentLatex},()=>si.createElement("i",{class:()=>this.getCheckmarkClass(e),"aria-hidden":si.const("true")}))))))))}hideColorFunctions(){var e,i,r;return(r=(i=(e=this.props).hideColorFunctions)==null?void 0:i.call(e))!=null?r:!1}isSelected(e){var i=this.props.colorLatex();return i&&__dcg_shared_module_exports__['Aa'](this.getUniqueCustomColors(),"assignmentLatex").indexOf(i)>=0?!1:this.props.selectedColor()===e}getColorValues(){return __dcg_shared_module_exports__['Pa'](this.controller.getColors())}getUniqueCustomColors(){if(this.props.hideCustomColors&&this.props.hideCustomColors())return[];let e=[];e.push(...this.controller.getAllColorAssignments()),this.hideColorFunctions()||e.push(...this.controller.getAllColorFunctionAssignments());let i=__dcg_shared_module_exports__['Fa'](e,r=>r.assignmentLatex);return e.filter(r=>i[r.assignmentLatex]===1)}getColorValue(e){switch(e.id){case"shader":return{type:e.id};default:let i=this.controller.getColorById(e.id);return Array.isArray(i)?{type:"color-array",value:i}:/^data:image/.test(i)?{type:"image",value:i}:{type:"single-color",value:i}}}getCheckmarkClass(e){return Uw(this.getColorValue(e),!1)?`dcg-icon-check ${eP(this.getColorValue(e),!1)?"dcg-light-color":"dcg-mixed-color"}`:"dcg-icon-check"}};var _C=class extends FC.Class{init(){this.controller=this.props.controller(),this.cacheSelectedColor()}template(){return FC.createElement(yo,{controller:this.props.controller,colorLatex:()=>this.colorLatex,selectedColor:()=>this.selectedColor,onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected),hideCustomColors:this.const(!1)})}onCustomColorSelected(e){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"colorLatex",value:e}})}cacheSelectedColor(){let e=__dcg_shared_module_exports__['wa'](this.controller.getAllSelectedItems(),i=>i.type==="expression");if(e.length===0){this.selectedColor="",this.colorLatex="";return}this.selectedColor=Ds(e[0]),this.colorLatex=e[0].colorLatex;for(let i=1;i<e.length;i++)if(this.selectedColor!==Ds(e[i])||this.colorLatex!==e[i].colorLatex){this.selectedColor="",this.colorLatex="";return}}willUpdate(){this.cacheSelectedColor()}onColorSelected(e){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"color",value:e}})}getFirstSelectedExpression(){var e=this.controller.getAllSelectedItems();for(let i of e)if(i.type==="expression")return i}};var fa=__dcg_shared_module_exports__['h'](j());var Qo=__dcg_shared_module_exports__['h'](j());var{For:R6,If:N6}=Qo.Components,Ni=class extends Qo.Class{init(){this.config=this.props.staticConfig()}template(){return Qo.createElement(R6,{each:()=>this.config,key:e=>e.key},Qo.createElement("div",{class:Qo.const("dcg-segmented-control-container"),role:Qo.const("group"),"aria-label":this.props.ariaGroupLabel},e=>Qo.createElement("div",{class:()=>({"dcg-segmented-control-btn":!0,"dcg-selected":e.selected(),"dcg-theme-mini":this.getTheme()==="mini","dcg-theme-default":this.getTheme()==="default","dcg-disabled":this.isDisabled(),[e.class?e.class():""]:!!e.class}),role:Qo.const("button"),tabindex:Qo.const(0),"aria-label":()=>this.getAriaLabel(e),style:()=>({"min-width":this.props.minButtonWidth?this.props.minButtonWidth()+"px":void 0}),"aria-pressed":()=>e.selected(),onTap:()=>{this.isDisabled()||e.onSelect()},manageFocus:()=>{if(e.focusHelperOptions)return Ne(e.focusHelperOptions)}},Qo.createElement(De,{tooltip:()=>e.tooltip?e.tooltip():"",gravity:()=>e.tooltipGravity?e.tooltipGravity():"s",disabled:()=>!(e.tooltip&&e.tooltip())},Qo.createElement("div",{class:Qo.const("dcg-segmented-control-interior")},()=>e.label?e.label():"",Qo.createElement(N6,{predicate:()=>!!e.icon},()=>Qo.createElement("i",{class:()=>e.icon?e.icon():""})))))))}getAriaLabel(e){return e.ariaLabel?e.ariaLabel():e.label?e.label():e.tooltip?e.tooltip():""}isDisabled(){return this.props.disabled&&this.props.disabled()}getTheme(){return this.props.theme?this.props.theme():"default"}};var{Input:B6,IfElse:K6}=fa.Components,$p=class extends fa.Class{template(){return this.controller=this.props.controller(),fa.createElement("div",{class:()=>({"dcg-label-visible":this.getShowLabel(),"dcg-label-container":!0,"dcg-do-blur":!0}),tapboundary:fa.const("true"),handleEvent:fa.const("true")},fa.createElement($e,{onChange:this.bindFn(this.onCheckboxInput),checked:this.bindFn(this.getShowLabel)},()=>this.controller.s("graphing-calculator-button-label")+(this.getIsDisabled()?"":":")),K6(this.bindFn(this.hasEditableLabel),{true:()=>fa.createElement("div",{class:fa.const("dcg-editable-mode-toggle")},fa.createElement(Ni,{theme:this.const("mini"),staticConfig:this.bindFn(this.getEditableLabelOptions),ariaGroupLabel:()=>this.controller.s("graphing-calculator-narration-editable-label-mode")})),false:()=>fa.createElement(B6,{class:()=>({"dcg-label-input":!0,"dcg-disabled-input":this.getIsDisabled(),"dcg-disabled-editable-input":this.hasEditableLabel(),"dcg-readonly":this.getIsReadonly()}),disabled:this.bindFn(this.getIsReadonly),"aria-label":()=>this.controller.s("graphing-calculator-narration-label-text"),"aria-disabled":()=>this.getIsDisabled()||this.hasEditableLabel()||this.getIsReadonly(),value:this.bindFn(this.getLabel),onInput:this.bindFn(this.onLabelInput)})}))}getEditableLabelOptions(){return[{key:"math",label:()=>this.controller.s("graphing-calculator-button-editable-math"),selected:()=>this.model().editableLabelMode==="MATH",onSelect:()=>this.setEditableLabelMode("MATH")},{key:"text",label:()=>this.controller.s("graphing-calculator-button-editable-text"),selected:()=>this.model().editableLabelMode==="TEXT",onSelect:()=>this.setEditableLabelMode("TEXT")}]}setEditableLabelMode(e){this.controller.dispatch({type:"set-item-editable-label-mode",id:this.id(),editableLabelMode:e})}getIsReadonly(){return this.controller.isItemReadonly(this.model().id)}model(){return this.props.model()}id(){return this.model().id}getLabel(){return this.model().label||""}hasEditableLabel(){return Oh(this.model())}getShowLabel(){return Es(this.model())}getIsDisabled(){return this.getLabel().length===0&&!this.getShowLabel()}onLabelInput(e){var i=e;this.controller.dispatch({type:"set-item-label",id:this.id(),label:i}),this.controller.dispatch({type:"set-item-showlabel",id:this.id(),showLabel:!!i})}onCheckboxInput(){if(this.props.useSmartPointLabeling&&this.props.useSmartPointLabeling()){this.controller.dispatch({type:"toggle-label-for-all-selected-points"});return}this.controller.dispatch({type:"set-item-showlabel",id:this.id(),showLabel:!this.getShowLabel()})}};var{If:Sg}=hi.Components,RC=class extends hi.Class{init(){this.controller=this.props.controller(),this.cacheSectionValues()}willUpdate(){this.cacheSectionValues()}isIconModelFocused(){return this.controller.isFocusLocationFocused({type:"multi-select-more-icon"})}template(){return hi.createElement("div",{class:()=>({"dcg-generic-options-menu":!0,"dcg-options-menu":!0,"dcg-multi-select-options-menu":!0}),role:hi.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-options-menu")},hi.createElement("div",{class:hi.const("dcg-options-menu-section")},hi.createElement("div",{class:hi.const("dcg-multi-select-color-picker")},hi.createElement(_C,{controller:this.props.controller})),hi.createElement(Sg,{predicate:()=>this.sectionValues.showPointLabels!==void 0},()=>hi.createElement("div",{class:hi.const("dcg-checkbox-section")},hi.createElement($e,{checked:()=>!!this.sectionValues.showPointLabels,onChange:this.bindFn(this.onShowPointLabelChanged)},()=>this.controller.s("graphing-calculator-button-geometry-label-points-checkbox")))),hi.createElement(Sg,{predicate:()=>this.sectionValues.singleLabelableExpressionModel!==void 0},()=>hi.createElement("div",{class:hi.const("dcg-checkbox-section")},hi.createElement($p,{controller:this.props.controller,model:()=>this.sectionValues.singleLabelableExpressionModel,useSmartPointLabeling:()=>this.sectionValues.draggableFreePoint!==void 0}))),hi.createElement(Sg,{predicate:()=>this.sectionValues.draggableFreePoint!==void 0},()=>hi.createElement("div",{class:hi.const("dcg-checkbox-section")},hi.createElement($e,{checked:()=>!!this.sectionValues.draggableFreePoint,onChange:this.bindFn(this.onDraggableFreePointChanged)},()=>this.controller.s("graphing-calculator-button-draggable")))),hi.createElement(Sg,{predicate:()=>this.sectionValues.arrowMode!==void 0},()=>hi.createElement("div",null,()=>this.controller.s("graphing-calculator-text-geometry-arrow-mode",{mode:this.getArrowModeDisplayName()}))),hi.createElement(Sg,{predicate:()=>this.controller.getGraphSettings().config.expressions},()=>hi.createElement(PC,{controller:this.props.controller})),hi.createElement(Sg,{predicate:()=>this.sectionValues.graphInteractionDisabled!==void 0&&this.props.controller().shouldShowAuthorFeatures()},()=>hi.createElement("div",{class:hi.const("dcg-checkbox-section dcg-disable-graph-interactions")},hi.createElement($e,{checked:()=>!!this.sectionValues.graphInteractionDisabled,onChange:()=>this.toggleGraphInteractionsDisabled(),ariaLabel:()=>this.controller.s("graphing-calculator-label-disable-graph-interactions")},()=>this.controller.s("graphing-calculator-label-disable-graph-interactions"))))))}toggleGraphInteractionsDisabled(){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"disableGraphInteractions",value:!this.sectionValues.graphInteractionDisabled}})}onShowPointLabelChanged(){this.controller.dispatch({type:"toggle-label-for-all-selected-points"})}onDraggableFreePointChanged(e){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"dragMode",value:e?"XY":"NONE"}})}cacheSectionValues(){this.sectionValues=this.computeSectionValues()}computeSectionValues(){var n;let e={showPointLabels:[],singleLabelableExpressionModel:[],draggableFreePoint:[],arrowMode:[],graphInteractionDisabled:[]},i=this.controller.getAllSelectedItems();for(let a of i){e.graphInteractionDisabled.push(ca(a));let s=a.type==="expression"?(n=a.formula.geometry)==null?void 0:n.valueType:void 0;if(__dcg_shared_module_exports__['aa'](s)&&(s=__dcg_shared_module_exports__['ba'](s)),a.type==="expression"&&__dcg_shared_module_exports__['ca'](s))switch(s){case __dcg_shared_module_exports__['s']:e.showPointLabels.push(a.showLabel),e.singleLabelableExpressionModel.push(a),a.formula.move_strategy&&e.draggableFreePoint.push(a.dragMode!=="NONE");break;case __dcg_shared_module_exports__['A']:break;case __dcg_shared_module_exports__['G']:e.arrowMode.push(a.arrowMode);break;case __dcg_shared_module_exports__['E']:break;case __dcg_shared_module_exports__['I']:break;case __dcg_shared_module_exports__['K']:break;case __dcg_shared_module_exports__['S']:break;case __dcg_shared_module_exports__['C']:e.singleLabelableExpressionModel.push(a),e.arrowMode.push(a.arrowMode);break;case __dcg_shared_module_exports__['M']:case __dcg_shared_module_exports__['O']:e.singleLabelableExpressionModel.push(a);break;case __dcg_shared_module_exports__['Q']:break;default:return s}}let r={},o=i.length;for(let a in e){let s=a;switch(s){case"singleLabelableExpressionModel":{let c=e[s];o===1&&c.length===1&&(r[s]=c[0])}break;case"showPointLabels":{let c=e[s];c.length>0&&o>1&&(r[s]=__dcg_shared_module_exports__['xa'](c,p=>!!p))}break;case"draggableFreePoint":{let c=e[s];c.length>0&&(r[s]=__dcg_shared_module_exports__['ya'](c))}break;case"arrowMode":break;case"graphInteractionDisabled":{r[s]=e[s].every(c=>c);break}default:return s}}return r}getArrowModeDisplayName(){let e=this.sectionValues.arrowMode;if(!e)return"";switch(e){case"NONE":return this.controller.s("graphing-calculator-text-arrow-mode-none");case"DEFAULT":return this.controller.s("graphing-calculator-text-arrow-mode-default");case"POSITIVE":return this.controller.s("graphing-calculator-text-arrow-mode-positive");case"BOTH":return this.controller.s("graphing-calculator-text-arrow-mode-both")}}};var Ft=__dcg_shared_module_exports__['h'](j());var WI={};__dcg_shared_module_exports__['g'](WI,{CLCalculator:()=>hF,Label:()=>__dcg_shared_module_exports__['gb'],applyDiff:()=>yF,applyLocalizationMap:()=>vF,blankGeometryCalculatorState:()=>C8,blankGraphingCalculatorState:()=>v8,builtInFrame:()=>y8,calculateDiff:()=>fF,colorHelpers:()=>__dcg_shared_module_exports__['pd'],context:()=>b8,expressionParser:()=>zI,extractLocalizationMap:()=>wF,formatLatex:()=>EF,migrateGeoStateToCalcState:()=>Yp,migrateToLatest:()=>_s,numberToDecimalString:()=>__dcg_shared_module_exports__['uc'],numberToLatex:()=>__dcg_shared_module_exports__['tc'],parseNodes:()=>LF,parser:()=>m8,policies:()=>w8,replaceIdentifierWithLatex:()=>C0,treeQueries:()=>f8,types:()=>x8});function q6(t){typeof t.min=="number"&&(t.min=""+t.min),typeof t.max=="number"&&(t.max=""+t.max),typeof t.step=="number"&&(t.step=""+t.step)}function z6(t){t.slider&&q6(t.slider),typeof t.id!="string"&&(t.id=""+t.id)}function U6(t){let e=H6(t)+1,i={},r,o;for(let n of t)if(z6(n),n.type==="folder")r=n.id,i[n.id]&&(n.id=""+e,e+=1),o=n.id,i[n.id]=!0,n.hasOwnProperty("folderId")&&delete n.folderId;else{if(r!==void 0&&n.folderId===r?n.folderId=o:(n.folderId&&(n.folderId=""),r=void 0,o=void 0),n.type==="table"&&Array.isArray(n.columns))for(let a of n.columns)i[a.id]&&(a.id=""+e,e+=1),i[a.id]=!0;i[n.id]&&(n.id=""+e,e+=1),i[n.id]=!0}}function Y_(t,e){let i=parseFloat(e);return i!==Math.floor(i)?t:Math.max(t,i)}function H6(t){let e=0;for(let i of t)if(e=Y_(e,i.id),i.type==="table"&&Array.isArray(i.column))for(let r of i.columns)Y_(e,r.id);return e}function NC(t){let e=__dcg_shared_module_exports__['l'](t);return Array.isArray(e.expressions.list)&&U6(e.expressions.list),e}var EI={NONE:"NONE",POSITIVE:"POSITIVE",BOTH:"BOTH"},W6={expression:!0,table:!0,image:!0,folder:!0,text:!0};function $6(t){if(t.type){if(W6.hasOwnProperty(t.type))return t.type;throw new Error("Invalid item type: '"+t.type+"'.")}return t.text!==void 0?"text":t.columns!==void 0||t.headings!==void 0?"table":"expression"}function BC(t){return t.replace(/\\(total|length|mean|median|quantile|stdev|stddev|stdDev|stdevp|stddevp|stdDevP|var|variance|cov|corr|ceil|floor|round|abs|mod|lcm|mcm|mcd|nCr|nPr|signum|sign|arcsinh|arccosh|arctanh|arccsch|arcsech|arccoth|arccsc|arcsec|arccot)/g,"\\operatorname{$1}")}function j6(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(i==="latex"?e[i]=BC(t[i]):i==="values"?e[i]=t[i].map(BC):e[i]=t[i]);return e}function Y6(t){var e=$6(t),i={},r;switch(e){case"expression":for(r in t)t.hasOwnProperty(r)&&(r==="latex"?i[r]=BC(t[r]):i[r]=t[r]);return i.type=e,i;case"table":for(r in t)t.hasOwnProperty(r)&&(r==="columns"?i[r]=t[r].map(j6):i[r]=t[r]);return i.type=e,i;case"image":for(r in t)t.hasOwnProperty(r)&&(r==="width"||r==="height"||r==="x"||r==="y"?i[r]=BC(t[r]):i[r]=t[r]);return i.type=e,i;case"text":case"folder":for(r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);return i.type=e,i}}var J_={none:EI.NONE,both:EI.BOTH,positive:EI.POSITIVE};function J6(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(i==="xAxisArrows"||i==="yAxisArrows"||(e[i]=t[i]));return e.xAxisArrowMode=J_[t.xAxisArrows||"none"],e.yAxisArrowMode=J_[t.yAxisArrows||"none"],e}function X_(t){if(t.version)throw new Error("Unexpected version: "+t.version);var e={};return e.graph=J6(t.graph),e.expressions={list:t.expressions.list.map(Y6)},e.version=0,e}var X6=1;function KC(t){return t.replace(/\\(sech|csch)/g,"\\operatorname{$1}")}function Q6(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(i==="latex"?e[i]=KC(t[i]):i==="values"?e[i]=t[i].map(KC):e[i]=t[i]);return e}function Z6(t){var e=t.type,i={},r;switch(e){case"expression":for(r in t)t.hasOwnProperty(r)&&(r==="latex"?i[r]=KC(t[r]):i[r]=t[r]);return i;case"table":for(r in t)t.hasOwnProperty(r)&&(r==="columns"?i[r]=t[r].map(Q6):i[r]=t[r]);return i;case"image":for(r in t)t.hasOwnProperty(r)&&(r==="width"||r==="height"||r==="x"||r==="y"?i[r]=KC(t[r]):i[r]=t[r]);return i;case"text":case"folder":for(r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);return i;default:throw new Error("Unexpected expression type: "+e)}}function Q_(t){if(t.version)throw new Error("Unexpected version: "+t.version);var e={};return e.graph=t.graph,e.expressions={list:t.expressions.list.map(Z6)},e.version=X6,e}var eU=2,tU="#C0504D",iU="#4F81BD",rU="#9BBB59",oU="#8064A2",nU="#F79646",aU="#000000";function Z_(t){switch(t){case tU:return __dcg_shared_module_exports__['nd'].RED;case iU:return __dcg_shared_module_exports__['nd'].BLUE;case rU:return __dcg_shared_module_exports__['nd'].GREEN;case oU:return __dcg_shared_module_exports__['nd'].PURPLE;case nU:return __dcg_shared_module_exports__['nd'].ORANGE;case aU:return __dcg_shared_module_exports__['nd'].BLACK;default:return t}}function sU(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(i==="color"?e[i]=Z_(t[i]):e[i]=t[i]);return e}function lU(t){var e=t.type,i={},r;switch(e){case"expression":for(r in t)t.hasOwnProperty(r)&&(r==="color"?i[r]=Z_(t[r]):i[r]=t[r]);return i;case"table":for(r in t)t.hasOwnProperty(r)&&(r==="columns"?i[r]=t[r].map(sU):i[r]=t[r]);return i;case"image":case"text":case"folder":for(r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);return i;default:throw new Error("Unexpected expression type: "+e)}}function eF(t){if(t.version>1)throw new Error("Unexpected version: "+t.version);var e={};return e.graph=t.graph,e.expressions={list:t.expressions.list.map(lU)},e.version=eU,e}var cU=3;function DI(t){if(typeof t=="string")return t;if(t===void 0)return"";var e=t+"";return e=e.replace(/1e\+?([-\d]+)/,"10^{$1}"),e=e.replace(/([-\d\.]+)e\+?([-\d]+)/,"$1\\cdot 10^{$2}"),e}function dU(t){var e=t.type,i={},r;switch(e){case"expression":for(r in t)t.hasOwnProperty(r)&&(r==="sliderMax"||r==="sliderMin"||r==="sliderInterval"?i[r]=DI(t[r]):r==="domain"?i[r]={max:DI(t[r].max),min:DI(t[r].min)}:i[r]=t[r]);return i.hasOwnProperty("sliderMin")&&i.sliderInterval===void 0&&(i.sliderInterval=""),i;case"image":case"table":case"text":case"folder":for(r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);return i;default:throw new Error("Unexpected expression type: "+e)}}function tF(t){if(t.version>2)throw new Error("Unexpected version: "+t.version);var e={};return e.graph=t.graph,e.expressions={list:t.expressions.list.map(dU)},e.version=cU,e}var pU=4;function iF(t){switch(t){case"point":return"POINT";case"cross":return"CROSS";case"open":return"OPEN";case"normal":return"SOLID";case"dashed":return"DASHED";case"dotted":return"DOTTED";default:return t}}function uU(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(i==="style"?e[i]=iF(t[i]):e[i]=t[i]);return e}function hU(t){var e=t.type,i={},r;switch(e){case"expression":for(r in t)t.hasOwnProperty(r)&&(r==="style"?i[r]=iF(t[r]):i[r]=t[r]);return i;case"table":for(r in t)t.hasOwnProperty(r)&&(r==="columns"?i[r]=t[r].map(uU):i[r]=t[r]);return i;case"image":case"text":case"folder":for(r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);return i;default:throw new Error("Unexpected expression type: "+e)}}function rF(t){if(t.version!==3)throw new Error("Unexpected version: "+t.version);var e={};return e.graph=t.graph,e.expressions={list:t.expressions.list.map(hU)},e.version=pU,e}function gU(t){var e={},i;for(var r in t)if(t.hasOwnProperty(r))switch(i=t[r],r){case"showAxes":e.showXAxis=i,e.showYAxis=i;break;case"showLabels":e.xAxisNumbers=i,e.yAxisNumbers=i,e.polarNumbers=i;break;case"labelXMode":e.xAxisStep=i==="pi"?Math.PI:0;break;case"labelYMode":e.yAxisStep=i==="pi"?Math.PI:0;break;default:e[r]=i}return e}function mU(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(i==="showPoints"||i==="showLine"||(e[i]=t[i]));return(t.showPoints!==void 0||t.showLine!==void 0)&&(t.showPoints&&t.showLine?e.columnMode="POINTS_AND_LINES":t.showPoints?e.columnMode="POINTS":t.showLine?e.columnMode="LINES":(e.hidden=!0,e.columnMode="POINTS")),e}function fU(t){var e=t.type,i={},r;switch(e){case"expression":t.hidden===void 0?t.hasOwnProperty("graphed")?i.hidden=!t.graphed:t.hasOwnProperty("userRequestedGraphing")?i.hidden=t.userRequestedGraphing==="never":i.hidden=!1:i.hidden=t.hidden;for(r in t)if(t.hasOwnProperty(r)&&!(r==="graphed"||r==="userRequestedGraphing"||r==="hidden")&&r!=="slider"){if(r==="color"){typeof t.color=="object"?i.color=t.color.value:i.color=t.color;continue}if(r==="style"){i.style=t.style==="normal"?"SOLID":t.style;continue}if(r==="sliderInterval"){i.sliderInterval=t.sliderInterval==="undefined"?"":t.sliderInterval;continue}i[r]=t[r]}return i;case"table":if(t.headings||t.columns){var o=t.headings?t.headings:t.columns;if(i.columns=o.map(mU),t.rows)for(var n=0;n<i.columns.length;n++){var a=i.columns[n];a.values=[];for(var s=0;s<t.rows.length;s++)a.values.push(t.rows[s][n])}}for(r in t)t.hasOwnProperty(r)&&(r==="rows"||r==="headings"||r==="columns"||(i[r]=t[r]));return i;case"image":case"text":case"folder":for(r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);return i;default:throw new Error("Unexpected expression type: "+e)}}function oF(t){if(t.version!==4)throw new Error("Unexpected version: "+t.version);var e={version:5,graph:gU(t.graph),expressions:{list:t.expressions.list.map(fU)}};return e}var bU=6;function yU(t){return t.length<2?!1:t[0]==="`"&&t[t.length-1]==="`"}function xU(t){if(yU(t))return{raw:t,parts:[t]};for(var e=["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"],i="({"+e.join("})|({")+"})",r=new RegExp(i,"g"),o=[],n=0,a=0,s;s=r.exec(t);){a=s.index,a>n&&o.push(t.substr(n,a-n));var l=s[0],c=l.replace(/[{}\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");o.push({symbol:c,str:l}),n=s.index+l.length}return n<t.length&&o.push(t.substr(n)),{raw:t,parts:o}}function wU(t){var e={};for(var i in t)if(t.hasOwnProperty(i)&&i!=="style")if(i==="values"&&(e[i]=t[i].map(function(r){return r?""+r:""})),i==="columnMode"&&!t.hasOwnProperty("points")&&!t.hasOwnProperty("lines"))switch(t[i]){case"LINES":e.points=!1,e.lines=!0;break;case"POINTS_AND_LINES":e.points=!0,e.lines=!0;break;default:e.points=!0,e.lines=!1}else e[i]=t[i];return e.hasOwnProperty("pointStyle")||(e.pointStyle="POINT"),e.hasOwnProperty("lineStyle")||(e.lineStyle="SOLID"),e.id=""+e.id,e}var nF={sliderMin:"min",sliderMax:"max",sliderInterval:"step",sliderHardMin:"hardMin",sliderHardMax:"hardMax",sliderAnimationPeriod:"animationPeriod",sliderLoopMode:"loopMode",sliderPlayDirection:"playDirection",sliderIsPlaying:"isPlaying"};function vU(t){var e=xU(t),i="";return __dcg_shared_module_exports__['ua'](e.parts,function(r){i+=typeof r=="object"&&r.str?"$"+r.str:r}),i}function CU(t,e){var i=t.latex.split("=");if(i.length===2){var r=wi(i[1],e);if(isFinite(r)){var o=t.slider.hardMin?wi(t.slider.min||"-10",e):void 0,n=t.slider.hardMax?wi(t.slider.max||"10",e):void 0,a=t.slider.step?wi(t.slider.step,e):void 0,s=__dcg_shared_module_exports__['Yb']({target:r,step:a,hardMin:o,hardMax:n});s.min||(delete t.slider.hardMin,delete t.slider.min),s.max||(delete t.slider.hardMax,delete t.slider.max),s.step||delete t.slider.step}}}function SU(t,e,i,r){var o=t.type,n={},a;switch(o){case"folder":for(a in t)t.hasOwnProperty(a)&&(a==="memberIds"||(n[a]=t[a]));break;case"expression":for(a in t)if(t.hasOwnProperty(a)){if(a==="style"&&!t.hasOwnProperty("pointStyle")&&!t.hasOwnProperty("lineStyle")){var s=t[a];__dcg_shared_module_exports__['za'](["POINT","OPEN","CROSS"],s)?(n.pointStyle=s,n.lineStyle="SOLID"):__dcg_shared_module_exports__['za'](["SOLID","DASHED","DOTTED"],s)?(n.pointStyle="POINT",n.lineStyle=s):(n.pointStyle="POINT",n.lineStyle="SOLID");continue}nF.hasOwnProperty(a)?(n.slider=n.slider||{},n.slider[nF[a]]=t[a]):n[a]=t[a],t.label&&(n.label=vU(t.label))}n.latex&&n.slider&&!n.slider.isPlaying&&CU(n,r),n.hasOwnProperty("fillOpacity")||(n.fillOpacity=.4),n.label===!1&&(n.label=""),n.labelSize||(n.labelSize="medium"),n.labelOrientation||(n.labelOrientation="default"),n.verticalLabel||(n.verticalLabel=!1),n.interactiveLabel||(n.interactiveLabel=!1);break;case"image":for(a in t)!t.hasOwnProperty(a)||a==="x"||a==="y"||(n[a]=t[a]);n.center="\\left("+(t.x||"0")+","+(t.y||"0")+"\\right)",n.angle=t.angle||"0",n.foreground=!!n.foreground;break;case"text":for(a in t)t.hasOwnProperty(a)&&(n[a]=t[a]);break;case"table":for(a in t)t.hasOwnProperty(a)&&(a==="columns"?n[a]=t[a].map(wU):n[a]=t[a]);break;default:throw new Error("Unexpected expression type: "+o)}if(n.id=""+n.id,t.type==="folder")e.folderId=n.id,e.memberIds=t.memberIds,n.folderId="";else{var l=i[n.id];e.memberIds&&e.memberIds[l]?n.folderId=e.folderId:(n.folderId="",e.folderId=void 0,e.memberIds=void 0)}return n}function EU(t){for(var e=0,i=/^[0-9]+$/,r=t.length-1;r>=0;r--){var o=t[r],n=o.id,a;if(i.test(n)&&(a=parseInt(n,10),a>e&&(e=a)),o.type==="table"&&o.columns)for(var s=o.columns.length-1;s>=0;s--)n=o.columns[s].id,i.test(n)&&(a=parseInt(n,10),a>e&&(e=a))}return e+1}function aF(t){if(t.version!==5)throw new Error("Unexpected version: "+t.version);var e=!!(t.graph&&t.graph.degreeMode),i=t.expressions.list,r=-1,o={},n={},a={};return{version:bU,graph:t.graph,expressions:{list:i.map(function(l){return o[l.id]?(r===-1&&(r=EU(i)),n[r]=l.id,l=__dcg_shared_module_exports__['l'](l),l.id=r+"",r+=1):n[l.id]=l.id,o[l.id]=!0,SU(l,a,n,e)})}}}function kI(t){if(t.version!==6)throw new Error(`Unexpected version: ${t.version}`);let e=t.expressions.list.map(i=>{if(i.type==="expression"&&i.domain){let r=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},i),{parametricDomain:{min:i.domain.min,max:i.domain.max}});return delete r.domain,r}return i});return{version:7,randomSeed:t.randomSeed,graph:t.graph,expressions:{list:e}}}function DU(t){return t.length===1?`0${t}`:t}function Ol(){let t=new Uint8Array(16);if(typeof crypto!="undefined")crypto.getRandomValues(t);else if(typeof msCrypto!="undefined")msCrypto.getRandomValues(t);else return __dcg_shared_module_exports__['lb'](Date.now().toString()+Math.random().toString());return Array.prototype.slice.call(t).map(i=>DU(i.toString(16))).join("")}function II(t){let e=t.split("_");return e.length===2&&e[1]&&e[1].length===1?e[0]+"_{"+e[1]+"}":t}function sF(t){return t=__dcg_shared_module_exports__['l'](t),!t.rules&&(t.assignment||t.expression)&&(t.rules=[{id:"1",assignment:t.assignment||"",expression:t.expression||""}]),delete t.assignment,delete t.expression,t}function ob(t){let e=/\\operatorname(?:\{stdev\}p|\{stddev\}p|\{stdDev\}P|\{var\}iance)/g;return t.replace(e,i=>{switch(i){case"\\operatorname{stdev}p":return"\\operatorname{stdevp}";case"\\operatorname{stddev}p":return"\\operatorname{stddevp}";case"\\operatorname{stdDev}P":return"\\operatorname{stdDevP}";case"\\operatorname{var}iance":return"\\operatorname{variance}";default:return""}})}function kU(t){return t.columns?__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t),{columns:t.columns.map(IU)}):t}function IU(t){let{latex:e,values:i}=t,r=__dcg_shared_module_exports__['a']({},t);return e&&(r.latex=ob(e),r.latex=II(r.latex)),i&&(r.values=i.map(function(o){return o?ob(o):""})),r}function TI(t){if(t.version!==7)throw new Error(`Unexpected version: ${t.version}`);let e=t.expressions.list.map(i=>{if(i.type==="image"){let r=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},i),{opacity:""});i.hasOwnProperty("stringOpacity")?r.opacity=i.stringOpacity:i.hasOwnProperty("opacity")?r.opacity=i.opacity+"":delete r.opacity,i.clickableInfo&&(r.clickableInfo=sF(i.clickableInfo)),delete r.stringOpacity;for(let o in i)if(o==="x"||o==="y"||o==="width"||o==="height"){let n=i[o];n&&(r[o]=ob(n))}return r}else if(i.type==="expression"){let r=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},i),{fillOpacity:"",lineStyle:"SOLID"});if(i.lineStyle==="SINGLE_PIXEL"?r.lineWidth="1":i.hasOwnProperty("lineStyle")?r.lineStyle=i.lineStyle:delete r.lineStyle,r.hasOwnProperty("lineWidth")||(r.lineWidth=""),r.hasOwnProperty("lineOpacity")||(r.lineOpacity=""),r.hasOwnProperty("pointOpacity")||(r.pointOpacity=""),r.hasOwnProperty("pointSize")||(r.pointSize=""),r.hasOwnProperty("colorLatex")||(r.colorLatex=""),typeof i.latex=="string"&&(r.latex=ob(i.latex)),i.latex&&(r.latex=ob(i.latex)),i.hasOwnProperty("stringFillOpacity")?r.fillOpacity=i.stringFillOpacity:i.hasOwnProperty("fillOpacity")?r.fillOpacity=i.fillOpacity+"":delete r.fillOpacity,r.slider&&i.slider&&i.slider.newLoopMode&&(r.slider=__dcg_shared_module_exports__['l'](r.slider),r.slider.loopMode=i.slider.newLoopMode,delete r.slider.newLoopMode),r.residualVariable&&(r.residualVariable=II(r.residualVariable)),r.regressionParameters){r.regressionParameters={};for(let o in i.regressionParameters){let n=II(o),a=i.regressionParameters[o];r.regressionParameters[n]=a}}return i.clickableInfo&&(r.clickableInfo=sF(i.clickableInfo)),r}else if(i.type==="table")return kU(i);return i});return{version:8,randomSeed:t.randomSeed||Ol(),graph:t.graph,expressions:{list:e}}}function TU(t,e,i){if(t.verticalLabel)switch(delete e.verticalLabel,i?e.labelAngle="90":e.labelAngle="\\frac{\\pi}{2}",t.labelOrientation){case"above":e.labelOrientation="right";break;case"below":e.labelOrientation="left";break;case"left":e.labelOrientation="above";break;case"right":e.labelOrientation="below";break}t.extendedLabelOrientation&&(e.labelOrientation=t.extendedLabelOrientation,delete e.extendedLabelOrientation)}function MU(t,e){if(t.vizProps)switch(t.vizProps.dotplotSize){case"small":e.pointSize="9";break;case"large":e.pointSize="20";break}if(t.vizProps){let i=__dcg_shared_module_exports__['a']({},t.vizProps);delete i.dotplotSize,Object.keys(i).length?e.vizProps=i:delete e.vizProps}}function MI(t){return t.filter(({assignment:e,expression:i})=>!!e&&!!i)}function GI(t){return t.map(({assignment:e,expression:i})=>`${e}\\to ${i}`).join(",")||""}function AI(t){let e=JSON.stringify(t),i=/_(\d)|_\{(\d+)\}/g,r,o={};for(;(r=i.exec(e))!==null;){let n=r[1]!==void 0?r[1]:r[2];o[n]=!0}return o}function VI(t,e){for(let i=e+1;;i++)if(!t[i])return i}function lF(t){let e=JSON.stringify(t),i=/"(\d+)"/g,r,o={};for(;(r=i.exec(e))!==null;){let n=r[1]!==void 0?r[1]:r[2];o[n]=!0}return o}function cF(t,e){for(let i=e+1;;i++)if(!t[i])return i}function GU(t){if(/^\d+$/.test(t)){let e=parseInt(t,10);return e===0?"\\infty":""+Math.round(1e3/e)}else return`\\frac{1000}{${t}}`}function AU(t,e){let i={handlerLatex:t,playing:!0,open:!0};return e!==void 0&&(i.minStepLatex=GU(e)),i}function LI(t){if(t.version!==8)throw new Error(`Unexpected version: ${t.version}`);var e=!1;t.graph&&t.graph.degreeMode&&(e=!0);let i=t.expressions.ticker||sh,r=0,o,n=0,a,s=[];for(let p of t.expressions.list)switch(p.type){case"expression":{let u=__dcg_shared_module_exports__['a']({},p);TU(p,u,e),MU(p,u);let g;if(p.clickableInfo&&p.clickableInfo.rules){let l=p.clickableInfo,{rules:m}=l,C=__dcg_shared_module_exports__['d'](l,["rules"]),S=MI(m),k=GI(S);if(S.length>1){o||(o=AI(t)),r=VI(o,r),a||(a=lF(t)),n=cF(a,n);let M=`A_{${r}}`;C.latex=M,g={type:"expression",id:""+n,latex:`${M}=${k}`},p.folderId!==void 0&&(g.folderId=p.folderId)}else C.latex=k;u.clickableInfo=C}u.clickableInfo&&u.clickableInfo.enabled&&u.hidden&&(u.clickableInfo.enabled=!1),s.push(u),g&&s.push(g);break}case"image":{if(p.clickableInfo&&p.clickableInfo.rules){let u=__dcg_shared_module_exports__['a']({},p),c=p.clickableInfo,{rules:g}=c,w=__dcg_shared_module_exports__['d'](c,["rules"]),C=MI(g),S=GI(C),k;if(C.length>1){o||(o=AI(t)),r=VI(o,r),a||(a=lF(t)),n=cF(a,n);let M=`A_{${r}}`;w.latex=M,k={type:"expression",id:""+n,latex:`${M}=${S}`},p.folderId!==void 0&&(k.folderId=p.folderId)}else w.latex=S;u.clickableInfo=w,s.push(u),k&&s.push(k)}else s.push(p);break}case"simulation":{let u;if(p.clickableInfo&&p.clickableInfo.rules){let m=MI(p.clickableInfo.rules);u=GI(m)}else u="";if(p.isPlaying&&u!==""){o||(o=AI(t)),r=VI(o,r);let m=`A_{${r}}`;u=`${m}=${u}`,i=AU(m,p.fps)}let g={type:"expression",id:p.id,latex:u};p.folderId!==void 0&&(g.folderId=p.folderId),s.push(g);break}default:s.push(p);break}return{version:9,randomSeed:t.randomSeed||Ol(),graph:t.graph,expressions:{list:s,ticker:i}}}function dF(t){t.clickableInfo&&(t.description===void 0&&t.clickableInfo.description!==void 0&&(t.description=t.clickableInfo.description),delete t.clickableInfo.description,Object.keys(t.clickableInfo).length===0&&delete t.clickableInfo)}function VU(t){switch(t.labelSize){case"small":t.labelSize="0.85";break;case"medium":t.labelSize="1";break;case"large":t.labelSize="1.35";break;default:break}}function LU(t){let e=0,i=/^[0-9]+$/;for(var r=t.length-1;r>=0;r--){var o=t[r];let n=o.id;if(i.test(n)){let a=parseInt(n,10);a>e&&(e=a)}if(o.type==="table"&&o.columns){for(let a=o.columns.length-1;a>=0;a--)if(n=o.columns[a].id,!!n&&i.test(n)){let s=parseInt(n,10);s>e&&(e=s)}}}return e}function PI(t){if(t.version!==9)throw new Error(`Unexpected version: ${t.version}`);let e=[],i={},r=LU(t.expressions.list);for(let n of t.expressions.list)switch(n.type){case"expression":{let l=__dcg_shared_module_exports__['a']({},n);dF(l),VU(l),e.push(l);break}case"image":{let l=__dcg_shared_module_exports__['a']({},n);dF(l);let c=l.description;(c===void 0||c==="")&&l.draggable&&l.center!==void 0&&l.center!==""&&(i[l.center]===void 0?i[l.center]=[l]:i[l.center].push(l)),e.push(l);break}case"table":let a=__dcg_shared_module_exports__['a']({},n);if(!a.columns||!Kn(a.columns[0].latex)){e.push(a);break}let s=a.columns[0].latex;for(let l=1;l<a.columns.length;l++){let c=a.columns[l];if(!c.lines||!Cs(c.latex,s))continue;delete c.lines,r++;let p={type:"expression",latex:"y="+yw(c.latex,s,"x"),id:`${r}`};c.color&&(p.color=c.color),c.lineStyle&&(p.lineStyle=c.lineStyle),c.lineWidth&&(p.lineWidth=c.lineWidth),c.lineOpacity&&(p.lineOpacity=c.lineOpacity),e.push(p)}e.push(a);break;default:e.push(n);break}for(let n of e){if(n.type!=="expression"||n.latex===void 0||n.latex===""||n.latex.indexOf("=")===-1||n.dragMode===void 0||n.dragMode==="NONE"||n.label===void 0||n.label==="")continue;let a=n.latex.slice(0,n.latex.indexOf("=")),s=i[a];if(s!==void 0)for(let l of s)l.description=n.label}return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t),{version:10,expressions:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t.expressions),{list:e})})}function PU(t){let e=/[ \\]*=[ \\]*\\operatorname\{(dilation|reflection|rotation|translation)\}\\left\(/g;return t.type!=="expression"||!t.latex||(t.latex=t.latex.replace(e,(i,r)=>{switch(r){case"dilation":return"\\left(x\\right)=\\operatorname{dilate}\\left(x,";case"rotation":return"\\left(x\\right)=\\operatorname{rotate}\\left(x,";case"reflection":return"\\left(x\\right)=\\operatorname{reflect}\\left(x,";case"translation":return"\\left(x\\right)=\\operatorname{translate}\\left(x,";default:return""}})),t}function OU(t,e){var i;if(t.type==="image"&&t.folderId&&!t.draggable&&!((i=t.clickableInfo)!=null&&i.enabled)&&e.has(t.folderId)&&t.disableGraphInteractions!==!1){let r=__dcg_shared_module_exports__['a']({},t);return r.disableGraphInteractions=!0,r}else return t}function _U(t){var a;if(t.type!=="expression")return t;let e=__dcg_shared_module_exports__['a']({},t);var i=(a=(t.latex||"").split("=")[0])==null?void 0:a.trim();let r=t.parametricDomain3Du,o=t.parametricDomain3Dv,n=t.parametricDomain;return i==="r"||(i==="z"?(r&&(e.parametricDomain3Dr=__dcg_shared_module_exports__['a']({},r)),o&&(e.polarDomain=__dcg_shared_module_exports__['a']({},o))):i==="\\rho"?(r&&(e.polarDomain=__dcg_shared_module_exports__['a']({},r)),o&&(e.parametricDomain3Dphi=__dcg_shared_module_exports__['a']({},o))):t.polarDomain||n&&(e.parametricDomain3Du=__dcg_shared_module_exports__['a']({},n),e.parametricDomain3Dv=__dcg_shared_module_exports__['a']({},n))),e}function OI(t){if(t.version!==10)throw new Error(`Unexpected version: ${t.version}`);let e=__dcg_shared_module_exports__['a']({},t.graph);delete e.projectorMode;let i=__dcg_shared_module_exports__['a']({},t.expressions),r=[],o=new Set;for(let n of i.list)n.type==="folder"&&n.collapsed&&o.add(n.id);for(let n of i.list)switch(n.type){case"expression":{if((e==null?void 0:e.product)==="geometry-calculator"){let a=__dcg_shared_module_exports__['a']({},n);PU(a),r.push(a)}else if((e==null?void 0:e.product)==="graphing-3d"){let a=_U(n);r.push(a)}else r.push(n);break}case"image":{r.push(OU(n,o));break}default:r.push(n)}return i.list=r,__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t),{version:11,graph:e,expressions:i})}function _I(t){if(t.version!==11)throw new Error(`Unexpected version: ${t.version}`);return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t),{version:12})}function pF(t){return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t),{version:11})}var FI=[X_,Q_,eF,tF,rF,oF,aF,kI,TI,LI,PI,OI,_I];var is=12;function _s(t){if(t.version>is)return typeof console!="undefined"&&console.warn&&console.warn("Loading saved state with version "+t.version+" but last known version is "+is+". States saved in a newer version of the calculator may not load correctly in an older version of the calculator."),NC(t);if(t.hasOwnProperty("version")&&!FI[t.version])return typeof console!="undefined"&&console.warn&&console.warn("State has invalid version "+t.version+". If a version is present, it should be a non-negative integer less than or equal to "+is+"."),NC(t);for(t.hasOwnProperty("version")||(t=FI[0](t));t.version<is;)t=FI[t.version+1](t);return NC(t)}function FU(t){return pF(t)}function uF(t){return FU(_s(t))}function hF(t){let e=_s(t);var i={},r=e.graph.degreeMode,o=e.randomSeed;let n=e.graph.product==="graphing"?"graphing":"geometry";function a(l){switch(l.type){case void 0:case"expression":{let p=__dcg_shared_module_exports__['id'](__dcg_shared_module_exports__['ed'](l,{is3d:!1}));i[p.id]=p}break;case"table":{let p=Wx(Hx(l));i[p.id]=p}break;case"image":{let p=nw(ow(l));i[p.id]=p;break}case"folder":case"text":break;default:return l}}for(var s of e.expressions.list)a(s);if(e.version>=10&&e.expressions.ticker){let l="dcg_ticker_guid_internal",c=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},gw(e.expressions.ticker)),{id:l});i[l]=hw(c)}return{setExpression(l){a(l)},getChangeSet(){return{statements:i,isCompleteState:!0,degreeMode:r,globalRandomSeed:o,evaluationMode:n}}}}function Dg(t,e){switch(t.type){case"Mul":case"DotMul":case"CrossMul":case"Div":case"Prime":case"Call":case"ImplicitCall":case"Dot":case"Pipes":case"Sqrt":case"Nthroot":case"Frac":case"Derivative":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Piecewise":case"Paren":case"Juxt":case"Superscript":case"Bang":case"Index":case"Equals":case"Inequality":case"Tilde":case"Pos":case"Neg":case"Add":case"Sub":case"List":case"Seq":case"Colon":case"Ellipsis":case"PercentOf":case"RightArrow":case"For":case"With":{let r=0;for(let o of t.args)r+=Dg(o,e);return r}case"Decimal":return e===void 0||parseFloat(t.val)===e?1:0;case"MixedNumber":{if(e===void 0)return 3;let r=0;return parseFloat(t.whole)===e&&(r+=1),parseFloat(t.num)===e&&(r+=1),parseFloat(t.den)===e&&(r+=1),r}case"Letter":case"EmptyPiecewise":case"Cmd":case"EmptyRangeEnd":return 0;case"Subscript":return Dg(t.args[0],e);case"InequalityChain":{let r=0;r+=Dg(t.first,e);for(let o of t.chain)r+=Dg(o.args[0],e);return r}default:throw`Unexpected surface node ${t.type}.`}}function gF(t){let e=t.length,i=new Array(e),r=new Array(e+1),o=0;for(let s=0;s<e;s++){let l;if(t[r[o]]<t[s])l=o+1;else{let c=1,p=o-1;for(;c<=p;){let u=Math.ceil((c+p)/2);t[r[u]]<t[s]?c=u+1:p=u-1}l=c}i[s]=r[l-1],r[l]=s,l>o&&(o=l)}let n=new Array(o),a=r[o];for(let s=o-1;s>=0;s--)n[s]=t[a],a=i[a];return n}function fF(t,e){return qC(t,e,0)}function qC(t,e,i){let r={};for(let o in t){if(!t.hasOwnProperty(o))continue;if(!e.hasOwnProperty(o)){r[o]={d:1};continue}let n=t[o],a=e[o],s=RU(n,a,i,o);s&&(r[o]=s)}for(let o in e)e.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(r[o]={s:e[o]});return r}function RU(t,e,i,r){if(__dcg_shared_module_exports__['Ta'](t)&&__dcg_shared_module_exports__['Ta'](e)){if(i===1&&r==="list"||i===2&&r==="columns")return BU(t,e);if(!__dcg_shared_module_exports__['Ra'](t,e))return{s:e}}else if(__dcg_shared_module_exports__['Ua'](t)&&__dcg_shared_module_exports__['Ua'](e)){let o=qC(t,e,NU(i,r));if(!__dcg_shared_module_exports__['Sa'](o))return{e:o}}else if(!__dcg_shared_module_exports__['Ra'](t,e))return{s:e}}function NU(t,e){return t===0&&e==="expressions"?1:3}function BU(t,e){let i={},r={};for(let s=0;s<t.length;s++){if(r[t[s].id]!==void 0)return{s:e};r[t[s].id]=s}let o={};for(let s=0;s<e.length;s++){if(o[e[s].id]!==void 0)return{s:e};o[e[s].id]=s}let n=KU(t,e,r),a=0;for(let s=0;s<t.length;s++){let l=t[s];if(!n[l.id])i[s]={d:1};else{let c=o[l.id],p=e[c],u={};if(a!==c&&(u.a=e.slice(a,c).map(g=>mF(t,r,g))),!__dcg_shared_module_exports__['Ra'](l,p)){let g=l.type==="table"&&p.type==="table";u.e=qC(l,p,g?2:3)}__dcg_shared_module_exports__['Sa'](u)||(i[s]=u),a=c+1}}if(a<e.length&&(i[t.length]={a:e.slice(a,e.length).map(s=>mF(t,r,s))}),!__dcg_shared_module_exports__['Sa'](i))return{l:i}}function mF(t,e,i){if(e[i.id]){let r=t[e[i.id]],o={f:e[i.id]};return __dcg_shared_module_exports__['Ra'](r,i)||(o.e=qC(r,i,3)),{m:o}}return{s:i}}function KU(t,e,i){let r={},o=e.filter(a=>i[a.id]!==void 0).map(a=>i[a.id]),n=gF(o);for(let a of n)r[t[a].id]=!0;return r}function yF(t,e){let i=__dcg_shared_module_exports__['l'](t);return zC(i,e)}function zC(t,e){for(let i of __dcg_shared_module_exports__['Oa'](e)){let r=e[i];zU(r)?t[i]=r.s:UU(r)?delete t[i]:HU(r)?t[i]=qU(t[i],r.l):WU(r)&&(t[i]=zC(t[i],r.e))}return t}function qU(t,e){let i=[];for(let o=0;o<t.length;o++){let n=e[o];n&&n.a&&i.push(...bF(t,n.a)),n&&n.e?i.push(zC(t[o],n.e)):(!n||!n.d)&&i.push(t[o])}let r=e[t.length];return r&&r.a&&i.push(...bF(t,r.a)),i}function bF(t,e){let i=[];for(let r of e)if($U(r))i.push(r.s);else if(jU(r)){let o=t[r.m.f];r.m.e?i.push(zC(o,r.m.e)):i.push(o)}return i}function zU(t){return t.hasOwnProperty("s")}function UU(t){return t.hasOwnProperty("d")}function HU(t){return t.hasOwnProperty("l")}function WU(t){return t.hasOwnProperty("e")}function $U(t){return t.hasOwnProperty("s")}function jU(t){return t.hasOwnProperty("m")}function xF(t){return t.location==="expression"||t.location==="object"?`${t.location}:${t.id}:${t.path}`:`${t.location}:${t.path}`}function RI(t){let e=()=>new Error(`Invalid key: ${t}`),i=t.split(":"),r=i[0];if(!r||r!="expression"&&r!="settings"&&r!="object")throw e();if(r=="settings"){if(i.length!=2)throw e();return{location:r,path:i[1]}}if(i.length!=3)throw e();return{location:r,id:i[1],path:i[2]}}function UC(t,e,i){if(!t)return;let r=e.split("."),o=t;for(let n=0;n<r.length;n++){let a=r[n];if(!o[a])break;n==r.length-1&&typeof o[a]=="string"?o[a]=i:o=o[a]}}function NI(t,e){return(i,r,o,n)=>{if(i){let a=xF(__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},e),{path:r}));t[a]={value:i,type:o,context:n}}}}function YU(t){var r,o;let e={},i=NI(e,{location:"expression",id:t.id});switch(t.type){case"expression":i(t.label,"label","interpolated-string","expression-list-expression-label"),i(t.description,"description","string","expression-list-expression-clickable-description");break;case"image":i(t.image_url,"image_url","image","expression-list-image-url"),i(t.description,"description","string","expression-list-image-clickable-description"),i((r=t.clickableInfo)==null?void 0:r.hoveredImage,"clickableInfo.hoveredImage","image","expression-list-image-clickable-hovered"),i((o=t.clickableInfo)==null?void 0:o.depressedImage,"clickableInfo.depressedImage","image","expression-list-image-clickable-depressed");break;case"text":i(t.text,"text","string","expression-list-note-text");break;case"folder":i(t.title,"title","string","expression-list-folder-title");break}return e}function JU(t){let e={},i=NI(e,{location:"settings"});return i(t.graph.xAxisLabel,"xAxisLabel","string","settings-xaxis-label"),i(t.graph.yAxisLabel,"yAxisLabel","string","settings-yaxis-label"),e}function XU(t){let e={},i=NI(e,{location:"object",id:t.id});return i(t.label,"label","string","geometry-object-label"),t.type==="image"&&i(t.url,"url","image","geometry-object-image-url"),e}function wF(t){let e={};if(t.type=="graph"){let i=t.graphState.expressions.list;for(let o of i){let n=YU(o);for(let a in n)e[a]=n[a]}let r=JU(t.graphState);for(let o in r)e[o]=r[o]}else{let i=t.geometryState.objects;for(let r in i){let o=XU(i[r]);for(let n in o)e[n]=o[n]}}return e}function vF(t,e,i){var o;let r=__dcg_shared_module_exports__['l'](t);if(i==="graph"){let n={},a=(o=r.expressions)==null?void 0:o.list,s=Array.isArray(a)?a:[];for(let l of s)n[l.id]=l;for(let l in e){let c=RI(l);c.location=="expression"?UC(n[c.id],c.path,e[l].value):UC(r.graph,c.path,e[l].value)}}else if(r.objects)for(let n in e){let a=RI(n);a.location=="object"&&UC(r.objects[a.id],a.path,e[n].value)}return r}function Zt(t){switch(t.type){case"Equals":return xo(t.args,"=");case"Inequality":let e=t.symbol==="<="?"\\le":t.symbol===">="?"\\ge":t.symbol;return xo(t.args,e);case"InequalityChain":return Zt(t.first)+t.chain.map(Zt).join("");case"TrailingInequalityPiece":return t.symbol+Zt(t.args[0]);case"Tilde":return xo(t.args,"~");case"Pos":return"+"+Zt(t.args[0]);case"Neg":return"-"+Zt(t.args[0]);case"Add":return xo(t.args,"+");case"Sub":return xo(t.args,"-");case"Mul":return xo(t.args,"*");case"DotMul":return xo(t.args,"\\cdot ");case"CrossMul":return xo(t.args,"\\times ");case"Div":return xo(t.args,"/");case"Bang":return Zt(t.args[0])+"!";case"Call":let i=KI(t.args);return i?i.script+"\\left("+i.arg+"\\right)":Zt(t.args[0])+"\\left("+Zt(t.args[1])+"\\right)";case"Paren":return"\\left("+Zt(t.args[0])+"\\right)";case"List":return"\\left["+t.args.map(Zt).join(",")+"\\right]";case"Pipes":return"\\left|"+Zt(t.args[0])+"\\right|";case"Index":return Zt(t.args[0])+"\\left["+Zt(t.args[1])+"\\right]";case"Subscript":return xo(t.args,"_",!0);case"Superscript":return xo(t.args,"^",!0);case"Prime":if(t.args[0].type==="Call"){let a=KI(t.args[0].args);return a?a.script+BI(t.nprimes)+"\\left("+a.arg+"\\right)":Zt(t.args[0].args[0])+BI(t.nprimes)+"\\left("+Zt(t.args[0].args[1])+"\\right)"}return Zt(t.args[0])+BI(t.nprimes);case"Seq":return t.args.map(Zt).join(",");case"Sqrt":return"\\sqrt"+nb(Zt(t.args[0]));case"Nthroot":return"\\sqrt["+Zt(t.args[0])+"]"+nb(Zt(t.args[1]));case"Frac":return"\\frac{"+Zt(t.args[0])+"}{"+Zt(t.args[1])+"}";case"Derivative":return"\\frac{d}{d"+Zt(t.args[0])+"}"+Zt(t.args[1]);case"Integral":case"EmptyIntegral":if(t.args[0].type!=="Cmd")throw new Error("Expected first argument of an integral to be the variable");let r="d"+t.args[0].val;if(t.args.length===3)return ab("int",t.args[1],t.args[2])+r;let o=Zt(t.args[3]);return ab("int",t.args[1],t.args[2])+o+r;case"Sum":return CF(t.args,"sum");case"Product":return CF(t.args,"prod");case"Piecewise":return"\\{"+Zt(t.args[0])+"\\}";case"EmptyPiecewise":return"\\{\\}";case"Colon":return xo(t.args,":");case"Ellipsis":return xo(t.args,"...");case"For":return xo(t.args,"\\for ");case"With":return xo(t.args,"\\with ");case"Dot":return xo(t.args,".");case"PercentOf":return xo(t.args,"\\% \\of ");case"RightArrow":return xo(t.args,"->");case"Juxt":return xo(t.args,t.args[0].type==="Cmd"?" ":"");case"ImplicitCall":{let a=KI(t.args);return a?a.script+a.arg:xo(t.args,"")}case"MixedNumber":return t.whole+"\\frac{"+t.num+"}{"+t.den+"}";case"Letter":case"Decimal":case"Alphanumeric":return t.val;case"Cmd":return"\\"+t.val;case"EmptyRangeEnd":return"EmptyRangeEnd";case"Err":throw t.error;default:return t}}function nb(t){return t.length>1?"{"+t+"}":t}function ab(t,e,i){let r=nb(Zt(e));if(i){let o=nb(Zt(i));return`\\${t}_${r}^${o}`}return`\\${t}_${r}`}function xo(t,e,i=!1){let r=Zt(t[0]),o=i?nb(Zt(t[1])):Zt(t[1]);return r+e+o}function CF(t,e){let i=Zt(t[0]);return ab(e,t[1],t[2])+i}function BI(t){let e="";for(let i=0;i<t;i++)e+="'";return e}function SF(t){return t.type==="Cmd"&&t.val==="logbase"}function KI(t){let e=t[1],i;if(t[1].type==="Seq"&&t[1].args.length===2&&(e=t[1].args[1],i=t[1].args[0]),t[0].type==="Superscript"&&SF(t[0].args[0]))return{script:ab("log",e,t[0].args[1]),arg:i?Zt(i):""};if(SF(t[0]))return{script:ab("log",e),arg:i?Zt(i):""}}function EF(t){let e=zI.parse(t.latex);if(e.type=="Err")return;let i=wo(e);for(;i.type==="Paren";)i=i.args[0];return _l(i)?{latex:t.latex}:{latex:Zt(i)}}function QU(t){return t.isPseudoSurfaceNode}function _l(t){switch(t.type){case"Letter":case"Decimal":case"Cmd":return t.val==="0";case"Paren":return _l(t.args[0]);default:return!1}}function Pd(t){switch(t.type){case"Letter":case"Decimal":case"Cmd":return t.val==="1";case"Paren":return Pd(t.args[0]);default:return!1}}function DF(t){return t.type==="Neg"?Pd(t.args[0]):t.type==="Paren"?DF(t.args[0]):!1}function HC(t){return{isPseudoSurfaceNode:!0,type:"Decimal",span:t,val:"0"}}function qI(t,e){return{isPseudoSurfaceNode:!0,type:"Neg",span:e,args:[t]}}function ZU(t,e){return{isPseudoSurfaceNode:!0,type:"Paren",span:e,args:[t]}}function ba(t,e){return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t),{span:e})}function wo(t,e){let i;switch(t.type){case"Add":{let n=wo(t.args[0]),a=wo(t.args[1]);if(_l(n))return ba(a,t.span);if(_l(a))return ba(n,t.span);let s;if(a.type==="Neg"?s=wo(a.args[0]):a.type==="Paren"&&a.args[0].type==="Neg"&&(s=wo(a.args[0].args[0])),s!==void 0)return{isPseudoSurfaceNode:!0,type:"Sub",span:t.span,args:[n,s]};i=[n,a];break}case"Sub":{let n=wo(t.args[0]),a=wo(t.args[1]);if(_l(n))return qI(a,t.span);if(_l(a))return ba(n,t.span);let s;if(a.type==="Neg"?s=a.args[0]:a.type==="Paren"&&a.args[0].type==="Neg"&&(s=a.args[0].args[0]),s)return{isPseudoSurfaceNode:!0,type:"Add",span:t.span,args:[n,s]};i=[n,a];break}case"Mul":{let n=wo(t.args[0]),a=wo(t.args[1]);if(Pd(n))return ba(a,t.span);if(Pd(a))return ba(n,t.span);if(_l(n)||_l(a))return HC(t.span);i=[n,a];break}case"Juxt":{let n=wo(t.args[0],t),a=wo(t.args[1],t);if(Pd(n))return ba(a,t.span);if(Pd(a))return ba(n,t.span);if(DF(n))return qI(a,t.span);if(_l(n)||_l(a))return HC(t.span);if(n.type==="Neg"){let s=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t),{type:"Juxt",isPseudoSurfaceNode:!0,args:[n.args[0],a]});return qI(s,t.span)}i=[n,a];break}case"Frac":case"Div":{let n=wo(t.args[0]),a=wo(t.args[1]);if(Pd(a))return ba(n,t.span);i=[n,a];break}case"Superscript":let r=wo(t.args[0]),o=wo(t.args[1]);if(Pd(o))return ba(r,t.span);(e==null?void 0:e.type)==="Juxt"&&e.args[0].type==="Decimal"&&r.type==="Decimal"&&(r=ZU(r,r.span)),i=[r,o];break;case"Paren":{let n=wo(t.args[0]);if((e==null?void 0:e.type)!=="Juxt"){if(__dcg_shared_module_exports__['ec'](n))return ba(n,t.span);let a="args"in n?n.args:void 0;if((!a||a.length<=1)&&n.type!=="Neg")return ba(n,t.span)}i=[n];break}case"Pos":{let n=wo(t.args[0]);return ba(n,t.span)}case"Neg":{let n=wo(t.args[0]),a="args"in n?n.args[0]:void 0;if(n.type==="Paren"&&a&&a.type==="Neg"&&a.args[0])return ba(wo(a.args[0]),t.span);if(n.type==="Neg"&&a)return ba(a,t.span);i=[n];break}case"Cmd":case"Letter":case"Decimal":case"MixedNumber":case"EmptyRangeEnd":case"EmptyPiecewise":case"InequalityChain":return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t),{isPseudoSurfaceNode:!0});default:i=t.args.map(n=>QU(n)?n:n.type==="Alphanumeric"?__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},n),{isPseudoSurfaceNode:!0}):wo(n))}return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t),{isPseudoSurfaceNode:!0,args:i})}var e8={version:is,randomSeed:"",graph:{viewport:{xmin:-10,ymin:-13.25,xmax:10,ymax:13.25}},expressions:{list:[{id:"1",type:"expression"}]}},Od=e8;var kg={version:is,randomSeed:"",graph:{viewport:{xmin:-10,ymin:-13.25,xmax:10,ymax:13.25},showGrid:!1,product:"geometry-calculator",showXAxis:!1,showYAxis:!1,degreeMode:!0},expressions:{list:[{type:"folder",id:__dcg_shared_module_exports__['_c'],title:"geometry",secret:!0},{id:"1",type:"expression"}]}};function t8(t){return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t),{version:"0"})}var kF=t8;var i8={centerX:0,centerY:0,size:15},r8={scale:1,unit:"",visible:!1,showLegend:!1};function o8(t){let e=t.objects||{},i=__dcg_shared_module_exports__['l'](e);for(let r in i){let o=i[r];o.label&&(o.showLabel=!0)}return{version:"1",objects:i,viewport:t.viewport||i8,customTools:t.customTools||{},grid:t.grid||r8}}var IF=o8;function n8(t){return(t.type==="point"||t.type==="glider")&&!t.draggable}function a8(t){let e=t.objects||{},i=__dcg_shared_module_exports__['l'](e),r=__dcg_shared_module_exports__['l'](t.grid);for(let o in i){let n=i[o];n8(n)&&(n.draggable=!0),n.type==="angle"&&n.showLabel&&!n.label&&(n.label="{angle}"),n.type==="segment"&&n.showLabel&&!n.label&&(n.label="{length}")}return r.unit="",r.scale=1,{version:"2",objects:i,viewport:t.viewport,customTools:t.customTools||{},grid:r}}var TF=a8;function UI(t){return t&&(t.type==="circle"||t.type==="compass")}function s8(t){let e=__dcg_shared_module_exports__['l'](t.objects||{});for(let i in e){let r=e[i];if(r.type==="point")r.y=-r.y;else if(r.type==="glider"){let o=e[r.parents.host];UI(o)&&(r.t=-r.t)}else if(r.type==="intersection"){let o=e[r.parents.host1],n=e[r.parents.host2];UI(o)&&UI(n)&&(r.negRoot=!r.negRoot)}}return{version:"3",objects:e,viewport:t.viewport,customTools:t.customTools||{},graphSettings:{showGrid:!!(t.grid||{}).visible,showAxes:!1,showAxisNumbers:!1}}}var MF=s8;function l8(t){let e=__dcg_shared_module_exports__['l'](t.objects||{});for(let i in e){let r=e[i];r.draggable===!1&&(r.locked=!0),delete r.draggable}return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t),{version:"4",objects:e})}var GF=l8;var WC=[kF,IF,TF,MF,GF],c8="4";function HI(t){let e=parseInt(c8,10),i=parseInt(t.version||"0",10);for(i>e&&typeof console!="undefined"&&console.warn&&console.warn(`Loading saved state with version ${i}, but last known version is ${e}. States saved in a newer version of the geometry tool may not load correctly in older versions of the tool.`),WC[i]||typeof console!="undefined"&&console.warn&&console.warn(`State has invalid version: ${i}. If a version is present, it should be a non-negative integer less than or equal to ${e}.`),i===0&&(t=WC[0](t));i<e;)i+=1,WC[i]&&(t=WC[i](t));return t}var d8=!1;function jp(t,e){var i=e[t];return i.type==="transformed-object"?jp(i.parents.object,e):i.type}function AF(t){switch(t){case"circle":case"compass":case"arc":return!0}return!1}function p8(t,e,i){var r=jp(e,i);if(r==="circle"||r==="compass"){let o=t/(2*Math.PI);return o<0?o+1:o}return t}function VF(t){switch(t){case"scaled-rotation":case"vector":return!0}return!1}function u8(t){switch(t){case"point":case"midpoint":case"glider":case"intersection":case"polygon":return"P";case"line":case"segment":case"ray":case"vector":case"parallel":case"perpendicular":return"L";case"circle":case"compass":return"C";case"arc":case"angle":return"A";case"image":return"I";case"dilation":case"rotation":case"translation":case"reflection":case"scaled-rotation":return"T";case"transformed-object":return"T";default:return t}}function Yp(t){let e=!d8,i=HI(t),r={},o={},n=I=>{if(o.hasOwnProperty(I))return o[I];let E=jp(I,i.objects);if(e&&!VF(E)){let _=r.token||1;r.token=_+1;let P="\\token{"+_+"}";return o[I]=P,P}let T=u8(E),A=r[T]||1;r[T]=A+1;let G=T+"_{"+A+"}";return o[I]=G,G};function a(I){let E=r[I]||1;return r[I]=E+1,I+"_{"+E+"}"}let s=(I,E,T)=>n(I)+"=\\operatorname{"+E+"}\\left("+T.map(n).join(",")+"\\right)",l=I=>`\\operatorname{segment}\\left(${I}.\\operatorname{start},${I}.\\operatorname{end}\\right)`,{centerX:c,centerY:p,size:u}=i.viewport;u*=1.25;let g=1,m=u/(1+g),w=m*g,C={version:11,randomSeed:"",expressions:{list:[]},graph:{product:"geometry-calculator",viewport:{xmin:c-m,xmax:c+m,ymin:p-w,ymax:p+w},showGrid:!1,showXAxis:!1,showYAxis:!1,squareAxes:!0,degreeMode:!0}};i.graphSettings.showGrid&&(C.graph.showGrid=!0,C.graph.xAxisMinorSubdivisions=1,C.graph.yAxisMinorSubdivisions=1,C.graph.xAxisStep=1,C.graph.yAxisStep=1);let S=C.expressions.list,k=[],M=[];for(let I in i.objects){let E=i.objects[I],T=jp(E.id,i.objects),A={id:E.id,type:"expression",color:E.color,hidden:!!E.hidden};if(e&&!VF(T)&&(A.folderId=__dcg_shared_module_exports__['_c']),E.locked&&(A.dragMode="NONE"),!E.hidden&&E.label&&E.showLabel){if(A.label=E.label,A.showLabel=!0,T==="segment"&&E.label.indexOf("{length}")!==-1)if(E.label==="{length}")A.label="";else{let G=a("l"),_=G+"=\\operatorname{round}\\left(\\operatorname{length}\\left("+n(E.id)+"\\right),2\\right)";M.push({id:"len-"+A.id,type:"expression",latex:_}),A.label=A.label.replace(/\{length\}/g,"${"+G+"}")}if(T==="angle"&&E.label.indexOf("{angle}")!==-1)if(E.label==="{angle}")A.label="";else{let G=a("a"),_=G+"=\\operatorname{round}\\left("+n(E.id)+"\\right)";M.push({id:"angle-"+A.id,type:"expression",latex:_}),A.label=A.label.replace(/\{angle}/g,"${"+G+"}\xB0")}if(T==="polygon"&&E.label.indexOf("{area}")!==-1)if(E.label==="{area}")A.label="";else{let G=a("a"),_=G+"=\\operatorname{round}\\left(\\operatorname{area}\\left("+n(E.id)+"\\right),2\\right)";M.push({id:"area-"+A.id,type:"expression",latex:_}),A.label=A.label.replace(/\{area\}/g,"${"+G+"}")}if(T==="polygon"&&E.label.indexOf("{perimeter}")!==-1){let G=a("p"),_=G+"=\\operatorname{round}\\left(\\operatorname{perimeter}\\left("+n(E.id)+"\\right),2\\right)";M.push({id:"perim-"+A.id,type:"expression",latex:_}),A.label=A.label.replace(/\{perimeter\}/g,"${"+G+"}")}}switch(E.type){case"point":{let O=E.x===null?0:E.x,R=E.y===null?0:E.y;A.latex=n(E.id)+"=\\left("+__dcg_shared_module_exports__['uc'](O)+","+__dcg_shared_module_exports__['uc'](R)+"\\right)";break}case"glider":{let O=jp(E.parents.host,i.objects),R=n(E.parents.host);O==="vector"&&(R=l(R)),A.latex=n(E.id)+"=\\operatorname{glider}\\left("+R+","+__dcg_shared_module_exports__['uc'](p8(E.t,E.parents.host,i.objects))+"\\right)";break}case"intersection":let G=jp(E.parents.host1,i.objects),_=jp(E.parents.host2,i.objects),P=n(E.parents.host1),N=n(E.parents.host2);G==="vector"&&(P=l(P)),_==="vector"&&(N=l(N));let W=E.negRoot;(AF(G)&&!AF(_)||_==="arc")&&(W=!W);let X=W?[P,N]:[N,P];A.latex=n(I)+"=\\operatorname{intersection}\\left("+X.join(",")+"\\right)";break;case"midpoint":A.latex=s(E.id,E.type,[E.parents.straight]);break;case"circle":A.latex=s(E.id,E.type,[E.parents.point1,E.parents.point2]);break;case"arc":A.latex=s(E.id,E.type,[E.parents.point1,E.parents.point2,E.parents.point3]);break;case"compass":A.latex=s(E.id,"circle",[E.parents.center,E.parents.straight]);break;case"line":case"segment":case"ray":case"vector":A.latex=s(E.id,E.type,[E.parents.point1,E.parents.point2]);break;case"parallel":case"perpendicular":A.latex=s(E.id,E.type,[E.parents.straight,E.parents.point]);break;case"polygon":A.latex=s(E.id,E.type,E.parents.points);break;case"angle":A.latex=s(E.id,E.type,[E.parents.point1,E.parents.point2,E.parents.point3]);break;case"transformed-object":A.latex=n(E.id)+"="+n(E.parents.transformation)+"\\left("+n(E.parents.object)+"\\right)";break;case"dilation":A.latex=n(E.id)+"\\left(x\\right)=\\operatorname{dilate}\\left(x,"+n(E.parents.center)+","+(E.scaleFactor||"0/0")+"\\right)";break;case"reflection":A.latex=n(E.id)+"\\left(x\\right)=\\operatorname{reflect}\\left(x,"+n(E.parents.straight)+"\\right)";break;case"translation":A.latex=n(E.id)+"\\left(x\\right)=\\operatorname{translate}\\left(x,"+n(E.parents.from)+","+n(E.parents.to)+"\\right)";break;case"rotation":A.latex=n(E.id)+"\\left(x\\right)=\\operatorname{rotate}\\left(x,"+n(E.parents.center)+","+(E.angle||"0/0")+"\\right)";break;case"scaled-rotation":let q=n(E.parents.center),B=n(E.parents.from),J=n(E.parents.to);A.latex=n(E.id)+`\\left(x\\right)=\\operatorname{rotate}\\left(\\operatorname{dilate}\\left(x,${q},\\frac{\\left|${J}-${q}\\right|}{\\left|${B}-${q}\\right|}\\right),${q},\\operatorname{directedangle}\\left(${B},${q},${J}\\right)\\right)`;break;case"image":break;default:return E}A.latex&&(A.folderId===__dcg_shared_module_exports__['_c']?k.push(A):M.push(A))}return S.push({type:"folder",id:__dcg_shared_module_exports__['_c'],title:"geometry",secret:!0}),S.push.apply(S,k),S.push.apply(S,M),C}function h8(t,e){return t==null&&(t=""),__dcg_shared_module_exports__['kc'](t,e)}function g8(t){if(t!=null)try{let e=__dcg_shared_module_exports__['dc'](t);return __dcg_shared_module_exports__['jc'](e)}catch(e){let i=e instanceof LF.Base?e.getInputSpan():void 0;i||(i=__dcg_shared_module_exports__['o'](t,0,t.length));let r=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},__dcg_shared_module_exports__['gc']()),{originalError:e});return __dcg_shared_module_exports__['fc'](i,r)}}var m8={parse:h8},zI={parse:g8},f8={countNumbers:Dg},b8=__dcg_shared_module_exports__['yd'],y8=__dcg_shared_module_exports__['hb'],x8=__dcg_shared_module_exports__['ha'],LF=__dcg_shared_module_exports__['Wb'],w8={graphing:new __dcg_shared_module_exports__['qd']({enableGeometry:!1,enable3d:!1,beta3d:!1,scales:void 0}),scientific:new __dcg_shared_module_exports__['xd']({singleExpression:!1}),fourFunction:new __dcg_shared_module_exports__['wd']({singleExpression:!1})},v8=Od,C8=kg;var{Switch:PF}=Ft.Components,Fl=class extends Ft.Class{template(){return Ft.createElement(PF,{key:()=>this.getLatex().indexOf("\\token")>=0},e=>e?Ft.createElement(Vl,{identifier:()=>this.getIdentifier(),insideMQ:()=>!1,controller:()=>this.props.controller(),insideGroup:()=>!1,putInTabOrder:()=>!1}):Ft.createElement("span",null,Ft.createElement(Te,{config:this.const({}),latex:()=>this.getLatex()})))}getLatex(){return this.props.latex()||"unknown"}getIdentifier(){let e=this.props.latex();return e?__dcg_shared_module_exports__['gb'].latexToIdentifier(e):""}},$C=class extends Ft.Class{init(){this.controller=this.props.controller()}template(){return Ft.createElement(PF,{key:this.bindFn(this.getTransformationType)},e=>{switch(e){case"translate":return this.getParents().length===1?Ft.createElement("div",null,Ft.const("Translate by"),Ft.const(" "),Ft.createElement(Fl,{controller:this.props.controller,latex:()=>this.getParents()[0]})):Ft.createElement("div",null,Ft.const("Translate from"),Ft.const(" "),Ft.createElement(Fl,{controller:this.props.controller,latex:()=>this.getParents()[0]}),Ft.const(" "),Ft.const("to"),Ft.const(" "),Ft.createElement(Fl,{controller:this.props.controller,latex:()=>this.getParents()[1]}));case"reflect":return Ft.createElement("div",null,Ft.const("Reflect over"),Ft.const(" "),Ft.createElement(Fl,{controller:this.props.controller,latex:()=>this.getParents()[0]}));case"dilate":return Ft.createElement("div",null,Ft.const("Dilate at"),Ft.const(" "),Ft.createElement(Fl,{controller:this.props.controller,latex:()=>this.getParents()[0]}),Ft.const(" by "),Ft.createElement(Fl,{controller:this.props.controller,latex:()=>this.getRawParentLatex(2)}));case"rotate":return Ft.createElement("div",null,Ft.const("Rotate around"),Ft.const(" "),Ft.createElement(Fl,{controller:this.props.controller,latex:()=>this.getParents()[0]}),Ft.const(" by "),Ft.createElement(Fl,{controller:this.props.controller,latex:()=>this.getRawParentLatex(2)+(this.controller.getGraphSettings().degreeMode?"\xB0":"")}));case void 0:return Ft.createElement("span",null)}})}getParents(){let e=this.getGeometry();return!e||!e.call?[]:e&&e.call?e.call.parents.map(i=>__dcg_shared_module_exports__['gb'].geoParentToLatex(i)):[]}getRawParentLatex(e){var a;var i=(a=this.props.model())==null?void 0:a.latex;if(!i)return"";let o=__dcg_shared_module_exports__['kc'](i)._expression;if(!o)return"";let n=o.args[e];return!n||!n.getInputString?"":n.getInputString()||""}getGeometry(){var e;return(e=this.props.model())==null?void 0:e.formula.geometry}getTransformationType(){var r;let e=this.getGeometry(),i=(r=e==null?void 0:e.call)==null?void 0:r.symbol;switch(i){case"translate":case"dilate":case"reflect":case"rotate":return i}}};var OF={translate:!0,reflect:!0,dilate:!0,rotate:!0},sle=__dcg_shared_module_exports__['a']({selection:!0,point:!0,line:!0,segment:!0,ray:!0,vector:!0,circle:!0,arc:!0,parallel:!0,perpendicular:!0,midpoint:!0,polygon:!0,compass:!0,angle:!0,directedangle:!0,"box-selection":!0,"expression-edit":!0},OF),Ig=Object.keys(OF);var pr=__dcg_shared_module_exports__['h'](j());var{Each:_F,If:S8}=pr.Components,jC=class extends pr.Class{init(){this.controller=this.props.controller(),this.focusOrder=this.getTransformationFocusLocations(),this.cacheExistingTransformations()}willUpdate(){this.cacheExistingTransformations()}handleTap(e,i){e.handle(),e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"select-geo-tool",tool:i,focusGraphPaper:e.device==="keyboard"})}template(){return pr.createElement("div",{class:()=>({"dcg-generic-options-menu":!0,"dcg-options-menu":!0,"dcg-multi-select-transformations-menu":!0}),role:pr.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-transformations-menu")},pr.createElement("div",{onKeydown:this.bindFn(this.handleKeydown),class:pr.const("dcg-new-transformations-container"),role:pr.const("menu"),"aria-orientation":pr.const("horizontal"),"aria-label":()=>this.controller.s("graphing-calculator-label-new-transformation")},_F(()=>this.getTransformations(),{item:e=>pr.createElement("button",{class:()=>({"dcg-new-transformation":!0,"dcg-disabled":!this.controller.isGeoToolEnabled(e),"dcg-will-be-hidden-or-disabled":this.controller.toolWillBeHiddenOrDisabled(e)}),tabindex:()=>this.getTransformations().indexOf(e)===0?0:-1,role:pr.const("menuitemradio"),manageFocus:()=>Ne({controller:this.controller,location:{type:"geo-basic-tool",tool:e}}),"dcg-geo-tool":this.const(e),onTap:i=>this.handleTap(i,e)},pr.createElement("i",{class:()=>this.getTransformationIcon(e)}),()=>this.getTransformationName(e))})),pr.createElement(S8,{predicate:()=>this.cachedExistingTransformations.length>0},()=>pr.createElement("div",{class:pr.const("dcg-transformation-header")},()=>this.controller.s("graphing-calculator-label-recent-transformations"))),pr.createElement("div",{role:pr.const("group"),class:pr.const("dcg-existing-transformations-container"),"aria-label":()=>this.controller.s("graphing-calculator-label-recent-transformations")},_F(()=>this.cachedExistingTransformations,{item:e=>pr.createElement("div",{class:pr.const("dcg-existing-transformation"),role:pr.const("button"),tabindex:pr.const("0"),onTap:()=>this.applyTransformation(e),onPointerOut:i=>this.onPointerOut(i,e),onPointerOver:i=>this.onPointerOver(i,e),willUnmount:()=>this.onImplicitMouseOut(e)},pr.createElement($C,{controller:this.props.controller,model:()=>e})),key:e=>e.id})))}handleKeydown(e){let i=be(e);if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||i!=="Left"&&i!=="Right"&&i!=="Home"&&i!=="End")return;let r=this.controller.getFocusLocation();if(!r)return;let o=__dcg_shared_module_exports__['Ja'](this.focusOrder,r);if(o===-1)return;e.preventDefault(),e.stopPropagation();let n=o;i==="Left"?n=Math.max(0,o-1):i==="Right"?n=Math.min(this.focusOrder.length-1,o+1):i==="Home"?n=0:i==="End"&&(n=this.focusOrder.length-1),n!==o&&this.controller.dispatch({type:"set-focus-location",location:this.focusOrder[n]})}computeExistingTransformations(){var i,r;let e=[];for(let o of this.controller.getAllItemModels()){if(o.type!=="expression"||!this.controller.isItemInGeoFolder(o.id))continue;let n=(i=o.formula.geometry)==null?void 0:i.call;if(!n||!__dcg_shared_module_exports__['$b'](n.symbol))continue;let a=(r=o.formula.typed_constant_value)==null?void 0:r.valueType;a!==void 0&&__dcg_shared_module_exports__['fa'](a,__dcg_shared_module_exports__['Q'])&&e.push(o)}return e.reverse()}cacheExistingTransformations(){this.cachedExistingTransformations=this.computeExistingTransformations()}getTransformations(){return Ig.filter(e=>this.controller.isGeoToolVisible(e))}getTransformationIcon(e){switch(e){case"dilate":return"dcg-icon-dilation";case"reflect":return"dcg-icon-reflection";case"rotate":return"dcg-icon-rotation";case"translate":return"dcg-icon-vector"}}getTransformationName(e){switch(e){case"dilate":return this.controller.s("graphing-calculator-text-geometry-tool-dilate-display-name");case"reflect":return this.controller.s("graphing-calculator-text-geometry-tool-reflect-display-name");case"rotate":return this.controller.s("graphing-calculator-text-geometry-tool-rotate-display-name");case"translate":return this.controller.s("graphing-calculator-text-geometry-tool-translate-display-name")}}getTransformationFocusLocations(){let e=[];return this.getTransformations().forEach(i=>{e.push({type:"geo-basic-tool",tool:i})}),e}onPointerOver(e,i){var o;if(e.pointerType!=="mouse")return;let r=(o=Er(i))==null?void 0:o.identifier;r&&(this.currentlyActiveTokenIdentifier=r,this.controller.dispatch({type:"set-active-token",identifier:this.currentlyActiveTokenIdentifier,style:"hovered"}))}onPointerOut(e,i){var o;if(e.pointerType!=="mouse")return;let r=(o=Er(i))==null?void 0:o.identifier;r&&this.currentlyActiveTokenIdentifier&&this.currentlyActiveTokenIdentifier===r&&(this.controller.dispatch({type:"unset-active-token",identifier:this.currentlyActiveTokenIdentifier,style:"hovered"}),this.currentlyActiveTokenIdentifier=void 0)}onImplicitMouseOut(e){var r;let i=(r=Er(e))==null?void 0:r.identifier;i&&this.currentlyActiveTokenIdentifier&&this.currentlyActiveTokenIdentifier===i&&this.controller.runAfterDispatch(()=>{let o=this.currentlyActiveTokenIdentifier;o&&(this.currentlyActiveTokenIdentifier=void 0,this.controller.dispatch({type:"unset-active-token",identifier:o,style:"hovered"}))})}applyTransformation(e){var r;if(!((r=e.formula.geometry)!=null&&r.identifier))return;let i=__dcg_shared_module_exports__['cb'](e.formula.geometry.identifier);this.controller.dispatch({type:"apply-transformation-to-selected",assignmentLatex:i})}};var Tg=__dcg_shared_module_exports__['h'](j());Tt();var FF='input, button, textarea, select [role="textbox"], [tabindex="0"], [role="button"]',rs=class extends Tg.Class{constructor(){super(...arguments),this.globalKeyDownListener=e=>{let i=be(e);i===Yo?(e.preventDefault(),e.stopPropagation(),this.focusIcon(),this.hideOptions()):i==="Tab"&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&(e.shiftKey?e.shiftKey&&(this.isIconModelFocused()?(e.preventDefault(),e.stopPropagation(),this.focusLastOption()):this.isFirstOptionViewFocused()&&(e.preventDefault(),e.stopPropagation(),this.focusIcon())):this.isIconModelFocused()?(e.preventDefault(),e.stopPropagation(),this.focusFirstOption()):this.isLastOptionViewFocused()&&(e.preventDefault(),e.stopPropagation(),this.focusIcon()))}}init(){this.controller=this.props.controller()}template(){return Tg.createElement("div",{class:Tg.const("dcg-options-menu-container"),didMount:this.bindFn(this.didMountView),didUnmount:this.bindFn(this.didUnmountView)},this.children)}didMount(){this.props.openAriaAlert&&le(this.props.openAriaAlert())}willUnmount(){this.props.closeAriaAlert&&le(this.props.closeAriaAlert())}didMountView(e){this.guid=__dcg_shared_module_exports__['Xa']("dcg-dropdown-menu"),this.openView=e,this.positionMenu(),this.moveFocusIfAppropriate(),this.attachKeyDownListeners(),this.attachScrollTapListeners()}isIconModelFocused(){let e=this.controller.getFocusLocation();return __dcg_shared_module_exports__['Ra'](e,this.props.menuButtonFocusLocation())}attachKeyDownListeners(){this.props.shouldHandleTabAndEscape()&&document.addEventListener("keydown",this.globalKeyDownListener)}attachScrollTapListeners(){H(document.body).on(`dcg-tapstart.${this.guid}`,e=>{if(!this.openView)return;let{target:i}=e,r=this.controller.getOpenMenuIconSelector();if(r&&i.closest(r))return;if(this.openView.contains(i)){if(!i.matches(FF))return;let{first:n,last:a}=this.getDOMTabStops();n===i?this.focusFirstOption():a===i&&this.focusLastOption();return}Array.from(document.querySelectorAll(".dcg-keypad,.dcg-show-keypad-container")).some(n=>n.contains(i))||this.hideOptions()})}didUnmountView(){document.removeEventListener("keydown",this.globalKeyDownListener),H(document.body).off(`.${this.guid}`),this.openView=void 0}moveFocusIfAppropriate(){this.shouldMoveFocusToFirstOption()?this.focusFirstOption():this.shouldMoveFocusToLastOption()&&this.focusLastOption()}hideOptions(){this.controller.dispatch({type:"close-item-settings-menu"})}getRootEl(){return this.controller.findEl(this.props.rootElSelector())}positionMenu(){let e=this.controller.getOpenMenuIcon();if(!e||!this.openView)return;let i=this.getRootEl();if(!i)return;let r=i.getBoundingClientRect(),o=e.getBoundingClientRect(),n={top:o.top-r.top,left:o.left-r.left};Rn(this.openView,{top:n.top+"px",left:n.left+"px",display:"block"})}focusIcon(){this.controller.focusOpenMenuIcon()}isFirstOptionViewFocused(){let{first:e}=this.getDOMTabStops();return e!==void 0&&e.matches(":focus")}shouldMoveFocusToFirstOption(){if(this.props.focusOnOpen)return this.props.focusOnOpen()==="first";if(this.openView&&this.openView.matches(":focus-within"))return!1;let e=this.controller.getOpenItemMenu();return(e==null?void 0:e.type)===this.props.menuType()&&!!(e!=null&&e.focusFirstOption)}shouldMoveFocusToLastOption(){return this.props.focusOnOpen?this.props.focusOnOpen()==="last":!1}focusFirstOption(){let{first:e}=this.getDOMTabStops();e!==void 0&&e.focus()}focusLastOption(){let{last:e}=this.getDOMTabStops();e!==void 0&&e.focus()}isLastOptionViewFocused(){let{last:e}=this.getDOMTabStops();return e!==void 0&&e.matches(":focus")}getDOMTabStops(){if(this.openView===void 0)return{};let i=this.openView.querySelectorAll(FF);if(i.length===0)return{};let r=0;for(;!wp(i.item(r))&&r<i.length;)r++;let o=i.item(r);for(r=i.length-1;!wp(i.item(r))&&r<i.length;)r--;let n=i.item(r);return{first:o,last:n}}};var{If:sb,Switch:E8}=ct.Components,YC=class extends ct.Class{init(){this.controller=this.props.controller(),this.focusOrder=[{type:"geo-header-back-link"},{type:"multi-select-delete-icon"},{type:"multi-select-show-hide-icon"},{type:"multi-select-transformations-icon"},{type:"multi-select-more-icon"}]}template(){return ct.createElement("div",{class:ct.const("dcg-multi-select-header dcg-animate-in-after-initial-load"),onKeydown:this.bindFn(this.handleKeydown),role:ct.const("toolbar"),"aria-label":this.bindFn(this.getSelectedCountString)},ct.createElement(vg,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-geometry-deselect-all"),controller:this.props.controller,message:this.bindFn(this.getSelectedCountString),onBack:this.bindFn(this.onDone)}),ct.createElement(sb,{predicate:()=>this.hasSelectedAndEditableItems()},()=>ct.createElement(De,{tooltip:this.bindFn(this.getDeleteItemString)},ct.createElement("span",{"aria-label":this.bindFn(this.getDeleteItemString),role:ct.const("button"),tabindex:ct.const("-1"),handleEvent:ct.const("true"),class:ct.const("dcg-multi-select-icon-button dcg-delete-btn"),onTap:this.bindFn(this.deleteSelected),manageFocus:this.const(Ne({controller:this.controller,location:{type:"multi-select-delete-icon"}}))},ct.createElement("i",{class:ct.const("dcg-icon-trashcan"),"aria-hidden":ct.const("true")})))),ct.createElement(E8,{key:this.bindFn(this.getSelectedItemsKey)},()=>ct.createElement(sb,{predicate:()=>this.hasSelectedAndEditableItems()},()=>ct.createElement("div",{class:()=>({"dcg-btn-outline":!0,"dcg-show-hide-btn":!0,"dcg-any-visible-objects":this.anyVisible()}),handleEvent:ct.const("true"),tabindex:ct.const("-1"),role:ct.const("button"),onTap:this.bindFn(this.toggleItemsVisible),manageFocus:this.const(Ne({controller:this.controller,location:{type:"multi-select-show-hide-icon"}}))},ct.createElement("div",{"aria-hidden":()=>!this.anyVisible()},()=>this.controller.s("graphing-calculator-text-geometry-hide-objects",{count:new mo(this.getSelectedCount())})),ct.createElement("div",{"aria-hidden":this.bindFn(this.anyVisible)},()=>this.controller.s("graphing-calculator-text-geometry-show-objects",{count:new mo(this.getSelectedCount())}))))),ct.createElement(sb,{predicate:()=>this.controller.isSomeTransformToolVisible()},()=>ct.createElement("div",{class:()=>({"dcg-btn-outline":!0,"dcg-transformations-button":!0,"dcg-transformations-open":this.isTransformationsMenuOpen()}),handleEvent:ct.const("true"),tabindex:ct.const("-1"),role:ct.const("button"),"dcg-open-menu-guid":()=>lb(),onTap:this.bindFn(this.toggleTransformationsMenu),manageFocus:this.const(Ne({controller:this.controller,location:{type:"multi-select-transformations-icon"}}))},this.bindFn(this.getTransformationsString),ct.createElement("i",{class:ct.const("dcg-icon-caret-down"),"aria-hidden":ct.const("true")}))),ct.createElement(De,{tooltip:this.bindFn(this.getMoreString)},ct.createElement("span",{"aria-label":this.bindFn(this.getMoreString),role:ct.const("button"),tabindex:ct.const("-1"),handleEvent:ct.const("true"),"aria-expanded":this.bindFn(this.isMoreMenuOpen),class:ct.const("dcg-multi-select-icon-button dcg-more-options"),"dcg-open-menu-guid":()=>Jp(),manageFocus:this.const(Ne({controller:this.controller,location:{type:"multi-select-more-icon"}})),onTap:this.bindFn(this.toggleMoreMenu)},ct.createElement(LC,null))),ct.createElement(sb,{predicate:this.bindFn(this.isTransformationsMenuOpen)},()=>ct.createElement(rs,{controller:this.props.controller,shouldHandleTabAndEscape:this.const(!0),menuType:this.const("multi-select-transformations"),menuButtonFocusLocation:this.const({type:"multi-select-transformations-icon"}),rootElSelector:this.const(".dcg-multi-select-header")},ct.createElement(jC,{controller:this.props.controller}))),ct.createElement(sb,{predicate:this.bindFn(this.isMoreMenuOpen)},()=>ct.createElement(rs,{controller:this.props.controller,shouldHandleTabAndEscape:this.const(!0),menuType:this.const("multi-select-more"),menuButtonFocusLocation:this.const({type:"multi-select-more-icon"}),rootElSelector:this.const(".dcg-multi-select-header")},ct.createElement(RC,{controller:this.props.controller}))))}handleKeydown(e){let i=be(e);if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||i!=="Left"&&i!=="Right"&&i!=="Home"&&i!=="End")return;let r=this.controller.getFocusLocation();if(!r)return;let o=__dcg_shared_module_exports__['Ja'](this.focusOrder,r);if(o===-1)return;e.preventDefault(),e.stopPropagation();let n=o;i==="Left"?n=Math.max(0,o-1):i==="Right"?n=Math.min(this.focusOrder.length-1,o+1):i==="Home"?n=0:i==="End"&&(n=this.focusOrder.length-1),n!==o&&this.controller.dispatch({type:"set-focus-location",location:this.focusOrder[n]})}getSelectedCountString(){return this.controller.getGrapherDimensions().width<450?"":this.controller.s("graphing-calculator-text-geometry-selected-objects",{count:new mo(this.getSelectedCount())})}getSelectedAndEditableItems(){return this.controller.getAllSelectedItems().filter(i=>!this.controller.isItemReadonly(i.id))}hasSelectedAndEditableItems(){return this.getSelectedAndEditableItems().length>0}getDeleteItemString(){let e=this.getSelectedCount(),i=this.getSelectedAndEditableItems().length;return e-i>0?this.controller.s("graphing-calculator-text-geometry-delete-selected-unlocked-objects",{count:new mo(i)}):this.controller.s("graphing-calculator-text-geometry-delete-selected-objects",{count:new mo(i)})}getMoreString(){return this.controller.s("graphing-calculator-text-geometry-multi-select-more-dropdown")}getTransformationsString(){return this.controller.s("graphing-calculator-text-geometry-multi-select-transform")}getSelectedItemsKey(){let e=this.controller.getAllSelectedItems();return __dcg_shared_module_exports__['Aa'](e,"id").join("-")}toggleItemsVisible(){this.anyVisible()?this.hideSelected():this.showSelected()}anyVisible(){let e=this.controller.getAllSelectedItems();return __dcg_shared_module_exports__['ya'](e,i=>!Dn(i))}isFolderMenuOpen(){return this.controller.isItemSettingsMenuOpen(D8())}isMoreMenuOpen(){return this.controller.isItemSettingsMenuOpen(Jp())}isTransformationsMenuOpen(){return this.controller.isItemSettingsMenuOpen(lb())}toggleMoreMenu(){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"multi-select-more",guid:Jp(),focusFirstOption:!0}})}toggleTransformationsMenu(){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"multi-select-transformations",guid:lb(),focusFirstOption:!0}})}getSelectedCount(){return this.controller.getAllSelectedItems().length}hideSelected(){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"visible",value:!1}})}showSelected(){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"visible",value:!0}})}onDone(){this.controller.dispatch({type:"set-none-selected"})}deleteSelected(){this.controller.dispatch({type:"delete-all-selected-items"})}};function D8(){return"**multi-select-folder**"}function Jp(){return"**multi-select-more**"}function lb(){return"**multi-select-transformations**"}var Xp=class{constructor(){this.displayName="graphing-calculator-text-geometry-tool-box-selection-display-name";this.toolType="selection";this.icon=[{type:"stroked-path",color:"#aaa",path:[35,35,51,35,51,51,35,51,35,35]},{type:"filled-polygon",color:"#000",path:[50,50,63.5,62,58.25,62.75,62,72.5,59.75,74,55.25,64.25,50.75,68,50,50]}]}getNumberInputLatex(){return""}clearTentativeOutputs(){}canNextInputBePoint(){return!1}getAllValidNextInputTypes(){return __dcg_shared_module_exports__['Z'].filter(e=>this.isValidNextInputType(e))}isValidNextInputType(e){return e!==__dcg_shared_module_exports__['Q']}getNonPointInputType(){}getHint(){return""}getExpressionEditHint(e){return this.getHint()}onNumberInput(e){}onMove(e){return!0}onFocus(e){}tryCommitResults(){return{committed:void 0}}shouldUseJitEdges(){return!1}shouldHighlightRelevantObjects(){return!1}};function RF(t,e){return t===void 0?e===void 0:!(e===void 0||t.calcId!==e.calcId||t.listIndex!==e.listIndex||t.polygonEdge!==e.polygonEdge)}var JC=class{constructor(e){this.poiController=e,this.controller=e.controller,this.grapher=e.manager}getKeyboardAttention(){return this.objectUnderAttention}setKeyboardAttention(e){this.objectUnderAttention=e}findNonGeometryTabTargetsInGraph(){let e=this.grapher.imageLayer.getOrderedTabTargets(),i=this.grapher.clickableObjectsLayer.getOrderedTabTargets(),r=this.grapher.movablePointsLayer.getOrderedTabTargets();return e.concat(i).concat(r)}findTabbableObjectsForCurrentTool(e){let i=e==null?void 0:e.calcId,r={};this.controller.isGeometry()&&this.controller.getGeoModel().getAllChoosableDefsUnordered({mode:"tab"}).forEach(u=>{var m;r[u.calcId]||(r[u.calcId]=[]);let g={calcId:u.calcId,listIndex:u.listIndex,polygonEdge:(m=u.polygonEdgeInfo)==null?void 0:m.edgeNumber,geoDef:__dcg_shared_module_exports__['a']({},u)};r[u.calcId].push(g)});let o=this.controller.getGeoModel().getCurrentTool();(!this.controller.isGeometry()||o.isValidNextInputType(__dcg_shared_module_exports__['q']))&&this.findNonGeometryTabTargetsInGraph().filter(p=>!(o instanceof Xp&&this.controller.isClickableId(p.calcId))).forEach(p=>{var g;let u=(g=p.listIndex)!=null?g:0;if(!r[p.calcId])r[p.calcId]=[];else if(u&&!(!this.controller.isGeometry()||this.controller.canExpandListForItem(p.calcId)))return;r[p.calcId][u]?r[p.calcId][u].description=p.description:r[p.calcId].push(p)});let n=[],a=-1,s=!1,l=this.grapher.getSketchOrder();for(let c=0;c<l.length;c++){let p=l[c];p===i&&(a=n.length);let u=r[p];if(u){u.sort((g,m)=>g.listIndex!==m.listIndex?g.listIndex===void 0?-1:m.listIndex===void 0?1:g.listIndex-m.listIndex:g.polygonEdge!==m.polygonEdge?g.polygonEdge===void 0?-1:m.polygonEdge===void 0?1:g.polygonEdge-m.polygonEdge:0);for(let g of u)p===i&&(s||(a=n.length),RF(g,e)&&(s=!0)),n.push(g)}}return{targets:n,currentTabIndex:a,currentIsTabbable:s}}findNextObjFromKeyboard(e,i){let{targets:r,currentIsTabbable:o,currentTabIndex:n}=this.findTabbableObjectsForCurrentTool(i);if(!r.length)return;if(n===-1)return e==="next"?{wrapped:!1,target:r[0]}:{wrapped:!1,target:r[r.length-1]};let a=!1,s=n;return e==="prev"?s-=1:o&&(s+=1),s===-1?(a=!0,s=r.length-1):s>=r.length&&(a=!0,s=0),{wrapped:a,target:r[s]}}focusNextObjFromKeyboard(e={}){let i={allowWrapping:!0,selectNonClickables:!1,direction:"next"},{direction:r,allowWrapping:o,selectNonClickables:n}=__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},i),e),a=this.findNextObjFromKeyboard(r,this.getKeyboardAttention());return!a||!o&&a.wrapped?(n&&this.controller.dispatch({type:"set-none-selected"}),!1):(a.wrapped&&this.controller.isVirtualMouseAllowed()?this.resetBackToGeoKeyboardPt():(n&&(this.controller.isClickableId(a.target.calcId)||!this.controller.isGeoItem(a.target.calcId)?this.controller.dispatch({type:"set-none-selected"}):this.controller.dispatch({type:"set-selected-id",id:a.target.calcId})),this.updateKeyboardAttention(a.target,{describe:!0})),!0)}updateKeyboardAttention(e,i){let r=this.getKeyboardAttention();RF(e,r)||(this.setKeyboardAttention(e),this.controller.isGeometry()&&this.controller.getGeoModel().onFocus(e==null?void 0:e.geoDef),this.poiController.moveGeoKeyboardPtToFocusedItem(i),i.describe&&this.poiController.describeFocusedItem({includeDetails:!0}))}clearAttentionIfNotTabbable(){let{currentIsTabbable:e}=this.findTabbableObjectsForCurrentTool(this.getKeyboardAttention());e||this.updateKeyboardAttention(void 0,{describe:!1})}handleGrapherGainedFocus(){if(this.controller.getGeoModel().speakCurrentGeoToolHint(),this.controller.isVirtualMouseAllowed())this.resetBackToGeoKeyboardPt();else{let i=this.findTabbableObjectsForCurrentTool(void 0).targets;i.length?(this.setKeyboardAttention(void 0),this.updateKeyboardAttention(i[0],{describe:!0})):le(this.controller.s("graphing-calculator-narration-geometry-no-tool-inputs"))}}resetBackToGeoKeyboardPt(){this.updateKeyboardAttention(void 0,{describe:!0}),this.poiController.geoKeyboardPt.x=this.poiController.geoKeyboardPt.lastArrowedX,this.poiController.geoKeyboardPt.y=this.poiController.geoKeyboardPt.lastArrowedY,this.poiController.handleGeoKeyboardPtMove()}};function $I(t,e){if(t.indexOf("\\idref_{")===0){let i=t.indexOf("}"),r=t.slice(8,i);return e(r)+t.slice(i+1)}else return t}function jI(t,e,i){var a;let r=s=>i?s.map(l=>$I(l,i)):s;switch(t.type){case"point-reference":return{latex:`${t.id}=${t.parents[0]}`,color:t.color};case"point":var{x:o,y:n}=t;return{latex:t.id+"=\\left("+__dcg_shared_module_exports__['tc'](o)+","+__dcg_shared_module_exports__['tc'](n)+"\\right)",color:t.color};case"glider":return{latex:t.id+"=\\operatorname{glider}\\left("+r(t.parents)[0]+","+__dcg_shared_module_exports__['tc'](t.t)+"\\right)",color:t.color};case"polygon":{let p="";return!e&&t.connectBorder&&(p=","+t.parents[0]),{latex:t.id+"=\\operatorname{"+t.type+"}\\left("+r(t.parents).join(",")+p+"\\right)",color:t.color}}case"circle":case"arc":case"compass":case"segment":case"line":case"ray":case"parallel":case"perpendicular":case"intersection":case"midpoint":return{latex:t.id+"=\\operatorname{"+t.type+"}\\left("+r(t.parents).join(",")+"\\right)",color:t.color};case"vector-copy":{let[p,u]=r(t.parents);return{latex:`${t.id}=\\operatorname{translate}\\left(${p},${p}.\\operatorname{start},${u}\\right)`,color:t.color}}case"vector":return{latex:t.id+"=\\operatorname{"+t.type+"}\\left("+r(t.parents).join(",")+"\\right)",color:t.color};case"vector-endpoint":return{latex:`${t.id}=${r(t.parents)[0]}.\\operatorname{${t.location}}`,color:t.color};case"translate":case"reflect":case"dilate":case"rotate":{let p=t.type==="dilate"||t.type==="rotate"?[...r([t.parents[0]]),t.parents[1]]:r(t.parents);return{latex:`${t.id}\\left(x\\right)=\\operatorname{${t.type}}\\left(x,${p.join(",")}\\right)`,color:t.color}}case"angle":case"directedangle":return{showAngleLabel:(a=t.showAngleLabel)!=null?a:!0,latex:t.id+"=\\operatorname{"+t.type+"}\\left("+r(t.parents).join(",")+"\\right)",color:t.color};case"angles":case"directedangles":return{showAngleLabel:e,latex:t.id+"=\\operatorname{"+t.type+"}\\left("+r(t.parents).join(",")+"\\right)"+(t.listAccess!==void 0?"\\left["+t.listAccess+"\\right]":""),color:t.color};case"polygon-segment":return{latex:t.id+"="+r(t.parents)[0]+(t.listAccess!==void 0?"\\left["+t.listAccess+"\\right]":"")+".\\operatorname{segments}\\left["+(t.edgeNumber+1)+"\\right]",color:t.color};case"slider":return{latex:t.latex,color:t.color,sliderInfo:t.sliderInfo};case"expression-edit-preview-latex":if(t.rhsLatex==="")return;let s="\\operatorname{angle}\\left(";return{showAngleLabel:t.rhsLatex.trim().startsWith(s),latex:t.id+"="+t.rhsLatex,color:t.color};default:return t}}function YI(t,e){__dcg_shared_module_exports__['aa'](t.valueType)?t.value.forEach((i,r)=>{let o=__dcg_shared_module_exports__['ba'](t.valueType);if(__dcg_shared_module_exports__['ga'](o))throw new Error("Programming error: unexpected lambda type");e({valueType:o,value:i},r+1)}):e(t,void 0)}function Qp(t,e){let{controller:i,expandLists:r=!0}=t;i.getAllItemModels().concat(i.getAllToolPreviewItems()).forEach(n=>{var u;if(!Sl(n))return;let a=n.formula.typed_constant_value,s=n.formula.geometry,l=s.identifier,c=l?__dcg_shared_module_exports__['cb'](l):"\\idref_{"+n.id+"}",p=!i.getItemModel(n.id);r&&i.canExpandListForItem(n.id)?YI(a,(g,m)=>{var S;let w=c+(m===void 0?"":"\\left["+m+"\\right]"),C={calcId:n.id,data:s,hidden:!n.shouldGraph,isGraphableAndInteractive:!!((S=n.formula)!=null&&S.is_graphable)&&!t.controller.shouldIgnoreGraphInteractions(n),assignment:c,listIndex:m!==void 0?m-1:void 0,typedRuntimeValue:g,referenceLatex:w};e(C,p)}):e({calcId:n.id,data:s,hidden:!n.shouldGraph,isGraphableAndInteractive:!!((u=n.formula)!=null&&u.is_graphable)&&!t.controller.shouldIgnoreGraphInteractions(n),assignment:c,listIndex:void 0,typedRuntimeValue:a,referenceLatex:c},p)})}function k8(t,e){switch(t.valueType){case __dcg_shared_module_exports__['w']:return{valueType:__dcg_shared_module_exports__['s'],value:t.value[e]};case __dcg_shared_module_exports__['F']:return{valueType:__dcg_shared_module_exports__['E'],value:t.value[e]};case __dcg_shared_module_exports__['D']:return{valueType:__dcg_shared_module_exports__['C'],value:t.value[e]};case __dcg_shared_module_exports__['L']:return{valueType:__dcg_shared_module_exports__['K'],value:t.value[e]};case __dcg_shared_module_exports__['T']:return{valueType:__dcg_shared_module_exports__['S'],value:t.value[e]};case __dcg_shared_module_exports__['J']:return{valueType:__dcg_shared_module_exports__['I'],value:t.value[e]};case __dcg_shared_module_exports__['B']:return{valueType:__dcg_shared_module_exports__['A'],value:t.value[e]};case __dcg_shared_module_exports__['H']:return{valueType:__dcg_shared_module_exports__['G'],value:t.value[e]};case __dcg_shared_module_exports__['N']:return{valueType:__dcg_shared_module_exports__['M'],value:t.value[e]};case __dcg_shared_module_exports__['P']:return{valueType:__dcg_shared_module_exports__['O'],value:t.value[e]};case __dcg_shared_module_exports__['y']:case __dcg_shared_module_exports__['u']:case __dcg_shared_module_exports__['t']:case __dcg_shared_module_exports__['R']:case __dcg_shared_module_exports__['v']:case __dcg_shared_module_exports__['U']:case __dcg_shared_module_exports__['z']:case __dcg_shared_module_exports__['x']:case __dcg_shared_module_exports__['W']:throw new Error("Programming Error: unexpected type "+__dcg_shared_module_exports__['$'](t.valueType));default:throw t.valueType,new Error("Programming Error: expected a list type but found "+__dcg_shared_module_exports__['$'](t.valueType))}}function JI(t,e){return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t),{referenceLatex:t.assignment+"\\left["+e+"\\right]",typedRuntimeValue:k8(t.typedRuntimeValue,e),listIndex:e})}function XC(t){switch(t){case __dcg_shared_module_exports__['s']:return"Point";case __dcg_shared_module_exports__['E']:return"Circle";case __dcg_shared_module_exports__['G']:return"Arc";case __dcg_shared_module_exports__['A']:return"Polygon";case __dcg_shared_module_exports__['I']:return"Line";case __dcg_shared_module_exports__['C']:return"Segment";case __dcg_shared_module_exports__['K']:return"Ray";case __dcg_shared_module_exports__['S']:return"Vector";case __dcg_shared_module_exports__['M']:return"Angle";case __dcg_shared_module_exports__['O']:return"Angle"}}function NF(t){if(!t)return;let e=t.typedRuntimeValue;return XC(e.valueType)}function QC(t){if(!t)return 0;if(t.type==="image"&&t.listIndex)return t.listIndex;if("poi"in t)return t.poi.pointIdxOnBranch;if("branchInfo"in t&&t.branchInfo.sketch){let e=t.branchInfo.branch,i=t.branchInfo.sketch.branches[e];return"listIndex"in i&&i.listIndex||0}return 0}var M8=0,ZC=class t{constructor(e,i){this.geoKeyboardPt={x:NaN,y:NaN,lastArrowedX:NaN,lastArrowedY:NaN};this.grapherIsPressed=!1;this.canceledGeoToolplayWhilePressed=!1;this.manager=e,this.controller=e.controller,this.keyboardAttentionManager=new JC(this),this.graphSettings=i,this.elt=this.manager.elt,this.id=M8++,!(!this.graphSettings.config.graphpaper||this.graphSettings.config.disableMouseInteractions)&&(this.addTouchEventHandlers(),this.addHoverEventHandler(),this.addKeydownEventHandler(),this.addManualUnhoverListener(),this.addGeoEventHandlers())}remove(){this.removeAllGlobalMouseListeners(),this.removeManualUnhoverListener(),this.removeAllGeoListeners(),this.removeHoverEventHandler()}addGlobalMouseListener(e,i){let r=e.split(" ");for(let o of r){let n=o+".dcg-poiController-"+this.id;H(document).on(n,i)}}removeAllGeoListeners(){H(document).off(".dcg-poiController-geo-"+this.id)}removeAllGlobalMouseListeners(){H(document).off(".dcg-poiController-"+this.id)}getToleranceByDevice(e){return e==="touch"?20:10}addGeoEventHandlers(){let e="keydown.dcg-poiController-geo-"+this.id,i="keyup.dcg-poiController-geo-"+this.id,r=e+" "+i;H(document).on(r,o=>{this.controller.isGeoToolActive()&&this.handleGeoShiftKeyChange(o.shiftKey)}),H(document).on("mouseleave.dcg-poiController-geo-"+this.id,()=>{if(this.controller.isGeoToolActive()&&!this.grapherIsPressed){let o=this.controller.getGeoModel();o.onMouseAction("move",{pt:{x:NaN,y:NaN},shift:!1,tolerance:0}),o.onPreviewChange()}}),H(document).on("dcg-tapend.dcg-poiController-geo-"+this.id,o=>{this.controller.isGeoToolActive()&&this.handleGeoTapEnd(o)})}removeHoverEventHandler(){H(document).off(".dcg-poiController-global-hover-"+this.id)}addHoverEventHandler(){let e="dcg-tapmove.dcg-poiController-global-hover-"+this.id;H(document).on(e,i=>{var I;let r=i;if(this.controller.isGeoToolActive()&&this.handleGeoTapMove(r)||(this.lastGeoMouseEvent=void 0,r.device==="touch"))return;let o=document.elementFromPoint(r.clientX,r.clientY),n=!!o&&!!o.closest(".dcg-grapher"),a=(I=this.controller.getGrapher3d())==null?void 0:I.webglLayer,s=this.manager.poiLabelsLayer,l=this.getMouseRelativeToGrapher(r),c=this.getToleranceByDevice(r.device);a&&(a==null||a.setMouse(n?l:void 0));let p;n&&(p=this.getFeatureUnderPoint(l,c));let u;if(p&&p.type==="movable-point"){let E=p.poi,T=E&&E.getMovablePoint();u=T&&T.id}let g,m=0;p&&p.isClickable&&!this.isBoxSelectActive(r)&&!this.manager.movablePointsLayer.isMovingPoint()&&!this.manager.traceLayer.isTracing()&&(g=p.model,m=QC(p));let w=this.manager.clickableObjectsLayer,C={};g&&(C[g.id]={listIndexes:m===void 0?void 0:{[m]:!0}}),w.setHoveredObjects(C);let S;p&&"poi"in p&&p.poi&&(!p.poi.isAttachedToPlottedPoint()||p.poi.hasInteractiveLabel())&&(S=p.poi),S!==s.getHoveredPOI()&&(this.controller.isTraceEnabled()?s.setHoveredPOI(S):s.setHoveredPOI(void 0),this.controller.requestRedrawGraph());let k=!1;if(p&&p.type==="image"){let E=vs(p.model),T=p.isClickable;k=E&&!T}let M=!1;p&&p.type==="draggable-label"&&(M=!0),k||M?this.manager.setLayerClass("extraMoveCursor","dcg-mouse-over-movable-point"):this.manager.setLayerClass("extraMoveCursor",""),this.manager.movablePointsLayer.setHoveredPointId(u)})}addManualUnhoverListener(){let e=()=>{let i=this.manager;i.poiLabelsLayer.setHoveredPOI(void 0),i.clickableObjectsLayer.setHoveredObjects({}),this.controller.requestRedrawGraph()};H(window).on("blur.dcg-poiController-"+this.id,e),H(this.elt).on("mouseleave",e)}removeManualUnhoverListener(){H(window).off(".dcg-poiController-"+this.id)}add3DTouchEventHandlers(e){let i=e.elt;if(!i)return;let r=e.webglLayer;H(i).on("dcg-tapstart",o=>{var l;if(o.touches.length>1)return;let{x:n,y:a}=this.getMouseRelativeToGrapher(o);r.setMouse({x:n,y:a}),r.pickAtMouseAndReadResults();let s=(l=r.getPickResult())==null?void 0:l.expressionId;s&&this.controller.dispatch({type:"set-selected-id",id:s})})}addTouchEventHandlers(){H(this.elt).on("touchstart",e=>{let i=e;if(!this.isViewportLocked()){i.target.matches("input, textarea")||i.preventDefault();return}let r=this.getMouseRelativeToGrapher(i),o=this.getToleranceByDevice(i.device),n=this.getFeatureUnderPoint(r,o);n&&(n.type==="image"&&!Sn(n.model)&&!vs(n.model)||n.type==="sketch-branch"&&this.graphSettings.config.onlyTraceSelected&&!n.sketch.selected||i.target.matches("input, textarea")||i.preventDefault())}),H(this.elt).on("dcg-tapstart",e=>{let i=e;if(this.controller.isGeoToolActive()&&this.handleGeoTapStart(i)){i.handle();return}let r=this.getMouseRelativeToGrapher(i),o=this.getToleranceByDevice(i.device),n=this.getFeatureUnderPoint(r,o);if(!n){this.isBoxSelectActive(i)||this.controller.dispatch({type:"set-none-selected"}),this.isBoxSelectActive(i)?this.startBoxSelect(i):this.manager.viewportController.beginPanning(i);return}if(n.isClickable&&!this.isBoxSelectActive(i)){let l="model"in n&&n.model;l?this.manager.clickableObjectsLayer.setPressedObject({id:l.id,listIndex:QC(n)}):this.manager.clickableObjectsLayer.setPressedObject(void 0)}else this.manager.clickableObjectsLayer.setPressedObject(void 0);if(n.type==="editable-label"){i.handle();return}else Ri();if(n.type==="draggable-label"){this.startMovingPoints({poiUnderMouse:void 0,evt:i,points:[{type:"draggable-label",label:n.label,model:n.model,startScreenPt:r}]}),i.handle();return}if(n.type==="clickable-label"&&i.handle(),n.type==="image"&&vs(n.model)&&!this.isBoxSelectActive(i)){let l=!!n.isClickable;if(this.startMovingPoints({poiUnderMouse:void 0,evt:i,points:[{type:"image",image:n.model,startScreenPt:r,shouldDelayUntilRealMove:l}]}),!l){i.handle();return}}let a=!1,s=n.model;if(this.controller.isGeometry()&&s&&s.type==="expression"&&s.formula.geometry){!this.isBoxSelectActive(i)&&!this.controller.isItemSelected(s.id)&&this.controller.dispatch({type:"set-none-selected"});let l;"poi"in n&&(l=n.poi),a=this.startReverseDrag(s.id,i,l),a&&n.type!=="static-point"&&this.manager.clickableObjectsLayer.setPressedObject({id:s.id,listIndex:QC(n)})}if(n.type==="movable-point"&&(i.handle(),i.handle("do-not-clear-poi-labels"),!a)){this.startMovingPoints({poiUnderMouse:n.poi,evt:i,points:[{type:"poi",poi:n.poi,startScreenPt:r}]});return}if(n.type==="static-point"&&!n.isClickable){let l=n.poi;if(this.controller.isGeometry()){if(l&&l.hasInteractiveLabel()){this._togglePOIUnderPoint(r,o)&&i.handle("do-not-clear-poi-labels");return}}else if(l){this._togglePOIUnderPoint(r,o)&&i.handle("do-not-clear-poi-labels");return}(!n.sketch.selected||this.isBoxSelectActive(i))&&n.model&&this.selectItemIfNotSecret(n.model.id,this.isBoxSelectActive(i));return}if(!a&&this._togglePOIUnderPoint(r,o)){i.handle(),i.handle("do-not-clear-poi-labels");return}if(!a&&n.type==="sketch-branch"&&!n.isClickable){let l=!this.controller.isTraceEnabled();if(this.graphSettings.config.onlyTraceSelected){if(i.handle("do-not-clear-poi-labels"),!l&&n.sketch.selected&&!this.isBoxSelectActive(i)){this.startTracingBranch(n.branchInfo,r),i.handle();return}}else{let c=!this.controller.isListEnabled();if(l&&c||(this.selectItemIfNotSecret(n.sketch.id,this.isBoxSelectActive(i)),l))return;this.startTracingBranch(n.branchInfo,r),i.handle(),i.handle("do-not-clear-poi-labels");return}}this.addGlobalMouseListener("dcg-tapmove",l=>{this.manager.clickableObjectsLayer.isAnObjectPressed()?r=this.getMouseRelativeToGrapher(l):(this.removeAllGlobalMouseListeners(),this.manager.viewportController.beginPanning(l))}),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",l=>{this.removeAllGlobalMouseListeners();let c=this.manager.clickableObjectsLayer.getPressedObject(),p=c&&c.id;this.manager.clickableObjectsLayer.setPressedObject(void 0);let u=this.getFeatureUnderPoint(r,o);if(u&&u.isClickable){let g="model"in u&&u.model;g&&g.id===p&&!l.wasHandled("dragged-clickable-object")&&!this.isBoxSelectActive(l)&&this.controller.dispatch({type:"clickable-item-clicked",id:g.id,listIndex:QC(u)});return}if(!a){if(u&&u.type==="sketch-branch"&&(!u.sketch.selected||this.isBoxSelectActive(l))){this.selectItemIfNotSecret(u.model.id,this.isBoxSelectActive(l));return}if(u&&(u.type==="movable-point"||u.type==="static-point")){(!u.sketch.selected||this.isBoxSelectActive(l))&&u.model&&this.selectItemIfNotSecret(u.model.id,this.isBoxSelectActive(l));return}if(u&&u.type==="image"){this.selectItemIfNotSecret(u.model.id,this.isBoxSelectActive(l));return}}})})}isBoxSelectActive(e){if(!this.controller.isMultiSelectEnabled())return!1;let i=this.controller.getActiveTool();return i==="selection"&&e.shiftKey||i==="box-selection"}isViewportLocked(){return this.graphSettings.config.lockViewport||this.graphSettings.userLockedViewport}addKeydownEventHandler(){H(this.elt).on("keydown",e=>{var s,l,c;let i=e;if(this.manager.getAudioTrace().getAudioTraceActive())return;let r=this.manager.movablePointsLayer.getPOIUnderAttention(),o=this.manager.imageLayer.getFocusedImage(),n=be(i),a=Dr(i);if((n==="Up"||n==="Down"||n==="Left"||n==="Right")&&this.controller.isGraphPaperFocused()){i.stopPropagation(),i.preventDefault();let p=this.keyboardAttentionManager.getKeyboardAttention();if(p&&this.controller.shouldAllowMovingPointsWithKeyboard()){let u=o?o.centerId:p.calcId;if(!u)return;let g=this.getDraggablePointOrAncestors(u);this.movePointsFromKeyboard(g,i),this.controller.getEvaluator().notifyWhenSynced(()=>{this.describeFocusedItem({includeDetails:!0})})}else this.controller.isVirtualMouseAllowed()&&(this.keyboardAttentionManager.updateKeyboardAttention(void 0,{describe:!1}),this.moveGeoPointFromKeyboard(i))}else if(n==="Tab"&&this.controller.isGraphPaperFocused()){let p=i.shiftKey?"prev":"next",u=this.keyboardAttentionManager.getKeyboardAttention();if(!(this.controller.getActiveTool()!=="selection")&&!u&&p==="prev")return;this.handleTabEvent(p,i)}else if((n==="Enter"||n==="Space")&&this.controller.isGraphPaperFocused()&&this.controller.getActiveTool()==="selection"){let p=this.keyboardAttentionManager.getKeyboardAttention();if(p){let u=this.controller.getItemModel(p.calcId);if(u&&!this.isBoxSelectActive(i)){let g=u.type==="expression"&&Hn(u),m=u.type==="image"&&Dp(u);(g||m)&&this.controller.dispatch({type:"clickable-item-clicked",id:p.calcId,listIndex:p.listIndex})}}i.preventDefault(),i.stopPropagation();return}else if(this.controller.isGeometry()&&this.controller.isGraphPaperFocused()){let p=!1;if(i.ctrlKey&&i.shiftKey&&!i.altKey&&!i.metaKey){let u;if(a==="O"?u={type:"multi-select-more",guid:Jp(),focusFirstOption:!0,previousFocusLocation:{type:"graph-paper"}}:a==="A"&&(u={type:"multi-select-transformations",guid:lb(),focusFirstOption:!0,previousFocusLocation:{type:"graph-paper"}}),u){i.preventDefault(),i.stopPropagation();let g=this.keyboardAttentionManager.getKeyboardAttention();this.controller.getActiveTool()!=="box-selection"&&g&&this.controller.getItemModel(g.calcId)&&this.controller.dispatch({type:"set-selected-id",id:g.calcId}),this.controller.dispatch({type:"toggle-item-settings-menu",menu:u})}}else if(!i.altKey&&!i.ctrlKey&&!i.metaKey){if(n==="Enter"||n==="Space")if(i.preventDefault(),this.controller.getActiveTool()!=="selection"&&i.stopPropagation(),this.controller.getActiveTool()==="box-selection"){let u=((s=this.keyboardAttentionManager.getKeyboardAttention())==null?void 0:s.calcId)||"";this.controller.isClickableId(u)&&(u=""),this.selectItemIfNotSecret(u,!0),this.describeFocusedItem({includeDetails:!1})}else{let u=this.keyboardAttentionManager.getKeyboardAttention();u!=null&&u.geoDef?this.tapGeoObjectFromKeyboard(u.geoDef,i):this.tapGeoPointFromKeyboard(i)}else if(a==="?")i.preventDefault(),i.stopPropagation(),this.controller.getGeoModel().speakCurrentGeoToolHint();else if(a==="D")i.preventDefault(),i.stopPropagation(),this.describeFocusedItem({includeDetails:!0});else if(n==="Backspace"||n==="Del"){i.preventDefault(),i.stopPropagation();let u=this.keyboardAttentionManager.getKeyboardAttention();this.controller.getActiveTool()!=="box-selection"&&u&&this.controller.getItemModel(u.calcId)&&this.controller.dispatch({type:"set-selected-id",id:u.calcId}),this.controller.dispatch({type:"delete-all-selected-items"}),p=!0}else if(a==="-"||a==="="){i.preventDefault(),i.stopPropagation();let u=this.controller.getAllVisibleGeoToolbarItems(),g=u.findIndex(m=>(m==null?void 0:m.current)===this.controller.getActiveTool());for(let m=1;m<u.length;m++){let w=g+(a==="-"?-m:m);w<0&&(w=u.length+w),w>u.length-1&&(w=w-u.length);let C=(l=u[w])==null?void 0:l.current;if(this.selectGeoTool(C)){p=!0;break}}}else if(a==="["||a==="]"){i.preventDefault(),i.stopPropagation();let g=this.controller.getAllVisibleGeoToolbarItems().find(C=>(C==null?void 0:C.current)===this.controller.getActiveTool());if(!g)return;let m=g.dropdown||[g.current];if(m.length===0)return;let w=m.indexOf(g.current);for(let C=1;C<m.length;C++){let S=w+(a==="["?-C:C);S<0&&(S=m.length+S),S>m.length-1&&(S=S-m.length);let k=m[S];if(this.selectGeoTool(k)){p=!0;break}}}else if(!i.shiftKey&&a!==void 0&&a>="0"&&a<="9"){let u=(c=this.controller.getAllVisibleGeoToolbarItems()[i.which-49])==null?void 0:c.current;p=this.selectGeoTool(u)}}p&&this.handleGeoKeyboardPtMove()}else r&&(a==="X"||a==="Y"||a==="L"||a==="C")?this.speakPoint(r,a):o&&(a==="X"||a==="Y"||a==="L")&&this.manager.imageLayer.speakImageAttribute(o,a)})}selectGeoTool(e){return e?this.controller.isGeoToolEnabled(e)?(this.controller.dispatch({type:"select-geo-tool",tool:e}),!0):(le(this.controller.s("graphing-calculator-narration-geometry-tool-disabled",{tool:this.controller.getGeoModel().getDisplayNameForTool(e)})),!1):!1}getMouseRelativeToGrapher(e){let i=this.elt.getBoundingClientRect(),r=e.touches?e.touches[0]:e,o=r.clientX-i.left,n=r.clientY-i.top;return{x:o,y:n}}_getStyledPointRadiusAdjustments(){return{radiusMultiplier:this.graphSettings.getHighlightPropertyMultiplier("pointLineWidth",!1),selectedRadiusMultiplier:this.graphSettings.getHighlightPropertyMultiplier("pointLineWidth",!0),movablePoint:this.graphSettings.config.projectorMode?30/2:22/2}}_getStyledPointRadiusForPOI(e,i){if(e.isMovable())return i.movablePoint;{let r=e.getPointSize()/2,o=e.isSelected()?i.selectedRadiusMultiplier:i.radiusMultiplier;return r*o}}handleTabEvent(e,i){let r=this.controller.getActiveTool()!=="selection";if(this.keyboardAttentionManager.focusNextObjFromKeyboard({direction:e,allowWrapping:r,selectNonClickables:this.controller.getActiveTool()==="selection"})){i==null||i.preventDefault(),i==null||i.stopPropagation();return}else if(!r){this.keyboardAttentionManager.updateKeyboardAttention(void 0,{describe:!1}),e==="prev"&&(i==null||i.preventDefault(),i==null||i.stopPropagation(),this.manager.speakGrapherFocusAriaLabel());return}}_getDistanceFromStyledPOI(e,i){let r=this._getStyledPointRadiusForPOI(e,i.adjustments),o=Math.max(0,i.tolerance-r),n=i.projection.map_pt(e),a=__dcg_shared_module_exports__['la'](n.x-i.screenPt.x,n.y-i.screenPt.y),s=Math.max(0,a-r);if(s<=o)return s}_getClosestPoint(e,i,r){let o=1/0,n,a={projection:this.manager.getProjection(),adjustments:this._getStyledPointRadiusAdjustments(),screenPt:i,tolerance:r};for(let s of e){let l=this._getDistanceFromStyledPOI(s,a);l!==void 0&&l<o&&(o=l,n=s)}return n}findIdsThatIntersectBox(e){let i={},r=this.manager.getSketchOrder();for(let o=r.length-1;o>=0;o--){let n=r[o],a=this.controller.getItemModel(n);if(a&&!this.controller.shouldIgnoreGraphInteractions(a)){if(a.type==="expression"){let s=this.manager.getGraphSketch(n);if(!s||Hn(a)||this.controller.isItemNotSelectableBecauseItsSecret(n))continue;let l=s.branches;if(!l||!l.length)continue;for(let c=0;c<l.length;c++)if(this.doesBoxIntersectBranch(l[c],e)){i[a.id]=!0;break}}else if(a.type==="image"){let s=this.manager.getGraphImage(n);if(!s)continue;t.doesBoxIntersectAnyImage(s,e)&&(i[a.id]=!0)}}}return this.manager.poiDotsLayer.getDrawnPOI().forEach(o=>{let n=o.sketch.id,a=this.controller.getItemModel(n);a&&this.controller.shouldIgnoreGraphInteractions(a)||a&&a.type==="expression"&&Hn(a)||this.controller.isItemNotSelectableBecauseItsSecret(n)||o.isBareLabel()||(o.isMovable()||o.isAttachedToPlottedPoint())&&t.doesBoxIntersectPOI(o,e)&&(i[n]=!0)}),i}_getStyledLineAdjustments(){return{thicknessMultiplier:this.graphSettings.getHighlightPropertyMultiplier("graphLineWidth",!1),selectedThicknessMultiplier:this.graphSettings.getHighlightPropertyMultiplier("graphLineWidth",!0)}}_getStyledLineThicknessForBranch(e,i,r){let o=Math.max(0,"lineWidth"in e&&e.lineWidth||0)/2;return i?o*r.selectedThicknessMultiplier:o*r.thicknessMultiplier}_getDistanceFromStyledBranch(e,i,r,o){let n=this._getStyledLineThicknessForBranch(e,i,o.adjustments),a=this.calculateDistanceFromBranch(e,o.screenPt,o.projection,r),s=Math.max(0,a-n),l=Math.max(0,o.tolerance-n);if(s<=l)return s}getFeatureUnderPoint(e,i){let r=this.manager.poiLabelsLayer,o=this.manager.getProjection();if(this.manager.scaleAxis)return;let n=r.getInteractiveLabelUnderPoint(e);if(n&&!this.controller.shouldIgnoreGraphInteractions(n.model))switch(n.type){case"editable":return{type:"editable-label",model:n.model,isClickable:void 0};case"draggable":return{type:"draggable-label",label:n.label,model:n.model,isClickable:void 0};case"clickable":return{type:"clickable-label",model:n.model,poi:n.poi,isClickable:!0}}let a=this.manager.getSketchOrder(),s={},l=1,c,p={adjustments:this._getStyledLineAdjustments(),projection:o,screenPt:e,tolerance:i};for(let I=a.length-1;I>=0;I--){let E=a[I],T=this.controller.getItemModel(E),A=l;if(s[E]=A,!!T&&!this.controller.shouldIgnoreGraphInteractions(T)){if(T.type==="expression"){let G=this.manager.getGraphSketch(E);if(!G)continue;let _=G.branches;if(!_||!_.length)continue;if(G.showHighlight&&!this.controller.isGeometry()&&(A=-1/0,s[E]=A),!c||c.stackingContext>=A){let P=Hn(T);for(let N=0;N<_.length;N++){let W=_[N],X=this._getDistanceFromStyledBranch(W,G.showHighlight,P,p);if(X!==void 0){let q=!1;c?(A<c.stackingContext||A===c.stackingContext&&X<c.distance-3.5)&&(q=!0):q=!0,q&&(c={type:"sketch-branch",model:T,sketch:G,distance:X,stackingContext:A,branchInfo:{id:G.id,branch:N,sketch:G}})}}}}else if(T.type==="image"){let G=this.manager.getGraphImage(E);if(!G)continue;let _=this.getImageInfoUnderMouse(G,o.pixelsToMath.mapPoint(e),i);if(!_)continue;G.foreground?(l+=1,A=l,s[E]=A,l+=1):(A=1/0,s[E]=A),(!c||c.stackingContext>A)&&(c={type:"image",model:G,distance:0,stackingContext:A,listIndex:_.listIndex})}}}let u=[],g=[],m=[],w=[],C=c?c.stackingContext:1/0;this.manager.poiDotsLayer.getDrawnPOI().forEach(I=>{var A;if(I.isBareLabel())return;let E=I.sketch.id,T=this.controller.getItemModel(E);if(!(T&&this.controller.shouldIgnoreGraphInteractions(T))){if(!T&&I.sketch.branches.length>0){let G=I.sketch.branches[0].tableId,_=G!==void 0?this.controller.getItemModel(G):void 0,P=(_==null?void 0:_.type)==="table"&&jr(_,E);if(P&&this.controller.shouldIgnoreGraphInteractions(P))return}if(I.isMovable()){let G=T&&T.type==="expression"&&((A=T.formula.geometry)==null?void 0:A.call);G&&G.symbol==="glider"?u.push(I):g.push(I)}else I.isAttachedToPlottedPoint()?s[I.sketch.id]<=C&&m.push(I):w.push(I)}});let S=this._getClosestPoint(u,e,i);if(S||(S=this._getClosestPoint(g,e,i)),S)return{type:"movable-point",poi:S,isClickable:void 0,sketch:S.sketch,model:this.controller.getItemModel(S.sketch.id)};let k=this._getClosestPoint(w,e,i);if(k)return{type:"poi",poi:k,isClickable:!1,model:void 0};let M=this._getClosestPoint(m,e,i);if(M){let I=this.controller.getItemModel(M.sketch.id);return I&&I.type==="expression"&&Hn(I)?{type:"static-point",poi:M,sketch:M.sketch,isClickable:!0,model:I}:{type:"static-point",poi:M,isClickable:!1,sketch:M.sketch,model:I}}if(c){if(c.type==="sketch-branch")return{type:"sketch-branch",branchInfo:c.branchInfo,sketch:c.sketch,model:c.model,isClickable:Hn(c.model),isSelected:this.controller.isItemSelected(c.sketch.id),selectionId:this.controller.isItemSelectable(c.model.id)?c.model.id:void 0};if(c.type==="image")return{type:"image",model:c.model,isClickable:Dp(c.model),listIndex:c.listIndex,isSelected:this.controller.isItemSelected(c.model.id),selectionId:this.controller.isItemSelectable(c.model.id)?c.model.id:void 0}}}_togglePOIUnderPoint(e,i){if(!this.controller.isTraceEnabled())return;let r=this.getFeatureUnderPoint(e,i);if(!r||r.isClickable)return!1;let o="poi"in r&&r.poi;return!o||o.isBareLabel()?!1:(this.manager.poiLabelsLayer.isOpenPOI(o)?(this.manager.poiLabelsLayer.closePOI(o),this.manager.poiLabelsLayer.setHoveredPOI(void 0)):(this.manager.poiLabelsLayer.openPOI(o),this.speakPoint(o)),this.controller.requestRedrawGraph(),!0)}getImageInfoUnderMouse(e,i,r){if(!e)return;let o=e.formula;if(!o)return;let n=o.dimensions;if(!(!n.x||!n.y||!n.width||!n.height||!n.radianAngle||!e.shouldGraph))for(let a=n.x.length-1;a>=0;a--){let s=n.x[a],l=n.y[a],c=n.radianAngle[a],p=s+Math.cos(c)*(i.x-s)-Math.sin(c)*(i.y-l),u=l+Math.sin(c)*(i.x-s)+Math.cos(c)*(i.y-l),g=.5*Math.abs(n.width[a]),m=.5*Math.abs(n.height[a]);if(p>s-g&&p<s+g&&u>l-m&&u<l+m)return{listIndex:a}}}doesBoxIntersectBranch(e,i){let r=!1,o=!1;switch(e.graphMode){case 5:case 8:case 2:break;case 6:r=!0;break;case 1:o=!0;break;case 18:case 17:case 19:case 24:return AC(i,{x1:e.segments[0][0],y1:e.segments[0][1],x2:e.segments[0][2],y2:e.segments[0][3],extendStart:e.graphMode===18,extendEnd:e.graphMode!==17});case 20:return U_(i,{x:e.segments[0][0],y:e.segments[0][1],radius:e.segments[0][2]});case 21:case 23:{let[a,s]=e.segments[0],[l,c,p]=e.graphMode===21?this.getBoxIntersectArgsForArc(e):this.getBoxIntersectArgsForAngleMarker(e),u=(p-c)/2+c;return z_(i,{x0:a+l*Math.cos(c),y0:s+l*Math.sin(c),x1:a+l*Math.cos(u),y1:s+l*Math.sin(u),x2:a+l*Math.cos(p),y2:s+l*Math.sin(p)})}default:return!1}let n=e.segments;for(let a=0;a<n.length;a++){let s=n[a];if(r){let l=s;s=[];for(let c=0;c<l.length;c+=2){let p=l[c],u=l[c+1];s.push(u*Math.cos(p),u*Math.sin(p))}}else if(o){let l=s;s=[];for(let c=0;c<l.length;c+=2)s.push(l[c+1],l[c])}if(H_(i,s))return!0}return!1}getBoxIntersectArgsForArc(e){return[e.segments[0][2],e.segments[0][3],e.segments[0][4]]}getBoxIntersectArgsForAngleMarker(e){let i=e.segments[0][3],r=this.manager.getProjection(),o=Dd(i,r),n=r.pixelsToMath.dangerouslyGetXScaleFactor(),a=r.pixelsToMath.dangerouslyGetYScaleFactor();return[Math.abs(Math.min(n,a))*o,e.segments[0][2],e.segments[0][2]+i]}static doesBoxIntersectAnyImage(e,i){let r=e.formula;if(!r)return;let o=r.dimensions;if(!(!o.x||!o.y||!o.width||!o.height||!o.radianAngle||!e.shouldGraph)){for(let n=o.x.length-1;n>=0;n--)if(W_(i,{width:o.width[n],height:o.height[n],angle:o.radianAngle[n],center:{x:o.x[n],y:o.y[n]}}))return!0;return!1}}static doesBoxIntersectPOI(e,i){return i.left<=e.x&&e.x<=i.right&&i.top<=e.y&&e.y<=i.bottom}calculateDistanceFromBranch(e,i,r,o){if(e&&e.graphMode===7&&(o||this.controller.isGeometry())){let a=e.segments,s=r.pixelsToMath.mapCoordinatePair([i.x,i.y]);for(let l=0;l<a.length;l++)if(__dcg_shared_module_exports__['rb'](a[l],s))return 0;return 1/0}let n=t.getBranchesDistanceInfo(e,i,r,o,this.controller.isGeometry());return n?n.minDistance:1/0}static getBranchesDistanceInfo(e,i,r,o,n){let a=i.x,s=i.y,{mathToPixels:l,pixelsToMath:c}=r;switch(e.graphMode){case 5:if(!n&&!o)return;break;case 8:if(!o)return;break;case 6:if(!o)return;break;case 2:case 1:break;case 23:{let[k,M,I,E]=e.segments[0],T=l.dangerouslyGetXScaleFactor(),A=l.dangerouslyGetYScaleFactor(),[G,_]=c.mapCoordinatePair([a,s]),P=Dd(E,r),N=P/T,W=1/0,X=_-M,q=G-k,B=Math.atan2(X,q);if(__dcg_shared_module_exports__['ja'](B,I,E))__dcg_shared_module_exports__['la'](X*A,q*T)<=P+7&&(W=0);else{let J=__dcg_shared_module_exports__['oa'](G,_,k+N*Math.cos(I),M+N*Math.sin(I),k,M),f=__dcg_shared_module_exports__['oa'](G,_,k+N*Math.cos(I+E),M+N*Math.sin(I+E),k,M),O=__dcg_shared_module_exports__['la'](T*(J[0]-G),A*(J[1]-_)),R=__dcg_shared_module_exports__['la'](T*(f[0]-G),A*(f[1]-_));W=Math.min(O,R)}return{closestPoint:{x:a,y:s},minDistance:W,secondDistance:W}}break;case 18:case 17:case 19:case 24:{if(!e.segments.length)return null;let k=l.mapX(e.segments[0][0]),M=l.mapY(e.segments[0][1]),I=l.mapX(e.segments[0][2]),E=l.mapY(e.segments[0][3]),T=e.graphMode===18,A=e.graphMode===18||e.graphMode===19,G=__dcg_shared_module_exports__['pa'](a,s,k,M,I,E,T,A);if(!G)return null;let _=__dcg_shared_module_exports__['la'](G[0]-a,G[1]-s);return{closestPoint:{x:G[0],y:G[1]},minDistance:_,secondDistance:_}}case 21:case 20:{let k=e.segments[0][0],M=e.segments[0][1],I=e.segments[0][2],E=e.graphMode===21?e.segments[0][3]:0,T=e.graphMode===21?e.segments[0][4]:Math.PI*2,A=__dcg_shared_module_exports__['qa'](c.mapX(a),c.mapY(s),k,M,I,E,T);if(!A)return null;let G=l.mapCoordinatePair(A),_=__dcg_shared_module_exports__['la'](G[0]-a,G[1]-s);return{closestPoint:{x:G[0],y:G[1]},minDistance:_,secondDistance:_}}default:return}let p=1/0,u=1/0,g,m;for(let k=0;k<e.segments.length;k++){let M=e.segments[k];for(let I=0;I<M.length-3;I+=2){let E=M[I],T=M[I+1],A=M[I+2],G=M[I+3];if(e.graphMode===6){let J=T,f=E;E=J*Math.cos(f),T=J*Math.sin(f);let O=G,R=A;A=O*Math.cos(R),G=O*Math.sin(R)}e.graphMode===1&&([E,T]=[T,E],[A,G]=[G,A]);let[_,P]=l.mapCoordinatePair([E,T]),[N,W]=l.mapCoordinatePair([A,G]),X=__dcg_shared_module_exports__['oa'](0,0,_-a,P-s,N-a,W-s),q=__dcg_shared_module_exports__['la'](X[0],X[1]);X[e.graphMode===1?1:0]<0?q<p&&(p=q,g=X):q<u&&(u=q,m=X)}}let w=p<u?g:m;if(!w)return;let C=w[0]+a,S=w[1]+s;return{closestPoint:{x:C,y:S},minDistance:Math.min(p,u),secondDistance:Math.max(p,u)}}static getBranchesTracePoint(e,i,r,o){let n,a=r.pixelsToMath.mapPoint(i);switch(e.graphMode){case 20:case 21:{let P=e.graphMode===21?e.segments[0][3]:0,N=e.graphMode===21?e.segments[0][4]:Math.PI*2;n=__dcg_shared_module_exports__['qa'](a.x,a.y,e.segments[0][0],e.segments[0][1],e.segments[0][2],P,N);break}case 18:case 19:case 17:n=__dcg_shared_module_exports__['pa'](a.x,a.y,e.segments[0][0],e.segments[0][1],e.segments[0][2],e.segments[0][3],e.graphMode===18,e.graphMode!==17);break}if(n)return{x:n[0],y:n[1]};if(!e)return;let s="compiled"in e&&e.compiled,l=s&&s.fn;if(!l)return;let c=this.getBranchesDistanceInfo(e,i,r,!1,o);if(!c)return;let{mathToPixels:p,pixelsToMath:u}=r,g,m;e.graphMode===2?(m="x",g="y"):(m="y",g="x",p=new __dcg_shared_module_exports__['Dc'](p.yScale,p.xScale),u=p.inverse());let w=Math.pow(c.minDistance/c.secondDistance,2),C=c.closestPoint[m]*(1-w)+i[m]*w,S=.5,k=.5,M=p.mapY(l(u.mapX(C-S))),I=p.mapY(l(u.mapX(C))),E=p.mapY(l(u.mapX(C+S))),T=S*Math.min(1,k/Math.abs(M-I)),A=S*Math.min(1,k/Math.abs(E-I));isFinite(T)||(T=S),isFinite(A)||(A=S);let G=Ti(u.mapX(C-T),u.mapX(C+A)),_=l(G);if(!isFinite(p.mapY(_))){let P=p.mapX(G)-S,N=p.mapX(G)+S,W=u.mapX(P),X=u.mapX(N),q=l(W),B=l(X),J=p.mapY(q),f=p.mapY(B);Math.abs(J-i[g])<Math.abs(f-i[g])?_=q:_=B}return{x:e.graphMode===2?G:_,y:e.graphMode===2?_:G}}getPointInfo(e){switch(e.type){case"movable-point":case"static-labeled-point":return KF(e);case"poi":return KF(e.poi.getMovablePoint());case"movable-point-parent":return{calcId:e.id,isReverseDrag:!0};case"image":return{calcId:e.image.formula.center_reference_id,isReverseDrag:!1};case"draggable-label":return{calcId:e.model.id,isReverseDrag:!1};default:return e}}getDraggablePointOrAncestors(e){var s,l;if(!this.controller.isGeometry()){let c=this.controller.getItemModel(e);return c&&c.type==="expression"&&Sv(c)&&((l=(s=c.formula)==null?void 0:s.typed_constant_value)==null?void 0:l.valueType)===__dcg_shared_module_exports__['s']&&qi(c)!=="NONE"?[{type:"movable-point-parent",id:e,x:c.formula.typed_constant_value.value[0],y:c.formula.typed_constant_value.value[1],shouldDelayUntilRealMove:!0}]:[]}let i=[e].concat(this.controller.getAllSelectedItems().map(c=>c.id).filter(c=>c!==e)),r=!1,o={},n=[];Qp({controller:this.controller},(c,p)=>{if(!p&&c.typedRuntimeValue.valueType===__dcg_shared_module_exports__['s']&&c.data.isMovablePoint){let[u,g]=c.typedRuntimeValue.value;o[c.calcId]={id:c.calcId,value:{x:u,y:g}}}});let a=this.controller.getGeoModel().getComputedBoard().computeReversibilityLineages(i);for(let c in a){let p=o[c];if(!p){r=!0;break}n.push({type:"movable-point-parent",id:c,x:p.value.x,y:p.value.y,shouldDelayUntilRealMove:!0,transformations:a[c]})}return r?[]:n}getFeatureCenterMathPoint(e){switch(e.type){case"poi":return e.poi;case"movable-point-parent":let i={x:e.x,y:e.y};if(e.transformations){let r=__dcg_shared_module_exports__['Sb'](e.transformations.forward,[i.x,i.y]);i={x:r[0],y:r[1]}}return i;case"image":return{x:e.image.formula.dimensions.x[0],y:e.image.formula.dimensions.y[0]};case"draggable-label":return{x:e.label.x,y:e.label.y}}}startReverseDrag(e,i,r){let o=this.getMouseRelativeToGrapher(i),n=this.getDraggablePointOrAncestors(e).map(a=>__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},a),{startScreenPt:o}));return n.length>0?(this.startMovingPoints({poiUnderMouse:r,evt:i,points:n}),!0):!1}startMovingPoints(e){let i=e.evt,r=e.points,o=!1,n=!1,a=r.map(this.getPointInfo),s=this.controller;function l(){n=!0,s.dispatch({type:"start-moving-points",points:a})}let c=!1;for(let w of r)if(w.shouldDelayUntilRealMove){c=!0;break}c||l();let p;e.poiUnderMouse&&e.poiUnderMouse.isMovable()&&(p=e.poiUnderMouse.getMovablePoint().id),this.manager.movablePointsLayer.setPressedPointId(p);let u=r.map(w=>{let C=this.manager.getProjection().map_pt(this.getFeatureCenterMathPoint(w));return{x:w.startScreenPt.x-C.x,y:w.startScreenPt.y-C.y}}),g,m=()=>{if(!g)return;o=!0,n||l();let w=this.manager.getProjection(),C=this.getMouseRelativeToGrapher(g);g=void 0,this.controller.dispatch({type:"on-move-points",points:r.map(this.getPointInfo),screenPts:u.map(function(S){return{x:C.x-S.x,y:C.y-S.y}}),transform:r.map(S=>S.type==="movable-point-parent"?S.transformations:void 0),previousScreenPts:r.map(S=>S.startScreenPt),projection:w})};this.manager.registerMovablePointListener(m),this.addGlobalMouseListener("dcg-tapmove",w=>{g=w}),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",w=>{if(m(),this.manager.deregisterMovablePointListener(),this.removeAllGlobalMouseListeners(),this.manager.movablePointsLayer.setPressedPointId(void 0),n&&(w.handle("dragged-clickable-object"),this.controller.dispatch({type:"stop-moving-points",points:r.map(this.getPointInfo)})),!o){let C=this.getMouseRelativeToGrapher(i),S=this.getToleranceByDevice(i.device),k=this.getFeatureUnderPoint(C,S);if(k&&k.type==="movable-point")if(this.controller.isGeometry())(!k.sketch.selected||this.isBoxSelectActive(w))&&k.model&&this.selectItemIfNotSecret(k.model.id,this.isBoxSelectActive(w));else return;else if(k&&k.type==="sketch-branch"){let M=k.model;M&&M.formula.geometry&&!k.isClickable&&(!k.sketch.selected||this.isBoxSelectActive(w))&&this.selectItemIfNotSecret(k.model.id,this.isBoxSelectActive(w))}}})}startTracingBranch(e,i){this.manager.markLabelsDirty(),this.lastScreenPt=i;let r=this.manager.getProjection(),n=e.sketch.branches[e.branch],a=t.getBranchesTracePoint(n,i,r,this.controller.isGeometry());a&&this.speakPoint(a),this.manager.traceLayer.setTraceInfo({pt:a,branchInfo:e}),this.controller.requestRedrawGraph(),this.addGlobalMouseListener("dcg-tapmove",this.handleTraceUpdate.bind(this)),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",this.stopTracingBranch.bind(this))}stopTracingBranch(e){this.manager.markLabelsDirty();let i=this.manager.poiLabelsLayer.getHoveredPOI();i&&!this.manager.poiLabelsLayer.isOpenPOI(i)&&(this.manager.poiLabelsLayer.openPOI(i),this.speakPoint(i),this.controller.requestRedrawGraph()),this.lastScreenPt=void 0,this.manager.traceLayer.setTraceInfo(void 0),this.controller.requestRedrawGraph(),this.removeAllGlobalMouseListeners()}handleTraceUpdate(e){if(!this.manager.traceLayer.traceInfo)return;let i=this.manager.getProjection(),r;if(e)r=this.getMouseRelativeToGrapher(e),this.lastScreenPt=r,this.manager.markLabelsDirty();else if(this.lastScreenPt)r=this.lastScreenPt;else return;let o=1/0,n=-1,a=this.manager.traceLayer.traceInfo,s=this.manager.graphSketches[a.branchInfo.sketch.id];if(!s)return;a.branchInfo.sketch=s;let l=a.branchInfo.sketch.branches;for(let u=0;u<l.length;u++){let g=this.calculateDistanceFromBranch(l[u],r,i,!1);g<o&&(n=u,o=g)}let c=l[n],p=c?t.getBranchesTracePoint(c,r,i,this.controller.isGeometry()):void 0;p&&this.speakPoint(p),this.manager.traceLayer.traceInfo.branchInfo.branch=n,this.manager.traceLayer.traceInfo.pt=p,this.controller.requestRedrawGraph()}hasNonlinearMoveStrategy(e){if(!e||e.type!=="movable-point-parent")return!1;let i=this.controller.getItemModel(e.id);if(!i||i.type!=="expression"||!i.formula)return!1;let r=i.formula.move_strategy;return!r||!r[0]?!1:r[0].type==="updateSliderNonlinear"}movePointsFromKeyboard(e,i){if(!i)return;let r=this.manager.getProjection(),o=e.map(m=>{let{x:w,y:C}=r.map_pt(this.getFeatureCenterMathPoint(m));return{x:w,y:C}}),n=0,a=0,s=be(i),l=(r.pixelCoordinates.right-r.pixelCoordinates.left)/40,c=(r.pixelCoordinates.bottom-r.pixelCoordinates.top)/40,p=s==="Up"||s==="Down"?c:l;p=i.shiftKey?p*5:p;let u,g;if(s==="Up"?(g="y",a-=p,u=i.shiftKey?"bigup":"up"):s==="Down"?(g="y",a+=p,u=i.shiftKey?"bigdown":"down"):s==="Left"?(g="x",n-=p,u=i.shiftKey?"bigdown":"down"):s==="Right"&&(g="x",n+=p,u=i.shiftKey?"bigup":"up"),u){let m=o.map(({x:C,y:S})=>({x:C+n,y:S+a})),w;g==="x"||e.some(C=>this.hasNonlinearMoveStrategy(C))?w={x:u}:g==="y"&&(w={y:u}),this.controller.dispatch({type:"on-move-points",points:e.map(C=>this.getPointInfo(C)),screenPts:m,previousScreenPts:o,transform:e.map(C=>C.type==="movable-point-parent"?C.transformations:void 0),projection:r,keyboardDirection:w})}}getGeoKeyboardPt(){return this.initGeoKeyboardPt(),this.geoKeyboardPt}setGeoKeyboardPt(e){this.geoKeyboardPt=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.geoKeyboardPt),{x:e.x,y:e.y}),e.fromArrowKeys&&(this.geoKeyboardPt.lastArrowedX=e.x,this.geoKeyboardPt.lastArrowedY=e.y),this.controller.requestRedrawGraph()}initGeoKeyboardPt(){if(!isNaN(this.geoKeyboardPt.x)&&!isNaN(this.geoKeyboardPt.y))return;let e=this.manager.getProjection();if(!e)return;let i=e.viewport,r=kd(e),o=r.minorStepX,n=r.minorStepY,a=Math.round((i.xmin+i.xmax)/2/o)*o,s=Math.round((i.ymin+i.ymax)/2/n)*n;this.setGeoKeyboardPt({x:a,y:s})}moveGeoPointFromKeyboard(e){if(!e)return;this.initGeoKeyboardPt();let i=this.manager.getProjection();if(!i)return;let r=i.viewport,o=kd(i),n=o.minorStepX/4,a=o.minorStepY/4,s=this.geoKeyboardPt.x,l=this.geoKeyboardPt.y,c=be(e);if(c==="Down"?e.ctrlKey?l=r.ymin:l=Math.max(Math.round((l-a)/a)*a,r.ymin):c==="Up"?e.ctrlKey?l=r.ymax:l=Math.min(Math.round((l+a)/a)*a,r.ymax):c==="Left"?e.ctrlKey?s=r.xmin:s=Math.max(Math.round((s-n)/n)*n,r.xmin):c==="Right"&&(e.ctrlKey?s=r.xmax:s=Math.min(Math.round((s+n)/n)*n,r.xmax)),s!==this.geoKeyboardPt.x||l!==this.geoKeyboardPt.y){this.setGeoKeyboardPt({x:s,y:l,fromArrowKeys:!0}),this.handleGeoKeyboardPtMove(e),Xe(DC(this.controller,this.geoKeyboardPt.x,this.geoKeyboardPt.y));let p=this.manager.clickableObjectsLayer.getHoveredObjects();for(let u in p){let g=this.controller.getItemModel(u);g!==void 0&&Xe(this.controller.s("graphing-calculator-narration-geometry-near-item",{item:eb(g,this.controller,{includeDetails:!1})}))}le()}}handleGeoKeyboardPtMove(e){this.initGeoKeyboardPt();let i=this.controller.getGeoModel(),r=!!(e&&e.shiftKey);i.onMouseAction("move",{pt:this.geoKeyboardPt,shift:r,tolerance:this.getToleranceByDevice("keyboard")}),i.onPreviewChange()}tapGeoObjectFromKeyboard(e,i){var a;let r=this.controller.getGeoModel(),o=r.getCurrentTool();if(!o)return;o.onFocus(e);let n=o.tryCommitResults();n.committed&&this.controller.dispatch(__dcg_shared_module_exports__['a']({type:"commit-geo-objects",shiftKey:i.shiftKey},n)),r.updateNextObjectId(r.controller.findLastTokenNumber()+1),r.clearHoveredObjects(),r.onPreviewChange(),this.speakGeoReleaseAction(this.controller.getActiveTool(),(a=o.getSpec)==null?void 0:a.call(o),n.committed),this.keyboardAttentionManager.clearAttentionIfNotTabbable()}tapGeoPointFromKeyboard(e){var l;this.initGeoKeyboardPt();let i=this.controller.getGeoModel(),r=this.controller.getActiveTool(),o=i.getCurrentTool(),n=(l=o.getSpec)==null?void 0:l.call(o),a=!!e.shiftKey,s=i.onMouseAction("release",{pt:this.geoKeyboardPt,shift:a,tolerance:this.getToleranceByDevice("keyboard")});s.committed&&this.controller.dispatch(__dcg_shared_module_exports__['a']({type:"commit-geo-objects",shiftKey:e.shiftKey},s)),i.onMouseAction("move",{pt:this.geoKeyboardPt,shift:a,tolerance:this.getToleranceByDevice("keyboard")}),i.onPreviewChange(),this.speakGeoReleaseAction(r,n,s.committed),this.keyboardAttentionManager.clearAttentionIfNotTabbable()}speakGeoReleaseAction(e,i,r){var o;if(r!==void 0){let n=Object.keys(r);if(!n.length||!i)return;let a="";if(e==="point"||e==="expression-edit"){for(let s in r){let l=r[s];if(l){if(l.type==="point-reference"){a=this.controller.s("graphing-calculator-text-geometry-tool-point-display-name");break}else if(l.type==="intersection"){a=this.controller.s("graphing-calculator-text-geometry-intersection");break}else if(l.type==="glider"){a=this.controller.s("graphing-calculator-text-geometry-glider");break}else if(l.type==="vector-endpoint"){l.location==="start"?a=this.controller.s("graphing-calculator-text-geometry-tool-vector-start-point-display-name"):a=this.controller.s("graphing-calculator-text-geometry-tool-vector-end-point-display-name");break}}}a===""&&(a=this.controller.s("graphing-calculator-text-geometry-tool-point-display-name"))}else{let s=(o=i.outputs[0])==null?void 0:o.type;switch(s){case"arc":a=this.controller.s("graphing-calculator-text-geometry-tool-arc-display-name");break;case"circle":a=this.controller.s("graphing-calculator-text-geometry-tool-circle-display-name");break;case"line":a=this.controller.s("graphing-calculator-text-geometry-tool-line-display-name");break;case"segment":a=this.controller.s("graphing-calculator-text-geometry-tool-segment-display-name");break;case"ray":a=this.controller.s("graphing-calculator-text-geometry-tool-ray-display-name");break;case"vector-copy":a=this.controller.s("graphing-calculator-text-geometry-tool-vector-copy-display-name");break;case"vector":a=this.controller.s("graphing-calculator-text-geometry-tool-vector-display-name");break;case"parallel":a=this.controller.s("graphing-calculator-text-geometry-tool-parallel-display-name");break;case"perpendicular":a=this.controller.s("graphing-calculator-text-geometry-tool-perpendicular-display-name");break;case"midpoint":a=this.controller.s("graphing-calculator-text-geometry-tool-midpoint-display-name");break;case"polygon":a=this.controller.s("graphing-calculator-text-geometry-tool-polygon-display-name");break;case"angle":a=this.controller.s("graphing-calculator-text-geometry-tool-angle-display-name");break;case"directedangle":a=this.controller.s("graphing-calculator-text-geometry-tool-directed-angle-display-name");break;case"reflect":a=this.controller.s("graphing-calculator-text-geometry-tool-reflect-display-name");break;case"translate":a=this.controller.s("graphing-calculator-text-geometry-tool-translate-display-name");break;case"dilate":a=this.controller.s("graphing-calculator-text-geometry-tool-dilate-display-name");break;case"rotate":a=this.controller.s("graphing-calculator-text-geometry-tool-rotate-display-name");break;case"vector-endpoint":case"expression-edit-preview-latex":case"point":case"intersection":case"glider":case"slider":case"angles":case"directedangles":case"compass":case"polygon-segment":case"point-reference":case void 0:a=this.controller.s("shared-calculator-narration-item-unknown");break;default:let l=s;throw new Error("Exhaustive Check failed"+l)}}n.length===1?le(this.controller.s("graphing-calculator-narration-geometry-added-object-type",{type:a})):a!=="graphing-calculator-text-geometry-point"?n.length===2?le(this.controller.s("graphing-calculator-narration-geometry-added-object-type-and-point",{type:a})):le(this.controller.s("graphing-calculator-narration-geometry-added-object-type-and-points",{type:a,points:n.length-1})):le(this.controller.s("graphing-calculator-narration-geometry-added-points",{points:n.length}))}else this.controller.getGeoModel().speakCurrentGeoToolHint()}describeFocusedItem(e){let i=this.keyboardAttentionManager.getKeyboardAttention(),r=this.controller.getItemModel((i==null?void 0:i.calcId)||"");this.controller.getEvaluator().notifyWhenSynced(()=>{var o,n;if(!this.controller.isGeometry()&&r&&r.type==="image"&&((o=this.manager.imageLayer.getFocusedImage())==null?void 0:o.id)===r.id){this.manager.imageLayer.speakAriaAlert();return}r&&((n=this.manager.movablePointsLayer.getPOIUnderAttention())==null?void 0:n.sketch.id)===r.id&&this.manager.movablePointsLayer.speakAriaAlert()||le(eb(r,this.controller,{includeDetails:e.includeDetails,description:i==null?void 0:i.description,poi:this.manager.movablePointsLayer.getPOIUnderAttention(),listIndex:i==null?void 0:i.listIndex,polygonEdge:i==null?void 0:i.polygonEdge,includeSelectionState:this.controller.isGeometry()&&(this.controller.getActiveTool()==="box-selection"||this.controller.getActiveTool()==="selection")}))})}getPointFromFocusedItem(){var p;let e=this.keyboardAttentionManager.getKeyboardAttention(),i=this.controller.getItemModel((e==null?void 0:e.calcId)||"");if(!i||i.type!=="expression"||!i.latex)return;let r=i.formula.typed_constant_value;if(!r||!this.manager.getProjection())return;let n=r.valueType,a=r.value;if(__dcg_shared_module_exports__['aa'](r.valueType)){let u=e==null?void 0:e.listIndex;u&&(n=__dcg_shared_module_exports__['ba'](n),a=a[u])}let s=e==null?void 0:e.polygonEdge;if(n===__dcg_shared_module_exports__['A']&&s!==void 0&&s>=0&&a.length>s){let u=a[s],g=a[(s+1)%a.length];n=__dcg_shared_module_exports__['C'],a=[u,g]}let l=NaN,c=NaN;return n===__dcg_shared_module_exports__['s']?(l=a[0],c=a[1]):n===__dcg_shared_module_exports__['I']||n===__dcg_shared_module_exports__['K']||n===__dcg_shared_module_exports__['C']?(l=(a[0][0]+a[1][0])/2,c=(a[0][1]+a[1][1])/2):n===__dcg_shared_module_exports__['S']?(l=a[1][0]+a[0][0]/2,c=a[1][1]+a[0][1]/2):(p=a[0])!=null&&p.length&&(l=a[0][0],c=a[0][1]),{x:l,y:c}}moveGeoKeyboardPtToFocusedItem(e){let i=this.getPointFromFocusedItem();if(!i)return;let{x:r,y:o}=i,n=this.keyboardAttentionManager.getKeyboardAttention();this.controller.getGeoModel().setObjectHovered({calcId:(n==null?void 0:n.calcId)||"",listIndex:void 0}),!isNaN(r)&&!isNaN(o)?(this.setGeoKeyboardPt({x:r,y:o}),this.controller.isVirtualMouseAllowed()&&e.describe&&le(this.controller.s("graphing-calculator-narration-geometry-moved-to-coordinates",{x:vi(this.controller,r),y:Ci(this.controller,o)}))):this.controller.isVirtualMouseAllowed()&&e.describe&&le(this.controller.s("graphing-calculator-narration-geometry-unable-to-move"))}speakPoint(e,i){if(!(!e||!this.manager.getAudioTrace()||!this.manager.getProjection()))switch(i){case"X":le(vi(this.controller,e.x));break;case"Y":le(Ci(this.controller,e.y));break;case"L":"ariaLabel"in e&&e.ariaLabel?le(e.ariaLabel):le(this.controller.s("graphing-calculator-narration-poi-graph-point"));break;case"C":"sketch"in e&&le(Gp(this.controller,e.sketch.color))}}selectItemIfNotSecret(e,i){this.controller.isItemNotSelectableBecauseItsSecret(e)||(!this.controller.isMultiSelectEnabled()||!i?this.controller.dispatch({type:"set-selected-id",id:e}):this.controller.dispatch({type:"toggle-selected-with-multi-select",id:e}))}convertTouchEventToMathPoint(e){let{clientX:i,clientY:r}=e.changedTouches[0],o=this.manager.elt.getBoundingClientRect();return this.controller.getGeoModel().convertCanvasPixelsToPoint({x:i-o.left,y:r-o.top})}handleGeoTapStart(e){let i=this.controller.getGeoModel();this.grapherIsPressed=!0,this.canceledGeoToolplayWhilePressed=!1;let r=!!e.shiftKey,o=this.convertTouchEventToMathPoint(e);return this.lastGeoMouseEvent=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},o),{shift:r}),i.onMouseAction("move",{pt:o,shift:r,tolerance:this.getToleranceByDevice(e.device)}).handled?(BF(e)?this.handleGeoTapMove(e):(i.onPreviewChange(),this.updateGeoHoveredObjects()),i.getToolMode()==="expression-edit"&&e.preventDefault(),!0):!1}handleGeoShiftKeyChange(e){let i=this.lastGeoMouseEvent;if(!i||i.shift===e)return;i.shift=e;let r=this.controller.getGeoModel();r.onMouseAction("move",{pt:{x:i.x,y:i.y},shift:i.shift,tolerance:this.getToleranceByDevice("mouse")}),r.onPreviewChange()}handleGeoTapMove(e){let i=this.controller.getGeoModel(),r;if(!(e.target&&e.target.closest(".dcg-geometry-toolbar-view"))&&(this.isEventWithinInstance(e)||this.grapherIsPressed)){let n=this.convertTouchEventToMathPoint(e),a=!!e.shiftKey;this.lastGeoMouseEvent=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},n),{shift:a}),r=i.onMouseAction("move",{pt:n,shift:a,tolerance:this.getToleranceByDevice(e.device)}).handled}else this.lastGeoMouseEvent=void 0,i.onMouseAction("move",{pt:{x:NaN,y:NaN},shift:!1,tolerance:0}),r=!0;return i.onPreviewChange(),r}replayGeoTapMove(){let e=this.controller.getGeoModel(),i=this.lastGeoMouseEvent;i&&(e.onMouseAction("move",{pt:{x:i.x,y:i.y},shift:i.shift,tolerance:this.getToleranceByDevice("mouse")}),e.onPreviewChange())}handleGeoTapEnd(e){var s;if(!this.grapherIsPressed)return;let i=this.controller.getGeoModel();this.grapherIsPressed=!1,this.lastGeoMouseEvent=void 0;let r=this.canceledGeoToolplayWhilePressed?{committed:void 0}:i.onMouseAction("release",{pt:this.convertTouchEventToMathPoint(e),shift:!!e.shiftKey,tolerance:this.getToleranceByDevice(e.device)});this.canceledGeoToolplayWhilePressed=!1,r.committed&&this.controller.dispatch(__dcg_shared_module_exports__['a']({type:"commit-geo-objects",shiftKey:e.shiftKey},r)),this.isEventWithinInstance(e)&&BF(e)?this.handleGeoTapMove(e):i.onPreviewChange();let o=this.controller.getActiveTool(),n=i.getCurrentTool(),a=(s=n.getSpec)==null?void 0:s.call(n);this.speakGeoReleaseAction(o,a,r.committed),i.getToolMode()==="expression-edit"&&e.preventDefault()}isEventWithinInstance(e){return e.target?this.manager.elt.contains(e.target):!1}updateGeoHoveredObjects(){let e=this.controller.getGeoModel(),i={};e.getHoveredItems().forEach(r=>{let o;if("tokenId"in r){let n=this.controller.getGeoTokenInfoFromIdentifier(__dcg_shared_module_exports__['eb'](r.tokenId));o=n&&n.calcId}else o=r.calcId;if(o!==void 0){let n=i[o];n?r.listIndex===void 0?n.listIndexes=void 0:n.listIndexes!==void 0&&(n.listIndexes[r.listIndex]=!0):i[o]={listIndexes:r.listIndex===void 0?void 0:{[r.listIndex]:!0}}}}),this.manager.clickableObjectsLayer.setHoveredObjects(i)}cancelGeoToolplay(){this.canceledGeoToolplayWhilePressed=this.grapherIsPressed,this.updateGeoHoveredObjects()}startBoxSelect(e){let i={};this.controller.getAllSelectedItems().forEach(n=>i[n.id]=!0);let r=this.manager.getProjection().reverse_map_pt(this.getMouseRelativeToGrapher(e)),o;this.addGlobalMouseListener("dcg-tapmove",n=>{o=this.manager.getProjection().reverse_map_pt(this.getMouseRelativeToGrapher(n));let a={left:Math.min(r.x,o.x),top:Math.min(r.y,o.y),right:Math.max(r.x,o.x),bottom:Math.max(r.y,o.y)};this.manager.setBoxSelectRectangle(a);let s=this.findIdsThatIntersectBox(a);this.controller.dispatch({type:"set-all-selected-ids",ids:__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},i),s)})}),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",n=>{this.removeAllGlobalMouseListeners(),this.manager.setBoxSelectRectangle(void 0),o||this.controller.dispatch({type:"set-none-selected"})})}};function BF(t){return t.device==="mouse"}function KF(t){return{calcId:t.sketch.id,isReverseDrag:!1,scaleFactor:t.type==="movable-point"?t.scaleFactor:void 0,tableInfo:t.type==="movable-point"?t.tableInfo:void 0}}Tt();var Mn=class Mn{constructor(e=0,i=0,r=1,o=r){this.tx=e,this.ty=i,this.sx=r,this.sy=o}toJSON(){return{tx:this.tx,ty:this.ty,sx:this.sx,sy:this.sy}}compose(e){return new Mn(this.sx*e.tx+this.tx,this.sy*e.ty+this.ty,this.sx*e.sx,this.sy*e.sy)}translate(e,i){let r=i===void 0?e.x:i.x-e.x,o=i===void 0?e.y:i.y-e.y;return new Mn(this.tx+r,this.ty+o,this.sx,this.sy)}scale(e,i){return Mn.scale(e,i).compose(this)}scaleAtPoint(e,i,r=i){return Mn.scaleAtPoint(e,i,r).compose(this)}mapX(e){return this.sx*e+this.tx}mapY(e){return this.sy*e+this.ty}mapPoint(e){return{x:this.mapX(e.x),y:this.mapY(e.y)}}mapRect(e){return{left:this.mapX(e.left),right:this.mapX(e.right),bottom:this.mapY(e.bottom),top:this.mapY(e.top)}}};Mn.scale=function(e,i=e){return new Mn(0,0,e,i)},Mn.translate=function(e,i){return new Mn().translate(e,i)},Mn.scaleAtPoint=function(e,i,r=i){return r===void 0&&(r=i),new Mn(e.x*(1-i),e.y*(1-r),i,r)},Mn.fromRects=function(e,i){let r=(i.right-i.left)/(e.right-e.left),o=(i.top-i.bottom)/(e.top-e.bottom);return new Mn(i.left-r*e.left,i.bottom-o*e.bottom,r,o)},Mn.fromJSON=function(e){return new Mn(e.tx,e.ty,e.sx,e.sy)};var _d=Mn;var Rs=class{constructor(e,i,r){this.screen=e,this.viewport=i,this.settings=r,this.mathCoordinates=__dcg_shared_module_exports__['Cc'](i),this.pixelCoordinates=__dcg_shared_module_exports__['Bc'](e),this.updateScalePairs()}updateScalePairs(){let{xAxisScale:e,yAxisScale:i}=this.settings;this.mathToPixels=__dcg_shared_module_exports__['Dc'].fromRects(this.mathCoordinates,this.pixelCoordinates,{xAxisScale:e,yAxisScale:i}),this.pixelsToMath=this.mathToPixels.inverse()}mapx(e){return this.mathToPixels.mapX(e)}mapy(e){return this.mathToPixels.mapY(e)}reverse_mapx(e){return this.pixelsToMath.mapX(e)}reverse_mapy(e){return this.pixelsToMath.mapY(e)}mapAlongAxis(e,i){switch(i){case"x":return this.mapx(e);case"y":return this.mapy(e);default:{let r=i;throw new Error(`Unknown axis: ${r}`)}}}reverseMapAlongAxis(e,i){switch(i){case"x":return this.reverse_mapx(e);case"y":return this.reverse_mapy(e);default:{let r=i;throw new Error(`Unknown axis: ${r}`)}}}map_pt(e){return this.mathToPixels.mapPoint(e)}map_xy_pairs(e){for(var i=[],r=0;r<e.length;r+=2)i.push(this.mapx(e[r])),i.push(this.mapy(e[r+1]));return i}reverse_map_pt(e){return this.pixelsToMath.mapPoint(e)}coordsAreOnscreen(e,i,r=0){return e>-r&&i>-r&&e<this.screen.width+r&&i<this.screen.height+r}closestPointOnScreen(e){let i=this.pixelCoordinates;return{x:Math.min(Math.max(e.x,i.left),i.right),y:Math.min(Math.max(e.y,i.top),i.bottom)}}};var{log10:eS}=Math;function XI(t,e){var i=e.x-t.x,r=e.y-t.y,o=.5*(t.x+e.x),n=.5*(t.y+e.y),a=.5*__dcg_shared_module_exports__['la'](i,r);return{center:Ns(o,n),radius:a}}function qF(t,e){var i={x:2*t.x-e.x,y:2*t.y-e.y};return XI(e,i)}function zF(t,e){for(var i=[],r=0;r<t.length;r++)i.push(Ns(t[r].pageX-e.left,t[r].pageY-e.top));return i}function Ns(t,e){return{x:t,y:e}}function UF(t){return Ns(.5*(t.left+t.right),.5*(t.bottom+t.top))}var V8=0,tS=class{constructor(e,i){this.s=Dl(()=>this.grapher.settings.config.language);this.grapher=e,this.elt=e.elt,this.id=V8++,this.controller=i,this.isScalingEnabled=!1,this.mousePt=Ns(0,0),this.lastScrollZoom=Date.now(),this.preventScrollZoom=!1,this.addMouseWheelEventHandler(),this.addTouchEventHandler()}remove(){H(window).off(".viewportcontroller-"+this.id)}getViewport(){return this.grapher.getProjection().viewport}getProjection(){return this.grapher.getProjection()}isViewportLocked(){var e=this.getProjection().settings;return e.config.lockViewport||e.userLockedViewport}updateMouse(e){var i=this.elt.getBoundingClientRect();this.mousePt=Ns(e.clientX-i.left,e.clientY-i.top)}updateScaleAxis(){this.isMouseInViewport()&&(this.isMouseNearYAxis()?this.grapher.scaleAxis="y":this.isMouseNearXAxis()?this.grapher.scaleAxis="x":this.grapher.scaleAxis="both"),this.updateCursor(),this.controller.requestRedrawGraph()}updateCursor(){this.elt.classList.toggle("dcg-scale-horizontal",this.grapher.scaleAxis==="x"),this.elt.classList.toggle("dcg-scale-vertical",this.grapher.scaleAxis==="y"),this.elt.classList.toggle("dcg-scale-both",this.grapher.scaleAxis==="both")}isMouseNearOrigin(){var e=this.getProjection(),i=e.mathToPixels.mapPoint(Ns(0,0));return Math.abs(this.mousePt.x-i.x)<50&&Math.abs(this.mousePt.y-i.y)<50}isMouseNearXAxis(){var e=this.getProjection(),i=e.pixelCoordinates,r=e.mathToPixels.mapY(0);return r=Math.min(Math.max(i.top,r),i.bottom),Math.abs(this.mousePt.y-r)<40&&e.settings.showXAxis}isMouseNearYAxis(){var e=this.getProjection(),i=e.pixelCoordinates,r=e.mathToPixels.mapX(0);return r=Math.min(Math.max(i.left,r),i.right),Math.abs(this.mousePt.x-r)<40&&e.settings.showYAxis}isMouseInViewport(){var e=this.getProjection(),i=e.mathCoordinates,r=e.pixelsToMath.mapPoint(this.mousePt);return r.x>=i.left&&r.x<=i.right&&r.y>=i.bottom&&r.y<=i.top}_setViewportWithoutCancellingAnimation(e){if(e.isValid(this.controller.getAxisScaleSettings())&&!e.equals(this.getViewport())){var r=this.getProjection();this.grapher._setProjection(new Rs(r.screen,e,r.settings))}}setViewport(e){this.cancelAnimation(),this._setViewportWithoutCancellingAnimation(e)}setScreen(e){var i=this.getProjection();let r=i.settings.squareAxes?i.viewport.squareYAxis(e,i.settings):i.viewport;var o=new Rs(e,r,i.settings);this.grapher._setProjection(o)}getTransformedViewport(e){let{pixelCoordinates:i,mathCoordinates:r,settings:o}=this.getProjection(),{xAxisScale:n,yAxisScale:a}=o,s=e.mapRect(i);var l=__dcg_shared_module_exports__['Dc'].fromRectsInverse(r,s,{xAxisScale:n,yAxisScale:a}).mapRect(i);return new er(l.left,l.right,l.bottom,l.top)}transformViewport(e){this.setViewport(this.getTransformedViewport(e)),(this.grapher.scaleAxis==="x"||this.grapher.scaleAxis==="y")&&this.controller.markSquareAxesAfterUserEditedViewport()}animateToViewport(e){this.cancelAnimation();let i=this.getProjection(),r=i.viewport,o=i.mathToPixels;var n=0,a,s=l=>{a||(a=l);var c=(l-a)/500;if(n+=c,n<1){this.__animationTimeout=requestAnimationFrame(s);let p=o.interpolateX(r.xmin,e.xmin,n),u=o.interpolateX(r.xmax,e.xmax,n),g=o.interpolateY(r.ymin,e.ymin,n),m=o.interpolateY(r.ymax,e.ymax,n);this._setViewportWithoutCancellingAnimation(new er(p,u,g,m)),this.grapher.debounceUserRequestedViewportChange()}else this.setViewport(er.fromObject(e)),this.grapher.debounceUserRequestedViewportChange(),this.controller.markSquareAxesAfterUserEditedViewport()};this.__animationTimeout=requestAnimationFrame(s)}cancelAnimation(){cancelAnimationFrame(this.__animationTimeout)}addMouseWheelEventHandler(){var e=!1,i,r;H(window).on("scroll.viewportcontroller-"+this.id,function(a){e=!0}),H(window).on("wheel.viewportcontroller-"+this.id,function(a){i=a.clientX,r=a.clientY}),H(window).on("mousemove.viewportcontroller-"+this.id,function(a){if(e){var s=a.clientX-i,l=a.clientY-r,c=s*s+l*l;c<100||(e=!1)}});var o=0,n=a=>{let s=a.originalEvent;if(s.deltaX===0&&s.deltaY===0)return;var l=Date.now();let c=l-this.lastScrollZoom;if(this.preventScrollZoom&&c>50&&(this.preventScrollZoom=!1),this.lastScrollZoom=l,this.preventScrollZoom)return;var p=this.getProjection();if(this.isViewportLocked())return;var u=p.mathToPixels;if(e)return;s.preventDefault(),this.updateMouse(s);var g=u.mapPoint(Ns(0,0));let w=(s.deltaY===0?-s.deltaX:-s.deltaY)>0?1:-1;var C=this.isMouseNearOrigin()&&w>0?g:this.mousePt;if(o>0)return;o+=1,requestAnimationFrame(function(){o--});let{xAxisScale:S,yAxisScale:k}=p.settings,M=.0625;(S==="logarithmic"||k==="logarithmic")&&c<25&&(M*=Math.max(10,c)/25);var I=w>0?1+M:1/(1+M),E=this.grapher.scaleAxis,T=E==="x"||E==="both"||!E?I:1,A=E==="y"||E==="both"||!E?I:1;let G=_d.scaleAtPoint(C,T,A),_=this.getTransformedViewport(G);w==-1&&this.tooBig(_)||w==1&&this.tooSmall(_)||(this.transformViewport(G),this.grapher.debounceUserRequestedViewportChange())};H(this.elt).on("wheel",n)}applyPanTouchChanges(e,i){if(!this.isViewportLocked()&&!this.isScalingEnabled){var r=Ns(i[0].x-e[0].x,i[0].y-e[0].y);this.transformViewport(_d.translate(r)),this.grapher.debounceUserRequestedViewportChange()}}chooseDragScaleCenter(){var e=this.getProjection(),i=e.pixelCoordinates,r=e.mathToPixels.mapX(0),o=e.mathToPixels.mapY(0);return r=Math.min(Math.max(i.left,r),i.right),o=Math.min(Math.max(i.top,o),i.bottom),Ns(r,o)}applyScaleTouchChanges(e,i){if(this.isViewportLocked())return;var r=this.grapher.scaleAxis,o,n;if(e.length===2&&i.length===2)o=XI(e[0],e[1]),n=XI(i[0],i[1]);else if(i.length===1){var a=this.chooseDragScaleCenter();o=qF(a,e[0]),n=qF(a,i[0])}else return;var s=n.radius/o.radius,l=r==="y"?1:s,c=r==="x"?1:s,p=_d.scaleAtPoint(o.center,l,c).translate(o.center,n.center);let u=this.getTransformedViewport(p);s<1&&this.tooBig(u)||s>1&&this.tooSmall(u)||(this.transformViewport(p),this.grapher.debounceUserRequestedViewportChange())}addTouchEventHandler(){var e=[],i=!1,r=!0,o=!0,n=m=>{i||this.isViewportLocked()||(this.updateMouse(m.originalEvent),this.isScalingEnabled&&this.updateScaleAxis())};H(window).on("mousemove.viewportcontroller-"+this.id,n),this.beginPanning=m=>{var w=this.getProjection();if(!this.isViewportLocked()&&!i&&m.touches.length===m.changedTouches.length){i=!0,this.grapher.isDragging=!0,this.updateMouse(m);var C=w.mathToPixels.mapPoint(Ns(0,0)),S=this.grapher.scaleAxis;(S==="x"||S==="both")&&(r=this.mousePt.x>C.x),(S==="y"||S==="both")&&(o=this.mousePt.y>C.y),this.controller.dispatch({type:"grapher/drag-start"}),H(document).on("dcg-tapmove.graphdrag",u),H(document).on("dcg-tapstart.graphdrag dcg-tapend.graphdrag dcg-tapcancel.graphdrag",g)}};var a=m=>{if(!(m.length<2)){var w=this.grapher.getProjection(),C=w.pixelCoordinates,S=w.mathToPixels.mapX(0),k=w.mathToPixels.mapY(0),M=40;S=Math.min(Math.max(C.left,S),C.right),k=Math.min(Math.max(C.top,k),C.bottom);var I=m[1].x-m[0].x,E=m[1].y-m[0].y;return Math.abs(m[0].x-S)<M&&Math.abs(m[1].x-S)<M&&Math.abs(E)>3*Math.abs(I)&&w.settings.showYAxis?"y":Math.abs(m[0].y-k)<M&&Math.abs(m[1].y-k)<M&&Math.abs(I)>3*Math.abs(E)&&w.settings.showXAxis?"x":"both"}},s=m=>(this.grapher.scaleAxis||(this.grapher.scaleAxis=a(m)),this.grapher.scaleAxis),l=()=>{this.grapher.scaleAxis&&(this.grapher.scaleAxis=void 0,this.controller.requestRedrawGraph(),this.updateCursor())},c=()=>{this.isScalingEnabled=!1,this.preventScrollZoom=!0,l()},p=m=>m.altKey||m.ctrlKey||m.metaKey,u=m=>{let w=m;if(i&&!this.isViewportLocked()){var C=zF(w.touches,ul(this.elt));if(e.length===2&&C.length===2)s(C),this.applyScaleTouchChanges(e,C);else if(e.length===1&&this.isScalingEnabled){this.updateMouse(w);var S=this.grapher.scaleAxis,k=this.getProjection(),M=k.mathToPixels.mapPoint(Ns(0,0)),I,E,T=5,A=r?1:-1,G=o?1:-1;if((S==="x"||S==="both")&&(I=this.mousePt.x>M.x+T*A),(S==="y"||S==="both")&&(E=this.mousePt.y>M.y+T*G),S==="x"&&r!==I||S==="y"&&o!==E||S==="both"&&r!==I&&o!==E)return;this.applyScaleTouchChanges(e,C)}else l();e.length===1&&this.applyPanTouchChanges(e,C),this.controller.dispatch({type:"grapher/drag-move"}),e=C}},g=m=>{let w=m;i&&(this.cancelAnimation(),e=zF(w.touches,ul(this.elt)),w.touches.length===0&&(i=!1,this.grapher.isDragging=!1,H(document).off(".graphdrag"),this.grapher.debounceUserRequestedViewportChange(),this.controller.dispatch({type:"grapher/drag-end"})),(w.touches.length===0||w.touches.length===1&&!this.isScalingEnabled)&&l())};H(window).on("keydown.viewportcontroller-"+this.id,m=>{this.controller.isGeoToolActive()||this.isViewportLocked()||(be(m)===$f&&!p(m)&&this.shouldAllowShiftScaling()?(this.isScalingEnabled=!0,this.grapher.scaleAxis||this.updateScaleAxis()):c())}),H(window).on("keyup.viewportcontroller-"+this.id+" blur.viewportcontroller-"+this.id,c)}shouldAllowShiftScaling(){return!this.controller.isGeometry()}zoom(e){var i=this.getProjection().pixelCoordinates;if(e==="in"){let o=this.getTransformedViewport(_d.scaleAtPoint(UF(i),2));this.tooSmall(o)||this.animateToViewport(o),le(this.s("graphing-calculator-narration-viewport-zoom-in"))}else if(e==="out"){let o=this.getTransformedViewport(_d.scaleAtPoint(UF(i),.5));this.tooBig(o)||this.animateToViewport(o),le(this.s("graphing-calculator-narration-viewport-zoom-out"))}else if(e==="square"){var r=this.getSquareViewport();this.getProjection().settings.setProperty("squareAxes",!0),this.animateToViewport(r),le(this.s("graphing-calculator-narration-viewport-zoom-square"))}else e==="default"&&this.setDefaultViewport()}tooBig(e){let i=this.getProjection(),{xAxisScale:r,yAxisScale:o}=i.settings,{xmin:n,xmax:a,ymin:s,ymax:l}=e;return r==="logarithmic"&&eS(a)-eS(n)>60||o==="logarithmic"&&eS(l)-eS(s)>60||this.controller.isGeometry()&&a-n>1e5}tooSmall(e){let{xmin:i,xmax:r}=e;return this.controller.isGeometry()&&r-i<1e-4}zoomSquareImmediately(){this.setViewport(this.getSquareViewport())}zoomCustom(e){this.animateToViewport(e),le(this.s("graphing-calculator-narration-viewport-updated"))}setDefaultViewport(){let e=this.controller.getDefaultViewport();this.animateToViewport(e),le(this.s("graphing-calculator-narration-viewport-default"))}isDefaultViewportRestored(){let e=this.getProjection(),{xAxisScale:i,yAxisScale:r}=e.settings,o=i==="linear",n=r==="linear",a=e.viewport,s=this.controller.getDefaultViewport(),l=o?a.xmax-a.xmin:Math.log(a.xmax/a.xmin),c=n?a.ymax-a.ymin:Math.log(a.ymax/a.ymin),p=o?a.xmin-s.xmin:Math.log(a.xmin/s.xmin),u=o?a.xmax-s.xmax:Math.log(a.xmax/s.xmax),g=n?a.ymin-s.ymin:Math.log(a.ymin/s.ymin),m=n?a.ymax-s.ymax:Math.log(a.ymax/s.ymax),w=.025;return Math.abs(p/l)<w&&Math.abs(u/l)<w&&Math.abs(g/c)<w&&Math.abs(m/c)<w}getSquareViewport(){let e=this.getProjection();return e.settings.lastChangedAxis==="y"?e.viewport.squareXAxis(e.screen,e.settings):e.viewport.squareYAxis(e.screen,e.settings)}};var vb=__dcg_shared_module_exports__['h'](j());Tt();var Rl=class{constructor(e,i){this.width=e,this.height=i}};var iS=class{constructor(e,i){this.is3d=!1;this.color="#000000",this.style="normal",this.showPOI=!1,this.showHighlight=!1,this.selected=!1,this.tokenHovered=!1,this.tokenSelected=!1,this.labels=[],this.id=e,this.branches=i!==void 0?i:[],this.getPOI().forEach(r=>{r.type===1008&&this.labels.push({type:"poi",poi:r})}),i.forEach((r,o)=>{if(r.graphMode===22){if(r.objectType===17){let n=new Lc(0,0,1008,this,o,0,!1);this.labels.push({id:"label-"+e+"-"+(r.listIndex||0),type:"segment",poi:n,segments:r.segments[0],text:r.labels&&r.labels[0]||""})}else if(r.objectType===16){let n=new Lc(0,0,1008,this,o,0,!1);this.labels.push({id:"label-"+e+"-"+(r.listIndex||0),type:"polygon",poi:n,segments:r.segments[0],text:r.labels&&r.labels[0]||""})}else if(r.objectType===23){let n=new Lc(0,0,1008,this,o,0,!1);this.labels.push({id:"label-"+e+"-"+(r.listIndex||0),type:"angle",poi:n,segments:r.segments[0],text:r.labels&&r.labels[0]||""})}}})}getPOI(){if(this.__cachedPOI)return this.__cachedPOI;this.__cachedPOI=[],this.__cachedPOIIds={};for(let e=0;e<this.branches.length;e++){let i=this.branches[e];if(i.graphMode===1||i.graphMode===2){let r=i.poi;r.zeros&&this._pushPOI(r.zeros,e,1002),r.intercept&&this._pushPOI(r.intercept,e,1003),r.extrema&&this._pushPOI(r.extrema,e,1004),r.intersections&&this._pushPOI(r.intersections,e,1001)}else if(i.graphMode===3||i.graphMode===4){let r=i.poi,o=i.graphMode===3&&i.interactiveLabel===!0;if(i.showLabel===!0||o){let n=i.nakedLabel;r.defined&&this._pushPOI(r.defined,e,1008,n)}else r.defined&&this._pushPOI(r.defined,e,1006)}}return this.__cachedPOI}getBranchPOI(e){return this.getPOI().filter(i=>i.branch===e)}getMovablePoints(){if(this.__cachedMovablePoints)return this.__cachedMovablePoints;this.__cachedMovablePoints=[];let e=this.branches[0];if(e&&e.segments.length===1&&e.graphMode===4){let i=e.segments[0];for(let r=0;r<i.length;r++){let o;e.tableId&&(o={tableId:e.tableId,columnId:this.id,rowIndex:e.movablePointInfo[r].index,dragX:e.movablePointInfo[r].dragX,dragY:e.movablePointInfo[r].dragY});let n=e.scaleFactors?e.scaleFactors[0][r]:void 0,a=o?o.rowIndex:r,s=e.segments.length===1&&e.labels&&e.labels[r]?e.labels[r]:void 0,l=e.hasOwnProperty("pointOpacity")?e.pointOpacity:1;this.__cachedMovablePoints.push({type:"movable-point",id:"movable:["+this.id+","+a+"]",listIndex:a,sketch:this,color:this.color,pointOpacity:l,tableInfo:o,scaleFactor:n,x:i[r][0],y:i[r][1],label:s,ariaLabel:s&&Xo(s)})}}return this.__cachedMovablePoints}getMovablePointByIndex(e){return this.getMovablePoints()[e]}getStaticLabeledPoints(){if(this.__cachedStaticLabeledPoints)return this.__cachedStaticLabeledPoints;let e=this.branches[0];return this.__cachedStaticLabeledPoints=[],this.getPOI().forEach(i=>{if(i.type!==1006&&i.type!==1008||e.graphMode!==3)return;var r=e.showLabel;let o=i.getLabel();!r&&o===""||this.__cachedStaticLabeledPoints.push({type:"static-labeled-point",id:"static["+this.id+","+i.id+"]",listIndex:i.pointIdxOnBranch,x:i.x,y:i.y,sketch:i.sketch,label:o,ariaLabel:o!==""?Xo(o):void 0})}),this.__cachedStaticLabeledPoints}_pushPOI(e,i,r,o=!1){for(let n=0,a=e.x.length;n<a;n++){let s=new Lc(e.x[n],e.y[n],r,this,i,n,o);e.intersects&&(s.intersects=e.intersects[n]),this.__cachedPOI.push(s),this.__cachedPOIIds[s.id]=s}}updateIntersections(e){for(let r=0,o=this.branches.length;r<o;r++){let n=this.branches[r];n.graphMode!==15&&n.graphMode!==22&&(n.poi.intersections=e[r])}let i=this.__cachedPOI;this.__cachedPOI=[],i.forEach(r=>{r.type!==1001?this.__cachedPOI.push(r):delete this.__cachedPOIIds[r.id]});for(let r=0;r<this.branches.length;r++){let o=this.branches[r];if(o.graphMode===1||o.graphMode===2){let n=o.poi;n.intersections&&this._pushPOI(n.intersections,r,1001)}}}getPOIById(e){return this.__cachedPOIIds[e]}updateFrom(e){if(!e)return;this.showPOI=e.showPOI,this.showHighlight=e.showHighlight,this.selected=e.selected,this.tokenSelected=e.tokenSelected,this.tokenHovered=e.tokenHovered;let i=this.branches[0].graphMode;if(i===3||i===4){let r=!0;for(let o=0;o<this.__cachedPOI.length;o++){let n=e.__cachedPOI[o],a=this.__cachedPOI[o];if(!n||n.type!==a.type){r=!1;break}}if(r)for(let o=0;o<this.__cachedPOI.length;o++){let n=e.__cachedPOI[o],a=this.__cachedPOI[o];delete this.__cachedPOIIds[a.id],this.__cachedPOIIds[n.id]=a,a.id=n.id}}}};function HF(t){return t.is3d}function Ba(t,e){if(HF(e)||t.isGeoUIActive()&&t.getAllToolPreviewItems().filter(r=>r.id===e.id).length>0)return!1;for(let i of e.branches)if(Bs(i))return!0;return!1}function Bs(t){switch(t.graphMode){case 8:case 5:case 6:return uo("audioTraceSimult")&&t.segments.length>0;case 1:case 2:case 3:case 4:return t.segments.length>0;default:return!1}}function WF(t){for(let e=0;e<t.branches.length;e++)if(Bs(t.branches[e]))return e;return 0}function cb(t,e){let i=0;for(let r=0;r<=e;r++)Bs(t.branches[r])&&(i+=1);return i}function $F(t){switch(t.graphMode){case 1:case 2:case 3:case 4:return!0;default:return!1}}function jF(t,e){switch(e){case 2:case 8:case 5:case 6:case 3:case 4:return{independentMin:t.xmin,independentMax:t.xmax,dependentMin:t.ymin,dependentMax:t.ymax};case 1:return{independentMin:t.ymin,independentMax:t.ymax,dependentMin:t.xmin,dependentMax:t.xmax};default:throw QI(e)}}function QI(t){return`Unexpected graph mode. Received ${t}`}function ZI(t){let e=Math.random()*2-1;return(t+.2*e)/1.02}function YF(t,e){if(t===1)return e.y;if(t===2||t===8||t===5||t===6)return e.x;throw QI(t)}function JF(t,e){let i=([r,o])=>{let n=e!=null&&e.degreeMode?r*Math.PI/180:r;return[o*Math.cos(n),o*Math.sin(n)]};return __dcg_shared_module_exports__['Ha'](__dcg_shared_module_exports__['La'](t,2).map(r=>i(r)),!0)}function eT(t,e,i){let r=__dcg_shared_module_exports__['Jc'](t,e.mathToPixels,i),o=__dcg_shared_module_exports__['Lc'](r,{xmin:0,xmax:e.screen.width,ymin:0,ymax:e.screen.height}),n=e.pixelsToMath;return i===__dcg_shared_module_exports__['Ic']&&(n=new __dcg_shared_module_exports__['Dc'](n.yScale,n.xScale)),o.map(s=>__dcg_shared_module_exports__['Jc'](s,n,i))}function XF(t,e){return t[0]-e[0]}function QF(t){switch(t.graphMode){case 2:case 3:case 4:return{independent:t.x,dependent:t.y};case 1:return{independent:t.y,dependent:t.x};default:throw QI(t.graphMode)}}var P8=.1;function tT(t){return t<0?P8:0}function O8(t,e,i){return{x:t.x,y:t.y,branch:t.branch,reportedBranch:i,type:t.type,graphMode:e,intersects:t.intersects}}var Mg=101,aS=class{constructor(e,i,r){this.grapher=r,this.controller=e,this.audiograph=i,this.reset()}reset(){this.currentPoint=void 0,this.resetToFirstBranch(),this.sampledPoints=[],this.pois=[],this.independent=0}resetToFirstBranch(){let e=this.getCurrentSketch();this.branch=e?WF(e):0}getBranchPoints(e){let i=[];if(e>=0)for(let r of this.getSampledPoints())r.branch===e&&i.push(r);return i}resetTracePoint(){this.grapher.traceLayer.setTraceInfo(void 0),this.grapher.traceLayer.setTraceLine(void 0),this.drawTracePoint(this.getCurrentPoint())}drawTracePoint(e){let i=this.getCurrentSketch();if(!e||!i)return;let r=i.branches[this.branch];if(!r||r.graphMode===3)return;let n={x:e.x,y:e.y},a={branchInfo:{branch:e.branch,id:i.id,sketch:i},pt:n};__dcg_shared_module_exports__['Ra'](a,this.grapher.traceLayer.getTraceInfo())||(this.grapher.traceLayer.setTraceInfo(a),this.controller.requestRedrawGraph())}drawTraceLine(e,i){if(e===void 0||!i)return;let r=this.getCurrentSketch();i===1?this.grapher.traceLayer.setTraceLine({x:void 0,y:e,color:r==null?void 0:r.color}):this.grapher.traceLayer.setTraceLine({x:e,y:void 0,color:r==null?void 0:r.color})}moveToOrigin(){let e=this.getCurrentSketch();if(!e||!Ba(this.controller,e))return;let i=e.branches[this.branch];if(!Bs(i))return;let r=i.graphMode;if(r===2)this.setIndependent("x",0);else if(r===1)this.setIndependent("y",0);else if(r===3){let o=this.getSortedPOI()[0];this.setIndependent("x",o?o.x:0)}}getCurrentSketch(){let e,i=this.getSelectedItem();if(i){let r=this.audiograph.getFocusedCell();if(i.type==="table"){if(r&&(e=this.getGraphSketchForTableCell(i,r)),!e){for(let o of i.columnModels)if(e=this.grapher.getGraphSketch(o.id),e!==void 0)break}}else e=this.grapher.getGraphSketch(i.id)}return e}getFirstTraceableSketch(e){let i,r=this.controller.getItemCount(),o=this.controller.shouldAudioTraceReverseExpressions();for(let n=0;n<r;n++){let a=o?r-1-n:n,s=this.controller.getItemModelByIndex(a);if(s&&this.canTrace(s)){let l=o?this.prevTableColumn(s):this.nextTableColumn(s);if(l?(this.audiograph.setFocusedCell(l),i=this.getGraphSketchForTableCell(s,l)):i=this.grapher.getGraphSketch(s.id),i){e&&e.selectAssociatedExpression&&this.controller.dispatch({type:"set-selected-index",index:a});break}}}return i}canTrace(e){if(e.type==="image")return!1;if("shouldGraph"in e){let i=this.grapher.getGraphSketch(e.id);return i?Ba(this.controller,i):!1}return!1}getTraceableExpressionCount(){let e=0,i=this.controller.getItemCount();for(let r=0;r<i;r++){let o=this.controller.getItemModelByIndex(r);o&&this.canTrace(o)&&e++}return e}computeStepSizes(){let e=this.grapher.getProjection().viewport;if(!e)return;let i=e.xmin,r=e.xmax,o=e.ymin,n=e.ymax,a=this.getCurrentSketch();if(!a||!Ba(this.controller,a))return;let s=a.branches[this.branch];if(!Bs(s))return;let l=s.graphMode;if(l===2)this.independent<i?this.independent=i:this.independent>r&&(this.independent=r);else if(l===1)this.independent<o?this.independent=o:this.independent>n&&(this.independent=n);else if(l===3){let c,p;this.independent<i?(p=this.getSortedPOI()[0],this.independent=p&&p.x!==void 0?p.x:0):this.independent>r&&(c=this.getSortedPOI(),p=c[c.length-1],this.independent=p&&p.x!==void 0?p.x:0)}}getPoint(e,i){let r,o=this.getCurrentSketch();if(!o||!Ba(this.controller,o))return r;let n,a,s,l=0,c=o.branches[e];if(!c)return;let p=cb(o,e);"compiled"in c&&c.compiled&&(s=c.compiled.fn),a=c.graphMode;let u=this.grapher.getProjection(),{mathToPixels:g,pixelsToMath:m,screen:w}=u;if(a===2||a===8){let C=m.mapX(g.mapX(i)+w.width/(Mg-1));n=this.getInterveningPOIs(i,C,e,a)[0],(!n||n.x!==i||n.branch!==e)&&(n=void 0,l=s?s(i):0),n?r={x:n.x,y:n.y,type:n.type,typeChain:n.typeChain,branch:n.branch,reportedBranch:p,graphMode:a,intersects:n.intersects}:s&&(r={x:i,y:l,branch:e,reportedBranch:p,graphMode:a})}else if(a===1){let C=m.mapY(g.mapY(i)-w.height/(Mg-1));n=this.getInterveningPOIs(i,C,e,a)[0],(!n||n.y!==i||n.branch!==e)&&(n=void 0,l=s?s(i):0),n?r={x:n.x,y:n.y,type:n.type,typeChain:n.typeChain,branch:n.branch,reportedBranch:p,graphMode:a,intersects:n.intersects}:s&&(r={y:i,x:l,branch:e,reportedBranch:p,graphMode:a})}else if(a===3){let C=m.mapX(g.mapX(i)+w.width/(Mg-1));n=this.getInterveningPOIs(i,C,e,a)[0],n&&n.x===i&&n.branch===e?r={x:n.x,y:n.y,type:n.type,typeChain:n.typeChain,branch:n.branch,reportedBranch:p,graphMode:a,intersects:n.intersects}:r={x:i,y:NaN,branch:e,reportedBranch:p,graphMode:a}}return r}getSampledPoints(){return this.sampledPoints.length===0&&this.updateSampledPoints(),this.sampledPoints}updateSampledPoints(){let e=this.getCurrentSketch();if(!e||!Ba(this.controller,e))return;let i=[],r=this.grapher.getProjection(),o=r.viewport;for(let n=0;n<e.branches.length;n++){let a=e.branches[n];if(!Bs(a))continue;let s=a.graphMode,l=0,c=0,p=[],u;if(s===2||s===3)l=o.xmin,c=o.xmax,u=(g,m,w)=>r.mathToPixels.interpolateX(g,m,w);else if(s===1)l=o.ymin,c=o.ymax,u=(g,m,w)=>r.mathToPixels.interpolateY(g,m,w);else continue;for(let g=0;g<Mg;g++){let m=u(l,c,g/(Mg-1)),w=__dcg_shared_module_exports__['Ya'](m).value,C=u(l,c,(g+1)/(Mg-1)),S=__dcg_shared_module_exports__['Ya'](C).value,k=this.getInterveningPOIs(w,S,n,s);if(k.length>0)p.push.apply(p,k);else{let M=this.getPoint(n,w);M&&p.push(M)}}i.push.apply(i,this.removeDuplicates(p,s))}this.sampledPoints=i}getCurrentPoint(){return this.currentPoint||this.updateCurrentPoint(),this.currentPoint}updateCurrentPoint(e){if(e){this.currentPoint=e;let i=e.graphMode;i===2||i===3?this.independent=e.x!==void 0?e.x:0:i===1&&(this.independent=e.y!==void 0?e.y:0),this.branch=e.branch}else this.currentPoint=this.getPoint(this.branch,this.independent)}prevPoint(){this.moveToPoint(-1)}nextPoint(){this.moveToPoint(1)}firstPoint(){let e=this.getSampledPoints();e.length>0&&this.updateCurrentPoint(e[0])}lastPoint(){let e=this.getSampledPoints();e.length>0&&this.updateCurrentPoint(e[e.length-1])}moveToPoint(e){let i=this.getCurrentPoint();if(!i)return;if(i.graphMode===3){this.moveToPOI(e);return}let r=this.getSampledPoints(),o=this.getClosestPointIndexOnSameBranch(r,i);if(o!==-1){let n=o+e;n<=0?(n=0,Xe(this.controller.s("graphing-calculator-narration-audio-trace-first-point"))):n>=r.length-1&&(n=r.length-1,Xe(this.controller.s("graphing-calculator-narration-audio-trace-last-point")));let a=r[n];this.updateCurrentPoint(a)}}canMoveToPrevPoint(){let e=this.getCurrentPoint();if(!e)return!1;if(e.graphMode===3)return this.canMoveToPrevPOI();let i=this.getSampledPoints(),r=this.getClosestPointIndexOnSameBranch(i,e);return r!==-1&&r>0}canMoveToNextPoint(){let e=this.getCurrentPoint();if(!e)return!1;if(e.graphMode===3)return this.canMoveToNextPOI();let i=this.getSampledPoints(),r=this.getClosestPointIndexOnSameBranch(i,e);return r!==-1&&r<i.length-1}prevPOI(){this.moveToPOI(-1)}nextPOI(){this.moveToPOI(1)}getSortedPOI(){return(!this.pois||this.pois.length===0)&&this.updatePOI(),this.pois}updatePOI(){let e=[],i,r=[],o=this.getCurrentSketch();if(!(!o||!Ba(this.controller,o))){for(let n=0;n<o.branches.length;n++){let a=o.branches[n];if(!a)continue;let s=cb(o,n),l=a.graphMode;if(r=[],i=o.getBranchPOI(n),i.length>0){l===2||l===3?r=__dcg_shared_module_exports__['Ea'](i,"x"):l===1&&(r=__dcg_shared_module_exports__['Ea'](i,"y"));let c=[];for(let p of r)c.push(O8(p,l,s));e.push.apply(e,this.removeDuplicates(c,l))}}this.pois=e}}removeDuplicates(e,i){let r=[];for(let o of e){if(o=__dcg_shared_module_exports__['a']({},o),o.graphMode=i,r.length===0){r.push(o);continue}let n=r[r.length-1];__dcg_shared_module_exports__['Ya'](n.x).value===__dcg_shared_module_exports__['Ya'](o.x).value&&__dcg_shared_module_exports__['Ya'](n.y).value===__dcg_shared_module_exports__['Ya'](o.y).value&&n.branch===o.branch?(n.typeChain||(n.typeChain=n.type!==void 0?[n.type]:[]),o.type!==void 0&&n.typeChain.indexOf(o.type)===-1&&n.typeChain.push(o.type),o.type===1001&&o.intersects&&n.intersects===void 0&&(n.intersects=o.intersects)):r.push(o)}return r}getInterveningPOIs(e,i,r,o){let n=[],a=this.getSortedPOI(),s=NaN;for(let l of a)l&&((o===2||o===3)&&!isNaN(l.x)?s=l.x:o===1&&!isNaN(l.y)&&(s=l.y),l.branch===r&&!isNaN(s)&&(e<=s&&s<i||i<=s&&s<e)&&n.push(l));return e>i?n.reverse():n}setIndependent(e,i){let r=this.getSampledPoints();for(let n of r)if(n&&n.hasOwnProperty(e)&&n[e]===i){if(e==="x"){this.independent=n.x!==void 0?n.x:0,this.updateCurrentPoint();return}else if(e==="y"){this.independent=n.y!==void 0?n.y:0,this.updateCurrentPoint();return}}let o=!0;if(r.length>0){let n=Math.floor((r.length-1)/2),a=r[n];a&&(e==="x"?(this.independent=a.x!==void 0?a.x:0,o=!1):e==="y"&&(this.independent=a.y!==void 0?a.y:0,o=!1))}o&&(this.independent=0),this.resetToFirstBranch(),this.updateCurrentPoint()}moveToPOI(e){if(!this.getCurrentPoint())return;let r=this.getSampledPoints(),o=this.getPOIIndexByDirection(e);o===-1?Xe(this.controller.s("graphing-calculator-narration-audio-trace-no-more-pois")):this.updateCurrentPoint(r[o])}getPOIIndexByDirection(e){let i=this.getCurrentPoint();if(!i)return-1;let r=this.getSampledPoints(),o=this.getClosestPointIndexOnSameBranch(r,i),n=-1;if(o!==-1){let a=i.graphMode,s=e===1?r.length-1:0;for(let l=o;l!==s+e;l+=e){let c=r[l];if(((a===2||a===3)&&i.x!==c.x||a===1&&i.y!==c.y)&&c.type!==void 0){n=l;break}}}return n}canMoveToPrevPOI(){return this.getPOIIndexByDirection(-1)!==-1}canMoveToNextPOI(){return this.getPOIIndexByDirection(1)!==-1}getClosestPointIndexOnSameBranch(e,i){let r=-1,o=1/0;if(e.length>0&&i){let n=i.graphMode;for(let a=0;a<e.length;a++){let s=e[a];if(i.branch!==s.branch)continue;let l;n===2||n===3?l=Math.abs(s.x-i.x):l=Math.abs(s.y-i.y),l<o&&(r=a,o=l)}}return r}prevCurve(){this.controller.shouldAudioTraceReverseExpressions()?this.curveDown():this.curveUp()}nextCurve(){this.controller.shouldAudioTraceReverseExpressions()?this.curveUp():this.curveDown()}curveUp(){let e=this.getSelectedItem();if(!e)return;let i=this.prevTableColumn(e);if(i)this.audiograph.setFocusedCell(i);else{let r=e.index,o=this.findPrevTraceableIndex({index:r,focusTableCell:!0});if(o!==-1){let n=this.controller.getItemModelByIndex(o);n&&this.controller.dispatch({type:"set-selected-id",id:n.id})}}(i||this.getSelectedItem()!==e)&&this.audiograph.enterAudioTrace()}curveDown(){let e=this.getSelectedItem();if(!e)return;let i=this.nextTableColumn(e);if(i)this.audiograph.setFocusedCell(i);else{let r=e.index,o=this.findNextTraceableIndex({index:r,focusTableCell:!0});if(o!==-1){let n=this.controller.getItemModelByIndex(o);n&&this.controller.dispatch({type:"set-selected-id",id:n.id})}}(i||this.getSelectedItem()!==e)&&this.audiograph.enterAudioTrace()}canMoveToPrevCurve(){let e=this.getSelectedItem();return e?this.controller.shouldAudioTraceReverseExpressions()?this.findNextTraceableIndex({index:e.index,focusTableCell:!1})!==-1:this.findPrevTraceableIndex({index:e.index,focusTableCell:!1})!==-1:!1}canMoveToNextCurve(){let e=this.getSelectedItem();return e?this.controller.shouldAudioTraceReverseExpressions()?this.findPrevTraceableIndex({index:e.index,focusTableCell:!1})!==-1:this.findNextTraceableIndex({index:e.index,focusTableCell:!1})!==-1:!1}findPrevTraceableIndex(e){let i=e.index,r;do{i--,r=this.controller.getItemModelByIndex(i);let o=r&&this.prevTableColumn(r);if(o)return e.focusTableCell&&this.audiograph.setFocusedCell(o),i}while(r&&!this.canTrace(r));return r?i:-1}findNextTraceableIndex(e){let i=e.index,r;do{i++,r=this.controller.getItemModelByIndex(i);let o=r&&this.nextTableColumn(r);if(o)return e.focusTableCell&&this.audiograph.setFocusedCell(o),i}while(r&&!this.canTrace(r));return r?i:-1}prevTableColumn(e){return this.tableColumn(e,-1)}nextTableColumn(e){return this.tableColumn(e,1)}tableColumn(e,i){let r;if(e&&e.type==="table"){let o=this.audiograph.getFocusedCell(),n,a,s;i===-1?(n=o?Math.max(o.location.column-1,0):NaN,a=o&&o.tableId===e.id&&!isNaN(n)?n:e.columnModels.length-1,s=0):(n=o?Math.min(o.location.column+1,e.columnModels.length-1):NaN,a=o&&o.tableId===e.id&&!isNaN(n)?n:0,s=e.columnModels.length-1);let l=(s-a)/i;if(isFinite(l)&&l>=0)for(let c=a;c!==s;c+=i){let p=e.columnModels[c];if(p&&this.grapher.getGraphSketch(p.id)){r={tableId:e.id,location:{column:c,row:0}};break}}}return r}getGraphSketchForTableCell(e,i){if(!e||e.type!=="table"||!i)return;let r=e.columnModels[i.location.column];if(r)return this.grapher.getGraphSketch(r.id)}getSelectedItemId(){let e=this.controller.getSelectedItem();return e&&e.type==="folder"?jv(e):e==null?void 0:e.id}getSelectedItem(){let e=this.controller.getSelectedItem();if(e&&e.type==="folder"){var i=jv(e);return i===void 0?void 0:this.controller.getItemModel(i)}return e}};Tt();function db(t){var T;let e=t.getGrapher();if(!e)return"";let i=e.viewportController.getViewport(),r=e.getProjection(),{showGrid:o,showXAxis:n,xAxisNumbers:a,showYAxis:s,yAxisNumbers:l,xAxisLabel:c,yAxisLabel:p}=e.settings,u=!1,g="",m=!1;t.is3dProduct()&&(n=s=u=e.settings.showAxis3D,c=p=g="",a=l=m=e.settings.showNumbers3D,o=n&&e.settings.showPlane3D);let w=[],C=Vo(__dcg_shared_module_exports__['gb'].value(i.xmin,Hp(r,i.xmin)).latex),S=Vo(__dcg_shared_module_exports__['gb'].value(i.xmax,Hp(r,i.xmax)).latex),k=Vo(__dcg_shared_module_exports__['gb'].value(i.ymin,EC(r,i.ymin)).latex),M=Vo(__dcg_shared_module_exports__['gb'].value(i.ymax,EC(r,i.ymax)).latex),I=i.zmin?Vo(__dcg_shared_module_exports__['gb'].value(i.zmin).latex):"",E=i.zmax?Vo(__dcg_shared_module_exports__['gb'].value(i.zmax).latex):"";if(n&&(a&&c!==""?w.push(t.s("graphing-calculator-narration-audio-trace-description-visible-x-axis-range-and-label",{xmin:C,xmax:S,label:c})):a&&c===""?w.push(t.s("graphing-calculator-narration-audio-trace-description-visible-x-axis-range",{xmin:C,xmax:S})):!a&&c!==""?w.push(t.s("graphing-calculator-narration-audio-trace-description-visible-x-axis-and-label",{label:c})):!a&&c===""&&w.push(t.s("graphing-calculator-narration-audio-trace-description-visible-x-axis"))),s&&(l&&p!==""?w.push(t.s("graphing-calculator-narration-audio-trace-description-visible-y-axis-range-and-label",{ymin:k,ymax:M,label:p})):l&&p===""?w.push(t.s("graphing-calculator-narration-audio-trace-description-visible-y-axis-range",{ymin:k,ymax:M})):!l&&p!==""?w.push(t.s("graphing-calculator-narration-audio-trace-description-visible-y-axis-and-label",{label:p})):!l&&p===""&&w.push(t.s("graphing-calculator-narration-audio-trace-description-visible-y-axis"))),u&&(m&&g!==""?w.push(t.s("graphing-calculator-narration-audio-trace-description-visible-z-axis-range-and-label",{zmin:I,zmax:E,label:g})):m&&g===""?w.push(t.s("graphing-calculator-narration-audio-trace-description-visible-z-axis-range",{zmin:I,zmax:E})):!m&&g!==""?w.push(t.s("graphing-calculator-narration-audio-trace-description-visible-z-axis-and-label",{label:g})):!m&&g===""&&w.push(t.s("graphing-calculator-narration-audio-trace-description-visible-z-axis"))),o&&w.push(t.s("graphing-calculator-narration-audio-trace-description-visible-grid")),t.is3dProduct()&&w.push(_8(t)),!t.isGeometry()&&!t.is3dProduct()){let A=(T=t.getGrapher())==null?void 0:T.graphSketches,G=0;for(let _ in A)Ba(t,A[_])&&(G+=1);w.push(t.s("graphing-calculator-narration-audio-trace-traceable-curves",{sketchCount:new mo(G)}))}return w.join(" ").trim()}function _8(t){return""}var F8={};__dcg_shared_module_exports__['g'](F8,{default:()=>iT});var iT=__dcg_shared_module_exports__['i']("//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAIAAAHVwAgICAgICAgICAgICBAQEBAQEBAQEBAQEBgYGBgYGBgYGBgYGBggICAgICAgICAgICAoKCgoKCgoKCgoKCgoMDAwMDAwMDAwMDAwODg4ODg4ODg4ODg4OD///////////////8AAAA5TEFNRTMuOThyAaUAAAAALmcAABRAJAiwQgAAQAAAB1cctrbdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjsKyK0YYABp52xtx8wAgAgBd34IAhAgnsECEe7QIAAgsPxACDgcBAEHQfD/g+D4PggCAIf///ghLny4Pg+D5+sHz/wf+XPwfB8H3iMHwfwffUCYPvz/Y7Hg/H4/H4/H4HAwADcoDwAP7XfuAFtXrhzjsjOXP8iCYM4IBVoH2DGAhQR2hm5vikA2IVEPX9nQaITi6IiLCKX/fxcg/DdGmS5BP7fIGQ0hw7DQi5Q//8midImXygdJ0tlz/1NAgXIANV6MA2Vy2y27jv/+1LEBIALOHOTvGGAMXWhbnTxGZ+LOa2FNMsDtj9/jUmPqqqARrNvlVjDDoGZqq0T11A0DVqeEnlQk8q4sVEp0FcqdxLoEJ0RPYWvIlQkbGA0Anw6VJJgqRKw1NJaAXkR4ag0/FwCCABbbdbJA0fzVgdvgvu5Px6Rwiv3VllZVDREqmWntLyBDka3sz951iTve+ddHP0/M3P/+ydU4zbqOZOeop5jfu1kwk8VezPeGc1hRMbWrJNv6SO/fH0Mc15KYvKqAAAAdrdsrbBDuBpp4v/7UsQGgguVE2ekjNP5aSBo6YSNgKAQUoCZEBJK8q73G/nhJFFmLY5dNc4b7gjBRyEs5yjJokY9TBoU/pXQBglyNjeiA87V8vkzaw019YTu2fxY0t6gteLMI37f9fYw7UVnWoE4NJOSpQBu3GfVAIVACgw+IikZZAnB7UKlLGnha4PDbIhsBhk4RYmlE2hYZ8NrQ5HnyEUvZxDyVG1hM33ZZH0OlrJV5///3/51qTGtJgxhREVLEfoO1w6686eRAAAAUicksbA1qegZCe2AuEgJ//tSxAkCDF0XSaw8ailyn+l1h4w1BvVY04S56fYY5nGkBZHMGLBjHDUMlORG4wcCT9R6RB+3vM8jVMU1hmlOoXIOMKqotE2HxWYNJq/7EZ2l63NJ+Z2aTA4Yq+7t0PhOxCz9WP1mA3DJZZGDkRfq+qFAGwhwHUAVqBfDiMUlypaMWApR1VoWLChfUpJzkBDMCTf85UZr6jyHa1psZnTS5iKatTVKcX/Ker9zMvM1T0okGyiQcreJbU1tc+Yj/ms3395FBIADkjlkjbAZNdiwgRD/+1LEBwAL8Tdbp6Rh+XmT6XWHjCx5U4sTCtlUidNtS9I7oUx7oxdIZlOghkIQYzB0vxtMs6QgCg4WMVakQMM5HRfrsdIEftM0yfOHnNGkiPRMoWCKSsxsChat8/vYw4c4t+CMMB5AAAAXZrftWiEVdbSgnURZoWvK2KhK9GfCkIGnQKxIqbYJ0JCNFJ3St1wuUNRLW4Kw5VhLVGrmgYKhhRe1qzzC7SqFFyjJlIqXcPD6gw//epZ9bwQFw+s+rdVAFtzl0AAAA3I3JK0QJxtCHv/7UsQGAApAM0WssGFpSCKqNYMMvgZph6CwIhKEt0yEiMwFKpnDBBajVc5jbTM7KayRt3I43h8Ag05kd9AtqO0bItmf/+Aevzf7dx28sK0hvP//3/izNwf1pfEAgANutuOJACSqWvuW+SKNLQSpOQKsrX3XxnZxy2Rus0Q1irPy9Mkg4kZGJFRQUax4R+jsACwavqYd2bmRX/6VnKrLk2Z2VGYwQNCIEasJh7/oBScAAMtBNgBWssKw0uCAgKkVpJirpZyBklUCwqaSIkW6BgIY//tSxBIDSYw3Km0kSoEzi9KAliSw9QNAydBqoFQVEQNBwiJYiBWdDqxiwVBUGqg6JgaBoGj3//////huVcFQsIRoPjBXLBGA8AkCwOhcD4KAmFAtEYcR6E8gD2OAXJ2N//uSJVZVJNRdh0gkLCwuKioqz4sLC3//////4sLC31ioqKpAoqKirOgFqkxBTUUzLjk4LjKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+1LEIwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==");hd();var Oc=.075,Ei=.0015,ZF=125,eR=330,tR=2e3,N8=27.5,B8=4186,rT=.04,oT=.2,iR=25;function rR(t){return t<2e3?.002:.005}function K8(t){return{segments:t.clippedSegments.length,totalPoints:t.clippedSegments.map(e=>e.length).reduce((e,i)=>e+i,0),graphMode:t.graphMode,duration:t.duration,discrete:t.discrete}}var pb=class{constructor(e,i){this.audioContext=e.audioContext,this.audioContext&&(this.oscillator=this.audioContext.createOscillator(),this.oscillator.setPeriodicWave(e.getBaseWaveform()),this.firstHarmonic=this.audioContext.createOscillator(),this.firstHarmonic.setPeriodicWave(e.getFirstHarmonicWaveform()),this.firstHarmonicGain=this.audioContext.createGain(),this.firstHarmonicGain.gain.value=0,this.pan=this.audioContext.createStereoPanner(),this.pan.pan.value=0,this.gain=this.audioContext.createGain(),this.gain.gain.value=0,this.oscillatorGain=this.audioContext.createGain(),this.oscillatorGain.gain.value=.5,this.oscillatorGain.connect(this.gain),this.oscillator.connect(this.oscillatorGain),this.firstHarmonic.connect(this.firstHarmonicGain),this.firstHarmonicGain.connect(this.gain),this.gain.connect(this.pan),this.pan.connect(i),this.oscillator.start(),this.firstHarmonic.start(),this.brownNoiseGain=this.audioContext.createGain(),this.brownNoiseGain.gain.value=0,this.brownNoiseSource=this.audioContext.createBufferSource(),this.brownNoiseSource.buffer=e.brownNoiseSample,this.brownNoiseSource.loop=!0,this.brownNoiseSource.start(),this.brownNoiseSource.connect(this.brownNoiseGain),this.brownNoiseGain.connect(this.pan))}stop(e){let i=Math.max(this.audioContext.currentTime,e);this.gain.gain.setTargetAtTime(0,i,Ei),this.brownNoiseGain.gain.setTargetAtTime(0,i,Ei),setTimeout(()=>{this.oscillator.stop(),this.firstHarmonic.stop(),this.brownNoiseSource.stop(),this.pan.disconnect()},1e3*(2*Ei+Math.max(0,e-this.audioContext.currentTime))+1)}};function q8(t){if(t.length<=2)return[t];let e=__dcg_shared_module_exports__['La'](t,2),i=0,r=[[e[0]]],o=e[0][0]<e[1][0];for(let n=1;n<e.length;n++)r[i].push(e[n]),n<e.length-1&&o!==e[n][0]<e[n+1][0]&&(o=!o,i++,r[i]=[e[n]]);return r.map(n=>__dcg_shared_module_exports__['Ha'](n))}function z8(t){let e=__dcg_shared_module_exports__['La'](t,2);return e.sort((i,r)=>i[0]-r[0]),__dcg_shared_module_exports__['Ha'](e)}var sS=class{constructor({controller:e,agNavigator:i,audioEnabled:r}){this.isPlayingOneBranch=!1;this.FREQ_MIN=ZF;this.FREQ_MAX=tR;this.FREQ_BASE=eR;e&&(this.controller=e),this.audioContextManager=new Mh,this.audioGraphNavigator=i,this.audioEnabled=r,this.screenDuration=5,this.audioVolume=.5}getBaseWaveform(){var r;let e=new Float32Array([0,1,0,.25]),i=new Float32Array([1,0,.25,0]);return(r=this.audioContext)==null?void 0:r.createPeriodicWave(e,i)}getFirstHarmonicWaveform(){var r;let e=new Float32Array([0,0,0,.25,0,0,0,0]),i=new Float32Array([1,0,1,0,.25,0,.3,0]);return(r=this.audioContext)==null?void 0:r.createPeriodicWave(e,i)}async prepareSynthesizer(){if(!this.audioEnabled()||!this.audioContextManager||!this.audioGraphNavigator)return;try{this.audioContext=(await this.audioContextManager.getResumedAudioContext()).audioContext,this.playbackSupported=!0}catch(r){this.playbackSupported=!1;return}this.audioContext.destination.disconnect(),this.mainGainNode=this.audioContext.createGain(),this.mainGainNode.gain.value=this.audioVolume,this.mainGainNode.connect(this.audioContext.destination);let e=this.audioContext.sampleRate*this.screenDuration;this.brownNoiseSample=this.audioContext.createBuffer(1,e,this.audioContext.sampleRate);let i=ZI(0);for(let r=0;r<e;r++)i=ZI(i),this.brownNoiseSample.getChannelData(0)[r]=i;if(!this.poiBufferSample)try{this.poiBufferSample=await this.audioContext.decodeAudioData(iT.buffer.slice(0))}catch(r){pa(r)}Yw()}releaseAudio(){var e;this.stop(),(e=this.audioContextManager)==null||e.suspend()}playPoint(e){!$F(e)||!this.audioContextManager||this.prepareSynthesizer().then(()=>{this.setupScales(e.graphMode);let i=new pb(this,this.mainGainNode),{gain:r,brownNoiseGain:o,oscillator:n,firstHarmonic:a,firstHarmonicGain:s,pan:l}=i;this.turnMainGainOn();let{independent:c,dependent:p}=QF(e),u=this.mapDependentToFrequency(p),g=this.audioContext.currentTime;if(!u||!this.viewportBounds){i.stop(g);return}else i.stop(g+Oc+Ei);if(p<this.viewportBounds.dependentMin||p>this.viewportBounds.dependentMax){o.gain.setTargetAtTime(rT,g,Ei),o.gain.setTargetAtTime(0,g+Oc,Ei);return}if(n.frequency.value=u,a.frequency.value=u,r.gain.setTargetAtTime(1,g,Ei),e.x>0&&s.gain.setTargetAtTime(.15,g,Ei),o.gain.setTargetAtTime(tT(p),g,Ei),l.pan.setTargetAtTime(this.getPanValueFromIndependent(c),g,Ei),e.intersects){let m=this.audioContext.createBufferSource();m.connect(r),m.buffer=this.poiBufferSample;try{m==null||m.start(this.audioContext.currentTime)}catch(w){}}})}playCurrentSketch(e="sequential"){this.audioContextManager&&this.prepareSynthesizer().then(()=>{this.isPlaying=!0,this.isPlayingOneBranch=!1,this.controller.runAfterDispatch(()=>this.controller.dispatch({type:"render"})),this.prepareToPlay(e),this.startPlayingTime=this.audioContext.currentTime+Ei,this.currentPlayLoopStartTime=this.startPlayingTime,this.lagLoggingData||(this.lagLoggingData={startPlayingTime:this.startPlayingTime,branchCount:this.branches.length,branchInfo:this.branches.map(i=>K8(i)),branchIteratorStartTimes:[],branchIteratorRunTimes:[],branchIteratorCallCount:0,branchLags:[],screenDuration:this.screenDuration}),e==="sequential"?(this.currentPlayLoopBranchIndex=0,this.playBranchIterators=[this.playBranch(this.currentPlayLoopBranchIndex,this.currentPlayLoopStartTime)],this.lagLoggingData&&(this.lagLoggingData.proposedDuration=this.branches.reduce((i,r)=>{var o;return i+((o=r.duration)!=null?o:0)},0)),this.sequentialPlayLoop()):e==="simultaneous"&&(this.playBranchIterators=this.branches.map((i,r)=>this.playBranch(r,this.currentPlayLoopStartTime)),this.playBranchIterators.push(this.playBlankSpace(this.currentPlayLoopStartTime)),this.simultaneousPlayLoop())})}stop(){var o,n,a,s,l,c;Jw(),clearTimeout(this.timeoutId),this.isPlaying=!1,this.startPlayingTime=void 0;let e=(o=this.audioContext)==null?void 0:o.currentTime;if(!e)return;this.lagLoggingData&&(this.lagLoggingData.actualDuration=e-this.lagLoggingData.startPlayingTime,this.lagLoggingData.stopPlayingTime=e,(a=(n=this.controller).logEvent)==null||a.call(n,"audio-trace::stop-graph",this.lagLoggingData,{category:"audio-trace",action:"stop-graph"}),this.lagLoggingData=void 0);let i=(s=this.playBranchIterators)==null?void 0:s.map(p=>p.next()).filter(p=>!p.done);i==null||i.forEach(p=>{var u,g;return(g=(u=p.value).synthStopCallback)==null?void 0:g.call(u,e)}),this.playBranchIterators=[],(l=this.mainGainNode)==null||l.gain.cancelScheduledValues(e),(c=this.mainGainNode)==null||c.gain.setTargetAtTime(0,e,Ei);let r=this.mainGainNode;setTimeout(()=>r.disconnect(),1e3*2*Ei+1),this.controller.runAfterDispatch(()=>this.controller.dispatch({type:"render"}))}getGraphMode(){if(this.branches)return this.currentPlayLoopBranchIndex!==void 0?this.branches[this.currentPlayLoopBranchIndex].graphMode:this.branches[0].graphMode}playBranchByIndex(e){this.audioContext&&this.prepareSynthesizer().then(()=>{this.prepareToPlay("simultaneous"),this.isPlayingOneBranch=!0,this.isPlaying=!0,this.startPlayingTime=this.audioContext.currentTime+Ei,this.currentPlayLoopStartTime=this.startPlayingTime,this.currentPlayLoopBranchIndex=e,this.branches[0].graphMode===8||this.branches[0].graphMode==5||this.branches[0].graphMode==6?(this.playBranchIterators=this.branches.map((i,r)=>this.playBranch(r,this.currentPlayLoopStartTime)),this.playBranchIterators.push(this.playBlankSpace(this.currentPlayLoopStartTime))):this.playBranchIterators=[this.playBranch(e,this.startPlayingTime)],this.simultaneousPlayLoop()})}getPlaybackSupported(){return this.playbackSupported}getIsPlaying(){return this.isPlaying}getAudioSpeed(){return this.screenDuration*10}setAudioSpeed(e){this.screenDuration=e/10}getAudioVolume(){return this.audioVolume}setAudioVolume(e){var i;this.audioVolume=e,(i=this.mainGainNode)==null||i.gain.setTargetAtTime(this.audioVolume,0,Ei)}getCurrentIndependentValue(){var r,o;if(!this.getIsPlaying()||this.startPlayingTime===void 0)return;if(this.isPlayingOneBranch)return(o=(r=this.branches[this.currentPlayLoopBranchIndex]).mapTimeToIndependent)==null?void 0:o.call(r,this.audioContext.currentTime-this.startPlayingTime);let e=this.audioContext.currentTime-this.startPlayingTime,i=0;for(let n of this.branches)if(!(!n.duration||!n.mapIndependentToTime||!n.mapTimeToIndependent)){if(e-i>=n.duration){i+=n.duration;continue}return n.mapTimeToIndependent(e-i)}}getCurrentBranchIndex(){if(!this.getIsPlaying()||this.startPlayingTime===void 0)return;if(this.isPlayingOneBranch)return this.currentPlayLoopBranchIndex;let e=this.audioContext.currentTime-this.startPlayingTime,i=0;for(let r=0;r<this.branches.length;r++){let o=this.branches[r];if(o.duration){if(e-i>=o.duration){i+=o.duration;continue}return r}}}preprocessBranch(e,i){switch(e.graphMode){case 8:case 5:case 6:let r=[],o=e.segments;if(e.graphMode===6){let n=this.controller.getViewState();o=o.map(a=>JF(a,n))}for(let n of o){let s=eT(n,i,__dcg_shared_module_exports__['Hc']);r.push(...s.filter(l=>l.length>2))}return r=__dcg_shared_module_exports__['Ha'](r.map(n=>q8(n).map(a=>z8(a))),!0),r.sort((n,a)=>n[0]-a[0]),r.map(n=>({graphMode:e.graphMode,discrete:!1,poi:e.poi,clippedSegments:[n]})).filter(n=>n.clippedSegments.length>0);case 2:case 1:{let n=[];for(let a of e.segments){let s=e.graphMode===2?__dcg_shared_module_exports__['Hc']:__dcg_shared_module_exports__['Ic'],l=eT(a,i,s);n.push(...l.filter(c=>c.length>2))}return n.sort((a,s)=>a[0]-s[0]),{graphMode:e.graphMode,discrete:!1,clippedSegments:n,poi:e.poi}}case 3:case 4:{let{viewport:n}=i,a=e.segments[0].slice();a.sort(XF);let s=[],l=[];for(let c of a)s.push(c[0],c[1]),c[0]>=n.xmin&&c[1]<=n.xmax&&c[1]>=n.ymin&&c[1]<=n.ymax&&l.push(c[0],c[1]);return{graphMode:2,discrete:!0,clippedSegments:[l],poi:void 0}}default:throw new Error(`Unimplemented graph mode: ${e.graphMode}`)}}turnMainGainOn(){var e,i;(e=this.mainGainNode)==null||e.gain.cancelScheduledValues(0),(i=this.mainGainNode)==null||i.gain.setTargetAtTime(this.audioVolume,0,Ei)}getPanValueFromIndependent(e){return this.dependentScale?__dcg_shared_module_exports__['ub'](2*__dcg_shared_module_exports__['zc'](this.dependentScale,e)-1,-1,1):0}setupScales(e){this.projection=this.controller.get2dProjection(),this.viewportBounds=jF(this.projection.viewport,e);let i=e===1?this.projection.settings.yAxisScale:this.projection.settings.xAxisScale,r=e===1?this.projection.settings.xAxisScale:this.projection.settings.yAxisScale;this.independentScale=__dcg_shared_module_exports__['yc'](i,[this.viewportBounds.independentMin,this.viewportBounds.independentMax],[0,this.screenDuration]),this.dependentScale=__dcg_shared_module_exports__['yc'](r,[this.viewportBounds.dependentMin,this.viewportBounds.dependentMax],[0,1]),this.viewportBounds.dependentMax<=B8&&this.viewportBounds.dependentMin>=N8&&this.viewportBounds.dependentMax-this.viewportBounds.dependentMin>=1e3?(this.FREQ_MIN=this.viewportBounds.dependentMin,this.FREQ_MAX=this.viewportBounds.dependentMax,this.FREQ_BASE=void 0):(this.FREQ_MIN=ZF,this.FREQ_MAX=tR,this.FREQ_BASE=eR)}densifyBranches(){this.branches.map(e=>{if(e.discrete)return e;let i=this.independentScale,r=this.dependentScale;return!i||!r||!e.clippedSegments||(e.clippedSegments=e.clippedSegments.map(o=>{let n=[];for(let a=0;a<o.length;a+=2){let s=this.mapDependentToFrequency(o[a+1]),l=this.mapDependentToFrequency(o[a+3]);if(n.push(o[a]),n.push(o[a+1]),s&&l&&isFinite(s)&&isFinite(l)&&Math.abs((l-s)/s)>=rR(Math.min(l,s))){let c=Math.ceil(Math.abs((l-s)/s)/rR(Math.min(l,s)));for(let p=1;p<c;p++)n.push(__dcg_shared_module_exports__['Ac'](i.type,o[a],o[a+2],p*1/c)),n.push(__dcg_shared_module_exports__['Ac'](r.type,o[a+1],o[a+3],p*1/c))}}return n})),e})}setupToPlayBranches(e){if(!this.audioGraphNavigator||!this.audioContext||!this.mainGainNode)return;let i=this.audioGraphNavigator.getCurrentSketch();if(!i)return;let r=this.controller.get2dProjection();if(this.branches=__dcg_shared_module_exports__['Ha'](i.branches.filter(o=>Bs(o)).map(o=>this.preprocessBranch(o,r))),this.setupScales(this.branches[0].graphMode),this.densifyBranches(),e==="simultaneous"){let o=Math.min(...this.branches.map(c=>c.clippedSegments[0][0])),n=Math.max(...this.branches.map(c=>c.clippedSegments.slice(-1)[0].slice(-2)[0])),a=this.mapIndependentToTime(n)-this.mapIndependentToTime(o),s=__dcg_shared_module_exports__['yc'](this.branches[0].graphMode===1?this.projection.settings.yAxisScale:this.projection.settings.xAxisScale,[o,n],[0,a]),l=__dcg_shared_module_exports__['yc'](this.branches[0].graphMode===1?this.projection.settings.yAxisScale:this.projection.settings.xAxisScale,[0,a],[o,n]);this.branches.forEach(c=>{c.duration=c.discrete?a+Oc:a,c.mapIndependentToTime=p=>__dcg_shared_module_exports__['zc'](s,p),c.mapTimeToIndependent=p=>__dcg_shared_module_exports__['zc'](l,p)})}else this.branches.forEach(o=>{let n=o.clippedSegments[0][0],a=o.clippedSegments.slice(-1)[0].slice(-2)[0];o.duration=this.mapIndependentToTime(a)-this.mapIndependentToTime(n),o.discrete&&(o.duration+=Oc);let s=__dcg_shared_module_exports__['yc'](this.branches[0].graphMode===1?this.projection.settings.yAxisScale:this.projection.settings.xAxisScale,[n,a],[0,o.duration]),l=__dcg_shared_module_exports__['yc'](this.branches[0].graphMode===1?this.projection.settings.yAxisScale:this.projection.settings.xAxisScale,[0,o.duration],[n,a]);o.mapIndependentToTime=c=>__dcg_shared_module_exports__['zc'](s,c),o.mapTimeToIndependent=c=>__dcg_shared_module_exports__['zc'](l,c)})}prepareToPlay(e){this.setupToPlayBranches(e),this.turnMainGainOn(),clearInterval(this.timeoutId)}sequentialPlayLoop(){var r,o,n,a,s;let e=this.audioContext.currentTime,i=(r=this.playBranchIterators[0])==null?void 0:r.next();if(this.lagLoggingData&&(this.lagLoggingData.branchIteratorCallCount++,this.audioContext.currentTime-e>0&&(this.lagLoggingData.branchIteratorStartTimes.push(e),this.lagLoggingData.branchIteratorRunTimes.push(this.audioContext.currentTime-e))),!!i){if(i.done)if(((o=i.value)==null?void 0:o.duration)!==void 0&&(this.currentPlayLoopStartTime=((n=i.value.startTime)!=null?n:this.currentPlayLoopStartTime)+i.value.duration),this.currentPlayLoopBranchIndex<this.branches.length-1)this.currentPlayLoopBranchIndex++,this.playBranchIterators[0]=this.playBranch(this.currentPlayLoopBranchIndex,this.currentPlayLoopStartTime),this.sequentialPlayLoop();else{(a=this.mainGainNode)==null||a.gain.cancelScheduledValues(this.currentPlayLoopStartTime),(s=this.mainGainNode)==null||s.gain.setTargetAtTime(0,this.currentPlayLoopStartTime,Ei),clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>this.stop(),1e3*(Math.max(this.currentPlayLoopStartTime-this.audioContext.currentTime,0)+Ei));return}this.timeoutId=setTimeout(()=>this.sequentialPlayLoop(),iR)}}simultaneousPlayLoop(){var i,r;let e=this.playBranchIterators.map(o=>o.next());if(e.every(o=>o.done)){let o=this.currentPlayLoopStartTime+Math.max(...e.map(n=>{var a;return(a=n.value)!=null&&a.duration&&isFinite(n.value.duration)?n.value.duration:0}));(i=this.mainGainNode)==null||i.gain.cancelScheduledValues(o),(r=this.mainGainNode)==null||r.gain.setTargetAtTime(0,o,Ei),this.timeoutId=setTimeout(()=>this.stop(),1e3*(Math.max(o-this.audioContext.currentTime,0)+Ei))}else this.timeoutId=setTimeout(()=>this.simultaneousPlayLoop(),iR)}*playBlankSpace(e){let i=Math.max(this.audioContext.currentTime,e),r=new pb(this,this.mainGainNode),{oscillator:o,pan:n,brownNoiseGain:a,gain:s}=r;o.stop(),s.gain.setTargetAtTime(1,i,Ei);let l=this.branches.map(u=>{if(u.mapIndependentToTime)return[u.clippedSegments[0][0],u.clippedSegments.slice(-1)[0].slice(-2)[0]]}).filter(u=>!!u),c=[];for(l.sort((u,g)=>u[0]-g[0]);l.length>0;){let u=l[0];l=l.filter(g=>g[1]>u[1]),l.filter(g=>g[0]<=u[1]).length===0&&c.push([u[1],Math.min(...l.map(g=>g[0]))])}c=c.filter(u=>isFinite(u[0])&&isFinite(u[1]));let p=u=>{r.stop(u)};for(let u of c){let g=i+this.mapIndependentToTime(u[0]),m=i+this.mapIndependentToTime(u[1]);for(;g>this.audioContext.currentTime+oT;)yield{synthStopCallback:p};a.gain.setTargetAtTime(rT,g,Ei),a.gain.setTargetAtTime(0,m,Ei),n.pan.setValueAtTime(this.getPanValueFromIndependent(u[0]),g),n.pan.linearRampToValueAtTime(this.getPanValueFromIndependent(u[1]),m)}return{duration:0}}*playBranch(e,i){var w,C,S,k;let r=this.branches[e];if(!(r!=null&&r.duration)||!(r!=null&&r.mapIndependentToTime))return{duration:0};let o=Math.max(this.audioContext.currentTime,i),n=new pb(this,this.mainGainNode),{oscillator:a,gain:s,firstHarmonic:l,firstHarmonicGain:c,pan:p,brownNoiseGain:u}=n,g=r.clippedSegments;if(r.poi&&r.poi.intersections&&this.poiBufferSample){let M=YF(r.graphMode,r.poi.intersections);for(let I of M){let E=this.audioContext.createBufferSource();E.connect(s),E.buffer=this.poiBufferSample;try{E==null||E.start(o+r.mapIndependentToTime(I))}catch(T){}}}let m=M=>{n.stop(M)};for(let M=0;M<g.length;M++){let I=g[M];for(let E=0;E<I.length;E+=2){let T=E===0,A=E+2>=I.length,G=o+r.mapIndependentToTime(I[E]),_=this.mapDependentToFrequency(I[E+1]);for(;G>this.audioContext.currentTime+oT;)yield{synthStopCallback:m,duration:void 0};if(G<this.audioContext.currentTime-oT&&this.lagLoggingData&&this.lagLoggingData.branchLags.push({branchIndex:e,segmentIndex:M,pos:E,nextTime:G,proposedStartTime:i,lagAmount:this.audioContext.currentTime-G,currentTime:this.audioContext.currentTime}),T&&(c.gain.cancelScheduledValues(G),u.gain.cancelScheduledValues(G),s.gain.setTargetAtTime(1,G,Ei)),_!==void 0&&isFinite(_)){if(r.discrete){let W=E>=2?o+r.mapIndependentToTime(I[E-2]):void 0,X=E+2<I.length?o+r.mapIndependentToTime(I[E+2]):void 0,q=W!==void 0?Math.max(G-Oc/2,W+Oc/2):G-Oc/2,B=X!==void 0?Math.min(X,G+Oc/2):G+Oc/2;a.frequency.setValueAtTime(_,q),l.frequency.setValueAtTime(_,q),c.gain.setTargetAtTime(I[E]>0?.15:0,q,Ei),c.gain.setTargetAtTime(0,B,Ei),s.gain.setTargetAtTime(1,q,Ei),s.gain.setTargetAtTime(0,B,Ei)}else{a.frequency.linearRampToValueAtTime(_,G),l.frequency.linearRampToValueAtTime(_,G);let W=G;if(E>=2&&I[E-2]<=0!=I[E]<=0){let q=I[E-2],B=I[E];W=o+r.mapIndependentToTime(__dcg_shared_module_exports__['Ac']((C=(w=this.independentScale)==null?void 0:w.type)!=null?C:"linear",q,B,Math.abs(B)/(Math.abs(B)+Math.abs(q))))}c.gain.setTargetAtTime(I[E]>0?.15:0,W,Ei)}let P=G;if(E>=2&&I[E+1]<=0!=I[E-1]<=0){let W=I[E-2],X=I[E],q=I[E-1],B=I[E+1];P=o+r.mapIndependentToTime(__dcg_shared_module_exports__['Ac']((k=(S=this.independentScale)==null?void 0:S.type)!=null?k:"linear",W,X,Math.abs(q)/(Math.abs(q)+Math.abs(B))))}u.gain.setTargetAtTime(tT(I[E+1]),P,Ei)}A&&(s.gain.setTargetAtTime(0,G,Ei),M<r.clippedSegments.length-1&&u.gain.setTargetAtTime(rT,G,Ei)),E===0?p.pan.setValueAtTime(this.getPanValueFromIndependent(I[E]),G):p.pan.linearRampToValueAtTime(this.getPanValueFromIndependent(I[E]),G)}}return r.duration=Math.max(0,r.duration,this.audioContext.currentTime-i),n.stop(o+r.duration),{duration:r.duration,startTime:o}}mapIndependentToTime(e){return this.independentScale?__dcg_shared_module_exports__['zc'](this.independentScale,e):0}mapDependentToFrequency(e){if(!this.dependentScale)return;let i=__dcg_shared_module_exports__['zc'](this.dependentScale,e);if(this.FREQ_BASE)return Math.min(Math.max(this.FREQ_BASE*Math.pow(2,i),this.FREQ_MIN),this.FREQ_MAX);{let r=this.FREQ_MAX-this.FREQ_MIN;return Math.min(Math.max(this.FREQ_MIN+r*i,this.FREQ_MIN),this.FREQ_MAX)}}};var ub=[{speed:1600,displayedSpeed:"1/32 x"},{speed:1200,displayedSpeed:"1/24 x"},{speed:800,displayedSpeed:"1/16 x"},{speed:400,displayedSpeed:"1/8 x"},{speed:200,displayedSpeed:"1/4 x"},{speed:100,displayedSpeed:"1/2 x"},{speed:50,displayedSpeed:"1 x"},{speed:25,displayedSpeed:"2 x"},{speed:12.5,displayedSpeed:"4 x"},{speed:6.25,displayedSpeed:"8 x"}],lS=class{constructor(e,i){this.grapher=i,this.controller=e,this.audioTraceActive=!1,this.wasFocusInExpressionsView=!1,this.focusedCell=void 0,this.sliderTraceActive=!1,this.sliderIndex=0,this.sliderArray=[],this.lastSpokenBranch=1,this.agNavigator=new aS(e,this,this.grapher),this.agSynthesizer=new sS({controller:e,agNavigator:this.agNavigator,audioEnabled:()=>this.controller.getAudio()}),this.audioSpeedIndex=6,this.agSynthesizer.releaseAudio()}remove(){}handleKeydown(e){let i=e.altKey&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey;i&&Dr(e)==="S"?this.agNavigator.getSelectedItem()&&(this.audioTraceActive||this.isFocusInExpressionsView())&&(e.preventDefault(),e.stopPropagation(),this.describeCurve()):i&&Dr(e)==="G"?(this.audioTraceActive||this.isFocusInExpressionsView())&&(e.preventDefault(),e.stopPropagation(),this.describeAxes()):i&&Dr(e)==="T"?(e.preventDefault(),e.stopPropagation(),this.toggleAudioTrace()):this.audioTraceActive&&(this.sliderTraceActive?this.sliderTraceKeydown(e):(this.stopAnimations(),this.audioTraceKeydown(e)))}sliderTraceKeydown(e){let i=e.altKey||e.metaKey,r=!i&&!e.ctrlKey&&!e.shiftKey;r&&be(e)===Gl||Dr(e)==="J"?(e.preventDefault(),e.stopPropagation(),this.decrementSliderValue()):r&&be(e)===Al||Dr(e)==="L"?(e.preventDefault(),e.stopPropagation(),this.incrementSliderValue()):r&&be(e)===tg?(e.preventDefault(),e.stopPropagation(),this.decrementBigSliderValue()):r&&be(e)===eg?(e.preventDefault(),e.stopPropagation(),this.incrementBigSliderValue()):!i&&(be(e)===un||!e.shiftKey&&be(e)===Ps||Dr(e)==="K")?(e.preventDefault(),e.stopPropagation(),this.nextSlider()):!i&&(be(e)===Jo||e.shiftKey&&be(e)===Ps||Dr(e)==="I")?(e.preventDefault(),e.stopPropagation(),this.prevSlider()):r&&be(e)===rg||Dr(e)==="U"?(e.preventDefault(),e.stopPropagation(),this.sliderMin()):r&&be(e)===ig||Dr(e)==="N"?(e.preventDefault(),e.stopPropagation(),this.sliderMax()):this.audioTraceKeydown(e)}audioTraceKeydown(e){let i=e.altKey||e.metaKey,r=i&&!e.ctrlKey&&!e.shiftKey,o=!i&&!e.ctrlKey&&!e.shiftKey,n=Dr(e);if(be(e)===Jo&&r)e.preventDefault(),e.stopPropagation(),Nr(),this.agNavigator.prevCurve();else if(be(e)===un&&r)e.preventDefault(),e.stopPropagation(),Nr(),this.agNavigator.nextCurve();else if(o&&be(e)===Gl||be(e)===Jo||n==="J")e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"keypad/audio-trace",command:"previous-point"});else if(o&&be(e)===Al||be(e)===un||n==="L")e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"keypad/audio-trace",command:"next-point"});else if(!i&&(be(e)===tg||!e.shiftKey&&be(e)===Ps||n==="I"))e.preventDefault(),e.stopPropagation(),this.reportAndMoveToNextPOI();else if(!i&&(be(e)===eg||e.shiftKey&&be(e)===Ps||n==="K"))e.preventDefault(),e.stopPropagation(),this.reportAndMoveToPrevPOI();else if(o&&be(e)===rg||n==="U")e.preventDefault(),e.stopPropagation(),this.reportAndMoveToFirstPoint();else if(o&&be(e)===ig||n==="N")e.preventDefault(),e.stopPropagation(),this.reportAndMoveToLastPoint();else if(o&&n==="X")e.preventDefault(),e.stopPropagation(),this.reportX();else if(o&&n==="P")e.preventDefault(),e.stopPropagation(),this.reportPOICount();else if(o&&n==="Y")e.preventDefault(),e.stopPropagation(),this.reportY();else if(o&&n==="T")e.preventDefault(),e.stopPropagation(),this.reportType();else if(o&&n==="B")e.preventDefault(),e.stopPropagation(),this.reportBranch();else if(o&&n==="O")e.preventDefault(),e.stopPropagation(),this.reportAndMoveToOrigin();else if(o&&n==="H")e.preventDefault(),e.stopPropagation(),this.hearGraph();else if(o&&typeof n=="string"&&n>="0"&&n<="9"){if(e.preventDefault(),e.stopPropagation(),Nr(),!this.controller.getAudio()){le(this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled"));return}this.agSynthesizer.stop();let a=this.agNavigator.getCurrentSketch();if(a){let s;e.which===48?s=9:s=e.which-49;let l=s,c=-1;for(let p=0;p<a.branches.length;p++)if(Bs(a.branches[p])&&(l-=1),l<0){c=p;break}c>=0?this.agSynthesizer.getPlaybackSupported()?(this.agSynthesizer.playBranchByIndex(c),this.grapher.traceLayer.setTraceInfo(void 0),this.graphAnimationTimeoutId=requestAnimationFrame(()=>this.animateCurrentSketchLine())):le(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-play")):le(this.controller.s("graphing-calculator-narration-audio-trace-branch-not-found",{branch:s+1}))}else le(this.controller.s("graphing-calculator-narration-audio-trace-description-no-curve-selected"))}else i&&typeof n=="string"&&n>="1"&&n<="5"?(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-audio-trace-speed",speed:parseInt(n,10)+3})):!e.altKey&&!e.ctrlKey&&!e.metaKey&&n==="V"?(e.preventDefault(),e.stopPropagation(),this.controller.getAudio()?e.shiftKey?this.controller.dispatch({type:"keypad/audio-trace",command:"volume-down"}):this.controller.dispatch({type:"keypad/audio-trace",command:"volume-up"}):le(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-play"))):o&&n==="A"?(e.preventDefault(),e.stopPropagation(),Nr(),this.queueAnimatingPoints(!0),le()):o&&n==="S"&&this.controller.isListEnabled()?(e.preventDefault(),e.stopPropagation(),this.toggleSliderTrace()):o&&n==="C"?(e.preventDefault(),e.stopPropagation(),this.reportColor()):o&&this.exitAudioTrace();this.controller.dispatch({type:"render"})}describeCurve(){Nr();let e=this.agNavigator.getCurrentSketch();if(!e){le(this.controller.s("graphing-calculator-narration-audio-trace-description-no-curve-selected"));return}Xe(this.controller.s("graphing-calculator-narration-audio-trace-description-color",{color:Gp(this.controller,e.color)}));let i=cb(e,e.branches.length-1);i>1&&Xe(this.controller.s("graphing-calculator-narration-audio-trace-description-branch-count",{branches:i}));let r=!1,o=!1;for(let a of e.branches)if(i===1&&a.segments.length>0&&a.hasOwnProperty("operator")){if(a.graphMode===2){if(a.operator===">"||a.operator===">="){Xe(this.controller.s("graphing-calculator-narration-audio-trace-description-shading-above"));break}else if(a.operator==="<"||a.operator==="<="){Xe(this.controller.s("graphing-calculator-narration-audio-trace-description-shading-below"));break}}else if(a.graphMode===1){if(a.operator===">"||a.operator===">="){Xe(this.controller.s("graphing-calculator-narration-audio-trace-description-shading-right"));break}else if(a.operator==="<"||a.operator==="<="){Xe(this.controller.s("graphing-calculator-narration-audio-trace-description-shading-left"));break}}}else i>1&&(a.graphMode===2||a.graphMode===1?(a.operator==="<"||a.operator==="<="||a.operator===">"||a.operator===">=")&&(r=!0):a.graphMode===7&&(o=!0));r&&o&&Xe(this.controller.s("graphing-calculator-narration-audio-trace-description-shading-in-regions"));let n=e.getPOI();if(n.length>0){let a=[];for(let s of n)a[s.type]===void 0?a[s.type]=1:a[s.type]+=1;a.forEach((s,l)=>{l===1001?Xe(s===1?this.controller.s("graphing-calculator-narration-audio-trace-description-one-intersection"):this.controller.s("graphing-calculator-narration-audio-trace-description-multiple-intersections",{count:s})):l===1002?Xe(s===1?this.controller.s("graphing-calculator-narration-audio-trace-description-one-root"):this.controller.s("graphing-calculator-narration-audio-trace-description-multiple-roots",{count:s})):l===1003?Xe(s===1?this.controller.s("graphing-calculator-narration-audio-trace-description-one-intercept"):this.controller.s("graphing-calculator-narration-audio-trace-description-multiple-intercepts",{count:s})):l===1004?Xe(s===1?this.controller.s("graphing-calculator-narration-audio-trace-description-one-extremum"):this.controller.s("graphing-calculator-narration-audio-trace-description-multiple-extrema",{count:s})):l===1008&&Xe(s===1?this.controller.s("graphing-calculator-narration-audio-trace-description-one-label"):this.controller.s("graphing-calculator-narration-audio-trace-description-multiple-labels",{count:s}))})}le()}describeAxes(){Nr(),le(db(this.controller))}queueCoordinates(e,i,r=!1){if(!this.grapher.getProjection().viewport||!e)return;let n=this.agNavigator.getCurrentSketch();(e.hasOwnProperty("branch")&&n&&n.branches.length>1&&this.lastSpokenBranch!==e.reportedBranch||i==="branch")&&typeof e.reportedBranch=="number"&&Xe(this.controller.s("graphing-calculator-narration-audio-trace-property-branch-number",{branch:e.reportedBranch})),this.lastSpokenBranch=e.reportedBranch?e.reportedBranch:e.branch+1,e.hasOwnProperty("type")&&!i?Xe(this.controller.s("graphing-calculator-narration-audio-trace-property-type-before-coordinates",{type:this.describePOI(e)})):i==="type"&&Xe(this.describePOI(e)),(!i||i==="x")&&Xe(vi(this.controller,e.x)),(!i||i==="y")&&Xe(Ci(this.controller,e.y)),r&&le()}describePOI(e){if(e.typeChain){let i=[];for(let r=0;r<e.typeChain.length;r++)i.push(this.poiTypeToText(e,r));return i.join(", ")}else return this.poiTypeToText(e)}poiTypeToText(e,i){switch(i&&e.typeChain?e.typeChain[i]:e.type){case 1001:let o=this.getIntersectingCurves(e);return o!==""?this.controller.s("graphing-calculator-narration-audio-trace-point-type-intersection-with-curves",{curves:o}):this.controller.s("graphing-calculator-narration-audio-trace-point-type-intersection");case 1002:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-root");case 1003:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-intercept");case 1004:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-extremum");case 1006:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-definition");case 1007:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-trace");case 1008:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-label");default:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-not-a-poi")}}getIntersectingCurves(e){return!e||!e.intersects?"":this.getExpressionAriaLabel(e.intersects)}getExpressionAriaLabel(e){let i=this.controller.getItemModel(e);return i?i.type==="expression"&&i.label?Xo(i.label):i.type==="table"&&this.focusedCell?this.controller.s("graphing-calculator-narration-audio-trace-expression-with-column",{index:i.displayIndex,column:this.focusedCell.location.column+1}):Si(i,"describe"):""}exitAudioTrace(e){if(this.audioTraceActive){if(this.audioTraceActive=!1,this.controller.isKeypadEnabled()&&this.controller.dispatch({type:"keypad/123"}),e||(e=this.controller.s("graphing-calculator-text-audio-trace-off")),this.controller.dispatch({type:"toast/close"}),this.wasFocusInExpressionsView){let i=this.agNavigator.getSelectedItem();(!i||!this.controller.isItemSelectable(i.id))&&(i=this.controller.getFirstFullyVisibleItem()),i&&this.controller.isItemSelectable(i.id)&&this.controller.dispatch({type:"move-focus-to-item",id:i.id,where:i.type==="table"&&this.focusedCell!==void 0?__dcg_shared_module_exports__['a']({location:"cell"},this.focusedCell.location):"end"})}this.wasFocusInExpressionsView=!1,this.focusedCell=void 0,this.stopAnimations(),this.sliderTraceActive=!1,this.sliderIndex=0,this.agSynthesizer.stop(),this.agSynthesizer.releaseAudio(),this.agNavigator.reset(),this.lastSpokenBranch=1,this.grapher.traceLayer.setTraceInfo(void 0),this.grapher.traceLayer.setTraceLine(void 0),this.controller.requestRedrawGraph(),le(e),this.resumeAnimations()}}isFocusInExpressionsView(){return!!this.controller.getFocusedItem()}canAudioTraceCurrentExp(){let e=this.agNavigator.getSelectedItem();return e?e.type==="table"?!!this.agNavigator.getCurrentSketch():this.agNavigator.canTrace(e):!1}enterAudioTrace(e){var a;let i=this.agNavigator.getSelectedItem(),r=i&&i.type!=="table"&&!this.agNavigator.canTrace(i)?this.getExpressionAriaLabel(i.id):void 0,o=!1;this.audioTraceActive||(this.wasFocusInExpressionsView=this.isFocusInExpressionsView(),i&&r&&Xe(this.controller.s("graphing-calculator-narration-audio-trace-unsupported-expression",{expression:r})),o=!!r||!this.wasFocusInExpressionsView);let n;if(o)n=this.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!0});else if(!r){if(i&&i.type==="expression"&&i.formula&&i.formula.error)return this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-narration-audio-trace-description-no-curve-selected")}});if(i&&i.type==="table"){let s=Cn(i);(!this.focusedCell||this.focusedCell.tableId!==i.id||s&&(s.column!==this.focusedCell.location.column||s.row!==this.focusedCell.location.row))&&(this.focusedCell=s!==void 0?{tableId:i.id,location:s}:void 0)}else this.focusedCell=void 0;n=this.agNavigator.getCurrentSketch()}if(!n){this.agNavigator.reset(),this.lastSpokenBranch=1,this.exitAudioTrace(),n=this.agNavigator.getCurrentSketch();let s=n==null?void 0:n.branches[0].graphMode;return s===8&&!uo("audioTraceSimult")?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-implicit-support")}})):s===5&&!uo("audioTraceSimult")?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-parametric-support")}})):s===6&&!uo("audioTraceSimult")?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-polar-support")}})):this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-narration-audio-trace-description-no-curve-selected")}})}if((a=this.controller.toneController)==null||a.handleAction({type:"mute-global"}),this.agNavigator.reset(),this.agNavigator.computeStepSizes(),this.lastSpokenBranch=1,this.grapher.traceLayer.clearOpenedPOI(),this.controller.requestRedrawGraph(),!this.audioTraceActive&&(this.controller.isKeypadEnabled()||this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-on"),noAria:!0,onHide:()=>this.exitAudioTrace(),hideAfter:0}}),r&&n&&Xe(this.controller.s("graphing-calculator-narration-audio-trace-tracing-different-expression",{expression:this.getExpressionAriaLabel(n.id)})),Xe(this.controller.s("graphing-calculator-text-audio-trace-on")),this.controller.getAudio()||Xe(this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled")),this.pauseAnimations(),this.queueAnimatingPoints(!1),this.agSynthesizer.prepareSynthesizer(),(!e||!e.fromKeypad)&&(Xe(this.controller.s("graphing-calculator-narration-audio-trace-instructions-use-arrow-keys")),this.controller.getAudio()&&Xe(this.controller.s("graphing-calculator-narration-audio-trace-instructions-hear-graph")),this.agNavigator.getTraceableExpressionCount()>1&&(Rr?Xe(this.controller.s("graphing-calculator-narration-audio-trace-instructions-expression-navigation-mac")):Xe(this.controller.s("graphing-calculator-narration-audio-trace-instructions-expression-navigation-windows"))),Rr?Xe(this.controller.s("graphing-calculator-narration-audio-trace-instructions-disable-mac")):Xe(this.controller.s("graphing-calculator-narration-audio-trace-instructions-disable-windows"))),this.wasFocusInExpressionsView)){let s=this.controller.findEl(".dcg-graph-outer");s&&(H(s).one("focusin",()=>{setTimeout(()=>{le()},0)}),this.controller.dispatch({type:"set-focus-location",location:{type:"graph-paper"}}))}this.agNavigator.moveToOrigin(),Xe(this.getExpressionAriaLabel(n.id)),this.reportAudioTrace({playSound:!1}),this.wasFocusInExpressionsView||le(),this.audioTraceActive=!0,this.controller.isKeypadEnabled()&&this.controller.dispatch({type:"keypad/audio"})}checkIfSelectedItemChanged(e){this.lastSelectedId!==e&&(this.lastSelectedId=e,this.audioTraceActive&&(e?(Xe(this.getExpressionAriaLabel(e)),this.exitSliderTrace(),this.agNavigator.updatePOI(),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),le()):this.exitAudioTrace()))}pauseAnimations(){this.sliderArray.length=0,this.controller.getAllModelsWithSliders().forEach(i=>{i.slider.isPlaying&&(this.controller.dispatch({type:"set-slider-isplaying",id:i.id,isPlaying:!1}),this.sliderArray.push(i))})}resumeAnimations(){if(this.sliderArray.length!==0){for(let e=0;e<this.sliderArray.length;e++){let i=this.sliderArray[e];i.slider.isPlaying!==!0&&this.controller.dispatch({type:"set-slider-isplaying",id:i.id,isPlaying:!0})}this.sliderArray.length=0}}stopAnimations(){this.controller.getAllModelsWithSliders().forEach(i=>{i.slider.isPlaying&&this.controller.dispatch({type:"set-slider-isplaying",id:i.id,isPlaying:!1})})}getAnimatingVars(){let e=[];for(let i=0;i<this.sliderArray.length;i++)e.push('"'+Ao(this.sliderArray[i])+'"');return e}hasActiveSliders(){let e=this.controller.getAllModelsWithSliders();for(let i=0;i<e.length;i++)if(e[i].slider.isPlaying)return!0;return!1}queueAnimatingPoints(e){this.sliderArray.length===1?Xe(this.controller.s("graphing-calculator-narration-audio-trace-one-slider-paused")):this.sliderArray.length>1?Xe(this.controller.s("graphing-calculator-narration-audio-trace-multiple-sliders-paused",{sliders:this.sliderArray.length})):e&&Xe(this.controller.s("graphing-calculator-narration-audio-trace-no-sliders-paused"))}queueSliderLatex(){this.hasActiveSliders()||this.agSynthesizer.stop();let e=this.getSelectedSlider();e?Xe(e.latex):Xe(this.controller.s("graphing-calculator-narration-audio-trace-slider-value-unknown"))}getSelectedSlider(){let e=this.controller.getAllModelsWithSliders();return this.sliderIndex<=e.length-1?e[this.sliderIndex]:null}incrementSliderValue(){this.adjustSlider("up")}decrementSliderValue(){this.adjustSlider("down")}incrementBigSliderValue(){this.adjustSlider("bigup")}decrementBigSliderValue(){this.adjustSlider("bigdown")}nextSlider(){this.adjustSlider("next")}prevSlider(){this.adjustSlider("prev")}sliderMin(){this.adjustSlider("min")}sliderMax(){this.adjustSlider("max")}adjustSlider(e){let i=this.getSelectedSlider();if(!i){Xe(this.controller.s("graphing-calculator-narration-audio-trace-cannot-change-slider-value"));return}let r=i.latex,o=this.controller.getAllModelsWithSliders().length;switch(e){case"up":case"down":case"bigup":case"bigdown":case"min":case"max":this.controller.dispatch({type:"adjust-slider-by-keyboard",id:i.id,adjustment:e}),this.queueSliderLatex(),le();break;case"next":this.sliderIndex++,this.sliderIndex>=o&&(Xe(this.controller.s("graphing-calculator-narration-audio-trace-last-slider")),this.sliderIndex=o-1),this.queueSliderLatex(),le();return;case"prev":this.sliderIndex--,this.sliderIndex<0&&(Xe(this.controller.s("graphing-calculator-narration-audio-trace-first-slider")),this.sliderIndex=0),this.queueSliderLatex(),le();return}!i.slider.isPlaying&&r!==i.latex&&(this.queueSliderLatex(),le())}toggleAudioTrace(){this.audioTraceActive?this.exitAudioTrace():this.enterAudioTrace()}toggleSliderTrace(){this.sliderTraceActive?this.exitSliderTrace():this.enterSliderTrace()}enterSliderTrace(){if(this.sliderTraceActive)return;this.sliderIndex=0,this.controller.getAllModelsWithSliders().length!==0?(Xe(this.controller.s("graphing-calculator-narration-slider-trace-on")),this.queueSliderLatex(),this.sliderTraceActive=!0):(Xe(this.controller.s("graphing-calculator-narration-slider-trace-no-sliders")),this.sliderTraceActive=!1),le()}exitSliderTrace(){this.sliderTraceActive&&(Xe(this.controller.s("graphing-calculator-narration-slider-trace-off")),this.sliderTraceActive=!1,this.sliderIndex=0,le())}recomputePoints(){!this.audioTraceActive||this.agSynthesizer.getIsPlaying()||(this.agNavigator.updatePOI(),this.agNavigator.updateSampledPoints(),this.agNavigator.updateCurrentPoint(),this.agNavigator.resetTracePoint(),this.agNavigator.computeStepSizes())}reportAndMoveToPrevPoint(){Nr(),this.agNavigator.prevPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToNextPoint(){Nr(),this.agNavigator.nextPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToOrigin(){Nr(),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToPrevPOI(){Nr(),this.agNavigator.prevPOI(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToNextPOI(){Nr(),this.agNavigator.nextPOI(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToFirstPoint(){Nr(),this.agNavigator.firstPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToLastPoint(){Nr(),this.agNavigator.lastPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportX(){Nr(),this.reportAudioTrace({propToSpeak:"x",playSound:!1})}reportY(){Nr(),this.reportAudioTrace({propToSpeak:"y",playSound:!1})}reportColor(){Nr();let e=this.agNavigator.getCurrentSketch();e?Xe(Gp(this.controller,e.color)):Xe(this.controller.s("graphing-calculator-narration-color-unknown")),le()}reportPOICount(){Nr();let e=this.agNavigator.getCurrentSketch(),i=e?e.getPOI().length:0;le(this.controller.s("graphing-calculator-narration-audio-trace-poi-count",{x:i}))}reportType(){Nr(),this.reportAudioTrace({propToSpeak:"type",playSound:!1})}reportBranch(){Nr(),this.reportAudioTrace({propToSpeak:"branch",playSound:!1})}describePoint(){Nr(),this.reportAudioTrace({playSound:!1}),le()}playCurrentPoint(){let e=this.agNavigator.getCurrentPoint();e&&this.agSynthesizer.playPoint(e)}reportAudioTrace(e){let i=this.agNavigator.getCurrentPoint();if(!i)return;let r=e&&e.propToSpeak,o=this.controller.getAudio()&&this.agSynthesizer.getPlaybackSupported()&&(e&&e.playSound!==void 0?e.playSound:!0),n=e&&e.speakCoordinates!==void 0?e.speakCoordinates:!0;this.agSynthesizer.stop(),o&&this.playCurrentPoint(),n&&(this.queueCoordinates(i,r),setTimeout(function(){le()},r?0:100))}adjustPlaybackSpeed(e){if(!this.controller.getAudio()){le(this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled"));return}if(e<0||e>=ub.length)return;this.audioSpeedIndex=e;let i=ub[e];return this.agSynthesizer.setAudioSpeed(i.speed),le(this.controller.s("graphing-calculator-narration-audio-trace-playback-speed",{speed:i.displayedSpeed}))}speedUp(){this.adjustPlaybackSpeed(this.audioSpeedIndex+1)}speedDown(){this.adjustPlaybackSpeed(this.audioSpeedIndex-1)}adjustVolume(e){if(Nr(),!this.controller.getAudio()){le(this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled"));return}let i=this.agSynthesizer.getAudioVolume(),r=e==="up"?Math.min(100,Math.round((i+.1)*100)):Math.max(0,Math.round((i-.1)*100));this.agSynthesizer.setAudioVolume(r/100),this.playCurrentPoint(),le(this.controller.s("graphing-calculator-narration-audio-trace-volume",{volume:r}))}getFocusedCell(){return this.focusedCell}setFocusedCell(e){this.focusedCell=e}getAudioTraceActive(){return this.audioTraceActive}isAudioTracing(){return!!this.agSynthesizer&&this.agSynthesizer.getIsPlaying()}handleEvaluatorChange(e){}hearGraph(){var e,i;if(Nr(),!this.controller.getAudio()){le(this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled"));return}if(this.agSynthesizer.getPlaybackSupported()){this.agSynthesizer.stop();let r=this.agNavigator.getCurrentSketch();if((i=(e=this.controller).logEvent)==null||i.call(e,"audio-trace::hear-graph",{},{category:"audio-trace",action:"hear-graph"}),r&&Ba(this.controller,r)){let o=uo("audioTraceSimult")?"simultaneous":"sequential";this.agSynthesizer.playCurrentSketch(o),o==="simultaneous"?(this.grapher.traceLayer.setTraceInfo(void 0),requestAnimationFrame(()=>this.animateCurrentSketchLine())):(this.grapher.traceLayer.setTraceLine(void 0),requestAnimationFrame(()=>this.animateCurrentSketchPoint()))}else le(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-trace-this-expression"))}else le(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-play"))}animateCurrentSketchPoint(){if(this.graphAnimationTimeoutId&&cancelAnimationFrame(this.graphAnimationTimeoutId),this.graphAnimationTimeoutId=requestAnimationFrame(()=>this.animateCurrentSketchPoint()),!this.agSynthesizer.getIsPlaying())return;let e=this.agSynthesizer.getCurrentIndependentValue(),i=this.agSynthesizer.getCurrentBranchIndex();e!==void 0&&i!==void 0&&this.agNavigator.drawTracePoint(this.agNavigator.getPoint(i,e))}animateCurrentSketchLine(){if(this.graphAnimationTimeoutId&&cancelAnimationFrame(this.graphAnimationTimeoutId),this.graphAnimationTimeoutId=requestAnimationFrame(()=>this.animateCurrentSketchLine()),!this.agSynthesizer.getIsPlaying())return;let e=this.agSynthesizer.getCurrentIndependentValue();e!==void 0&&this.agNavigator.drawTraceLine(e,this.agSynthesizer.getGraphMode())}stopGraph(){this.agSynthesizer.stop(),this.graphAnimationTimeoutId&&cancelAnimationFrame(this.graphAnimationTimeoutId)}getAudioSpeedIndex(){return this.audioSpeedIndex}getAudioVolume(){var e;return(e=this.agSynthesizer.getAudioVolume())!=null?e:.5}};var Kl={};__dcg_shared_module_exports__['g'](Kl,{UnicodeBraille:()=>hn,latexToNemeth:()=>_c,latexToUeb:()=>Fc,nemethToLatex:()=>DT,uebToLatex:()=>kT,version:()=>GH});var yR=Object.defineProperty,U8=Object.getOwnPropertyNames,oR=Object.getOwnPropertySymbols,H8=Object.prototype.hasOwnProperty,W8=Object.prototype.propertyIsEnumerable,nR=(t,e,i)=>e in t?yR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Gg=(t,e)=>{for(var i in e||(e={}))H8.call(e,i)&&nR(t,i,e[i]);if(oR)for(var i of oR(e))W8.call(e,i)&&nR(t,i,e[i]);return t},Ag=(t=>typeof __dcg_shared_module_exports__['c']!="undefined"?__dcg_shared_module_exports__['c']:typeof Proxy!="undefined"?new Proxy(t,{get:(e,i)=>(typeof __dcg_shared_module_exports__['c']!="undefined"?__dcg_shared_module_exports__['c']:e)[i]}):t)(function(t){if(typeof __dcg_shared_module_exports__['c']!="undefined")return __dcg_shared_module_exports__['c'].apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')}),gT=(t,e)=>function(){return e||(0,t[U8(t)[0]])((e={exports:{}}).exports,e),e.exports},mT=(t,e)=>{for(var i in e)yR(t,i,{get:e[i],enumerable:!0})},$8=gT({"generated/latex.jison.js"(t,e){"use strict";var i=function(){var r=function(X,q,B,J){for(B=B||{},J=X.length;J--;B[X[J]]=q);return B},o=[1,13],n=[1,14],a=[1,15],s=[1,16],l=[1,17],c=[1,21],p=[1,18],u=[1,19],g=[1,20],m=[1,22],w=[1,23],C=[1,28],S=[1,30],k=[1,31],M=[1,32],I=[1,33],E=[1,29],T=[5,21,27,38],A=[5,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],G=[5,10,12,13,14,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],_=[5,10,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],P={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,level:6,expression:7,subscript:8,superscript:9,_:10,atom:11,"^":12,"PRIMES^":13,PRIMES:14,delimited_group:15,typeform:16,frac:17,radical:18,LEFT:19,delimiter:20,RIGHT:21,FRAC:22,OPERATOR_NAME:23,MATHRM:24,TEXT:25,RADICAL_OPTARG:26,CLOSE_OPTARG:27,RADICAL:28,curly_group:29,greek:30,command:31,SYMBOL:32,DELIMITER:33,DELIMITER_COMMAND:34,GREEK:35,COMMAND:36,"{":37,"}":38,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"_",12:"^",13:"PRIMES^",14:"PRIMES",19:"LEFT",21:"RIGHT",22:"FRAC",23:"OPERATOR_NAME",24:"MATHRM",25:"TEXT",26:"RADICAL_OPTARG",27:"CLOSE_OPTARG",28:"RADICAL",32:"SYMBOL",33:"DELIMITER",34:"DELIMITER_COMMAND",35:"GREEK",36:"COMMAND",37:"{",38:"}"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[6,2],[6,2],[6,1],[6,1],[8,2],[9,2],[9,2],[9,1],[7,1],[7,1],[7,1],[7,1],[7,1],[15,5],[15,4],[17,3],[16,2],[16,2],[16,2],[18,4],[18,3],[18,2],[18,2],[11,1],[11,1],[11,1],[11,1],[11,1],[20,1],[20,1],[30,1],[31,1],[29,3],[29,2]],performAction:function(q,B,J,f,O,R,re){var ie=R.length-1;switch(O){case 1:return R[ie-1];case 2:return f.group();case 3:this.$=f.group(R[ie-2],R[ie-1],R[ie]);break;case 4:case 6:this.$=f.group(R[ie-1],R[ie]);break;case 5:case 7:this.$=f.group(R[ie]);break;case 8:this.$=f.level({_:f.group(R[ie-1]),"^":f.group(R[ie])});break;case 9:this.$=f.level({_:f.group(R[ie]),"^":f.group(R[ie-1])});break;case 10:this.$=f.level({"^":f.group(R[ie])});break;case 11:this.$=f.level({_:f.group(R[ie])});break;case 12:case 13:this.$=R[ie];break;case 14:this.$=f.processPrimes(R[ie-1],R[ie]);break;case 15:this.$=f.processPrimes(R[ie],f.group());break;case 21:this.$=f.group(R[ie-3],R[ie-2],R[ie]);break;case 22:this.$=f.group(R[ie-2],R[ie]);break;case 23:this.$=f.fraction(f.group(R[ie-1]),f.group(R[ie]));break;case 24:this.$=f.typeform("operator_name",f.group(R[ie]));break;case 25:this.$=f.typeform("mathrm",f.group(R[ie]));break;case 26:this.$=f.typeform("text",f.group(R[ie]));break;case 27:this.$=f.radical(R[ie],f.group(R[ie-2]));break;case 28:this.$=f.radical(f.group(R[ie]),f.group());break;case 29:case 30:this.$=f.radical(f.group(R[ie]));break;case 35:case 36:this.$=f.terminal(R[ie]);break;case 37:case 39:this.$=f.command(R[ie]);break;case 38:this.$=f.greek(R[ie]);break;case 40:this.$=R[ie-1];break;case 41:this.$=f.group();break}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,10:o,11:12,12:n,13:a,14:s,15:8,16:9,17:10,18:11,19:l,20:25,22:c,23:p,24:u,25:g,26:m,28:w,29:24,30:26,31:27,32:C,33:S,34:k,35:M,36:I,37:E},{1:[3]},{5:[1,34]},{1:[2,2]},r(T,[2,5],{15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,7:35,19:l,22:c,23:p,24:u,25:g,26:m,28:w,32:C,33:S,34:k,35:M,36:I,37:E}),r(T,[2,7],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,4:36,10:o,12:n,13:a,14:s,19:l,22:c,23:p,24:u,25:g,26:m,28:w,32:C,33:S,34:k,35:M,36:I,37:E}),r(A,[2,11],{9:37,12:n,13:a,14:s}),r(A,[2,10],{8:38,10:o}),r(G,[2,16]),r(G,[2,17]),r(G,[2,18]),r(G,[2,19]),r(G,[2,20]),{11:39,20:25,29:24,30:26,31:27,32:C,33:S,34:k,35:M,36:I,37:E},{11:40,20:25,29:24,30:26,31:27,32:C,33:S,34:k,35:M,36:I,37:E},{11:41,20:25,29:24,30:26,31:27,32:C,33:S,34:k,35:M,36:I,37:E},r(_,[2,15]),{20:42,33:S,34:k},{11:43,20:25,29:24,30:26,31:27,32:C,33:S,34:k,35:M,36:I,37:E},{11:44,20:25,29:24,30:26,31:27,32:C,33:S,34:k,35:M,36:I,37:E},{11:45,20:25,29:24,30:26,31:27,32:C,33:S,34:k,35:M,36:I,37:E},{11:46,20:25,29:24,30:26,31:27,32:C,33:S,34:k,35:M,36:I,37:E},{4:47,6:4,7:5,8:6,9:7,10:o,11:12,12:n,13:a,14:s,15:8,16:9,17:10,18:11,19:l,20:25,22:c,23:p,24:u,25:g,26:m,27:[1,48],28:w,29:24,30:26,31:27,32:C,33:S,34:k,35:M,36:I,37:E},{11:49,17:50,20:25,22:c,29:24,30:26,31:27,32:C,33:S,34:k,35:M,36:I,37:E},r(G,[2,31]),r(G,[2,32]),r(G,[2,33]),r(G,[2,34]),r(G,[2,35]),{4:51,6:4,7:5,8:6,9:7,10:o,11:12,12:n,13:a,14:s,15:8,16:9,17:10,18:11,19:l,20:25,22:c,23:p,24:u,25:g,26:m,28:w,29:24,30:26,31:27,32:C,33:S,34:k,35:M,36:I,37:E,38:[1,52]},r(G,[2,36]),r(G,[2,37]),r(G,[2,38]),r(G,[2,39]),{1:[2,1]},r(T,[2,4],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,4:53,10:o,12:n,13:a,14:s,19:l,22:c,23:p,24:u,25:g,26:m,28:w,32:C,33:S,34:k,35:M,36:I,37:E}),r(T,[2,6]),r(A,[2,8]),r(A,[2,9]),r([5,12,13,14,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],[2,12]),r(_,[2,13]),r(_,[2,14]),{4:54,6:4,7:5,8:6,9:7,10:o,11:12,12:n,13:a,14:s,15:8,16:9,17:10,18:11,19:l,20:25,21:[1,55],22:c,23:p,24:u,25:g,26:m,28:w,29:24,30:26,31:27,32:C,33:S,34:k,35:M,36:I,37:E},r(G,[2,24]),r(G,[2,25]),r(G,[2,26]),{11:56,20:25,29:24,30:26,31:27,32:C,33:S,34:k,35:M,36:I,37:E},{27:[1,57]},{11:58,20:25,29:24,30:26,31:27,32:C,33:S,34:k,35:M,36:I,37:E},r(G,[2,29]),r(G,[2,30]),{38:[1,59]},r(G,[2,41]),r(T,[2,3]),{21:[1,60]},{20:61,33:S,34:k},r(G,[2,23]),{11:62,20:25,29:24,30:26,31:27,32:C,33:S,34:k,35:M,36:I,37:E},r(G,[2,28]),r(G,[2,40]),{20:63,33:S,34:k},r(G,[2,22]),r(G,[2,27]),r(G,[2,21])],defaultActions:{3:[2,2],34:[2,1]},parseError:function(q,B){if(B.recoverable)this.trace(q);else{var J=new Error(q);throw J.hash=B,J}},parse:function(q){var B=this,J=[0],f=[],O=[null],R=[],re=this.table,ie="",ve=0,ae=0,oe=0,Z=2,Q=1,fe=R.slice.call(arguments,1),ye=Object.create(this.lexer),Re={yy:{}};for(var Ke in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ke)&&(Re.yy[Ke]=this.yy[Ke]);ye.setInput(q,Re.yy),Re.yy.lexer=ye,Re.yy.parser=this,typeof ye.yylloc=="undefined"&&(ye.yylloc={});var Ye=ye.yylloc;R.push(Ye);var _t=ye.options&&ye.options.ranges;typeof Re.yy.parseError=="function"?this.parseError=Re.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function st(sr){J.length=J.length-2*sr,O.length=O.length-sr,R.length=R.length-sr}for(var Hi=function(){var sr;return sr=ye.lex()||Q,typeof sr!="number"&&(sr=B.symbols_[sr]||sr),sr},ut,Ee,lo,Zr,ne,nn,qe={},Ze,Qe,ce,It;;){if(lo=J[J.length-1],this.defaultActions[lo]?Zr=this.defaultActions[lo]:((ut===null||typeof ut=="undefined")&&(ut=Hi()),Zr=re[lo]&&re[lo][ut]),typeof Zr=="undefined"||!Zr.length||!Zr[0]){var Ie="";It=[];for(Ze in re[lo])this.terminals_[Ze]&&Ze>Z&&It.push("'"+this.terminals_[Ze]+"'");ye.showPosition?Ie="Parse error on line "+(ve+1)+`:
`+ye.showPosition()+`
Expecting `+It.join(", ")+", got '"+(this.terminals_[ut]||ut)+"'":Ie="Parse error on line "+(ve+1)+": Unexpected "+(ut==Q?"end of input":"'"+(this.terminals_[ut]||ut)+"'"),this.parseError(Ie,{text:ye.match,token:this.terminals_[ut]||ut,line:ye.yylineno,loc:Ye,expected:It})}if(Zr[0]instanceof Array&&Zr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+lo+", token: "+ut);switch(Zr[0]){case 1:J.push(ut),O.push(ye.yytext),R.push(ye.yylloc),J.push(Zr[1]),ut=null,Ee?(ut=Ee,Ee=null):(ae=ye.yyleng,ie=ye.yytext,ve=ye.yylineno,Ye=ye.yylloc,oe>0&&oe--);break;case 2:if(Qe=this.productions_[Zr[1]][1],qe.$=O[O.length-Qe],qe._$={first_line:R[R.length-(Qe||1)].first_line,last_line:R[R.length-1].last_line,first_column:R[R.length-(Qe||1)].first_column,last_column:R[R.length-1].last_column},_t&&(qe._$.range=[R[R.length-(Qe||1)].range[0],R[R.length-1].range[1]]),nn=this.performAction.apply(qe,[ie,ae,ve,Re.yy,Zr[1],O,R].concat(fe)),typeof nn!="undefined")return nn;Qe&&(J=J.slice(0,-1*Qe*2),O=O.slice(0,-1*Qe),R=R.slice(0,-1*Qe)),J.push(this.productions_[Zr[1]][0]),O.push(qe.$),R.push(qe._$),ce=re[J[J.length-2]][J[J.length-1]],J.push(ce);break;case 3:return!0}}return!0}},N=function(){var X={EOF:1,parseError:function(B,J){if(this.yy.parser)this.yy.parser.parseError(B,J);else throw new Error(B)},setInput:function(q,B){return this.yy=B||this.yy||{},this._input=q,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var q=this._input[0];this.yytext+=q,this.yyleng++,this.offset++,this.match+=q,this.matched+=q;var B=q.match(/(?:\r\n?|\n).*/g);return B?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),q},unput:function(q){var B=q.length,J=q.split(/(?:\r\n?|\n)/g);this._input=q+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-B),this.offset-=B;var f=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),J.length-1&&(this.yylineno-=J.length-1);var O=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:J?(J.length===f.length?this.yylloc.first_column:0)+f[f.length-J.length].length-J[0].length:this.yylloc.first_column-B},this.options.ranges&&(this.yylloc.range=[O[0],O[0]+this.yyleng-B]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(q){this.unput(this.match.slice(q))},pastInput:function(){var q=this.matched.substr(0,this.matched.length-this.match.length);return(q.length>20?"...":"")+q.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var q=this.match;return q.length<20&&(q+=this._input.substr(0,20-q.length)),(q.substr(0,20)+(q.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var q=this.pastInput(),B=new Array(q.length+1).join("-");return q+this.upcomingInput()+`
`+B+"^"},test_match:function(q,B){var J,f,O;if(this.options.backtrack_lexer&&(O={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(O.yylloc.range=this.yylloc.range.slice(0))),f=q[0].match(/(?:\r\n?|\n).*/g),f&&(this.yylineno+=f.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:f?f[f.length-1].length-f[f.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+q[0].length},this.yytext+=q[0],this.match+=q[0],this.matches=q,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(q[0].length),this.matched+=q[0],J=this.performAction.call(this,this.yy,this,B,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),J)return J;if(this._backtrack){for(var R in O)this[R]=O[R];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var q,B,J,f;this._more||(this.yytext="",this.match="");for(var O=this._currentRules(),R=0;R<O.length;R++)if(J=this._input.match(this.rules[O[R]]),J&&(!B||J[0].length>B[0].length)){if(B=J,f=R,this.options.backtrack_lexer){if(q=this.test_match(J,O[R]),q!==!1)return q;if(this._backtrack){B=!1;continue}else return!1}else if(!this.options.flex)break}return B?(q=this.test_match(B,O[f]),q!==!1?q:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var B=this.next();return B||this.lex()},begin:function(B){this.conditionStack.push(B)},popState:function(){var B=this.conditionStack.length-1;return B>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(B){return B=this.conditionStack.length-1-Math.abs(B||0),B>=0?this.conditionStack[B]:"INITIAL"},pushState:function(B){this.begin(B)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(B,J,f,O){var R=O;switch(f){case 0:break;case 1:return this.begin("optarg"),26;break;case 2:return this.popState(),27;break;case 3:return 23;case 4:return 24;case 5:return 25;case 6:return 28;case 7:return 22;case 8:return 13;case 9:return 14;case 10:return 12;case 11:return 10;case 12:return 19;case 13:return 21;case 14:return 34;case 15:return 33;case 16:return 37;case 17:return 38;case 18:return 32;case 19:return 32;case 20:return 32;case 21:return 35;case 22:return 35;case 23:return 36;case 24:return 32;case 25:return 5}},rules:[/^(?:\s+)/,/^(?:(\\sqrt)\s*\[)/,/^(?:\])/,/^(?:(\\operatorname))/,/^(?:(\\mathrm))/,/^(?:(\\text))/,/^(?:(\\sqrt))/,/^(?:(\\frac))/,/^(?:'+\^)/,/^(?:'+)/,/^(?:\^)/,/^(?:[_])/,/^(?:(\\left))/,/^(?:(\\right))/,/^(?:(\\langle|\\rangle|\\vert|\\Vert))/,/^(?:\[|\]|\\\{|\\\}|\(|\)|\||\\\|)/,/^(?:\{)/,/^(?:\})/,/^(?:\\(infty))/,/^(?:\\(int))/,/^(?:!)/,/^(?:\\(alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|omicron|pi|rho|sigma|tau|xi|upsilon|phi|chi|psi|omega))/,/^(?:\\(Alpha|Beta|Gamma|Delta|Epsilon|Zeta|Eta|Theta|Iota|Kappa|Lambda|Mu|Nu|Omicron|Pi|Rho|Sigma|Tau|Xi|Upsilon|Phi|Chi|Psi|Omega))/,/^(?:\\[A-Za-z]+)/,/^(?:\\.|.)/,/^(?:$)/],conditions:{optarg:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0}}};return X}();P.lexer=N;function W(){this.yy={}}return W.prototype=P,P.Parser=W,new W}();typeof Ag!="undefined"&&typeof t!="undefined"&&(t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)},t.main=function(){},typeof e!="undefined"&&Ag.main===e&&t.main(process.argv.slice(1)))}}),xR=gT({"generated/nemeth-to-latex.jison.js"(t,e){"use strict";var i=function(){var r=function(nn,qe,Ze,Qe){for(Ze=Ze||{},Qe=nn.length;Qe--;Ze[nn[Qe]]=qe);return Ze},o=[1,11],n=[1,12],a=[1,13],s=[1,71],l=[1,72],c=[1,70],p=[1,38],u=[1,39],g=[1,60],m=[1,61],w=[1,62],C=[1,63],S=[1,64],k=[1,65],M=[1,66],I=[1,67],E=[1,68],T=[1,69],A=[1,40],G=[1,34],_=[1,35],P=[1,36],N=[1,37],W=[1,41],X=[1,42],q=[1,43],B=[1,44],J=[1,45],f=[1,46],O=[1,47],R=[1,48],re=[1,49],ie=[1,50],ve=[1,51],ae=[1,52],oe=[1,53],Z=[1,54],Q=[1,17],fe=[1,55],ye=[1,56],Re=[1,57],Ke=[1,58],Ye=[1,59],_t=[5,12,13,14,18,24,25],st=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,83],Hi=[1,76],ut=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,78,79,80,81,83],Ee=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83],lo={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,element:6,index_element:7,modified_expression:8,radical:9,primes:10,OPEN_MODEXP:11,MODEXP_UNDER:12,MODEXP_OVER:13,CLOSE_MODEXP:14,RADICAL_INDEX:15,index_group:16,OPEN_RADICAL:17,CLOSE_RADICAL:18,level:19,LEVEL:20,BASELINE:21,frac:22,OPEN_FRAC:23,SLASH:24,CLOSE_FRAC:25,subscript_head:26,number:27,atom:28,command:29,greek:30,letter:31,comma:32,period:33,space:34,operation:35,comparison:36,level_with_comparison:37,ellipsis:38,colon:39,infinity:40,integral:41,factorial:42,ampersand:43,question_mark:44,bracket:45,",":46,".":47,"[":48,"{":49,"(":50,"]":51,"}":52,")":53,LANGLE:54,RANGLE:55,PIPE:56,DOUBLE_PIPE:57,SPACE:58,COMMAND:59,GREEK:60,LETTER:61,CAPITAL_LETTER:62,"+":63,"-":64,CDOT:65,TIMES:66,"*":67,"/":68,DIV:69,PERCENT_OF:70,PERCENT:71,TO:72,COMPARISON:73,LEVEL_WITH_COMPARISON:74,ELLIPSIS:75,COLON:76,NUMBER:77,INFINITY:78,INTEGRAL:79,FACTORIAL:80,"&":81,PRIMES:82,"?":83,unknown:84,UNKNOWN:85,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",11:"OPEN_MODEXP",12:"MODEXP_UNDER",13:"MODEXP_OVER",14:"CLOSE_MODEXP",15:"RADICAL_INDEX",17:"OPEN_RADICAL",18:"CLOSE_RADICAL",20:"LEVEL",21:"BASELINE",23:"OPEN_FRAC",24:"SLASH",25:"CLOSE_FRAC",46:",",47:".",48:"[",49:"{",50:"(",51:"]",52:"}",53:")",54:"LANGLE",55:"RANGLE",56:"PIPE",57:"DOUBLE_PIPE",58:"SPACE",59:"COMMAND",60:"GREEK",61:"LETTER",62:"CAPITAL_LETTER",63:"+",64:"-",65:"CDOT",66:"TIMES",67:"*",68:"/",69:"DIV",70:"PERCENT_OF",71:"PERCENT",72:"TO",73:"COMPARISON",74:"LEVEL_WITH_COMPARISON",75:"ELLIPSIS",76:"COLON",77:"NUMBER",78:"INFINITY",79:"INTEGRAL",80:"FACTORIAL",81:"&",82:"PRIMES",83:"?",85:"UNKNOWN"},productions_:[0,[3,2],[3,1],[4,2],[4,1],[6,1],[6,1],[6,2],[6,1],[8,7],[8,6],[8,5],[8,6],[8,5],[8,5],[8,4],[8,4],[8,3],[8,4],[8,4],[8,4],[8,4],[8,3],[8,3],[8,2],[9,5],[9,4],[9,4],[9,3],[9,3],[9,2],[19,1],[19,1],[22,5],[22,4],[22,4],[22,3],[16,2],[16,1],[7,3],[7,2],[7,2],[7,3],[7,2],[7,2],[7,1],[7,1],[7,1],[26,1],[26,1],[26,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[32,1],[33,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[34,1],[29,1],[30,1],[31,1],[31,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[36,1],[37,1],[38,1],[39,1],[27,1],[40,1],[41,1],[42,1],[43,1],[10,1],[44,1],[84,1]],performAction:function(qe,Ze,Qe,ce,It,Ie,sr){var de=Ie.length-1;switch(It){case 1:return Ie[de-1];case 2:return ce.group();case 3:case 37:case 41:case 43:case 44:this.$=ce.group(Ie[de-1],Ie[de]);break;case 4:case 38:this.$=ce.group(Ie[de]);break;case 7:this.$=ce.group(Ie[de-1],Ie[de]);break;case 9:this.$=ce.modified_expression(Ie[de-5],Ie[de-3],Ie[de-1]);break;case 10:this.$=ce.modified_expression(Ie[de-4],Ie[de-2]);break;case 11:this.$=ce.modified_expression(Ie[de-3],Ie[de-1]);break;case 12:this.$=ce.modified_expression(Ie[de-4],ce.group(),Ie[de-1]);break;case 13:this.$=ce.modified_expression(Ie[de-3],ce.group(),Ie[de-1]);break;case 14:this.$=ce.modified_expression(Ie[de-3],ce.group(),ce.group());break;case 15:case 16:this.$=ce.modified_expression(Ie[de-2],ce.group());break;case 17:this.$=ce.modified_expression(Ie[de-1]);break;case 18:case 19:case 22:case 23:case 24:this.$=ce.modified_expression(ce.group());break;case 20:case 21:ce.warnOrError("Multi-level modified expressions are not supported."),this.$=ce.modified_expression(ce.group());break;case 25:this.$=ce.radical(Ie[de-1],Ie[de-3]);break;case 26:this.$=ce.radical(Ie[de-1],ce.group());break;case 27:this.$=ce.radical(ce.group(),Ie[de-2]);break;case 28:this.$=ce.radical(ce.group(),ce.group());break;case 29:this.$=ce.radical(Ie[de-1]);break;case 30:this.$=ce.radical(ce.group());break;case 31:this.$=ce.level(Ie[de]);break;case 32:this.$=ce.baseline();break;case 33:this.$=ce.fraction(Ie[de-3],Ie[de-1]);break;case 34:this.$=ce.fraction(Ie[de-2],ce.group());break;case 35:this.$=ce.fraction(ce.group(),Ie[de-1]);break;case 36:this.$=ce.fraction(ce.group(),ce.group());break;case 39:this.$=ce.group(ce.simple_subscript(Ie[de-2],Ie[de]),Ie[de-1]);break;case 40:this.$=ce.simple_subscript(Ie[de-1],Ie[de]);break;case 42:ce.warnOrError("Illegal use of Nemeth primes"),this.$=ce.group(ce.simple_subscript(Ie[de-2],Ie[de-1]),Ie[de]);break;case 67:this.$=ce.terminal(",");break;case 68:this.$=ce.terminal(".");break;case 69:this.$=ce.terminal("[");break;case 70:this.$=ce.terminal("\\{");break;case 71:this.$=ce.terminal("(");break;case 72:this.$=ce.terminal("]");break;case 73:this.$=ce.terminal("\\}");break;case 74:this.$=ce.terminal(")");break;case 75:this.$=ce.terminal("\\langle ");break;case 76:this.$=ce.terminal("\\rangle ");break;case 77:this.$=ce.terminal("|");break;case 78:this.$=ce.terminal("\\|");break;case 79:this.$=ce.terminal(" ");break;case 80:this.$=ce.command(Ie[de].toLowerCase());break;case 81:this.$=ce.terminal(ce.greek(Ie[de]));break;case 82:this.$=ce.terminal(Ie[de].toLowerCase());break;case 83:this.$=ce.terminal(Ie[de].toUpperCase());break;case 84:this.$=ce.terminal("+");break;case 85:this.$=ce.terminal("-");break;case 86:this.$=ce.terminal("\\cdot ");break;case 87:this.$=ce.terminal("\\times ");break;case 88:this.$=ce.terminal("*");break;case 89:this.$=ce.terminal("/");break;case 90:this.$=ce.terminal("\\div ");break;case 91:this.$=ce.terminal("\\%\\operatorname{of}");break;case 92:this.$=ce.terminal("\\%");break;case 93:this.$=ce.terminal("\\to ");break;case 94:this.$=ce.comparison(Ie[de].trim());break;case 95:this.$=ce.level_with_comparison(Ie[de].trim());break;case 96:this.$=ce.terminal("\\ldots ");break;case 97:this.$=ce.terminal(":");break;case 98:this.$=ce.terminal(Ie[de]);break;case 99:this.$=ce.terminal("\\infty ");break;case 100:this.$=ce.terminal("\\int ");break;case 101:this.$=ce.terminal("!");break;case 102:this.$=ce.terminal("\\&");break;case 103:this.$=ce.primes(Ie[de]);break;case 104:this.$=ce.terminal("?");break}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,11:o,15:n,17:a,19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:u,48:g,49:m,50:w,51:C,52:S,53:k,54:M,55:I,56:E,57:T,58:A,59:G,60:_,61:P,62:N,63:W,64:X,65:q,66:B,67:J,68:f,69:O,70:R,71:re,72:ie,73:ve,74:ae,75:oe,76:Z,77:Q,78:fe,79:ye,80:Re,81:Ke,83:Ye},{1:[3]},{5:[1,73]},{1:[2,2]},r(_t,[2,4],{6:4,7:5,8:6,9:7,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,22:32,19:33,4:74,11:o,15:n,17:a,20:s,21:l,23:c,46:p,47:u,48:g,49:m,50:w,51:C,52:S,53:k,54:M,55:I,56:E,57:T,58:A,59:G,60:_,61:P,62:N,63:W,64:X,65:q,66:B,67:J,68:f,69:O,70:R,71:re,72:ie,73:ve,74:ae,75:oe,76:Z,77:Q,78:fe,79:ye,80:Re,81:Ke,83:Ye}),r(st,[2,5]),r(st,[2,6]),r(st,[2,8],{10:75,82:Hi}),r(ut,[2,45],{10:77,27:78,77:Q,82:Hi}),r(st,[2,46],{10:79,82:Hi}),r(st,[2,47],{10:80,82:Hi}),{4:81,6:4,7:5,8:6,9:7,11:o,12:[1,83],13:[1,82],14:[1,84],15:n,17:a,19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:u,48:g,49:m,50:w,51:C,52:S,53:k,54:M,55:I,56:E,57:T,58:A,59:G,60:_,61:P,62:N,63:W,64:X,65:q,66:B,67:J,68:f,69:O,70:R,71:re,72:ie,73:ve,74:ae,75:oe,76:Z,77:Q,78:fe,79:ye,80:Re,81:Ke,83:Ye},{7:87,16:85,17:[1,86],19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:u,48:g,49:m,50:w,51:C,52:S,53:k,54:M,55:I,56:E,57:T,58:A,59:G,60:_,61:P,62:N,63:W,64:X,65:q,66:B,67:J,68:f,69:O,70:R,71:re,72:ie,73:ve,74:ae,75:oe,76:Z,77:Q,78:fe,79:ye,80:Re,81:Ke,83:Ye},{4:88,6:4,7:5,8:6,9:7,11:o,15:n,17:a,18:[1,89],19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:u,48:g,49:m,50:w,51:C,52:S,53:k,54:M,55:I,56:E,57:T,58:A,59:G,60:_,61:P,62:N,63:W,64:X,65:q,66:B,67:J,68:f,69:O,70:R,71:re,72:ie,73:ve,74:ae,75:oe,76:Z,77:Q,78:fe,79:ye,80:Re,81:Ke,83:Ye},r(Ee,[2,48]),r(Ee,[2,49]),r(Ee,[2,50]),r(Ee,[2,98]),r(Ee,[2,51]),r(Ee,[2,52]),r(Ee,[2,53]),r(Ee,[2,54]),r(Ee,[2,55]),r(Ee,[2,56]),r(Ee,[2,57]),r(Ee,[2,58]),r(Ee,[2,59]),r(Ee,[2,60]),r(Ee,[2,61]),r(Ee,[2,62]),r(Ee,[2,63]),r(Ee,[2,64]),r(Ee,[2,65]),r(Ee,[2,66]),r(Ee,[2,80]),r(Ee,[2,81]),r(Ee,[2,82]),r(Ee,[2,83]),r(Ee,[2,67]),r(Ee,[2,68]),r(Ee,[2,79]),r(Ee,[2,84]),r(Ee,[2,85]),r(Ee,[2,86]),r(Ee,[2,87]),r(Ee,[2,88]),r(Ee,[2,89]),r(Ee,[2,90]),r(Ee,[2,91]),r(Ee,[2,92]),r(Ee,[2,93]),r(Ee,[2,94]),r(Ee,[2,95]),r(Ee,[2,96]),r(Ee,[2,97]),r(Ee,[2,99]),r(Ee,[2,100]),r(Ee,[2,101]),r(Ee,[2,102]),r(Ee,[2,104]),r(Ee,[2,69]),r(Ee,[2,70]),r(Ee,[2,71]),r(Ee,[2,72]),r(Ee,[2,73]),r(Ee,[2,74]),r(Ee,[2,75]),r(Ee,[2,76]),r(Ee,[2,77]),r(Ee,[2,78]),{4:90,6:4,7:5,8:6,9:7,11:o,15:n,17:a,19:33,20:s,21:l,22:32,23:c,24:[1,91],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:u,48:g,49:m,50:w,51:C,52:S,53:k,54:M,55:I,56:E,57:T,58:A,59:G,60:_,61:P,62:N,63:W,64:X,65:q,66:B,67:J,68:f,69:O,70:R,71:re,72:ie,73:ve,74:ae,75:oe,76:Z,77:Q,78:fe,79:ye,80:Re,81:Ke,83:Ye},r(Ee,[2,31]),r(Ee,[2,32]),{1:[2,1]},r(_t,[2,3]),r(st,[2,7]),r(st,[2,103]),r(ut,[2,41],{27:92,77:Q}),r(st,[2,40],{10:93,82:Hi}),r(st,[2,43]),r(st,[2,44]),{12:[1,94],13:[1,95],14:[1,96]},{12:[1,97],13:[1,98],14:[1,99]},{12:[1,101],13:[1,100],14:[1,102]},r(st,[2,24]),{17:[1,103]},{4:104,6:4,7:5,8:6,9:7,11:o,15:n,17:a,18:[1,105],19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:u,48:g,49:m,50:w,51:C,52:S,53:k,54:M,55:I,56:E,57:T,58:A,59:G,60:_,61:P,62:N,63:W,64:X,65:q,66:B,67:J,68:f,69:O,70:R,71:re,72:ie,73:ve,74:ae,75:oe,76:Z,77:Q,78:fe,79:ye,80:Re,81:Ke,83:Ye},{7:87,16:106,17:[2,38],19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:u,48:g,49:m,50:w,51:C,52:S,53:k,54:M,55:I,56:E,57:T,58:A,59:G,60:_,61:P,62:N,63:W,64:X,65:q,66:B,67:J,68:f,69:O,70:R,71:re,72:ie,73:ve,74:ae,75:oe,76:Z,77:Q,78:fe,79:ye,80:Re,81:Ke,83:Ye},{18:[1,107]},r(Ee,[2,30]),{24:[1,108]},{4:109,6:4,7:5,8:6,9:7,11:o,15:n,17:a,19:33,20:s,21:l,22:32,23:c,25:[1,110],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:u,48:g,49:m,50:w,51:C,52:S,53:k,54:M,55:I,56:E,57:T,58:A,59:G,60:_,61:P,62:N,63:W,64:X,65:q,66:B,67:J,68:f,69:O,70:R,71:re,72:ie,73:ve,74:ae,75:oe,76:Z,77:Q,78:fe,79:ye,80:Re,81:Ke,83:Ye},r(st,[2,39]),r(st,[2,42]),{4:111,6:4,7:5,8:6,9:7,11:o,13:[1,112],14:[1,113],15:n,17:a,19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:u,48:g,49:m,50:w,51:C,52:S,53:k,54:M,55:I,56:E,57:T,58:A,59:G,60:_,61:P,62:N,63:W,64:X,65:q,66:B,67:J,68:f,69:O,70:R,71:re,72:ie,73:ve,74:ae,75:oe,76:Z,77:Q,78:fe,79:ye,80:Re,81:Ke,83:Ye},{4:114,6:4,7:5,8:6,9:7,11:o,14:[1,115],15:n,17:a,19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:u,48:g,49:m,50:w,51:C,52:S,53:k,54:M,55:I,56:E,57:T,58:A,59:G,60:_,61:P,62:N,63:W,64:X,65:q,66:B,67:J,68:f,69:O,70:R,71:re,72:ie,73:ve,74:ae,75:oe,76:Z,77:Q,78:fe,79:ye,80:Re,81:Ke,83:Ye},r(st,[2,17]),{14:[1,116]},{14:[1,117]},r(st,[2,22]),{14:[1,118]},{14:[1,119]},r(st,[2,23]),{4:120,6:4,7:5,8:6,9:7,11:o,15:n,17:a,18:[1,121],19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:u,48:g,49:m,50:w,51:C,52:S,53:k,54:M,55:I,56:E,57:T,58:A,59:G,60:_,61:P,62:N,63:W,64:X,65:q,66:B,67:J,68:f,69:O,70:R,71:re,72:ie,73:ve,74:ae,75:oe,76:Z,77:Q,78:fe,79:ye,80:Re,81:Ke,83:Ye},{18:[1,122]},r(Ee,[2,28]),{17:[2,37]},r(Ee,[2,29]),{4:123,6:4,7:5,8:6,9:7,11:o,15:n,17:a,19:33,20:s,21:l,22:32,23:c,25:[1,124],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:u,48:g,49:m,50:w,51:C,52:S,53:k,54:M,55:I,56:E,57:T,58:A,59:G,60:_,61:P,62:N,63:W,64:X,65:q,66:B,67:J,68:f,69:O,70:R,71:re,72:ie,73:ve,74:ae,75:oe,76:Z,77:Q,78:fe,79:ye,80:Re,81:Ke,83:Ye},{25:[1,125]},r(Ee,[2,36]),{13:[1,126],14:[1,127]},{4:128,6:4,7:5,8:6,9:7,11:o,14:[1,129],15:n,17:a,19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:u,48:g,49:m,50:w,51:C,52:S,53:k,54:M,55:I,56:E,57:T,58:A,59:G,60:_,61:P,62:N,63:W,64:X,65:q,66:B,67:J,68:f,69:O,70:R,71:re,72:ie,73:ve,74:ae,75:oe,76:Z,77:Q,78:fe,79:ye,80:Re,81:Ke,83:Ye},r(st,[2,16]),{14:[1,130]},r(st,[2,15]),r(st,[2,18]),r(st,[2,20]),r(st,[2,19]),r(st,[2,21]),{18:[1,131]},r(Ee,[2,27]),r(Ee,[2,26]),{25:[1,132]},r(Ee,[2,34]),r(Ee,[2,35]),{4:133,6:4,7:5,8:6,9:7,11:o,14:[1,134],15:n,17:a,19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:u,48:g,49:m,50:w,51:C,52:S,53:k,54:M,55:I,56:E,57:T,58:A,59:G,60:_,61:P,62:N,63:W,64:X,65:q,66:B,67:J,68:f,69:O,70:R,71:re,72:ie,73:ve,74:ae,75:oe,76:Z,77:Q,78:fe,79:ye,80:Re,81:Ke,83:Ye},r(st,[2,11]),{14:[1,135]},r(st,[2,14]),r(st,[2,13]),r(Ee,[2,25]),r(Ee,[2,33]),{14:[1,136]},r(st,[2,10]),r(st,[2,12]),r(st,[2,9])],defaultActions:{3:[2,2],73:[2,1],106:[2,37]},parseError:function(qe,Ze){if(Ze.recoverable)this.trace(qe);else{var Qe=new Error(qe);throw Qe.hash=Ze,Qe}},parse:function(qe){var Ze=this,Qe=[0],ce=[],It=[null],Ie=[],sr=this.table,de="",it=0,nt=0,ue=0,Pi=2,We=1,il=Ie.slice.call(arguments,1),at=Object.create(this.lexer),On={yy:{}};for(var lr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,lr)&&(On.yy[lr]=this.yy[lr]);at.setInput(qe,On.yy),On.yy.lexer=at,On.yy.parser=this,typeof at.yylloc=="undefined"&&(at.yylloc={});var gr=at.yylloc;Ie.push(gr);var $o=at.options&&at.options.ranges;typeof On.yy.parseError=="function"?this.parseError=On.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Zl(an){Qe.length=Qe.length-2*an,It.length=It.length-an,Ie.length=Ie.length-an}for(var _n=function(){var an;return an=at.lex()||We,typeof an!="number"&&(an=Ze.symbols_[an]||an),an},ht,yn,mr,Eo,Mu,ec,xn={},bi,eo,oa,Do;;){if(mr=Qe[Qe.length-1],this.defaultActions[mr]?Eo=this.defaultActions[mr]:((ht===null||typeof ht=="undefined")&&(ht=_n()),Eo=sr[mr]&&sr[mr][ht]),typeof Eo=="undefined"||!Eo.length||!Eo[0]){var Gu="";Do=[];for(bi in sr[mr])this.terminals_[bi]&&bi>Pi&&Do.push("'"+this.terminals_[bi]+"'");at.showPosition?Gu="Parse error on line "+(it+1)+`:
`+at.showPosition()+`
Expecting `+Do.join(", ")+", got '"+(this.terminals_[ht]||ht)+"'":Gu="Parse error on line "+(it+1)+": Unexpected "+(ht==We?"end of input":"'"+(this.terminals_[ht]||ht)+"'"),this.parseError(Gu,{text:at.match,token:this.terminals_[ht]||ht,line:at.yylineno,loc:gr,expected:Do})}if(Eo[0]instanceof Array&&Eo.length>1)throw new Error("Parse Error: multiple actions possible at state: "+mr+", token: "+ht);switch(Eo[0]){case 1:Qe.push(ht),It.push(at.yytext),Ie.push(at.yylloc),Qe.push(Eo[1]),ht=null,yn?(ht=yn,yn=null):(nt=at.yyleng,de=at.yytext,it=at.yylineno,gr=at.yylloc,ue>0&&ue--);break;case 2:if(eo=this.productions_[Eo[1]][1],xn.$=It[It.length-eo],xn._$={first_line:Ie[Ie.length-(eo||1)].first_line,last_line:Ie[Ie.length-1].last_line,first_column:Ie[Ie.length-(eo||1)].first_column,last_column:Ie[Ie.length-1].last_column},$o&&(xn._$.range=[Ie[Ie.length-(eo||1)].range[0],Ie[Ie.length-1].range[1]]),ec=this.performAction.apply(xn,[de,nt,it,On.yy,Eo[1],It,Ie].concat(il)),typeof ec!="undefined")return ec;eo&&(Qe=Qe.slice(0,-1*eo*2),It=It.slice(0,-1*eo),Ie=Ie.slice(0,-1*eo)),Qe.push(this.productions_[Eo[1]][0]),It.push(xn.$),Ie.push(xn._$),oa=sr[Qe[Qe.length-2]][Qe[Qe.length-1]],Qe.push(oa);break;case 3:return!0}}return!0}},Zr=function(){var nn={EOF:1,parseError:function(Ze,Qe){if(this.yy.parser)this.yy.parser.parseError(Ze,Qe);else throw new Error(Ze)},setInput:function(qe,Ze){return this.yy=Ze||this.yy||{},this._input=qe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var qe=this._input[0];this.yytext+=qe,this.yyleng++,this.offset++,this.match+=qe,this.matched+=qe;var Ze=qe.match(/(?:\r\n?|\n).*/g);return Ze?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),qe},unput:function(qe){var Ze=qe.length,Qe=qe.split(/(?:\r\n?|\n)/g);this._input=qe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ze),this.offset-=Ze;var ce=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Qe.length-1&&(this.yylineno-=Qe.length-1);var It=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Qe?(Qe.length===ce.length?this.yylloc.first_column:0)+ce[ce.length-Qe.length].length-Qe[0].length:this.yylloc.first_column-Ze},this.options.ranges&&(this.yylloc.range=[It[0],It[0]+this.yyleng-Ze]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(qe){this.unput(this.match.slice(qe))},pastInput:function(){var qe=this.matched.substr(0,this.matched.length-this.match.length);return(qe.length>20?"...":"")+qe.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var qe=this.match;return qe.length<20&&(qe+=this._input.substr(0,20-qe.length)),(qe.substr(0,20)+(qe.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var qe=this.pastInput(),Ze=new Array(qe.length+1).join("-");return qe+this.upcomingInput()+`
`+Ze+"^"},test_match:function(qe,Ze){var Qe,ce,It;if(this.options.backtrack_lexer&&(It={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(It.yylloc.range=this.yylloc.range.slice(0))),ce=qe[0].match(/(?:\r\n?|\n).*/g),ce&&(this.yylineno+=ce.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ce?ce[ce.length-1].length-ce[ce.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+qe[0].length},this.yytext+=qe[0],this.match+=qe[0],this.matches=qe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(qe[0].length),this.matched+=qe[0],Qe=this.performAction.call(this,this.yy,this,Ze,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Qe)return Qe;if(this._backtrack){for(var Ie in It)this[Ie]=It[Ie];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var qe,Ze,Qe,ce;this._more||(this.yytext="",this.match="");for(var It=this._currentRules(),Ie=0;Ie<It.length;Ie++)if(Qe=this._input.match(this.rules[It[Ie]]),Qe&&(!Ze||Qe[0].length>Ze[0].length)){if(Ze=Qe,ce=Ie,this.options.backtrack_lexer){if(qe=this.test_match(Qe,It[Ie]),qe!==!1)return qe;if(this._backtrack){Ze=!1;continue}else return!1}else if(!this.options.flex)break}return Ze?(qe=this.test_match(Ze,It[ce]),qe!==!1?qe:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Ze=this.next();return Ze||this.lex()},begin:function(Ze){this.conditionStack.push(Ze)},popState:function(){var Ze=this.conditionStack.length-1;return Ze>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ze){return Ze=this.conditionStack.length-1-Math.abs(Ze||0),Ze>=0?this.conditionStack[Ze]:"INITIAL"},pushState:function(Ze){this.begin(Ze)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Ze,Qe,ce,It){var Ie=It;switch(ce){case 0:return this.begin("modexp"),11;break;case 1:return 21;case 2:return this.begin("modexp"),11;break;case 3:return 12;case 4:return 13;case 5:return this.popState(),14;break;case 6:return 63;case 7:return 64;case 8:return 65;case 9:return 66;case 10:return 67;case 11:return 68;case 12:return 69;case 13:return 54;case 14:return 48;case 15:return 49;case 16:return 50;case 17:return 55;case 18:return 51;case 19:return 52;case 20:return 53;case 21:return 57;case 22:return 56;case 23:return 76;case 24:return 70;case 25:return 71;case 26:return 72;case 27:return 74;case 28:return 74;case 29:return 74;case 30:return 74;case 31:return 74;case 32:return 74;case 33:return 74;case 34:return 74;case 35:return 74;case 36:return 73;case 37:return 74;case 38:return 74;case 39:return 73;case 40:return 73;case 41:return 73;case 42:return 73;case 43:return 73;case 44:return 73;case 45:return 73;case 46:return 73;case 47:return 73;case 48:return 73;case 49:return 75;case 50:return 20;case 51:return 47;case 52:return 21;case 53:return 82;case 54:return 60;case 55:return 15;case 56:return this.begin("radical"),17;break;case 57:return this.popState(),18;break;case 58:return 18;case 59:return 79;case 60:return 81;case 61:return 80;case 62:return 59;case 63:return 59;case 64:return Qe.yytext=this.matches[1],77;break;case 65:return 23;case 66:return 24;case 67:return 25;case 68:return Qe.yytext=this.matches[1],62;break;case 69:return 61;case 70:return 78;case 71:return 83;case 72:return 46;case 73:return 47;case 74:return 58;case 75:return 5;case 76:return 85}},rules:[/^(?:"(?=[^>\]]+%))/,/^(?:")/,/^(?:"(?=[^>\]]+\]|[^>\]]+%))/,/^(?:%)/,/^(?:<)/,/^(?:\])/,/^(?:[+])/,/^(?:[-])/,/^(?:[*])/,/^(?:[@][*])/,/^(?:[@][\#])/,/^(?:[_][/])/,/^(?:[.][/])/,/^(?:[.][.][(])/,/^(?:[@][(])/,/^(?:[.][(])/,/^(?:[(])/,/^(?:[.][.][)])/,/^(?:[@][)])/,/^(?:[.][)])/,/^(?:[)])/,/^(?:[\\][\\])/,/^(?:[\\])/,/^(?:[_][3])/,/^(?:[@][0][O][F][ ]?)/,/^(?:[@][0])/,/^(?:[ ][$]O[ ])/,/^(?:[ ][\^;]+[.]K[ ])/,/^(?:[\^;]+[=])/,/^(?:[ ][\^;]+[/][.]K[ ])/,/^(?:[ ][\^;]+[@][:][@][:][ ])/,/^(?:[ ][\^;]+["]K[:][ ])/,/^(?:[ ][\^;]+[.]1[:][ ])/,/^(?:[ ][\^;]+["]K[ ])/,/^(?:[ ][\^;]+[.]1[ ])/,/^(?:[ ][\^;]+[/][$][L][ ])/,/^(?:[ ][.]K[ ])/,/^(?:[ ][\^;]+[/]?[$][L][ ])/,/^(?:[ ][\^;]+[$]P[ ])/,/^(?:[=])/,/^(?:[ ][/][.]K[ ])/,/^(?:[ ][@][:][@][:][ ])/,/^(?:[ ]["]K[:][ ])/,/^(?:[ ][.]1[:][ ])/,/^(?:[ ]["]K[ ])/,/^(?:[ ][.]1[ ])/,/^(?:[@][:])/,/^(?:[ ][/]?[$][L][ ])/,/^(?:[ ][$]P[ ])/,/^(?:[ ]['][']['][ ])/,/^(?:[\^;]+)/,/^(?:[.]["])/,/^(?:["])/,/^(?:[']+)/,/^(?:[.][,]?[ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[.]*[<])/,/^(?:[.]*[>])/,/^(?:[.]*\])/,/^(?:[.]*\])/,/^(?:!)/,/^(?:[_]&)/,/^(?:&)/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/,/^(?:#?(\d*\.?\d+))/,/^(?:[,]*[?])/,/^(?:[,]*[/])/,/^(?:[,]*#)/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,][=])/,/^(?:[_][8])/,/^(?:[,][ ]?)/,/^(?:[.])/,/^(?:[ ])/,/^(?:$)/,/^(?:.)/],conditions:{radical:{rules:[0,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76],inclusive:!0},modexp:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76],inclusive:!0},INITIAL:{rules:[2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76],inclusive:!0}}};return nn}();lo.lexer=Zr;function ne(){this.yy={}}return ne.prototype=lo,lo.Parser=ne,new ne}();typeof Ag!="undefined"&&typeof t!="undefined"&&(t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)},t.main=function(){},typeof e!="undefined"&&Ag.main===e&&t.main(process.argv.slice(1)))}}),wR=gT({"generated/ueb-to-latex.jison.js"(t,e){"use strict";var i=function(){var r=function(sr,de,it,nt){for(it=it||{},nt=sr.length;nt--;it[sr[nt]]=de);return it},o=[1,15],n=[1,16],a=[1,17],s=[1,36],l=[1,18],c=[1,37],p=[1,38],u=[1,14],g=[1,46],m=[1,47],w=[1,39],C=[1,40],S=[1,41],k=[1,56],M=[1,42],I=[1,43],E=[1,44],T=[1,45],A=[1,54],G=[1,55],_=[1,57],P=[1,58],N=[1,59],W=[1,60],X=[1,61],q=[1,62],B=[1,63],J=[1,64],f=[1,65],O=[1,66],R=[1,67],re=[1,68],ie=[1,69],ve=[1,70],ae=[1,71],oe=[1,72],Z=[1,73],Q=[1,74],fe=[1,75],ye=[1,76],Re=[1,77],Ke=[1,48],Ye=[1,49],_t=[1,50],st=[1,51],Hi=[1,52],ut=[1,78],Ee=[1,53],lo=[5,14,18,19,29,52,53,54],Zr=[5,10,13,14,15,18,19,29,52,53,54],ne=[5,10,13,14,15,17,18,19,21,23,24,28,29,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89],nn=[1,86],qe=[1,87],Ze=[1,88],Qe=[10,13,15,17,21,23,24,28,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89],ce={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,expression_group:6,delimited_expression:7,level:8,radical:9,LEVEL:10,basic_token:11,bracketed_expression:12,RADICAL_WITH_INDEX:13,CLOSE_RADICAL:14,RADICAL:15,frac:16,OPEN_FRAC:17,OVER:18,CLOSE_FRAC:19,simple_frac:20,NUMBER:21,NUMBER_FRAC_DENOMINATOR:22,NUMBER_FRAC_NUMERATOR_BAD:23,NUMBER_FRAC_DENOMINATOR_BAD:24,atom:25,lbracket:26,rbracket:27,OPEN_GROUP:28,CLOSE_GROUP:29,command:30,greek:31,letter:32,comma:33,period:34,colon:35,infinity:36,integral:37,factorial:38,ampersand:39,question_mark:40,bracket:41,space:42,operation:43,comparison:44,ellipsis:45,primes:46,",":47,".":48,"[":49,"{":50,"(":51,"]":52,"}":53,")":54,SPACE:55,COMMAND:56,GREEK:57,CAPITAL_LETTER:58,LETTER:59,PIPE:60,DOUBLE_PIPE:61,"+":62,"-":63,CDOT:64,TIMES:65,"*":66,DIV:67,SLASH:68,PERCENT_OF:69,PERCENT:70,TO:71,"=":72,NEQ:73,"<":74,">":75,LEQ:76,APPROX:77,GEQ:78,TILDE:79,PARALLEL:80,PERPENDICULAR:81,ELLIPSIS:82,COLON:83,INFINITY:84,INTEGRAL:85,FACTORIAL:86,"&":87,PRIMES:88,"?":89,unknown:90,UNKNOWN:91,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"LEVEL",13:"RADICAL_WITH_INDEX",14:"CLOSE_RADICAL",15:"RADICAL",17:"OPEN_FRAC",18:"OVER",19:"CLOSE_FRAC",21:"NUMBER",22:"NUMBER_FRAC_DENOMINATOR",23:"NUMBER_FRAC_NUMERATOR_BAD",24:"NUMBER_FRAC_DENOMINATOR_BAD",28:"OPEN_GROUP",29:"CLOSE_GROUP",47:",",48:".",49:"[",50:"{",51:"(",52:"]",53:"}",54:")",55:"SPACE",56:"COMMAND",57:"GREEK",58:"CAPITAL_LETTER",59:"LETTER",60:"PIPE",61:"DOUBLE_PIPE",62:"+",63:"-",64:"CDOT",65:"TIMES",66:"*",67:"DIV",68:"SLASH",69:"PERCENT_OF",70:"PERCENT",71:"TO",72:"=",73:"NEQ",74:"<",75:">",76:"LEQ",77:"APPROX",78:"GEQ",79:"TILDE",80:"PARALLEL",81:"PERPENDICULAR",82:"ELLIPSIS",83:"COLON",84:"INFINITY",85:"INTEGRAL",86:"FACTORIAL",87:"&",88:"PRIMES",89:"?",91:"UNKNOWN"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[7,1],[7,1],[8,2],[8,2],[8,2],[9,4],[9,3],[9,3],[9,2],[9,4],[9,3],[9,2],[16,5],[16,4],[16,4],[16,3],[16,2],[20,2],[20,1],[20,1],[11,1],[11,1],[11,1],[6,2],[6,2],[6,1],[6,1],[12,3],[12,2],[12,3],[12,2],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[33,1],[34,1],[26,1],[26,1],[26,1],[27,1],[27,1],[27,1],[42,1],[30,1],[31,1],[32,1],[32,1],[41,1],[41,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[45,1],[35,1],[36,1],[37,1],[38,1],[39,1],[46,1],[40,1],[90,1]],performAction:function(de,it,nt,ue,Pi,We,il){var at=We.length-1;switch(Pi){case 1:return We[at-1];case 2:return ue.group();case 3:case 35:this.$=ue.group(We[at-2],We[at-1],We[at]);break;case 4:case 6:case 31:case 32:case 36:this.$=ue.group(We[at-1],We[at]);break;case 5:case 7:case 33:case 34:this.$=ue.group(We[at]);break;case 10:case 11:case 12:this.$=ue.basic_level(We[at-1],ue.group(We[at]));break;case 13:case 17:this.$=ue.radical(We[at-1],ue.group(We[at-2]));break;case 14:case 15:this.$=ue.radical(ue.group(),ue.group(We[at-1]));break;case 16:this.$=ue.radical(ue.group(),ue.group());break;case 18:this.$=ue.radical(We[at-1]);break;case 19:this.$=ue.radical(ue.group());break;case 20:this.$=ue.fraction(We[at-3],We[at-1]);break;case 21:this.$=ue.fraction(We[at-2],ue.group());break;case 22:this.$=ue.fraction(ue.group(),We[at-1]);break;case 23:case 24:this.$=ue.fraction(ue.group(),ue.group());break;case 25:this.$=ue.fraction(ue.group(ue.terminal(ue.to_number(We[at-1]))),ue.group(ue.terminal(ue.to_number(We[at]))));break;case 26:this.$=ue.fraction(ue.group(ue.terminal(ue.to_number(We[at]))),ue.group());break;case 27:this.$=ue.fraction(ue.group(),ue.group(ue.terminal(ue.to_number(We[$01]))));break;case 37:this.$=ue.group(We[at-1]);break;case 38:this.$=ue.group();break;case 39:this.$=ue.terminal(ue.to_number(We[at]));break;case 57:this.$=ue.terminal(",");break;case 58:this.$=ue.terminal(".");break;case 59:this.$=ue.terminal("[");break;case 60:this.$=ue.terminal("\\{");break;case 61:this.$=ue.terminal("(");break;case 62:this.$=ue.terminal("]");break;case 63:this.$=ue.terminal("\\}");break;case 64:this.$=ue.terminal(")");break;case 65:this.$=ue.terminal(" ");break;case 66:this.$=ue.command("\\"+We[at].trim().toLowerCase());break;case 67:this.$=ue.terminal(ue.greek(We[at]));break;case 68:this.$=ue.terminal(We[at].toUpperCase());break;case 69:this.$=ue.terminal(We[at].toLowerCase());break;case 70:this.$=ue.terminal("|");break;case 71:this.$=ue.terminal("\\|");break;case 72:this.$=ue.terminal("+");break;case 73:this.$=ue.terminal("-");break;case 74:this.$=ue.terminal("\\cdot ");break;case 75:this.$=ue.terminal("\\times ");break;case 76:this.$=ue.terminal("*");break;case 77:this.$=ue.terminal("\\div ");break;case 78:this.$=ue.terminal("/");break;case 79:this.$=ue.terminal("\\%\\operatorname{of}");break;case 80:this.$=ue.terminal("\\%");break;case 81:this.$=ue.terminal("\\to ");break;case 82:this.$=ue.terminal("=");break;case 83:this.$=ue.terminal("\\neq ");break;case 84:this.$=ue.terminal("<");break;case 85:this.$=ue.terminal(">");break;case 86:this.$=ue.terminal("\\leq ");break;case 87:this.$=ue.terminal("\\approx ");break;case 88:this.$=ue.terminal("\\geq ");break;case 89:this.$=ue.terminal("\\sim ");break;case 90:this.$=ue.terminal("\\parallel ");break;case 91:this.$=ue.terminal("\\perp ");break;case 92:this.$=ue.terminal("\\ldots ");break;case 93:this.$=ue.terminal(":");break;case 94:this.$=ue.terminal("\\infty ");break;case 95:this.$=ue.terminal("\\int ");break;case 96:this.$=ue.terminal("!");break;case 97:this.$=ue.terminal("\\&");break;case 98:this.$=ue.primes(We[at]);break;case 99:this.$=ue.terminal("?");break}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:8,9:9,10:o,11:6,12:7,13:n,15:a,16:11,17:s,20:12,21:l,23:c,24:p,25:10,26:13,28:u,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:g,48:m,49:w,50:C,51:S,55:k,56:M,57:I,58:E,59:T,60:A,61:G,62:_,63:P,64:N,65:W,66:X,67:q,68:B,69:J,70:f,71:O,72:R,73:re,74:ie,75:ve,76:ae,77:oe,78:Z,79:Q,80:fe,81:ye,82:Re,83:Ke,84:Ye,85:_t,86:st,87:Hi,88:ut,89:Ee},{1:[3]},{5:[1,79]},{1:[2,2]},r(lo,[2,5],{8:8,9:9,7:80,10:o,13:n,15:a}),r(lo,[2,7],{6:4,7:5,11:6,12:7,8:8,9:9,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,4:81,10:o,13:n,15:a,17:s,21:l,23:c,24:p,28:u,47:g,48:m,49:w,50:C,51:S,55:k,56:M,57:I,58:E,59:T,60:A,61:G,62:_,63:P,64:N,65:W,66:X,67:q,68:B,69:J,70:f,71:O,72:R,73:re,74:ie,75:ve,76:ae,77:oe,78:Z,79:Q,80:fe,81:ye,82:Re,83:Ke,84:Ye,85:_t,86:st,87:Hi,88:ut,89:Ee}),r(Zr,[2,33],{11:6,12:7,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,6:82,17:s,21:l,23:c,24:p,28:u,47:g,48:m,49:w,50:C,51:S,55:k,56:M,57:I,58:E,59:T,60:A,61:G,62:_,63:P,64:N,65:W,66:X,67:q,68:B,69:J,70:f,71:O,72:R,73:re,74:ie,75:ve,76:ae,77:oe,78:Z,79:Q,80:fe,81:ye,82:Re,83:Ke,84:Ye,85:_t,86:st,87:Hi,88:ut,89:Ee}),r(Zr,[2,34],{11:6,12:7,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,6:83,17:s,21:l,23:c,24:p,28:u,47:g,48:m,49:w,50:C,51:S,55:k,56:M,57:I,58:E,59:T,60:A,61:G,62:_,63:P,64:N,65:W,66:X,67:q,68:B,69:J,70:f,71:O,72:R,73:re,74:ie,75:ve,76:ae,77:oe,78:Z,79:Q,80:fe,81:ye,82:Re,83:Ke,84:Ye,85:_t,86:st,87:Hi,88:ut,89:Ee}),r(ne,[2,8]),r(ne,[2,9]),r(ne,[2,28]),r(ne,[2,29]),r(ne,[2,30]),{4:84,6:4,7:5,8:8,9:9,10:o,11:6,12:7,13:n,15:a,16:11,17:s,20:12,21:l,23:c,24:p,25:10,26:13,27:85,28:u,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:g,48:m,49:w,50:C,51:S,52:nn,53:qe,54:Ze,55:k,56:M,57:I,58:E,59:T,60:A,61:G,62:_,63:P,64:N,65:W,66:X,67:q,68:B,69:J,70:f,71:O,72:R,73:re,74:ie,75:ve,76:ae,77:oe,78:Z,79:Q,80:fe,81:ye,82:Re,83:Ke,84:Ye,85:_t,86:st,87:Hi,88:ut,89:Ee},{4:89,6:4,7:5,8:8,9:9,10:o,11:6,12:7,13:n,15:a,16:11,17:s,20:12,21:l,23:c,24:p,25:10,26:13,28:u,29:[1,90],30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:g,48:m,49:w,50:C,51:S,55:k,56:M,57:I,58:E,59:T,60:A,61:G,62:_,63:P,64:N,65:W,66:X,67:q,68:B,69:J,70:f,71:O,72:R,73:re,74:ie,75:ve,76:ae,77:oe,78:Z,79:Q,80:fe,81:ye,82:Re,83:Ke,84:Ye,85:_t,86:st,87:Hi,88:ut,89:Ee},{9:93,11:91,12:92,13:n,15:a,16:11,17:s,20:12,21:l,23:c,24:p,25:10,26:13,28:u,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:g,48:m,49:w,50:C,51:S,55:k,56:M,57:I,58:E,59:T,60:A,61:G,62:_,63:P,64:N,65:W,66:X,67:q,68:B,69:J,70:f,71:O,72:R,73:re,74:ie,75:ve,76:ae,77:oe,78:Z,79:Q,80:fe,81:ye,82:Re,83:Ke,84:Ye,85:_t,86:st,87:Hi,88:ut,89:Ee},{11:94,12:95,14:[1,96],16:11,17:s,20:12,21:l,23:c,24:p,25:10,26:13,28:u,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:g,48:m,49:w,50:C,51:S,55:k,56:M,57:I,58:E,59:T,60:A,61:G,62:_,63:P,64:N,65:W,66:X,67:q,68:B,69:J,70:f,71:O,72:R,73:re,74:ie,75:ve,76:ae,77:oe,78:Z,79:Q,80:fe,81:ye,82:Re,83:Ke,84:Ye,85:_t,86:st,87:Hi,88:ut,89:Ee},{4:97,6:4,7:5,8:8,9:9,10:o,11:6,12:7,13:n,14:[1,98],15:a,16:11,17:s,20:12,21:l,23:c,24:p,25:10,26:13,28:u,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:g,48:m,49:w,50:C,51:S,55:k,56:M,57:I,58:E,59:T,60:A,61:G,62:_,63:P,64:N,65:W,66:X,67:q,68:B,69:J,70:f,71:O,72:R,73:re,74:ie,75:ve,76:ae,77:oe,78:Z,79:Q,80:fe,81:ye,82:Re,83:Ke,84:Ye,85:_t,86:st,87:Hi,88:ut,89:Ee},r(ne,[2,39],{22:[1,99]}),r(ne,[2,40]),r(ne,[2,41]),r(ne,[2,42]),r(ne,[2,43]),r(ne,[2,44]),r(ne,[2,45]),r(ne,[2,46]),r(ne,[2,47]),r(ne,[2,48]),r(ne,[2,49]),r(ne,[2,50]),r(ne,[2,51]),r(ne,[2,52]),r(ne,[2,53]),r(ne,[2,54]),r(ne,[2,55]),r(ne,[2,56]),{4:100,6:4,7:5,8:8,9:9,10:o,11:6,12:7,13:n,15:a,16:11,17:s,18:[1,101],19:[1,102],20:12,21:l,23:c,24:p,25:10,26:13,28:u,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:g,48:m,49:w,50:C,51:S,55:k,56:M,57:I,58:E,59:T,60:A,61:G,62:_,63:P,64:N,65:W,66:X,67:q,68:B,69:J,70:f,71:O,72:R,73:re,74:ie,75:ve,76:ae,77:oe,78:Z,79:Q,80:fe,81:ye,82:Re,83:Ke,84:Ye,85:_t,86:st,87:Hi,88:ut,89:Ee},r(ne,[2,26]),r(ne,[2,27]),r(Qe,[2,59]),r(Qe,[2,60]),r(Qe,[2,61]),r(ne,[2,66]),r(ne,[2,67]),r(ne,[2,68]),r(ne,[2,69]),r(ne,[2,57]),r(ne,[2,58]),r(ne,[2,93]),r(ne,[2,94]),r(ne,[2,95]),r(ne,[2,96]),r(ne,[2,97]),r(ne,[2,99]),r(ne,[2,70]),r(ne,[2,71]),r(ne,[2,65]),r(ne,[2,72]),r(ne,[2,73]),r(ne,[2,74]),r(ne,[2,75]),r(ne,[2,76]),r(ne,[2,77]),r(ne,[2,78]),r(ne,[2,79]),r(ne,[2,80]),r(ne,[2,81]),r(ne,[2,82]),r(ne,[2,83]),r(ne,[2,84]),r(ne,[2,85]),r(ne,[2,86]),r(ne,[2,87]),r(ne,[2,88]),r(ne,[2,89]),r(ne,[2,90]),r(ne,[2,91]),r(ne,[2,92]),r(ne,[2,98]),{1:[2,1]},r(lo,[2,4],{6:4,7:5,11:6,12:7,8:8,9:9,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,4:103,10:o,13:n,15:a,17:s,21:l,23:c,24:p,28:u,47:g,48:m,49:w,50:C,51:S,55:k,56:M,57:I,58:E,59:T,60:A,61:G,62:_,63:P,64:N,65:W,66:X,67:q,68:B,69:J,70:f,71:O,72:R,73:re,74:ie,75:ve,76:ae,77:oe,78:Z,79:Q,80:fe,81:ye,82:Re,83:Ke,84:Ye,85:_t,86:st,87:Hi,88:ut,89:Ee}),r(lo,[2,6]),r(Zr,[2,31]),r(Zr,[2,32]),{27:104,52:nn,53:qe,54:Ze},r(ne,[2,36]),r(ne,[2,62]),r(ne,[2,63]),r(ne,[2,64]),{29:[1,105]},r(ne,[2,38]),r(ne,[2,10]),r(ne,[2,11]),r(ne,[2,12]),{4:106,6:4,7:5,8:8,9:9,10:o,11:6,12:7,13:n,14:[1,107],15:a,16:11,17:s,20:12,21:l,23:c,24:p,25:10,26:13,28:u,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:g,48:m,49:w,50:C,51:S,55:k,56:M,57:I,58:E,59:T,60:A,61:G,62:_,63:P,64:N,65:W,66:X,67:q,68:B,69:J,70:f,71:O,72:R,73:re,74:ie,75:ve,76:ae,77:oe,78:Z,79:Q,80:fe,81:ye,82:Re,83:Ke,84:Ye,85:_t,86:st,87:Hi,88:ut,89:Ee},{4:109,6:4,7:5,8:8,9:9,10:o,11:6,12:7,13:n,14:[1,108],15:a,16:11,17:s,20:12,21:l,23:c,24:p,25:10,26:13,28:u,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:g,48:m,49:w,50:C,51:S,55:k,56:M,57:I,58:E,59:T,60:A,61:G,62:_,63:P,64:N,65:W,66:X,67:q,68:B,69:J,70:f,71:O,72:R,73:re,74:ie,75:ve,76:ae,77:oe,78:Z,79:Q,80:fe,81:ye,82:Re,83:Ke,84:Ye,85:_t,86:st,87:Hi,88:ut,89:Ee},r(ne,[2,16]),{14:[1,110]},r(ne,[2,19]),r(ne,[2,25]),{18:[1,111]},{4:112,6:4,7:5,8:8,9:9,10:o,11:6,12:7,13:n,15:a,16:11,17:s,19:[1,113],20:12,21:l,23:c,24:p,25:10,26:13,28:u,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:g,48:m,49:w,50:C,51:S,55:k,56:M,57:I,58:E,59:T,60:A,61:G,62:_,63:P,64:N,65:W,66:X,67:q,68:B,69:J,70:f,71:O,72:R,73:re,74:ie,75:ve,76:ae,77:oe,78:Z,79:Q,80:fe,81:ye,82:Re,83:Ke,84:Ye,85:_t,86:st,87:Hi,88:ut,89:Ee},r(ne,[2,24]),r(lo,[2,3]),r(ne,[2,35]),r(ne,[2,37]),{14:[1,114]},r(ne,[2,15]),r(ne,[2,14]),{14:[1,115]},r(ne,[2,18]),{4:116,6:4,7:5,8:8,9:9,10:o,11:6,12:7,13:n,15:a,16:11,17:s,19:[1,117],20:12,21:l,23:c,24:p,25:10,26:13,28:u,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:g,48:m,49:w,50:C,51:S,55:k,56:M,57:I,58:E,59:T,60:A,61:G,62:_,63:P,64:N,65:W,66:X,67:q,68:B,69:J,70:f,71:O,72:R,73:re,74:ie,75:ve,76:ae,77:oe,78:Z,79:Q,80:fe,81:ye,82:Re,83:Ke,84:Ye,85:_t,86:st,87:Hi,88:ut,89:Ee},{19:[1,118]},r(ne,[2,23]),r(ne,[2,13]),r(ne,[2,17]),{19:[1,119]},r(ne,[2,21]),r(ne,[2,22]),r(ne,[2,20])],defaultActions:{3:[2,2],79:[2,1]},parseError:function(de,it){if(it.recoverable)this.trace(de);else{var nt=new Error(de);throw nt.hash=it,nt}},parse:function(de){var it=this,nt=[0],ue=[],Pi=[null],We=[],il=this.table,at="",On=0,lr=0,gr=0,$o=2,Zl=1,_n=We.slice.call(arguments,1),ht=Object.create(this.lexer),yn={yy:{}};for(var mr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,mr)&&(yn.yy[mr]=this.yy[mr]);ht.setInput(de,yn.yy),yn.yy.lexer=ht,yn.yy.parser=this,typeof ht.yylloc=="undefined"&&(ht.yylloc={});var Eo=ht.yylloc;We.push(Eo);var Mu=ht.options&&ht.options.ranges;typeof yn.yy.parseError=="function"?this.parseError=yn.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ec(va){nt.length=nt.length-2*va,Pi.length=Pi.length-va,We.length=We.length-va}for(var xn=function(){var va;return va=ht.lex()||Zl,typeof va!="number"&&(va=it.symbols_[va]||va),va},bi,eo,oa,Do,Gu,an,tc={},rl,Cr,tp,ol;;){if(oa=nt[nt.length-1],this.defaultActions[oa]?Do=this.defaultActions[oa]:((bi===null||typeof bi=="undefined")&&(bi=xn()),Do=il[oa]&&il[oa][bi]),typeof Do=="undefined"||!Do.length||!Do[0]){var Au="";ol=[];for(rl in il[oa])this.terminals_[rl]&&rl>$o&&ol.push("'"+this.terminals_[rl]+"'");ht.showPosition?Au="Parse error on line "+(On+1)+`:
`+ht.showPosition()+`
Expecting `+ol.join(", ")+", got '"+(this.terminals_[bi]||bi)+"'":Au="Parse error on line "+(On+1)+": Unexpected "+(bi==Zl?"end of input":"'"+(this.terminals_[bi]||bi)+"'"),this.parseError(Au,{text:ht.match,token:this.terminals_[bi]||bi,line:ht.yylineno,loc:Eo,expected:ol})}if(Do[0]instanceof Array&&Do.length>1)throw new Error("Parse Error: multiple actions possible at state: "+oa+", token: "+bi);switch(Do[0]){case 1:nt.push(bi),Pi.push(ht.yytext),We.push(ht.yylloc),nt.push(Do[1]),bi=null,eo?(bi=eo,eo=null):(lr=ht.yyleng,at=ht.yytext,On=ht.yylineno,Eo=ht.yylloc,gr>0&&gr--);break;case 2:if(Cr=this.productions_[Do[1]][1],tc.$=Pi[Pi.length-Cr],tc._$={first_line:We[We.length-(Cr||1)].first_line,last_line:We[We.length-1].last_line,first_column:We[We.length-(Cr||1)].first_column,last_column:We[We.length-1].last_column},Mu&&(tc._$.range=[We[We.length-(Cr||1)].range[0],We[We.length-1].range[1]]),an=this.performAction.apply(tc,[at,lr,On,yn.yy,Do[1],Pi,We].concat(_n)),typeof an!="undefined")return an;Cr&&(nt=nt.slice(0,-1*Cr*2),Pi=Pi.slice(0,-1*Cr),We=We.slice(0,-1*Cr)),nt.push(this.productions_[Do[1]][0]),Pi.push(tc.$),We.push(tc._$),tp=il[nt[nt.length-2]][nt[nt.length-1]],nt.push(tp);break;case 3:return!0}}return!0}},It=function(){var sr={EOF:1,parseError:function(it,nt){if(this.yy.parser)this.yy.parser.parseError(it,nt);else throw new Error(it)},setInput:function(de,it){return this.yy=it||this.yy||{},this._input=de,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var de=this._input[0];this.yytext+=de,this.yyleng++,this.offset++,this.match+=de,this.matched+=de;var it=de.match(/(?:\r\n?|\n).*/g);return it?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),de},unput:function(de){var it=de.length,nt=de.split(/(?:\r\n?|\n)/g);this._input=de+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-it),this.offset-=it;var ue=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),nt.length-1&&(this.yylineno-=nt.length-1);var Pi=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:nt?(nt.length===ue.length?this.yylloc.first_column:0)+ue[ue.length-nt.length].length-nt[0].length:this.yylloc.first_column-it},this.options.ranges&&(this.yylloc.range=[Pi[0],Pi[0]+this.yyleng-it]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(de){this.unput(this.match.slice(de))},pastInput:function(){var de=this.matched.substr(0,this.matched.length-this.match.length);return(de.length>20?"...":"")+de.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var de=this.match;return de.length<20&&(de+=this._input.substr(0,20-de.length)),(de.substr(0,20)+(de.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var de=this.pastInput(),it=new Array(de.length+1).join("-");return de+this.upcomingInput()+`
`+it+"^"},test_match:function(de,it){var nt,ue,Pi;if(this.options.backtrack_lexer&&(Pi={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Pi.yylloc.range=this.yylloc.range.slice(0))),ue=de[0].match(/(?:\r\n?|\n).*/g),ue&&(this.yylineno+=ue.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ue?ue[ue.length-1].length-ue[ue.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+de[0].length},this.yytext+=de[0],this.match+=de[0],this.matches=de,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(de[0].length),this.matched+=de[0],nt=this.performAction.call(this,this.yy,this,it,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),nt)return nt;if(this._backtrack){for(var We in Pi)this[We]=Pi[We];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var de,it,nt,ue;this._more||(this.yytext="",this.match="");for(var Pi=this._currentRules(),We=0;We<Pi.length;We++)if(nt=this._input.match(this.rules[Pi[We]]),nt&&(!it||nt[0].length>it[0].length)){if(it=nt,ue=We,this.options.backtrack_lexer){if(de=this.test_match(nt,Pi[We]),de!==!1)return de;if(this._backtrack){it=!1;continue}else return!1}else if(!this.options.flex)break}return it?(de=this.test_match(it,Pi[ue]),de!==!1?de:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var it=this.next();return it||this.lex()},begin:function(it){this.conditionStack.push(it)},popState:function(){var it=this.conditionStack.length-1;return it>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(it){return it=this.conditionStack.length-1-Math.abs(it||0),it>=0?this.conditionStack[it]:"INITIAL"},pushState:function(it){this.begin(it)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(it,nt,ue,Pi){var We=Pi;switch(ue){case 0:this.begin("captext");return;case 1:return 58;case 2:return this.popState(),58;break;case 3:return 62;case 4:return 63;case 5:return 64;case 6:return 65;case 7:return 66;case 8:return 67;case 9:return 49;case 10:return 50;case 11:return 51;case 12:return 52;case 13:return 53;case 14:return 54;case 15:return 73;case 16:return 76;case 17:return 77;case 18:return 78;case 19:return 72;case 20:return 74;case 21:return 75;case 22:return 79;case 23:return 69;case 24:return 70;case 25:return 71;case 26:return 82;case 27:return 13;case 28:return 15;case 29:return 14;case 30:return 10;case 31:return 28;case 32:return 29;case 33:return 85;case 34:return 86;case 35:return 87;case 36:return 17;case 37:return 18;case 38:return 19;case 39:return 80;case 40:return 81;case 41:return 84;case 42:return nt.yytext=this.matches[1],21;break;case 43:return nt.yytext=this.matches[1],22;break;case 44:return nt.yytext=this.matches[1],24;break;case 45:return 68;case 46:return 47;case 47:return 48;case 48:return 88;case 49:return 61;case 50:return 60;case 51:return 83;case 52:return 56;case 53:return 56;case 54:return 57;case 55:return nt.yytext=this.matches[1],58;break;case 56:return 59;case 57:return;case 58:return 89;case 59:return;case 60:return 55;case 61:return 5;case 62:return 91}},rules:[/^(?:([,][,])(?=[A-Z]))/,/^(?:[A-Z](?=[A-Z]))/,/^(?:[A-Z])/,/^(?:["][6])/,/^(?:["][-])/,/^(?:["][4])/,/^(?:["][8])/,/^(?:["][9])/,/^(?:["][/])/,/^(?:[.][<])/,/^(?:[_][<])/,/^(?:["][<])/,/^(?:[.][>])/,/^(?:[_][>])/,/^(?:["][>])/,/^(?:["][7][@][:])/,/^(?:[_][@][<])/,/^(?:[\^][9])/,/^(?:[_][@][>])/,/^(?:["][7])/,/^(?:[@][<])/,/^(?:[@][>])/,/^(?:[@][9])/,/^(?:[.][0][O][F][ ]?)/,/^(?:[.][0])/,/^(?:[:][O])/,/^(?:[4][4][4])/,/^(?:[%][9])/,/^(?:[%])/,/^(?:[\+])/,/^(?:[95]+(?=.))/,/^(?:[<])/,/^(?:[>])/,/^(?:!)/,/^(?:[6])/,/^(?:[@]&)/,/^(?:[(])/,/^(?:[.][/])/,/^(?:[)])/,/^(?:#[L])/,/^(?:#-)/,/^(?:#=)/,/^(?:#([A-J4]+))/,/^(?:[/]([A-J4]+))/,/^(?:[#][/]([A-J4]+))/,/^(?:[_]?[/])/,/^(?:[1])/,/^(?:[4])/,/^(?:[7]+)/,/^(?:[_][\\][_][\\])/,/^(?:[_][\\])/,/^(?:[3])/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/,/^(?:[,]?[.][ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,]['])/,/^(?:[8])/,/^(?:[;])/,/^(?:[ ])/,/^(?:$)/,/^(?:.)/],conditions:{captext:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62],inclusive:!0},INITIAL:{rules:[0,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62],inclusive:!0}}};return sr}();ce.lexer=It;function Ie(){this.yy={}}return Ie.prototype=ce,ce.Parser=Ie,new Ie}();typeof Ag!="undefined"&&typeof t!="undefined"&&(t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)},t.main=function(){},typeof e!="undefined"&&Ag.main===e&&t.main(process.argv.slice(1)))}}),fT=["abs","ans","arccosh","arccot","arccoth","arccsc","arccsch","arcsec","arcsech","arcsinh","arctanh","binomialdist","boxplot","cdf","ceil","corr","cov","csch","distance","dotplot","erf","floor","gcf","histogram","IndependentTTest","iTTest","ittest","lcm","length","mad","mcd","mcm","mean","median","midpoint","mod","nCr","normaldist","nPr","pdf","poissondist","polygon","quantile","quartile","random","round","sech","sign","signum","sgn","stdDev","stddev","stdDevP","stddevp","stdev","stdevp","tdist","total","TScore","TScore","Tscore","tscore","tscore","TTest","ttest","var","variance","varp"],bS=fT,j8=CR(fT),bT;function vR(t){let e=!1,i=0,r="",o="";for(let n of t)if(n.type==="terminal"&&/[A-Za-z]/.test(n.value))r+=n.value,i++;else break;return o=r.replace(bT,"\\operatorname{$1}"),e=i>0&&o!==r,{modified:e,terminalCount:i,value:o}}function yT(t){return bS.indexOf(t.toLowerCase())!==-1}function yS(t){if(!Array.isArray(t))throw new Error("Operator names must be an array, got "+typeof t);for(let e of t)if(typeof e!="string")throw new Error("Operator names must be strings, found "+typeof e);bS=t,Y8()}function xS(){bS=fT,bT=j8}function Y8(){bT=CR(bS)}function CR(t){let e=t.sort((i,r)=>r.length-i.length||r.localeCompare(i)).join("|");return new RegExp("("+e+")","g")}var SR={};mT(SR,{command:()=>xT,fraction:()=>Q8,greek:()=>J8,group:()=>wT,level:()=>DR,processPrimes:()=>X8,radical:()=>Z8,terminal:()=>ER,typeform:()=>kR});function ER(t){return{type:"terminal",value:t}}function xT(t){return{type:"command",value:t}}function J8(t){return{type:"greek",value:t}}function DR(t){return{subscript:t._,superscript:t["^"],type:"level"}}function X8(t,e){let i=[],r=t.match(/'+/);if(r!==null){let o=r[0].length;for(let n=0;n<o;n++)i.push(xT("\\prime"))}return wT(i,e)}function Q8(t,e){return{type:"fraction",numerator:t,denominator:e}}function kR(t,e){return{name:t,type:"typeform",value:e}}function Z8(t,e){return{type:"radical",index:e,radicand:t}}function wT(...t){return Array.prototype.concat.apply([],t)}var cS={"~":"\\ ","\\,":"\\ ","\\:":"\\ ","\\;":"\\ ","\\!":"\\ "},aR={"\\Vert":"\\|","\\ge":"\\geq","\\le":"\\leq","\\vert":"|"},e7={"\\space":!0};function Rd(t){let e=[];for(let i=0;i<t.length;i++){let r=t[i];switch(r.type){case"command":let o=r.value.slice(1).trim();aR.hasOwnProperty(r.value)?e.push(xT(aR[r.value])):yT(o)?e.push(kR("operator_name",t7(o))):e7[r.value]||e.push(r);break;case"level":let n={subscript:r.subscript&&r.subscript.length>0?Rd(r.subscript):void 0,superscript:r.superscript&&r.superscript.length>0?Rd(r.superscript):void 0,type:r.type};(n.subscript||n.superscript)&&e.push(n);break;case"fraction":e.push({denominator:Rd(r.denominator),numerator:Rd(r.numerator),type:r.type});break;case"radical":e.push({index:r.index?Rd(r.index):void 0,radicand:Rd(r.radicand),type:r.type});break;case"terminal":i7(t.slice(i))?(e.push({type:"command",value:"\\ldots"}),i+=2):e.push({type:r.type,value:cS.hasOwnProperty(r.value)?cS[r.value]:r.value});break;case"typeform":e.push(r);break;case"greek":e.push({type:r.type,value:cS.hasOwnProperty(r.value)?cS[r.value]:r.value});break;default:throw new Error(`Unexpected item:
`+JSON.stringify({group:t,item:r}))}}return e}function t7(t){let e=[];for(let i of t)e.push(ER(i));return e}function i7(t){let e=0;for(let i=0;i<Math.min(3,t.length);i++){let r=t[i];r.type==="terminal"&&r.value==="."&&e++}return e===3}function vT(t){if(!t.hash)throw t;return{_diagnostic:{expected:t.hash.expected,message:t.message,text:t.hash.text,token:t.hash.token},location:t.hash.loc}}var IR=$8();IR.parser.yy=SR;function TR(t){try{return{isError:!1,value:IR.parser.parse(t)}}catch(e){return{isError:!0,error:vT(e)}}}function r7(t){return t.isError}function o7(t,e){return r7(t)?t:{isError:!1,value:e(t.value)}}function Vg(t,e){let i=o7(t,e);return t.warnings&&(i.warnings=t.warnings),i}function n7(t){return Vg(TR(t),e=>f7(Rd(e)))}var sR={"!":"&","*":"@#",",":", ","/":"_/",":":"_3","<":' "K ',"=":" .K ",">":" .1 ","?":"_8","[":"@(","\\ ":" ","\\%":"@0","\\&":"_&","\\,":" ","\\infty":",=","\\int":"!","\\{":".(","\\|":"\\\\","\\}":".)","]":"@)","|":"\\"};function nT(t){return/^[a-z]$/.test(t.value)?t.value.toUpperCase():/^[A-Z]$/.test(t.value)?","+t.value:/^[0-9.]$/.test(t.value)||/^[+\-()]$/.test(t.value)?t.value:sR.hasOwnProperty(t.value)?sR[t.value]:"[terminal: "+t.value+"]"}var lR={"\\Vert":"\\\\","\\cdot":"*","\\div":"./","\\ge":" .1: ","\\geq":" .1: ","\\langle":"..(","\\ldots":" ''' ","\\le":' "K: ',"\\leq":' "K: ',"\\ne":" /.K ","\\neq":" /.K ","\\approx":" @:@: ","\\nparallel":" /$L ","\\parallel":" $L ","\\perp":" $P ","\\prime":"'","\\prod":".,P","\\rangle":"..)","\\sim":"@:","\\sum":".,S","\\times":"@*","\\to":" $O ","\\vert":"\\"},cR={"\\Alpha":".,A","\\Beta":".,B","\\Chi":".,&","\\Delta":".,D","\\Epsilon":".,E","\\Eta":".,:","\\Gamma":".,G","\\Iota":".,I","\\Kappa":".,K","\\Lambda":".,L","\\Mu":".,M","\\Nu":".,N","\\Omega":".,W","\\Omicron":".,O","\\Phi":".,F","\\Pi":".,P","\\Psi":".,Y","\\Rho":".,R","\\Sigma":".,S","\\Tau":".,T","\\Theta":".,?","\\Upsilon":".,U","\\Xi":".,X","\\Zeta":".,Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"};function dR(t){return lR.hasOwnProperty(t.value)?lR[t.value]:t.value.slice(1).toUpperCase()+" "}function a7(t){return cR.hasOwnProperty(t.value)?cR[t.value]:t.value.slice(1).toUpperCase()+" "}function s7(t){return t.value==="\\space"}function l7(t,e){return t.isStartOfLine&&/^-?$/.test(e)||/\s-?$/.test(e)||t.wasFraction}function c7(t){return t.value==="\\sum"||t.value==="\\prod"}function d7(t,e){if(e>=t.length)return!1;let i=t[e];if(i.type==="terminal"){if(/^[0-9]$/.test(i.value))return!0;if(i.value!=="."||e+1>=t.length)return!1;if(i=t[e+1],i.type==="terminal")return/^[0-9]$/.test(i.value)}return!1}function Bd(t,e){let i="",r=t.levelIndicator,o=0,n=!1;for(let a=0;a<e.length;a++){d7(e,a)&&(r===""&&/[A-Z]$/.test(i)?i+=Nl(r):l7(t,i)&&(i+="#"));let s=e[a],l=a<e.length-1?e[a+1]:null;switch(s.type!=="level"&&r!==t.levelIndicator&&(aT(s)?r="":(t.wasModifiedExpression&&t.levelIndicator===""?t=Ka(t,{wasModifiedExpression:!1}):i+=Nl(t.levelIndicator),r=t.levelIndicator)),s.type){case"terminal":!t.wasModifiedExpression&&r!==""&&aT(s)?i+=" "+Nl(r)+nT(s).trim()+" ":i+=nT(s),s.value==="."&&l&&(l.type==="terminal"&&/^[^_\d,]/.test(nT(l))||l.type==="greek")&&(i+='"'),t=Ka(t,{wasFraction:!1,wasRomanCommand:!1});break;case"command":if(!s7(s)){let m=c7(s);m&&(i+='"'),!m&&r!==""&&aT(s)?i+=" "+Nl(r)+dR(s).trim()+" ":i+=dR(s),t=Ka(t,{wasFraction:!1,wasModifiedExpression:m,wasRomanCommand:!0})}break;case"greek":i+=a7(s),t=Ka(t,{wasFraction:!1});break;case"fraction":let c=p7(t,s);i+=c.value,o=Math.max(o,c.fractionLevel),t=Ka(t,{wasFraction:!0,wasRomanCommand:!1});break;case"radical":let p=u7(t,s);i+=p.value,o=Math.max(o,p.fractionLevel),t=Ka(t,{wasFraction:!1,wasRomanCommand:!1});break;case"level":!t.wasModifiedExpression&&t.wasRomanCommand?(n=/\s$/.test(i),n&&(i=i.replace(/\s$/,""))):n=!1;let u=i.length>0&&/[A-Za-z]/.test(i[i.length-1])===!0,g=h7(t,u,n,s);i+=g.value,r=g.levelIndicator,t=Ka(t,{wasFraction:!1,wasRomanCommand:!1});break;case"typeform":i+=Bd(t,s.value).value,s.name==="operator_name"&&(i+=" "),t=Ka(t,{wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1});break}}return{fractionLevel:o,levelIndicator:r,value:i}}function p7(t,e){t=Ka(t,{isStartOfLine:!1});let i=Bd(t,e.numerator),r=Bd(t,e.denominator),o=Math.max(i.fractionLevel,r.fractionLevel),n="";for(let s=0;s<o;s++)n+=",";let a=n+"?"+i.value;return i.levelIndicator!==t.levelIndicator&&(a+=Nl(t.levelIndicator)),/\.$/.test(i.value)&&(a+='"'),a+=n+"/"+r.value,r.levelIndicator!==t.levelIndicator&&(a+=Nl(t.levelIndicator)),/\.$/.test(r.value)&&(a+='"'),a+=n+"#",{fractionLevel:o+1,value:a}}function u7(t,e){let i=t.radicalLevel,r="",o="";for(let a=0;a<i;a++)o+=".";if(e.index){r+=o+"<";let a=Bd(Ka(t,{isStartOfLine:!1}),e.index);r+=a.value,/\.$/.test(a.value)&&(r+='"'),a.levelIndicator!==t.levelIndicator&&(r+=Nl(t.levelIndicator)),r+=">"}else r+=o+">";let n=Bd(Ka(t,{isStartOfLine:!1,radicalLevel:i+1}),e.radicand);return r+=n.value,/\.$/.test(n.value)&&(r+='"'),n.levelIndicator!==t.levelIndicator&&(r+=Nl(t.levelIndicator)),r+=o+"]",{fractionLevel:n.fractionLevel,value:r}}function h7(t,e,i,r){let o=t.levelIndicator,n="",a=g7(r.superscript);if(n+=a,r.subscript){t.wasModifiedExpression&&(n+="%"),o=t.levelIndicator+";";let s=Bd(Ka(t,{isStartOfLine:!1,levelIndicator:o}),r.subscript);e&&/^[0-9]*(\.|\,)?[0-9]+$/.test(s.value)&&o.length<=1?o=t.levelIndicator:!t.wasModifiedExpression&&r.subscript[0]&&r.subscript[0].type!=="level"&&(n+=Nl(o)),n+=s.value,/\.$/.test(s.value)&&(n+='"')}if(r.superscript){t.wasModifiedExpression&&(n+="<"),o=t.levelIndicator+"^";let s=Bd(Ka(t,{isStartOfLine:!1,levelIndicator:o}),r.superscript.slice(a.length));!t.wasModifiedExpression&&r.superscript[0]&&r.superscript[0].type!=="level"&&s.value!==""&&(n+=Nl(o)),n+=s.value,/\.$/.test(s.value)&&(n+='"')}return t.wasModifiedExpression?n+="]":t.wasRomanCommand&&i&&(n+=" ",o=o.slice(0,o.length-1)),{levelIndicator:o,value:n}}function g7(t){let e="";if(t)for(let i of t)if(i.type==="command"&&i.value==="\\prime")e+="'";else break;return e}function Nl(t){return t||'"'}function m7(){return{isStartOfLine:!0,levelIndicator:"",radicalLevel:0,wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1}}function Ka(t,e){return Gg(Gg({},t),e)}function aT(t){return t.type==="terminal"||t.type==="command"?/^<|>|\=|\\leq?|\\geq?|\\neq?$/.test(t.value):!1}function f7(t){let e=m7();return Bd(e,t).value}function b7(t){return Vg(TR(t),e=>M7(Rd(e)))}var pR={"!":"6","(":'"<',")":'">',"*":'"9',"+":'"6',",":"1","-":'"-',".":"4","/":"_/",":":"3","<":"@<","=":'"7',">":"@>","?":"8","[":".<","\\ ":" ","\\%":".0","\\&":"@&","\\,":" ","\\infty":"#=","\\int":"!","\\{":"_<","\\|":"_\\_\\","\\}":"_>","]":".>","|":"_\\"};function y7(t,e,i){let r="",o=e.value,n=i&&i.type==="terminal"?i.value:"";return MR(o,t)&&(r+=";"),/^[\D]/.test(o)&&(t=Bl(t,{wasNumber:!1})),/^[a-z]$/.test(o)?t.capsLock?(t=Bl(t,{capsLock:!1}),r+=",'"+o.toUpperCase()):r+=o.toUpperCase():/^[A-Z]$/.test(o)?t.capsLock?r+=o:/[A-Z]/.test(n)?(t=Bl(t,{capsLock:!0}),r+=",,"+o):r+=","+o:(t=Bl(t,{capsLock:!1}),/^[0-9.]$/.test(o)?r+=S7(o):pR.hasOwnProperty(o)?r+=pR[o]:r+="[terminal: "+o+"]"),{value:r,ctx:t}}var uR={"\\Vert":"_\\_\\","\\cdot":'"4',"\\div":'"/',"\\ge":"_@>","\\geq":"_@>","\\langle":"@<","\\ldots":"444","\\le":"_@<","\\leq":"_@<","\\ne":'"7@:',"\\neq":'"7@:',"\\approx":"^9","\\parallel":"#L","\\perp":"#-","\\prime":"7","\\prod":",.P","\\rangle":"@>","\\sim":"@9","\\sum":",.S","\\times":'"8',"\\to":":O","\\vert":"_\\"},hR={"\\Alpha":",.A","\\Beta":",.B","\\Chi":",.&","\\Delta":",.D","\\Epsilon":",.E","\\Eta":",.:","\\Gamma":",.G","\\Iota":",.I","\\Kappa":",.K","\\Lambda":",.L","\\Mu":",.M","\\Nu":",.N","\\Omega":",.W","\\Omicron":",.O","\\Phi":",.F","\\Pi":",.P","\\Psi":",.Y","\\Rho":",.R","\\Sigma":",.S","\\Tau":",.T","\\Theta":",.?","\\Upsilon":",.U","\\Xi":",.X","\\Zeta":",.Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"};function x7(t,e){let i;return uR.hasOwnProperty(t.value)?i=uR[t.value]:i=t.value.slice(1).toUpperCase()+" ",MR(i,e)&&(i=";"+i),/^[\D]/.test(i)&&(e=Bl(e,{wasNumber:!1})),{value:i,ctx:e}}function w7(t){return hR.hasOwnProperty(t.value)?hR[t.value]:t.value.slice(1).toUpperCase()+" "}function v7(t){return t.value==="\\space"}function C7(t,e){if(e<t.length){let i=t[e];if(i.type==="terminal"){if(/^\d$/.test(i.value))return!0;if(i.value!=="."||e+1>=t.length)return!1;if(i=t[e+1],i.type==="terminal")return/^\d$/.test(i.value)}}return!1}function S7(t){let e="",i="A".charCodeAt(0)-1;for(let r of t)r===","?e+="1":r==="."?e+="4":r==="0"?e+="J":e+=String.fromCharCode(i+Number(r));return e}function Kd(t,e){let i,r,o="",n=!0;for(let a=0;a<e.length;a++){C7(e,a)?(t=Bl(t,{wasNumber:!0}),n&&(o+="#",n=!1)):n=!0;let s=e[a];switch(s.type){case"terminal":let l=a<e.length-1?e[a+1]:void 0;i=y7(t,s,l),t=i.ctx,o+=i.value,o[o.length-1]===" "&&(n=!0);break;case"command":v7(s)||(r=x7(s,t),t=r.ctx,o+=r.value,o[o.length-1]===" "&&(n=!0));break;case"greek":o+=w7(s),o[o.length-1]===" "&&(n=!0);break;case"fraction":let c=E7(t,s);o+=c.value,t=c.ctx,n=!1;break;case"radical":let p=D7(t,s);o+=p.value,n=!0;break;case"level":let u=k7(t,s);o+=u.value,t=u.ctx,n=!0;break;case"typeform":let g=Kd(t,s.value).value;o+=g,/(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?/.test(g)&&(o+=" ");break}}return{ctx:t,value:o}}function MR(t,e){return e.wasNumber&&/^[A-Ja-j]/.test(t)}function E7(t,e){let i=Kd(t,e.numerator),r=Kd(t,e.denominator),o;return cT(i.value)&&cT(r.value)?(t=Bl(t,{wasNumber:!0}),o=i.value+"/"+r.value.slice(1)):(t=Bl(t,{wasNumber:!1}),o="("+i.value+"./"+r.value+")"),{ctx:t,value:o}}function cT(t){return/^\#[A-J41]+$/.test(t)}function D7(t,e){let i="%",r=Kd(t,e.radicand);if(e.index){let o=Kd(t,wT(DR({"^":e.index})));i+=o.value,/\#[A-J]$/.test(o.value)&&/^[A-J]/.test(r.value)&&(i+=";")}return i+=r.value+"+",{ctx:t,value:i}}function k7(t,e){let i="",r=I7(e.superscript);i+=r;let o;if(e.subscript){let n=Kd(t,e.subscript);mR(e.subscript,n.value,0)?o="<"+gR(n.value)+">":o=n.value,t=Bl(t,{wasNumber:n.ctx.wasNumber}),o!==""&&(i+="5"+o)}if(e.superscript){let n=Kd(t,e.superscript.slice(r.length));mR(e.superscript,n.value,r.length)?o="<"+gR(n.value)+">":o=n.value,t=Bl(t,{wasNumber:n.ctx.wasNumber}),(r===""||o!=="")&&(i+="9"+o)}return{ctx:t,value:i}}function gR(t){return/^;/.test(t)?t.slice(1):t}function I7(t){let e="";if(t)for(let i of t)if(i.type==="command"&&i.value==="\\prime")e+="7";else break;return e}function mR(t,e,i){let r=t[0],o=(e.match(/\</g)||[]).length,n=/^["|\.|_]?\</.test(e),a=(e.match(/\>/g)||[]).length,s=/["|\.|_]?\>$/.test(e);return!cT(e)&&t.length-i>1&&o===0&&a===0||o>0&&a>0&&(!n||!s)||o>1||a>1||r&&r.type==="typeform"}function T7(){return{capsLock:!1,wasNumber:!1}}function Bl(t,e){return Gg(Gg({},t),e)}function M7(t){let e=T7();return Kd(e,t).value}var dT={};mT(dT,{baseline:()=>P7,command:()=>A7,comparison:()=>L7,expression:()=>N7,fraction:()=>_7,greek:()=>K7,group:()=>q7,level:()=>CT,level_with_comparison:()=>V7,modified_expression:()=>F7,primes:()=>O7,radical:()=>R7,simple_subscript:()=>B7,terminal:()=>G7});function G7(t){return{type:"terminal",value:t}}function A7(t){return{type:"command",value:"\\"+t.trim()+" "}}var GR={'"K':"<",'"K:':"\\leq ",$L:"\\parallel ",$O:"\\to ",$P:"\\perp ",".1":">",".1:":"\\geq ",".K":"=","@:@:":"\\approx","/$L":"\\nparallel ","/.K":"\\neq ","=":"=","@:":"\\sim "};function V7(t){let e=/[\^;]+/.exec(t),i=e?e.toString():"",r=t.slice(CT.length);return{type:"level_with_comparison",level:i,value:GR[r]}}function L7(t){return{type:"comparison",value:GR[t]}}function CT(t){return{type:"level",value:t}}function P7(){return CT("")}function O7(t){return{type:"primes",value:t}}function _7(t,e){return{type:"fraction",numerator:t,denominator:e}}function F7(t,e,i){return{type:"modified_expression",expression:t,under:e,over:i}}function R7(t,e){return{type:"radical",value:t,index:e}}function N7(t){return{type:"expression",value:t}}function B7(t,e){return{type:"simple_subscript",base:t,subscript:e}}var fR={".&":"\\chi",".,&":"\\Chi",".,:":"\\Eta",".,?":"\\Theta",".,A":"\\Alpha",".,B":"\\Beta",".,D":"\\Delta",".,E":"\\Epsilon",".,F":"\\Phi",".,G":"\\Gamma",".,I":"\\Iota",".,K":"\\Kappa",".,L":"\\Lambda",".,M":"\\Mu",".,N":"\\Nu",".,O":"\\Omicron",".,P":"\\prod",".,R":"\\Rho",".,S":"\\sum",".,T":"\\Tau",".,U":"\\Upsilon",".,W":"\\Omega",".,X":"\\Xi",".,Y":"\\Psi",".,Z":"\\Zeta",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};function K7(t){if(fR.hasOwnProperty(t))return fR[t]+" ";throw new Error("Unknown Greek letter")}function q7(...t){return Array.prototype.concat.apply([],t)}var ST=xR(),gS=ST.parser.lexer,eu=Object.create(gS),z7=eu,gb=ST.parser.terminals_,Yr=ST.parser.symbols_;eu.setInput=function(t,e){this.delimiterStack=[],this.outputQueue=[],this.canAcceptPrimes=!1,gS.setInput.call(this,t,e)};eu.lex=function(){let t=-1;if(!this)return t;if(this.outputQueue.length)return this.outputQueue.shift();let e=gS.lex.call(this);for(;gb[e]==="UNKNOWN"||!this.canAcceptPrimes&&gb[e]==="PRIMES";)this.warn(),e=gS.lex.call(this);this.canAcceptPrimes=!0;let i,r,o=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(gb[e]){case"OPEN_FRAC":case"OPEN_MODEXP":this.delimiterStack.push(e),this.canAcceptPrimes=!1;break;case"RADICAL_INDEX":o===Yr.RADICAL_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(o)),this.delimiterStack.push(e),this.canAcceptPrimes=!1;break;case"OPEN_RADICAL":o===Yr.RADICAL_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(e),this.canAcceptPrimes=!1;break;case"SLASH":for(i=!1;this.delimiterStack.length;)if(r=this.delimiterStack.pop()||-1,r===Yr.OPEN_FRAC){i=!0;break}else this.pushCloseTokens(r);i||this.pushOpenTokens(e),this.delimiterStack.push(e),this.canAcceptPrimes=!1;break;case"CLOSE_FRAC":for(i=!1;this.delimiterStack.length;)if(r=this.delimiterStack.pop()||-1,r===Yr.SLASH){i=!0;break}else if(r===Yr.OPEN_FRAC){this.addMissingToken(Yr.SLASH),i=!0;break}else this.pushCloseTokens(r);if(!i)return this.warn(),this.canAcceptPrimes=!1,this.lex();break;case"CLOSE_RADICAL":for(i=!1;this.delimiterStack.length;)if(r=this.delimiterStack.pop()||-1,r===Yr.OPEN_RADICAL){i=!0;break}else if(r===Yr.RADICAL_INDEX){i=!0,this.addMissingToken(Yr.OPEN_RADICAL);break}else this.pushCloseTokens(r);i||this.pushOpenTokens(e);break;case"CLOSE_MODEXP":for(i=!1;this.delimiterStack.length;)if(r=this.delimiterStack.pop()||-1,r===Yr.OPEN_MODEXP){i=!0;break}else this.pushCloseTokens(r);i||this.pushOpenTokens(e);break;case"EOF":for(;this.delimiterStack.length;)r=this.delimiterStack.pop()||-1,this.pushCloseTokens(r);break}return this.outputQueue.push(e),t=this.outputQueue.shift()||-1,t};eu.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})};eu.addMissingToken=function(t){this.outputQueue.push(t),this.warn()};eu.pushCloseTokens=function(t){switch(gb[t]){case"OPEN_FRAC":this.addMissingToken(Yr.SLASH),this.addMissingToken(Yr.CLOSE_FRAC);break;case"SLASH":this.addMissingToken(Yr.CLOSE_FRAC);break;case"RADICAL_INDEX":this.addMissingToken(Yr.OPEN_RADICAL),this.addMissingToken(Yr.CLOSE_RADICAL);break;case"OPEN_RADICAL":this.addMissingToken(Yr.CLOSE_RADICAL);break;case"OPEN_MODEXP":this.addMissingToken(Yr.CLOSE_MODEXP);break}};eu.pushOpenTokens=function(t){switch(gb[t]){case"SLASH":this.addMissingToken(Yr.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(Yr.OPEN_FRAC),this.addMissingToken(Yr.SLASH);break;case"CLOSE_RADICAL":this.addMissingToken(Yr.OPEN_RADICAL);break;case"CLOSE_MODEXP":this.addMissingToken(Yr.OPEN_MODEXP);break}};var U7=xR();function H7(t,e){e||(e={});let i=U7.parser,r=Object.create(i);r.yy=dT,r.yy.warnOrError=n=>{r.parseError(n,{recoverable:!1})};let o=Object.create(i);o.yy=Gg({warnings:[]},dT),o.yy.warnOrError=n=>{o.yy.warnings.push(n)},o.lexer=z7,e.strict?i=r:i=o;try{return{isError:!1,value:i.parse(t),warnings:i.yy.warnings||[]}}catch(n){return{error:vT(n),isError:!0}}}function Nd(t,e){let i="",r=e,o="",n=!1,a="",s="",l=W7(t);for(let c=0;c<t.length;c++){let p=t[c],u=c+1<t.length?t[c+1]:null;switch(p.type){case"terminal":let g=vR(t.slice(c));g.value!==""?(i+=g.value,c+=g.terminalCount-1,n=n||g.modified):p.value===" "?(n?(o=a,i+=hb(r,o),r=o):i+="\\ ",n=!1):(l[c]===uS?i+="\\left":l[c]===pT&&(i+="\\right"),i+=p.value);break;case"comparison":o="",i+=hb(r,o),r=o,n=!1,i+=p.value;break;case"level_with_comparison":i+=hb(r,p.level),r=p.level,n=!1,i+=p.value;break;case"command":let m=p.value.slice(1).trim();u&&u.type==="terminal"&&/[a-z]/.test(u.value)?(i+=m,n=!1):yT(m)?(i+="\\operatorname{"+m+"}",n=!0):(i+=p.value,n=!0),a=r;break;case"expression":i+=p.value;break;case"fraction":i+=J7(p.numerator,p.denominator,r);break;case"modified_expression":i+=Nd(p.expression,r)+" ",p.under&&(i+="_{"+Nd(p.under,r)+"}"),p.over&&(i+="^{"+Nd(p.over,r)+"}");break;case"radical":i+="\\sqrt",p.index&&(i+="["+Nd(p.index,r)+"]"),i+="{"+Nd(p.value,r)+"}";break;case"simple_subscript":r===""?(i+=p.base.value+"_{"+p.subscript.value+"}",p.base.type==="command"&&(n=!0,a=r)):i+=p.base.value+p.subscript.value;break;case"level":i+=hb(r,p.value,s),r=p.value,p.value==="^"&&s!==""&&(s="");break;case"primes":u&&u.type==="level"&&u.value===";"?s=p.value:r!==""?(i+=Array(p.value.length+1).join("\\prime "),s=""):(i+=p.value,s="");break}}return i+=hb(r,e)+s,i.replace(/([^\\])( )$/,"$1")}var uS=1,pT=-1,dS=0,sT=2;function W7(t){let e=[],i=[];for(let r=0;r<t.length;r++){let o=t[r];if($7(o))e.push({direction:uS,index:r}),i.push(dS);else if(j7(o)){for(;e.length&&e[e.length-1].direction===sT;)e.pop();if(e.length){let n=e.pop();if(n){let a=n.index;i[a]=uS,i.push(pT)}}else i.push(dS)}else if(Y7(o))if(e.length&&e[e.length-1].direction===sT){let n=e.pop();if(n){let a=n.index;i[a]=uS,i.push(pT)}}else e.push({direction:sT,index:r}),i.push(dS);else i.push(dS)}return i}function $7(t){return t.type==="terminal"?/^(\\langle |\[|\(|\\{)$/.test(t.value):!1}function j7(t){return t.type==="terminal"?/^(\\rangle |\]|\)|\\})$/.test(t.value):!1}function Y7(t){return t.type==="terminal"?/^(\\\||\|)$/.test(t.value):!1}function J7(t,e,i){return"\\frac{"+Nd(t,i)+"}{"+Nd(e,i)+"}"}function hb(t,e,i){let r="",o,n,a,s=Math.max(t.length,e.length);for(o=0;o<s&&t[o]===e[o];o++);for(n=t.length-1;n>=o;n--)r+="}";for(a=o;a<e.length;a++)e[a]==="^"&&(i&&(r+=i),r+="^{"),e[a]===";"&&(r+="_{");return r}function X7(t){return Nd(t,"")}function Q7(t,e){return e&&e.operatorNames?yS(e.operatorNames):xS(),Vg(H7(t,e),X7)}var ET=wR(),mS=ET.parser.lexer,tu=Object.create(mS),Z7=tu,fS=ET.parser.terminals_,Po=ET.parser.symbols_;tu.setInput=function(t,e){this.delimiterStack=[],this.outputQueue=[],mS.setInput.call(this,t,e)};tu.lex=function(){let t=-1;if(this.outputQueue.length)return this.outputQueue.shift();let e=mS.lex.call(this);for(;fS[e]==="UNKNOWN";)this.warn(),e=mS.lex.call(this);let i,r,o=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(fS[e]){case"OPEN_FRAC":this.delimiterStack.push(e);break;case"OPEN_GROUP":this.delimiterStack.push(e);break;case"RADICAL_WITH_INDEX":o===Po.RADICAL_WITH_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(o)),this.delimiterStack.push(e);break;case"RADICAL":o===Po.RADICAL_WITH_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(e);break;case"OVER":for(i=!1;this.delimiterStack.length;)if(r=this.delimiterStack.pop()||-1,r===Po.OPEN_FRAC){i=!0;break}else this.pushCloseTokens(r);i||this.pushOpenTokens(e),this.delimiterStack.push(e);break;case"CLOSE_FRAC":for(i=!1;this.delimiterStack.length;)if(r=this.delimiterStack.pop()||-1,r===Po.OVER){i=!0;break}else if(r===Po.OPEN_FRAC){this.outputQueue.push(Po.OVER),i=!0;break}else this.pushCloseTokens(r);i||this.pushOpenTokens(e);break;case"CLOSE_GROUP":for(i=!1;this.delimiterStack.length;)if(r=this.delimiterStack.pop()||-1,r===Po.OPEN_GROUP){i=!0;break}else this.pushCloseTokens(r);i||this.pushOpenTokens(e);break;case"CLOSE_RADICAL":for(i=!1;this.delimiterStack.length;)if(r=this.delimiterStack.pop()||-1,r===Po.RADICAL||r===Po.RADICAL_WITH_INDEX){i=!0;break}else this.pushCloseTokens(r);i||this.pushOpenTokens(e);break;case"EOF":for(;this.delimiterStack.length;)r=this.delimiterStack.pop()||-1,this.pushCloseTokens(r);break}return this.outputQueue.push(e),t=this.outputQueue.shift()||-1,t};tu.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})};tu.addMissingToken=function(t){this.outputQueue.push(t),this.warn()};tu.pushCloseTokens=function(t){switch(fS[t]){case"OPEN_FRAC":this.addMissingToken(Po.OVER),this.addMissingToken(Po.CLOSE_FRAC);break;case"OVER":this.addMissingToken(Po.CLOSE_FRAC);break;case"OPEN_GROUP":this.addMissingToken(Po.CLOSE_GROUP);break;case"RADICAL_WITH_INDEX":case"RADICAL":this.addMissingToken(Po.CLOSE_RADICAL);break}};tu.pushOpenTokens=function(t){switch(fS[t]){case"OVER":this.addMissingToken(Po.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(Po.OPEN_FRAC),this.addMissingToken(Po.OVER);break;case"CLOSE_GROUP":this.addMissingToken(Po.OPEN_GROUP);break;case"CLOSE_RADICAL":this.addMissingToken(Po.RADICAL);break}};var uT={};mT(uT,{basic_level:()=>iH,bracketed_level:()=>rH,command:()=>tH,expression:()=>sH,fraction:()=>nH,greek:()=>cH,group:()=>lH,primes:()=>oH,radical:()=>aH,terminal:()=>eH,to_number:()=>dH});function eH(t){return{type:"terminal",value:t}}function tH(t){return{type:"command",value:t}}function iH(t,e){return{type:"basic_level",level:t,value:e}}function rH(t,e,i,r){return{type:"bracketed_level",level:t,lbrack:e,value:i,rbrack:r}}function oH(t){return{type:"primes",value:t.length>0?Array(t.length+1).join("'"):""}}function nH(t,e){return{type:"fraction",numerator:t,denominator:e}}function aH(t,e){return{type:"radical",value:t,index:e}}function sH(t){return{type:"expression",value:t}}function lH(...t){return Array.prototype.concat.apply([],t)}var bR={",.&":"\\Chi",",.:":"\\Eta",",.?":"\\Theta",",.A":"\\Alpha",",.B":"\\Beta",",.D":"\\Delta",",.E":"\\Epsilon",",.F":"\\Phi",",.G":"\\Gamma",",.I":"\\Iota",",.K":"\\Kappa",",.L":"\\Lambda",",.M":"\\Mu",",.N":"\\Nu",",.O":"\\Omicron",",.P":"\\prod",",.R":"\\Rho",",.S":"\\sum",",.T":"\\Tau",",.U":"\\Upsilon",",.W":"\\Omega",",.X":"\\Xi",",.Y":"\\Psi",",.Z":"\\Zeta",".&":"\\chi",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};function cH(t){if(bR.hasOwnProperty(t))return bR[t]+" ";throw new Error("Unknown Greek letter")}function dH(t){let e="",i="A".charCodeAt(0)-1;for(let r of t)r==="4"?e+=".":r==="J"?e+="0":e+=r.charCodeAt(0)-i;return e}var pH=wR();function uH(t,e){e||(e={});let i=pH.parser,r=Object.create(i);r.yy=uT;let o=Object.create(i);o.yy=Gg({warnings:[]},uT),o.lexer=Z7,e.strict?i=r:i=o;try{return{isError:!1,value:i.parse(t),warnings:i.yy.warnings||[]}}catch(n){return{error:vT(n),isError:!0}}}function Zp(t,e){let i="",r=!1,o="",n=hH(t);for(let a=0;a<t.length;a++){let s=t[a],l=a+1<t.length?t[a+1]:null;switch(s.type){case"terminal":let c=vR(t.slice(a));c.value!==""?(i+=c.value,a+=c.terminalCount-1):s.value===" "&&!r?i+="\\ ":(n[a]===hS?i+="\\left":n[a]===hT&&(i+="\\right"),i+=s.value),r=!1;break;case"command":let p=s.value.slice(1).trim();l&&l.type==="terminal"&&/[a-z]/.test(l.value)?(i+=p,r=!1):yT(p)?(i+="\\operatorname{"+p+"}",r=!0):(i+=s.value,r=!0);break;case"expression":i+=s.value;break;case"fraction":i+=bH(s.numerator,s.denominator);break;case"radical":i+="\\sqrt",s.index&&(i+="["+Zp(s.index)+"]"),i+="{"+Zp(s.value)+"}";break;case"basic_level":i+=yH(s.level,s.value,o),s.level==="9"&&(o="");break;case"bracketed_level":i+=xH(s.level,s.lbrack,s.value,s.rbrack,o),s.level==="9"&&(o="");break;case"primes":l&&(l.type==="basic_level"||l.type==="bracketed_level")&&l.level==="5"?o=s.value:e&&e!==""?(i+=Array(s.value.length+1).join("\\prime "),o=""):(i+=s.value,o="");break}}return i+=o,i.replace(/([^\\])( )$/,"$1")}var hS=1,hT=-1,pS=0,lT=2;function hH(t){let e=[],i=[];for(let r=0;r<t.length;r++){let o=t[r];if(gH(o))e.push({direction:hS,index:r}),i.push(pS);else if(mH(o)){for(;e.length&&e[e.length-1].direction===lT;)e.pop();if(e.length){let n=e.pop();if(n){let a=n.index;i[a]=hS,i.push(hT)}}else i.push(pS)}else if(fH(o))if(e.length&&e[e.length-1].direction===lT){let n=e.pop();if(n){let a=n.index;i[a]=hS,i.push(hT)}}else e.push({direction:lT,index:r}),i.push(pS);else i.push(pS)}return i}function gH(t){return t.type==="terminal"?/^(\\langle |\[|\(|\\{)$/.test(t.value):!1}function mH(t){return t.type==="terminal"?/^(\\rangle |\]|\)|\\})$/.test(t.value):!1}function fH(t){return t.type==="terminal"?/^(\\\||\|)$/.test(t.value):!1}function bH(t,e){return"\\frac{"+Zp(t)+"}{"+Zp(e)+"}"}function yH(t,e,i){let r="",o="{"+Zp(e,t)+"}";return t==="9"?r+=i+"^"+o:t==="5"&&(r+="_"+o),r}function xH(t,e,i,r,o){let n="",a="{"+e+Zp(i,t)+r+"}";return t==="9"?n+=o+"^"+a:t==="5"&&(n+="_"+a),n}var wH=Zp;function vH(t,e){return e&&e.operatorNames?yS(e.operatorNames):xS(),Vg(uH(t,e),i=>wH(i,""))}var AR=` A1B'K2L@CIF/MSP"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=`,VR=10240;function CH(t){return String.fromCharCode(VR+t)}function SH(t){return t.charCodeAt(0)-VR}function EH(t){return AR[t]}function DH(t){return AR.indexOf(t)}function kH(t){let e="";for(let i of t)e+=CH(DH(i));return e}function LR(t){let e="";for(let i of t)e+=EH(SH(i));return e}function IH(t){return LR(t).replace(/[@-^]/g,e=>String.fromCharCode(e.charCodeAt(0)+32))}function TH(t){let e="";if(t)for(let i of t){let r=i.charCodeAt(0);96<=r&&r<=127&&(r-=32,i=String.fromCharCode(r)),32<=r&&r<=95&&(i=kH(i),r=i.charCodeAt(0)),10305<=r&&r<=10495&&(r=10240+(r-1024)%64,i=String.fromCharCode(r)),10240<=r&&r<=10304?e+=i:e+=String.fromCharCode(10240)}return e}function MH(t){for(let e=0;e<t.length;e++){let i=t.charCodeAt(e);if(i<10240||i>10304)return!1}return!0}function PR(t){if(!MH(t))throw new Error("EncodingError: Expected input to be six-dot unicode braille characters.")}function DT(t,e){return PR(t),Q7(hn.toBrailleAscii(t),e)}function _c(t,e){return e&&e.operatorNames?yS(e.operatorNames):xS(),Vg(n7(t),hn.coerceToSixDotCells)}function kT(t,e){return PR(t),vH(hn.toBrailleAscii(t),e)}function Fc(t,e){return e&&e.operatorNames?yS(e.operatorNames):xS(),Vg(b7(t),hn.coerceToSixDotCells)}var hn={coerceToSixDotCells:TH,toBrailleAscii:LR,toExpandedBrailleAscii:IH},GH="1.0.3";var AH=10240;function VH(t,e,i,r,o){let{dotSpacing:n}=t,a=1+n;var s=o.charCodeAt(0)-AH;s&1&&e.fillRect(i,r,1,1),s&2&&e.fillRect(i,r+a,1,1),s&4&&e.fillRect(i,r+2*a,1,1),s&8&&e.fillRect(i+a,r,1,1),s&16&&e.fillRect(i+a,r+a,1,1),s&32&&e.fillRect(i+a,r+2*a,1,1)}function CS(t,e){let{x:i,y:r,width:o,height:n}=e,a=t.getImageData(i,r,o,n).data;for(let s=3;s<a.length;s+=4)if(a[s]!==0)return!1;return!0}function LH(t,e){let{x:i,y:r,width:o,height:n}=e,a=t.getImageData(i,r,o,n).data;for(let s=3;s<a.length;s+=4)if(a[s]===0)return!1;return!0}function IT(t,e,i,r,o){return CS(e,ES(t,i,r,o))}function PH(t,e,i,r,o){let{dotSpacing:n}=t,a=3+2*n;for(var s=0;s<o.length;s++)VH(t,e,i+a*s,r,o[s])}function Nc(t,e){let{dotSpacing:i}=t;return(2+i)*e.length+(1+i)*(e.length-1)}function SS(t,e){let{dotSpacing:i}=t;return 3+2*i}function ES(t,e,i,r){let{cellPadding:o}=t;return{x:e-o,y:i-o,width:Nc(t,r)+2*o,height:SS(t,r)+2*o}}function wS(t,e){if(!t)return e;let i=Math.min(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.x+t.width,e.x+e.width)-i,n=Math.max(t.y+t.height,e.y+e.height)-r;return{x:i,y:r,width:o,height:n}}function OR(t,e,i){return Math.min(Math.max(t,e),i)}function mb(t,e,i,r,o){return{x:OR(i,0,e.canvas.width-Nc(t,o)),y:OR(r,0,e.canvas.height-SS(t,o))}}function fb(t,e,i,r,o){let n=e.fillStyle;e.fillStyle="white";let a=ES(t,i,r,o);e.fillRect(a.x,a.y,a.width,a.height),e.fillStyle="black",PH(t,e,i,r,o),e.fillStyle=n}function TT(t,e,i,r){let{cellPadding:o}=t;return{x:Math.round(e-(Nc(t,r)+o)),y:i}}function OH(t){return t.replace(/\u283C(?!$)/g,"")}function Rc(t,e){let i=e==="nemeth"?_c(t):Fc(t);return i.isError?"":OH(i.value)}function Pg(t,e){return e>=0?t*Math.pow(10,e):t/Math.pow(10,-e)}function FR(t,e,i,r){let[o,n]=i,a=Math.ceil(Math.log(n-o)/Math.LN10)-1,s=a,l=5,c=15;e:for(let u=a;a-u<4;u--)for(let g of[5,2,1]){let m=Pg(g,u),w=Math.floor(o/m)+1,C=Math.ceil(n/m)-1;var p=Math.abs(r(m)-r(0));let S=Rc(String(Pg(w*g,u)),e),k=Rc(String(Pg(C*g,u)),e);if(p<Nc(t,S)+Nc(t," ")||p<Nc(t,k)+Nc(t," ")||C-w>=c)break e;s=u,l=g}return{int:l,exp:s}}function RR(t,e,i){return FR(t,e,[i.viewport.xmin,i.viewport.xmax],r=>i.mapx(r))}function _H(t,e,i){return i.viewport.isSquare(i.screen,{xAxisScale:i.settings.xAxisScale,yAxisScale:i.settings.yAxisScale})?RR(t,e,i):FR(t,e,[i.viewport.ymin,i.viewport.ymax],r=>i.mapy(r))}function _R(t,e){let{int:i,exp:r}=t,[o,n]=e,a=Math.ceil(o/Pg(i,r)),s=Math.floor(n/Pg(i,r)),l=[];for(var c=a;c<=s;c++)l.push(Pg(c*i,r));return l}function FH(t,e,i){return{x:_R(RR(t,e,i),[i.viewport.xmin,i.viewport.xmax]),y:_R(_H(t,e,i),[i.viewport.ymin,i.viewport.ymax])}}function NR(t,e,i,r,o){if(i.margins===void 0||e===void 0)return;let n=RH(r),a=i.margins,s=__dcg_shared_module_exports__['a']({},e.settings),l=s.showGrid&&NH(r),c=!!s.showXAxis,p=!!s.showYAxis,u=!!s.xAxisNumbers,g=s.xAxisArrowMode,m=!!s.yAxisNumbers,w=s.yAxisArrowMode,C=n.graphLineWidth,S={showGrid:!1,xAxisNumbers:!1,xAxisArrowMode:"NONE",yAxisNumbers:!1,yAxisArrowMode:"NONE",showXAxis:!1,showYAxis:!1,graphLineWidth:C,pointLineWidth:2.5,curveOpacity:1,globalCurveColor:"#000",disableFill:!0};for(let O in S)e.settings[O]=S[O];let k=t.width-a.right-a.left,M=t.height-a.top-a.bottom,I=new Rl(k,M),E=e.getProjection().viewport;e.settings.squareAxes&&(E=E.squareCrop(I,e.settings));let T=new Rs(I,E,e.settings),A=t.getContext("2d"),G=document.createElement("canvas");G.width=k,G.height=M;let _=G.getContext("2d"),P=document.createElement("canvas");P.width=k,P.height=M;let N=P.getContext("2d"),W=document.createElement("canvas");W.width=k,W.height=M;let X=W.getContext("2d"),q=document.createElement("canvas");q.width=k,q.height=M;let B=q.getContext("2d"),J=document.createElement("canvas");J.width=k,J.height=M;let f=J.getContext("2d");if(A!==null&&B!==null&&_!==null&&X!==null&&f!==null&&N!==null){e.settings.disableFill=!0,e.screenshotToCanvas(q,{width:k,height:M,targetPixelRatio:1,transparentBackground:!0}),e.settings.disableFill=!1,e.screenshotToCanvas(G,{width:k,height:M,targetPixelRatio:1,transparentBackground:!0}),A.fillStyle="white",A.fillRect(0,0,t.width,t.height);let O=Math.round(T.mapx(0)),R=Math.round(T.mapy(0)),re=s.xAxisLabel!==""?s.xAxisLabel.replace(/ /g,"\\ "):"x",ie=s.yAxisLabel!==""?s.yAxisLabel.replace(/ /g,"\\ "):"y",ve=1;if(c&&T.coordsAreOnscreen(k-6,R-8,0)){let Z=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},n),{cellPadding:n.cellPadding+ve}),Q=2+2*SS(Z,re),fe=k-2,ye=R-Q,Re=Rc(re,o);({x:fe,y:ye}=TT(Z,fe,ye,Re)),{x:fe,y:ye}=mb(Z,_,fe,ye,Re),fb(Z,f,fe,ye,Re)}if(p&&T.coordsAreOnscreen(O+4,1,0)){let Z=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},n),{cellPadding:n.cellPadding+ve}),Q=O+4,fe=1,ye=Rc(ie,o);({x:Q,y:fe}=mb(Z,_,Q,fe,ye)),fb(Z,f,Q,fe,ye)}let{x:ae,y:oe}=FH(n,o,T);if(c){let Z;for(let Q of ae){if(Q===0&&p)continue;let fe=Math.round(T.mapx(Q));if(!(fe<2||fe>T.screen.width-2)&&u){let ye=Nc(n,Rc("-1",o))-Nc(n,Rc("1",o)),Re=Q<0?ye+1:1,Ke=fe-Re,Ye=R+4,_t=Rc(""+Q,o);({x:Ke,y:Ye}=mb(n,f,Ke,Ye,_t)),IT(n,B,Ke,Ye,_t)&&(fb(n,f,Ke,Ye,_t),Z=wS(Z,ES(n,Ke,Ye,_t)))}}n.embossPatternInequalities&&Z&&(Z=wS(Z,{x:0,y:R,width:k,height:0}),X.fillStyle="white",X.fillRect(Z.x,Z.y,Z.width,Z.height))}if(p){let Z;for(let Q of oe){if(Q===0&&c)continue;let fe=Math.round(T.mapy(Q));if(fe<2||fe>T.screen.height-2)continue;let ye=-Math.ceil(SS(n," ")/2);if(m){let Re=O-4,Ke=fe+ye,Ye=Rc(""+Q,o);({x:Re,y:Ke}=TT(n,Re,Ke,Ye)),{x:Re,y:Ke}=mb(n,f,Re,Ke,Ye),IT(n,B,Re,Ke,Ye)&&(fb(n,f,Re,Ke,Ye),Z=wS(Z,ES(n,Re,Ke,Ye)))}}n.embossPatternInequalities&&Z&&(Z=wS(Z,{x:O,y:0,width:0,height:M}),X.fillStyle="white",X.fillRect(Z.x,Z.y,Z.width,Z.height))}if(c&&p){let Z=O-2,Q=R+2,fe=Rc(u||m?"0":"o",o);({x:Z,y:Q}=TT(n,Z,Q,fe)),T.coordsAreOnscreen(Z,Q,0)&&({x:Z,y:Q}=mb(n,f,Z,Q,fe),IT(n,B,Z,Q,fe)&&fb(n,f,Z,Q,fe))}for(let Z of ae){let Q=Math.round(T.mapx(Z));Q<2||Q>T.screen.width-2||p&&Z===0||l&&bb(X,"white",Q-1,0,M,3)}for(let Z of oe){let Q=Math.round(T.mapy(Z));Q<2||Q>T.screen.height-2||c&&Z===0||l&&yb(X,"white",Q-1,0,k,3)}c&&yb(X,"white",R-3,0,k,7),p&&bb(X,"white",O-3,0,M,7);for(let Z of ae){let Q=Math.round(T.mapx(Z));Q<2||Q>T.screen.width-2||p&&Z===0||(l?bb(X,vS(r),Q,0,M):c&&bb(X,vS(r),Q,R-3,R+2))}for(let Z of oe){let Q=Math.round(T.mapy(Z));Q<2||Q>T.screen.height-2||c&&Z===0||(l?yb(X,vS(r),Q,0,k):p&&yb(X,vS(r),Q,O-3,O+2))}if(c&&yb(X,Lg(r),R,0,k),p&&bb(X,Lg(r),O,0,M),w!=="NONE"&&(zH(X,Lg(r),O,0),w==="BOTH"&&qH(X,Lg(r),O,M-1)),g!=="NONE"&&(BH(X,Lg(r),k-1,R),g==="BOTH"&&KH(X,Lg(r),0,R)),n.embossPatternInequalities)for(let Z=0;Z<k;Z+=6)for(let Q=0;Q<M;Q+=6){let fe={x:Z,y:Q,width:3,height:3};LH(_,fe)&&CS(X,fe)&&CS(B,fe)&&CS(f,fe)&&UH(N,"black",Z,Q)}n.embossPatternInequalities||A.drawImage(G,a.left,a.top),A.drawImage(W,a.left,a.top),A.drawImage(q,a.left,a.top),A.drawImage(J,a.left,a.top),n.embossPatternInequalities&&A.drawImage(P,a.left,a.top)}for(let O in S)e.settings[O]=s[O]}function RH(t){if(t==="etc8"||t==="etc11")return{dotSpacing:0,cellPadding:1,graphLineWidth:1.75,embossPatternInequalities:!0};if(t==="vpmax8"||t==="vpmax11")return{dotSpacing:1,cellPadding:2,graphLineWidth:1,embossPatternInequalities:!1};{let e=t;throw new Error(`Unexpected embosser model ${e}`)}}function NH(t){if(t==="etc8"||t==="etc11")return!1;if(t==="vpmax8"||t==="vpmax11")return!0;{let e=t;throw new Error(`Unexpected embosser model ${e}`)}}function Lg(t){switch(t){case"vpmax8":case"vpmax11":return"rgb(145, 145, 145)";case"etc8":case"etc11":return"rgb(0, 0, 0)";default:let e=t;throw new Error("Unexpected embosser model: "+e)}}function vS(t){switch(t){case"vpmax8":case"vpmax11":return"rgb(219, 219, 219)";case"etc8":case"etc11":return"rgb(0, 0, 0)";default:let e=t;throw new Error("Unexpected embosser model: "+e)}}function bb(t,e,i,r,o,n=1){let a=t.fillStyle;t.fillStyle=e,t.fillRect(i-1,r,n,o-r),t.fillStyle=a}function yb(t,e,i,r,o,n=1){let a=t.fillStyle;t.fillStyle=e,t.fillRect(r,i-1,o-r,n),t.fillStyle=a}function BH(t,e,i,r){let o=t.fillStyle;t.fillStyle=e;for(var n=-2;n<=2;n++)t.fillRect(i-Math.abs(n),r-1+n,1,1);t.fillStyle=o}function KH(t,e,i,r){let o=t.fillStyle;t.fillStyle=e;for(var n=-2;n<=2;n++)t.fillRect(i+Math.abs(n),r-1+n,1,1);t.fillStyle=o}function qH(t,e,i,r){let o=t.fillStyle;t.fillStyle=e;for(var n=-2;n<=2;n++)t.fillRect(i-1+n,r-Math.abs(n),1,1);t.fillStyle=o}function zH(t,e,i,r){let o=t.fillStyle;t.fillStyle=e;for(var n=-2;n<=2;n++)t.fillRect(i-1+n,r+Math.abs(n),1,1);t.fillStyle=o}function UH(t,e,i,r){let o=t.fillStyle;t.fillStyle=e,t.fillRect(i+1,r,1,1),t.fillRect(i,r+1,1,1),t.fillRect(i+1,r+1,1,1),t.fillRect(i+2,r+1,1,1),t.fillRect(i+1,r+2,1,1),t.fillStyle=o}var Og={};Og.vpmax8={width:170,height:220,margins:{left:5,top:15,right:5,bottom:50},name:t=>t.s("graphing-calculator-label-braille-size-vpmax8")};Og.vpmax11={width:230,height:220,margins:{left:15,top:15,right:5,bottom:5},name:t=>t.s("graphing-calculator-label-braille-size-vpmax11")};Og.etc8={width:96,height:96,margins:{left:5,top:15,right:0,bottom:0},name:t=>t.s("graphing-calculator-label-braille-size-etc8")};Og.etc11={width:132,height:134,margins:{left:10,top:15,right:5,bottom:5},name:t=>t.s("graphing-calculator-label-braille-size-etc11")};var xb=class{constructor(e){this.grapher=e,this.controller=this.grapher.controller,this.renderedTabTargetOrder=[],this.renderedTabTargets={}}redrawToCtx(e,i,r){let{ctx:o,projection:n}=e;this.renderedTabTargets={},this.renderedTabTargetOrder=[],dn(o,"background-images"),(r===void 0||r.length<__dcg_shared_module_exports__['Ga'](i))&&(r=__dcg_shared_module_exports__['Oa'](i));for(let s of r){let l=i[s];l&&l.shouldGraph&&!l.foreground&&eC(e,l,this.grapher.clickableObjectsLayer,{currentKeyboardAttention:this.controller.get2dPOIController().keyboardAttentionManager.getKeyboardAttention(),cacheRenderedSvgs:this.controller.getGraphSettings().config.cacheRenderedSvgs});var a=this.controller.getItemModel(s);if(a&&a.type==="image"&&a.shouldGraph&&vs(a)){let c=a.formula.dimensions;if(!c||!c.x||!c.y||!c.width||!c.height||!c.radianAngle)continue;for(let p=0;p<c.x.length;p++)if(isFinite(c.x[p])&&isFinite(c.y[p])&&isFinite(c.width[p])&&isFinite(c.height[p])&&isFinite(c.radianAngle[p])){this.renderedTabTargetOrder.push(s),this.renderedTabTargets[s]={id:s,description:this.getComputedDescription(a,p),x:c.x[p],y:c.y[p],radianAngle:c.radianAngle[p],width:c.width[p],height:c.height[p],widthScale:Math.abs(n.mapx(1)-n.mapx(0)),heightScale:Math.abs(n.mapy(1)-n.mapy(0)),screenX:n.mapx(c.x[p]),screenY:n.mapy(c.y[p]),centerId:a.formula.center_reference_id,selected:Sn(a)};break}}}pn(o),this.speakAriaAlert()}getOrderedTabTargets(){return this.getTabIndex()===-1?[]:this.renderedTabTargetOrder.map(e=>{var r;let i=this.renderedTabTargets[e];return{calcId:i.id,listIndex:void 0,polygonEdge:void 0,description:this.controller.isGeometry()||(r=this.getAriaAlert({id:i.id,includeUsageInstructions:!0}))==null?void 0:r.completeMessage}})}getStyle(e){var i=this.renderedTabTargets[e];if(!i)return;let{screenX:r,screenY:o,radianAngle:n,width:a,height:s,widthScale:l,heightScale:c}=i,p=c/l,u=a*l,g=s*c/p,m=r-u/2,w=o-g/2;var C=`translate(${m}px, ${w}px)`,S=n?` rotate(${n}rad)`:"",k=p===1?"":` scale(1,${p})`;return{position:"absolute",top:0,left:0,transform:C+k+S,width:u+"px",height:g+"px"}}getTabIndex(){if(this.controller.getActiveTool()!=="selection")return-1;var e=this.grapher.settings;return e.config.graphpaper&&e.config.enableTabindex?0:-1}getAriaHidden(){var e=this.grapher.settings;return!e.config.graphpaper}getComputedDescription(e,i){let r=e.formula&&e.formula.computed_description&&e.formula.computed_description[i];return r&&r!==""?Xo(r):this.grapher.getAudioTrace().getExpressionAriaLabel(e.id)}getAriaLabel(e){var i=this.getAriaAlert({id:e,includeUsageInstructions:!1});return i&&i.completeMessage}speakAriaAlert(){if(this.controller.isGeometry())return;let e=this.getFocusedImage();if(!e){this.lastAriaAlert=void 0;return}let i=e.id,r=this.getAriaAlert({id:i,lastAriaAlert:this.lastAriaAlert,includeUsageInstructions:!0});this.lastAriaAlert=r,r&&r.completeMessage&&le(r.completeMessage)}getAriaAlert(e){let{id:i,lastAriaAlert:r,includeUsageInstructions:o}=e;if(i){var n=this.controller.getItemModel(i);if(!(!n||n.type!=="image")){var a=this.renderedTabTargets[i];if(a){r&&r.id!==i&&(r=void 0);var s=r==null?void 0:r.label,l=a.description,c=s!==l,p=!!(r!=null&&r.selected),u=a.selected,g=p!==u,m=r&&r.coordX,w=r&&r.coordY,C=a.x,S=a.y,k=C!==m||S!==w,M=this.grapher.getProjection(),I=vi(this.controller,C),E=Ci(this.controller,S),T=`${I} ${E}`,A=l,G=o?this.controller.s("graphing-calculator-narration-movable-point-suffix-usage-instructions"):"",_=this.isImageFullyVisible(n,M)?"":this.controller.s("graphing-calculator-narration-draggable-image-off-screen-prompt"),P;return r?c||!k&&g?P=A+_:k?P=T+_:P="":P=this.controller.s("graphing-calculator-narration-item-at-coordinates",{itemDescription:A,x:I,y:E})+G+_,{id:i,coordX:C,coordY:S,label:l,completeMessage:P}}}}}getFocusedImage(){let e=this.grapher.poiController.keyboardAttentionManager.getKeyboardAttention();return e?this.renderedTabTargets[e.calcId]:void 0}speakImageAttribute(e,i){if(e){var r=this.grapher.getAudioTrace();if(r){var o=this.grapher.getProjection();if(o)switch(i){case"X":le(vi(this.controller,e.x));break;case"Y":le(Ci(this.controller,e.y));break;case"L":le(e.description);break}}}}hasNonlinearMoveStrategy(e){if(!e)return!1;var i=this.controller.getItemModel(e);if(!i||i.type!=="expression"||!i.formula)return!1;var r=i.formula.move_strategy;return!r||!r[0]?!1:r[0].type==="updateSliderNonlinear"}isImageFullyVisible(e,i){let r=e.formula.dimensions;if(!r||!r.x||!r.y)return!1;for(let o=0;o<r.x.length;o++)if(!i.coordsAreOnscreen(i.mapx(r.x[o]),i.mapy(r.y[o])))return!1;return!0}};function WH(t,e){return`${t}_dcg_delim_${e}`}var wb=class{constructor(e){this.hoveredObjects={},this.grapher=e,this.controller=this.grapher.controller,this.renderedTabTargetOrder=[],this.renderedTabTargets={}}getOrderedTabTargets(){return this.renderedTabTargetOrder.map(e=>{let i=this.renderedTabTargets[e];return{calcId:i.id,listIndex:i.listIndex,polygonEdge:void 0,description:i.description}})}redraw(){this.renderedTabTargets={},this.renderedTabTargetOrder=[];let e=this.grapher.getSketchOrder();for(let i of e){let r=this.controller.getItemModel(i);if(!r)continue;let o=this.grapher.getGraphSketch(i),n=this.grapher.getGraphImage(i);if(o&&r.type==="expression"&&Hn(r))for(let a=0;a<o.branches.length;a++){let s=o.branches[a];if(!s.segments||s.segments.length===0)continue;let l=0;s.graphMode===3||s.graphMode===4?o.getBranchPOI(a).forEach(c=>{l=c.pointIdxOnBranch||0,isFinite(c.x)&&isFinite(c.y)&&this.addTabTarget(r,l)}):(l="listIndex"in s&&s.listIndex!==void 0?s.listIndex:0,s.segments.length>0&&this.addTabTarget(r,l))}else if(n&&n.shouldGraph&&r.type==="image"&&Dp(r)){let a=r.formula&&r.formula.dimensions;if(!a||!a.x||!a.y||!a.width||!a.height||!a.radianAngle)continue;for(let s=0;s<a.x.length;s++)isFinite(a.x[s])&&isFinite(a.y[s])&&isFinite(a.width[s])&&isFinite(a.height[s])&&isFinite(a.radianAngle[s])&&this.addTabTarget(r,s)}}Object.keys(this.hoveredObjects).length||this.pressedObject?this.grapher.setLayerClass("clickableObjects","dcg-mouse-over-clickable-object"):this.grapher.setLayerClass("clickableObjects",void 0)}addTabTarget(e,i){let r=WH(e.id,i);this.renderedTabTargetOrder.indexOf(r)!==-1||this.renderedTabTargets[r]!==void 0||(this.renderedTabTargetOrder.push(r),this.renderedTabTargets[r]={type:e.type,id:e.id,listIndex:i,description:this.getComputedDescription(e,i)})}getTabIndex(e){if(this.controller.getActiveTool()!=="selection"||!this.renderedTabTargets[e])return-1;let r=this.grapher.settings;return!r.config.graphpaper||!r.config.enableTabindex?-1:0}getAriaHidden(){return!this.grapher.settings.config.graphpaper}getCachedDescription(e){return this.renderedTabTargets[e].description}getComputedDescription(e,i){let r=e.formula&&e.formula.computed_description&&e.formula.computed_description[i];return r&&r!==""?Xo(r):this.grapher.getAudioTrace().getExpressionAriaLabel(e.id)}getModelId(e){let i=this.renderedTabTargets[e];return i?i.id:""}getListIndex(e){let i=this.renderedTabTargets[e];if(i)return i.listIndex}isKeyboardFocused(e,i){if(!e)return!1;let r=this.grapher.poiController.keyboardAttentionManager.getKeyboardAttention(),o=r==null?void 0:r.calcId;return e===o&&(i===void 0||i===(r==null?void 0:r.listIndex))}shouldDrawHovered(e,i,r){if(!i)return!1;if(this.isKeyboardFocused(i,r))return!0;let{translationPreviewVectorParents:o,rotationPreviewAngleMarkerParents:n}=e.transformationPreviewParentData;if(o.has(i)||n.has(i)&&!this.controller.isToolPreviewItem(i))return!0;if(this.isAnObjectPressed()&&!this.isObjectPressed(i))return!1;let a=this.getHoveredObjectById(i);return a?a.listIndexes===void 0||r===void 0?!0:!!a.listIndexes[r]:!1}setHoveredObjects(e){__dcg_shared_module_exports__['Ra'](e,this.hoveredObjects)||(this.hoveredObjects=e,this.requestRedrawNextFrame())}getHoveredObjects(){let e=this.grapher.poiController.keyboardAttentionManager.getKeyboardAttention();if(e){let i=__dcg_shared_module_exports__['l'](this.hoveredObjects),r=i[e.calcId],o=e.listIndex||0;return r?r.listIndexes?r.listIndexes[o]=!0:r.listIndexes={[o]:!0}:(r={listIndexes:{[o]:!0}},i[e.calcId]=r),i}else return this.hoveredObjects}getHoveredObjectById(e){return this.getHoveredObjects()[e]}shouldDrawPressed(e,i){if(!e)return!1;let r=this.pressedObject;return!r||r.id!==e?!1:i===void 0?!0:r.listIndex===i}isObjectPressed(e){return e===void 0?!1:!!(this.pressedObject&&this.pressedObject.id===e)}setPressedObject(e){!e&&!this.pressedObject||e&&this.pressedObject&&e.id===this.pressedObject.id&&e.listIndex===this.pressedObject.listIndex||(this.pressedObject=e,this.requestRedrawNextFrame())}getPressedObject(){return this.pressedObject}isAnObjectPressed(){return!!this.pressedObject}requestRedrawNextFrame(){this.controller.requestRedrawGraph()}shouldDrawGhosted(e){if(!e)return!1;let i=this.controller.getItemModel(e);return!i||i.type!=="expression"?!1:Dn(i)}};ad();var Ks=class extends ni{generateDefaultName(){return"does not matter"}};var BR="graphing-calculator-text-geometry-tool-rotation-hint-center",$H="graphing-calculator-text-geometry-tool-rotation-hint-angle",jH="graphing-calculator-text-geometry-tool-rotation-hint-angle-start",YH="graphing-calculator-text-geometry-tool-rotation-hint-angle-vertex",JH="graphing-calculator-text-geometry-tool-rotation-hint-angle-end",iu=class extends Ks{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-rotate-display-name",this.toolName="rotation",this.toolType="transformation"}getMode(){let{idMap:i}=this.model.getNonObjectsState().ui.currentTool;return i["2-number"]?"number":"directed-angle"}getExpressionEditHint(i){return i===0?this.s(BR):this.s($H)}onNumberInput(i){super.onNumberInput(i),this.clearTentativeOutputs()}onMove(i){return this.getMode()==="number"&&this.model.getNonObjectsState().ui.currentTool.inputIndex===1?!1:super.onMove(i)}getSpecIdToLockIn(i,r){if(r===1){let o=i.inputs[r];return this.getMode()==="number"?`${o.id}-number`:o.id}return super.getSpecIdToLockIn(i,r)}isDegenerateInput(i){let{inputIndex:r,idMap:o}=this.model.getNonObjectsState().ui.currentTool;return this.getMode()==="directed-angle"&&r>0&&o[1]===i?o[1]===o[3]&&r===3:super.isDegenerateInput(i)}getPartialAnglePreviewInfo(){let{inputIndex:i,idMap:r}=this.model.getNonObjectsState().ui.currentTool;if(i>0){let o=this.model.findDefsForInputId(r[1])[0];if(!o)return;let n=[o.typedRuntimeValue],a=this.model.findDefsForInputId(r[2])[0],s=this.model.findDefsForInputId(r[3])[0];if(a&&s&&n.push(a.typedRuntimeValue,s.typedRuntimeValue),o)return{id:r["angle-output"],type:"rotation-with-incomplete-angle",args:n}}}getSpec(){let i={inputs:[{type:"point",id:"1",hint:BR},{type:"union",valueTypes:[__dcg_shared_module_exports__['s'],__dcg_shared_module_exports__['O']],id:"2",hint:jH,numberInputInfo:{defaultLatex:"",sliderInfo:{value:this.model.controller.isDegreeMode()?"90":"1.57079632679",min:"0",max:this.model.controller.isDegreeMode()?"360":"2\\pi"}}}],outputs:[]},r={id:"number-output",type:"rotate",hidden:this.getMode()!=="number",name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2-number"}]};if(this.getMode()==="directed-angle"){let{idMap:o,inputIndex:n}=this.model.getNonObjectsState().ui.currentTool;n>1&&delete i.inputs[1].numberInputInfo;let a=o[2],s=!1,l=a&&this.model.findDefsForInputId(a)[0];s=!!(l&&l.typedRuntimeValue.valueType==__dcg_shared_module_exports__['s']),s?(i.inputs.push({type:"point",id:"3",hint:YH},{type:"point",id:"4",hint:JH}),i.outputs.push({id:"directed-angle",type:"directedangle",hidden:!1,showAngleLabel:!1,parents:[{type:"reference-input",id:"2"},{type:"reference-input",id:"3"},{type:"reference-input",id:"4"}]},{id:"angle-output",type:"rotate",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"directed-angle"}]})):i.outputs.push({id:"angle-output",type:"rotate",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]})}else i.outputs.push(r);return i}};var XH=vn().reflectionArc,QH=14,KR=2.5,ZH=40,e9=15,t9=.75,i9=1;function qd(t){return t.valueType===__dcg_shared_module_exports__['s']?t.value:t.valueType===__dcg_shared_module_exports__['w']?t.value[0]:void 0}function r9(t){return t.valueType===__dcg_shared_module_exports__['S']?t.value:t.valueType===__dcg_shared_module_exports__['T']?t.value[0]:void 0}function o9(t){return t.valueType===__dcg_shared_module_exports__['I']||t.valueType===__dcg_shared_module_exports__['K']||t.valueType===__dcg_shared_module_exports__['C']||t.valueType===__dcg_shared_module_exports__['S']?{segment:t.valueType===__dcg_shared_module_exports__['C'],value:t.value}:t.valueType===__dcg_shared_module_exports__['J']||t.valueType===__dcg_shared_module_exports__['L']||t.valueType===__dcg_shared_module_exports__['D']||t.valueType===__dcg_shared_module_exports__['T']?{segment:t.valueType===__dcg_shared_module_exports__['D'],value:t.value[0]}:void 0}function qR(t){return t.valueType===__dcg_shared_module_exports__['r']?t.value:t.valueType===__dcg_shared_module_exports__['u']?t.value[0]:void 0}function zR(t){return t.valueType===__dcg_shared_module_exports__['O']?t.value:t.valueType===__dcg_shared_module_exports__['P']?t.value[0]:void 0}var DS=class{constructor(e){this.controller=e.controller}getTransformationPreviewInfoFromItem(e,i){var n;if(e.type!=="expression"||e.hidden)return;let{translationsWithVisibleVectorParent:r}=i.transformationPreviewParentData;if(r.has(e.id))return;let o=(n=e.formula.geometry)==null?void 0:n.transformation_preview_info;if(o)return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},o),{id:e.id})}getInprogressTransformation(e){let i=this.controller.getAllToolPreviewItems();for(let o of i){let n=this.getTransformationPreviewInfoFromItem(o,e);if(n)return n}let r=this.controller.getGeoModel().getCurrentTool();if(r instanceof iu)return r.getPartialAnglePreviewInfo()}getHoveredOrSelectedTransformations(e){let i=this.controller.getAllSelectedItems(),r=this.controller.getHoveredOrFocusedTokenIdentifier(),o=r?this.controller.getItemsByIdentifier(r)[0]:void 0;o&&!i.some(a=>a.id===o.id)&&i.push(o);let n=[];return i.forEach(a=>{if(a.type!=="expression")return;let s=this.getTransformationPreviewInfoFromItem(a,e);s&&n.push(s)}),n}drawTranslationPreview(e,i,r,o){let n=i.mapx(r[0]),a=i.mapy(r[1]),s=i.mapx(o[0]),l=i.mapy(o[1]);e.save(),e.beginPath(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=5,e.moveTo(n,a),e.lineTo(s,l),As(e,n,a,s,l,20),e.stroke(),e.restore()}drawReflectionPreview(e,i,r){let o=r.value,n=r.segment,[a,s,l,c]=Np([o[0][0],o[0][1],o[1][0],o[1][1]],i,18).clipped,p=(a+l)/2,u=(s+c)/2;if(n){let[M,I,E,T]=Np([o[0][0],o[0][1],o[1][0],o[1][1]],i,17).clipped;p=(M+E)/2,u=(I+T)/2}if(isNaN(p)&&isNaN(u))return;let g=40,m=g/__dcg_shared_module_exports__['la'](a-l,s-c),w=p+(c-s)*m,C=u-(l-a)*m,S=p-(c-s)*m,k=u+(l-a)*m;if(e.save(),e.beginPath(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=4,e.moveTo(a,s),e.lineTo(l,c),XH){let M=Math.atan2(C-u,w-p),I=g,E=g*.7;e.moveTo(w,C),e.ellipse(p,u,I,E,M,0,Math.PI,!1);let T=.35,A=M+Math.PI/2+T,G=M+Math.PI/2-T;As(e,w+Math.cos(A),C+Math.sin(A),w,C,10),As(e,S+Math.cos(G),k+Math.sin(G),S,k,10)}else e.moveTo(w,C),e.lineTo(S,k),As(e,p,u,w,C,10),As(e,p,u,S,k,10);e.stroke(),e.restore()}drawDilationPreview(e,i,r,o){e.save(),e.beginPath(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=3;let n=o<.6||o>1.4&&o<2?6:10,a=i.pixelsToMath.mapX(25)-i.pixelsToMath.mapX(0);[[a,0],[0,a],[-a,0],[0,-a]].forEach(s=>{let l=[r[0]+s[0],r[1]+s[1]],c=__dcg_shared_module_exports__['Sb'](__dcg_shared_module_exports__['Pb'](r,o),l),[p,u]=i.map_xy_pairs(l),[g,m]=i.map_xy_pairs(c);e.moveTo(p,u),e.lineTo(g,m),As(e,p,u,g,m,n)}),e.stroke(),e.restore()}drawRotationPreview(e,i,r,o,n,a){if(this.drawRotationCenterPreview(e,i,r),!(n===void 0||!isFinite(n))){if(a!==void 0&&a!==0&&isFinite(a)){if(o&&o[0]===r[0]&&o[1]===r[1])return;this.drawFullRotationAngle(e,i,r,n,a,!1)}else if(o){this.drawPlaceholderRotationAngle(e,i,o,n);return}}}drawFullRotationAngle(e,i,r,o,n,a){e.save(),e.beginPath(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=KR;let s=ZH,l=-o,c=-n,p,u;if(a){let k=Np([r[0],r[1],r[0]+Math.cos(o),r[1]+Math.sin(o)],i,19).clipped;p=k[0],u=k[1];let M=Np([r[0],r[1],r[0]+Math.cos(o+n),r[1]+Math.sin(o+n)],i,19).clipped;e.moveTo(p,u),e.lineTo(k[2],k[3]),e.moveTo(p,u),e.lineTo(M[2],M[3]);let I=s*Math.abs(c),E=.5*(1-t9)*I,T=Math.min(E,e9),A=(c>0?1:-1)*T/s;l+=A,c-=2*A}else[p,u]=i.map_xy_pairs(r);let g=c<=0,m=p+s*Math.cos(l),w=u+s*Math.sin(l),C=p+s*Math.cos(l+c),S=u+s*Math.sin(l+c);e.moveTo(m,w),e.arc(p,u,s,l,l+c,g),eI(e,C,S,l,c,10,s),e.stroke(),e.restore()}drawPlaceholderRotationAngle(e,i,r,o){e.save(),e.beginPath(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=i9;let n=-o,[a,s]=i.map_xy_pairs(r);e.moveTo(a,s);let l=1.5*Dd(0,i);e.lineTo(a+l*Math.cos(n),s+l*Math.sin(n)),e.stroke(),e.restore()}drawRotationCenterPreview(e,i,r){let[o,n]=i.map_xy_pairs(r);e.save(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=KR,e.beginPath(),e.arc(o,n,QH,0,2*Math.PI),e.stroke(),e.restore()}redrawToCtx(e){let{ctx:i,projection:r}=e,o=this.getInprogressTransformation(e),n=this.getHoveredOrSelectedTransformations(e);o&&n.push(o);for(let a=0;a<n.length;a++){let s=n[a],l=s.args;switch(s.type){case"translate":if(l.length===2){let c=qd(l[0]),p=qd(l[1]);c&&p&&this.drawTranslationPreview(i,r,c,p)}else if(l.length===1){let c=r9(l[0]);if(c){let[p,u]=Ac(c);this.drawTranslationPreview(i,r,p,u)}}break;case"reflect":{let c=o9(l[0]);c&&this.drawReflectionPreview(i,r,c)}break;case"dilate":{let c=qd(l[0]),p=qR(l[1]);c&&p!==void 0&&isFinite(p)&&p!==1&&this.drawDilationPreview(i,r,c,p)}break;case"rotate":{let c=qd(l[0]);if(!c)return;let p=qR(l[1]),u=zR(l[1]),g,m;if(p!==void 0)m=this.controller.isDegreeMode()?p*Math.PI/180:p,g=0;else if(u)g=u[1],m=u[2],e.transformationPreviewParentData.rotationsWithVisibleAndCenteredAngle.has(s.id)&&(m=void 0);else return;this.drawRotationPreview(i,r,c,u?u[0]:void 0,g,m)}break;case"rotation-with-incomplete-angle":{let c=qd(l[0]);if(!c)return;let p,u;if(l.length>=3){let g=qd(l[1]);if(p=qd(l[2]),!c||!g||!p)return;let m=g[0]-p[0],w=g[1]-p[1];u=Math.atan2(w,m)}this.drawRotationPreview(i,r,c,p,u,void 0)}}}}};function UR(t){var c,p,u,g,m,w,C,S,k,M;let e=new Set,i=new Set,r=new Set,o=new Set,n={},a={};for(let I of[...t.getAllItemModels(),...t.getAllToolPreviewItems()]){if(I.type!=="expression"||Dn(I))continue;let E=I.formula.typed_constant_value;if(!E)continue;if(__dcg_shared_module_exports__['fa'](E.valueType,__dcg_shared_module_exports__['S'])){let A=(c=Er(I))==null?void 0:c.identifier;A&&(n[A]=I.id)}let T=zR(E);if(T){let A=(p=Er(I))==null?void 0:p.identifier;A&&(a[A]={id:I.id,value:T})}}let s=t.getHoveredOrFocusedTokenIdentifier(),l=[...t.getAllItemModels().filter(I=>{var E;if(t.isItemSelected(I.id))return!0;if(I.type==="expression"&&s){let T=(E=Er(I))==null?void 0:E.identifier;return s===T}return!1}),...t.getAllToolPreviewItems()];for(let I of l){if(I.type!=="expression")continue;let E=I.formula.geometry,T=E==null?void 0:E.transformation_preview_info;if(((u=E==null?void 0:E.call)==null?void 0:u.symbol)==="translate"&&(T==null?void 0:T.args.length)===1&&__dcg_shared_module_exports__['fa'](T.args[0].valueType,__dcg_shared_module_exports__['S'])){let A=(w=(m=(g=I.formula.geometry)==null?void 0:g.call)==null?void 0:m.parents)==null?void 0:w[0];if(!A)continue;let G=n[A[0]];G&&(e.add(I.id),i.add(G))}if(((C=E==null?void 0:E.call)==null?void 0:C.symbol)==="rotate"&&(T!=null&&T.args)&&(T==null?void 0:T.args.length)>1&&__dcg_shared_module_exports__['fa'](T.args[1].valueType,__dcg_shared_module_exports__['O'])){let A=(M=(k=(S=I.formula.geometry)==null?void 0:S.call)==null?void 0:k.parents)==null?void 0:M[1];if(!A)continue;let G=a[A[0]];if(!G)continue;o.add(G.id);let _=qd(T.args[0]);if(!_)continue;G.value[0][0]===_[0]&&G.value[0][1]===_[1]&&r.add(I.id)}}return{translationsWithVisibleVectorParent:e,translationPreviewVectorParents:i,rotationsWithVisibleAndCenteredAngle:r,rotationPreviewAngleMarkerParents:o}}var{floor:ru,ceil:ou,round:n9,log10:kS,log2:HR,abs:zd}=Math,MS=class{redrawToCtx(e,i){let{ctx:r,projection:o}=e;dn(r,"graphpaper");let n=o.settings.showGrid&&!o.settings.threeDMode;if(o.settings.polarMode&&n){let a=r_(o);dn(r,"grid"),this.drawPolarGrid(r,o,a),pn(r),dn(r,"axis"),this.drawAxes(r,o,i);let s=this.drawPolarStepNumbers(r,o,a);this.drawLabels(r,o,s),pn(r)}else{let a=kd(o),s=MT(o);n&&(dn(r,"grid"),this.drawCartesianGrid(r,o,a,s),pn(r));let l=!n&&!o.settings.threeDMode;dn(r,"axis"),o.settings.threeDMode||this.drawAxes(r,o,i);let c=this.drawCartesianStepNumbers(r,o,a,l,s);this.drawLabels(r,o,c),pn(r)}pn(r)}addTextShadow(e,i){let{threeDMode:r,showPlane3D:o}=i.settings;e.strokeStyle=i.settings.getBackgroundColor({invertWhite:r}),e.lineWidth=3,r&&(!o||i.settings.invertedColors)&&(e.lineWidth=1.5),e.miterLimit=2}drawPolarGrid(e,i,r){e.save();let o=i.settings.minorAxisOpacity,a=1-(1-i.settings.majorAxisOpacity)/(1-o),s=__dcg_shared_module_exports__['sa'](i.mapx(0)),l=__dcg_shared_module_exports__['sa'](i.mapy(0)),c=i.screen.height/(i.viewport.ymax-i.viewport.ymin),p=i.screen.width/(i.viewport.xmax-i.viewport.xmin),u=c/p,g=p/c,m=l/u,w=i.viewport.smallestR(),C=i.viewport.largestR(),S=r.minorStepR*Math.max(1,Math.floor(w/r.minorStepR)),k=r.majorStepR*Math.max(1,Math.floor(w/r.majorStepR));e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+o+")";for(let I of qs(S,C,r.minorStepR)){ji(e,"dcg-svg-minor-gridline"),e.beginPath(),_i(e),e.scale(1,u);let E=i.mapx(I)-s;e.moveTo(s+E,m),e.arc(s,m,E,0,2*Math.PI),e.scale(1,g),e.stroke()}let M=w>0?5:15;for(let I of qs(0,359,M)){if((I===0||I===180)&&i.settings.showXAxis||(I===90||I===270)&&i.settings.showYAxis)continue;ji(e,"dcg-svg-minor-gridline"),e.beginPath(),_i(e),e.moveTo(s,l);let E=i.mapx(C*Math.cos(I*Math.PI/180)),T=i.mapy(C*Math.sin(I*Math.PI/180));e.lineTo(__dcg_shared_module_exports__['sa'](E),__dcg_shared_module_exports__['sa'](T)),e.stroke()}e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+a+")";for(let I of qs(k,C,r.majorStepR)){ji(e,"dcg-svg-major-gridline"),e.beginPath(),_i(e),e.scale(1,u);let E=i.mapx(I)-s;e.moveTo(s+E,m),e.arc(s,m,E,0,2*Math.PI),e.scale(1,g),e.stroke()}e.restore()}drawCartesianGrid(e,i,r,o=MT(i)){e.save();let{xmin:n,xmax:a,ymin:s,ymax:l}=i.viewport,c=i.screen.width,p=i.screen.height,u=p,g=0;i.settings.restrictGridToFirstQuadrant&&(n=0,s=0,u=i.mapy(0),g=i.mapx(0));let m=i.settings.minorAxisOpacity*o.x.unitOpacity,w=i.settings.minorAxisOpacity*o.y.unitOpacity,C=i.settings.majorAxisOpacity;e.lineWidth=1;let S=B=>{if(B===0&&i.settings.showYAxis)return;let J=__dcg_shared_module_exports__['sa'](i.mapx(B));J===__dcg_shared_module_exports__['sa'](0)||J===__dcg_shared_module_exports__['sa'](c)||(e.beginPath(),e.moveTo(J,0),e.lineTo(J,u),e.stroke())},k=B=>{if(B===0&&i.settings.showXAxis)return;let J=__dcg_shared_module_exports__['sa'](i.mapy(B));J===__dcg_shared_module_exports__['sa'](0)||J===__dcg_shared_module_exports__['sa'](p)||(e.beginPath(),e.moveTo(g,J),e.lineTo(c,J),e.stroke())};ji(e,"dcg-svg-minor-gridline");let{majorStepX:M,majorStepY:I,minorStepX:E,minorStepY:T}=r,A=i.settings.xAxisScale==="logarithmic",G=i.settings.yAxisScale==="logarithmic",_=A?o.x.minor:qs(n,a,E),P=G?o.y.minor:qs(s,l,T);e.strokeStyle="rgba(0, 0 , 0, "+m+")";for(let B of _)S(B);e.strokeStyle="rgba(0, 0 , 0, "+w+")";for(let B of P)k(B);_i(e);let N=1-(1-C)/(1-m),W=1-(1-C)/(1-w);ji(e,"dcg-svg-major-gridline");let X=A?o.x.major:qs(n,a,M),q=G?o.y.major:qs(s,l,I);e.strokeStyle="rgba(0, 0 , 0, "+N+")";for(let B of X)S(B);e.strokeStyle="rgba(0, 0 , 0, "+W+")";for(let B of q)k(B);_i(e),e.restore()}drawAxes(e,i,r){let o=i.settings.axisLineOffset,n=i.settings.axisOpacity.toString(),a="rgba(127,205,230,"+n+")",s="rgba(0,0,0,"+n+")",l=i.settings.xAxisArrowMode,c=i.settings.yAxisArrowMode,p=i.settings.showXAxis,u=i.settings.showYAxis,g=1,m=Math.round(i.mapx(0))-o,w=Math.round(i.mapy(0))-o,C=i.screen.height,S=i.screen.width;function k(E,T,A){e.save();let G=Math.PI/12,_=8*Math.max(e.lineWidth,1.5);e.lineJoin="round",e.fillStyle=s,e.strokeStyle=s,e.beginPath(),e.moveTo(E,T),e.lineTo(E+Math.cos(A-G)*_,T+Math.sin(A-G)*_),e.lineTo(E+Math.cos(A+G)*_,T+Math.sin(A+G)*_),e.lineTo(E,T),e.lineTo(E+Math.cos(A-G)*_,T+Math.sin(A-G)*_),e.stroke(),e.fill(),e.restore()}let M=C,I=0;i.settings.restrictGridToFirstQuadrant&&(M=w,I=m,l==="BOTH"&&(l="POSITIVE"),c==="BOTH"&&(c="POSITIVE")),u&&(dn(e,"yaxis"),i.settings.takingScreenshot&&Nf(e,i.settings.yAxisLabel||"Y axis"),e.save(),ji(e,"dcg-svg-axis-line"),e.lineWidth=i.settings.axisLineWidth*(r==="y"?g:1),e.strokeStyle=r==="y"?a:s,c==="BOTH"?(e.beginPath(),e.moveTo(m,2*i.settings.axisLineWidth),e.lineTo(m,C-2*i.settings.axisLineWidth),e.stroke(),k(m,C-i.settings.axisLineWidth,3*Math.PI/2),k(m,i.settings.axisLineWidth,Math.PI/2)):c==="POSITIVE"?(e.beginPath(),e.moveTo(m,2*i.settings.axisLineWidth),e.lineTo(m,M),e.stroke(),k(m,i.settings.axisLineWidth,Math.PI/2)):(e.beginPath(),e.moveTo(m,0),e.lineTo(m,M),e.stroke()),_i(e),e.restore(),pn(e)),p&&(dn(e,"xaxis"),i.settings.takingScreenshot&&Nf(e,i.settings.xAxisLabel||"X axis"),e.save(),ji(e,"dcg-svg-axis-line"),e.lineWidth=i.settings.axisLineWidth*(r==="x"?g:1),e.strokeStyle=r==="x"?a:s,l==="BOTH"?(e.beginPath(),e.moveTo(2*i.settings.axisLineWidth,w),e.lineTo(S-2*i.settings.axisLineWidth,w),e.stroke(),k(i.settings.axisLineWidth,w,0),k(S-i.settings.axisLineWidth,w,Math.PI)):l==="POSITIVE"?(e.beginPath(),e.lineTo(I,w),e.lineTo(S-2*i.settings.axisLineWidth,w),e.stroke(),k(S-i.settings.axisLineWidth,w,Math.PI)):(e.beginPath(),e.lineTo(I,w),e.lineTo(S,w),e.stroke()),_i(e),e.restore(),pn(e))}drawPolarStepNumbers(e,i,r){e.save();let o=i.settings.showGrid,n=i.settings.xAxisNumbers&&i.settings.showXAxis,a=i.settings.yAxisNumbers&&i.settings.showYAxis,s=o&&i.settings.polarNumbers,l=i.viewport.largestR(),c=i.viewport.smallestR(),p=i.viewport.xmin,u=i.viewport.xmax,g=i.viewport.ymin,m=i.viewport.ymax,w=i.screen.width,C=i.screen.height,S={left:3,right:w-3,top:3,bottom:C-3},k=i.settings.labelHangingColor,M=i.settings.getTextColor(),I=i.settings.labelSize,E=I;this.addTextShadow(e,i),e.fillStyle=M;function T(f,O,R){let re=Math.sqrt(f*f-O*O);g<=re&&re<=m&&R.push({x:i.mapx(O),y:i.mapy(re)}),g<=-re&&-re<=m&&R.push({x:i.mapx(O),y:i.mapy(-re)})}function A(f,O,R){let re=Math.sqrt(f*f-O*O);p<=re&&re<=u&&R.push({x:i.mapx(re),y:i.mapy(O)}),p<=-re&&-re<=u&&R.push({x:i.mapx(-re),y:i.mapy(O)})}let G=i.mapx(0),_=i.mapy(0),P=g<=0&&0<=m,N=p<=0&&0<=u,W=P&&n,X=N&&a,q="";if(!W&&!X&&o){let f=zd(G),O=zd(G-w),R=zd(_),re=zd(_-C),ie,ve,ae,oe;f<=O?(ie="left",ae=f):(ie="right",ae=O),R<=re?(ve="top",oe=R):(ve="bottom",oe=re),n&&a?q=ae<=oe?ie:ve:a?q=ie:n&&(q=ve)}let B={left:0,right:w,top:_-1,bottom:_+1},J={left:G-1,right:G+1,top:0,bottom:C};for(let f of qs(0,l,r.majorStepR)){let O=[],R=[],re=[],ie=new ha(__dcg_shared_module_exports__['Ya'](f,l),I),ve=ie.getRect();switch(f>0?(X&&g<=f&&f<=m&&R.push({x:G-ve.right-5,y:i.mapy(f)}),X&&g<=-f&&-f<=m&&R.push({x:G-ve.right-5,y:i.mapy(-f)}),W&&p<=f&&f<=u&&O.push({x:i.mapx(f),y:_-ve.top+3}),W&&p<=-f&&-f<=u&&O.push({x:i.mapx(-f),y:_-ve.top+3})):X&&!n&&g<=f&&f<=m?R.push({x:G-ve.right-5,y:i.mapy(f)}):W&&!a&&p<=f&&f<=u&&O.push({x:i.mapx(f),y:_-ve.top+3}),q){case"top":A(f,m,re);break;case"bottom":A(f,g,re);break;case"left":T(f,p,re);break;case"right":T(f,u,re);break}O.forEach(function(ae){ae=ie.clampBoundsWithinRect(ae,S),ie.drawCenteredAt(e,ae,"dcg-svg-axis-value"),IS(B,ie.getRectWhenCenteredAt(ae))}),R.forEach(function(ae){ae=ie.clampBoundsWithinRect(ae,S),ie.drawCenteredAt(e,ae,"dcg-svg-axis-value"),IS(J,ie.getRectWhenCenteredAt(ae))}),re.forEach(function(ae){ae=ie.clampBoundsWithinRect(ae,S),ie.drawCenteredAt(e,ae,"dcg-svg-axis-value")})}if(s){let f=Math.ceil(c/r.majorStepR),O=Math.floor(l/r.majorStepR),re=Math.ceil((f+O)/2)*r.majorStepR,ie=c>0?15:30;for(let ve of qs(0,359,ie)){let ae;i.settings.degreeMode?ae=ve.toString()+"\xB0":ae=__dcg_shared_module_exports__['Ya'](ve*Math.PI/180,2*Math.PI).string;let oe=e.measureText(ae).width/2,Z=re/1.05,Q=Z*Math.cos(ve*Math.PI/180),fe=Z*Math.sin(ve*Math.PI/180);if(Q<p||Q>u||fe<g||fe>m)continue;let ye=i.mapx(Q),Re=i.mapy(fe);ve===0||ve===180?Re-=E:(ve===90||ve===270)&&(ye+=oe+3);let Ke=__dcg_shared_module_exports__['ub'](ye,3+oe,w-3-oe),Ye=__dcg_shared_module_exports__['ub'](Re,3+E,C-3-E);Ye=ha.computeBaselineFromCenter(Ye,I),ji(e,"dcg-svg-polar-axis-value"),e.save(),_i(e),e.fillStyle=k,ha.setCtxFontSize(e,I),e.strokeText(ae,Ke,Ye),e.fillText(ae,Ke,Ye),e.restore()}}return e.restore(),{x:B,y:J}}drawLabels(e,i,r){let o=i.viewport.xmin,n=i.viewport.xmax,a=i.viewport.ymin,s=i.viewport.ymax,l=i.screen.width,c=i.screen.height,p=(n-o)/l,u=(s-a)/c,g=i.settings.getTextColor(),m=i.mapx(0),w=i.mapy(0),C=i.settings.labelSize,S=15,k=i.settings.showXAxis&&i.settings.xAxisLabel,M=i.settings.showYAxis&&i.settings.yAxisLabel,I=r.x,E=r.y;if(k&&I){ji(e,"dcg-svg-axis-label"),e.save(),_i(e),e.fillStyle=g;let T;if(e.__xLabelOffset&&i.settings.isViewportTransient&&TS(e.__xLabelOffset.xscale,p)&&TS(e.__xLabelOffset.yscale,u)&&(T={x:e.__xLabelOffset.x+m,y:e.__xLabelOffset.y+w}),this._setAxisLabelFont(e,k,C,i),!T){let A=e.measureText(k).width,G=l-A-S,_=C;I.bottom+_<c?T={x:G,y:I.bottom+_}:T={x:G,y:I.top-_/2},e.__xLabelOffset={x:T.x-m,y:T.y-w,xscale:p,yscale:u}}e.strokeText(k,T.x,T.y),e.fillText(k,T.x,T.y),e.restore()}else e.__xLabelPosition=null;if(M&&E){ji(e,"dcg-svg-axis-label"),e.save(),_i(e),e.fillStyle=g;let T;if(e.__yLabelOffset&&i.settings.isViewportTransient&&TS(e.__yLabelOffset.xscale,p)&&TS(e.__yLabelOffset.yscale,u)&&(T={x:e.__yLabelOffset.x+m,y:e.__yLabelOffset.y+w}),this._setAxisLabelFont(e,M,C,i),!T){let A=e.measureText(M).width,G=C,_=A+5;if(!this._isShortMathyLabel(M)){let N=A;A=G,G=N,_=A*.5}let P=0+S+G;E.left-A>0?T={x:E.left-_,y:P}:T={x:E.right+A,y:P},e.__yLabelOffset={x:T.x-m,y:T.y-w,xscale:p,yscale:u}}e.translate(T.x,T.y),this._isShortMathyLabel(M)||e.rotate(-Math.PI/2),e.strokeText(M,0,0),e.fillText(M,0,0),e.restore()}else e.__yLabelPosition=null}_isShortMathyLabel(e){return e.trim().match(/^([a-zA-Z]?)\(?([a-zA-Z]?)\)?$/)}_setAxisLabelFont(e,i,r,o){this.addTextShadow(e,o),this._isShortMathyLabel(i)?e.font="italic "+Math.round(r*1.4)+"px Times":e.font=Math.round(r*1.2)+"px Arial"}drawCartesianStepNumbers(e,i,r,o,n=MT(i)){e.save();let{showXAxis:a,showYAxis:s}=i.settings,l=a&&i.settings.xAxisNumbers,c=s&&i.settings.yAxisNumbers,{xmin:p,xmax:u,ymin:g,ymax:m}=i.viewport,w=i.screen.width,C=i.screen.height,S={left:3,top:3,right:w-3,bottom:C-3};i.settings.restrictGridToFirstQuadrant&&(p=0,g=0);let k=i.settings.getTextColor({invertBlack:i.settings.threeDMode}),M=i.settings.threeDMode?k:i.settings.labelHangingColor,I=i.mapx(0),E=i.mapy(0),T=i.settings.labelSize;this.addTextShadow(e,i);let A={left:0,right:w,top:E-1,bottom:E+1},G={left:I-1,right:I+1,top:0,bottom:C};if(i.settings.threeDMode&&!i.settings.showNumbers3D)return{x:A,y:G};let _=5,P=!1;if(a&&s&&(l||c)){P=!0,e.fillStyle=k;let B=new ha(__dcg_shared_module_exports__['Ya'](0,1),T);B.drawCenteredAt(e,{x:I-B.getRect().right-_,y:E-B.getRect().top+_},"dcg-svg-axis-value")}let{majorStepX:N,majorStepY:W}=r,X=[],q=[];if(l){let B=i.settings.xAxisScale==="logarithmic",J=B?n.x.label:qs(p,u,N);for(let f of J){let O=B?void 0:u-p,R=__dcg_shared_module_exports__['Ya'](f,O,B),re=new ha(R,T);re.getString()==="0"&&P||X.push(re)}}if(c){let B=i.settings.yAxisScale==="logarithmic",J=B?n.y.label:qs(g,m,W);for(let f of J){let O=B?void 0:m-g,R=__dcg_shared_module_exports__['Ya'](f,O,B),re=new ha(R,T);re.getString()==="0"&&P||q.push(re)}}if(o){e.save(),ji(e,"dcg-svg-tickmark");let B=i.settings.axisLineOffset,f="rgba(0,0,0,"+i.settings.axisOpacity.toString()+")";e.lineWidth=i.settings.axisLineWidth,e.strokeStyle=f;let O=Math.round(i.mapy(0))-B,R=Math.round(i.mapx(0))-B,re=Math.round(2*e.lineWidth)-B;e.beginPath(),X.forEach(function(ie){let ve=Math.round(i.mapx(ie.getValue()))-B;e.moveTo(ve,O-re),e.lineTo(ve,O+re)}),q.forEach(function(ie){let ve=Math.round(i.mapy(ie.getValue()))-B;e.moveTo(R-re,ve),e.lineTo(R+re,ve)}),e.stroke(),_i(e),e.restore()}return X.forEach(function(B){let J={x:i.mapx(B.getValue())-.5*B.getMinusWidth(),y:E-B.getRect().top+_},f=B.clampBoundsWithinRect(J,S);e.fillStyle=J.y===f.y||i.settings.yAxisScale==="logarithmic"?k:M;let O="dcg-svg-axis-value";J.x!==f.x&&(O+=" dcg-svg-offcenter-axis-value"),B.drawCenteredAt(e,f,O),IS(A,B.getRectWhenCenteredAt(f)),_i(e)}),q.forEach(function(B){let J={x:I-_-B.getRect().right,y:i.mapy(B.getValue())},f=B.clampBoundsWithinRect(J,S);e.fillStyle=J.x===f.x||i.settings.xAxisScale==="logarithmic"?k:M;let O="dcg-svg-axis-value";J.y!==f.y&&(O+=" dcg-svg-offcenter-axis-value"),B.drawCenteredAt(e,f,O),IS(G,B.getRectWhenCenteredAt(f)),_i(e)}),e.restore(),{x:A,y:G}}};function qs(t,e,i){let r=Math.ceil(t/i),o=Math.floor(e/i);if(!a9({nmin:r,nmax:o}))return[];let n=[];for(var a=r;a<=o;a++)n.push(a*i);return n}var a9=({nmin:t,nmax:e})=>isFinite(e-t)&&e-t<=1e4;function MT(t){return{x:WR("x",t),y:WR("y",t)}}function WR(t,e){let i=new Set,r=new Set,o=new Set,n=1;function a(oe){return I?e.mapx(oe):e.mapy(oe)}function s(oe,Z){return zd(a(Z)-a(oe))}let l=(oe,Z)=>{let Q=oe*Z,fe=(oe+1)*Z;if(Q<E&&fe<E||Q>T&&fe>T)return;let ye=oe>=5?s(7*Z,8*Z):oe>=2?s(3*Z,4*Z):s(Z,2*Z),Re=ye/s(Q,fe);if(ye<40)return;let Ke={settings:{pixelsPerLabel:e.settings.pixelsPerLabel*Re,labelSize:e.settings.labelSize,xAxisNumber:e.settings.xAxisNumbers,yAxisNumber:e.settings.yAxisNumbers},screen:{width:ye,height:ye},viewport:{xmin:Q,ymin:Q,xmax:fe,ymax:fe}},{minorStepX:Ye,majorStepX:_t}=kd(Ke),st=Math.max(Q,E),Hi=Math.min(fe,T);for(let ut=ru(st/Ye);ut<ou(Hi/Ye);ut++)o.add(ut*Ye);for(let ut=ru(st/_t);ut<ou(Hi/_t);ut++){let Ee=ut*_t;Ee<=Q||Ee>=fe||(r.add(Ee),i.add(Ee))}},c={label:[],major:[],minor:[],unitOpacity:1},{xAxisScale:p,yAxisScale:u,pixelsPerLabel:g}=e.settings,{xmin:m,xmax:w,ymin:C,ymax:S}=e.viewport,{width:k,height:M}=e.screen,I=t==="x",[E,T]=I?[m,w]:[C,S],A=I?k:M,G=I?p:u,_=e.settings.xAxisMinorSubdivisions!==0;if(G!=="logarithmic")return c;let P=ru(kS(E)),N=ou(kS(T)),W=ou(kS(T)-kS(E)),X=s(10**P,10**(P+1)),q=15,B=100,J=X>q,f=[];X>6.25*g&&(f=[2,3,4,6,8]),X>12*g&&(f=[2,3,4,5,6,7,8]),X>14*g&&(f=[2,3,4,5,6,7,8,9]);let O=f.length!=0;if(q<=X&&X<=B&&(n=Math.sqrt((X-q)/(B-q))),!isFinite(W))return c;let R=ru(A/g),re=Math.max(1,2**n9(HR(W/R)));for(let oe=ou(P/re);oe<=ru(N/re);oe++)i.add(10**(oe*re));r=new Set([...i]);let ie=ru(A/q),ve=Math.max(1,2**ou(HR(W/ie)));for(let oe=ou(P/ve);oe<=ru(N/ve);oe++)(J?r:o).add(10**(oe*ve));if(J)for(let oe=P;oe<N;oe++){let Z=10**oe;for(let Q of f)i.add(Q*Z);if(O){for(let Q=2;Q<=9;Q++)r.add(Q*Z);for(let Q=1;Q<=9;Q++)l(Q,Z)}else for(let Q=2;Q<=9;Q++)o.add(Q*Z)}_&&(o=new Set);let ae=I?e.reverse_mapx(a(E)+g/4):e.reverse_mapy(a(E)-2*e.settings.labelSize);return{label:[...i].filter(oe=>ae<=oe&&oe<=T),major:[...r].filter(oe=>E<=oe&&oe<=T),minor:[...o].filter(oe=>E<=oe&&oe<=T),unitOpacity:n}}function IS(t,e){e.left<t.left&&(t.left=e.left),e.right>t.right&&(t.right=e.right),e.top<t.top&&(t.top=e.top),e.bottom>t.bottom&&(t.bottom=e.bottom)}function TS(t,e){let i=zd(t),r=zd(e),o=1e-4;return zd(i-r)<=(i<r?r:i)*o}var ql=__dcg_shared_module_exports__['h'](j()),GS=class extends ql.Class{template(){return ql.createElement("div",{class:ql.const("dcg-calculator-api-container"),style:()=>({width:this.props.width(),height:this.props.height(),position:"fixed",left:"0px",top:"0px"})},ql.createElement("div",{class:ql.const("dcg-container")},ql.createElement("div",{class:ql.const("dcg-grapher"),style:()=>({"font-size":this.props.concreteFontSize()})})))}};var Gn=__dcg_shared_module_exports__['h'](j());var{If:s9}=Gn.Components,AS=class extends Gn.Class{init(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.width=0,this.height=0,this.pixelRatio=0}getDevicePixelRatio(){return window.devicePixelRatio||1}template(){return Gn.createElement("div",{class:Gn.const("dcg-graph-outer"),didMount:e=>this.rootNode=e,manageFocus:this.const(Ne({controller:this.controller,location:{type:"graph-paper"}}))},Gn.createElement("div",{tabindex:()=>this.getShiftTabElementTabIndex(),onFocus:()=>{let e=this.rootNode.getAttribute("aria-label")||"";this.rootNode.setAttribute("aria-label",""),this.rootNode.focus(),this.rootNode.setAttribute("aria-label",e),this.controller.get2dPOIController().handleTabEvent("prev")}}),Gn.createElement(s9,{predicate:()=>this.isIOSAndIframe()},()=>Gn.createElement("div",{style:Gn.const("width:1px; height:.5px; pointer-events:none; opacity: 0;"),"aria-hidden":Gn.const("true")},Gn.const("text"))),Gn.createElement("canvas",{class:Gn.const("dcg-graph-inner"),didMount:e=>{this.canvasNode=e,this.ctx=this.canvasNode.getContext("2d"),this.resize(0,0)},style:()=>({position:"relative",display:"block",outline:"none","-webkit-transform":this.isIOSAndIframe()?"translate3d(0,-.25px,0)":void 0})}))}getShiftTabElementTabIndex(){var i;return((i=this.rootNode)==null?void 0:i.getAttribute("tabindex"))!=="0"||this.controller.getActiveTool()!=="selection"||this.rootNode===document.activeElement?"-1":"0"}isIOSAndIframe(){return od&&pc}resize(e,i,r){var o;r=r||this.getDevicePixelRatio(),!(e===this.width&&i===this.height&&r===this.pixelRatio)&&(this.width=e,this.height=i,this.canvasNode.style.width=e+"px",this.canvasNode.style.height=i+"px",this.canvasNode.setAttribute("width",""+e*r),this.canvasNode.setAttribute("height",""+i*r),this.pixelRatio=r,this.ctx=this.canvasNode.getContext("2d"),(o=this.ctx)==null||o.scale(r,r),this.update())}getAriaLabel(e){let i=[],{graphDescription:r}=this.grapher.settings.config;if(this.grapher.type==="3d"&&this.controller.is3dProduct())r!==void 0?i.push(r):(i.push(`${this.controller.s("graphing-calculator-narration-3d-graphpaper-label")}.`),i.push(db(this.controller)));else if(this.grapher.type==="2d"&&!this.controller.is3dProduct()){let o=this.grapher.getAudioTrace();if(!o)return"";r!==void 0?i.push(r):(i.push(`${this.controller.s("graphing-calculator-narration-graphpaper-label")}.`),i.push(db(this.controller)),e>0&&(o.getAudioTraceActive()||o.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!1})!==void 0&&(Rr?i.push(this.controller.s("graphing-calculator-narration-audio-instructions-enter-audio-trace-mac")):i.push(this.controller.s("graphing-calculator-narration-audio-instructions-enter-audio-trace-windows")))))}if(i.length)return i.join(" ").trim()}updateAria(e,i){let r=this.getAriaLabel(i);r!==void 0?(this.rootNode.setAttribute("role","img"),this.rootNode.setAttribute("aria-roledescription",this.controller.s("graphing-calculator-narration-graphpaper-label")),this.rootNode.setAttribute("aria-label",r),this.rootNode.setAttribute("aria-hidden",!e||!this.grapher.settings.config.graphpaper?"true":"false"),this.rootNode.setAttribute("tabindex",e&&this.grapher.settings.config.graphpaper&&this.grapher.settings.config.enableTabindex?"0":"-1")):["role","aria-roledescription","aria-label","aria-hidden","tabindex"].forEach(n=>this.rootNode.removeAttribute(n)),this.update()}speakAriaLabelAgain(){let e=this.rootNode.getAttribute("aria-label");e&&le(e)}};var $R=__dcg_shared_module_exports__['h'](j());var GT=class{constructor(e){this.elt=e.elt,this.settings=e.settings,this.controller=e.controller,this.evaluator=e.evaluator,this.elt.style.overflow="hidden"}},AT=class extends GT{constructor(i){super(i);this.canvasLayer=$R.mountToNode(AS,this.elt,{grapher:()=>this}),this.elt.appendChild(this.canvasLayer.rootNode)}getImageData(i,r,o,n){var a;return(a=this.canvasLayer.ctx)==null?void 0:a.getImageData(i,r,o,n)}_setIsVisible(i){i!==this.isVisible&&(this.isVisible=i,i?this.controller.requestRedrawGraph():this.canvasLayer.resize(0,0))}getIsVisible(){return this.isVisible}},VT=class extends AT{setSketchOrder(i){__dcg_shared_module_exports__['Ra'](this.__sketchOrder,i)||(this.__sketchOrder=i,this.controller.requestRedrawGraph())}getSketchOrder(){return this.__sketchOrder}},LT=class extends VT{constructor(i){super(i);this.__redrawRequested=!1;this.events=new Zi}redrawAllLayers(){this.__redrawRequested=!0}redrawAllLayersSynchronously(){return this._redrawAllLayers()}notifyAfterRedraw(i){if(!this.__redrawRequested)i();else{this.notifyAfterRedraw_i?this.notifyAfterRedraw_i++:this.notifyAfterRedraw_i=1;let r="redraw.notifyAfterRedraw"+this.notifyAfterRedraw_i;this.events.observeEvent(r,()=>{this.events.unobserveEvent(r),i()})}}},PT=class extends LT{getUserRequestedViewport(){return this._lastUserRequestedViewport}setUserRequestedViewport(i){this._lastUserRequestedViewportUpdateToken||(this._lastUserRequestedViewportUpdateToken=0),this._lastUserRequestedViewportUpdateToken+=1,this._lastUserRequestedViewport=__dcg_shared_module_exports__['l'](i),this._afterViewportChange()}getCurrentViewport(){return this.viewportController.getViewport().toObject()}debounceUserRequestedViewportChange(){this.__debouncedViewportCommit||(this.__debouncedViewportCommit=__dcg_shared_module_exports__['Na']((o,n)=>{if(!this.isDragging&&this._lastUserRequestedViewportUpdateToken===n){if(this._lastUserRequestedViewport){var a=er.fromObject(this._lastUserRequestedViewport),s=this.computeConcreteViewport(a);if(s.equals(o))return}this.controller.dispatch({type:"commit-user-requested-viewport",viewport:o})}},1e3));let i=this.getCurrentViewport();this.__debouncedViewportCommit(i,this._lastUserRequestedViewportUpdateToken)}},OT=class extends PT{getState(e){let i=__dcg_shared_module_exports__['a']({},this.getCurrentViewport());this.controller.is3dProduct()||(delete i.zmin,delete i.zmax);let r={viewport:i};return this.settings.stateProperties.forEach(o=>{o!=="randomSeed"&&(!this.controller.is3dProduct()&&RO(o)||(r[o]=this.settings[o]))}),e.stripDefaults&&(r=__dcg_shared_module_exports__['Qc'](wd,r)),r}getUndoRedoDiffState(){let e=this.getUndoRedoFullState();return e.speed3D!==0&&delete e.worldRotation3D,e}getUndoRedoFullState(){let e={};return this.settings.stateProperties.forEach(i=>{e[i]=this.settings[i]}),e.viewport=this.getUserRequestedViewport(),e}},VS=class extends OT{};function l9(){return new Rl(1024,768)}function jR(t){let{xAxisScale:e,yAxisScale:i}=t;return new er(...e==="linear"?[-Cd,Cd]:[10**-Sd,10**Sd],...i==="linear"?[-Cd,Cd]:[10**-Sd,10**Sd])}var nu=class t extends VS{constructor(i,r,o,n){super({elt:i,settings:r,controller:o,evaluator:n});this.type="2d";this.__screenRequested3D=new Rl(768,768);this.lastActiveToken={selected:void 0,hovered:void 0};this._layerClasses={};this._classLayers={};let a=l9(),s=jR(r).squareYAxis(a,r);this.setUserRequestedViewport(s),this.__projection=new Rs(a,s,r),this.markLabelsDirty=__dcg_shared_module_exports__['Na'](()=>{this.evaluator.notifyWhenSynced(()=>{this.poiLabelsLayer.markLabelsDirty(),this.controller.requestRedrawGraph()})},300),this.poiController=new ZC(this,r),this.viewportController=new tS(this,this.controller),this.showPOIDots=!0,this.graphSketches={},this.graphImages={},this.audioGraph=new lS(o,this),this.boxSelectLayer=new lC;var l=document.createElement("div");this.elt.appendChild(l),this.imageLayer=new xb(this),this.gridLayer=new MS,this.poiDotsLayer=new sC(this.controller),this.graphsLayer=new Ed(this.controller,this.settings,u=>this.audioGraph.getExpressionAriaLabel(u)),this.transformationPreviewLayer=new DS(this),this.clickableObjectsLayer=new wb(this),this.movablePointsLayer=new tb(this);var c=document.createElement("div");this.elt.appendChild(c),this.poiLabelsLayer=vb.mountToNode(yg,c,{grapher:()=>this});var p=document.createElement("div");this.elt.appendChild(p),this.geoKeyboardCursorLayer=vb.mountToNode(cC,p,{grapher:()=>this}),this.traceLayer=this.poiLabelsLayer,this.scaleAxis=void 0}privateGetGridLayer(){return this.gridLayer}static copyGraphProperties(i,r){i=__dcg_shared_module_exports__['Sc'](wd,i);let o=__dcg_shared_module_exports__['a']({},i);delete o.viewport;let n=r.validateSettings(o);for(let a in n)r.setProperty(a,n[a]);return i}remove(){this.elt.remove(),this.poiController.remove(),this.viewportController.remove(),this.audioGraph.remove()}tick(i){this.__redrawRequested&&this._redrawAllLayers(),this.__movablePointListener&&this.__movablePointListener()}registerMovablePointListener(i){this.__movablePointListener=i}deregisterMovablePointListener(){this.__movablePointListener=void 0}clear(){this.graphSketches={},this.graphImages={}}getGraphSketch(i){return this.graphSketches[i]}getGraphImage(i){return this.graphImages[i]}addGraphSketch(i){this.graphSketches[i.id]=i}removeGraphSketch(i){delete this.graphSketches[i]}addGraphImage(i){i.imageObj.width&&i.imageObj.height?(this.graphImages[i.id]=i,this.controller.requestRedrawGraph()):H(i.imageObj).on("load.calc_load",()=>this.addGraphImage(i))}removeGraphImage(i){let r=this.graphImages[i];r&&H(r.imageObj).off("load.calc_load"),delete this.graphImages[i],this.controller.requestRedrawGraph()}setBoxSelectRectangle(i){this.boxSelectRectangle=i,this.controller.requestRedrawGraph()}getProjection(){return this.__projection}_setProjection(i){this.__projection=i,this.controller.requestRedrawGraph()}getAudioTrace(){return this.audioGraph}getDefaultViewport(){let i=this.getProjection();return jR(this.settings).squareYAxis(i.screen,this.settings)}_updateScreenSize(i,r){if(i<=0||r<=0)return;let n=this.getProjection().screen;if(n.width===i&&n.height===r)return;let a=new Rl(i,r);this.viewportController.setScreen(a)}update(){let{top:i,left:r,width:o,height:n}=this.controller.computeMajorLayout().grapher,a=this.controller.isGraphPaperFocused()&&!this.poiController.keyboardAttentionManager.getKeyboardAttention()&&!this.controller.getSelectedGeoExpression()&&!this.geoKeyboardCursorLayer.showCursor()&&!this.controller.inAudioTraceMode();this.elt.classList.toggle("dcg-grapher-focused",a),this.controller.isThreeDMode()&&({width:o,height:n}=this.__screenRequested3D),o>0&&n>0?(this._setIsVisible(!0),this._updateScreenSize(o,n),Rn(this.elt,{position:"absolute",left:r+"px",top:i+"px",width:o+"px",height:n+"px"})):this._setIsVisible(!1)}setActiveToken(i,r){var o=this.lastActiveToken[r];this.lastActiveToken[r]=i;var n=i&&this.getGraphSketch(i),a=o&&this.getGraphSketch(o);a!==n&&(a&&(r==="selected"?a.tokenSelected=!1:r==="hovered"&&(a.tokenHovered=!1)),n&&(r==="selected"?n.tokenSelected=!0:r==="hovered"&&(n.tokenHovered=!0))),this.controller.requestRedrawGraph()}deselectSketch(i){let r=this.getGraphSketch(i);r&&(r.selected=!1,r.showPOI=!1,r.showHighlight=!1)}selectSketch(i){let r=this.getGraphSketch(i);r&&(r.selected=!0,r.showPOI=this.controller.isTraceEnabled(),r.showHighlight=!0)}updateSketch(i,r){let o=this.getGraphSketch(i);if(!r.length){this.removeGraphSketch(i);return}let n=new iS(i,r);r[0].graphMode!==15&&(n.color=r[0].color,r[0].style&&(n.style=r[0].style)),o&&n.updateFrom(o);let a=!!this.controller.getPropagatedSelectedIds()[i];n.selected=a,n.tokenHovered=i===String(this.lastActiveToken.hovered),n.tokenSelected=i===String(this.lastActiveToken.selected),n.showPOI=a&&this.controller.isTraceEnabled(),n.showHighlight=a,this.addGraphSketch(n)}updateIntersections(i,r){let o=this.getGraphSketch(i);o&&o.updateIntersections(r)}_clear(){let r=this.getProjection().screen;this.canvasLayer.resize(r.width,r.height),this.canvasLayer.ctx&&(this.canvasLayer.ctx.clearRect(0,0,r.width,r.height),this.controller.isThreeDMode()&&!this.controller.getInvertedColors()&&(this.canvasLayer.ctx.fillStyle="rgba(255,255,255,0.001961)",this.canvasLayer.ctx.fillRect(0,0,r.width,r.height)))}isDrawingPlaneFor3dMode(){return this.controller.showPlane3D()||this.controller.showNumbers3D()}createDrawContext(){if(this.canvasLayer.ctx)return{ctx:this.canvasLayer.ctx,projection:this.getProjection(),transformationPreviewParentData:UR(this.controller)}}_redrawAllLayers(){if(this.update(),!this.isVisible&&!this.isDrawingPlaneFor3dMode())return;this.__redrawRequested=!1,this._clear();let i=this.createDrawContext();this.audioGraph.recomputePoints(),this._recomputeClickableObjects(),this._redrawImageLayer(i),this._redrawGridLayer(i),this._redrawGraphsLayer(i),this._redrawPointsAndLabels(i),this._redrawTransformationPreviewLayer(i),this._redrawBoxSelectLayer(i),this._redrawGeoKeyboardCursorLayer(),this._updateCanvasLayerAria(),this.events.triggerEvent("redraw",void 0);let r=this.controller.getGrapher3d();this.isDrawingPlaneFor3dMode()&&r&&r.webglLayer.updatePlaneMap()}_redrawGridLayer(i){i&&this.gridLayer.redrawToCtx(i,this.scaleAxis)}_recomputeClickableObjects(){this.clickableObjectsLayer.redraw()}_redrawGraphsLayer(i){i&&this.graphsLayer.redrawToCtx(i,this.graphSketches,this.graphImages,this.__sketchOrder,this.poiLabelsLayer,this.clickableObjectsLayer)}_redrawTransformationPreviewLayer(i){i&&this.transformationPreviewLayer.redrawToCtx(i)}_redrawBoxSelectLayer(i){i&&this.boxSelectLayer.redrawToCtx(i,this.boxSelectRectangle)}_redrawGeoKeyboardCursorLayer(){this.geoKeyboardCursorLayer.update()}_updateCanvasLayerAria(){let i=0;for(let r in this.graphSketches)Ba(this.controller,this.graphSketches[r])&&(i+=1);this.canvasLayer.updateAria(this.isVisible,i)}_redrawPointsAndLabels(i){if(!i)return;let r=[];this.controller.isThreeDMode()||this.movablePointsLayer.redraw(i,r),this.showPOIDots&&!this.controller.isThreeDMode()&&this.poiDotsLayer.redrawToCtx(i,this.graphSketches,this.poiLabelsLayer,this.clickableObjectsLayer,this.__sketchOrder);let o=this.elt.getBoundingClientRect();if(this.controller.isThreeDMode())this.poiLabelsLayer.drawForScreenshot(i,i.ctx,this.size(),r);else{let n=this.controller.findEl(".dcg-overgraph-pillbox-elements"),a=this.controller.findEl(".dcg-graphpaper-branding");__dcg_shared_module_exports__['ua']([n,a],s=>{if(!s)return;let l=s.getBoundingClientRect();r.push({left:l.left-o.left,top:l.top-o.top,right:l.right-o.left,bottom:l.bottom-o.top})}),this.poiLabelsLayer.redraw(i,this.size(),r)}}size(){let i=this.canvasLayer.ctx;if(!i)return{width:0,height:0};let r=i.canvas.getBoundingClientRect();return{width:r.width,height:r.height}}_redrawImageLayer(i){i&&(this.controller.isThreeDMode()||this.imageLayer.redrawToCtx(i,this.graphImages,this.__sketchOrder))}_parseScreenshotOpts(i){return c9(i,this.settings,this.getProjection().screen)}_syncScreenshotReturnCanvas(i){var r=document.createElement("canvas");if(i&&i.braille){let{embosserModel:o,brailleMode:n}=i.braille,a=Og[o];r.width=a.width,r.height=a.height,NR(r,this,a,o,n)}else{let o=this._parseScreenshotOpts(i);r.width=o.width*o.targetPixelRatio,r.height=o.height*o.targetPixelRatio,this.screenshotToCanvas(r,i)}return r}screenshot(i){return this._syncScreenshotReturnCanvas(i).toDataURL("image/png")}asyncScreenshot(i,r){let o=!1;!i.transparentBackground&&i.showLabels&&(i=__dcg_shared_module_exports__['l'](i),i.transparentBackground=!0,o=!0);let n=this._syncScreenshotReturnCanvas(i),a=n.getContext("2d"),s=n,l=a;i&&i.format==="svg"&&(o=!1,i.transparentBackground&&(i=__dcg_shared_module_exports__['l'](i),i.transparentBackground=!1),l=new t_(n.width,n.height),s={getContext:()=>l,width:n.width,height:n.height},this.screenshotToCanvas(s,i));let c=this.makeScreenshotProjection(i),p=[];if(i.showMovablePoints&&this.movablePointsLayer.drawForScreenshot(l,c,p),i.showLabels){var u=c.screen.width,g=c.screen.height,m=c.settings.labelSize||15,w=1;(u<200||g<200)&&(w=.9);let C=m*w+"px",S=document.createElement("div");S.classList.add("dcg-calculator-screenshot-labels-container"),vb.mountToNode(GS,S,{concreteFontSize:()=>C,width:()=>`${c.screen.width}px`,height:()=>`${c.screen.height}px`}),document.body.append(S);let k=vb.mountToNode(yg,S.querySelector(".dcg-grapher"),{grapher:()=>this}),M={width:c.screen.width,height:c.screen.height};k.drawForScreenshot({projection:c,ctx:a,transformationPreviewParentData:{translationPreviewVectorParents:new Set,translationsWithVisibleVectorParent:new Set,rotationPreviewAngleMarkerParents:new Set,rotationsWithVisibleAndCenteredAngle:new Set}},l,M,p),S.remove()}o&&(l.globalCompositeOperation="destination-over",l.fillStyle="#FFF",l.fillRect(0,0,s.width,s.height)),i&&i.format==="svg"?r(l.getSerializedSvg()):r(s.toDataURL("image/png"))}makeScreenshotProjection(i){let{width:r,height:o,settings:n}=this._parseScreenshotOpts(i),a=new Rl(r,o),s=this.getProjection().viewport;return this.settings.squareAxes&&(s=s.squareCrop(a,this.settings)),new Rs(a,s,n)}screenshotToCanvas(i,r){let o=this._parseScreenshotOpts(r),{targetPixelRatio:n,transparentBackground:a}=o,s=i.getContext("2d");s.scale(n,n);let l=this.makeScreenshotProjection(r);l.settings.takingScreenshot=!0,dn(s,"background"),ji(s,"dcg-svg-background"),a?s.clearRect(0,0,l.screen.width,l.screen.height):(s.fillStyle="white",s.fillRect(0,0,l.screen.width,l.screen.height)),_i(s),pn(s);let c={ctx:s,projection:l,transformationPreviewParentData:{translationPreviewVectorParents:new Set,translationsWithVisibleVectorParent:new Set,rotationPreviewAngleMarkerParents:new Set,rotationsWithVisibleAndCenteredAngle:new Set}};this.imageLayer.redrawToCtx(c,this.graphImages,this.__sketchOrder),this.gridLayer.redrawToCtx(c),this.graphsLayer.redrawToCtx(c,this.graphSketches,this.graphImages,this.__sketchOrder,this.poiLabelsLayer,this.clickableObjectsLayer,r)}speakGrapherFocusAriaLabel(){this.canvasLayer.speakAriaLabelAgain()}_afterViewportChange(){}setGrapherState(i,r){if((!r||!r.doNotClear)&&this.clear(),i=t.copyGraphProperties(i,this.settings),"viewport"in i){let o=er.fromObject(i.viewport);this.setUserRequestedViewport(o);let n=this.computeConcreteViewport(o);this.viewportController.setViewport(n)}this.controller.requestRedrawGraph()}computeConcreteViewport(i){let r=this.getProjection().screen;return this.settings.squareAxes&&!i.isSquare(r,this.controller.getAxisScaleSettings())?i.squareYAxis(r,this.settings):i}classLayers(i){var r,o;return(o=(r=this._classLayers)[i])!=null?o:r[i]=new Set}setLayerClass(i,r){var o=this._layerClasses[i];if(this._layerClasses[i]=r,o!==r){if(o){let n=this.classLayers(o);n.delete(i),n.size===0&&this.elt.classList.remove(o)}r&&(this.classLayers(r).add(i),this.elt.classList.add(r))}}setCanvasSizeFor3D(i,r){this.__screenRequested3D=new Rl(i,r)}getCanvasNode(){return this.canvasLayer.canvasNode}};function c9(t,e,i){let r,o,n,a,s,l;return t?(r=t.width||t.height||i.width,o=t.height||t.width||i.height,n=t.targetPixelRatio||1,n<1&&(n=1),a=(r<256||o<256)&&!t.preserveAxisNumbers,s=Ec.fromObject(t.settings||e),l=!!t.transparentBackground):(r=i.width,o=i.height,n=1,a=!1,s=Ec.fromObject(e),l=!1),a&&(s.setProperty("xAxisNumbers",!1),s.setProperty("yAxisNumbers",!1),s.setProperty("polarNumbers",!1)),{width:r,height:o,targetPixelRatio:n,settings:s,transparentBackground:l}}var Cb=class{constructor(){this.displayName="graphing-calculator-text-geometry-tool-selection-display-name";this.toolType="selection";this.icon=[{type:"filled-polygon",color:"#000",path:[40,30,58,46,51,47,56,60,53,62,47,49,41,54,40,30]}]}getNumberInputLatex(){return""}clearTentativeOutputs(){}canNextInputBePoint(){return!1}getAllValidNextInputTypes(){return __dcg_shared_module_exports__['Z'].filter(e=>this.isValidNextInputType(e))}isValidNextInputType(e){return e!==__dcg_shared_module_exports__['Q']}getNonPointInputType(){}getHint(){return""}getExpressionEditHint(e){return this.getHint()}onNumberInput(e){}onMove(e){return!0}onFocus(e){}tryCommitResults(){return{committed:void 0}}shouldUseJitEdges(){return!1}shouldHighlightRelevantObjects(){return!1}};var YR="graphing-calculator-text-geometry-tool-point-hint",Sb=class extends ni{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-point-display-name",this.toolName="point",this.toolType="simple",this.icon=[{type:"point",x:50,y:50,size:"large"}]}getExpressionEditHint(i){return this.s(YR)}getSpec(){return{inputs:[{type:"point",id:"1",hint:YR}],outputs:[]}}};var JR="graphing-calculator-text-geometry-tool-line-hint-start",XR="graphing-calculator-text-geometry-tool-line-hint-end",Eb=class extends ni{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-line-display-name",this.toolType="simple",this.toolName="line",this.icon=[{type:"stroked-path",path:[78,22,22,78],lineWidth:"large"},{type:"point",x:68,y:32},{type:"point",x:32,y:68}]}getExpressionEditHint(i){return i===0?this.s(JR):this.s(XR)}getSpec(){return{inputs:[{type:"point",id:"1",hint:JR},{type:"point",id:"2",hint:XR}],outputs:[{id:"3",type:"line",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var QR="graphing-calculator-text-geometry-tool-segment-hint-start",ZR="graphing-calculator-text-geometry-tool-segment-hint-end",Db=class extends ni{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-segment-display-name",this.toolName="segment",this.toolType="simple",this.icon=[{type:"stroked-path",path:[68,32,32,68],lineWidth:"large"},{type:"point",x:68,y:32},{type:"point",x:32,y:68}]}getExpressionEditHint(i){return i===0?this.s(QR):this.s(ZR)}getSpec(){return{inputs:[{type:"point",id:"1",hint:QR},{type:"point",id:"2",hint:ZR}],outputs:[{id:"3",type:"segment",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var eN="graphing-calculator-text-geometry-tool-ray-hint-start",tN="graphing-calculator-text-geometry-tool-ray-hint-end",kb=class extends ni{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-ray-display-name",this.toolName="ray",this.toolType="simple",this.icon=[{type:"stroked-path",path:[78,22,32,68],lineWidth:"large"},{type:"point",x:68,y:32},{type:"point",x:32,y:68}]}getExpressionEditHint(i){return i===0?this.s(eN):this.s(tN)}getSpec(){return{inputs:[{type:"point",id:"1",hint:eN},{type:"point",id:"2",hint:tN}],outputs:[{id:"3",type:"ray",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var iN="graphing-calculator-text-geometry-tool-circle-hint-center",rN="graphing-calculator-text-geometry-tool-circle-hint-radius",Ib=class extends ni{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-circle-display-name",this.toolName="circle",this.toolType="simple",this.icon=[{type:"circle",x:50,y:50,radius:26},{type:"point",x:50,y:50},{type:"point",x:68,y:32}]}getExpressionEditHint(i){return i===0?this.s(iN):this.s(rN)}getSpec(){return{inputs:[{type:"point",id:"1",hint:iN},{type:"point",id:"2",hint:rN}],outputs:[{id:"3",type:"circle",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var oN="graphing-calculator-text-geometry-tool-arc-hint-1",nN="graphing-calculator-text-geometry-tool-arc-hint-2",aN="graphing-calculator-text-geometry-tool-arc-hint-3",Tb=class extends ni{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-arc-display-name",this.toolName="arc",this.toolType="complex";let r=50,o=80,n=80,a=-3,s=-2.6,l=-1.7;this.icon=[{type:"arc",x:o,y:n,radius:r,startAngle:a,endAngle:l},{type:"point",x:o+r*Math.cos(a),y:n+r*Math.sin(a)},{type:"point",x:o+r*Math.cos(s),y:n+r*Math.sin(s)},{type:"point",x:o+r*Math.cos(l),y:n+r*Math.sin(l)}]}getExpressionEditHint(i){return i===0?this.s(oN):i===1?this.s(nN):this.s(aN)}getSpec(){return{inputs:[{type:"point",id:"1",hint:oN},{type:"point",id:"2",hint:nN},{type:"point",id:"3",hint:aN}],outputs:[{id:"4",type:"arc",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"},{type:"reference-input",id:"3"}]}]}}};var sN="graphing-calculator-text-geometry-tool-parallel-hint-straight-line",lN="graphing-calculator-text-geometry-tool-parallel-hint-point",Mb=class extends ni{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-parallel-display-name",this.toolName="parallel",this.toolType="complex",this.icon=[{type:"stroked-path",color:"light",path:[25,50,75,30],lineWidth:"large"},{type:"stroked-path",path:[25,70,75,50],lineWidth:"large"},{type:"point",x:50,y:60,size:"medium"}]}getExpressionEditHint(i){return i===0?this.s(sN):this.s(lN)}getSpec(){return{inputs:[{type:"straight",id:"1",hint:sN},{type:"point",id:"2",hint:lN}],outputs:[{id:"3",type:"parallel",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var cN="graphing-calculator-text-geometry-tool-perpendicular-hint-straight-line",dN="graphing-calculator-text-geometry-tool-perpendicular-hint-point",Gb=class extends ni{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-perpendicular-display-name",this.toolName="perpendicular",this.toolType="complex",this.icon=[{type:"stroked-path",color:"light",path:[40,25,60,75],lineWidth:"large"},{type:"stroked-path",path:[25,60,75,40],lineWidth:"large"},{type:"point",x:50,y:50,size:"medium"}]}getExpressionEditHint(i){return i===0?this.s(cN):this.s(dN)}getSpec(){return{inputs:[{type:"straight",id:"1",hint:cN},{type:"point",id:"2",hint:dN}],outputs:[{id:"3",type:"perpendicular",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var _T="graphing-calculator-text-geometry-tool-midpoint-hint",Ab=class extends ni{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-midpoint-display-name",this.toolName="midpoint",this.toolType="simple",this.icon=[{type:"stroked-path",path:[32,32,68,68]},{type:"point",x:50,y:50,size:"large"},{type:"point",x:32,y:32,size:"medium"},{type:"point",x:68,y:68,size:"medium"}]}getExpressionEditHint(i){return this.getHint()}canNextInputBePoint(){return!0}getNonPointInputType(){let{inputIndex:i}=this.model.getNonObjectsState().ui.currentTool;if(i===0)return"segment"}getSpec(){let{idMap:i}=this.model.getNonObjectsState().ui.currentTool,r=this.model.getUncommittedObjects(),o=i[1],n=!1;if(r[o]&&d9(r[o]))n=!0;else{let a=o&&this.model.findDefsForInputId(o)[0];n=!!(a&&a.typedRuntimeValue.valueType==__dcg_shared_module_exports__['s'])}return n?{inputs:[{type:"union",valueTypes:[__dcg_shared_module_exports__['s'],__dcg_shared_module_exports__['C']],id:"1",hint:_T},{type:"point",id:"2",hint:_T}],outputs:[{id:"midpoint-output",type:"midpoint",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}:{inputs:[{type:"segment",id:"1",hint:_T}],outputs:[{id:"midpoint-output",type:"midpoint",hidden:!1,parents:[{type:"reference-input",id:"1"}]}]}}};function d9(t){switch(t.type){case"point":case"intersection":case"glider":case"point-reference":case"midpoint":case"vector-endpoint":return!0;case"polygon":case"circle":case"arc":case"compass":case"segment":case"line":case"ray":case"vector":case"vector-copy":case"parallel":case"perpendicular":case"translate":case"reflect":case"dilate":case"rotate":case"angle":case"directedangle":case"angles":case"directedangles":case"polygon-segment":case"slider":case"expression-edit-preview-latex":return!1;default:return t}}var p9="graphing-calculator-text-geometry-tool-polygon-hint-first-point",pN="graphing-calculator-text-geometry-tool-polygon-hint-next-point",u9="graphing-calculator-text-geometry-tool-polygon-hint-finish-point",Vb=class extends ni{constructor(i){super(i);this.model=i;this.addExtraPoint=!1;this.mouseOverFirstPoint=!1;this.mouseOverLastPoint=!1;this.displayName="graphing-calculator-text-geometry-tool-polygon-display-name",this.toolName="polygon",this.toolType="complex",this.icon=[{type:"filled-polygon",path:[55,30,30,30,35,70,70,60,55,30]},{type:"stroked-path",path:[55,30,30,30,35,70,70,60,55,30]},{type:"point",x:55,y:30},{type:"point",x:30,y:30},{type:"point",x:35,y:70},{type:"point",x:70,y:60}]}clearTentativeOutputs(){let i=this.addExtraPoint;this.addExtraPoint=!0,super.clearTentativeOutputs(),this.addExtraPoint=i}getHint(){let i=this.model.getNonObjectsState().ui.currentTool.inputIndex;return i===0?this.s(p9):i<3?this.s(pN):this.s(u9)}getExpressionEditHint(i){return this.s(pN)}canNextInputBePoint(){return!0}isDegenerateInput(i){return!1}getSpec(){let{inputIndex:i}=this.model.getNonObjectsState().ui.currentTool,r=i;this.addExtraPoint&&(r+=1),r<2&&(r=2);let o={inputs:[],outputs:[]},n=[];for(let a=0;a<r;a++){let s=a.toString();n.push({type:"reference-input",id:s}),o.inputs.push({type:"point",id:s})}return o.outputs.push({id:"polygon",type:"polygon",hidden:!1,parents:n,connectBorder:this.mouseOverFirstPoint}),o}tryCommitResults(){let i=this.getSpec();if(this.model.attemptLockToolInputIn(i),this.addExtraPoint=!1,!this.mouseOverFirstPoint&&!this.mouseOverLastPoint)return{committed:void 0};if(this._isReadyToCommit()){this.mouseOverFirstPoint=!1,this.mouseOverLastPoint=!1;let r=this.model.getUncommittedObjects(),o=__dcg_shared_module_exports__['a']({},this.model.getNonObjectsState().ui.currentTool.idMap);return this.model.commitObjects(),this.model.deselectAllObjects(),this.model.cancelToolplay(),{committed:r,toolIdToLatex:o}}return{committed:void 0}}tentativelyAddInput({target:i,pointInfo:r},o){this.mouseOverFirstPoint=!1,this.mouseOverLastPoint=!1,this.addExtraPoint=!1;let n=i?this.getExpandedReferenceForDef(i,o):r==null?void 0:r.reference,{idMap:a,inputIndex:s}=this.model.getNonObjectsState().ui.currentTool;if(this.mouseOverFirstPoint=a[0]===n,this.mouseOverLastPoint=a[s-1]===n,!this.mouseOverFirstPoint&&!this.mouseOverLastPoint)this.addExtraPoint=!0;else{i||(i=r==null?void 0:r.def),i&&this.model.setObjectHovered({calcId:i.calcId,listIndex:this.getListIndexForHover(i,o)});return}super.tentativelyAddInput({target:i,pointInfo:r},o)}onMove(i){let r=this.model.getObjectDefUnderMouse(i.pt,i.tolerance);if(r){let o=this.getExpandedReferenceForDef(r,i.shift),{idMap:n,inputIndex:a}=this.model.getNonObjectsState().ui.currentTool;this.mouseOverFirstPoint=n[0]===o,this.mouseOverLastPoint=n[a-1]===o}return this.addExtraPoint=!this.mouseOverFirstPoint&&!this.mouseOverLastPoint,super.onMove(i)}};var h9="graphing-calculator-text-geometry-tool-compass-hint-segment",g9="graphing-calculator-text-geometry-tool-compass-hint-center",Lb=class extends ni{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-compass-display-name",this.toolName="compass",this.toolType="complex",this.icon=[{type:"stroked-path",path:[50,50,75,50]},{type:"circle",x:50,y:50,radius:25}]}getExpressionEditHint(i){return this.getHint()}getSpec(){return{inputs:[{type:"segment",id:"1",hint:h9},{type:"point",id:"2",hint:g9}],outputs:[{id:"3",type:"circle",hidden:!1,parents:[{type:"reference-input",id:"2"},{type:"reference-input",id:"1"}]}]}}};var uN="graphing-calculator-text-geometry-tool-angle-hint-1",hN="graphing-calculator-text-geometry-tool-angle-hint-2",gN="graphing-calculator-text-geometry-tool-angle-hint-3",mN="graphing-calculator-text-geometry-tool-angles-hint-1",au=class extends ni{constructor(i){super(i);this.model=i;this.toolType="complex",this.displayName="graphing-calculator-text-geometry-tool-angle-display-name",this.toolName="angle",this.angleType="angle",this.anglesType="angles",this.icon=[{type:"stroked-path",path:[40,30,30,70,70,70],color:"#CCC"},{type:"angle",x:30,y:70,radius:20,startAngle:-1.325817,deltaAngle:1.325817,isDirected:!1},{type:"point",x:30,y:70},{type:"point",x:40,y:30},{type:"point",x:70,y:70}]}canNextInputBePoint(){return!0}shouldReferenceSpecificItemInList(i,r){return __dcg_shared_module_exports__['fa'](i.typedRuntimeValue.valueType,__dcg_shared_module_exports__['A'])?!0:super.shouldReferenceSpecificItemInList(i,r)}getNonPointInputType(){let{inputIndex:i}=this.model.getNonObjectsState().ui.currentTool;if(i===0)return"polygon"}getExpressionEditHint(i){return i===0?this.s(uN):i===1?this.s(hN):this.s(gN)}getSpec(){let{inputIndex:i,idMap:r}=this.model.getNonObjectsState().ui.currentTool,o=r[1];if(!i&&!o)return{inputs:[{type:"polygon",id:"1",hint:mN}],outputs:[{id:"2",type:this.anglesType,listAccess:void 0,hidden:!1,parents:[{type:"reference-input",id:"1"}]}]};let n=[];if(o&&this.model.findDefsForInputId(o).forEach(s=>{let l=s.typedRuntimeValue;if(l.valueType===__dcg_shared_module_exports__['A']){let c=l.value.length;c>0&&n.push({referenceLatex:s.referenceLatex,sides:c})}}),n.length){let a=[],s=2;return n.forEach(l=>{for(var c=0;c<l.sides;c++)a.push({id:s+"",type:this.anglesType,listAccess:c+1,hidden:!1,parents:[{type:"hardcoded",id:l.referenceLatex}]}),s+=1}),{inputs:[{type:"polygon",id:"1",hint:mN}],outputs:a}}return{inputs:[{type:"point",id:"1",hint:uN},{type:"point",id:"2",hint:hN},{type:"point",id:"3",hint:gN}],outputs:[{id:"4",type:this.angleType,hidden:!1,showAngleLabel:!0,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"},{type:"reference-input",id:"3"}]}]}}};var Pb=class extends au{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-directedangle-display-name",this.toolName="directedangle",this.angleType="directedangle",this.anglesType="directedangles",this.icon=[{type:"stroked-path",path:[40,30,30,70,70,70],color:"#CCC"},{type:"angle",x:30,y:70,radius:20,isDirected:!0,startAngle:-1.325817,deltaAngle:1.325817},{type:"stroked-path",path:[35,50,41,50,37,55,35,50],color:"#000",lineWidth:"medium"},{type:"point",x:30,y:70},{type:"point",x:40,y:30},{type:"point",x:70,y:70}]}};var fN="graphing-calculator-text-geometry-tool-reflection-hint-choose-line",Ob=class extends Ks{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-reflect-display-name",this.toolName="reflection",this.toolType="transformation"}getExpressionEditHint(i){return this.s(fN)}getSpec(){return{inputs:[{type:"straight",id:"1",hint:fN}],outputs:[{id:"2",type:"reflect",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"}]}]}}};var FT="graphing-calculator-text-geometry-tool-translation-hint-from-with-vector",bN="graphing-calculator-text-geometry-tool-translation-hint-to",_b=class extends Ks{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-translate-display-name",this.toolName="translation",this.toolType="transformation"}getExpressionEditHint(i){return i===0?this.s(FT):this.s(bN)}firstInputIsVector(){let{idMap:i}=this.model.getNonObjectsState().ui.currentTool,r=i[1],o=r&&this.model.findDefsForInputId(r)[0];return o&&o.typedRuntimeValue.valueType===__dcg_shared_module_exports__['S']}getSpec(){return this.firstInputIsVector()?{inputs:[{type:"union",valueTypes:[__dcg_shared_module_exports__['s'],__dcg_shared_module_exports__['S']],id:"1",hint:FT}],outputs:[{id:"3",type:"translate",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"}]}]}:{inputs:[{type:"union",valueTypes:[__dcg_shared_module_exports__['s'],__dcg_shared_module_exports__['S']],id:"1",hint:FT},{type:"point",id:"2",hint:bN}],outputs:[{id:"3",type:"translate",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var yN="graphing-calculator-text-geometry-tool-dilation-hint-center",xN="graphing-calculator-text-geometry-tool-dilation-hint-scale-factor",Fb=class extends Ks{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-dilate-display-name",this.toolName="dilation",this.toolType="transformation"}getExpressionEditHint(i){return i===0?this.s(yN):this.s(xN)}getSpecIdToLockIn(i,r){return r===1?"2-number":super.getSpecIdToLockIn(i,r)}getSpec(){return{inputs:[{type:"point",id:"1",hint:yN},{type:"union",valueTypes:[],id:"2",hint:xN,numberInputInfo:{defaultLatex:"2",sliderInfo:{value:"2",min:"0",max:"5"}}}],outputs:[{id:"3",type:"dilate",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2-number"}]}]}}};var Ud=class extends ni{constructor(i){super(i);this.model=i;this.displayName="graphing-calculator-text-geometry-tool-expression-edit-display-name",this.toolType="custom",this.toolName="expression-edit"}getHint(){let i=this.model.controller.getValidCursorContext();if((i==null?void 0:i.type)!=="expression-arguments"||!i.functionSymbol)return this.getGenericHint();let r=this.model.getTool(i.functionSymbol);if(!r)return this.getGenericHint();let o=i.argIndex;return i.positionWithinArg==="end"&&(o+=1),r.getExpressionEditHint(o)}getGenericHint(){let i=this.getAllValidNextInputTypes();if(i.some(o=>o===__dcg_shared_module_exports__['q']||o===__dcg_shared_module_exports__['t']))return Pa("graphing-calculator-text-geometry-tool-expression-edit-generic-hint-any-object");let r=i.filter(o=>!(__dcg_shared_module_exports__['aa'](o)&&i.find(n=>__dcg_shared_module_exports__['ba'](o)===n))).map(o=>xd(__dcg_shared_module_exports__['$'](o),Mf()));return r.length===0?Pa("graphing-calculator-text-geometry-tool-expression-edit-generic-hint-0"):r.length===1?Pa("graphing-calculator-text-geometry-tool-expression-edit-generic-hint-1",{type:r[0]}):r.length===2?Pa("graphing-calculator-text-geometry-tool-expression-edit-generic-hint-2",{type1:r[0],type2:r[1]}):Pa("graphing-calculator-text-geometry-tool-expression-edit-generic-hint-many",{types:r.join(", ")})}getExpressionEditHint(i){return this.getHint()}getSpec(){let i=this.model.controller.getSelectedItem(),r=RT(this.model.controller.getValidCursorContext());return!r||!i||i.type!=="expression"?{inputs:[],outputs:[]}:{inputs:[{type:"union",valueTypes:r,id:"1"}],outputs:[{type:"expression-edit-preview-latex",rhsLatex:this.buildPreviewLatex(),hidden:!1,color:i.color,id:"2",parents:[]}]}}onMove(i){super.onMove(i);let{idMap:r,inputIndex:o}=this.model.getNonObjectsState().ui.currentTool,n=this.getSpec().inputs[o];return!!(n&&r[n.id])}buildPreviewLatex(){let i="",r="",o=this.model.controller.getValidCursorContext();if((o==null?void 0:o.type)==="empty")return"";(o==null?void 0:o.type)==="expression-arguments"&&((o==null?void 0:o.positionWithinArg)==="end"?i=",":(o==null?void 0:o.positionWithinArg)==="start"&&(r=","));let n=this.model.getNonObjectsState().ui.currentTool.idMap,a=i+n[1]+r,s=this.model.controller.getSelectedItem();if((s==null?void 0:s.type)!=="expression")return"";let l=Se.getFocusedMathquill(),c=l==null?void 0:l.selection();if((c==null?void 0:c.latex)!==s.latex)return"";let p=s.latex.slice(0,c.startIndex)+a+s.latex.slice(c.endIndex);return Er(s)?p.slice(s.latex.indexOf("=")+1):p}canNextInputBePoint(){let i=this.model.controller.getValidCursorContext();if((i==null?void 0:i.type)!=="expression-arguments"||i.expressionType!=="FunctionCall"&&i.expressionType!=="List")return!1;let r=RT(i);if(!r)return!1;let o=!1;for(let n of r){if(__dcg_shared_module_exports__['fa'](n,__dcg_shared_module_exports__['q']))return!1;__dcg_shared_module_exports__['fa'](n,__dcg_shared_module_exports__['s'])&&(o=!0)}return o}shouldHighlightRelevantObjects(){let i=this.model.controller.getValidCursorContext();if((i==null?void 0:i.type)==="empty")return!1;let r=RT(i);return!(!r||r.some(o=>__dcg_shared_module_exports__['fa'](o,__dcg_shared_module_exports__['q']))||r.every(o=>__dcg_shared_module_exports__['fa'](o,__dcg_shared_module_exports__['r'])||__dcg_shared_module_exports__['fa'](o,__dcg_shared_module_exports__['M'])||__dcg_shared_module_exports__['fa'](o,__dcg_shared_module_exports__['O'])))}};function RT(t){if((t==null?void 0:t.type)==="empty")return[__dcg_shared_module_exports__['M'],__dcg_shared_module_exports__['O'],__dcg_shared_module_exports__['N'],__dcg_shared_module_exports__['P'],__dcg_shared_module_exports__['S']];let e=(t==null?void 0:t.type)==="expression-arguments"?t.allowedTypesForInsertedArg:t==null?void 0:t.allowedTypes;return e==null?void 0:e.filter(i=>!__dcg_shared_module_exports__['fa'](i,__dcg_shared_module_exports__['X']))}var m9={selection:Cb,point:Sb,line:Eb,segment:Db,ray:kb,vector:Qf,circle:Ib,arc:Tb,parallel:Mb,perpendicular:Gb,midpoint:Ab,polygon:Vb,compass:Lb,angle:au,directedangle:Pb,reflect:Ob,translate:_b,rotate:iu,dilate:Fb,"box-selection":Xp,"expression-edit":Ud},NT=m9;function f9(t,e){var a;if(e.typedRuntimeValue.valueType===__dcg_shared_module_exports__['Q'])return[];let i=e.data.call;if(!i||!i.parents)return[];let r=i.symbol,o=i.parents.map(_g),n;switch(r){case"circle":{let[s,l]=o,c=l&&((a=t[l])==null?void 0:a.typedRuntimeValue.valueType);c&&__dcg_shared_module_exports__['fa'](c,__dcg_shared_module_exports__['C'])?n=[s]:n=[s,l];break}case"apply":{n=[o[1]];break}case"parallel":case"perpendicular":{n=[o[1]];break}case"polygon":{n=o.every(s=>s!==void 0)?o:[];break}default:n=o}return n.filter(vN)}var b9=[[1,0],[0,0],!1],Rb=class Rb{constructor(e,i){let r=(e==null?void 0:e.list)||[];i&&(r=r.concat(i)),this.list=r;let o=(e==null?void 0:e.forward)||b9;i&&(o=__dcg_shared_module_exports__['Qb'](o,i.value)),this.forward=o,this.inverse=__dcg_shared_module_exports__['Rb'](o)}add(e){return new Rb(this,e)}equals(e){if(this.list.length!==e.list.length)return!1;for(let i=this.list.length-1;i>=0;i--){let r=this.list[i],o=e.list[i];if(!__dcg_shared_module_exports__['Ra'](r,o))return!1}return!0}isCompletelyRigid(){return this.list.length===0}};Rb.COMPLETELY_RIGID=new Rb(void 0);var LS=Rb;function y9(t){var r,o;let e={},i={};for(let n in t){let a=t[n];if(!a)continue;for(let l of((r=a.data.call)==null?void 0:r.parents)||[]){let c=_g(l);c&&(e[c]||(e[c]=[]),(o=e[c])==null||o.push(a.assignment))}let s=f9(t,a);i[a.assignment]=s}return{parentToChildren:e,childToReversibilityParents:i}}function wN(t){let e=[],i={},r,o=1,n=2;function a(s){var l;i[s]!==n&&(i[s]=o,(l=t[s])==null||l.forEach(a),i[s]=n,e.unshift(s))}for(let s in t)i[s]===r&&a(s);return e}function BT(t,e){var u,g,m,w,C,S,k,M,I,E;let i={},r={},o={},n={},a={};for(let T of e)a[T]=!0,o[T]=LS.COMPLETELY_RIGID;let{parentToChildren:s,childToReversibilityParents:l}=y9(t);for(let T of wN(l)){let A=t[T];if(!A)continue;let G=(u=A.data.call)==null?void 0:u.symbol,_=(((g=A.data.call)==null?void 0:g.parents)||[]).map(_g).filter(vN);if(o[A.assignment])if(A.typedRuntimeValue.valueType===__dcg_shared_module_exports__['s']&&!G)i[A.assignment]=o[A.assignment];else if(G==="glider"&&_.length&&!a[_[0]])r[A.assignment]=o[A.assignment];else{let P=o[A.assignment];if(G==="apply"){let W=(m=t[_[0]])==null?void 0:m.typedRuntimeValue;if((W==null?void 0:W.valueType)!==__dcg_shared_module_exports__['Q'])continue;P=P.add(W)}let N=(w=l[A.assignment])!=null?w:[];for(let W of N)o[W]?P.equals(o[W])||(o[W]=LS.COMPLETELY_RIGID,n[W]=!0):o[W]=P}}let c={};for(let T in o)c[T]=!0;for(let T of wN(s))if(c[T]){for(let A of s[T]||[])c[A]=!0;if(o[T]){let A=l[T]||[];for(let G of A)n[G]&&(n[T]=!0)}}for(let T in r){let G=(((S=(C=t[T])==null?void 0:C.data.call)==null?void 0:S.parents)||[]).map(_g)[0];G&&c[G]&&(n[G]=!0)}for(let T in t){if(!c[T])continue;let A=t[T],G=(k=A==null?void 0:A.data.call)==null?void 0:k.symbol,_=(((M=A==null?void 0:A.data.call)==null?void 0:M.parents)||[]).map(_g);if(G==="apply"&&o[T]){let P=_[1],N=_[0];if(!P||!N)continue;let W=(((E=(I=t[N])==null?void 0:I.data.call)==null?void 0:E.parents)||[]).map(_g),X=W.some(B=>B&&c[B]);if(o[T].isCompletelyRigid()&&o[P].isCompletelyRigid()||X){n[P]=!0;for(let B of W)B&&(n[B]=!0)}}}let p=[];for(let T in n)a[T]||p.push(T);return p.length?BT(t,e.concat(p)):__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},i),r)}function _g(t){return t?__dcg_shared_module_exports__['cb'](t[0]):void 0}function vN(t){return t!==void 0}var Nb=class{constructor(){this._nextId=0;this._defs={}}clear(){this._nextId=0,this._defs={}}add(e,i){let r;i?(r=e.assignment,e.listIndex!==void 0&&(r+="\\left["+e.listIndex+"\\right]")):r="**geo-internal-id-"+this._nextId++,this._defs[r]=e}computeReversibilityLineages(e){var s;let i=this.buildAssignmentMap(),r={};for(let l in i){let c=i[l];c&&(r[c.calcId]=c)}let o=[];for(let l of e){let c=r[l];if(!c)return{};o.push(c.assignment)}let n=BT(this.buildAssignmentMap(),o),a={};for(let l in n){let c=(s=i[l])==null?void 0:s.calcId;c&&(a[c]=n[l])}return a}buildAssignmentMap(){let e={};for(let i in this._defs){let r=this._defs[i];r&&(e[r.assignment]=r)}return e}getDepthValues(){var c,p;var e={},i={};let r=this.buildAssignmentMap();for(let u in r){let g=r[u];if(!g)continue;let m=__dcg_shared_module_exports__['eb'](g.assignment),w=[],C=[];(c=g.data.call)!=null&&c.parents?C=(p=g.data.call)==null?void 0:p.parents:g.data.assignmentRhsReference&&(C=[g.data.assignmentRhsReference]),C.forEach(S=>{let k=S&&S[0];k&&(w.push(k),i[k]||(i[k]=[]),i[k].push(__dcg_shared_module_exports__['eb'](m)))}),e[m]=w}let o=u=>{if(n[u]!==void 0)return n[u];var g=-1,m=e[u]||[];for(let C=0;C<m.length;C++){let S=o(m[C]);S>g&&(g=S)}let w=g+1;return n[u]=w,w};var n={};for(var a in e)n[a]=o(a);var s={},l={};for(var a in i){let g=n[a],m=1/0;i[a].forEach(w=>{let C=n[w];C>g&&(g=C),C<m&&(m=C)}),s[a]=g,l[a]=m}return{createdDepth:n,lastReferencedDepth:s,firstReferencedDepth:l}}};function CN(t,e,i){let o=.5/(2*i*e);return Ti(t-o,t+o)}function Bb(t,e,i,r,o=0){let n=__dcg_shared_module_exports__['na'](t.x,t.y,0,i[0],i[1],0,r[0],r[1],0);o&&(n+=o);let s=.5/(__dcg_shared_module_exports__['wb'](i,r)*e);return Ti(n-s,n+s)}function zs(t,e){for(let i of e)i&&(i.min!==void 0&&t<i.min?t=i.min:i.max!==void 0&&t>i.max&&(t=i.max));return t}function PS(t,e,i,r){if(!i)return 0;var o=t.mapx(1)-t.mapx(0);switch(i.valueType){case __dcg_shared_module_exports__['E']:{let a=e.x-i.value[0][0],s=e.y-i.value[0][1],l=Math.atan2(s,a)/(2*Math.PI);l<0&&(l+=1),l=CN(l,o,i.value[1]);let c=zs(0,[r]),p=zs(1,[r]);if(l>=c&&l<=p)return l;{let u=__dcg_shared_module_exports__['Cb'](i.value,c),g=__dcg_shared_module_exports__['Cb'](i.value,p),m=__dcg_shared_module_exports__['wb'](u,[e.x,e.y]),w=__dcg_shared_module_exports__['wb'](g,[e.x,e.y]);return m<=w?c:p}}case __dcg_shared_module_exports__['G']:{let a=__dcg_shared_module_exports__['Fb'](i.value);if(!a)return 0;if(a.type==="segment"){let s=Bb(e,o,a.start,a.end);return zs(s,[{min:0,max:1},r])}else if(a.type==="rays"){let s=__dcg_shared_module_exports__['wb'](a.start1,[e.x,e.y]),l=__dcg_shared_module_exports__['wb'](a.start2,[e.x,e.y]),c=!r||r.min===void 0?-1/0:r.min,p=!r||r.max===void 0?1/0:r.max;return s<l?c>0?p>=1?1:c:zs(-Bb(e,o,a.start1,a.end1),[{min:void 0,max:0},r]):p<1?c<=0?0:p:zs(Bb(e,o,a.start2,a.end2,1),[{min:1,max:void 0},r])}else if(a.type=="arc"){let[s,l]=a.center,{radius:c,startAngle:p}=a,u=__dcg_shared_module_exports__['yb'](i.value),g=e.x-s,m=e.y-l,w=__dcg_shared_module_exports__['ia'](Math.atan2(m,g),p,u);if(w>=0&&w<=1)w=CN(w,o,c);else{let k=MC(e,{x:s+c*Math.cos(p),y:l+c*Math.sin(p)}),M=MC(e,{x:s+c*Math.cos(p+u),y:l+c*Math.sin(p+u)});k<=M?w=0:w=1}let C=zs(0,[r]),S=zs(1,[r]);if(w>=C&&w<=S)return w;{let k=__dcg_shared_module_exports__['Db'](i.value,C),M=__dcg_shared_module_exports__['Db'](i.value,S),I=__dcg_shared_module_exports__['wb'](k,[e.x,e.y]),E=__dcg_shared_module_exports__['wb'](M,[e.x,e.y]);return I<=E?C:S}}return zs(0,[r])}case __dcg_shared_module_exports__['K']:case __dcg_shared_module_exports__['C']:case __dcg_shared_module_exports__['I']:{let a=Bb(e,o,i.value[0],i.value[1]);return zs(a,[{min:i.valueType===__dcg_shared_module_exports__['I']?void 0:0,max:i.valueType!==__dcg_shared_module_exports__['C']?void 0:1},r])}case __dcg_shared_module_exports__['A']:{let a=i.value,s=1/0,l=zs(0,[r]),c=r&&r.min!==void 0?r.min:-1/0,p=r&&r.max!==void 0?r.max:1/0,u=Math.floor(Math.max(c,0)),g=Math.ceil(Math.min(p,a.length));for(let m=u;m<g;m++){let w=a[m],C=a[(m+1)%a.length],S=zs(Bb(e,o,w,C,m),[{min:m,max:m+1},r]),k=__dcg_shared_module_exports__['Eb'](i.value,S),M=__dcg_shared_module_exports__['wb'](k,[e.x,e.y]);M<s&&(s=M,l=S)}return l}case __dcg_shared_module_exports__['s']:case __dcg_shared_module_exports__['M']:case __dcg_shared_module_exports__['O']:case __dcg_shared_module_exports__['Q']:case __dcg_shared_module_exports__['S']:return 0;default:return i}}function SN(t,e){switch(t.valueType){case __dcg_shared_module_exports__['E']:return __dcg_shared_module_exports__['Cb'](t.value,e);case __dcg_shared_module_exports__['G']:return __dcg_shared_module_exports__['Db'](t.value,e);case __dcg_shared_module_exports__['K']:return __dcg_shared_module_exports__['Bb'](t.value,e);case __dcg_shared_module_exports__['C']:return __dcg_shared_module_exports__['Ab'](t.value,e);case __dcg_shared_module_exports__['I']:return __dcg_shared_module_exports__['zb'](t.value,e);case __dcg_shared_module_exports__['A']:return __dcg_shared_module_exports__['Eb'](t.value,e);case __dcg_shared_module_exports__['s']:case __dcg_shared_module_exports__['M']:case __dcg_shared_module_exports__['O']:case __dcg_shared_module_exports__['Q']:case __dcg_shared_module_exports__['S']:return[NaN,NaN];default:return t}}function x9(t,e){if(!e)return!1;let{left:i,right:r,top:o,bottom:n}=t.pixelCoordinates,{x:a,y:s}=e.mathPoint;if(e.transform){let l=e.model.formula.typed_constant_value;if((l==null?void 0:l.valueType)!==__dcg_shared_module_exports__['s'])throw new Error(`Expected movable point to be a Point but found ${l?__dcg_shared_module_exports__['_'](l.valueType):void 0} instead`);a=a!=null?a:l.value[0],s=s!=null?s:l.value[1],[a,s]=__dcg_shared_module_exports__['Sb'](e.transform.forward,[a,s])}if(a!==void 0){let l=t.mathToPixels.mapX(a);if(l<i-.5||l>r+.5)return!1}if(s!==void 0){let l=t.mathToPixels.mapY(s);if(l<o-.5||l>n+.5)return!1}return!0}function EN(t,e){if(e.length===1&&!x9(t,e[0]))return!1;let i=!1;for(let r of e){if(r.newPointLatex){let o=r.model.latex;Wn(r.model,r.newPointLatex),i=i||o!==r.model.latex}for(let o in r.sliderUpdates){let{value:n,model:a}=r.sliderUpdates[o];r.commitSliderSoftLimits&&Ph(a);let s=a.latex;Zw(a,n),i=i||s!==a.latex}}return i}function DN({projection:t,transform:e,controller:i,strategy:r,mode:o,clampToViewport:n}){var E;let a=i.getItemModel(r.id);if(!a||a.type!=="expression")throw new Error(`Programming error: updateSliderNonlinear move strategy should point to an expression item, but found ${a==null?void 0:a.type}`);let s=o==="up"||o==="bigup",l=((E=a.slider)==null?void 0:E.step)!==""&&(s&&!a.slider.hardMax||!s&&!a.slider.hardMin);r.compiled.fn||__dcg_shared_module_exports__['Vb'](r.compiled);let c=r.compiled.fn;e&&(c=T=>__dcg_shared_module_exports__['Sb'](e.forward,r.compiled.fn(T)));let p=T=>{let[A,G]=c(T);return{x:A,y:G}=t.mathToPixels.mapPoint({x:A,y:G}),[A,G]},u=Aa(a),[g,m]=p(u),w=B0(a,o,{ignoreSoftLimits:l}),C=w,[S,k]=p(C),M=__dcg_shared_module_exports__['la'](S-g,k-m);if(M<1){let T=__dcg_shared_module_exports__['qb'](p,[g+(S-g)/M,m+(k-m)/M],C,C>u?C:r.min,C<u?C:r.max,1);if(T){let A=Ti(T[0],T[1]);(o==="bigup"||o==="bigdown")&&(A=u+(A-u)*5);let G=Ya(a,__dcg_shared_module_exports__['pb'](A,r.min,r.max),{ignoreSoftLimits:l}),[_,P]=p(G);__dcg_shared_module_exports__['la'](_-g,P-m)>M&&(w=G)}}n&&(w=IN(t,Aa(a),w,c));let I=c(w);return{mathPoint:{x:I[0],y:I[1]},sliderUpdates:{[r.id]:{model:a,value:w}}}}function kN({controller:t,projection:e,transform:i,strategy:r,targetScreenPoint:o,clampToViewport:n}){let a={mathPoint:{},sliderUpdates:{}},s=t.getItemModel(r.id);if(!s||s.type!=="expression")throw new Error(`Programming error: updateSliderNonlinear move strategy should point to an expression item, but found ${s==null?void 0:s.type}`);r.compiled.fn||__dcg_shared_module_exports__['Vb'](r.compiled);let l=r.compiled.fn;i&&(l=I=>__dcg_shared_module_exports__['Sb'](i.forward,r.compiled.fn(I)));let c=I=>{let[E,T]=l(I);return{x:E,y:T}=e.mathToPixels.mapPoint({x:E,y:T}),[E,T]},p=r.initialValue,u=r.min,g=r.max,m=[o.x,o.y],w=__dcg_shared_module_exports__['qb'](c,m,p,u,g,1);if(!w)return a;let C=Ti(w[0],w[1]);u!==void 0&&C<u&&(C=u),g!==void 0&&C>g&&(C=g);let S=Ya(s,C,{ignoreSoftLimits:!0});n&&(S=IN(e,Aa(s),S,l));let[k,M]=l(S);return a.mathPoint.x=k,a.mathPoint.y=M,a.sliderUpdates[s.id]={value:S,model:s},a}function qT({controller:t,projection:e,transform:i,strategy:r,targetScreenPoint:o}){let n=e.reverse_map_pt(o);if(i){let p=__dcg_shared_module_exports__['Sb'](i.inverse,[n.x,n.y]);n={x:p[0],y:p[1]}}let a=r.type==="updateSliderForGlider"?{min:r.min,max:r.max}:void 0,s=PS(e,n,r.movesOn,a);if(!isFinite(s))return;let l=SN(r.movesOn,s),c={mathPoint:{x:l[0],y:l[1]},newPointLatex:void 0,sliderUpdates:{}};if(r.type==="updateGliderParameter"){let p=r.span;c.newPointLatex=p.input.slice(0,p.start)+__dcg_shared_module_exports__['uc'](s)+p.input.slice(p.end)}else if(r.type==="updateSliderForGlider"){let p=t.getItemModel(r.id);p&&p.type==="expression"&&(c.sliderUpdates[p.id]={value:s,model:p})}return c}function IN(t,e,i,r){let o=p=>{let[u,g]=r(p);return t.mathToPixels.mapPoint({x:u,y:g})},n=({x:p,y:u})=>{let{left:g,right:m,top:w,bottom:C}=t.pixelCoordinates;return p>=g&&p<=m&&u>=w&&u<=C},a=e,s=o(e),l=i,c=o(i);if(n(c)||!n(s))return i;for(;;){let p=s.x-c.x,u=s.y-c.y;if(p*p+u*u<.5)break;let g=__dcg_shared_module_exports__['ob'](a,l);if(g===a||g===l){[a,l]=n(s)?[a,a]:[l,l];break}let m=o(g);n(m)!==n(s)?[l,c]=[g,m]:[a,s]=[g,m]}return Ti(a,l)}function zT({controller:t,projection:e,transform:i,formula:r,moveStrategy:o,dragMode:n,targetScreenPoint:a,clampToViewport:s}){if(i){let{x:m,y:w}=e.pixelsToMath.mapPoint(a),[C,S]=__dcg_shared_module_exports__['Sb'](i.inverse,[m,w]);a=e.mathToPixels.mapPoint({x:C,y:S})}var l=e.pixelsToMath.mapRect({left:a.x-.5,right:a.x+.5,top:a.y+.5,bottom:a.y-.5}),c=[{min:l.left,max:l.right},{min:l.top,max:l.bottom}];let p={mathPoint:{},sliderUpdates:{}},[u,g]=o;if(u.type==="updateCoordinate"||g.type==="updateCoordinate"){let m=w9(r,c,n);if(m){let{latex:w,x:C,y:S}=m;(C!==void 0||S!==void 0)&&(p.newPointLatex=w,p.mathPoint.x=C!=null?C:p.mathPoint.x,p.mathPoint.y=S!=null?S:p.mathPoint.y)}}for(let m of[0,1]){let w=o[m];if(KT(m,n)&&w.type==="updateSlider"){let C=t.getItemModel(w.id);if(!C||C.type!=="expression")continue;let[S,k]=w.coefficients,M=Ti(k*c[m].min+S,k*c[m].max+S),I=Ya(C,M,{ignoreSoftLimits:!0}),E=(I-S)/k;if(!s||i){p.mathPoint[m===0?"x":"y"]=E,p.sliderUpdates[C.id]={value:I,model:C};continue}let[T,A]=m===0?[e.mathCoordinates.left,e.mathCoordinates.right]:[e.mathCoordinates.bottom,e.mathCoordinates.top],G=E<T?T:E>A?A:void 0;G!==void 0&&Ja(C)===void 0?(p.mathPoint[m===0?"x":"y"]=G,p.sliderUpdates[C.id]={value:k*G+S,model:C}):(p.mathPoint[m===0?"x":"y"]=E,p.sliderUpdates[C.id]={value:I,model:C})}}return p}function w9(t,e,i){if(!t.move_strategy)throw new Error("Programming error: expected move_strategy to be defined.");var r=Ti(e[0].min,e[0].max),o=Ti(e[1].min,e[1].max);let[n,a]=t.move_strategy,s=!1,l=!1,c,p="",u=0;if(n.type==="updateCoordinate"&&KT(0,i)&&(c=n.inputSpan.input,s=!0,p+=c.slice(u,n.inputSpan.start),p+=__dcg_shared_module_exports__['uc'](r),u=n.inputSpan.end),a.type==="updateCoordinate"&&KT(1,i)&&(c=a.inputSpan.input,l=!0,p+=c.slice(u,a.inputSpan.start),p+=__dcg_shared_module_exports__['uc'](o),u=a.inputSpan.end),c!==void 0)return p+=c.slice(u),{latex:p,x:s?r:void 0,y:l?o:void 0}}function KT(t,e){switch(e){case"X":return t===0;case"Y":return t===1;case"XY":return!0;default:return!1}}function TN(t,e,i){i.forEach(r=>{v9(t,e,r)})}function MN(t,e,i,r,o,n,a){var p;let s=!1,l=e.length===1,c=[];for(let u=0;u<e.length;u++){let g=e[u];if(g.tableInfo){S9(t,g,r[u],o),s=!0;continue}let m=t.getItemModel(g.calcId);if(m){if(m.type==="image")s=s||k9(t,m,g,r[u],o);else if(m.type==="expression"){let w=I9({controller:t,movedExpr:m,dragMode:(p=qi(m,{isReverseDrag:g.isReverseDrag}))!=null?p:"NONE",currentScreenPoint:i[u],targetScreenPoint:r[u],projection:o,transform:n&&n[u],isOnlyPoint:l,keyboardDirection:a});w&&c.push(w)}}}return s=s||EN(o,c),s}function GN(t,e){e.forEach(i=>{C9(t,i)})}function v9(t,e,i){if(i.tableInfo){pi(e,void 0);let s=t.getItemModel(i.tableInfo.tableId);if(!s||s.type!=="table")return;d0(s,!0)}else{let s=t.getItemModel(i.calcId);if(!s||!(s.type==="expression"||s.type==="image")||!s.formula||!s.formula.move_strategy)return;for(var r=s.formula.move_strategy,o=0;o<r.length;o++){let l=r[o];if(r[o].type==="updateCoordinate"||r[o].type==="updateGliderParameter")s.type==="image"?b0(s,!0):s.type==="expression"&&z0(s,!0);else if(l.type==="updateSlider"||l.type==="updateSliderNonlinear"||l.type==="updateSliderForGlider"){var n=t.getItemModel(l.id);if(!n||n.type!=="expression")continue;var a;if(s.type==="expression"?a=qi(s,{isReverseDrag:i.isReverseDrag}):a=void 0,a==="NONE"||o===0&&a==="Y"||o===1&&a==="X")continue;Sf(n,!0)}}}}function C9(t,e){for(let i of t.getAllItemModels())i.type==="table"?i.draggingOnGraphpaper&&d0(i,!1):i.type==="expression"?(i.sliderDragging&&Sf(i,!1),i.draggingOnGraphpaper&&z0(i,!1)):i.type==="image"&&i.draggingOnGraphpaper&&b0(i,!1)}function S9(t,e,i,r){var o=e.tableInfo.tableId,n=e.tableInfo.rowIndex,a=e.tableInfo.columnId,s=e.tableInfo.dragX,l=e.tableInfo.dragY,c=t.getItemModel(o);if(!(!c||c.type!=="table")){var p=jr(c,a);if(p){var u=r.closestPointOnScreen(i),g=r.pixelsToMath.mapRect(AN(u,.5)),m={x:__dcg_shared_module_exports__['tc'](Ti(g.left,g.right)),y:__dcg_shared_module_exports__['tc'](Ti(g.top,g.bottom))};if(s&&fc(c,{row:n+1,column:0},m.x),l){let w=p.index;fc(c,{row:n+1,column:w},m.y)}}}}function AN(t,e){return{left:t.x-e,right:t.x+e,top:t.y+e,bottom:t.y-e}}function E9(t,e,i){if(i[0]===0&&i[1]===0)return{x:e.x,y:e.y,width:t.width,height:t.height};let r=Math.cos(t.radianAngle),o=Math.sin(t.radianAngle),n=e.x-t.x,a=e.y-t.y;if(i[0]===0)return{x:t.x,y:t.y,width:t.width,height:2*i[1]*(r*a+o*n)};if(i[1]===0)return{x:t.x,y:t.y,width:2*i[0]*(r*n-o*a),height:t.height};var s=2*(t.width*i[0]*(r*n-o*a)+t.height*i[1]*(o*n+r*a))/(t.width*t.width+t.height*t.height);return{x:t.x,y:t.y,width:s*t.width,height:s*t.height}}function D9(t,e,i){let r=[{x:e.left,y:e.bottom},{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.right,y:e.bottom}],o=["x","y","width","height"],n={x:1/0,y:1/0,width:1/0,height:1/0},a={x:-1/0,y:-1/0,width:-1/0,height:-1/0};for(let s of r){let l=E9(t,s,i);for(let c of o)n[c]=Math.min(n[c],l[c]),a[c]=Math.max(a[c],l[c])}return{min:n,max:a}}function Kb(t){return t===void 0?NaN:t[0]}function k9(t,e,i,r,o){var R;var n=e.formula;if(!n||((R=n.move_strategy)==null?void 0:R.length)!==4)return!1;var a=n.dimensions,s={x:Kb(a.x),y:Kb(a.y),width:Kb(a.width),height:Kb(a.height),radianAngle:Kb(a.radianAngle)},l=i.scaleFactor||[0,0],c=l[0]!==0&&l[1]!==0,p=o.closestPointOnScreen(r),u=o.pixelsToMath.mapRect(AN(p,c?.05:.5)),g=D9(s,u,l),m=o.mathToPixels.mapRect({left:s.x-.5*s.width,right:s.x+.5*s.width,top:s.y-.5*s.height,bottom:s.y+.5*s.height}),w=Math.abs(m.right-m.left),C=Math.abs(m.bottom-m.top),S=o.mathToPixels.mapRect({left:g.min.x-.5*g.min.width,right:g.min.x+.5*g.min.width,top:g.min.y-.5*g.min.height,bottom:g.min.y+.5*g.min.height}),k=Math.abs(S.right-S.left),M=Math.abs(S.bottom-S.top);if(k<w&&k<1||M<C&&M<1)return!1;var I=["width","height","x","y"];let E=!1;for(var T=0;T<I.length;T++){var A=I[T],G=n.move_strategy[T];switch(G.type){case"updateCoordinate":var _=Ti(g.min[A],g.max[A]),P=G.inputSpan.input,N=__dcg_shared_module_exports__['tc'](_);switch(A){case"width":case"height":la(e,A,N);break;case"x":if(n.move_strategy[3].type==="updateCoordinate"){let ie=n.move_strategy[3],ve=Ti(g.min.y,g.max.y),ae=__dcg_shared_module_exports__['tc'](ve),oe=P.slice(0,G.inputSpan.start)+N+P.slice(G.inputSpan.end,ie.inputSpan.start)+ae+P.slice(ie.inputSpan.end);la(e,"center",oe)}else{let ie=P.slice(0,G.inputSpan.start)+N+P.slice(G.inputSpan.end);la(e,"center",ie)}break;case"y":if(n.move_strategy[2].type!=="updateCoordinate"){let ie=P.slice(0,G.inputSpan.start)+N+P.slice(G.inputSpan.end);la(e,"center",ie)}break;default:return A}E=!0;break;case"updateSlider":var W=t.getItemModel(G.id);if(!W||W.type!=="expression")continue;var X=G.coefficients[0],q=G.coefficients[1],B=q*g.min[A]+X,J=q*g.max[A]+X,f=Ti(B,J),O=W.latex;Zw(W,f),W.latex!==O&&(E=!0);break}}return E}function I9({controller:t,movedExpr:e,dragMode:i,currentScreenPoint:r,targetScreenPoint:o,projection:n,transform:a,isOnlyPoint:s,keyboardDirection:l}){var w,C;let c=e.formula;if(!c||((w=c.move_strategy)==null?void 0:w.length)!==2)return;let[p,u]=c.move_strategy;if(s&&p.type==="updateCoordinate"&&u.type==="updateCoordinate"){let S=n.reverse_map_pt(o),k=UT(n,S);k&&(o=n.map_pt(k))}let g=s?n.closestPointOnScreen(o):o;if(!l){let S;switch(p.type){case"updateSliderNonlinear":S=kN({controller:t,projection:n,transform:a,strategy:p,targetScreenPoint:g,clampToViewport:s});break;case"updateGliderParameter":case"updateSliderForGlider":S=qT({controller:t,projection:n,transform:a,strategy:p,targetScreenPoint:g});break;default:S=zT({controller:t,projection:n,transform:a,formula:c,moveStrategy:c.move_strategy,dragMode:i,targetScreenPoint:g,clampToViewport:s})}return S&&__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},S),{commitSliderSoftLimits:!1,transform:a,model:e})}let m;if(p.type==="updateSliderNonlinear"){if(!(l!=null&&l.x))return;m=DN({projection:n,transform:a,controller:t,strategy:p,mode:l.x,clampToViewport:s})}else if(p.type==="updateGliderParameter"||p.type==="updateSliderForGlider")m=qT({controller:t,projection:n,transform:a,strategy:p,targetScreenPoint:g});else{let S=l.x?0:1,k=l.x?g.x-r.x:g.y-r.y,M=c.move_strategy[S];if(M.type==="updateSlider"){let I=t.getItemModel(M.id);if((I==null?void 0:I.type)!=="expression")throw new Error(`Programming error: updateSlider move strategy should point to an expression item, but found ${I==null?void 0:I.type}`);let E=Ja(I);if(E){let T=n.mathToPixels.mapPoint({x:0,y:0}),A=M.coefficients[1],G=Math.abs(S===0?n.mathToPixels.mapX(E/A)-T.x:n.mathToPixels.mapY(E/A)-T.y),_=Math.ceil(1/G);k=G*_*(k>0?1:-1);let P=(C=l.x)!=null?C:l.y;(P==="bigup"||P==="bigdown")&&(k*=5)}}m=zT({controller:t,projection:n,transform:a,formula:c,moveStrategy:c.move_strategy,dragMode:i,targetScreenPoint:{x:r.x+(S===0?k:0),y:r.y+(S===1?k:0)},clampToViewport:s})}return m&&__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},m),{commitSliderSoftLimits:!0,transform:a,model:e})}function UT(t,e){if(!t.settings.showGrid)return;let i=kd(t),r=i.minorStepX,o=i.minorStepY,n=t.map_pt(e),a=Math.round(e.x/r)*r,s=Math.round(e.y/o)*o,l=5,c={x:a,y:s},p=t.map_pt(c);if(__dcg_shared_module_exports__['la'](p.x-n.x,p.y-n.y)<=l)return c}function PN(t,e){let i={i:0,x:NaN,y:NaN},r={i:1,x:NaN,y:NaN};if(!t||!e)return[i,r];let o=VN(t.typedRuntimeValue),n=VN(e.typedRuntimeValue);if(!o||!n)return[i,r];let a=LN(o,n);return i.x=a[0],i.y=a[1],a=LN(n,o),r.x=a[0],r.y=a[1],[i,r]}function VN(t){switch(t.valueType){case __dcg_shared_module_exports__['C']:case __dcg_shared_module_exports__['I']:case __dcg_shared_module_exports__['K']:return{type:"straight",def:t.value};case __dcg_shared_module_exports__['S']:return{type:"straight",def:Ac(t.value)};case __dcg_shared_module_exports__['E']:return{type:"circle",def:t.value};case __dcg_shared_module_exports__['G']:return{type:"arc",def:t.value}}}function LN(t,e){switch(t.type){case"straight":switch(e.type){case"straight":return __dcg_shared_module_exports__['Jb'](t.def,e.def);case"circle":return __dcg_shared_module_exports__['Hb'](t.def,e.def);case"arc":return __dcg_shared_module_exports__['Lb'](t.def,e.def)}case"circle":switch(e.type){case"straight":return __dcg_shared_module_exports__['Ib'](t.def,e.def);case"circle":return __dcg_shared_module_exports__['Gb'](t.def,e.def);case"arc":return __dcg_shared_module_exports__['Kb'](t.def,e.def)}case"arc":switch(e.type){case"straight":return __dcg_shared_module_exports__['Nb'](t.def,e.def);case"circle":return __dcg_shared_module_exports__['Mb'](t.def,e.def);case"arc":return __dcg_shared_module_exports__['Ob'](t.def,e.def)}}return[NaN,NaN]}var ON=[{key:"compass",objects:"Segment + Point"},{key:"midpoint",objects:"Segment"},{key:"parallel",objects:"Line + Point"},{key:"perpendicular",objects:"Line + Point"},{key:"image",objects:"2 Points"}];function Us(t){return __dcg_shared_module_exports__['Qa'](t)}function Hs(t){this.setState(t)}Hs.prototype.setState=function(t){this.state=t};Hs.prototype.getState=function(){return this.state};Hs.prototype.set=function(t,e){if(arguments.length===1){this.state=t;return}else if(typeof t=="string"){this.state=Us(this.state),this.state[t]=e;return}var i=t.length-2,r=t[i+1],o;this.state=o=Us(this.state);for(var n=0;n<=i;n++){var a=t[n];o=o[a]=Us(o[a])}o[r]=e};Hs.prototype.deepMutate=function(t,e){if(arguments.length===1){e=t,this.state=__dcg_shared_module_exports__['l'](this.state),e(this.state);return}else if(typeof t=="string"){this.state=Us(this.state),this.state[t]=__dcg_shared_module_exports__['l'](this.state[t]),e(this.state[t]);return}for(var i=t.length-2,r=t[i+1],o=this.state=Us(this.state),n=0;n<=i;n++){var a=t[n];o=o[a]=Us(o[a])}o=o[r]=__dcg_shared_module_exports__['l'](o[r]),e(o)};Hs.prototype.shallowMutate=function(t,e){if(arguments.length===1){e=t,this.state=Us(this.state),e(this.state);return}else if(typeof t=="string"){this.state=Us(this.state),this.state[t]=Us(this.state[t]),e(this.state[t]);return}for(var i=t.length-1,r=this.state=Us(this.state),o=0;o<=i;o++){var n=t[o];r=r[n]=Us(r[n])}e(r)};Hs.areShallowEqual=function(t,e){};Hs.areDeepEqual=function(t,e){};function su(t){return t?!!(T9(t)&&t!=="Vector"||t==="Circle"||t==="Arc"||t==="Polygon"):!1}function T9(t){if(!t)return!1;switch(t){case"Line":case"Ray":case"Vector":case"Segment":return!0}return!1}hd();var M9=!0,G9=!1,FN="**dcg_geo_tool_output_slider**";function A9(){return{point:__dcg_shared_module_exports__['nd'].PURPLE,line:__dcg_shared_module_exports__['nd'].BLUE,circle:__dcg_shared_module_exports__['nd'].GREEN,polygon:__dcg_shared_module_exports__['nd'].BLUE,angle:__dcg_shared_module_exports__['nd'].BLACK}}function V9(t,e){let i=[],r=t.parents;for(let o=0;o<r.length;o++){let n=r[o];n.type==="hardcoded"?i[o]=n.id:i[o]=e[n.id]}return i}var qb=class{constructor(e){this._nextObjectId=0;this.clear(),this.controller=e,this.s=this.controller.s,this._tools={};for(let i in NT)this._tools[i]=new NT[i](this)}onPreviewChange(){var a;var e=this.controller.getToolPreviewJSONState(),i=this.getUncommittedObjects();if(this.getCurrentTool()instanceof Ud&&!this.controller.getValidCursorContext()){i=__dcg_shared_module_exports__['a']({},i);for(let s in e){let l=e[s];l.type==="expression-edit-preview-latex"&&(i[s]=l)}}for(var o in i){var n=i[o];n.type==="polygon"&&this.isObjectHovered(n.parents[0])&&n.parents.push(n.parents[0])}__dcg_shared_module_exports__['Ra'](e,i)?this.controller.dispatch({type:"render"}):this.controller.dispatch({type:"set-tool-preview-state",state:i}),(a=this.controller.get2dPOIController())==null||a.updateGeoHoveredObjects()}peekNextObjectId(){return"\\token{"+this._nextObjectId.toString()+"}"}generateObjectId(){let e=this.peekNextObjectId();return this._nextObjectId+=1,e}updateNextObjectId(e){e>this._nextObjectId&&(this._nextObjectId=e)}clear(){let e={objects:{},ui:{currentTool:{name:"selection",idMap:{},reusableInputIdMap:{},lockedIds:{},inputIndex:0,outputHistory:{}},colors:A9()},hoveredObjects:[],uncommittedIds:{},selectedIds:{},nextSelectionNumber:1,fadeAnimations:{},maxAnimationEndTime:0};this.store?this.store.set(e):this.store=new Hs(e)}onFocus(e){this.clearHoveredObjects(),this.getCurrentTool().onFocus(e),this.onPreviewChange()}onMouseAction(e,i){e==="release"&&this.controller.clearRecentlyUsedComplexTool();let r=this.getCurrentTool();if(r instanceof Ud&&!this.controller.getValidCursorContext())return{committed:void 0,handled:!1};switch(this.updateNextObjectId(this.controller.findLastTokenNumber()+1),this.clearHoveredObjects(),e){case"move":return{committed:void 0,handled:r.onMove(i)};case"release":r.onMove(i);let o=r.tryCommitResults();return o.committed?__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},o),{handled:!0}):{committed:void 0,handled:!1}}}getNonObjectsState(){return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.store.getState()),{objects:void 0})}getCurrentTool(){return this.getTool(this.getToolMode())}getTool(e){return this._tools[e]}defaultColorForObject(e,i){switch(i.type){case"point":case"point-reference":case"midpoint":case"glider":case"intersection":case"vector-endpoint":return e.colors.point;case"line":case"segment":case"polygon-segment":case"ray":case"vector":case"vector-copy":case"perpendicular":case"parallel":return e.colors.line;case"circle":case"compass":case"arc":return e.colors.circle;case"polygon":return e.colors.polygon;case"angle":case"angles":case"directedangle":case"directedangles":return e.colors.angle;case"dilate":case"reflect":case"rotate":case"translate":return __dcg_shared_module_exports__['nd'].GRAY;case"slider":return __dcg_shared_module_exports__['nd'].BLACK;case"expression-edit-preview-latex":return i.color||__dcg_shared_module_exports__['nd'].BLACK;default:return i}}_deselectAll(){this.store.shallowMutate(e=>{e.nextSelectionNumber=1,e.selectedIds={}})}_modifySelection(e){let i=this.getNonObjectsState().nextSelectionNumber;this.store.shallowMutate("selectedIds",r=>{for(let o in e)e[o]?r[o]||(r[o]=i,i+=1):delete r[o]}),this.store.set("nextSelectionNumber",i)}_addObjects(e){this.store.shallowMutate("objects",i=>{for(let r of e)i[r.id]=r})}_deleteObjects(e){if(!e.length)return;let i={};this.store.shallowMutate("objects",r=>{for(let o of e)i[o]=G9,delete r[o]}),this._modifySelection(i),this.store.shallowMutate("uncommittedIds",r=>{for(let o of e)delete r[o]})}createCustomToolOutput(e){var n;this.generateIdsForNewToolOutputs(e);let{idMap:i}=this.getNonObjectsState().ui.currentTool,r=[],o=this.getNonObjectsState().ui;for(let a of e.outputs){let s=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},a),{id:i[a.id],color:this.defaultColorForObject(o,a),parents:V9(a,i)});r.push(s)}for(let a of e.inputs)if((n=a.numberInputInfo)!=null&&n.sliderInfo){let s=a.numberInputInfo.sliderInfo,l=i[`${a.id}-number`];if(Kn(l)){let c=aL(l);if(c&&c in __dcg_shared_module_exports__['hb'])continue;this.controller.getItemsByIdentifier(__dcg_shared_module_exports__['eb'](l)).length||r.push({type:"slider",latex:l+"="+s.value,sliderInfo:s,id:FN,parents:[],hidden:!1,color:"#000"})}}this._shouldNewObjectsBeMarkedUncommitted()&&this.store.shallowMutate("uncommittedIds",a=>{for(let s of r)a[s.id]=!0}),this._addObjects(r)}_getReusableIdForCurrentInput(e){let i=this.getCurrentTool();if(!i.getSpec)return;let{inputIndex:r,reusableInputIdMap:o}=this.getNonObjectsState().ui.currentTool,a=i.getSpec().inputs[r];if(!a)return;let s=a.id;return e!==void 0&&(s+="-"+e),o[s]}_createInputObject(e,i){let r,o=this._shouldNewObjectsBeMarkedUncommitted();o?r=this._getReusableIdForCurrentInput(i)||this.generateObjectId():r=this.generateObjectId(),o&&this.store.set(["uncommittedIds",r],!0);let n=this.defaultColorForObject(this.getNonObjectsState().ui,e),a=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({hidden:e.type==="point"&&!!e.previewOnly},e),{id:r,color:n});return this._addObjects([a]),r}attemptLockToolInputIn(e){let{inputIndex:i,idMap:r}=this.getNonObjectsState().ui.currentTool,o=this.getCurrentTool();if(!(o instanceof ni))return;let n=o.getSpecIdToLockIn(e,i);if(!n)return;let a=r[n];if(!a){this.getCurrentTool().canNextInputBePoint()||this.controller.dispatch({type:"select-geo-tool",tool:"selection"});return}let s=a&&this.store.getState().objects[a];if(s&&s.type==="point"&&s.previewOnly){this.controller.dispatch({type:"select-geo-tool",tool:"selection"});return}this.store.set(["ui","currentTool","inputIndex"],i+1),this.store.set(["ui","currentTool","lockedIds",a],!0);for(var l=0;l<2;l++){let c=n+"-"+l,p=r[c];p&&this.store.set(["ui","currentTool","lockedIds",p],!0)}o.didLockInput(e),this.updateFadeAnimations()}generateIdsForNewToolOutputs(e){let{idMap:i}=this.getNonObjectsState().ui.currentTool,r=!1,o={};for(let n of e.outputs)i[n.id]||(r=!0,o[n.id]=this.generateObjectId());r&&this.store.set(["ui","currentTool","idMap"],__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},i),o))}tentativelyMatchToolInput(e,i){let{currentTool:r}=this.getNonObjectsState().ui,o=r.inputIndex,n=e.inputs[o];if(!n)return;let a=n.id;this.store.set(["ui","currentTool","idMap",a],i)}storeNumberInputLatex(e,i){let{currentTool:r}=this.getNonObjectsState().ui,o=r.inputIndex,n=e.inputs[o];if(!(n!=null&&n.numberInputInfo))return;let a=n.id;this.store.set(["ui","currentTool","idMap",`${a}-number`],i)}createToolInputDependency(e,i,r){let o=this._createInputObject(e,r),{currentTool:n}=this.getNonObjectsState().ui,a=n.inputIndex,s=i.inputs[a];if(!s)throw pa("geo tool could not find input in spec",{metaData:{fnArgs:{objectDef:e,toolSpec:i,depIndex:r},localVars:{newObjectId:o,currentTool:n,inputIndex:a,input:s},toolState:this.store.getState()}}),new Error("programming error: could not find input "+a+" in spec");let l=s.id;return this.store.set(["ui","currentTool","idMap",l+"-"+r],o),o}isObjectALockedToolInput(e){return!!this.getNonObjectsState().ui.currentTool.lockedIds[e]}isDegenerateInput(e){let i=this.getCurrentTool();return i instanceof ni?i.isDegenerateInput(e):!1}getEnabledAdditionalTools(){return ON.filter(e=>!0)}getAdditionalTools(){return this.getEnabledAdditionalTools()}isAnyAdditionalToolEnabled(){return this.getAdditionalTools().length>0}setObjectSelected(e){let i={};i[e]=M9,this._modifySelection(i)}setObjectsSelected(e){__dcg_shared_module_exports__['ua'](e,i=>{this.setObjectSelected(i)})}deleteSelectedObjects(){let e=this.getSelectedObjectIdsUnsorted();this._deleteObjects(e)}isObjectHovered(e){let i=this.getNonObjectsState().hoveredObjects;for(let r of i)if("calcId"in r&&r.calcId===e)return!0;return!1}isObjectUncommitted(e){return!!this.getNonObjectsState().uncommittedIds[e]}getUncommittedObjectIds(){return Object.keys(this.getNonObjectsState().uncommittedIds)}getUncommittedObjects(){let e={},i=this.store.getState().objects,r=this.getUncommittedObjectIds();for(let o of r)e[o]=i[o];return e}isValidNextInputType(e){let i=this.getCurrentTool(),r=i.getNonPointInputType();return e&&__dcg_shared_module_exports__['aa'](e)&&(e=__dcg_shared_module_exports__['ba'](e)),!!(r&&e&&bC(e,r)||i.canNextInputBePoint()&&e&&bC(e,"point"))}recordCommittedOutput(e){this.store.shallowMutate(["ui","currentTool","outputHistory"],i=>{i[e]=!0})}updateFadeAnimations(){let e=this.controller.getAllItemModels(),i=Date.now(),r=-1/0;this.store.shallowMutate(["fadeAnimations"],o=>{var s,l;if(this.getCurrentTool().shouldHighlightRelevantObjects())for(let c of e){if(c.type!=="expression"||!c.latex)continue;let p=c.id,u=(s=c.formula)==null?void 0:s.geometry,g,m=u==null?void 0:u.valueType;u!=null&&u.unconstructable||this.controller.shouldIgnoreGraphInteractions(c)?g="fade-out":this.isValidNextInputType(__dcg_shared_module_exports__['s'])&&(su(XC(m))||__dcg_shared_module_exports__['aa'](m)&&su(XC(__dcg_shared_module_exports__['ba'](m))))||m&&__dcg_shared_module_exports__['fa'](m,__dcg_shared_module_exports__['A'])&&this.isValidNextInputType(__dcg_shared_module_exports__['C'])||this.isValidNextInputType(m)||this.store.getState().ui.currentTool.outputHistory[p]?g="fade-in":g="fade-out";let w=this.store.getState().fadeAnimations[p];if(w&&w.type!==g){let C=__dcg_shared_module_exports__['ub'](i-w.start,0,150),S=i+C-150;o[p]={type:g,start:S},r=Math.max(r,S)}else if(g==="fade-out"){let C=(l=w==null?void 0:w.start)!=null?l:i;o[p]={type:"fade-out",start:C},r=Math.max(r,C)}}else{for(let c in o)o[c]={type:"fade-in",start:i-150};r=i-150}}),isFinite(r)&&this.store.set("maxAnimationEndTime",r+150)}getToolFadeOpacity(e){let i=this.controller.getItemModel(e);if((i==null?void 0:i.type)!=="expression")return 1;let r=this.store.getState().fadeAnimations[i.id];if(!r)return 1;let o=Date.now(),n=__dcg_shared_module_exports__['ub']((o-r.start)/150,0,1),a=r.type==="fade-in"?.2:1,s=r.type==="fade-in"?1:.2;return a*(1-n)+s*n}isFading(){return Date.now()<=this.store.getState().maxAnimationEndTime}isObjectSelected(e){return!!this.getNonObjectsState().selectedIds[e]}getSelectedObjectIdsUnsorted(){return Object.keys(this.getNonObjectsState().selectedIds)}getSelectedObjectIdsSorted(){let e=this.getNonObjectsState().selectedIds,i=this.getSelectedObjectIdsUnsorted();return __dcg_shared_module_exports__['Ea'](i,o=>e[o])}deselectAllObjects(){this._deselectAll()}getToolMode(){return this.getNonObjectsState().ui.currentTool.name}setToolMode(e){let i=this.getToolMode();this.store.set(["ui","currentTool"],{name:e,idMap:{},reusableInputIdMap:{},lockedIds:{},inputIndex:0,outputHistory:e!==i?{}:this.store.getState().ui.currentTool.outputHistory}),this.updateFadeAnimations(),e!==i&&this.controller.isGraphPaperFocused()&&(Xe(this.getCurrentToolDisplayName()+"."),this.speakCurrentGeoToolHint())}resetToolMode(){this.setToolMode(this.getToolMode())}areAnyObjectsHovered(){return!!this.getNonObjectsState().hoveredObjects.length}setObjectHovered(e){this.store.deepMutate(i=>{i.hoveredObjects.push(e)})}objectIsInstanceOf(e,i){let r=e==null?void 0:e.typedRuntimeValue.valueType;if(r)return bC(r,i)}getSelectionBox(){return this.getTool("selection").getSelectionBox()}commitObjects(){this.store.set("uncommittedIds",{}),this.store.set("objects",{})}applyTransformation(e){}getProjection(){return this.controller.get2dProjection()}_getPixelsAwayFromDef(e,i,r){let o=r.typedRuntimeValue;switch(o.valueType){case __dcg_shared_module_exports__['s']:{let a=i.mapx(o.value[0]),s=i.mapy(o.value[1]);return __dcg_shared_module_exports__['la'](e.x-a,e.y-s)-6}case __dcg_shared_module_exports__['I']:case __dcg_shared_module_exports__['C']:case __dcg_shared_module_exports__['K']:case __dcg_shared_module_exports__['S']:{let n,a,s,l;if(o.valueType===__dcg_shared_module_exports__['S']){let[[g,m],[w,C]]=Ac(o.value);n=i.mapx(g),s=i.mapy(m),a=i.mapx(w),l=i.mapy(C)}else n=i.mapx(o.value[0][0]),s=i.mapy(o.value[0][1]),a=i.mapx(o.value[1][0]),l=i.mapy(o.value[1][1]);let c=o.valueType===__dcg_shared_module_exports__['I'],p=o.valueType===__dcg_shared_module_exports__['I']||o.valueType===__dcg_shared_module_exports__['K'],u=__dcg_shared_module_exports__['pa'](e.x,e.y,n,s,a,l,c,p);return u?__dcg_shared_module_exports__['la'](u[0]-e.x,u[1]-e.y):1/0}case __dcg_shared_module_exports__['E']:{let n=o.value[0][0],a=o.value[0][1],s=o.value[1],l=0,c=Math.PI*2,p=i.reverse_mapx(e.x),u=i.reverse_mapy(e.y),g=__dcg_shared_module_exports__['qa'](p,u,n,a,s,l,c);return g?i.screen.width/(i.viewport.xmax-i.viewport.xmin)*__dcg_shared_module_exports__['la'](g[0]-p,g[1]-u):1/0}case __dcg_shared_module_exports__['G']:{let n=__dcg_shared_module_exports__['Fb'](o.value);if(!n)return 1/0;let a=(s,l,c,p)=>{let u=i.mapx(s[0]),g=i.mapy(s[1]),m=i.mapx(l[0]),w=i.mapy(l[1]),C=__dcg_shared_module_exports__['pa'](e.x,e.y,u,g,m,w,c,p);return C?__dcg_shared_module_exports__['la'](C[0]-e.x,C[1]-e.y):1/0};if(n.type==="arc"){let s=i.reverse_mapx(e.x),l=i.reverse_mapy(e.y),c=__dcg_shared_module_exports__['qa'](s,l,n.center[0],n.center[1],n.radius,n.startAngle,n.endAngle);return c?i.screen.width/(i.viewport.xmax-i.viewport.xmin)*__dcg_shared_module_exports__['la'](c[0]-s,c[1]-l):1/0}else return n.type==="segment"?a(n.start,n.end,!1,!1):Math.min(a(n.start1,n.end1,!1,!0),a(n.start2,n.end2,!1,!0))}case __dcg_shared_module_exports__['A']:{let n=[];return o.value.forEach(a=>{n.push(i.mapx(a[0]),i.mapy(a[1]))}),__dcg_shared_module_exports__['rb'](n,[e.x,e.y])?0:1/0}case __dcg_shared_module_exports__['M']:case __dcg_shared_module_exports__['O']:{let n=i.screen.width/(i.viewport.xmax-i.viewport.xmin),a=i.screen.height/(i.viewport.ymax-i.viewport.ymin),[[s,l],c,p]=o.value,u=Dd(p,i),g=u/n,m=i.reverse_mapx(e.x),w=i.reverse_mapy(e.y),C=1/0,S=w-l,k=m-s,M=Math.atan2(S,k);if(__dcg_shared_module_exports__['ja'](M,c,p))__dcg_shared_module_exports__['la'](S*a,k*n)<=u+7&&(C=0);else{let I=__dcg_shared_module_exports__['oa'](m,w,s+g*Math.cos(c),l+g*Math.sin(c),s,l),E=__dcg_shared_module_exports__['oa'](m,w,s+g*Math.cos(c+p),l+g*Math.sin(c+p),s,l),T=__dcg_shared_module_exports__['la'](n*(I[0]-m),a*(I[1]-w)),A=__dcg_shared_module_exports__['la'](n*(E[0]-m),a*(E[1]-w));C=Math.min(T,A)}return C}case __dcg_shared_module_exports__['Q']:return 1/0;default:return 1/0}}getAllChoosableDefsUnordered(e){var g;if(!this.controller.isGeometry())return[];let i=[],r=e.mode==="tab",o=e.mode==="mouse",n=r&&this.controller.getActiveTool()==="box-selection",a=!1,s=!1,l=this.getCurrentTool();(g=l.isValidNextInputType)!=null&&g.call(l,__dcg_shared_module_exports__['s'])&&(a=!0),l.shouldUseJitEdges()&&(l.isValidNextInputType(__dcg_shared_module_exports__['C'])||l.isValidNextInputType(__dcg_shared_module_exports__['I'])||l.isValidNextInputType(__dcg_shared_module_exports__['K']))&&(s=!0);let c=o&&a;c&&(s=!0);let{lockedIds:p,reusableInputIdMap:u}=this.store.getState().ui.currentTool;return Qp({controller:this.controller},(m,w)=>{var S,k;if(!m.isGraphableAndInteractive)return;let C=m.assignment;for(let M in u)if(u[M]===C&&!p[C])return;if(!m.hidden&&!m.data.unconstructable&&!(this.getToolMode()==="expression-edit"&&((S=m.data)!=null&&S.depends_on_selected))&&!(n&&this.controller.isClickableId(m.calcId))&&!(r&&this.isDegenerateInput(m==null?void 0:m.assignment))&&!(r&&w)){if(m.typedRuntimeValue.valueType===__dcg_shared_module_exports__['A'])if(m.typedRuntimeValue.value.length){if(s){let M=m;if(M.typedRuntimeValue.valueType===__dcg_shared_module_exports__['A']){let I=M.typedRuntimeValue.value;for(let E=0;E<I.length;E++){let T=I[E],A=I[(E+1)%I.length],G=M.referenceLatex+".\\operatorname{segments}\\left["+(E+1)+"\\right]",_={calcId:M.calcId,listIndex:M.listIndex,hidden:M.hidden,isGraphableAndInteractive:!1,assignment:G,referenceLatex:G,data:M.data,typedRuntimeValue:{valueType:__dcg_shared_module_exports__['C'],value:[T,A]},polygonEdgeInfo:{edgeNumber:E,polygonDef:M}};i.push(_)}}}}else return;if(c&&!__dcg_shared_module_exports__['fa'](m.typedRuntimeValue.valueType,__dcg_shared_module_exports__['A'])){i.push(m);return}if((k=l.isValidNextInputType)!=null&&k.call(l,m.typedRuntimeValue.valueType)){i.push(m);return}}}),i}_getObjectsUnderMouse(e,i){let r=this.getAllChoosableDefsUnordered({mode:"mouse"}),o=this.getProjection(),n=[];r.forEach(l=>{let c=this._getPixelsAwayFromDef(e,o,l),p=l.polygonEdgeInfo?-1:0;if(c<=i){let u={def:l,layerNumber:p,pixelsAway:c};n.push(u)}});let a=this.controller.get2dSketchOrder(),s={};for(let l=0;l<a.length;l++)s[a[l]]=l;return n.sort((l,c)=>{let p=c.layerNumber-l.layerNumber;if(p!==0)return p;let u=l.pixelsAway-c.pixelsAway;if(u!==0)return u;let g=s[l.def.calcId];return s[c.def.calcId]-g}),n}convertCanvasPixelsToPoint(e){return this.getProjection().reverse_map_pt(e)}convertPointToCanvasPixels(e){return this.getProjection().map_pt(e)}deleteObjectsAndRememberReusableId(e){for(let i in e)this._deleteObjects([e[i]]);this._deleteObjects([FN]),this.store.shallowMutate(["ui","currentTool"],i=>i.reusableInputIdMap=e)}getObjectDefUnderMouse(e,i){let r=this.convertPointToCanvasPixels(e),o=this._getObjectsUnderMouse(r,i)[0];return o&&o.def}getOrCreatePointNearMouse(e,i){let r=this.convertPointToCanvasPixels(e),o=this._getObjectsUnderMouse(r,i),n=[];for(let g of o){let m=g.def,w=NF(m);w==="Point"?n.push({def:m,type:w}):(su(w)||w==="Vector")&&n.push({def:m,type:w})}let{def:a,type:s}=n[0]||{},{def:l,type:c}=n[1]||{},p=this.controller.isGeoToolEnabled("point");if(s==="Point")return{type:"def",def:a};if(su(s)&&su(c)){let g=PN(a,l).map(m=>({x:m.x,y:m.y,i:m.i,pixelsFromPoint:RN(this.getProjection(),Vd(m.x-e.x,m.y-e.y))}));if(g.sort((m,w)=>m.pixelsFromPoint-w.pixelsFromPoint),g=g.filter(m=>m.pixelsFromPoint<5),g[0]){let m=g[0].i===0?[a,l]:[l,a],w=this.findIncidentPointDef(a,l);if(w!=null&&w.hidden){let C=!1,S;if(YI(w.typedRuntimeValue,(k,M)=>{let[I,E]=k.value,T=this.getProjection().mathToPixels.mapPoint({x:I,y:E});Vd(T.x-r.x,T.y-r.y)<i&&(C=!0,S=M)}),C)return S!==void 0&&(w=JI(w,S)),{type:"spec",spec:{type:"point-reference",targetSpec:{type:"intersection",parentDefs:m},parentDefs:[w]}}}return{type:"spec",spec:{type:"intersection",parentDefs:m}}}else if(p)return NN(this.getProjection(),e,a)}else{if(p&&su(s))return NN(this.getProjection(),e,a);if(s==="Vector"){let m=Ac(a.typedRuntimeValue.value).map((w,C)=>({index:C,point:{x:w[0],y:w[1]},pixelsFromPoint:RN(this.getProjection(),Vd(w[0]-e.x,w[1]-e.y))})).sort((w,C)=>w.pixelsFromPoint-C.pixelsFromPoint).filter(w=>w.pixelsFromPoint<5);if(m.length>0)return P9(a,m[0].index===1?1:0)}}let u=L9(this.getProjection(),e);return{type:"spec",spec:{type:"point",x:u.x,y:u.y,parentDefs:[],previewOnly:!p}}}findIncidentPointDef(e,i){let r=e.typedRuntimeValue.valueType,o=i.typedRuntimeValue.valueType,n={};Qp({controller:this.controller,expandLists:!1},s=>{if(s.data.identifier&&__dcg_shared_module_exports__['fa'](s.typedRuntimeValue.valueType,__dcg_shared_module_exports__['s'])){let l=s.data.identifier;n[l]=s}});let a=__dcg_shared_module_exports__['lc']({getGeometryTree:s=>s.data.call,isPointOrListOfPoints:s=>__dcg_shared_module_exports__['fa'](s.typedRuntimeValue.valueType,__dcg_shared_module_exports__['s']),lookup:s=>n[s],resolvesTo:(s,l)=>s===l.data.identifier},e,r,i,o);if(a){let[s,l]=a,c=n[s];return l===void 0?c:JI(c,l)}}_shouldNewObjectsBeMarkedUncommitted(){return this.getToolMode()!=="selection"}clearHoveredObjects(){this.store.set("hoveredObjects",[])}getHoveredItems(){return this.store.getState().hoveredObjects}cancelToolplay(){this._deleteObjects(this.getUncommittedObjectIds()),this.clearHoveredObjects(),this.resetToolMode()}isToolplayActive(){return this.getNonObjectsState().ui.currentTool.inputIndex>0}getComputedBoard(){let e=new Nb;return Qp({controller:this.controller},(i,r)=>{e.add(i,r)}),e}findDefsForInputId(e){let i=[];return Qp({controller:this.controller},r=>{(r.assignment===e||r.referenceLatex===e)&&i.push(r)}),i}isCreatingNewTransform(){return this.getCurrentTool().toolType==="transformation"}getCurrentToolDisplayName(){return this.controller.s(this.getCurrentTool().displayName)}isCurrentToolComplex(){return this.getCurrentTool().toolType==="complex"}isCurrentToolSingleUse(){return this.getCurrentTool().toolType==="transformation"}getIconInstructionsForTool(e){let i=this.getTool(e);return i?i.icon:[]}getDisplayNameForTool(e){let i=this.getTool(e);return i?this.controller.s(i.displayName):""}speakCurrentGeoToolHint(){le(this.getCurrentTool().getHint())}};function L9(t,e){var i=UT(t,e);i&&(e=i);var r=.5/BN(t);return{x:Ti(e.x-r,e.x+r),y:Ti(e.y-r,e.y+r)}}function BN(t){return t.mapx(1)-t.mapx(0)}function RN(t,e){return BN(t)*e-6}function NN(t,e,i){var r=PS(t,e,i.typedRuntimeValue);return{type:"spec",spec:{type:"glider",t:r,parentDefs:[i]}}}function P9(t,e){return{type:"spec",spec:{type:"vector-endpoint",location:e?"end":"start",parentDefs:[t]}}}function O9(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _9="ID_",Hd=function(){function t(){O9(this,t),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return t.prototype.register=function(i){var r=_9+this._lastID++;return this._callbacks[r]=i,r},t.prototype.unregister=function(i){this._callbacks[i]||zb(!1,"Dispatcher.unregister(...): `%s` does not map to a registered callback.",i),delete this._callbacks[i]},t.prototype.waitFor=function(i){this._isDispatching||zb(!1,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var r=0;r<i.length;r++){var o=i[r];if(this._isPending[o]){this._isHandled[o]||zb(!1,"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",o);continue}this._callbacks[o]||zb(!1,"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",o),this._invokeCallback(o)}},t.prototype.dispatch=function(i){this._isDispatching&&zb(!1,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this._startDispatching(i);try{for(var r in this._callbacks)this._isPending[r]||this._invokeCallback(r)}finally{this._stopDispatching()}},t.prototype.isDispatching=function(){return this._isDispatching},t.prototype._invokeCallback=function(i){this._isPending[i]=!0,this._callbacks[i](this._pendingPayload),this._isHandled[i]=!0},t.prototype._startDispatching=function(i){for(var r in this._callbacks)this._isPending[r]=!1,this._isHandled[r]=!1;this._pendingPayload=i,this._isDispatching=!0},t.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},t}();function zb(t,e,i,r,o,n,a,s){if(e===void 0)throw new Error("invariant requires an error message argument");if(!t){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[i,r,o,n,a,s],p=0;l=new Error(e.replace(/%s/g,function(){return c[p++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var Bc=class{constructor(e=100){this.clear(),this._sizeLimit=e}clear(){this._stack=[],this._stackPointer=-1}getState(){return this._stack[this._stackPointer]}serializeForBugsnag(){function e(i){try{return JSON.stringify(i,null,2)}catch(r){return"[[could not jsonify]]"}}return{currentState:e(this._stack[this._stackPointer]),undoState:e(this._stack[this._stackPointer-1]),redoState:e(this._stack[this._stackPointer+1])}}addState(e){this.canRedo()&&this._stack.splice(this._stackPointer+1),this._stack.push(e),this._stack.length>this._sizeLimit&&this._stack.shift(),this._stackPointer=this._stack.length-1}replaceState(e){this.canRedo()&&this._stack.splice(this._stackPointer+1),this.replaceInteriorState(e)}replaceInteriorState(e){this._stack.length===0?(this._stack.push(e),this._stackPointer=0):this._stack[this._stackPointer]=e}canUndo(){return this._stackPointer>0}canRedo(){return this._stackPointer<this._stack.length-1}undo(){this.canUndo()&&(this._stackPointer-=1)}redo(){this.canRedo()&&(this._stackPointer+=1)}};var KN=t=>({value:"0",min:"0",max:t.degreeMode?"360":"2\\pi"}),F9={latex:void 0,polarDomainMin:void 0,polarDomainMax:void 0,parametricDomainMin:void 0,parametricDomainMax:void 0,parametricDomain3DuMin:void 0,parametricDomain3DuMax:void 0,parametricDomain3DvMin:void 0,parametricDomain3DvMax:void 0,parametricDomain3DrMin:void 0,parametricDomain3DrMax:void 0,parametricDomain3DphiMin:void 0,parametricDomain3DphiMax:void 0,clickableInfoLatex:void 0,colorLatex:void 0,tableColumnColorLatex:void 0,cdfMin:()=>({value:"0",min:"-10",max:"10"}),cdfMax:()=>({value:"0",min:"-10",max:"10"}),pointSize:()=>({value:9+"",min:"0",max:"10"}),tableColumnPointSize:()=>({value:9+"",min:"0",max:"10"}),labelAngle:KN,labelSize:()=>({value:"1",min:"0",max:"5"}),lineWidth:()=>({value:2.5+"",min:"0",max:"10"}),resolution:()=>({value:"50",min:"2",max:"100",step:"1"}),tableColumnLineWidth:()=>({value:2.5+"",min:"0",max:"10"}),fillOpacity:()=>({value:.4+"",min:"0",max:"1"}),lineOpacity:()=>({value:.9+"",min:"0",max:"1"}),tableColumnLineOpacity:()=>({value:.9+"",min:"0",max:"1"}),pointOpacity:()=>({value:.9+"",min:"0",max:"1"}),tableColumnPointOpacity:()=>({value:.9+"",min:"0",max:"1"}),sliderMin:void 0,sliderMax:void 0,sliderStep:void 0,residualVariable:void 0,tableHeader:void 0,tableCellValue:void 0,imageOpacity:()=>({value:"1",min:"0",max:"1"}),imageCenter:void 0,imageHeight:()=>({value:"10",min:"-10",max:"10"}),imageWidth:()=>({value:"10",min:"-10",max:"10"}),imageAngle:KN,tickerMinStep:()=>({value:"0",min:"0"}),tickerHandler:void 0},qN={tone:{paramBounds:t=>t===0?{value:"440",min:"110",max:"880"}:{value:"0.5",min:"0",max:"1"}},rgb:{paramBounds:t=>({value:"0",min:"0",max:"255",step:"1"})},hsv:{paramBounds:t=>t===0?{value:"0",min:"0",max:"360",step:"1"}:{value:"0.5",min:"0",max:"1"}}};function HN(t,e,i){var r=t.map(function(a){return{location:a.location,parsed:__dcg_shared_module_exports__['kc'](a.latex)}}),o={};for(let a of e)for(let s of r){var n=R9(a,s,i);n&&n.length&&(o[a]=n[0])}return o}function R9(t,{parsed:e,location:i},r){if(e.type==="Identifier"&&e._symbol===t){let n=F9[i];return n?[n(r)]:void 0}e.type==="Assignment"&&(e=e._expression);let o=[];switch(e.type){case"FunctionCall":{let n=e._symbol;if(qN.hasOwnProperty(n)){let a=qN[n];e.args.forEach(function(s,l){if(s.type==="Identifier"&&s._symbol===t){var c=a.paramBounds(l);c&&o.push(c)}})}break}default:return}return o}function io(t,e,i){let r=B9(t,e,i);Bi(t,r)}function Bi(t,e){if(t.focusLocation=e,!e||(e.type==="ticker"&&(t.getListModel().ticker.playing=!1,pi(t.getListModel(),void 0)),e.type==="settings"||e.type==="generic-menu"||e.type==="editable-label"||e.type==="add-item-btn"||e.type==="add-expression-btn"||e.type==="add-note-btn"||e.type==="add-table-btn"||e.type==="add-folder-btn"||e.type==="add-ticker-btn"||e.type==="add-image-btn"||e.type==="edit-list-toggle"||e.type==="hide-expression-list-btn"||e.type==="show-expression-list-btn"||e.type==="zoom-in-btn"||e.type==="zoom-restore-btn"||e.type==="search-expressions"||e.type==="replace-expressions"||e.type==="ticker"||e.type==="geo-token"||e.type==="geo-show-constructions-icon"||e.type==="geo-basic-tool"||e.type==="geo-basic-tool-menu-item"||e.type==="multi-select-more-icon"||e.type==="multi-select-transformations-icon"||e.type==="geo-header-back-link"||e.type==="multi-select-delete-icon"||e.type==="multi-select-show-hide-icon"||e.type==="new-transformation-number"||e.type==="label-points-icon"||e.type==="graph-paper"||e.type==="quest"||e.type==="global-mute-button"))return;let i=t.getItemModel(e.id);if(e.type==="expression-menu"){pi(t.getListModel(),void 0);return}else pi(t.getListModel(),i);i&&i.type==="expression"&&ua(i,!1)}function B9(t,e,i){let r=t.getItemModel(e);if(!r)return;let o=t.isInEditListMode()||t.isItemReadonly(r.id);switch(r.type){case"expression":return{type:o?"readonly-expression":r.type,id:e};case"folder":case"text":return{type:r.type,id:e};case"table":{let a={row:1,column:0},s=!1;return i&&(i.location==="cell"?a={row:i.row,column:i.column}:i==="end"?a={row:ja(r),column:0}:i==="start"?a={row:0,column:0}:i==="container"&&(s=!0)),s?{type:"table-container",id:e}:{type:r.type,id:e,location:a}}case"image":return{type:r.type,id:e,location:"name"};default:return r}}function WN(t){var e=t.getSelectedItem();if(e&&e.type==="expression"&&!e.readonly){io(t,e.id);return}if(e&&e.type==="table"&&t.focusLocation&&!e.readonly)return;var i=t.getFirstFullyVisibleItem();let r=t.getListModel();for(;i&&(i.type!=="expression"||i.readonly);)i=Tp(r,i.index);if(i){io(t,i.id);return}let o=t.createItemModel({type:"expression",id:t.generateId(),color:t.getNextColor()});Ss(t.getListModel(),o),io(t,o.id)}function $N(t){let e=t.focusLocation;if(e&&!(e.type==="settings"||e.type==="generic-menu"||e.type==="editable-label"||e.type==="add-item-btn"||e.type==="add-expression-btn"||e.type==="add-note-btn"||e.type==="add-table-btn"||e.type==="add-ticker-btn"||e.type==="add-folder-btn"||e.type==="add-image-btn"||e.type==="edit-list-toggle"||e.type==="hide-expression-list-btn"||e.type==="show-expression-list-btn"||e.type==="zoom-in-btn"||e.type==="zoom-restore-btn"||e.type==="search-expressions"||e.type==="replace-expressions"||e.type==="ticker"||e.type==="geo-token"||e.type==="geo-show-constructions-icon"||e.type==="geo-basic-tool"||e.type==="geo-basic-tool-menu-item"||e.type==="multi-select-more-icon"||e.type==="multi-select-transformations-icon"||e.type==="geo-header-back-link"||e.type==="multi-select-delete-icon"||e.type==="multi-select-show-hide-icon"||e.type==="new-transformation-number"||e.type==="label-points-icon"||e.type==="graph-paper"||e.type==="quest"||e.type==="global-mute-button"))return t.getItemModel(e.id)}function Rg(t,e,i){Bi(t,{type:"table",id:e,location:i})}function YN(t,e,i){var r=t.getItemModel(e);if(!r||r.type!=="table")return;let o=r;var n=Cn(o),a=n?n.row:-1,s=n?n.column:-1,l=o.columnModels,c=ja(o),p=l.length,u=(S,k)=>{S===-1?HT(t):S>c?WT(t):(k===-1?(k=p-1,S--):k===p&&(S++,k=0),Rg(t,e,{row:S,column:k}))},g=S=>{c>2&&JA(o,a-1),Rg(t,e,{row:S,column:s})},m=S=>{s===0||p<=2||(XA(o,s),Rg(t,e,{row:a,column:S}))};let w=!!o.columnModels[0].disabled;switch(i){case"Left":u(a,s-1);break;case"Right":u(a,s+1);break;case"Up":u(a-1,s);break;case"Down":u(a+1,s);break;case"Enter":if(a>=c)return YT(t);if(s>0||w)return u(a+1,s);if(a===c-1){let S=QA(o,a);c0(o,a);for(var C=0;C<S.length;C++)fc(o,{row:a+1,column:C},S[C]);Rg(t,e,{row:a+1,column:s});return}c0(o,a),Rg(t,e,{row:a+1,column:s});break;case"Backspace":a===0?s===0?$T(t):s===p-1||s===1&&p===3?u(0,s-1):m(s-1):s!==0?u(a,s-1):a===c||w?u(a-1,s):g(a-1);break;case"Delete":a===0?s===0?jT(t):s<p-1&&m(s):a>=c||w||g(a);break}}function HT(t){var e=t.getSelectedItem();!e||t.inAudioTraceMode()||(!Iw(t.getListModel())&&t.getTickerOpen()&&Bi(t,{type:"ticker",location:"handler"}),e=t.getSelectedItem(),!e)||io(t,e.id,"end")}function WT(t){var i;if(!t.inAudioTraceMode()){if(((i=t.getFocusLocation())==null?void 0:i.type)==="ticker"){let r=mh(t.getListModel());if(r)return io(t,r.id,"start")}if(!Tw(t.getListModel())&&!t.isInEditListMode()){let r=t.createItemModel({type:"expression",id:t.generateId(),color:t.getNextColor()});Ss(t.getListModel(),r),pi(t.getListModel(),r)}var e=t.getSelectedItem();e&&io(t,e.id,"start")}}function $T(t){if(t.isInEditListMode())return;var e=t.getSelectedItem();if(!e||t.getItemCount()===1&&e.type==="expression")return;var i=e.type==="text";let r=Bn(e);if(r){let o=t.getNumberOfItemsInFolder(r.id);if(e.index===r.index+o){Mo(e,"");return}}if(JT(t,{moveSelection:!0}),i&&ka&&pc){pi(t.getListModel(),void 0);return}e=t.getSelectedItem(),e&&io(t,e.id,"end")}function jT(t){if(!t.isInEditListMode()){var e=t.getSelectedItem();e&&(t.getItemCount()===1&&e.type==="expression"||(XT(t,{moveSelection:!0}),e=t.getSelectedItem(),e&&io(t,e.id,"start")))}}function YT(t){if(!t.isInEditListMode()){var e=t.getSelectedItem();if(e){if(e.type==="text"&&ka&&pc){Ri(),pi(t.getListModel(),void 0);return}if(sf(e).length&&t.areSlidersEnabled())return t.createSlidersForItem(e.id,sf(e).concat(""));var i=t.createItemModel({type:"expression",id:t.generateId(),color:t.getNextColor()}),r=e.index+1;e.type==="folder"&&e.collapsed&&(r+=t.getNumberOfItemsInFolder(e.id)),Ma(t.getListModel(),i,r),pi(t.getListModel(),i),e.type==="folder"&&!e.collapsed?Mo(i,e.id):e.type!=="folder"&&e.folderId&&Mo(i,e.folderId),e=t.getSelectedItem(),e&&io(t,e.id)}}}function JT(t,{moveSelection:e}){let i=t.getSelectedItem(),r=t.getListModel();if(!i||t.isItemReadonly(i.id))return;let o=Ip(r,i.index);if(t._removeExpressionSynchronously(i),e){if(!o){let n=mh(r);n&&(o=n)}pi(r,o)}else pi(r,void 0)}function XT(t,{moveSelection:e}){let i=t.getSelectedItem(),r=t.getListModel();if(!i||t.isItemReadonly(i.id))return;let o=Tp(r,i.index);if(t._removeExpressionSynchronously(i),e){if(!o){let n=Sw(r);n&&(o=n)}pi(r,o)}else pi(r,void 0)}function q9(t){switch(t){case"histogram":case"dotplot":return 12;case"boxplot":return 40}return 1/0}function z9(t){return t==="boxplot"||t==="dotplot"||t=="histogram"}function U9(t){return t==="boxplot"?3:.5}function H9(t,e){if(t.type==="dotplot"||t.type==="histogram"){let o=Math.max(1,t.xmax-t.xmin)*80/(t.binWidth?t.binWidth:1),n=.5*(e.screen.width-o)/o;return Math.max(.2,n)}return .5}function W9(t,e,i){t=__dcg_shared_module_exports__['l'](t);let r=1.2;return e&&t.xmax<0&&t.xmin<0&&t.xmax/(t.xmin-t.xmax)<r&&(t.xmax=0),e&&t.xmax>0&&t.xmin>0&&t.xmin/(t.xmax-t.xmin)<r&&(t.xmin=0),i&&t.ymax<0&&t.ymin<0&&t.ymax/(t.ymin-t.ymax)<r&&(t.ymax=0),i&&t.ymax>0&&t.ymin>0&&t.ymin/(t.ymax-t.ymin)<r&&(t.ymin=0),t}function $9(t,e,i,r){let o=t.type,n=H9(t,e),a=U9(o),s,l,c,p;if(t.xmin===t.xmax&&(i?(t.xmin-=.5,t.xmax+=.5):(t.xmin*=.5,t.xmax/=.5)),t.ymin===t.ymax&&(r?(t.ymin-=.5,t.ymax+=.5):(t.ymin*=.5,t.ymax/=.5)),i){let u=(t.xmax-t.xmin)*n;s=t.xmin-u,l=t.xmax+u}else{let u=(t.xmax/t.xmin)**n;s=t.xmin/u,l=t.xmax*u}if(r){let u=(t.ymax-t.ymin)*a;c=t.ymin-u,p=t.ymax+u}else{let u=(t.ymax/t.ymin)**a;c=t.ymin/u,p=t.ymax*u}if(z9(o)){let u=e.screen.height/e.screen.width,g=(l-s)*u;if(g>t.ymax-t.ymin&&g<q9(o)*(t.ymax-t.ymin)){let m=.5*(t.ymax+t.ymin);p=m+.5*g,c=m-.5*g}}return{xmin:s,xmax:l,ymin:c,ymax:p}}function QT(t,e){var i=Hb(t,e);if(!i)return!1;let{xAxisScale:r,yAxisScale:o}=e.settings;if(!er.fromObject(i).isValid({xAxisScale:r,yAxisScale:o}))return!1;var a=e.mapx(i.xmin),s=e.mapx(i.xmax),l=e.mapy(i.ymin),c=e.mapy(i.ymax),p=10,u=Math.abs(a)<=p&&Math.abs(c)<=p&&Math.abs(s-e.screen.width)<=p&&Math.abs(l-e.screen.height)<=p;return!u}function Hb(t,e){let i=1/0,r=-1/0,o=1/0,n=-1/0,a=0,s=t.length,l=e.settings.xAxisScale==="linear",c=e.settings.yAxisScale==="linear";for(let p=0;p<s;p++){let u=W9(t[p],l,c);if(!isFinite(u.xmax-u.xmin)||!isFinite(u.ymax-u.ymin)){a+=1;continue}if(!l&&!(u.xmax>0&&u.xmin>0)||!c&&!(u.ymax>0&&u.ymin>0)){a+=1;continue}let g=$9(u,e,l,c);g.xmin<i&&(i=g.xmin),g.xmax>r&&(r=g.xmax),g.ymin<o&&(o=g.ymin),g.ymax>n&&(n=g.ymax)}if(a!==s)return{xmin:i,xmax:r,ymin:o,ymax:n}}function JN(t){switch(t){case"letters":return"capitalLetters";case"noQwertyLetters":return"noQwertyCapitalLetters";case"noQwertyCapitalLetters":return"noQwertyLetters";default:return"letters"}}function XN(t){switch(t){case"mainNumbers":return"mainNumbers3D";default:return t}}function ZT(t){return{keypadMinimized:!$G,keypadLayout:"mainNumbers",keypadFunctionsOpen:!1,graphSettingsOpen:!1,addExpressionOpen:!1,expressionsVisible:!!t.expressions,inEditListMode:!1,isFileDraggedOver:!1,expressionsHiddenTime:void 0}}var ZN={xmin:"",xmax:"",xstep:"",ymin:"",ymax:"",ystep:"",zmin:"",zmax:""};function e3(t){return t in ZN}function j9(t){let e=t.split("\xD7");return(e.length>1&&e[0]==="1"?e.slice(1):e).join("\\cdot")}function lu(t,e){let i=__dcg_shared_module_exports__['Ya'](t,e),r="";if(i.mantissa)r=j9(i.mantissa)+"^{"+i.superscript+"}";else{let o=i.string.split("/");o.length===2?o[0][0]==="-"?r="-\\frac{"+o[0].slice(1)+"}{"+o[1]+"}":r="\\frac{"+o[0]+"}{"+o[1]+"}":r=i.string}return r=r.replace(//,"\\pi"),r}function Y9(t,e){let i=e.xAxisScale==="linear"?t.xmax-t.xmin:void 0,r=e.yAxisScale==="linear"?t.ymax-t.ymin:void 0,o={xmin:lu(t.xmin,i),xmax:lu(t.xmax,i),ymin:lu(t.ymin,r),ymax:lu(t.ymax,r)};return t.zmin!==void 0&&t.zmax!==void 0&&(o.zmin=lu(t.zmin,t.zmax-t.zmin),o.zmax=lu(t.zmax,t.zmax-t.zmin)),o}function QN(t,e){return t===0?"":lu(t,e)}function t3(t,e){return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},Y9(t,e.scales)),{xstep:QN(e.steps.xAxisStep,t.xmax-t.xmin),ystep:QN(e.steps.yAxisStep,t.ymax-t.ymin)})}function eM(){return{limitLatex:__dcg_shared_module_exports__['a']({},ZN)}}Tt();hd();function i3(t){let e=[],i=t.getAllItemModels();for(let r of i){let o=t.getItemRootNodeById(r.id);o&&e.push(o)}return e}function X9(t){let e=t.getAllItemModels();for(let i=e.length-1;i>=0;i--){let r=e[i];if(r.dcgView)return r.id}}function r3(t,e){let i=i3(t),r=0,o=i.length-1;for(;r<=o;){let n=r+Math.floor((o-r)/2),a=i[n],s=a.getBoundingClientRect();if(s.top>e)o=n-1;else if(s.bottom<e)r=n+1;else return a}}function Q9(t,e){let i=i3(t),r=0,o=i.length-1,n;for(;r<=o;){let a=r+Math.floor((o-r)/2),s=i[a];s.getBoundingClientRect().top>e?(o=a-1,n=s):r=a+1}return n}function o3(t,e){let i=jb(t);if(!i)return;if(e){let o=t.getItemRootNodeById(e);if(o){let n=o.getBoundingClientRect();if(n.height>0&&n.top<=i.top&&n.bottom>=i.top)return e}}let r=r3(t,i.top);return r?r.getAttribute("expr-id"):tM(t)}function n3(t,e){let i=jb(t);if(!i)return;let r=X9(t);if(!r)return;if(e){let n=t.getItemRootNodeById(e);if(n){let a=n.getBoundingClientRect();if(a.height>0&&a.top<=i.bottom&&a.bottom>=i.bottom||e===r&&a.bottom<=i.bottom)return e}}let o=r3(t,i.bottom);return o&&o.getAttribute("expr-id")||r}function tM(t){let e=jb(t);if(!e)return;let i=Q9(t,e.top-2);if(i)return i.getAttribute("expr-id")}function Wb(t){return t.findEl(".dcg-exppanel")}function $b(t){return Wb(t)}function jb(t){let e=Wb(t);if(e)return e.getBoundingClientRect()}function a3(t){let e=Wb(t);if(!e)return;let i=e.getBoundingClientRect(),r=e.scrollTop;return i.top-r}function s3(t){let e=t.findEl(".dcg-expressionlist");if(!e)return;let i=e.getBoundingClientRect();return{width:i.width,height:i.height}}function l3(t){let e=$b(t);if(!e)return;let i=e.querySelector(".dcg-drag-container > *");if(!i)return;let r=i.getBoundingClientRect();return{width:r.width,height:r.height}}Tt();var Yb=class{constructor(e){this.active=!1,this.controller=e;let i=$b(e);i&&(this.exppanel=i)}startDragging(e){this.active=!0,this.mousePt=e,this.setupEventListeners()}applyDrag(){var I;let i=this.controller.getListModel().dragState;if(!i)return;this.scheduleUpdateScroll();let r=this.measureDOM(i);if(!r)return;let{floatingPreviewRect:o,dragState:n,visibleRects:a}=r,s=this.controller.getItemModel(n.firstItemId);if(!s)return;let l=s.index,c=a[0];if(c&&c.id!==s.id){let E=this.controller.getItemModel(c.id);E&&E.index>l&&(l=E.index-1)}let{cachedNamedAssignmentLatex:p,cachedTokenAssignmentLatex:u}=n;for(let{id:E,rect:T}of a){if(E===s.id)continue;let A=this.controller.getItemModel(E);if(!A)return;if(A.index<s.index){if(o.top<T.top+T.height/2){l=A.index;break}}else o.bottom>T.top+T.height/2&&(l=A.index,A.type==="folder"&&A.collapsed&&(l+=this.controller.getNumberOfItemsInFolder(A.id)))}let g,m;l>s.index?(g=l,m=l+1):l<s.index?(g=l-1,m=l):(g=l-1,m=l+1);let w=this.controller.getItemModelByIndex(g),C=this.controller.getItemModelByIndex(m),S="",k="";w&&(w.type==="folder"?S=w.id:S=w.folderId),C&&(C.type==="folder"?k=C.id:k=C.folderId);let M="";if(S&&(k===S?s.type==="folder"?l=s.index:M=S:s.type!=="folder"&&this.isPreviewTopContainedInFolder(r,S)&&(M=S)),s.type==="expression")if(n.renderType==="token"){if(i.renderType==="expression"&&(p=s.latex,this.controller.convertToTokenAssignment(s,u)),n.dragTarget.type==="token")l=n.dragTarget.originalIndex,M=((I=this.controller.getGeometryFolder())==null?void 0:I.id)||"";else if(n.dragTarget.type==="expression"){let E=this.controller.getGeometryFolder();if(E){let T=this.controller.getNumberOfItemsInFolder(E.id);s.type==="expression"&&s.folderId===E.id&&(T-=1),l=E.index+T+1,M=E.id}}}else n.renderType==="expression"&&i.renderType==="token"&&(u=s.latex,this.controller.convertToNamedAssignment(s,p));return{dragState:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},n),{cachedNamedAssignmentLatex:p,cachedTokenAssignmentLatex:u}),newIndex:l,folderId:M}}measureDOM(e){let i=a3(this.controller),r=s3(this.controller),o=l3(this.controller);if(i===void 0||!r||!o)return;let n=r.height,a=o.height,s=!1,l=this.controller.getExppanelSelector(),c=l==null?void 0:l.querySelector(".dcg-template-expressioneach"),p=c==null?void 0:c.getBoundingClientRect();p&&p.top<=e.mousePt.y&&(s=!0);let u=!1,g=l==null?void 0:l.querySelector(".dcg-geo-show-constructions-pane"),m=g==null?void 0:g.getBoundingClientRect();m&&m.bottom>e.mousePt.y&&(u=!0);let w=!1;(e.dragTarget.type==="token"&&!s||e.dragTarget.type==="expression"&&u&&!s&&this.controller.canDraggedItemBeMovedIntoTokenPane())&&(w=!0);let C=e.grabOffset;w?C={x:o.width/2,y:o.height/2}:e.dragTarget.type==="token"&&(C={x:0,y:o.height/2});let S=e.mousePt.y-C.y+2,k=S-i;k=Math.max(k,-a/2),k=Math.min(k,n-a);let M=0;if(w){M=e.mousePt.x-C.x;let _=4;M=Math.min(M,r.width-o.width-_),M=Math.max(M,0),k=Math.max(k,2)}let I={left:M,top:S,bottom:S+a,height:a},E=this.controller.findFirstVisibleItem(),T=this.controller.findLastVisibleItem(),A=[];if(E&&T)for(var G=E.index;G<=T.index;G++){let _=this.controller.getItemModelByIndex(G);if(!_)continue;let P=this.controller.getItemRootNodeById(_.id);if(P&&_.id!==e.firstItemId){let N=P.getBoundingClientRect();A.push({id:_.id,rect:N})}}return{dragState:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},e),{itemTop:k,itemLeft:M,renderType:w?"token":"expression"}),floatingPreviewRect:I,visibleRects:A}}isPreviewTopContainedInFolder(e,i){let{visibleRects:r,floatingPreviewRect:o}=e;for(let{id:n,rect:a}of r)if(a.top<=o.top&&a.bottom>=o.top){let s=this.controller.getItemModel(n);if(!s)return!1;if(s.type==="folder"&&s.id===i||s.type!=="folder"&&s.folderId===i)return!0}return!1}scheduleUpdateScroll(){this.updateScrollScheduled||(this.updateScrollScheduled=!0,requestAnimationFrame(()=>{this.updateScroll(),this.updateScrollScheduled=!1}))}stop(){this.active=!1,this.tearDownEventListeners(),this.controller.dispatch({type:"stop-dragdrop"})}setupEventListeners(){H(document).on("dcg-tapmove.dragdrop",e=>{this.mousePt.x=e.changedTouches[0].clientX,this.mousePt.y=e.changedTouches[0].clientY,this.controller.dispatch({type:"update-dragdrop",mousePt:this.mousePt})}),H(document).on("dcg-tapend.dragdrop",e=>{this.stop(),e.handle("dragdrop")})}tearDownEventListeners(){H(document).off(".dragdrop")}updateScroll(){if(this.active){var e=this.exppanel.getBoundingClientRect(),i=0;i=Math.min(i,this.mousePt.y-e.top),i=Math.max(i,this.mousePt.y-e.bottom+30),i=i*e.height/900,i&&(this.exppanel.scrollTop=this.exppanel.scrollTop+i)}}};var Z9={loga:(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"\\log_{}\\left(\\right)")&&(t.write("\\log_{}"),t.typedText("("),t.keystroke("Left"),t.keystroke("Down"))},nthroot:(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"\\sqrt[]{}")&&(t.write("\\sqrt[]{}"),t.keystroke("Left"),t.keystroke("Left"))},ddx:(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"\\frac{d}{dx}")&&t.write("\\frac{d}{dx}")},arcsin:(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"\\sin^{-1}\\left(\\right)")&&(t.write("sin^{-1}"),t.typedText("("))},arccos:(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"\\cos^{-1}\\left(\\right)")&&(t.write("cos^{-1}"),t.typedText("("))},arctan:(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"\\tan^{-1}\\left(\\right)")&&(t.write("tan^{-1}"),t.typedText("("))},arcsec:(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"\\sec^{-1}\\left(\\right)")&&(t.write("sec^{-1}"),t.typedText("("))},arccsc:(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"\\csc^{-1}\\left(\\right)")&&(t.write("csc^{-1}"),t.typedText("("))},arccot:(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"\\cot^{-1}\\left(\\right)")&&(t.write("cot^{-1}"),t.typedText("("))},"A^T":(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"^{T}")&&(t.typedText("^T"),t.keystroke("Right"))},"A^-1":(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"^{-1}")&&(t.typedText("^-1"),t.keystroke("Right"))},"A^2":(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"^{2}")&&(t.typedText("^2"),t.keystroke("Right"))},"a^2":(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"^{2}")&&(t.typedText("^2"),t.keystroke("Right"))},"a^3":(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"^{3}")&&(t.typedText("^3"),t.keystroke("Right"))},"a/b":(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"\\frac{}{}")&&(t.write("\\frac{}{}"),t.keystroke("Left"))},integral:(t,e)=>{Se.canAcceptText(t,e.capExpressionSize,"\\int_{}^{}")&&t.cmd("integral")}};function Ng(t,e,i){Z9[e](t,i)}function c3(t){if(!t)return;let e=[];for(let i of t.split(" ")){let r=i.indexOf("|"),o=r!==-1?i.slice(0,r):i;e.push(o)}return e}function Bg(t,e,i){let r=c3(i);return e==="nemeth"?_c(t,{operatorNames:r}):e==="ueb"?Fc(t,{operatorNames:r}):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}}function _S(t,e,i){let r=c3(i);return e==="nemeth"?DT(t,{operatorNames:r}):e==="ueb"?kT(t,{operatorNames:r}):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}}var Zo=__dcg_shared_module_exports__['h'](j());var Kg=__dcg_shared_module_exports__['h'](j());Tt();var{Input:eW}=Kg.Components,cu=class extends Kg.Class{init(){this.ASCIICharacters=` A1B'K2L@CIF/MSP"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=`,this.ASCIITable=[],this.HomeRowCharacters="FDSJKL",this.charCodes=[],this.sixKeyModel={keysDown:0,stickyKeysDown:0};let e;for(e=0;e<this.ASCIICharacters.length;e++)this.ASCIITable.push(this.ASCIICharacters.charCodeAt(e));for(e=0;e<this.HomeRowCharacters.length;e++)this.charCodes.push(this.HomeRowCharacters.charCodeAt(e))}template(){return Kg.createElement(eW,{class:this.const("dcg-braille-input dcg-do-blur"),tabindex:()=>this.props.tabindex?this.props.tabindex():0,readonly:()=>this.props.isStatic()?"true":void 0,autocomplete:this.const("off"),autocorrect:this.const("off"),autocapitalize:this.const("off"),spellcheck:this.const("false"),onKeydown:this.bindFn(this.onKeydown),onKeyup:this.bindFn(this.onKeyup),onInput:this.bindFn(this.props.onInput),value:()=>this.props.value(),"aria-label":()=>this.props.ariaLabel()||Xa(""),didMount:this.bindFn(this.didMount),didUnmount:this.bindFn(this.props.didUnmount),placeholder:()=>this.props.placeholder?this.props.placeholder():"",size:()=>this.props.size&&this.props.size()})}didMount(e){this.rootNode=e,H(this.rootNode).on("focus",i=>{this.props.shouldFocus()||this.props.onFocusedChanged(!0,i.originalEvent||i)}).on("blur",i=>{this.props.shouldFocus()&&this.props.onFocusedChanged(!1,i.originalEvent||i)}),this.props.didMount(e),this.updateFocus()}didUpdate(){this.updateFocus()}updateFocus(){this.rootNode&&(this.props.shouldFocus()&&document.activeElement!==this.rootNode&&this.rootNode.focus(),!this.props.shouldFocus()&&document.activeElement===this.rootNode&&this.rootNode.blur())}onKeydown(e){let i=this.charCodes.indexOf(e.which);!this.props.isStatic()&&this.isSixKeyInput()&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&i!==-1?(this.sixKeyModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.sixKeyModel),{keysDown:this.addKey(this.sixKeyModel.keysDown,i),stickyKeysDown:this.addKey(this.sixKeyModel.stickyKeysDown,i)}),e.preventDefault()):this.props.onKeydown&&this.props.onKeydown(e)}onKeyup(e){let i=this.charCodes.indexOf(e.which),r=!1;return!this.props.isStatic()&&this.isSixKeyInput()&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&i!==-1?(this.sixKeyModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.sixKeyModel),{keysDown:this.removeKey(this.sixKeyModel.keysDown,i)}),this.sixKeyModel.keysDown===0&&(this.addCharacter(this.bitsToASCII(this.sixKeyModel.stickyKeysDown)),this.sixKeyModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.sixKeyModel),{stickyKeysDown:0}))):r=!0,r||e.preventDefault(),r}addKey(e,i){return e|1<<i}removeKey(e,i){return e&~(1<<i)}bitsToASCII(e){return String.fromCharCode(this.ASCIITable[e])}addCharacter(e){this.rootNode&&!this.props.isStatic()&&(this.rootNode.setRangeText(e,this.rootNode.selectionStart,this.rootNode.selectionEnd,"end"),this.props.onInput(this.rootNode.value))}isSixKeyInput(){return typeof this.props.sixKeyInput=="function"&&this.props.sixKeyInput()}};var{If:oM}=Zo.Components,tr=class extends Zo.Class{init(){this.currentBrailleValue=this.getBrailleFromLatex(this.props.latex()),this.currentBrailleMode=this.props.mode(),this.hasTranslationError=!1,this.currentLatex=this.props.latex()}isFocused(){return this.brailleInput!==void 0&&document.activeElement==this.brailleInput}getBrailleShouldFocus(){return this.props.mode()!=="none"&&this.props.brailleShouldFocus&&this.props.brailleShouldFocus()}isStatic(){return!!this.props.isStatic&&this.props.isStatic()}isInline(){return!!this.props.isInline&&this.props.isInline()}hasError(){return!!this.props.hasError&&this.props.hasError()}willUpdate(){let e=this.currentLatex!==this.props.latex(),i=this.props.mode(),r=i!==this.currentBrailleMode&&i!=="none";this.isFocused()&&!e&&!r||(this.currentLatex=this.props.latex(),(r||!this.hasTranslationError||e||this.isStatic())&&(this.currentBrailleValue=this.getBrailleFromLatex(this.props.latex()),this.hasTranslationError=!1),this.currentBrailleMode=i)}onBrailleInput(e){if(!this.props.onBrailleInput)return;let i=this.getLatexFromBraille(e);this.hasTranslationError=i.isError;let r=this.props.capExpressionSize&&this.props.capExpressionSize();if(!i.isError&&r&&r.exceedsLimit(i.value)){r.onExpressionSizeExceeded();return}this.currentBrailleValue=e,i.isError||(this.currentLatex=i.value,this.props.onBrailleInput(i.value))}getBrailleFromLatex(e,i=!1){let r=Bg(e,this.props.mode(),this.props.operatorNames&&this.props.operatorNames());return r.isError?"":i?r.value:hn.toExpandedBrailleAscii(r.value)}getLatexFromBraille(e){return _S(hn.coerceToSixDotCells(e),this.props.mode(),this.props.operatorNames&&this.props.operatorNames())}getBrailleLabel(e){return this.getBrailleFromLatex(e.replace(/\s/,"\\ "))}shouldShowBraille(){let e=this.props.mode();return e==="nemeth"||e==="ueb"}isOverflowingLeft(){return this.brailleInput?this.brailleInput.scrollLeft>0:!1}isOverflowingRight(){if(!this.brailleInput)return!1;let e=this.brailleInput.getBoundingClientRect().width,i=this.brailleInput.scrollWidth,r=this.brailleInput.scrollLeft;return i>e+r+2}didMountBrailleInput(e){this.brailleInput=e}didUnmountBrailleInput(){this.brailleInput=void 0}handleBrailleFocusChanged(e,i){this.props.onBrailleFocusedChanged&&this.props.onBrailleFocusedChanged(e,i),this.brailleInput&&(e&&this.props.selectOnFocus&&this.props.selectOnFocus()&&this.brailleInput.select(),this.isStatic()&&this.brailleInput.scrollTo(0,0))}getTooltipText(){let e=this.props.placeholder&&!this.isFocused()?this.props.placeholder():"";return Xa(this.props.latex()||e)}template(){return Zo.createElement("div",{class:Zo.const("dcg-mathquill-wrapper")},Zo.createElement(oM,{predicate:()=>this.shouldShowBraille()},()=>Zo.createElement("div",{class:()=>({"dcg-mathquill-braille":!0,"dcg-focus":this.getBrailleShouldFocus(),"dcg-invalid":this.hasError(),"dcg-mathquill-static-braille":this.isStatic(),"dcg-mathquill-braille-overflow-left":this.isOverflowingLeft(),"dcg-mathquill-braille-overflow-right":this.isOverflowingRight()}),"data-dcg-label":()=>this.props.dataLabelAttributeValue?this.props.dataLabelAttributeValue():void 0},Zo.createElement(Cg,{tooltip:()=>this.getTooltipText(),gravity:this.const("s"),delay:this.const(0),showOnTapstart:this.const(!0)},Zo.createElement(oM,{predicate:()=>this.isInline()},()=>Zo.createElement("span",{class:Zo.const("dcg-inline-braille")},()=>Xa(this.getBrailleFromLatex(this.props.latex(),!0)))),Zo.createElement(oM,{predicate:()=>!this.isInline()},()=>Zo.createElement(cu,{ariaLabel:()=>Xa(this.props.ariaLabel?this.getBrailleLabel(this.props.ariaLabel()):""),didMount:this.bindFn(this.didMountBrailleInput),didUnmount:this.bindFn(this.didUnmountBrailleInput),onFocusedChanged:this.bindFn(this.handleBrailleFocusChanged),shouldFocus:this.bindFn(this.getBrailleShouldFocus),onKeydown:this.props.onBrailleKeydown,onInput:this.bindFn(this.onBrailleInput),sixKeyInput:this.props.sixKeyInput,value:()=>this.currentBrailleValue,placeholder:()=>Xa(this.props.placeholder?this.getBrailleFromLatex(this.props.placeholder()):""),tabindex:()=>this.props.tabindex?this.props.tabindex():0,isStatic:this.bindFn(this.isStatic),size:()=>this.currentBrailleValue&&this.currentBrailleValue.length||1}))))),Zo.createElement("div",{class:Zo.const("dcg-typeset-math"),style:()=>({display:this.shouldShowBraille()&&!this.isInline()?"none":void 0}),"aria-hidden":()=>this.shouldShowBraille()},this.children))}};function Xn(){if(!(!document.activeElement||!document.activeElement.classList.contains("dcg-braille-input")))return document.activeElement}function qg(t){return!t||t.value===""}function tW(t){for(let e in t)return!1;return!0}function iW(t){var r;if(t.type!=="expression")return;let e=t.formula.assignment;return e||((r=t.formula.geometry)==null?void 0:r.identifier)}function rW(t){var i,r;let e={lookupIdentifier:{},lookupCalcId:{}};for(let o of t){let n={calcId:o.id,identifier:iW(o),referencesTheseIdentifiers:{},referencedByTheseCalcIds:{}};e.lookupCalcId[n.calcId]=n,n.identifier&&(e.lookupIdentifier[n.identifier]=n)}for(let o of t){let n=e.lookupCalcId[o.id];if(n){if(o.type==="expression"){o.folderId===__dcg_shared_module_exports__['_c']&&(n.isGarbageCollectable=!o.readonly,(o.latex.indexOf("\\operatorname{segments}")!==-1||wl(o))&&(n.deleteIfNotReferenced=!0));let a=(r=(i=o.formula.geometry)==null?void 0:i.call)==null?void 0:r.parents;a&&a.forEach(s=>{if(!s)return;let l=s[0];d3(e,n,l)})}ph(o,a=>{var s=a.match(/(\\token{[0-9]+})/g);if(s)for(let l of s){let c=__dcg_shared_module_exports__['eb'](l);c!==n.identifier&&d3(e,n,c)}})}}return e}function d3(t,e,i){e.referencesTheseIdentifiers[i]=!0;let r=t.lookupIdentifier[i];r&&(r.referencedByTheseCalcIds[e.calcId]=!0)}function oW(t,e,i){var c;let r=[];for(let p of e){let u=t.lookupCalcId[p];if(u){r.push(u);var o=u.referencesTheseIdentifiers;for(let g in o){let m=t.lookupIdentifier[g];m&&delete m.referencedByTheseCalcIds[u.calcId]}}}var n={};for(let p in i)for(let u of i[p]){let g=t.lookupIdentifier[u];g&&delete g.referencedByTheseCalcIds[p],n[u]=!0}var a={};for(let p of r){let u=p.referencesTheseIdentifiers;for(let m in u)n[m]=!0;let g=p.identifier;if(g){var s=(c=t.lookupIdentifier[g])==null?void 0:c.referencedByTheseCalcIds;if(s)for(let m in s){let w=t.lookupCalcId[m];w&&w.isGarbageCollectable&&(a[m]=!0)}}}for(let p in n){let u=t.lookupIdentifier[p];if(u&&u.deleteIfNotReferenced){var l=u.referencedByTheseCalcIds;u.calcId&&u.isGarbageCollectable&&tW(l)&&(a[u.calcId]=!0)}}for(let p of r)delete t.lookupCalcId[p.calcId],p.identifier&&delete t.lookupIdentifier[p.identifier];return Object.keys(a)}function p3(t,e,i){var c,p;let r=t.getAllItemModels(),o=e.map(u=>u.id),n=rW(r.concat(e));var a={};let s={};for(let u in i){let{nextLatex:g}=i[u],m=t.getItemModel(u);if((m==null?void 0:m.type)!=="expression")continue;let w={};for(let S of((p=(c=m.formula.geometry)==null?void 0:c.call)==null?void 0:p.parents)||[]){if(!S)continue;let[k]=S;w[k]=!0}for(let S in w)Cs(g,__dcg_shared_module_exports__['cb'](S))&&delete w[S];let C=Object.keys(w);C.length&&(s[u]=C)}let l=Object.keys(s).length>0;for(;o.length||l;){l=!1,o=oW(n,o,s);for(let u of o)a[u]=!0}return Object.keys(a)}var u3={version:is,randomSeed:"",graph:{product:"graphing-3d",threeDMode:!0,viewport:__dcg_shared_module_exports__['a']({},__dcg_shared_module_exports__['Xb'])},expressions:{list:[{id:"1",type:"expression"}]}};function FS(t){return/^\s*https?:\/\/([-a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/calculator\/./.test(t)}function nM(t){return/^\s*https?:\/\/([-a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/(geometry|geometry-beta)\/./.test(t)}function aM(t){return/^\s*https?:\/\/([-a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/3d\/./.test(t)}function sM(t){return/^\s*https?:\/\/([-a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/geometry-legacy\/./.test(t)}function h3(t){return FS(t)?"graphing":nM(t)?"geometry-calculator":sM(t)?"geometry":aM(t)?"graphing-3d":void 0}var ur=__dcg_shared_module_exports__['h'](j()),RS=class extends ur.Class{template(){return ur.createElement("form",{name:ur.const("open_graph_on_web"),target:ur.const("_blank"),method:ur.const("POST"),action:()=>this.props.saveURL(),style:()=>({display:"none"})},ur.createElement("input",{type:ur.const("text"),name:ur.const("is_open_on_web"),value:ur.const("true")}),ur.createElement("input",{type:ur.const("text"),name:ur.const("my_graphs"),value:ur.const("false")}),ur.createElement("input",{type:ur.const("text"),name:ur.const("is_update"),value:ur.const("false")}),ur.createElement("input",{type:ur.const("text"),name:ur.const("calc_state"),value:()=>this.props.stateData()}),ur.createElement("input",{type:ur.const("text"),name:ur.const("thumb_data"),value:()=>this.props.thumbData()}))}};var g3,m3=(g3=new URLSearchParams(window.location.search).get("translucent-opacity"))!=null?g3:"0.8";function dM(t){switch(t){case"parallel":case"perpendicular":case"compass":return!0}return!1}function f3(t){var e;switch(t.type){case"tick":return!1;case"tick-ticker":return!1;case"on-evaluator-changes":return!!((e=t.eventUpdates)!=null&&e.userAction);default:return!0}}var du=class{constructor(e){this.__nextItemId=0;this.__pendingImageUploads={};this.__lastSelectedIdsForPropagation={};this.nextSubscription=0;this.subscriptions={};this._queuedCallbacks=[];this._hasUnsavedChanges=!1;this.shouldScrollSelectedItemIntoViewAfterDispatch=!1;this.lastParsableObjects={};this.isExpressionSearchStrValidForReplace=!1;this.isExpressionReplaceStrValidForReplace=!1;this.expressionSearchCount=0;this.expressionSearchOpen=!1;this.geoUIActive=!1;this.showConstructionsOpen=!1;this.show3DNotice=!1;this.showTermsNotice=!1;this.activeTool="selection";this.geometryGettingStartedMessageState="pick-a-tool";this.activeTokens={selected:void 0,hovered:void 0};this.apiMethodCallStackInfo={apiMethodCallDepth:0,withHistoryReplacementDepth:0};this.canShowKeyboardShortcuts=!1;this.toastData={};this.s=Dl(()=>this.graphSettings.config.language);this.raw=(e,i)=>Xa(e,i);this.hasTranslation=e=>{let i=this.graphSettings.config.language;return Dk(e,i)};this.unpack=e=>{let i=this.graphSettings.config.language;return xd(e,i)};this.dispatch=e=>{if(e.type==="blur-focus-location"&&this.dispatcher.isDispatching()){this.runAfterDispatch(()=>{this.dispatch(e)});return}if(e.type==="set-focus-location"&&this.dispatcher.isDispatching()){this.runAfterDispatch(()=>{this.dispatch(e)});return}if(e.type==="tick"&&this.dispatcher.isDispatching()){this.runAfterDispatch(()=>{this.dispatch(e)});return}e.type==="tick"||bf("dispatch::"+this.bugsnagContext,{type:e.type}),this.dispatcher.isDispatching()&&bf("dispatch-in-dispatch::"+this.bugsnagContext,{type:e.type}),this.dispatcher.dispatch(e),this.onEventsEmitted&&this.onEventsEmitted(this.enqueuedEvents);let i;for(;i=this._queuedCallbacks.shift();)i()};this._requiresTickNextFrame=!1;this.cachedGeoTokenDepths={};this.cachedGeoTokenInfo={};this.toolPreviewJSONState={};this.updateViews=()=>{for(var e in this.subscriptions)this.subscriptions[e]()};this.bugsnagContext="";this.inPrintMode=!1;this.lastInfiniteScrollFirstDOM=void 0;this.lastInfiniteScrollLastDOM=void 0;this.hasDispatchSinceLastInfiniteScrollUpdate=!1;this.stateStack=new Bc;this.isCurrentlyDoingSetState=!1;this.isCurrentlyDoingRestoreState=!1;this.getQuestIsActive=()=>!1;var i,r;this.graphSettings=e,(r=(i=this.graphSettings).setController)==null||r.call(i,this),this.listModel=xL(this),this.layoutModel=ZT(this.graphSettings.config),this.layoutMeasurements={width:0,height:0},this.settingsViewModel=eM(),this.geometryToolbarModel=fL(),this.imageRetryState={lastAttemptTime:0,attempts:0},this.makeGeoAPI(),this.setupDispatcher(),this.toneAllowed()&&(this.toneController=new yf(this)),this.graphSettings.config.observe("tone",()=>this._updateToneAvailability()),this.graphSettings.config.observe("audio",()=>this._updateToneAvailability())}has3DNotice(){return this.show3DNotice}hasTermsNotice(){return this.showTermsNotice}hasUnsavedChanges(){return this._hasUnsavedChanges}getExpressionSearchOpen(){return this.expressionSearchOpen}getShowConstructionsOpen(){return this.showConstructionsOpen}getGeoToolbarSuppressedByAuthor(){return this.geometryToolbarModel.toolbar==="none"&&!this.shouldShowAuthorFeatures()}shouldShowGeoToolbar(){return this.isGeoUIActive()&&!this.getGeoToolbarSuppressedByAuthor()}isGeoUIActive(){return this.geoUIActive}isGeoToolActive(){return this.activeTool!=="selection"&&this.activeTool!=="box-selection"}getActiveTool(){return this.activeTool}canExpandListForItem(e){let i=this.getItemModel(e);return i?!this.isGeometry()||this.activeTool!=="selection"&&this.activeTool!=="box-selection"||this.isClickableId(e)||"label"in i&&i.label!=="":!1}getGeoModel(){return this.geoModel}getGeoToolbarGroupKeys(){return vw(this.geometryToolbarModel,this.shouldShowAuthorFeatures()).groups}getGeoToolbarItemsForGroup(e){let{items:i}=vw(this.geometryToolbarModel,this.shouldShowAuthorFeatures());return i[e]}getAllVisibleGeoToolbarItems(){let e=this.getGeoToolbarGroupKeys(),i=[];for(let r of e){let o=this.getGeoToolbarItemsForGroup(r);o&&i.push(o)}return i}getTickerOpen(){return this.areActionsEnabled()?this.listModel.ticker.open:!1}getTickerPlaying(){return this.areActionsEnabled()?this.listModel.ticker.playing:!1}hasVisibleToast(){return!__dcg_shared_module_exports__['Sa'](this.toastData)}hasVisibleAndUndoableToast(){return typeof this.toastData.undoCallback=="function"}toastUndo(){typeof this.toastData.undoCallback=="function"&&(this.toastData.undoCallback(),this.dispatch({type:"toast/close"}))}runAfterDispatch(e){this.dispatcher.isDispatching()?this._queuedCallbacks.push(e):e()}enqueueEvent(e,i){var n;let r=this.apiMethodCallStackInfo.apiMethodCallDepth>0,o=i&&!r&&f3(i)||!!((n=this.enqueuedEvents[e])!=null&&n.isUserInitiated)||e==="userMovedPoint";this.enqueuedEvents[e]={isUserInitiated:o}}pushWithHistoryReplacement(){this.apiMethodCallStackInfo.withHistoryReplacementDepth++}popWithHistoryReplacement(){if(this.apiMethodCallStackInfo.withHistoryReplacementDepth--,this.apiMethodCallStackInfo.withHistoryReplacementDepth<0)throw new Error("Programming Error: withHistoryReplacementDepth < 0")}pushAPIMethodCall(){this.apiMethodCallStackInfo.apiMethodCallDepth++}popAPIMethodCall(){this.apiMethodCallStackInfo.apiMethodCallDepth--}getGrapherDimensions(){let e=this.getGrapher();if(!e)return{width:0,height:0};let{width:i,height:r}=e.getProjection().screen;return{width:i,height:r}}setRandomSeed(e){this.graphSettings.setProperty("randomSeed",e)}getRandomSeed(){return this.graphSettings.randomSeed}shouldDispatchTickNextFrame(){return!!this._requiresTickNextFrame}markTickRequiredNextFrame(){this._requiresTickNextFrame=!0}handleTick(e){this.areActionsEnabled()&&ZV(this.listModel.ticker,{currentFrameTime:e,previousFrameTime:this.lastFrameTime})?this.dispatch({type:"tick-ticker",time:e}):this.shouldDispatchTickNextFrame()&&this.dispatch({type:"tick",time:e}),this.getGeoModel().isFading()&&this.requestRedrawGraph(),this.lastFrameTime=e}setupDispatcher(){this.dispatcher=new Hd,this.dispatcher.register(e=>{var l;let i=this.getSelectedItem(),r=this.getFocusLocation();this.shouldScrollSelectedItemIntoViewAfterDispatch=!1;let o;this.enqueuedEvents={change:void 0,graphReset:void 0,clearUnsavedChanges:void 0,openDrawer:void 0,showHotkeysModal:void 0,userMovedPoint:void 0,userClickedObject:void 0,userEditedLabel:void 0},e.type==="tick"&&(this._requiresTickNextFrame=!1),this.isCurrentlyDoingSetState=!1,this.isCurrentlyDoingRestoreState=!1,this.handleDispatchedAction(e),this.constrainMultiSelect(),this.updateTheComputedWorld();var n=this.getImageToRetry();(this.getPlayingSliders().length>0||this.isDragDropActive()||n)&&this.markTickRequiredNextFrame(),n&&this.retryLoadingFailedImage(n),this.updateGeometryGettingStartedMessageState(),e.type!=="undo"&&e.type!=="redo"&&!this.isDragDropActive()&&this.commitUndoRedoSynchronously(e),this.requestParseForAllItems(),this.isCurrentlyDoingSetState=!1,this.isCurrentlyDoingRestoreState=!1,this.enqueuedEvents.change&&((l=this.getGrapher2d())==null||l.markLabelsDirty()),this.enqueuedEvents.clearUnsavedChanges?this._hasUnsavedChanges=!1:this.enqueuedEvents.change&&(this._hasUnsavedChanges=!0);let a=this.getSelectedItem();a?(!i||i.guid!==a.guid)&&(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0):this.shouldScrollSelectedItemIntoViewAfterDispatch=!1;let s=this.getFocusLocation();s&&!__dcg_shared_module_exports__['Ra'](s,r)&&this.getFocusedItem()==a&&(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0),r&&i&&i.type==="table"&&r.type==="table"&&(!s||s.type!=="table"||r.id!==s.id)&&i.isExpanded&&(rh(i,!1),s||(o=i)),s&&a&&a.type==="table"&&NA(a),(e.type==="adjust-slider-by-dragging-thumb"||e.type==="adjust-slider-by-keyboard")&&(o=this.getItemModel(e.id)),this.updateRenderShellsBeforePaint(),this.updateViews(),o?this.scrollItemIntoView(o):this.shouldScrollSelectedItemIntoViewAfterDispatch&&this.scrollSelectedItemIntoView(),this.updateDragDrop(),this.updateRenderShellsAfterDispatch()})}updateGeometryGettingStartedMessageState(){if(!this.isGeometry())return;let e=this.geometryGettingStartedMessageState,i=this.getActiveTool(),r=i==="selection"||i==="box-selection"||i==="expression-edit";if(e==="hidden")return;if(this.isGraphSettingsOpen()||this.getGraphSettings().showGrid||this.getGraphSettings().showYAxis){this.geometryGettingStartedMessageState="hidden";return}let o=this.getItemModelByIndex(1);if(this.getItemCount()>2||!o||o.type!=="expression"||o.latex!==""||this.geoModel.getNonObjectsState().ui.currentTool.inputIndex>0){this.geometryGettingStartedMessageState="hidden";return}r||(this.geometryGettingStartedMessageState="construct")}getGeometryGettingStartedMessageState(){return this.geometryGettingStartedMessageState}handleDispatchedAction(e){var p,u,g,m,w,C,S,k,M,I,E,T,A,G,_;switch(e.type){case"render":break;case"undo":this.isGeoToolActive()&&this.cancelGeoToolplay(),this.undo();break;case"redo":this.isGeoToolActive()&&this.cancelGeoToolplay(),this.redo();break;case"clear-undoredo-history":this.clearUndoRedoHistory();break;case"on-special-key-pressed":e.key==="Enter"?YT(this):e.key==="Up"?HT(this):e.key==="Down"?WT(this):e.key==="Backspace"?$T(this):e.key==="Delete"&&jT(this);break;case"select-previous-expression":Iw(this.listModel);break;case"select-next-expression":Tw(this.listModel);break;case"toggle-label-for-all-selected-points":this.toggleLabelForAllSelectedObjects();break;case"update-all-selected-items":{let f=e.update;if(e.update.prop==="folderId"){let O;if(e.update.createFolder){O=this.generateId();let Q=this.createItemModel({type:"folder",id:O,title:e.update.value}),fe=this.getItemCount()-1,ye=gh(this.listModel,fe);ye&&ye.type==="expression"&&ye.latex===""?this._toplevelReplaceItemAt(this.getItemCount()-1,Q,!1):Ss(this.listModel,Q)}else O=e.update.value;let R=this.getItemModel(O);if(!R||R.type!=="folder")return;let re={},ie={};this.getAllSelectedItems().forEach(Q=>{var fe;if(!(Q.type==="folder"||Q.folderId===O)&&!this.isItemReadonly(Q.id)&&(re[Q.id]=Q,Q.type==="expression")){let ye=(fe=Q.formula.geometry)==null?void 0:fe.call;if(ye&&ye.symbol==="apply"){let Re=ye.parents[0]&&ye.parents[0][0];Re&&(ie[Re]=!0)}}});for(let Q in ie){let fe=xh(this.listModel,Q);fe.length===1&&fe[0].folderId!==O&&(re[fe[0].id]=fe[0])}let ve={},ae=[];for(let Q in re){let fe=re[Q];ae.push(fe)}ae.forEach(Q=>{if(Q.type==="expression"){let fe=W0(Q);fe&&(ve[Q.id]=fe)}}),ae.sort((Q,fe)=>Q.index-fe.index);let oe=this.findLastSubscriptForLetters();ae.forEach(Q=>{if(Q.type==="expression"){var fe=ve[Q.id];if(fe){let ye=this.getAutonameLatexForExpression(Q,oe);dd(this.listModel,fe,ye)}}}),ae.forEach(Q=>{Ch(this.listModel,Q.id)});let Z=R.index+this.getNumberOfItemsInFolder(O)+1;ae.forEach(Q=>{Ma(this.listModel,Q,Z),Z+=1}),ae.forEach(Q=>{Mo(Q,O)})}else if(f.prop==="visible")this.getAllSelectedItems().forEach(O=>{this.isItemReadonly(O.id)||(this._setItemHidden(O.id,!f.value),f.value===!1&&O.type==="expression"&&Vp(O,!1))});else if(e.update.prop==="color"){let O=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&nv(R,O)})}else if(e.update.prop==="colorLatex"){let O=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&hf(R,O)})}else if(e.update.prop==="showLabel"){let O=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&Vp(R,O)})}else if(e.update.prop==="label"){let O=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&bc(R,O)})}else if(e.update.prop==="dragMode"){let O=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&Lp(R,O)})}else if(e.update.prop==="lineWidth"){let O=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&Ih(R,O)})}else if(e.update.prop==="lineOpacity"){let O=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&kh(R,O)})}else if(e.update.prop==="lineStyle"){let O=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&av(R,O)})}else if(e.update.prop==="strictIntersection"){let O=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&BP(R,O)})}else if(e.update.prop==="disableGraphInteractions"){let O=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"?gk(R,O):R.type==="image"&&x0(R,O)})}}break;case"delete-all-selected-items":{let{deletedItems:f,readonlyItemsNotDeleted:O}=this.removeListOfItems(Object.keys(this.getSelectedExpressionIds()));this.garbageCollectGeo(f,{}),this.ensureAtLeastOneVisibleItem(),f.length>0&&Xe(this.s("graphing-calculator-narration-items-deleted",{count:new mo(f.length)})),O>0&&Xe(this.s("graphing-calculator-narration-locked-items-not-deleted",{count:new mo(O)})),le();break}case"upward-delete-selected-expression":JT(this,{moveSelection:!1});break;case"downward-delete-selected-expression":XT(this,{moveSelection:!1});break;case"table-show-more-rows":{let f=this.getItemModel(e.id);if(!f||f.type!=="table")return;let O=Ep(f);if(!O)return;pi(this.listModel,f),rh(f,!0),Bi(this,{type:"table",id:f.id,location:{row:O.min,column:0}})}break;case"navigate-table-by-key":YN(this,e.id,e.key);break;case"delete-item-and-animate-out":this._deleteItemAndAnimateOut(e.id,e.setFocusAfterDelete);break;case"finish-deleting-item-after-animation":this._finishDeletingItemAfterAnimation(e.id,e.setFocusAfterDelete);break;case"expression-zoom-fit":this._expressionZoomFit(e.id,e.focusAfterTap);break;case"set-expression-properties-from-api":this._setExpressionPropertiesFromAPI(e.id,e.properties);break;case"add-item-to-end-from-api":this._addItemToEndFromAPI(this.createItemModel(e.state));break;case"duplicate-expression":{let f=this.getItemModel(e.id);if(!f||f.type==="folder")return;this.copyExpressionToIndex(f,f.index+1)}break;case"duplicate-folder":{let{id:f}=e,O=this.getItemModel(f);if(!O||O.type!=="folder")return;let R=this.createItemModel(__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},zx(O,{stripDefaults:!1})),{id:this.generateId()})),re=this.getNumberOfItemsInFolder(f),ie=re+1;this._toplevelInsertItemAt(O.index+ie,R,!1,void 0);let ve=O.index+1,ae=ve+re;for(let oe=ve;oe<=ae;oe++){let Z=gh(this.listModel,oe);if(!Z||Z.type==="folder")return;this.copyExpressionToIndex(Z,oe+ie,R.id)}}break;case"insert-item-at-index":{let f=this.createItemModel(e.state);this._toplevelInsertItemAt(e.index,f,e.focus,e.folderId)}break;case"new-expression-at-end":{this.setGeoTool("selection");let f=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});this.setEditListMode(!1),Ss(this.listModel,f),io(this,f.id)}break;case"new-expression":{let f=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});this.setEditListMode(!1),this._toplevelNewItemAtSelection(f,{shouldFocus:!0}),this._closeAddExpression()}break;case"new-text":{let f=this.createItemModel({id:this.generateId(),type:"text"});this._toplevelNewItemAtSelection(f,{shouldFocus:!0}),this._closeAddExpression()}break;case"new-folder":{let f=this.createItemModel({type:"folder",id:this.generateId()});this._toplevelNewItemAtSelection(f,{shouldFocus:!0}),this._closeAddExpression()}break;case"new-images":this._uploadImagesAndWaitForThemToLoad({files:e.files}),this._closeAddExpression();break;case"change-image":this._uploadImagesAndWaitForThemToLoad({files:e.files,id:e.id});break;case"new-table":{let f=this._createTableItem();this._toplevelNewItemAtSelection(f,{shouldFocus:!0}),this._closeAddExpression()}break;case"paste-table":this._pasteTable(e.data);break;case"insert-several-expressions":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,this._insertSeveralExpressions(e.expressions);break;case"append-number-list":this._appendNumberList(e.latex);break;case"remove-item-by-id":Ch(this.listModel,e.id);break;case"replace-item-at-index":{let f=this.createItemModel(e.state);this._toplevelReplaceItemAt(e.index,f,e.focus)}break;case"create-sliders-for-item":this.createSlidersForItem(e.id,e.variables);break;case"create-sliders-for-ticker":this.createSlidersForTicker(e.variables);break;case"convert-image-to-draggable":this.convertImageToDraggable(e.id);break;case"start-dragdrop":{let f=this.getItemModel(e.dragTarget.calcId);if(!f)return;let O={x:0,y:0},R=this.getItemRootNodeById(f.id);if(R){let ve=R.getBoundingClientRect();O.y=e.grabPt.y-ve.top,O.x=e.grabPt.x-ve.left}this.isItemSelected(f.id)?pi(this.listModel,f):pi(this.listModel,void 0);let re=!1,ie=1;f.type==="folder"&&(ie+=this.getNumberOfItemsInFolder(f.id),f.collapsed||(re=!0,eh(f,!0))),af(this.listModel,{firstItemId:f.id,numberOfItems:ie,expandFolder:re,grabOffset:O,mousePt:e.mousePt,dragTarget:e.dragTarget,renderType:e.dragTarget.type,itemTop:0,itemLeft:0}),this.dragdrop_expressions.startDragging(e.mousePt)}break;case"update-dragdrop":{let f=this.listModel.dragState;if(!f)return;af(this.listModel,__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},f),{mousePt:e.mousePt}))}break;case"stop-dragdrop":{let f=this.listModel.dragState;if(!f)return;let O=this.getItemModel(f.firstItemId);if(!O)return;O.type==="folder"&&f.expandFolder&&eh(O,!1),af(this.listModel,void 0),this.ensureAtLeastOneVisibleItem()}break;case"set-selected-id":{let f=this.getItemModel(e.id);pi(this.listModel,f)}break;case"set-all-selected-ids":V0(this.listModel,e.ids);break;case"toggle-selected-with-multi-select":A0(this.listModel,e.id);break;case"set-selected-index":{let f=this.getItemModelByIndex(e.index);pi(this.listModel,f)}break;case"set-none-selected":pi(this.listModel,void 0);break;case"set-focus-location":{let f=e.location?e.location.type:"";if(f==="expression"&&this.setGeoTool("selection"),f==="table"&&(this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{inEditListMode:!1})),f==="graph-paper"){this.setGraphPaperFocus({isFocused:!0});break}Bi(this,e.location)}break;case"focus-first-expression":{this.focusFirstExpression();break}case"move-focus-to-item":io(this,e.id,e.where);break;case"blur-focus-location":this.isFocusLocationFocused(e.location)&&Bi(this,void 0),((p=e.location)==null?void 0:p.type)==="graph-paper"&&this.setGraphPaperFocus({isFocused:!1});break;case"set-folder-collapsed":{let f=this.getItemModel(e.id);if(!f||f.type!=="folder")return;eh(f,e.isCollapsed)}break;case"set-all-folders-collapsed":QL(this.listModel,e.isCollapsed);break;case"set-item-secret":{let f=this.getItemModel(e.id);if(!f)return;P0(f,e.isSecret)}break;case"set-item-readonly":{let{id:f,readonly:O}=e,R=this.getItemModel(f);if(!R)return;if(Hw(R,O),R.type==="folder")for(let re of EL(this.listModel,f))Hw(re,O)}break;case"set-item-disable-graph-interactions":{let{id:f,disableGraphInteractions:O}=e,R=this.getItemModel(f);if(!R)return;switch(R.type){case"expression":gk(R,O);break;case"image":x0(R,O);break}break}case"set-tablecolumn-disable-graph-interactions":{let{tableId:f,columnId:O,disableGraphInteractions:R}=e,re=this.getItemModel(f);if(!re||re.type!=="table")return;let ie=jr(re,O);if(!ie)return;fV(ie,R);break}case"set-tablecolumn-color":{let f=this.getItemModel(e.tableId);if(!f||f.type!=="table")return;cV(f,e.columnId,e.color)}break;case"set-tablecolumn-colorlatex":{let f=this.getItemModel(e.tableId);if(!f||f.type!=="table")return;Zx(f,e.columnId,e.colorLatex)}break;case"set-show-cdf":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;rO(f,e.showCDF)}break;case"set-cdf-min":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;_w(f,e.latex)}break;case"set-cdf-max":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;Fw(f,e.latex)}break;case"toggle-item-hidden":this._toggleItemHidden(e.id);break;case"toggle-tablecolumn-hidden":this._toggleTableColumnHidden(e.tableId,e.columnId);break;case"toggle-item-settings-menu":this.isItemSettingsMenuOpen(e.menu.guid)?this.closeItemSettingsMenu():(this.listModel.openItemMenu=e.menu,e.menu.focusFirstOption&&(e.menu.type==="geo-tool-dropdown"?Bi(this,{type:"geo-basic-tool-menu-item",tool:e.menu.tools[0]}):e.menu.type==="multi-select-more"||e.menu.type==="multi-select-transformations"?Bi(this,{type:"generic-menu",where:"start"}):Bi(this,{type:"expression-menu",id:e.menu.model.id,location:"start"})));break;case"close-item-settings-menu":this.closeItemSettingsMenu();break;case"toggle-fraction-evaluation":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;let O=md(f);LP(f,!O)}break;case"set-item-label":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;bc(f,e.label),this.enqueueEvent("userEditedLabel",e)}break;case"set-item-showlabel":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;Vp(f,e.showLabel),!e.showLabel&&!ud(f)&&(Ef(f,!1),sv(f,"NONE"))}break;case"set-item-color":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;nv(f,e.color)}break;case"set-item-description":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression"&&f.type!=="image")return;f.type==="expression"?PP(f,e.description):f.type==="image"&&VV(f,e.description)}break;case"set-item-fill":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;J0(f,e.fill),this._setItemHidden(f.id,_h(f))}break;case"set-image-opacity":{let f=this.getItemModel(e.id);if(!f||f.type!=="image")return;OV(f,e.opacity),this._setItemHidden(f.id,!1)}break;case"set-image-in-foreground":{let f=this.getItemModel(e.id);if(!f||f.type!=="image")return;f0(f,e.foreground)}break;case"image-upload-error":this.__pendingImageUploads[e.token]&&(delete this.__pendingImageUploads[e.token],this._showToast({message:this.s("graphing-calculator-text-toast-image-upload-failed")}));break;case"image-upload-success":{if(this.__pendingImageUploads[e.token])if(delete this.__pendingImageUploads[e.token],e.id){let f=this.getItemModel(e.id);f&&f.type==="image"&&_V(f,e.url)}else{let f=this.createItemModel({type:"image",id:this.generateId(),width:e.width,height:e.height,image_url:e.url,name:e.name});this._toplevelNewItemAtSelection(f,{shouldFocus:!1})}this.isUploadingImages()||(this.toastData={})}break;case"image-load-success":{let f=this.getItemModel(e.id);if(!f||f.type!=="image")return;pw(f,"loaded"),this.imageRetryState={lastAttemptTime:0,attempts:0}}break;case"image-load-error":{let f=this.getItemModel(e.id);if(!f||f.type!=="image")return;pw(f,"failed")}break;case"image-retry-loading":{let f=this.getItemModel(e.id);if(!f||f.type!=="image")return;y0(f)}break;case"set-item-dragmode":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;Lp(f,e.dragMode)}break;case"set-tablecolumn-dragmode":{let f=this.getItemModel(e.tableId);if(!f||f.type!=="table")return;lV(f,e.columnId,e.dragMode),e.dragMode!=="NONE"&&this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-points":{let f=this.getItemModel(e.tableId);if(!f||f.type!=="table")return;u0(f,e.columnId,e.bool),this._setTableColumnHidden(e.tableId,e.columnId,ew(f,e.columnId))}break;case"set-tablecolumn-lines":{let f=this.getItemModel(e.tableId);if(!f||f.type!=="table")return;nV(f,e.columnId,e.bool),this._setTableColumnHidden(e.tableId,e.columnId,ew(f,e.columnId))}break;case"set-tablecolumn-linestyle":{let f=this.getItemModel(e.tableId);if(!f||f.type!=="table")return;aV(f,e.columnId,e.lineStyle),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-linewidth":{let f=this.getItemModel(e.tableId);if(!f||f.type!=="table")return;Yx(f,e.columnId,e.lineWidth),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-lineopacity":{let f=this.getItemModel(e.tableId);if(!f||f.type!=="table")return;Jx(f,e.columnId,e.lineOpacity),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-pointsize":{let f=this.getItemModel(e.tableId);if(!f||f.type!=="table")return;Xx(f,e.columnId,e.pointSize),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-pointopacity":{let f=this.getItemModel(e.tableId);if(!f||f.type!=="table")return;Qx(f,e.columnId,e.pointOpacity),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-pointstyle":{let f=this.getItemModel(e.tableId);if(!f||f.type!=="table")return;oV(f,e.columnId,e.pointStyle),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-item-points":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;X0(f,e.points),this._setItemHidden(e.id,_h(f)),!e.points&&f.dragMode!=="NONE"&&Lp(f,"NONE")}break;case"set-item-pointstyle":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;Q0(f,e.pointStyle),this._setItemHidden(e.id,!1)}break;case"set-item-lines":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;Z0(f,e.lines),this._setItemHidden(e.id,_h(f))}break;case"set-item-extend-to-3D":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;_P(f,e.extendTo3D),this._setItemHidden(e.id,!1);let O=(u=this.grapher3d)==null?void 0:u.transition;O&&e.extendTo3D&&(O.objectIdExtendingTo3D&&((g=this.grapher3d)==null||g.webglLayer.setZboundsOnSurfaces(O.objectIdExtendingTo3D,-1/0,1/0)),O.objectIdExtendingTo3D=f.id,O.startTime=-1,O.duration=150)}break;case"set-item-linestyle":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;av(f,e.lineStyle),this._setItemHidden(e.id,!1)}break;case"set-item-arrow-mode":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;FP(f,e.value),this._setItemHidden(e.id,!1);break}case"set-item-label-dropdown-open":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;OP(f,e.open)}break;case"set-item-fillopacity":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;df(f,e.fillOpacity),this._setItemHidden(e.id,!1)}break;case"set-item-lineopacity":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;kh(f,e.lineOpacity),this._setItemHidden(e.id,!1)}break;case"set-item-pointopacity":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;pf(f,e.pointOpacity),f.showLabel||this._setItemHidden(e.id,!1)}break;case"set-item-pointsize":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;uf(f,e.pointSize),this._setItemHidden(e.id,!1)}break;case"set-item-linewidth":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;Ih(f,e.lineWidth),this._setItemHidden(e.id,!1)}break;case"set-item-resolution":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;Pw(f,e.resolution),this._setItemHidden(e.id,!1)}break;case"set-item-colorlatex":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;hf(f,e.colorLatex)}break;case"set-item-labelSize":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;gf(f,e.labelSize)}break;case"set-item-labelangle":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;Ow(f,e.labelAngle)}break;case"set-item-label-orientation":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;ek(f,e.labelOrientation)}break;case"set-suppress-text-outline":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;RP(f,e.suppressTextOutline)}break;case"set-item-interactive-label":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;Ef(f,e.interactiveLabel),e.interactiveLabel&&sv(f,"NONE")}break;case"set-item-editable-label-mode":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;f.editableLabelMode!=="NONE"&&e.editableLabelMode!=="NONE"&&f.editableLabelMode!==e.editableLabelMode&&bc(f,""),sv(f,e.editableLabelMode),e.editableLabelMode!=="NONE"&&Ef(f,!1)}break;case"plot-residuals":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;var i=f.formula.regression;if(!i)return;var r=i.residualSuggestionId;if(!r)return;var o=this.getItemModel(r);if(!o)return;$x(o,{latex:__dcg_shared_module_exports__['cb'](i.residualVariable),columnIndex:o.columnModels.length-1})}break;case"toggle-logmode":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;var n=f.isLogModeRegression;Y0(f,!n)}break;case"set-item-latex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;let O=e.latex,R=f.latex;if(this.garbageCollectGeo([],{[f.id]:{prevLatex:R,nextLatex:O}}),(O==='"'||O==="note")&&this.areNotesEnabled()){let re=this.createItemModel({id:this.generateId(),type:"text"});this._toplevelReplaceItemAt(f.index,re,!0)}else if(O==="")lO(f);else if(O==="ticker"&&this.canAddTicker())this.listModel.ticker.open=!0,this.focusLocation={type:"ticker",location:"handler"},this._removeExpressionSynchronously(f);else if(O==="folder"&&this.areFoldersEnabled()){let re=this.createItemModel({id:this.generateId(),type:"folder"});Bn(f)?(this._toplevelNewItemAtSelection(re,{shouldFocus:!0}),Wn(f,"")):this._toplevelReplaceItemAt(f.index,re,!0)}else if(O==="table"){let re=this._createTableItem();this._toplevelReplaceItemAt(f.index,re,!0)}else!this.isGeometry()&&(O==="betchacant"||O==="pride"||O==="teapot"&&this.is3dProduct())?this.runAfterDispatch(()=>{this.triggerEasterEgg&&this.triggerEasterEgg(O)}):(Wn(f,O),this.lastUserUpdatedExpressionItem=f)}break;case"set-visualization-prop":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;xP(f,e.prop,e.value)}break;case"set-clickableinfo-prop":{let f=this.getItemModel(e.id);if(!f)return;f.type==="expression"?wP(f,e.prop,e.value):f.type==="image"&&uw(f,e.prop,e.value)}break;case"set-clickableinfo-rule-latex":{let f=this.getItemModel(e.id);if(!f)return;f.type==="expression"?Gw(f,e.latex):f.type==="image"&&zV(f,e.latex)}break;case"set-folder-title":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let f=this.getItemModel(e.id);if(!f||f.type!=="folder")return;VA(f,e.title)}break;case"set-image-mq-attribute":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let f=this.getItemModel(e.id);if(!f||f.type!=="image")return;la(f,e.attribute,e.latex)}break;case"set-image-name":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let f=this.getItemModel(e.id);if(!f||f.type!=="image")return;LV(f,e.name)}break;case"set-image-draggable":{let f=this.getItemModel(e.id);if(!f||f.type!=="image")return;let O=nh(f);if(!O)return;m0(f,e.draggable),e.draggable&&(qi(O)==="NONE"||O.dragMode==="AUTO")&&Lp(O,"XY")}break;case"set-graph-settings":{for(let f in e)f!=="type"&&(f==="xAxisScale"?this.switchAxisScale("xAxisScale",e.xAxisScale):f==="yAxisScale"?this.switchAxisScale("yAxisScale",e.yAxisScale):this.graphSettings.setProperty(f,e[f]));this.grapher3d&&this.isThreeDMode()&&(this.grapher2d.redrawAllLayersSynchronously(),"backgroundColor3d"in e&&this.grapher3d.webglLayer.setBackgroundColor(e.backgroundColor3d),this.apply3dProps(e))}break;case"set-polar-mode":if(this.graphSettings.setProperty("polarMode",e.polarMode),e.polarMode){let f=this.graphSettings.xAxisScale==="logarithmic"||this.graphSettings.yAxisScale==="logarithmic",O=this.getGrapher2d();f&&O&&(this.graphSettings.setProperty("xAxisScale","linear"),this.graphSettings.setProperty("yAxisScale","linear"),O.viewportController.setViewport(O.getDefaultViewport()),O.getProjection().updateScalePairs())}break;case"set-domain-minlatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;qn(f,e.latex,e.variable)}break;case"set-domain-maxlatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;zn(f,e.latex,e.variable)}break;case"set-note-text":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let f=this.getItemModel(e.id);if(!f||f.type!=="text")return;vV(f,e.text)}break;case"set-edit-list-mode":{let f=wh(this.listModel);if(this.setEditListMode(e.isEditListMode),e.focusExpressionList){if(f===void 0&&(f=this.getItemModelByIndex(0)),!f)return;io(this,f.id,f.type==="table"&&e.isEditListMode?"container":"start")}else pi(this.listModel,void 0),Bi(this,void 0)}break;case"set-ghost-mode":this.getGraphSettings().config.setProperty("ghostMode",e.value);break;case"set-projector-mode":this.getGraphSettings().config.setProperty("projectorMode",e.value),this.isThreeDMode()&&this.grapher2d.redrawAllLayersSynchronously();break;case"set-inverted-colors":this.getGraphSettings().config.setProperty("invertedColors",e.value);break;case"set-tablecell-latex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let f=this.getItemModel(e.tableId);if(!f||f.type!=="table")return;fc(f,e.cell,e.latex)}break;case"set-state":this.externalSetState(e.state,e.opts);break;case"set-blank":this.externalSetState(this.getBlankState({degreeMode:e.degreeMode}),e.opts);break;case"clear-unsaved-changes":this.enqueueEvent("clearUnsavedChanges",e);break;case"reset-graph":{let f=this.getState();this.externalSetState(this.graphSettings.defaultState,{allowUndo:!0}),this.graphSettings.config.expressions?this.focusFirstExpression():this.setGraphPaperFocus({isFocused:!0}),this._showToast({message:this.s("graphing-calculator-text-toast-graph-reset"),undoCallback:()=>this.dispatch({type:"set-state",state:f,opts:{allowUndo:!0}})}),this.enqueueEvent("graphReset",e)}break;case"clear-graph":{if(this.triggerClearGraph){this.runAfterDispatch(()=>this.triggerClearGraph());return}let f=this.getState();this.externalSetState(this.getBlankState(),{allowUndo:!0});let O=this.getItemModelByIndex(0);O&&io(this,O.id,"end"),this._showToast({message:this.s("graphing-calculator-text-toast-graph-cleared"),undoCallback:()=>this.dispatch({type:"set-state",state:f,opts:{allowUndo:!0}})}),this.enqueueEvent("graphReset",e)}break;case"on-evaluator-changes":{if(this.onEvaluatorChangesSpy&&this.onEvaluatorChangesSpy(e.changes,e.timingData,e.graphData,e.eventUpdates),jL(this.listModel,e.changes),(m=this.toneController)==null||m.recomputeAudio(),!e.graphData)break;for(let f in e.graphData.addedGraphs){let O=e.graphData.addedGraphs[f];if(__dcg_shared_module_exports__['Tb'](O)){let R=O.filter(ie=>!__dcg_shared_module_exports__['mc'](ie.graphMode)),re=O.filter(ie=>__dcg_shared_module_exports__['mc'](ie.graphMode));(w=this.grapher2d)==null||w.updateSketch(f,R),(C=this.grapher3d)==null||C.updateSketch(f,re),$L(this.listModel,f,O)}}for(let f in e.graphData.removedGraphs)(S=this.grapher2d)==null||S.removeGraphSketch(f),(k=this.grapher3d)==null||k.removeGraphSketch(f);if(this.isThreeDMode())(M=this.grapher2d)==null||M.redrawAllLayersSynchronously();else{for(let f in e.graphData.intersections){let O=e.graphData.intersections[f];__dcg_shared_module_exports__['Tb'](O)&&((I=this.grapher2d)==null||I.updateIntersections(f,O))}(E=this.get2dPOIController())==null||E.handleTraceUpdate(),(T=this.getAudioGraph())==null||T.handleEvaluatorChange(e.graphData)}if(e.eventUpdates){let f=!1;for(let O in e.eventUpdates.updates)if(this.doesIdentifierBlockActionUpdate(O)){f=!0;break}if(!f){for(let O in e.eventUpdates.updates)this.updateLatexForIdentifier(O,e.eventUpdates.updates[O]);e.eventUpdates.objectClicked&&this.enqueueEvent("userClickedObject",e),this.onActionUpdatesAppliedSpy&&this.onActionUpdatesAppliedSpy(e.eventUpdates)}}}break;case"add-helper-expression":_L(this.listModel,e.state);break;case"tick":this._tickSliders(e.time);break;case"tick-ticker":this.tickTicker(e.time);break;case"adjust-slider-by-keyboard":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;uP(f,e.adjustment)}break;case"adjust-slider-by-dragging-thumb":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;hP(f,e.target)}break;case"set-slider-minlatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;Eh(f,e.latex)}break;case"set-slider-maxlatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;Dh(f,e.latex)}break;case"set-slider-steplatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;cf(f,e.latex)}break;case"set-slider-dragging":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;Sf(f,e.dragging)}break;case"play-slider-from-min":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;let O=Ga(f);if(isNaN(O))return;let R=gd(f.latex,O);ua(f,!1),Wn(f,R),ua(f,!0)}break;case"set-slider-isplaying":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;ua(f,e.isPlaying)}break;case"set-slider-loopmode":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;AP(f,e.loopMode)}break;case"set-slider-animationperiod":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression")return;VP(f,e.animationPeriod)}break;case"show-expressions-list":this._showExpressions(e.focusHideIcon);break;case"hide-expressions-list":this._hideExpressions(e.focusShowIcon);break;case"open-drawer":this.enqueueEvent("openDrawer",e);break;case"re-randomize":this.setRandomSeed(Ol());break;case"resize-exp-list":this._setExpListWidth(e.expListWidth);break;case"toast/show":this._showToast(e.toast);break;case"toast/close":this.closeToast();break;case"toast/undo":let P=this.toastData.undoCallback;P&&this.runAfterDispatch(P),this.toastData={};break;case"toast/learn-more":let N=this.toastData.learnMoreCallback;N&&this.runAfterDispatch(N),this.toastData={};break;case"start-moving-points":TN(this,this.listModel,e.points);break;case"stop-moving-points":GN(this,e.points);break;case"on-move-points":MN(this,e.points,e.previousScreenPts,e.screenPts,e.projection,e.transform,e.keyboardDirection)&&this.enqueueEvent("userMovedPoint",e);break;case"commit-user-requested-viewport":this._commitUserRequestedViewport(e.viewport);break;case"commit-user-requested-rotation":this.graphSettings.setProperty("worldRotation3D",e.worldRotation3D),this.graphSettings.setProperty("axis3D",e.axis3D),this.graphSettings.setProperty("speed3D",e.speed3D);break;case"toggle-lock-viewport":this.graphSettings.setProperty("userLockedViewport",!this.graphSettings.userLockedViewport);break;case"set-axis-limit-latex":this._setAxisLimitLatex(e.limit,e.latex),e.updateYZAlso&&(this._setAxisLimitLatex(e.limit==="xmin"?"ymin":"ymax",e.latex),this._setAxisLimitLatex(e.limit==="xmin"?"zmin":"zmax",e.latex)),this.lastDirectlyEditedViewport=(A=this.getGrapher())==null?void 0:A.getCurrentViewport();break;case"toggle-graph-settings":this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{graphSettingsOpen:!this.layoutModel.graphSettingsOpen}),pi(this.listModel,void 0),e.focusOnOpen&&(this.layoutModel.graphSettingsOpen?this.is3dProduct()?Bi(this,{type:"settings",location:"reverse-contrast"}):this.getGraphSettings().config.projectorMode?Bi(this,{type:"settings",location:"large-size"}):Bi(this,{type:"settings",location:"default-size"}):Bi(this,{type:"settings",location:"icon"}));break;case"close-graph-settings":this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{graphSettingsOpen:!1}),e.focusIconAfterClose&&Bi(this,{type:"settings",location:"icon"});break;case"toggle-add-expression":this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{addExpressionOpen:!this.layoutModel.addExpressionOpen}),e.focusOnOpen&&this.layoutModel.addExpressionOpen&&Bi(this,{type:"add-expression-btn"});break;case"close-add-expression":this._closeAddExpression(),e.focusIconAfterClose&&Bi(this,{type:"add-item-btn"});break;case"ui/container-resized":this.layoutMeasurements={width:e.size.width,height:e.size.height},this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;break;case"enter-printmode":this.inPrintMode=!0;break;case"exit-printmode":this.inPrintMode=!1;break;case"expression-size-exceeded":this._showToast({message:this.s("graphing-calculator-text-toast-expression-size-limit")});break;case"keypad/set-layout":this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{keypadLayout:e.layout,keypadFunctionsOpen:!1});break;case"keypad/set-minimized":this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{keypadMinimized:e.minimized,keypadLayout:"mainNumbers"}),this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,this.needsFakeKeypad()||WN(this),le(e.minimized?this.s("graphing-calculator-narration-keypad-hidden"):this.s("graphing-calculator-narration-keypad-visible"));break;case"keypad/type-text":this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch(()=>{let f=Se.getFocusedMathquill();f&&Se.canAcceptText(f,this.getCapExpressionSize(),e.text)&&(f.typedText(e.text),Se.simulateUserChangedLatex(f))});break;case"keypad/press-key":this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch(()=>{let f=Se.getFocusedMathquill();f&&Se.simulateKeypress(f,e.key)});break;case"keypad/audio-trace":this.handleAudioTraceCommand(e.command);break;case"set-audio-trace-speed":this.setAudioTraceSpeed(e.speed);break;case"keypad/custom-command":this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch(()=>{let f=Se.getFocusedMathquill();f&&(Ng(f,e.command,{capExpressionSize:this.getCapExpressionSize()}),Se.simulateUserChangedLatex(f))});break;case"keypad/shift":this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{keypadLayout:JN(this.getKeypadLayout()),keypadFunctionsOpen:!1});break;case"keypad/123":this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{keypadLayout:"mainNumbers",keypadFunctionsOpen:!1});break;case"keypad/abc":this.isQwertyKeyboardEnabled()?this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{keypadLayout:"letters",keypadFunctionsOpen:!1}):this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{keypadLayout:"noQwertyLetters",keypadFunctionsOpen:!1});break;case"keypad/audio":this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{keypadMinimized:!1,keypadLayout:"audio",keypadFunctionsOpen:!1});break;case"keypad/functions":this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{keypadFunctionsOpen:!this.isKeypadFunctionsPopoverOpen()});break;case"grapher/drag-start":break;case"grapher/drag-move":break;case"grapher/drag-end":break;case"open-on-web":this._openOnWeb();break;case"file-is-dragged-over":this.listModel.openItemMenu=void 0,this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{isFileDraggedOver:!0});break;case"file-is-not-dragged-over":this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{isFileDraggedOver:!1});break;case"zoom":(G=this.getGrapher())==null||G.viewportController.zoom(e.direction);break;case"set-hovered-image":{let f=this.getItemModel(e.id);if(!f||f.type!=="image")return;uw(f,"hoveredImage",e.url)}break;case"set-depressed-image":{let f=this.getItemModel(e.id);if(!f||f.type!=="image")return;uw(f,"depressedImage",e.url)}break;case"clickable-item-clicked":this.handleClickableItemClicked(e.id,e.listIndex);break;case"action-single-step":{let f=this.getItemModel(e.id);if(!f||f.type!=="expression"||!f.formula.action_value)return;this.evaluator.addActionStepEvent(f.id)}break;case"update-expression-search-str":this.updateExpressionSearchStr(e.str);break;case"update-expression-replace-str":this.updateExpressionReplaceStr(e.str);break;case"rename-identifier-global":this.suggestedIdentifierRename=void 0,dd(this.listModel,e.search,e.replace);break;case"rename-identifier-in-item":this.suggestedIdentifierRename=void 0;let W=this.getItemModel(e.id);W&&W.type==="folder"?dd(this.listModel,e.search,e.replace,{limitToFolder:e.id}):dd(this.listModel,e.search,e.replace,{limitToItem:e.id});break;case"update-ticker-handlerlatex":this.updateTickerHandlerLatex(e.latex);break;case"update-ticker-minsteplatex":this.updateTickerMinStepLatex(e.latex);break;case"set-braille-mode":this.setBrailleMode(e.mode);break;case"set-six-key-input":this.setSixKeyInput(e.useSixKeyInput);break;case"set-show-constructions-open":if(this.showConstructionsOpen=e.open,e.setFocus)if(!e.open)Bi(this,{type:"geo-show-constructions-icon"});else for(let f in this.cachedGeoTokenInfo){let{calcId:O}=this.cachedGeoTokenInfo[f];if(this.getItemModel(O)){Bi(this,{type:"geo-token",identifier:f});break}}break;case"select-geo-tool":this.listModel.openItemMenu=void 0,this.clearRecentlyUsedComplexTool(),this.setGeoTool(e.tool),__dcg_shared_module_exports__['$b'](e.tool)||e.tool==="selection"||pi(this.listModel,void 0),e.focusGraphPaper&&this.setGraphPaperFocus({isFocused:!0}),this.closeToast();break;case"cancel-geo-toolplay":this.cancelGeoToolplay();break;case"commit-geo-objects":{let f=[],O=[];var a=this.findLastSubscriptForLetters(),s={};let R=ae=>{let oe=s[ae];if(oe)return oe.assignmentLatex;let Z=this.getItemModel(ae);if(!Z||Z.type!=="expression")return ae;var Q=this._autoNameExpression(Z,a);return oe=s[ae]={model:Z,assignmentLatex:Q},oe.assignmentLatex},re=[];for(let ae in e.committed){var l=e.committed[ae];__dcg_shared_module_exports__['$b'](l.type)&&re.push(ae);var c=jI(l,!0,R);c&&(c.sliderInfo?O.push({latex:c.latex,color:c.color,sliderInfo:c.sliderInfo}):f.push(__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},c),{tokenId:ae})))}let ie=this.listModel.__toolPreviewIdToModel;if(f.length){let ae=this.getGeometryFolder(),oe=ae?ae.index+this.getNumberOfItemsInFolder(ae.id)+1:0;f.forEach(Z=>{var fe;let Q;for(let ye in ie){let Re=ie[ye];if(((fe=Er(Re))==null?void 0:fe.latex)===Z.tokenId){Q=Re;break}}Q?(Q.latex=Z.latex,Q.color=Z.color,Q.showLabel=!!Z.showLabel,Q.showAngleLabel=Z.showAngleLabel!==!1,ae&&(Q.folderId=ae.id)):Q=this.createItemModel({id:this.generateId(),type:"expression",showLabel:Z.showLabel,showAngleLabel:Z.showAngleLabel,latex:Z.latex,folderId:ae&&ae.id,color:Z.color}),ae?(Ma(this.listModel,Q,oe),oe+=1):Ss(this.listModel,Q),this.getGeoModel().recordCommittedOutput(Q.id),this.recordComplexToolUse()})}O.forEach(ae=>{let oe;for(let Z in ie){let Q=ie[Z];if(Q.latex===ae.latex){oe=Q;break}}oe?(oe.latex=ae.latex,oe.color=ae.color,Eh(oe,ae.sliderInfo.min),Dh(oe,ae.sliderInfo.max)):oe=this.createItemModel({id:this.generateId(),type:"expression",latex:ae.latex,color:ae.color,slider:{hardMin:!0,hardMax:!0,min:ae.sliderInfo.min,max:ae.sliderInfo.max}}),Ma(this.listModel,oe,0),this.getGeoModel().recordCommittedOutput(oe.id)}),re.length===1&&this.transformAllSelectedItemsByAssignmentLatex(re[0]),this.geoModel.isCurrentToolSingleUse()&&this.setGeoTool("selection");let ve=e.toolIdToLatex[1];if(this.geoModel.getToolMode()==="expression-edit"&&ve){let ae=$I(ve,R);this.writeIdentifierIntoCurrentMathquill(ae)}this.isGeometry()&&this.getGeoModel().updateFadeAnimations()}break;case"rename-identifier":{let f=e.from,O=e.to,R=__dcg_shared_module_exports__['eb'](f),re=this.getGeometryFolder();re&&this.getItemsByIdentifier(R).forEach(ie=>{e.geoFolder&&ie.folderId!==re.id?(Mo(ie,re.id),pd(this.listModel,ie.index,re.index+1,1)):!e.geoFolder&&ie.folderId===re.id&&(pd(this.listModel,ie.index,re.index+this.getNumberOfItemsInFolder(re.id),1),Mo(ie,""))}),dd(this.listModel,f,O)}break;case"set-active-token":this.activeTokens[e.style]=e.identifier;break;case"unset-active-token":this.activeTokens[e.style]===e.identifier&&(this.activeTokens[e.style]=void 0);break;case"select-expression-that-defines-token":{let f=this.getExpressionIdForIdentifier(e.identifier);if(!f||(this.setGeoTool("selection"),this.isItemNotSelectableBecauseItsSecret(f)))return;e.multiSelectMode||e.toggle?A0(this.listModel,f):this.tryInsertTokenIntoMathquill(f,void 0)||pi(this.listModel,this.getItemModel(f))}break;case"close-expression-search":this.expressionSearchOpen=!1,this.updateExpressionSearchStr("");let X=this.getItemModelByIndex(0);X&&io(this,X.id,"end");break;case"open-expression-search":this.expressionSearchOpen=!0,this.focusLocation={type:"search-expressions"};let q=e.latex;e.rename&&!Kn(q)&&(q="");let B=e.rename?q?`\\operatorname{rename}\\ ${q}\\to`:"\\operatorname{rename}\\ ":q;this.updateExpressionSearchStr(B);break;case"open-ticker":this.listModel.ticker.open=!0,this.focusLocation={type:"ticker",location:"handler"},this._closeAddExpression();break;case"close-ticker":this.listModel.ticker.open=!1,this.listModel.ticker.playing=!1,this.listModel.ticker.minStepLatex="",this.listModel.ticker.handlerLatex="";break;case"toggle-ticker":this.listModel.ticker.playing=!this.listModel.ticker.playing,this.listModel.ticker.lastTickTime=void 0,this.pauseAllSliders();break;case"set-tool-preview-state":this.setToolPreviewState(e.state);break;case"apply-transformation-to-selected":this.transformAllSelectedItemsByAssignmentLatex(e.assignmentLatex),this.closeItemSettingsMenu();break;case"dismiss-3d-notice":this.show3DNotice=!1,e.focusFirstExpression&&this.focusFirstExpression();break;case"dismiss-terms-notice":this.showTermsNotice=!1,e.focusFirstExpression&&this.focusFirstExpression();break;case"set-geometry-toolbar":{bL(this.geometryToolbarModel,e.toolbar);break}case"set-geometry-custom-toolbar-setting":{ww(this.geometryToolbarModel,e.tool,e.value);break}case"set-author-mode":{this.setAuthorMode(e.enabled);break}case"set-translucent-surfaces":{this.getGraphSettings().config.setProperty("translucentSurfaces",e.value);break}case"mute-global":case"unmute-global":{e.type==="unmute-global"&&this.runAfterDispatch(()=>{var f;(f=this.getAudioGraph())==null||f.exitAudioTrace()}),(_=this.toneController)==null||_.handleAction(e);break}default:return e}}switchAxisScale(e,i){var o;if(!i||i===this.graphSettings[e])return;this.graphSettings.setProperty("polarMode",!1);let r;this.getAllItemModels().forEach(n=>{if(this.isExpressionZoomFit(n)){if(!this.getBoundingBoxesForZoomFit(n))return;r=n.id}}),this.graphSettings.setProperty(e,i),(o=this.getGrapher2d())==null||o.getProjection().updateScalePairs(),!(r&&this._expressionZoomFit(r,!1,!0))&&this.enforceAxisLimitsForScale(e)}clearRecentlyUsedComplexTool(){clearTimeout(this.recentlyCompletedComplexToolTimeout),this.recentlyCompletedComplexToolTimeout=void 0}recordComplexToolUse(){let e=this.getActiveTool();dM(e)&&(clearTimeout(this.recentlyCompletedComplexToolTimeout),this.recentlyCompletedComplexToolTimeout=setTimeout(()=>{this.recentlyCompletedComplexToolTimeout=void 0,this.dispatch({type:"render"})},2e3))}getComplexToolWasRecentlyUsed(){return!!this.recentlyCompletedComplexToolTimeout}enforceAxisLimitsForScale(e){let i=this.getGrapher2d();if(!i)return;let r=i.getDefaultViewport();if(!r)return;e==="xAxisScale"?(this._setAxisLimitLatex("xmin",__dcg_shared_module_exports__['bb'](r.xmin)),this._setAxisLimitLatex("xmax",__dcg_shared_module_exports__['bb'](r.xmax))):(this._setAxisLimitLatex("ymin",__dcg_shared_module_exports__['bb'](r.ymin)),this._setAxisLimitLatex("ymax",__dcg_shared_module_exports__['bb'](r.ymax))),this.graphSettings.xAxisScale===this.graphSettings.yAxisScale&&(this.graphSettings.setProperty("lastChangedAxis",e==="xAxisScale"?"y":"x"),i.viewportController.zoomSquareImmediately(),this.markSquareAxesAfterUserEditedViewport());let o=i.viewportController.getViewport(),n=i.getProjection(),{xmin:a,xmax:s,ymin:l,ymax:c}=o,p=this.getGraphSettings().config.logScales;if(e==="xAxisScale"&&p){let u=n.mapx(a),g=n.mapx(s),m=Ti(n.reverse_mapx(u-.25),n.reverse_mapx(u+.25)),w=Ti(n.reverse_mapx(g-.25),n.reverse_mapx(g+.25));this._setAxisLimitLatex("xmin",__dcg_shared_module_exports__['bb'](m)),this._setAxisLimitLatex("xmax",__dcg_shared_module_exports__['bb'](w))}if(e==="yAxisScale"&&p){let u=n.mapy(l),g=n.mapy(c),m=Ti(n.reverse_mapy(u-.25),n.reverse_mapy(u+.25)),w=Ti(n.reverse_mapy(g-.25),n.reverse_mapy(g+.25));this._setAxisLimitLatex("ymin",__dcg_shared_module_exports__['bb'](m)),this._setAxisLimitLatex("ymax",__dcg_shared_module_exports__['bb'](w))}this.lastDirectlyEditedViewport=i.getCurrentViewport()}updateGraphSettingsViewportLimitsLatex(e){this._setAxisLimitLatex("xmin",e.xmin+""),this._setAxisLimitLatex("xmax",e.xmax+""),this._setAxisLimitLatex("ymin",e.ymin+""),this._setAxisLimitLatex("ymax",e.ymax+""),this._setAxisLimitLatex("zmin",e.zmin+""),this._setAxisLimitLatex("zmax",e.zmax+"")}transformAllSelectedItemsByAssignmentLatex(e){var g,m;let i=kw(this.listModel),r=this.findLastTokenNumber()+1,o=this.findLastSubscriptForLetters(),n=this.getGeometryFolder(),a=n?n.index+this.getNumberOfItemsInFolder(n.id)+1:0,s={};for(let w of i){if(w.type!=="expression")continue;var l=w.formula.geometry;if(!l)continue;var c=(g=w.formula.typed_constant_value)==null?void 0:g.valueType;if(!c||__dcg_shared_module_exports__['fa'](c,__dcg_shared_module_exports__['Q']))continue;var p=(m=Er(w))==null?void 0:m.latex;p||(p=this._autoNameExpression(w,o));let C=`\\token{${r}}`;r+=1;let S=`${C}=${e}\\left(${p}\\right)`,k=this.createItemModel({id:this.generateId(),type:"expression",showLabel:w.showLabel&&!w.label,showAngleLabel:w.showAngleLabel&&!w.label,latex:S,folderId:n&&n.id,color:w.color});s[k.id]=!0,n?(Ma(this.listModel,k,a),a+=1):Ss(this.listModel,k)}let u=Object.keys(s);if(u.length&&V0(this.listModel,s),u.length===1){let w=u[0];this.runAfterDispatch(()=>{this.getItemModel(w)&&this.get2dPOIController().keyboardAttentionManager.updateKeyboardAttention({calcId:w,listIndex:void 0,polygonEdge:void 0},{describe:!1})})}}convertToTokenAssignment(e,i=""){var n;let r=(n=Er(e))==null?void 0:n.latex,o=i?tf(i)||"":"\\token{"+(this.findLastTokenNumber()+1)+"}";r?dd(this.listModel,r,o):Wn(e,o+"="+e.latex)}convertToNamedAssignment(e,i=""){let r=W0(e);if(!r)return;let o=i?tf(i):this.getAutonameLatexForExpression(e);o?dd(this.listModel,r,o):Wn(e,i)}getAutonameLatexForExpression(e,i){if(i||(i=this.findLastSubscriptForLetters()),$0(e)==="point"&&e.label&&Kn(e.label)&&this.countGlobalIdentifierOccurences(e.label)===0)return e.label;var r=IP(e),o=(i[r]||0)+1;return i[r]=o,r+"_{"+o+"}"}_autoNameExpression(e,i){let r=this.getAutonameLatexForExpression(e,i);return Wn(e,r+"="+e.latex),r}isGeoToolVisible(e,{ignoreAuthorMode:i}={ignoreAuthorMode:!1}){return!i&&this.shouldShowAuthorFeatures()?!0:kp(this.geometryToolbarModel,e)}isGeoToolEnabled(e,{ignoreAuthorMode:i}={ignoreAuthorMode:!1}){return!i&&this.shouldShowAuthorFeatures()?!0:ch(this.geometryToolbarModel,e)}isSomeTransformToolVisible(){return Ig.some(e=>this.isGeoToolVisible(e))}setGeoTool(e){if(!this.geoUIActive||this.activeTool===e||!this.isGeoToolEnabled(e))return;yL(this.geometryToolbarModel,e,this.shouldShowAuthorFeatures()),this.activeTool=e,this.getGeoModel().setToolMode(e),this.cancelGeoToolplay()}cancelGeoToolplay(){var i;let e=this.getGeoModel();e.cancelToolplay(),e.deselectAllObjects(),this.setToolPreviewState({}),(i=this.get2dPOIController())==null||i.cancelGeoToolplay()}setToolPreviewState(e){var r;this.toolPreviewJSONState=e;var i=this.listModel.__toolPreviewIdToModel;this.listModel.__toolPreviewIdToModel={};for(let o in e){let n=e[o],a=jI(n,!1);if(!a)continue;let s;for(let l in i){let c=i[n.type==="expression-edit-preview-latex"?hh:l];if(((r=Er(c))==null?void 0:r.latex)===o){s=c;break}}s?(s.latex=a.latex,s.color=a.color,s.showAngleLabel=!!a.showAngleLabel,s.hidden=n.hidden):s=Vw({id:n.type==="expression-edit-preview-latex"?hh:this.generateId(),type:"expression",color:a.color,latex:a.latex,showAngleLabel:!!a.showAngleLabel,hidden:n.hidden},this),this.listModel.__toolPreviewIdToModel[s.id]=s}}isGeoItem(e){let i=this.getItemModel(e);return i&&i.type==="expression"&&i.formula&&i.formula.geometry&&!i.formula.error}getSelectedGeoExpression(){var e=this.getSelectedItem();if(e&&this.isGeoItem(e.id)&&e.type==="expression")return e}getGeometryFolder(){let e=this.getItemModel(__dcg_shared_module_exports__['_c']);return e&&e.type==="folder"?e:void 0}isItemInGeoFolder(e){var i=this.getItemModel(e);return!i||i.type==="folder"?!1:i.folderId===__dcg_shared_module_exports__['_c']}isGeoFolder(e){return e.id===__dcg_shared_module_exports__['_c']}isItemNotSelectableBecauseItsSecret(e){return!(this.shouldShowAuthorFeatures()||this.isItemInGeoFolder(e)||!this.isItemSecret(e))}pauseAllSliders(){this.getPlayingSliders().forEach(e=>{ua(e,!1)})}countGlobalIdentifierOccurences(e){return AL(this.listModel,e)}handleClickableItemClicked(e,i){let r=this.getItemModel(e);Sh(r)&&this.evaluator.addClickEvent(r.id,i)}canAddTicker(){return!this.getTickerOpen()}countIdentifierAssignments(e){return xh(this.listModel,e).length}doesIdentifierBlockActionUpdate(e){var i=this.getFocusLocation(),r=xh(this.listModel,e);for(let o of r)if((i==null?void 0:i.type)==="expression"&&i.id===o.id||GP(o))return!0;return!1}getItemsByIdentifier(e){return xh(this.listModel,e)}isAtLeastOnePointSelected(){let e=this.getAllSelectedItems();for(var i=0;i<e.length;i++){let r=e[i];if(r.type==="expression"&&wl(r))return!0}return!1}toggleLabelForAllSelectedObjects(){let e=[],i=[];this.getAllSelectedItems().forEach(o=>{o.type==="expression"&&wl(o)&&(o.showLabel?i.push(o):e.push(o))});let r=/^([A-Z])([0-9]*)$/;if(e.length){let o=0;this.getAllItemModels().forEach(n=>{if(n.type!=="expression"||!n.showLabel||!n.label)return;let a=n.label.match(r);if(!a)return;let s=a[1].charCodeAt(0)-65;a[2]&&(s+=parseInt(a[2])*26),s>=o&&(o=s+1)}),e.forEach(n=>{if(!n.label){let a=o;o++;let s=String.fromCharCode(a%26+65),l=Math.floor(a/26),c=l>0?l+"":"";bc(n,s+c)}Vp(n,!0)})}else i.length&&i.forEach(o=>{r.test(o.label)&&bc(o,""),Vp(o,!1)})}updateLatexForIdentifier(e,i){var r=xh(this.listModel,e);if(r.length===1){var o=r[0];o.slider.isPlaying?(ua(o,!1),Wn(o,i),ua(o,!0)):Wn(o,i)}}updateExpressionSearchStr(e){this.rawExpressionSearchStr=e;let i="\\operatorname{rename}";if(e.indexOf(i)===0){let o=e.slice(i.length).replace(/\\ /g,"").split(/\\to(?![a-zA-Z])/);o.length===2?(this.expressionSearchStr=o[0],this.isExpressionSearchStrValidForReplace=Kn(this.expressionSearchStr),this.updateExpressionReplaceStr(o[1])):(this.expressionSearchStr=o[0],this.isExpressionSearchStrValidForReplace=!1,this.updateExpressionReplaceStr(""));let n=ML(this.listModel,this.getExpressionSearchStr());this.expressionSearchCount=this.expressionSearchOpen?n:0}else this.expressionSearchStr=e.length>1&&"rename".indexOf(e)===0?"":e,this.isExpressionSearchStrValidForReplace=!1,this.updateExpressionReplaceStr(""),this.filterItemsBySearch()}filterItemsBySearch(){if(!this.getExpressionReplaceStr()){let e=GL(this.listModel,this.getExpressionSearchStr());this.expressionSearchCount=this.expressionSearchOpen?e:0}}updateExpressionReplaceStr(e){this.expressionReplaceStr=e,this.isExpressionReplaceStrValidForReplace=Kn(e)}getIsExpressionSearchStrValidForReplace(){return this.isExpressionSearchStrValidForReplace}getIsExpressionReplaceStrValidForReplace(){return this.isExpressionReplaceStrValidForReplace}isSearchReplaceValid(){return this.getIsExpressionSearchStrValidForReplace()&&this.getIsExpressionReplaceStrValidForReplace()}shouldShowReplaceIcon(){return this.isSearchReplaceValid()}updateTickerHandlerLatex(e){this.listModel.ticker.handlerLatex=e}updateTickerMinStepLatex(e){this.listModel.ticker.minStepLatex=e}getRawExpressionSearchStr(){return this.rawExpressionSearchStr||""}getExpressionSearchStr(){return this.expressionSearchStr||""}getExpressionReplaceStr(){return this.expressionReplaceStr||""}getExpressionSearchCount(){return this.expressionSearchCount||0}getTicker(){return this.listModel.ticker}getTickerHandlerLatex(){return this.listModel.ticker.handlerLatex||""}getTickerMinStepLatex(){return this.listModel.ticker.minStepLatex||""}getTickerAvgDelta(){return this.listModel.ticker.avgDelta}getBrailleMode(){return this.graphSettings.config.brailleMode}setBrailleMode(e){this.graphSettings.config.setProperty("brailleMode",e)}getSixKeyInput(){return this.graphSettings.config.sixKeyInput}setSixKeyInput(e){this.graphSettings.config.setProperty("sixKeyInput",e)}getBrailleControls(){return this.graphSettings.config.brailleControls}setBrailleControls(e){this.graphSettings.config.setProperty("brailleControls",e)}getAudio(){return this.graphSettings.config.audio}setAudio(e){this.graphSettings.config.setProperty("audio",e)}setEditListMode(e){this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{inEditListMode:e})}generateTableXSubscript(){return Ew(this.listModel)}findLastTokenNumber(){return VL(this.listModel)}findLastSubscriptForLetters(){return LL(this.listModel)}_createTableItem(){let e=this.generateTableXSubscript(),i=p0(e,[[],[]],this);return this.createItemModel(i)}_populateSettingsViewLimitLatex(){let e=this.getGrapher();if(!e)return;let i=e.getCurrentViewport();this.isGraphSettingsOpen()&&__dcg_shared_module_exports__['Ra'](i,this.lastDirectlyEditedViewport)||(this.settingsViewModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.settingsViewModel),{limitLatex:t3(i,{steps:this.getAxisStepSettings(),scales:this.getAxisScaleSettings()})}))}getAxisStepSettings(){return{xAxisStep:this.graphSettings.xAxisStep,yAxisStep:this.graphSettings.yAxisStep}}getAxisScaleSettings(){return{xAxisScale:this.graphSettings.xAxisScale,yAxisScale:this.graphSettings.yAxisScale}}getDefaultAxisScaleSettings(){var i,r;let{defaultState:e}=this.graphSettings;return{xAxisScale:((i=e==null?void 0:e.graph)==null?void 0:i.xAxisScale)||"linear",yAxisScale:((r=e==null?void 0:e.graph)==null?void 0:r.yAxisScale)||"linear"}}getSettingsViewModel(){return this.settingsViewModel}getListModel(){return this.listModel}getGeometryToolbarModel(){return this.geometryToolbarModel}hasBackgroundColor(){return this.getBackgroundColor()!=="#ffffff"}getBackgroundColor(){return this.getGraphSettings().getBackgroundColor()}getTextColor(){return this.getGraphSettings().getTextColor()}getPillboxBackgroundColor(){return __dcg_shared_module_exports__['ld'](this.getBackgroundColor(),-.07)}subscribeToChanges(e){let i=this.nextSubscription;return this.nextSubscription+=1,this.subscriptions[i]=e,()=>{delete this.subscriptions[i]}}updateTheComputedWorld(){var p,u,g,m,w,C,S;Mp(this.listModel);let i=this.getSelectedItem()&&this.activeTool==="expression-edit"&&this.listModel.__toolPreviewIdToModel[hh]&&((p=this.getGrapher())!=null&&p.graphSketches[hh])?"preview":"actual";PL(this.listModel,i),(u=this.grapher2d)==null||u.setSketchOrder(this.listModel.drawOrder),(g=this.grapher3d)==null||g.setSketchOrder(this.listModel.drawOrder);let r={},o=k=>{var I;let M=(I=Er(k))==null?void 0:I.identifier;M&&(M[0]==="$"||k.formula.geometry)&&M&&(r[M]?r[M].multiple=!0:r[M]={model:k,multiple:!1})};for(let k of this.getAllToolPreviewItems())j0(k),o(k);for(let k of this.getAllItemModels())switch(k.type){case"expression":j0(k),o(k);break;case"image":FV(k);break;case"table":jA(k);break;case"folder":GA(k);break;case"text":SV(k);break;default:return k}this.geoUIActive=this.isGeometry()&&!this.getGraphSettings().config.hideGeoUI,this.cachedGeoTokenInfo={};for(let k in r){let{multiple:M,model:I}=r[k];if(I&&!this.isItemInGeoFolder(I.id)&&(I.readonly||ca(I)))continue;let E="blue",T="unknown",A="unknown",G=!1,_=!1,P=!1,N=Dn(I);!M&&I?(E=Ds(I),G=kP(I),A=MP(I),T=$0(I),I.error&&(_=!0,E="#")):(T="error",_=!0),T&&I?this.isItemSelected(I.id)&&(P=!0):_=!0;let W=eb(I,this,{includeDetails:!1}),X=(I==null?void 0:I.label)||"";this.cachedGeoTokenInfo[k]={groupType:T,iconType:A,isList:G,hasError:_,color:E,isSelected:P,isHidden:N,description:W,label:X,calcId:I&&I.id||""}}this.cachedGeoTokenDepths={};let{createdDepth:n,firstReferencedDepth:a}=this.geoModel.getComputedBoard().getDepthValues();for(let k in this.cachedGeoTokenInfo){let{calcId:M}=this.cachedGeoTokenInfo[k],I=this.getItemModel(M);if(!I)continue;let E=k;if(!(k in n)&&I.type==="expression"&&(M===this.getDraggedItemId()||I===this.getFocusedItem())){let N=I.formula.assignment;N&&N in n&&(E=N)}let T=n[E]||0,A=a[E];A=isFinite(A)?A:0;let G=Math.max(T,A-1)+"",_=this.cachedGeoTokenDepths[G];_||(_=[],this.cachedGeoTokenDepths[G]=_);let P=this.cachedGeoTokenInfo[k];_.push({color:P.color,groupType:P.groupType,identifier:k,calcId:M})}QV(this.listModel.ticker);let s=this.getFocusLocation();if(s&&s.type==="expression"&&s.isFakeGraphFocus&&(this.getValidCursorContext()||Bi(this,__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},s),{isFakeGraphFocus:void 0}))),this.isCurrentFocusLocationValid()||Bi(this,void 0),this.listModel.openItemMenu){let k=this.getOpenMenuIcon();document.body&&k&&document.body.contains(k)||(this.listModel.openItemMenu=void 0)}let l=this.getSelectedItem();l&&!this.getItemModel(l.id)&&pi(this.listModel,void 0),this._populateSettingsViewLimitLatex(),this.propagateSelection(),this.propagateActiveTokens(),this.isKeypadOpen()||(this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{keypadFunctionsOpen:!1})),this.updateSuggestedIdentifierRenameInfo(),this.isGeometry()&&l&&l.type==="expression"?this.getValidCursorContext()?(this.setGeoTool("expression-edit"),this.geoModel.updateFadeAnimations()):this.geoModel.getToolMode()==="expression-edit"&&this.setGeoTool("selection"):this.geoModel.getToolMode()==="expression-edit"&&this.setGeoTool("selection");let c=this.getValidCursorContext();this.isGeometry()&&this.getGeoModel().getToolMode()==="expression-edit"&&!__dcg_shared_module_exports__['Ra'](c,this.lastCursorContext)&&this.runAfterDispatch(()=>{var k;(k=this.get2dPOIController())==null||k.replayGeoTapMove()}),this.lastCursorContext=c,(w=(m=this.grapher2d)==null?void 0:m.poiController)!=null&&w.keyboardAttentionManager.getKeyboardAttention()&&!this.isGraphPaperFocused()&&((S=(C=this.grapher2d)==null?void 0:C.poiController)==null||S.keyboardAttentionManager.setKeyboardAttention(void 0)),this.isGeometry()&&(uL(this.geometryToolbarModel),this.isGeoToolEnabled(this.getActiveTool())||this.setGeoTool("selection")),this.runAfterDispatch(()=>{var k,M;this.isThreeDMode()||((k=this.grapher2d)==null||k.audioGraph.checkIfSelectedItemChanged(l?l.id:void 0),this.focusLocation&&this.focusLocation.type!=="graph-paper"&&((M=this.grapher2d)==null||M.audioGraph.exitAudioTrace()))})}getOpenMenuIconSelector(){let e=this.getOpenItemMenu();return e?`[dcg-open-menu-guid="${e.guid}"]`:void 0}getOpenMenuIcon(){let e=this.getOpenMenuIconSelector();return e?this.findEl(e):void 0}propagateSelection(){let e=this.getGrapher();e?this.__lastSelectedIdsForPropagation=N2(this,e,this.__lastSelectedIdsForPropagation):this.__lastSelectedIdsForPropagation={}}propagateActiveTokens(){var e,i;this.isThreeDMode()||((e=this.grapher2d)==null||e.setActiveToken(this.getExpressionIdForIdentifier(this.activeTokens.selected),"selected"),(i=this.grapher2d)==null||i.setActiveToken(this.getExpressionIdForIdentifier(this.activeTokens.hovered),"hovered"))}getHoveredOrFocusedTokenIdentifier(){if(this.activeTokens.hovered)return this.activeTokens.hovered;let e=this.getFocusLocation();if(e&&e.type==="geo-token")return e.identifier}doesLatexContainToken(e){return TP(e)}getToolPreviewJSONState(){return this.toolPreviewJSONState}removeListOfItems(e){let i={},r=[],o=new Set;return e.forEach(n=>{if(this.isItemReadonly(n))o.add(n);else{let a=Ch(this.listModel,n);for(let s of a)i[s.id]||(i[s.id]=!0,r.push(s))}}),{deletedItems:r,readonlyItemsNotDeleted:o.size}}garbageCollectGeo(e,i){if(!this.isGeometry())return;let r=p3(this,e,i);r.length&&this.removeListOfItems(r)}ensureAtLeastOneVisibleItem(){if(NL(this.listModel)){let e=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});Ss(this.listModel,e)}}getExpressionIdForIdentifier(e){if(e){var i=this.getItemsByIdentifier(e);if(i.length===1)return i[0].id}}getValidCursorContext(){var o;let e=this.getSelectedItem();if(!e||e.type!=="expression")return;let i=e.formula.cursor_context,r=(o=Se.getFocusedMathquill())==null?void 0:o.selection();if((i==null?void 0:i.type)==="expression-arguments"){let{argIndex:n,positionWithinArg:a}=i;if(!(n===i.argCount-1&&a==="end"||i.positionWithinArg==="start-to-end"&&(r==null?void 0:r.startIndex)!==void 0&&(r==null?void 0:r.startIndex)===(r==null?void 0:r.endIndex)))return}if((e==null?void 0:e.type)==="expression"&&e.latex===(i==null?void 0:i.selection.input)&&(r==null?void 0:r.startIndex)===(i==null?void 0:i.selection.start)&&(r==null?void 0:r.endIndex)===(i==null?void 0:i.selection.end)&&(r==null?void 0:r.latex)===(i==null?void 0:i.selection.input))return i}tryInsertTokenIntoMathquill(e,i){if(!this.isGeometry()||!e)return!1;var r=this.getItemModel(e);if(!r||r.type!=="expression")return!1;let o=r.formula.typed_constant_value;i===0&&(!o||!__dcg_shared_module_exports__['aa'](o.valueType))&&(i=void 0);var n,a,s=Ao(r);if(s?a=__dcg_shared_module_exports__['cb'](s):r.formula.geometry&&(a=this.getAutonameLatexForExpression(r),n=a),!a)return!1;i!==void 0&&(a+="\\left["+(i+1)+"\\right]");var l=this.getFocusLocation();if(!l||!this.seemsLikeInsertingTokenWillImproveThings(o==null?void 0:o.valueType))return!1;var c=l.type==="expression";return c?(n&&(qi(r)==="NONE"&&r.dragMode==="AUTO"&&Lp(r,"NONE"),Wn(r,n+"="+r.latex)),this.writeIdentifierIntoCurrentMathquill(a),!0):!1}seemsLikeInsertingTokenWillImproveThings(e){let i=this.getValidCursorContext();if(i){if(!e)return!1;let r=__dcg_shared_module_exports__['aa'](e)?__dcg_shared_module_exports__['ba'](e):e;return(i.type==="expression-arguments"?i.allowedTypesForInsertedArg:i.allowedTypes).some(n=>__dcg_shared_module_exports__['da'](r,n))}return!1}writeIdentifierIntoCurrentMathquill(e){this.runAfterDispatch(()=>{let i=this.getValidCursorContext(),r=Se.getFocusedMathquill();if(!r)return;let o="",n="";(i==null?void 0:i.type)==="expression-arguments"&&((i==null?void 0:i.positionWithinArg)==="end"?o=",":(i==null?void 0:i.positionWithinArg)==="start"&&(n=","));let a=`${o}${e}${n}`,s=!1;if((i==null?void 0:i.type)==="expression-arguments"&&i.polygonVertices){let{argIndex:l,polygonVertices:c,positionWithinArg:p}=i;(e===c.firstLatex||e===c.lastLatex)&&(p==="end"||p==="start-to-end")&&l===i.argCount-1&&(a="",s=!0)}else(i==null?void 0:i.type)==="expression-arguments"&&(s=i.isLastValidArg);Se.canAcceptText(r,this.getCapExpressionSize(),a)&&(r.write(a),Se.simulateUserChangedLatex(r),s&&r.keystroke("Right"))})}getSelectedExpressionIds(){return KL(this.listModel)}getPropagatedSelectedIds(){return this.__lastSelectedIdsForPropagation}areParsableObjectsEqual(e,i){return e===i?!0:__dcg_shared_module_exports__['Ra'](__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},e),{regressionParameters:void 0}),__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},i),{regressionParameters:void 0}))}requestParseForAllItems(){var o,n,a;(this.isCurrentlyDoingSetState||this.isCurrentlyDoingRestoreState)&&(this.lastParsableObjects={},this.evaluator.clearStatementsAndStartCompleteState(),this.isCurrentlyDoingRestoreState&&this.evaluator.markUndoRedoState());var e={},i=this.lastParsableObjects;for(let s of this.getAllItemModels())switch(s.type){case"expression":case"image":case"table":e[s.guid]=s.cachedParsableState;break;case"folder":case"text":break;default:return s}for(let s of IL(this.listModel))e[s.guid]=s.cachedParsableState;for(let s of bh(this.listModel)){let l=this.getSelectedItem(),c=this.activeTool==="polygon";if(this.activeTool==="expression-edit"&&(l==null?void 0:l.type)==="expression"&&((n=(o=l.formula.geometry)==null?void 0:o.call)==null?void 0:n.symbol)==="polygon"&&((a=l.formula.cursor_context)==null?void 0:a.type)==="expression-arguments"){let{positionWithinArg:p,argIndex:u}=l.formula.cursor_context;c=(p==="end"||p==="start-to-end")&&u===l.formula.geometry.call.parents.length-1}e[s.guid]=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},s.cachedParsableState),{shouldOmitLastPolygonSegment:c})}let r=this.getFocusedItem();if((r==null?void 0:r.type)==="expression"){let s=Se.getFocusedMathquill(),l=s==null?void 0:s.selection();(l==null?void 0:l.latex)===r.latex&&(e[r.guid]=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},r.cachedParsableState),{latexSelection:{start:l.startIndex,end:l.endIndex}}))}if(this.is3dProduct()&&this.getTranslucentSurfaces())for(let s in e){let l=e[s];l.type==="statement"&&(e[s]=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},l),{fillOpacity:m3}))}this.listModel.ticker.cachedParsableState&&(e[this.listModel.ticker.guid]=this.listModel.ticker.cachedParsableState);for(let s of hL(this.geometryToolbarModel))e[s.id]=s;for(let s in i){let l=i[s],c=e[s];if(l.type==="image"&&(!c||c.type!==l.type||c.guid!==l.guid)&&this.grapher2d&&this.grapher2d.removeGraphImage(l.id),!c&&(this.evaluator.removeStatement(l.id),l.type==="table"))for(let p of l.columns)this.evaluator.removeStatement(p.id)}for(let s in e){let l=e[s],c=i[s];if(l.type==="image"&&(!c||l.type!==c.type||l.guid!==c.guid)&&this.grapher2d){let p=this.getItemModel(l.id);p&&p.type==="image"&&this.grapher2d.addGraphImage(p)}this.areParsableObjectsEqual(l,c)||(this.grapher2d&&l.type==="statement"&&l.latex===""&&this.grapher2d.removeGraphSketch(l.id),this.evaluator.addStatement(l))}this.lastParsableObjects=e}getViewState(){let e=this.getGrapher();if(e){let i=e.getProjection();return{viewport:i.viewport.toObject(),screen:i.screen,xAxisScale:i.settings.xAxisScale,yAxisScale:i.settings.yAxisScale,degreeMode:i.settings.degreeMode}}else return}getTokenRenderInfoByIdentifier(e){let i=this.cachedGeoTokenInfo[e];return i||(i={iconType:"unknown",isList:!1,hasError:!0,isSelected:!1,groupType:"unknown",color:"",isHidden:!1,description:"",label:"",calcId:""}),i}setEvaluator(e){this.evaluator=e}getEvaluator(){return this.evaluator}setGrapher2d(e){this.grapher2d=e}setGrapher3d(e){this.grapher3d=e,this.grapher2d.poiController.add3DTouchEventHandlers(e)}getGrapher(){return this.isThreeDMode()?this.grapher3d:this.grapher2d}getGrapher2d(){return this.grapher2d}getGrapher3d(){return this.grapher3d}get2dPOIController(){var e;return(e=this.grapher2d)==null?void 0:e.poiController}isDefaultViewportRestored(){var e;return!!((e=this.getGrapher())!=null&&e.viewportController.isDefaultViewportRestored())}requestRedrawGraph(){var e,i;(e=this.grapher2d)==null||e.redrawAllLayers(),this.isThreeDMode()&&((i=this.grapher3d)==null||i.redrawAllLayers())}get2dProjection(){var e;return(e=this.grapher2d)==null?void 0:e.getProjection()}get2dSketchOrder(){var e;return(e=this.grapher2d)==null?void 0:e.getSketchOrder()}getBoundingBoxesForZoomFit(e){if(!(!this.grapher2d&&!this.grapher3d)&&this.isZoomFitEnabled()&&!(e.type!=="expression"&&e.type!=="table")&&!(e.type==="expression"&&(e.error||!e.shouldGraph||!e.formula.is_graphable)))return e.boundingBoxes}isExpressionZoomFit(e){if(this.isThreeDMode())return!1;let i=this.getBoundingBoxesForZoomFit(e),r=this.get2dProjection();return!r||!i?!1:!QT(i,r)&&!!Hb(i,r)}viewportIsLocked(){return this.getLockViewportConfigSetting()||this.getLockViewportUserSetting()}showExpressionZoomFitButton(e){if(this.viewportIsLocked()||this.isGeometry()||this.is3dProduct())return!1;let i=this.getBoundingBoxesForZoomFit(e),r=this.get2dProjection();return!!(r&&i&&QT(i,r))}setBugsnagContext(e){this.bugsnagContext=e}getItemRootNodeById(e){let i=this.getItemModel(e);if(i&&i.dcgView)return i.dcgView.findRootNode()}getItemNodeById(e){return this.getItemRootNodeById(e)}generateId(){var e=this.__nextItemId;return this.__nextItemId+=1,e+""}getNextColor(){return vL(this.listModel)}getNextDisplayIndex(){return this.listModel.nextDisplayIndex}_clearPendingImageUploads(){this.__pendingImageUploads={}}isUploadingImages(){return Object.keys(this.__pendingImageUploads).length>0}getExpressionAnalysis(){return this.listModel.expressionAnalysis}createItemModel(e){return uh(this.listModel,e)}getItemModel(e,i){return bl(this.listModel,e,i)}getHiddenGeoItemCount(){return RL(this.listModel)}getColorById(e){let i=this.getItemModel(e);return!i||i.type!=="expression"?"":N0(i)}getAllColorAssignments(){let e=[];for(let i of this.getAllItemModels()){if(i.type!=="expression")continue;let r=Ao(i);if(!r)continue;let o=this.getEvaluationValueForItem(i.id);(typeof o=="string"||Array.isArray(o)&&typeof o[0]=="string")&&e.push({id:i.id,assignmentLatex:__dcg_shared_module_exports__['cb'](r)})}return e}getAllColorFunctionAssignments(){let e=[];if(!this.isBeta3DMode())return e;for(let i of this.getAllItemModels()){if(i.type!=="expression")continue;let r=Ao(i),o=U0(i);!r||!o||e.push({id:"shader",assignmentLatex:"shader:"+__dcg_shared_module_exports__['cb'](r)})}return e}getShader(e){for(let i of this.getAllItemModels()){if(i.type!=="expression")continue;let r=Ao(i);if(r&&__dcg_shared_module_exports__['cb'](r)===e){let o=U0(i);if(o)return o}}return{source:"",shaderFunctions:{}}}getItemModelByIndex(e){return gh(this.listModel,e)}getItemCount(){return nf(this.listModel)}getItemEditableLabelMode(e){let i=this.getItemModel(e);if(!(!i||i.type!=="expression"))return NP(i)}isItemSecret(e){let i=this.getItemModel(e);return i?rf(i):!1}isItemMarkedReadonly(e){let i=this.getItemModel(e);return i?!this.isListEnabled()&&!this.isItemInGeoFolder(e)?!0:DL(i):!1}isItemReadonly(e){return this.isItemMarkedReadonly(e)&&!this.shouldShowAuthorFeatures()}isItemSelected(e){let i=this.getItemModel(e);return!!i&&Sn(i)}hasAnyItemsSelected(){return this.getAllSelectedItems().length>0}hasMultipleItemsSelected(){return this.getAllSelectedItems().length>1}isItemSelectable(e){let i=this.getItemModel(e);return i?fh(i):!1}anyItemDependsOnRandomSeed(){return YL(this.listModel)}areActionsEnabled(){return this.graphSettings.config.actions==="auto"?JL(this.listModel):!!this.graphSettings.config.actions}getAllItemModels(){return T0(this.listModel)}getAllToolPreviewItems(){return bh(this.listModel)}isToolPreviewItem(e){return OL(this.listModel,e)}getAllModelsWithSliders(){return BL(this.listModel)}getGraphSettings(){return this.graphSettings}getAudioGraph(){var e;if(!this.isThreeDMode())return(e=this.grapher2d)==null?void 0:e.audioGraph}inAudioTraceMode(){let e=this.getAudioGraph();return!!(e&&e.audioTraceActive)}canAudioTrace(){let e=this.getAudioGraph();return e?e.canAudioTraceCurrentExp():!1}isAudioTracing(){let e=this.getAudioGraph();return e?e.isAudioTracing():!1}expressionsAreFullWidth(){return this.isNarrow()||this.graphSettings.config.graphpaper===!1}getExpListWidthString(){return this.expressionsAreFullWidth()?"100%":this.rootElt?this._getExpListWidth()+"px":"0"}getExpListWidth(){return this.rootElt?this._getExpListWidth():0}findFirstVisibleItem(){let e=o3(this,this._previousFirstVisibleId);if(this._previousFirstVisibleId=e,e)return this.getItemModel(e)}findLastVisibleItem(){let e=n3(this,this._previousLastVisibleId);if(this._previousLastVisibleId=e,e)return this.getItemModel(e)}updateRenderShellsAfterDispatch(){if(!this.rootElt||!this.isListVisible())return;let e=this.findFirstVisibleItem(),i=this.findLastVisibleItem();var r=e&&this.getItemRootNodeById(e.id),o=i&&this.getItemRootNodeById(i.id);if(r===this.lastInfiniteScrollFirstDOM&&o===this.lastInfiniteScrollLastDOM&&!this.hasDispatchSinceLastInfiniteScrollUpdate)return;this.lastInfiniteScrollFirstDOM=r,this.lastInfiniteScrollLastDOM=o,this.hasDispatchSinceLastInfiniteScrollUpdate=!1;let n=!1,a=e?e.index:1/0,s=i?i.index:1/0,l=this.listModel.dragState&&this.listModel.dragState.firstItemId,c,p=this.getOpenItemMenu();p&&p.type!=="multi-select-more"&&p.type!=="multi-select-transformations"&&p.type!=="geo-tool-dropdown"&&(c=p.model.id);for(let g of this.getAllItemModels()){var u=(g.index<a||g.index>s||g.isHiddenFromUI)&&!(g.type==="expression"&&g.sliderDragging);if(l==g.id&&(u=!1),c===g.id&&(u=!1),g.renderShell!==u&&(g.renderShell=u,n=!0,u)){let m=this.getItemRootNodeById(g.id);if(m){let w=m.getBoundingClientRect().height;w>0&&(g.cachedRenderHeight=w)}}}n&&this.markTickRequiredNextFrame()}updateRenderShellsBeforePaint(){if(this.hasDispatchSinceLastInfiniteScrollUpdate=!0,this.inPrintMode){for(let i of this.getAllItemModels())i.renderShell=!1;return}for(let i of this.getAllItemModels())i.isHiddenFromUI&&(i.renderShell=!0),i.type==="expression"&&i.sliderDragging&&(i.renderShell=!1);let e=this.getSelectedItem();e&&!this.isGeoItem(e.id)&&(e.renderShell=!1)}updateDragDrop(){let e=this.listModel.dragState;if(!e)return;let i=this.getItemModel(e.firstItemId);if(!i)return;let r=this.dragdrop_expressions.applyDrag();r&&(af(this.listModel,r.dragState),Mo(i,r.folderId),i.index!==r.newIndex&&pd(this.listModel,i.index,r.newIndex,e.numberOfItems))}_tickSliders(e){this.getPlayingSliders().forEach(function(i){gP(i,e)})}tickTicker(e){let i=this.listModel.ticker.lastTickTime===void 0;this.evaluator.addClockTickEvent(this.listModel.ticker.id,i),eL(this.listModel.ticker,e)}stopAllSliders(){for(let e of this.getAllItemModels())e.type==="expression"&&e.slider.isPlaying&&ua(e,!1)}getPlayingSliders(){var e=this.getAllItemModels(),i=[];for(let r of e)r.type==="expression"&&r.sliderExists&&r.slider.isPlaying&&i.push(r);return i}areAnyImagesLoading(){return wL(this.listModel)}_commitUserRequestedViewport(e){var i;(i=this.getGrapher())==null||i.setUserRequestedViewport(e)}_setAxisLimitLatex(e,i){this.settingsViewModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.settingsViewModel),{limitLatex:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.settingsViewModel.limitLatex),{[e]:i})});let o=i===""&&(e==="xstep"||e==="ystep")?0:wi(i,this.graphSettings.degreeMode),n=this.getGrapher();switch(e){case"xstep":{if(!Uh(o))return;this.graphSettings.setProperty("xAxisStep",o)}break;case"ystep":{if(!Uh(o))return;this.graphSettings.setProperty("yAxisStep",o)}break;case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":{if(!n)return;let a=n.viewportController.getViewport(),s="xmin";e==="xmin"&&(s="xmax"),e==="ymax"&&(s="ymin"),e==="ymin"&&(s="ymax"),e==="zmax"&&(s="zmin"),e==="zmin"&&(s="zmax");let l=wi(this.settingsViewModel.limitLatex[s]||"",this.graphSettings.degreeMode),c=er.fromObject(__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},a.toObject()),{[e]:o,[s]:l}));if(!c.isValid(this.getAxisScaleSettings()))return;n.viewportController.setViewport(c);let u;switch(e){case"xmin":case"xmax":u="x";break;case"ymin":case"ymax":u="y";break;case"zmin":case"zmax":u="z";break;default:let g=e;throw new Error(`Invalid limit: ${g}`)}this.graphSettings.setProperty("lastChangedAxis",u),this.markSquareAxesAfterUserEditedViewport()}break}if(n){let a=n.viewportController.getViewport().toObject();this._commitUserRequestedViewport(a)}}unmarkLastChangedAxis(){this.graphSettings.setProperty("lastChangedAxis",void 0)}markSquareAxesAfterUserEditedViewport(){let e=this.getGrapher();if(!e)return;let i=e.viewportController.getViewport(),r=this.isThreeDMode()?i.isSquare3D():i.isSquare(e.getProjection().screen,this.getAxisScaleSettings());this.graphSettings.setProperty("squareAxes",r)}getLockViewportConfigSetting(){return this.graphSettings.config.lockViewport}getLockViewportUserSetting(){return this.graphSettings.userLockedViewport}canUserAddExpressions(){return!!this.graphSettings.config.expressions}areNotesEnabled(){return!!this.graphSettings.config.notes}areSlidersEnabled(){return!!this.graphSettings.config.sliders}areLinksEnabled(){return!!this.graphSettings.config.links}areImagesEnabled(){let e=window.FileReader,i=ka&&Hm&&Hm[0]===8&&Hm[1]===0&&Hm[2]===0;return!!(this.graphSettings.config.images&&e&&!i&&!this.is3dProduct())}areFoldersEnabled(){return!!this.graphSettings.config.folders}isDecimalToFractionEnabled(){return!!this.graphSettings.config.decimalToFraction}isTraceEnabled(){return!!this.graphSettings.config.trace}areFunctionsRestricted(){return!!this.graphSettings.config.restrictedFunctions}areGeometryFunctionsForceEnabled(){return!!this.graphSettings.config.forceEnableGeometryFunctions}isQwertyKeyboardEnabled(){return!!this.graphSettings.config.qwertyKeyboard}isZoomFitEnabled(){return!!this.graphSettings.config.zoomFit}canEditOnWeb(){return!!this.graphSettings.config.editOnWeb}hasTransparentBackground(){return!!this.graphSettings.config.transparentBackground}shouldAudioTraceReverseExpressions(){return!!this.graphSettings.config.audioTraceReverseExpressions}hasDefaultState(){return!!this.graphSettings.defaultState}getDefaultViewport(){var i;var e=this.graphSettings.defaultState;return e&&e.graph?e.graph.viewport:(i=this.getGrapher())==null?void 0:i.getDefaultViewport()}getColors(){return this.isThreeDMode()?__dcg_shared_module_exports__['od']:this.graphSettings.config.colors}getImageOpacities(){return["0.2","0.4","0.6","0.8","1"]}getUIDragModes(){return["X","Y","XY"]}getNumberOfItemsInFolder(e){return CL(this.listModel,e)}getEnabledDragModesForItem(e){let i=this.getItemModel(e);if(!i||i.type!=="expression")return[];let r=i.formula,o=[];if(!r.move_strategy)return o;let n=r.move_strategy[0].type!=="none",a=r.move_strategy[1].type!=="none",s=n&&a;return n&&o.push("X"),a&&o.push("Y"),s&&o.push("XY"),o}shouldShowEvaluationForItem(e){let i=this.getItemModel(e);return!i||i.type!=="expression"?!1:R0(i)}getEvaluationValueForItem(e){let i=this.getItemModel(e);return i?i.type!=="expression"?NaN:N0(i):NaN}canDisplayEvaluationForItemAsFraction(e){if(!this.isDecimalToFractionEnabled())return!1;let i=this.getItemModel(e);if(!i||i.type!=="expression"||Qw(i))return!1;let r=this.getEvaluationValueForItem(e);return typeof r!="number"?!1:__dcg_shared_module_exports__['_a'](r)}shouldEvaluationForItemDisplayAsFraction(e){if(!this.isDecimalToFractionEnabled())return!1;let i=this.getItemModel(e);return!i||i.type!=="expression"?!1:md(i)}getEvaluationLabelOptionsForItem(e){return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},dP),{displayAsFraction:this.shouldEvaluationForItemDisplayAsFraction(e)})}getPointStyles(){return["POINT","OPEN","CROSS"]}getLineStyles(){return["SOLID","DASHED","DOTTED"]}getOpacities(){return[.2,.4,.8]}isInEditListMode(){return this.layoutModel.inEditListMode}authorFeaturesAvailable(){return!!this.graphSettings.config.authorFeatures}shouldShowAuthorFeatures(){return this.authorFeaturesAvailable()&&!!this.graphSettings.config.authorMode}shouldIgnoreGraphInteractions(e){return this.shouldShowAuthorFeatures()?!1:ca(e)}toolWillBeHiddenOrDisabled(e){return this.shouldShowAuthorFeatures()&&(!this.isGeoToolVisible(e,{ignoreAuthorMode:!0})||!this.isGeoToolEnabled(e,{ignoreAuthorMode:!0}))}setAuthorMode(e){this.graphSettings.config.setProperty("authorMode",e)}getInvertedColors(){return!!this.graphSettings.config.invertedColors}invertSwatches(){return this.isThreeDMode()&&this.getInvertedColors()}canUseAdvancedStyling(){return this.graphSettings.config.advancedStyling}isDegreeMode(){return this.graphSettings.degreeMode}isThreeDMode(){return this.graphSettings.threeDMode}showPlane3D(){let{threeDMode:e,showAxis3D:i,showPlane3D:r}=this.graphSettings;return e&&i&&r}showNumbers3D(){let{threeDMode:e,showAxis3D:i,showNumbers3D:r}=this.graphSettings;return e&&i&&r}getTranslucentSurfaces(){return!!this.graphSettings.config.translucentSurfaces}isBeta3DMode(){return this.isThreeDMode()&&uo("beta3d")}areLogModeRegressionsForced(){return this.graphSettings.config.forceLogModeRegressions}setAllRegressionsToLogMode(){for(let e of this.getAllItemModels())e.type==="expression"&&e.formula&&e.formula.is_regression&&Y0(e,!0)}isGraphSettingsOpen(){return this.layoutModel.graphSettingsOpen}isAddExpressionOpen(){return this.layoutModel.addExpressionOpen}shouldRenderList(){if(this.layoutModel.expressionsVisible)return!0;var e=this.layoutModel.expressionsHiddenTime;return e===void 0?!1:Date.now()-e<=500}isListVisible(){return this.layoutModel.expressionsVisible}isGrapherEnabled(){return this.graphSettings.config.graphpaper!==!1}isListEnabled(){return this.graphSettings.config.expressions!==!1}areDistributionsEnabled(){return this.graphSettings.config.distributions===!0}isExpressionListFocused(){let e=this.getFocusLocation();if(!e)return!1;switch(e.type){case"settings":case"generic-menu":case"expression-menu":case"editable-label":case"geo-token":case"multi-select-more-icon":case"multi-select-transformations-icon":case"geo-header-back-link":case"multi-select-delete-icon":case"multi-select-show-hide-icon":case"new-transformation-number":case"label-points-icon":case"geo-show-constructions-icon":case"geo-basic-tool":case"geo-basic-tool-menu-item":case"regression-output":case"graph-paper":case"zoom-in-btn":case"zoom-restore-btn":case"quest":case"global-mute-button":return!1;case"distribution-param":case"cdf-limit":case"slider-limit":case"domain-limit":case"expression":case"visualization-prop":case"search-expressions":case"replace-expressions":case"ticker":case"table":case"image":case"readonly-expression":case"braille-output":case"table-container":case"text":case"folder":case"add-item-btn":case"add-expression-btn":case"add-note-btn":case"add-table-btn":case"add-folder-btn":case"add-ticker-btn":case"add-image-btn":case"change-image-btn":case"edit-list-toggle":case"expression-icon":case"image-icon":case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":case"table-icon":case"action-icon":case"hide-expression-list-btn":case"show-expression-list-btn":case"top-level-icon":return!0;default:return e}}needsFakeKeypad(){if(this.inAudioTraceMode()&&this.isKeypadEnabled())return!0;let e=this.getFocusLocation();if(!e||this.getBrailleMode()!=="none"&&Xn())return!1;switch(e.type){case"settings":return e3(e.location);case"new-transformation-number":case"distribution-param":case"cdf-limit":case"slider-limit":case"domain-limit":case"expression":case"visualization-prop":case"search-expressions":case"replace-expressions":case"ticker":return!0;case"expression-menu":return e.location==="opacity"||e.location==="linewidth"||e.location==="lineopacity"||e.location==="pointopacity"||e.location==="pointsize"||e.location==="labelsize"||e.location==="labelangle"||e.location==="updaterule";case"table":{if(this.isInEditListMode())return!1;let o=e.location;if(o.row===0)return!0;var i=this.getItemModel(e.id);if(!i||i.type!=="table")return!1;let n=i.columnModels[o.column];return n?!n.disabled:!1}case"image":return e.location!=="name";case"readonly-expression":case"braille-output":case"regression-output":case"graph-paper":case"table-container":case"text":case"folder":case"add-item-btn":case"add-expression-btn":case"add-note-btn":case"add-table-btn":case"add-folder-btn":case"add-ticker-btn":case"add-image-btn":case"change-image-btn":case"edit-list-toggle":case"hide-expression-list-btn":case"show-expression-list-btn":case"geo-token":case"multi-select-more-icon":case"multi-select-transformations-icon":case"geo-header-back-link":case"multi-select-delete-icon":case"multi-select-show-hide-icon":case"label-points-icon":case"geo-show-constructions-icon":case"geo-basic-tool":case"geo-basic-tool-menu-item":case"generic-menu":case"zoom-in-btn":case"zoom-restore-btn":case"quest":case"global-mute-button":return!1;case"expression-icon":case"image-icon":case"slider-icon":case"action-icon":case"slider-animation-properties-icon":case"slider-thumb":case"table-icon":case"top-level-icon":return!1;case"editable-label":return this.getItemEditableLabelMode(e.id)==="MATH";default:return e}}isIdentifierRenameValid(e){return Kn(e)?!TL(this.listModel,e):!1}getBrandingMode(){return this.getEditLink()?"static-edit-link":this.getGraphSettings().config.editOnWeb?"edit-link":"powered-by"}getEditLink(){return window.iframeEmbedBrandingLink}_expressionZoomFit(e,i,r=!1){let o=this.getItemModel(e);if(this.isThreeDMode()||!this.grapher2d||!this.isZoomFitEnabled()||!o||o.type!=="expression"&&o.type!=="table"||!o.boundingBoxes||!o.boundingBoxes.length)return!1;var n=this.grapher2d.viewportController;if(!("zoomCustom"in n))return!1;let a=Hb(o.boundingBoxes,n.getProjection());return a?(r?n.setViewport(er.fromObject(a)):n.zoomCustom(a),i&&Bi(this,{type:"zoom-restore-btn"}),!0):!1}_deleteItemAndAnimateOut(e,i){let o=this.getItemNodeById(e);o&&(Rn(o,{transition:.2+"s",opacity:"0",transform:"scale(.1, .1)"}),setTimeout(()=>{this.dispatch({type:"finish-deleting-item-after-animation",id:e,setFocusAfterDelete:i})},1e3*.2))}_finishDeletingItemAfterAnimation(e,i){let r=this.getItemModel(e);if(!r)return;let o=this.getItemNodeById(e),n=o&&document.activeElement&&o.contains(document.activeElement),a=Ip(this.listModel,r.index);if(this._removeExpressionSynchronously(r),!(!i||!n)){if(!a){let s=mh(this.listModel);s&&(a=s)}a&&io(this,a.id,"end")}}_removeExpressionSynchronously(e){let i=vh(this.listModel,e.index);this.garbageCollectGeo(i,{}),this.ensureAtLeastOneVisibleItem()}setRootElt(e){this.rootElt=e,this.dragdrop_expressions=new Yb(this)}getRootElt(){return this.rootElt}_hideExpressions(e){this.graphSettings.config.expressions&&(pi(this.listModel,void 0),this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{expressionsVisible:!1,expressionsHiddenTime:Date.now()}),e?Bi(this,{type:"show-expression-list-btn"}):Ri())}_showExpressions(e){this.graphSettings.config.expressions&&(this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{expressionsVisible:!0}),e?Bi(this,{type:"hide-expression-list-btn"}):Ri())}_showToast(e){this.toastData=e,clearTimeout(this._hideToastTimeout);let i=typeof e.hideAfter=="number"?e.hideAfter:6e3;i>0&&(this._hideToastTimeout=setTimeout(()=>{this.dispatch({type:"toast/close",onHide:this.toastData.onHide})},i))}_setExpressionPropertiesFromAPI(e,i){let r=this.getItemModel(e);if(r)if(r.type==="table"&&i.columns){i=__dcg_shared_module_exports__['l'](i);let a=rV(r,i);var o=uh(this.listModel,a);this._toplevelReplaceItemAt(r.index,o,!1)}else{let a=this.getItemModel(e);if(!a)return;for(var n in i)if(i.hasOwnProperty(n))switch(n){case"slider":{if(a.type!=="expression")continue;let s=i[n];s.hasOwnProperty("min")&&Eh(a,s.min),s.hasOwnProperty("max")&&Dh(a,s.max),s.hasOwnProperty("step")&&cf(a,s.step),s.hasOwnProperty("isPlaying")&&ua(a,s.isPlaying)}break;case"polarDomain":{if(a.type!=="expression")continue;qn(a,__dcg_shared_module_exports__['tc'](i.polarDomain.min),"theta"),zn(a,__dcg_shared_module_exports__['tc'](i.polarDomain.max),"theta")}break;case"parametricDomain":{if(a.type!=="expression")continue;qn(a,__dcg_shared_module_exports__['tc'](i.parametricDomain.min),"t"),zn(a,__dcg_shared_module_exports__['tc'](i.parametricDomain.max),"t")}break;case"parametricDomain3Du":{if(a.type!=="expression")continue;qn(a,__dcg_shared_module_exports__['tc'](i.parametricDomain3Du.min),"u"),zn(a,__dcg_shared_module_exports__['tc'](i.parametricDomain3Du.max),"u")}break;case"parametricDomain3Dv":{if(a.type!=="expression")continue;qn(a,__dcg_shared_module_exports__['tc'](i.parametricDomain3Dv.min),"v"),zn(a,__dcg_shared_module_exports__['tc'](i.parametricDomain3Dv.max),"v")}break;case"parametricDomain3Dr":{if(a.type!=="expression")continue;qn(a,__dcg_shared_module_exports__['tc'](i.parametricDomain3Dr.min),"r"),zn(a,__dcg_shared_module_exports__['tc'](i.parametricDomain3Dr.max),"r")}break;case"parametricDomain3Dphi":{if(a.type!=="expression")continue;qn(a,__dcg_shared_module_exports__['tc'](i.parametricDomain3Dphi.min),"phi"),zn(a,__dcg_shared_module_exports__['tc'](i.parametricDomain3Dphi.max),"phi")}break;case"hidden":this._setItemHidden(e,i.hidden);break;case"secret":P0(a,i.secret);break;case"readonly":Hw(a,i.readonly);break;case"color":{if(a.type!=="expression")continue;nv(a,i.color)}break;case"dragMode":{if(a.type!=="expression")continue;Lp(a,i.dragMode)}break;case"label":{if(a.type!=="expression")continue;bc(a,i.label)}break;case"showLabel":{if(a.type!=="expression")continue;Vp(a,i.showLabel)}break;case"labelSize":{if(a.type!=="expression")continue;gf(a,i.labelSize)}break;case"labelOrientation":{if(a.type!=="expression")continue;ek(a,i.labelOrientation)}break;case"latex":if(a.type!=="expression")continue;Wn(a,i.latex);break;case"points":if(a.type!=="expression")continue;X0(a,!!i.points);break;case"lines":if(a.type!=="expression")continue;Z0(a,!!i.lines);break;case"pointStyle":if(a.type!=="expression")continue;Q0(a,i.pointStyle);break;case"pointSize":if(a.type!=="expression")continue;uf(a,i.pointSize);break;case"pointOpacity":if(a.type!=="expression")continue;pf(a,i.pointOpacity);break;case"lineStyle":if(a.type!=="expression")continue;av(a,i.lineStyle);break;case"lineWidth":if(a.type!=="expression")continue;Ih(a,i.lineWidth);break;case"lineOpacity":if(a.type!=="expression")continue;kh(a,i.lineOpacity);break;case"fill":if(a.type!=="expression")continue;J0(a,i.fill);break;case"fillOpacity":if(a.type!=="expression")continue;df(a,i.fillOpacity);break;case"id":case"type":case"domain":break;default:throw new Error("trying to call setProperty for: "+n)}}}_isParentFolderHidden(e){let i=this.getItemModel(e);if(!i)return!1;let r=Bn(i);return r?r.hidden:!1}_toggleItemHidden(e){var i;if(this._isParentFolderHidden(e))this._setItemHidden(e,!1);else{let r=this.getItemModel(e);if(!r)return;switch(r.type){case"expression":this._setItemHidden(e,!Dn(r));break;case"image":case"folder":this._setItemHidden(e,!r.hidden);break;case"table":case"text":break;default:return r}da(r)&&((i=this.toneController)==null||i.recomputeAudio())}}_toggleTableColumnHidden(e,i){if(this._isParentFolderHidden(e))this._setTableColumnHidden(e,i,!1);else{let r=this.getItemModel(e);if(!r||r.type!=="table")return;let o=jr(r,i);if(!o)return;this._setTableColumnHidden(e,i,!o.hidden)}}_setTableColumnHidden(e,i,r){let o=this.getItemModel(e);if(!o||o.type!=="table")return;let n=ew(o,i);!r&&this._isParentFolderHidden(e)&&this._setItemHidden(o.folderId,!1),dV(o,i,r),!r&&n&&u0(o,i,!0)}_setItemHidden(e,i){let r=this.getItemModel(e);if(r)switch(!i&&r.type!=="folder"&&this._isParentFolderHidden(r.id)&&this._setItemHidden(r.folderId,!1),r.type){case"expression":qP(r,i);break;case"folder":LA(r,i);break;case"image":GV(r,i);break;case"table":case"text":break;default:return r}}_addItemToEndFromAPI(e){let i=Sw(this.listModel);!e.secret&&i&&i.type==="expression"&&i.latex===""&&vh(this.listModel,i.index),Ss(this.listModel,e)}copyExpressionToIndex(e,i,r){let o={stripDefaults:!1},n;switch(e.type){case"expression":n=Aw(e,o);break;case"table":n=oh(e,o),n.columns&&n.columns.forEach(s=>{s.id=this.generateId()});break;case"image":n=dw(e,o);break;case"text":n=iw(e,o);break;default:return}let a=this.createItemModel(__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},n),{id:this.generateId()}));this._toplevelInsertItemAt(i,a,!1,r||e.folderId)}_toplevelInsertItemAt(e,i,r,o){let n=i;Ma(this.listModel,n,e),o&&Mo(n,o),r&&io(this,n.id)}_toplevelNewItemAtSelection(e,i){this.setGeoTool("selection");let r=this.getSelectedItem();if(r){let s=r.type==="expression"&&!r.latex;if(s&&!r.folderId&&(e.type!=="expression"||e.latex))return this._toplevelReplaceItemAt(r.index,e,i.shouldFocus);if(s&&r.folderId&&e.type!=="expression"&&e.type!=="folder")return this._toplevelReplaceItemAt(r.index,e,i.shouldFocus);if(r.type!=="folder"&&!r.folderId){let l;return this._toplevelInsertItemAt(r.index+1,e,i.shouldFocus,l)}if(r.type!=="folder"&&r.folderId&&e.type!=="folder")return this._toplevelInsertItemAt(r.index+1,e,i.shouldFocus,r.folderId);if(r.type==="folder"&&!r.collapsed&&e.type!=="folder")return this._toplevelInsertItemAt(r.index+1,e,i.shouldFocus,r.id)}let o=this.getFirstFullyVisibleItem();for(o&&o.type==="folder"&&(o=this.getItemModelByIndex(o.index+1));o&&o.type!=="folder"&&o.folderId;)o=this.getItemModelByIndex(o.index+1);let n=o?o.index:this.getItemCount(),a;return this._toplevelInsertItemAt(n,e,i.shouldFocus,a)}getFirstFullyVisibleItem(){let e=tM(this);if(e)return bl(this.listModel,e)}findEl(e){if(this.rootElt)return this.rootElt.querySelector(e)||void 0}getExppanelSelector(){return Wb(this)}scrollItemIntoView(e){if(!this.rootElt||!this.isListVisible())return;let i=this.getItemNodeById(e.id),r=$b(this);if(!(!i||!r)){if(e.type==="table"){let o=i.querySelector(".dcg-row .dcg-selected");if(o){Ms(o,r,60);return}}Ms(i,r,90)}}scrollSelectedItemIntoView(){let e=this.getSelectedItem();if(e){if(e&&e.type!=="folder"&&e.folderId){let i=this.getItemModel(e.folderId);i&&i.type==="folder"&&i.collapsedChildIsSelected&&(e=i)}this.scrollItemIntoView(e)}}_pasteTable(e){let i=this.getGrapher();if(!i)return;let r=Ew(this.listModel),o=p0(r,e,this),n=this.createItemModel(o);this._toplevelNewItemAtSelection(n,{shouldFocus:!0}),this._closeAddExpression();let a=i.getProjection(),s=a.viewport,l=__dcg_shared_module_exports__['va'](e[0],function(u){return parseFloat(u)}),c=__dcg_shared_module_exports__['va'](e[1],function(u){return parseFloat(u)});if(this.is3dProduct())return;let p={xmin:__dcg_shared_module_exports__['Ca'](l),xmax:__dcg_shared_module_exports__['Ba'](l),ymin:__dcg_shared_module_exports__['Ca'](c),ymax:__dcg_shared_module_exports__['Ba'](c),type:"table"};if(isFinite(p.xmin)&&isFinite(p.xmax)&&isFinite(p.ymin)&&isFinite(p.ymax)&&(p.xmax>s.xmax||p.xmin<s.xmin||p.ymax>s.ymax||p.ymin<s.ymin)){let u=Hb([p],a);if(u&&!this.viewportIsLocked()){let g=new er(u.xmin,u.xmax,u.ymin,u.ymax);i.viewportController.setViewport(g),this._showToast({message:this.s("graphing-calculator-text-toast-zoom-to-fit"),undoCallback:()=>{this.dispatch({type:"undo"})}}),this.markSquareAxesAfterUserEditedViewport()}}}_insertSeveralExpressions(e){for(var i=0;i<e.length;i++){let r;r=this.createItemModel(e[i]),this._toplevelNewItemAtSelection(r,{shouldFocus:!0})}}_appendNumberList(e){let i=this.getSelectedItem();if(i&&i.type==="expression"){let r=i.latex,o=this.createItemModel({type:"expression",id:this.generateId(),latex:r+e});return this._toplevelReplaceItemAt(i.index,o,!0)}}_openOnWeb(){this.runAfterDispatch(()=>{let e=this.getGrapher();if(!e)return;let i=JSON.stringify(this.getState()),r=e.screenshot({width:100,height:100}),a=(this.getGraphSettings().config.crossOriginSaveTest?"/":"https://www.desmos.com/")+"api/v1/calculator/cross_origin_save",s=document.createElement("div");y3.mountToNode(RS,s,{stateData:()=>i,thumbData:()=>r,saveURL:()=>a}),this.rootElt.append(s);let l=s.querySelector("form[name=open_graph_on_web]");H(l).trigger("submit"),s.remove()})}notifyBugsnagAboutMissingSelectedItem(e,i){let r=wh(this.listModel);var o="";try{r?o=JSON.stringify(r.cachedUndoRedoFullState,null,2):o="undefined"}catch(s){o="[[could not stringify]]"}var n="";try{if(!r)n="undefined";else{let s={id:r.id,index:r.index,displayIndex:r.index,secretIndex:r.secretIndex,guid:r.guid,renderShell:r.renderShell,isHiddenFromUI:r.isHiddenFromUI,hasDCGView:!!r.dcgView,cachedRenderHeight:r.cachedRenderHeight};n=JSON.stringify(s,null,2)}}catch(s){n="[[could not stringify]]"}var a="";try{a=JSON.stringify(G0(this.listModel),null,2)}catch(s){a="[[could not stringify]]"}pa("ReplaceItemAtError: no item at index",{metaData:{index:e,shouldFocus:i,selectedModelJSON:n,selectedItemJSON:o,listStateJSON:a}})}_toplevelReplaceItemAt(e,i,r){let o=i,n=this.getItemModelByIndex(e);n||this.notifyBugsnagAboutMissingSelectedItem(e,r);let a=n.type!=="folder"&&n.folderId;vh(this.listModel,e),Ma(this.listModel,o,e),a&&Mo(o,a),r&&io(this,o.id)}convertImageToDraggable(e){let i=this.getItemModel(e);if(!i||i.type!=="image")return;let r=i.folderId,o=i.index+1,n=i.center,a=Ew(this.listModel),s=__dcg_shared_module_exports__['cb']("C_"+a),l=this.createItemModel({id:this.generateId(),type:"expression",latex:s+"="+n,dragMode:"XY",hidden:!0});Ma(this.listModel,l,o),r&&Mo(l,r),la(i,"center",s),m0(i,!0),f0(i,!0)}createSlidersForItem(e,i){let r=this.getItemModel(e);if(!r)return;let o=r.type!=="folder"&&r.folderId;return this.createSliders({model:r,folderId:o,index:r.index+1},i)}createSlidersForTicker(e){return this.createSliders({model:this.listModel.ticker,folderId:!1,index:0,doNotChangeFocus:!0},e)}createSliders({model:e,folderId:i,index:r,doNotChangeFocus:o},n){var a=[];e.type==="ticker"?mw(e,(g,m)=>{a.push({latex:g,location:m})}):ph(e,(g,m)=>{a.push({latex:g,location:m.location})});var s=HN(a,n,{degreeMode:this.graphSettings.degreeMode});let l=e.formula?e.formula.action_value:void 0;for(var c=n.map(g=>{var m=s[g],w="1";m&&m.value!==void 0&&(w=m.value);var C;g===""?C="":l&&l.hasOwnProperty(g)?C=l[g]:C=__dcg_shared_module_exports__['cb'](g)+"="+w;var S={type:"expression",id:this.generateId(),latex:C,color:this.getNextColor(),hidden:!!C};return m&&(m.min!==void 0&&(S.slider||(S.slider={}),S.slider.hardMin=!0,S.slider.min=m.min),m.max!==void 0&&(S.slider||(S.slider={}),S.slider.hardMax=!0,S.slider.max=m.max),m.step!==void 0&&(S.slider||(S.slider={}),S.slider.step=m.step)),S}),p=c.length-1;p>=0;p--){let g=this.createItemModel(c[p]);Ma(this.listModel,g,r),i&&Mo(g,i)}if(o)return;let u=c[c.length-1];u.latex===""?io(this,u.id):Bi(this,void 0)}_uploadImagesAndWaitForThemToLoad(e){let{files:i,id:r}=e;if(!i||i.length===0){this._showToast({message:this.s("graphing-calculator-text-toast-no-file-selected")});return}if(r&&i.length>1){this._showToast({message:this.s("graphing-calculator-text-toast-choose-one-file")});return}let o=qV({controller:this,files:i,id:r}),n=o.errors[0];n&&this._showToast({message:n});for(let a of o.tokens)this.__pendingImageUploads[a]=!0;this.isUploadingImages()&&this._showToast({message:this.s("graphing-calculator-text-toast-uploading-images"),onHide:()=>{this._clearPendingImageUploads()}})}getImageToRetry(){let e;for(let i of this.getAllItemModels())i.type==="image"&&i.loadStatus==="failed"&&(!e||e.failures>i.failures)&&(e=i);return e}retryLoadingFailedImage(e){let i=Date.now(),r=i-this.imageRetryState.lastAttemptTime,o=1e3*Math.pow(2,this.imageRetryState.attempts);this.imageRetryState.attempts>0&&r<o||(y0(e),this.imageRetryState={lastAttemptTime:i,attempts:this.imageRetryState.attempts+1})}getSelectedItem(){return wh(this.listModel)}getAllSelectedItems(){return kw(this.listModel)}getOpenItemMenu(){return this.listModel.openItemMenu}isItemSettingsMenuOpen(e){var i=this.listModel.openItemMenu;return i?i.guid===e:!1}closeItemSettingsMenu(){let e=this.getOpenItemMenu();e!==void 0&&(e.focusFirstOption&&(e.previousFocusLocation!==void 0?Bi(this,e.previousFocusLocation):this.focusOpenMenuIcon()),this.listModel.openItemMenu=void 0)}focusOpenMenuIcon(){let e=this.getOpenItemMenu();e&&(e.type==="slider"?this.dispatch({type:"set-focus-location",location:{type:"slider-animation-properties-icon",id:e.model.id}}):e.type==="image"?this.dispatch({type:"set-focus-location",location:{type:"image-icon",id:e.model.id}}):e.type==="table-column"?this.dispatch({type:"set-focus-location",location:{type:"table-icon",id:e.model.table.id,columnId:e.model.id}}):e.type==="geo-tool-dropdown"?this.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:e.tools[0]}}):e.type==="multi-select-more"?this.dispatch({type:"set-focus-location",location:{type:"multi-select-more-icon"}}):e.type==="multi-select-transformations"?this.dispatch({type:"set-focus-location",location:{type:"multi-select-transformations-icon"}}):this.dispatch({type:"set-focus-location",location:{type:"expression-icon",id:e.model.id}}))}getFocusedItem(){return $N(this)}getFocusLocation(){return this.focusLocation}isFocusLocationFocused(e){let i=this.focusLocation,r=e;return!i||!r?!1:__dcg_shared_module_exports__['Ra'](i,r)}isCurrentFocusLocationValid(){var o;let e=this.focusLocation;if(!e)return!0;if(e.type==="settings")return e.location==="icon"||this.isGraphSettingsOpen();if(e.type==="add-item-btn"||e.type==="edit-list-toggle"||e.type==="hide-expression-list-btn"||e.type==="show-expression-list-btn")return this.isListEnabled();if(e.type==="add-expression-btn"||e.type==="add-table-btn")return this.layoutModel.addExpressionOpen;if(e.type==="add-note-btn")return this.layoutModel.addExpressionOpen&&this.areNotesEnabled();if(e.type==="add-folder-btn")return this.layoutModel.addExpressionOpen&&this.areFoldersEnabled();if(e.type==="add-ticker-btn")return this.layoutModel.addExpressionOpen&&this.areActionsEnabled();if(e.type==="add-image-btn")return this.layoutModel.addExpressionOpen&&this.areImagesEnabled();if(e.type==="zoom-in-btn"||e.type==="zoom-restore-btn")return!0;if(e.type==="search-expressions"||e.type==="replace-expressions")return this.expressionSearchOpen;if(e.type==="ticker")return this.listModel.ticker.open;if(e.type==="generic-menu")return!!this.getOpenItemMenu();if(e.type==="graph-paper"){let n=this.getGrapher();return!!(n&&n.getIsVisible()&&n.settings.config.graphpaper)}if(e.type==="geo-show-constructions-icon"||e.type==="geo-token"||e.type==="multi-select-more-icon"||e.type==="multi-select-transformations-icon"||e.type==="label-points-icon")return this.isGeoUIActive();if(e.type==="new-transformation-number"){let n=this.getGeoModel(),a=n.getCurrentTool(),s=n.getNonObjectsState().ui.currentTool.inputIndex,l=a.getSpec&&a.getSpec();return!!l&&!!l.inputs[s]&&!!l.inputs[s].numberInputInfo}if(e.type==="geo-header-back-link"||e.type==="multi-select-delete-icon"||e.type==="multi-select-show-hide-icon")return this.isGeoUIActive()&&this.hasAnyItemsSelected();if(e.type==="geo-basic-tool")return this.isGeoUIActive()&&e.tool!=="expression-edit";if(e.type==="regression-output")return!!this.getItemModel(e.id)&&e.parameter!=="";if(e.type==="quest")return this.getQuestIsActive();let i=this.getOpenItemMenu();if(e.type==="geo-basic-tool-menu-item")return this.isGeoUIActive()&&e.tool!==""&&i!==void 0&&i.type==="geo-tool-dropdown";if(e.type==="global-mute-button")return!!((o=this.toneController)!=null&&o.someExpressionsShouldPlayTones());let r;if(i&&i.type==="table-column"?r=i.model.table:r=this.getItemModel(e.id),!r)return!1;if(e.type==="change-image-btn")return this.listModel&&r.type==="image"&&this.areImagesEnabled();if(e.type==="expression-menu"){if(e.location==="start"||e.location==="end"||e.location==="updaterule"||e.location==="anywhere"||r.type==="table")return!0;if(r.type!=="expression")return!1;let{points:n,lines:a,fill:s}=r;El(r)&&(s=!0);let l=__dcg_shared_module_exports__['oc'](r.formula.expression_type,{points:n,lines:a,fill:s});return!(!l.fill&&!l.points&&!l.lines&&!r.showLabel)}if(!this.isItemSelected(e.id)&&e.type!=="editable-label")return!1;switch(e.type){case"domain-limit":return!(r.type!=="expression"||!lv(r)&&!cv(r));case"expression-icon":case"top-level-icon":return!0;case"image-icon":return r.type==="image"&&r.loadStatus!=="loading"&&r.loadStatus!=="failed"&&!r.error;case"action-icon":return!(r.type!=="expression"||!Fh(r));case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":case"slider-limit":return!(r.type!=="expression"||!HP(r));case"table-icon":return r.type==="table"&&this.getGraphSettings().config.graphpaper;case"visualization-prop":return!(r.type!=="expression"||!fv(r));case"distribution-param":if(r.type!=="expression")return!1;let n=Va(r);return n?e.location in n.values:!1;case"cdf-limit":return r.type!=="expression"?!1:vc(r);case"image":return r.type==="image";case"folder":return r.type==="folder";case"text":return r.type==="text";case"expression":return!(r.type!=="expression"||this.isInEditListMode()||e.isFakeGraphFocus&&!this.getValidCursorContext());case"readonly-expression":return this.isItemReadonly(r.id)||r.type==="expression"&&this.isInEditListMode();case"braille-output":return r.type==="expression"&&this.getBrailleMode()!=="none";case"table":return r.type!=="table"?!1:gV(r,e.location);case"table-container":return r.type==="table"&&this.isInEditListMode();case"editable-label":return r.type!=="expression"?!1:Oh(r);default:return e}}shouldAllowMovingPointsWithKeyboard(){let e=this.getActiveTool();return e==="selection"||e==="box-selection"}isDragDropActive(){return!!this.listModel.dragState}isItemBeingDragged(e){let i=this.listModel.dragState;return!(!i||i.firstItemId!==e)}shouldRenderDraggedItemAsToken(){let e=this.listModel.dragState;return e?e.renderType==="token":!1}canDraggedItemBeMovedIntoTokenPane(){var n,a,s,l,c;let e=this.getDraggedItemId();if(!e)return!1;let i=this.getItemModel(e);if(!i||i.type!=="expression"||this.isItemMarkedReadonly(i.id))return!1;let r=(n=i.formula.geometry)==null?void 0:n.valueType;if(r===void 0)return!1;let o=(s=(a=i.formula.geometry)==null?void 0:a.call)==null?void 0:s.parents;if(o){let p=(c=(l=i.formula.geometry)==null?void 0:l.call)==null?void 0:c.symbol;for(let u=0;u<o.length;u++){let g=o[u];if(!(p==="rotate"&&u===1||p==="dilate"&&u===1)){if(p==="glider"&&u===1){let m=H0(i),w=m&&m[1];return w&&w.type==="Decimal"}if(p==="translate"&&u===1){let m=H0(i),w=m&&m[0],C=m&&m[1];if(w&&__dcg_shared_module_exports__['ec'](w)&&(C==null?void 0:C.type)==="Dot"&&C.args[1].type==="Cmd"&&C.args[1].val==="start"&&__dcg_shared_module_exports__['ec'](C.args[0])&&__dcg_shared_module_exports__['p'](w.span)===__dcg_shared_module_exports__['p'](C.args[0].span))return!0}if(!g)return!1}}return!(__dcg_shared_module_exports__['fa'](r,__dcg_shared_module_exports__['Q'])&&!__dcg_shared_module_exports__['$b'](p))}if(__dcg_shared_module_exports__['fa'](r,__dcg_shared_module_exports__['s'])){let p=i.latex.slice(i.latex.indexOf("=")+1);if(/^ *(\\left)*\([0-9. ,-]+(\\right)*\) *$/.test(p))return!0}return!1}getDraggedItemId(){let e=this.listModel.dragState;return e&&e.firstItemId}getDraggedIdentifier(){var r;let e=this.getRawDragState();if(!e)return;let i=this.getItemModel(e.dragTarget.calcId);if(!(!i||i.type!=="expression"))return(r=Er(i))==null?void 0:r.identifier}getRawDragState(){return this.listModel.dragState}initStateStack(){this.stateStack=new Bc,this.stateStack.addState({diffState:this.getUndoRedoDiffState(),fullState:this.getUndoRedoFullState()})}getUndoRedoDiffState(){var e;return{randomSeed:this.getRandomSeed(),layoutModel:this.layoutModel,settingsViewModel:this.settingsViewModel,graph:(e=this.getGrapher())==null?void 0:e.getUndoRedoDiffState(),expressions:qL(this.listModel),geometryToolbar:S0(this.geometryToolbarModel),wasCompleteSetState:this.isCurrentlyDoingSetState}}getUndoRedoFullState(){var e;return{randomSeed:this.getRandomSeed(),layoutModel:this.layoutModel,settingsViewModel:this.settingsViewModel,graph:(e=this.getGrapher())==null?void 0:e.getUndoRedoFullState(),expressions:G0(this.listModel),geometryToolbar:S0(this.geometryToolbarModel),wasCompleteSetState:this.isCurrentlyDoingSetState}}getState(e){var n,a;let i={stripDefaults:!0};e&&e.hasOwnProperty("stripDefaults")&&(i.stripDefaults=!!e.stripDefaults);let r=(a=(n=this.getGrapher())==null?void 0:n.getState(i))!=null?a:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.getBlankState().graph),{degreeMode:this.graphSettings.degreeMode});var o={version:is,randomSeed:this.getRandomSeed(),graph:r,expressions:zL(this.listModel,i)};if(this.isGeometry()){let s=pL(this.geometryToolbarModel,i);s&&(o.geometryToolbar=s)}return e&&e.avoidBackMigration?__dcg_shared_module_exports__['l'](o):uF(__dcg_shared_module_exports__['l'](o))}isGeometry(){return this.graphSettings.config.product==="geometry-calculator"}is3dProduct(){return this.graphSettings.config.product==="graphing-3d"}isMultiSelectEnabled(){return this.isGeometry()}canLoadPastedLink(e){return this.graphSettings.config.pasteGraphLink?this.isGeometry()?FS(e)||nM(e)||sM(e):this.is3dProduct()?aM(e):FS(e):!1}getBlankState(e){if(this.isGeometry())return kg;if(this.is3dProduct())return u3;let i;return(e==null?void 0:e.degreeMode)!==void 0?i=e.degreeMode:i=this.graphSettings.config.clearIntoDegreeMode,i?__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},Od),{graph:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},Od.graph),{degreeMode:!0})}):Od}externalSetState(e,i){this._clearPendingImageUploads(),this.rootElt&&document.activeElement&&this.rootElt.contains(document.activeElement)&&H(document.activeElement).trigger("blur"),i||(i={}),e||(e=this.getBlankState()),typeof e=="string"&&(e=JSON.parse(e)),e&&(e=_s(e));let r=this.graphSettings.config.product,o;if(!e.graph||e.graph.product===void 0?o="graphing":o=e.graph.product,o!==r)throw new Error(`Data Error: state appears to have been saved in the '${o}' product and cannot be opened in the '${r}' product.`);r==="geometry-calculator"&&(this.showConstructionsOpen=!1),r==="graphing-3d"&&QG&&e.graph.speed3D&&delete e.graph.speed3D;let n=this.layoutModel;this.setState(e,i),FL(this.listModel),Dw(this.listModel),this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},ZT(this.graphSettings.config)),{keypadMinimized:n.keypadMinimized,keypadLayout:n.keypadLayout,keypadFunctionsOpen:n.keypadFunctionsOpen,expressionsVisible:!!this.graphSettings.config.expressions&&(this.isListVisible()||!!i.forceExpressionsOpen)}),this.settingsViewModel=eM(),Bi(this,void 0),i.forceUnsavedChanges?this.enqueueEvent("change"):this.enqueueEvent("clearUnsavedChanges")}setState(e,i){if(this.isCurrentlyDoingSetState=!0,this.suggestedIdentifierRename=void 0,this.lastUserUpdatedExpressionItem=void 0,"graph"in e&&e.graph!==void 0){if("threeDMode"in e.graph&&e.graph.threeDMode&&this.grapher3d){if("showBox3D"in e.graph&&this.grapher3d.webglLayer.showBox(e.graph.showBox3D),"showAxis3D"in e.graph&&this.grapher3d.webglLayer.showAxes(!!e.graph.showAxis3D),"showAxisLabels3D"in e.graph&&this.grapher3d.webglLayer.updateAxes(),"showPlane3D"in e.graph||"showAxis3D"in e.graph){let n=("showPlane3D"in e.graph?!!e.graph.showPlane3D:this.graphSettings.showPlane3D)&&("showAxis3D"in e.graph?!!e.graph.showAxis3D:this.graphSettings.showAxis3D);this.grapher3d.webglLayer.showPlane(n)}let o=this.grapher3d.baseplaneWidth();this.grapher2d.setCanvasSizeFor3D(o,o),this.grapher3d.webglLayer.setBackgroundColor(e.graph.backgroundColor3d)}let r=this.getGrapher();r?r.setGrapherState(e.graph):nu.copyGraphProperties(e.graph,this.graphSettings),"threeDMode"in e.graph&&e.graph.threeDMode&&this.grapher3d&&this.grapher3d.controls.copyWorldRotationToWorld()}if("expressions"in e){pi(this.listModel,void 0);let r=UL(e.expressions);r>=this.__nextItemId&&(this.__nextItemId=r+1),HL(this.listModel,e.expressions,i||{})}if(e.layoutModel&&(this.layoutModel=e.layoutModel),e.settingsViewModel&&(this.settingsViewModel=e.settingsViewModel),(!i||!i.allowUndo)&&this.clearUndoRedoHistory(),this.setRandomSeed(e.randomSeed||Ol()),"geometryToolbar"in e){let r=e.geometryToolbar;this.geometryToolbarModel=xw(r)}}updateToState(e){if(this.isCurrentlyDoingRestoreState=!0,this.suggestedIdentifierRename=void 0,this.lastUserUpdatedExpressionItem=void 0,"graph"in e&&(e.graph.threeDMode?this.grapher3d&&this.grapher3d.setGrapherState(e.graph):this.grapher2d&&this.grapher2d.setGrapherState(e.graph,{doNotClear:!0})),"expressions"in e&&WL(this.listModel,e.expressions),e.layoutModel&&(this.layoutModel=e.layoutModel),e.settingsViewModel&&(this.settingsViewModel=e.settingsViewModel),"geometryToolbar"in e){let i=e.geometryToolbar;this.geometryToolbarModel=xw(i)}}commitUndoRedoSynchronously(e){let i=this.stateStack.getState(),r=i&&i.diffState,o=this.getUndoRedoDiffState();if(aW(r,o))return;let n=this.apiMethodCallStackInfo.withHistoryReplacementDepth>0,a={diffState:o,fullState:this.getUndoRedoFullState()};!n&&f3(e)?(this.stateStack.addState(a),this.enqueueEvent("change",e)):this.stateStack.replaceInteriorState(a)}undo(){if(!this.canUndo())return;this.closeToast(),this.stateStack.undo();let e=this.stateStack.getState().fullState;e.wasCompleteSetState?this.setState(e,{allowUndo:!0}):this.updateToState(e),this.enqueueEvent("change",{type:"undo"})}redo(){if(!this.canRedo())return;this.stateStack.redo();let e=this.stateStack.getState().fullState;e.wasCompleteSetState?this.setState(e,{allowUndo:!0}):this.updateToState(e),this.enqueueEvent("change",{type:"undo"})}clearUndoRedoHistory(){this.stateStack.clear()}canUndo(){return this.stateStack.canUndo()}canRedo(){return this.stateStack.canRedo()}closeToast(){let e=this.toastData.onHide;e&&this.runAfterDispatch(e),this.toastData={}}_closeAddExpression(){this.layoutModel=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.layoutModel),{addExpressionOpen:!1})}doesDOMHaveSize(){return this.layoutMeasurements.width>0&&this.layoutMeasurements.height>0}_getExpListWidth(){var e;if(this.userSpecifiedExpListWidth!==void 0){let o=this.isGeometry()?320:200,n=this.isGeometry()?320:280;e=Math.max(n,Math.min(this.layoutMeasurements.width-o,this.userSpecifiedExpListWidth))}else{if(e=this.layoutMeasurements.width,!e)return 356;var i=.2*e+160;e=Math.min(500,Math.max(280,i))}var r=this.layoutMeasurements.width-this.getGrapherHeight();return Math.abs(r-e)<=10?r:e}_setExpListWidth(e){this.userSpecifiedExpListWidth!==e&&(this.userSpecifiedExpListWidth=e)}getKeypadHeight(){return this.computeMajorLayout().keypad.height}isKeypadEnabled(){return!!this.graphSettings.config.keypad}isKeypadOpen(){if(!this.isKeypadEnabled())return!1;let e=this.layoutModel.keypadMinimized&&!this.isNarrow();return this.needsFakeKeypad()&&!e}isHideKeypadButtonVisible(){return this.getBrailleMode()==="none"&&this.isKeypadOpen()&&(!this.isNarrow()||this.inAudioTraceMode())}isKeypadFunctionsPopoverOpen(){return!!this.layoutModel.keypadFunctionsOpen}getKeypadLayout(){let e=this.layoutModel.keypadLayout;return this.isThreeDMode()?XN(e):e}isLetterKeypadOpen(){let e=this.getKeypadLayout();return this.isKeypadOpen()&&(e==="letters"||e==="noQwertyLetters"||e==="capitalLetters"||e==="noQwertyCapitalLetters")}isFileDraggedOver(){return this.layoutModel.isFileDraggedOver}getGeoToolbarHeight(){return this.shouldShowGeoToolbar()?48:0}isNarrowGeometryHeader(){return this.computeMajorLayout().grapher.width<450}shouldShowMultiSelectHeader(){return this.getSelectedGeoExpression()||this.hasMultipleItemsSelected()}getGrapherHeight(){return this.layoutMeasurements.height-this.getGeoToolbarHeight()}computeMajorLayout(){var e=this.layoutMeasurements.width,i=this.layoutMeasurements.height,r=this.isNarrow(),o=this.isListVisible(),n=this.isKeypadOpen(),a=!this.isGrapherEnabled(),s=!this.isListEnabled(),l=!!this.getGraphSettings().config.projectorMode,c={left:0,top:0,width:0,height:0},p={left:0,top:0,width:0,height:0,paddingTop:0},u={left:0,top:i,width:e,height:l?r?185:193:169};s?(p.width=e,p.height=i):a?(c.width=e,c.height=i):o?r?(c.width=e,c.height=Math.round(.58*i),c.top=i-c.height,p.width=e,p.height=i-c.height):(c.width=this.getExpListWidth(),c.height=i,p.left=c.width,p.width=e-p.left,p.height=i):o||(r?(c.width=e,c.height=Math.round(.58*i),c.top=i,p.width=e,p.height=i):(c.width=this.getExpListWidth(),c.height=i,c.left=-c.width,p.width=e,p.height=i)),n&&(u.top-=u.height,s||(c.height-=u.height));let g=this.getGeoToolbarHeight();return g&&(p.top+=g,p.height-=g),{list:c,grapher:p,keypad:u}}isNarrow(){return this.isGeometry()?this.layoutMeasurements.width<600:this.layoutMeasurements.width<450}getLayoutMeasurements(){return this.layoutMeasurements}getCapExpressionSize(){return!!this.getGraphSettings().config.capExpressionSize}handleAudioTraceCommand(e){let i=this.getAudioGraph();if(i===void 0)return;let r=i.agNavigator;switch(e){case"on":this.runAfterDispatch(()=>{i.enterAudioTrace({fromKeypad:!0})});break;case"off":this.runAfterDispatch(()=>{i.exitAudioTrace()});break;case"hear-graph":i.hearGraph();break;case"stop-graph":i.stopGraph();break;case"volume-down":i.adjustVolume("down");break;case"volume-up":i.adjustVolume("up");break;case"speed-down":i.speedDown();break;case"speed-up":i.speedUp();break;case"previous-point":this.runAfterDispatch(()=>{i.reportAndMoveToPrevPoint()});break;case"next-point":this.runAfterDispatch(()=>{i.reportAndMoveToNextPoint()});break;case"previous-poi":this.runAfterDispatch(()=>{i.reportAndMoveToPrevPOI()});break;case"next-poi":this.runAfterDispatch(()=>{i.reportAndMoveToNextPOI()});break;case"previous-curve":this.runAfterDispatch(()=>{r.prevCurve()});break;case"next-curve":this.runAfterDispatch(()=>{r.nextCurve()});break;case"describe-point":i.describePoint();break;case"describe-curve":i.describeCurve();break;case"describe-axes":i.describeAxes();break;case"keyboard-shortcuts":this.enqueueEvent("showHotkeysModal",{type:"keypad/audio-trace",command:e});break;default:return e}}setAudioTraceSpeed(e){let i=this.getAudioGraph();i&&i.adjustPlaybackSpeed(e)}setGraphPaperFocus(e){var i;Bi(this,e.isFocused?{type:"graph-paper"}:void 0),(i=this.get2dPOIController())==null||i.keyboardAttentionManager.setKeyboardAttention(void 0),this.requestRedrawGraph(),e.isFocused&&this.isGeoToolActive()&&this.runAfterDispatch(()=>{var r;(r=this.get2dPOIController())==null||r.keyboardAttentionManager.handleGrapherGainedFocus()})}isGraphPaperFocused(){let e=this.getFocusLocation();return e?!!(e.type==="graph-paper"||e.type==="expression"&&e.isFakeGraphFocus):!1}isVirtualMouseAllowed(){return!(!this.isGeometry()||!this.isGraphPaperFocused()||!this.geoModel.getCurrentTool().canNextInputBePoint())}isClickableId(e){return Sh(this.getItemModel(e))}setCanShowKeyboardShortcuts(e){this.canShowKeyboardShortcuts=e}getCanShowKeyboardShortcuts(){return this.canShowKeyboardShortcuts}apply3dProps(e){if(!this.isThreeDMode()||!this.grapher3d)return;let i=this.grapher3d.webglLayer;for(let r in e)switch(r){case"showPlane3D":i.showPlane(this.showPlane3D());break;case"showBox3D":i.showBox(!!e[r]);break;case"showAxis3D":i.showAxes(!!e[r]),i.showPlane(this.showPlane3D());break;case"showAxisLabels3D":i.updateAxes();break;default:break}}getGeometryTokenCount(){if(!this.cachedGeoTokenDepths)return 0;let e=0;return __dcg_shared_module_exports__['va'](__dcg_shared_module_exports__['Pa'](this.cachedGeoTokenDepths),i=>e+=i?i.length:0),e}getAllGeometryConstructionIds(){return SL(this.listModel,__dcg_shared_module_exports__['_c'])}makeGeoAPI(){this.geoModel=new qb(this)}getGeoTokenInfoFromIdentifier(e){if(e)return this.cachedGeoTokenInfo[e]}getGhostMode(){return this.getGraphSettings().config.getProperty("ghostMode")}getshowKeyboardShortcutsInTooltips(){return!!this.getGraphSettings().config.showKeyboardShortcutsInTooltips}isDispatching(){return this.dispatcher.isDispatching()}getSuggestedIdentifierRenameInfo(e){if(this.suggestedIdentifierRename&&this.suggestedIdentifierRename.id===e)return this.suggestedIdentifierRename}updateSuggestedIdentifierRenameInfo(){if(!this.shouldShowAuthorFeatures())return;let e=this.lastUserUpdatedExpressionItem;if(!e){this.suggestedIdentifierRename=void 0;return}this.suggestedIdentifierRename&&this.suggestedIdentifierRename.id!==e.id&&(this.suggestedIdentifierRename=void 0);var i=e.formula.assignment||"",r=i?__dcg_shared_module_exports__['cb'](i):"";if(!this.suggestedIdentifierRename){r&&(this.suggestedIdentifierRename={id:e.id,from:r,to:r,countOfChanges:0});return}if(r!==this.suggestedIdentifierRename.to){if(this.suggestedIdentifierRename.to=r,this.suggestedIdentifierRename.from===this.suggestedIdentifierRename.to||!this.suggestedIdentifierRename.from||!this.suggestedIdentifierRename.to){this.suggestedIdentifierRename.countOfChanges=0;return}if(this.countIdentifierAssignments(i)>1){this.suggestedIdentifierRename.countOfChanges=0;return}var o=this.countGlobalIdentifierOccurences(this.suggestedIdentifierRename.from);this.suggestedIdentifierRename.countOfChanges=o}}getMathquillConfig(e){let i=e.additionalOperators||[];return this.toneAllowed()&&i.push("tone"),{autoOperatorNames:sa({additionalOperators:i,includeGeometryFunctions:this.isGeometry(),include3DFunctions:this.is3dProduct()}),autoCommands:pl({additionalCommands:this.isGeometry()?[]:["int"],disallowAns:this.isGeometry()})}}constrainMultiSelect(){if(this.isMultiSelectEnabled())return;let e=kw(this.listModel);e.length>1&&pi(this.listModel,e[0])}focusFirstExpression(){if(!this.getGraphSettings().config.expressions)return;let e=mh(this.listModel);e&&io(this,e.id,"end")}_updateToneAvailability(){let e=this.toneAllowed();e&&!this.toneController?this.toneController=new yf(this):!e&&this.toneController&&(this.toneController=void 0)}toneItemsExist(){return this.toneEnabled()?this.getAllItemModels().some(e=>da(e)):!1}toneAllowed(){return!!(this.graphSettings.config.audio&&this.graphSettings.config.tone)}toneEnabled(){return!!this.toneController}};function b3(t){return t&&__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},t),{wasCompleteSetState:void 0,layoutModel:void 0,settingsViewModel:void 0})}function aW(t,e){return __dcg_shared_module_exports__['Ra'](b3(t),b3(e))}var um=__dcg_shared_module_exports__['h'](j());Tt();var Jb=class{constructor(e){this.previousPaneFocusLocations={main:void 0,quest:void 0};this.controller=e}markKeyDownAsHandled(e){e.stopPropagation(),e.preventDefault()}handleKeydown(e){var r,o,n,a,s;let i=Dr(e);if(Hf(e))this.markKeyDownAsHandled(e),this.controller.hasVisibleAndUndoableToast()?this.controller.toastUndo():this.controller.dispatch({type:"undo"});else if(Wf(e))this.markKeyDownAsHandled(e),this.controller.dispatch({type:"redo"});else if(e.altKey&&!e.ctrlKey&&!e.metaKey&&e.shiftKey&&i==="Z"){let l=this.controller.getSelectedItem();l&&l.id&&(this.markKeyDownAsHandled(e),this.controller.dispatch({type:"expression-zoom-fit",id:l.id,focusAfterTap:!1}))}else if(e.altKey!==Rr&&e.metaKey===Rr&&!e.ctrlKey&&e.shiftKey&&i==="A"&&this.controller.isDecimalToFractionEnabled()){let l=this.controller.getSelectedItem();l&&l.type==="expression"&&(this.markKeyDownAsHandled(e),this.controller.dispatch({type:"toggle-fraction-evaluation",id:l.id}),this.controller.runAfterDispatch(()=>{md(l)?le(this.controller.s("shared-calculator-narration-show-as-fraction")):le(this.controller.s("shared-calculator-narration-show-as-decimal"))}))}else if(!e.altKey&&e.ctrlKey!==Rr&&e.metaKey===Rr&&i==="F"){if(this.controller.isExpressionListFocused()){let l=Se.getFocusedMathquill(),c="";try{c=l.__controller.cursor.selection.join("latex")||""}catch(p){}this.controller.dispatch({type:"open-expression-search",rename:!!e.shiftKey,latex:c}),this.markKeyDownAsHandled(e)}}else if((e.altKey||e.metaKey)&&!e.ctrlKey&&!e.shiftKey&&i===void 0){if(be(e)===Jo){let l=this.controller.getSelectedItem();l&&l.type==="folder"&&(this.markKeyDownAsHandled(e),this.controller.dispatch({type:"set-folder-collapsed",id:l.id,isCollapsed:!0}),le(this.controller.s("graphing-calculator-narration-folder-collapsed")))}else if(be(e)===un){let l=this.controller.getSelectedItem();l&&l.type==="folder"&&(this.markKeyDownAsHandled(e),this.controller.dispatch({type:"set-folder-collapsed",id:l.id,isCollapsed:!1}),le(this.controller.s("graphing-calculator-narration-folder-expanded")))}}else if(e.shiftKey&&(e.altKey||e.metaKey)&&!e.ctrlKey){if(be(e)===Jo)this.markKeyDownAsHandled(e),this.controller.dispatch({type:"set-all-folders-collapsed",isCollapsed:!0}),le(this.controller.s("graphing-calculator-narration-all-folders-collapsed"));else if(be(e)===un)this.markKeyDownAsHandled(e),this.controller.dispatch({type:"set-all-folders-collapsed",isCollapsed:!1}),le(this.controller.s("graphing-calculator-narration-all-folders-expanded"));else if(i==="H"){let l=this.controller.getSelectedItem();l&&"hidden"in l&&(this.markKeyDownAsHandled(e),this.controller.dispatch({type:"toggle-item-hidden",id:l.id}),this.controller.runAfterDispatch(()=>{l.hidden?le(this.controller.s("graphing-calculator-narration-item-hidden")):le(this.controller.s("graphing-calculator-narration-item-visible"))}))}else if(i==="O"){if(!this.controller.authorFeaturesAvailable())return;this.controller.dispatch({type:"set-author-mode",enabled:!this.controller.shouldShowAuthorFeatures()}),le(this.controller.shouldShowAuthorFeatures()?this.controller.s("shared-calculator-narration-author-mode-on"):this.controller.s("shared-calculator-narration-author-mode-off")),this.markKeyDownAsHandled(e)}else if(i==="E"){if(!this.controller.isListEnabled())return;this.controller.isListVisible()?(this.controller.dispatch({type:"hide-expressions-list",focusShowIcon:!1}),le(this.controller.s("graphing-calculator-narration-hide-expression-list"))):(this.controller.dispatch({type:"show-expressions-list",focusHideIcon:!1}),this.focusExpressionList()),this.markKeyDownAsHandled(e)}}else if(e.ctrlKey&&(e.altKey||e.metaKey)&&!e.shiftKey){if(i==="E"){if(!this.controller.isListEnabled())return;this.markKeyDownAsHandled(e),this.focusExpressionList()}else if(i==="X"){if(!this.controller.isListEnabled())return;this.markKeyDownAsHandled(e),this.controller.canUserAddExpressions()?(le(this.controller.s("graphing-calculator-narration-add-expression")),this.controller.dispatch({type:"new-expression"})):le(this.controller.s("graphing-calculator-narration-unable-to-add-expression"))}else if(i==="O"){if(!this.controller.isListEnabled())return;this.markKeyDownAsHandled(e),this.controller.canUserAddExpressions()&&this.controller.areNotesEnabled()?(le(this.controller.s("graphing-calculator-narration-add-note")),this.controller.dispatch({type:"new-text"})):le(this.controller.s("graphing-calculator-narration-unable-to-add-note"))}else if(i==="F"&&this.controller.canUserAddExpressions()&&this.controller.areFoldersEnabled())this.markKeyDownAsHandled(e),le(this.controller.s("graphing-calculator-narration-add-folder")),this.controller.dispatch({type:"new-folder"});else if(i==="I"&&this.controller.canUserAddExpressions()&&this.controller.areImagesEnabled())this.markKeyDownAsHandled(e),this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:!1}),this.controller.runAfterDispatch(()=>{let l=this.controller.findEl(".dcg-add-expression-container input[type=file]");l&&(H(l).trigger("click"),le(this.controller.s("graphing-calculator-narration-add-image")))});else if(i==="T")this.markKeyDownAsHandled(e),this.controller.canUserAddExpressions()?(le(this.controller.s("graphing-calculator-narration-add-table")),this.controller.dispatch({type:"new-table"})):le(this.controller.s("graphing-calculator-narration-unable-to-add-table"));else if(i==="M"&&this.controller.isGeoUIActive())if(this.markKeyDownAsHandled(e),this.controller.getGeoToolbarGroupKeys().length>0){let l=this.controller.getActiveTool();this.controller.shouldShowMultiSelectHeader()?this.controller.dispatch({type:"set-focus-location",location:{type:"geo-header-back-link"}}):(l==="expression-edit"&&(l="selection"),this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:l}}))}else le(this.controller.s("graphing-calculator-narration-no-geometry-tools-available"));else if(i==="C"&&this.controller.isGeoUIActive())this.markKeyDownAsHandled(e),this.controller.getGeometryTokenCount()>0?this.controller.dispatch({type:"set-show-constructions-open",open:!0,setFocus:!0}):le(this.controller.raw("Object navigator has no items."));else if(i==="G")this.markKeyDownAsHandled(e),this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:!0});else if(i==="P"){if(this.markKeyDownAsHandled(e),this.controller.isGeometry()){let l=this.controller.getFocusLocation(),c=this.controller.getValidCursorContext();if(l&&l.type==="expression"&&c&&c.type!=="empty"){this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:l.id,isFakeGraphFocus:!0}}),(o=(r=this.controller.getGrapher2d())==null?void 0:r.poiController)==null||o.keyboardAttentionManager.handleGrapherGainedFocus();return}}this.controller.dispatch({type:"set-focus-location",location:{type:"graph-paper"}})}else if(i==="Z"){let l=this.controller.getSelectedItem();l&&l.id&&this.controller.dispatch({type:"expression-zoom-fit",id:l.id,focusAfterTap:!1})}else if(i==="D"&&this.controller.canUserAddExpressions()){this.markKeyDownAsHandled(e);let l=!this.controller.isInEditListMode();this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:l,focusExpressionList:!0})}}else if(sI(e)&&this.controller.getQuestIsActive()){((n=this.controller.focusLocation)==null?void 0:n.type)==="quest"?(this.previousPaneFocusLocations.quest=this.controller.focusLocation,this.previousPaneFocusLocations.main?this.controller.dispatch({type:"set-focus-location",location:this.previousPaneFocusLocations.main}):this.focusExpressionList()):(this.previousPaneFocusLocations.main=this.controller.focusLocation,this.controller.dispatch({type:"set-focus-location",location:(a=this.previousPaneFocusLocations.quest)!=null?a:{type:"quest",location:"quest-pane"}})),this.markKeyDownAsHandled(e);return}else if(!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey){if(be(e)===es)(!document.activeElement||!qp(document.activeElement))&&e.preventDefault();else if(be(e)===Yo&&!this.controller.getOpenItemMenu()&&!this.controller.isGraphSettingsOpen()){if(this.controller.isGeoUIActive()){let l=!1,c=this.controller.getGeoModel();if(this.controller.hasAnyItemsSelected()&&(this.controller.dispatch({type:"set-none-selected"}),l=!0),c.isToolplayActive()&&(this.controller.dispatch({type:"cancel-geo-toolplay"}),le(this.controller.s("graphing-calculator-narration-geometry-tool-cancelled")),l=!0),this.controller.isGraphPaperFocused()&&(this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:this.controller.getActiveTool()}}),l=!0),this.controller.getActiveTool()!=="selection"&&!l){this.controller.dispatch({type:"select-geo-tool",tool:"selection"});let p=this.controller.getFocusLocation();p&&p.type==="geo-basic-tool"&&this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:this.controller.getActiveTool()}}),l=!0}if(l){this.markKeyDownAsHandled(e);return}}this.controller.isInEditListMode()&&!this.controller.findEl(".dcg-options-menu")&&(this.markKeyDownAsHandled(e),this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!0}))}}else if(!e.metaKey&&!e.shiftKey&&e.ctrlKey===Rr&&e.altKey===!Rr){if(i==="N"){if(!this.controller.getBrailleControls())return;this.markKeyDownAsHandled(e),this.controller.dispatch({type:"set-braille-mode",mode:"nemeth"}),le(this.controller.s("shared-calculator-narration-hotkey-braille-mode-nemeth"))}else if(i==="U"){if(!this.controller.getBrailleControls())return;this.markKeyDownAsHandled(e),this.controller.dispatch({type:"set-braille-mode",mode:"ueb"}),le(this.controller.s("shared-calculator-narration-hotkey-braille-mode-ueb"))}else if(i==="Q"||i==="X"){if(!this.controller.getBrailleControls())return;this.markKeyDownAsHandled(e),this.controller.dispatch({type:"set-braille-mode",mode:"none"}),le(this.controller.s("shared-calculator-narration-hotkey-braille-mode-off"))}else if(i==="6"){if(!this.controller.getBrailleControls())return;this.markKeyDownAsHandled(e);let l=!this.controller.getSixKeyInput();this.controller.dispatch({type:"set-six-key-input",useSixKeyInput:l}),le(l?this.controller.s("shared-calculator-narration-six-key-mode-on"):this.controller.s("shared-calculator-narration-six-key-mode-off"))}else if(i==="D")this.markKeyDownAsHandled(e),this.controller.dispatch({type:"set-graph-settings",degreeMode:!this.controller.getGraphSettings().degreeMode}),le(this.controller.getGraphSettings().degreeMode?this.controller.s("graphing-calculator-button-settings-degrees"):this.controller.s("graphing-calculator-button-settings-radians"));else if(i==="K"){if(!this.controller.isKeypadEnabled()||this.controller.inAudioTraceMode())return;this.markKeyDownAsHandled(e),this.controller.dispatch({type:"keypad/set-minimized",minimized:this.controller.isHideKeypadButtonVisible()})}else i==="M"&&((s=this.controller.toneController)==null||s.handleMuteKeyShortcut(),this.markKeyDownAsHandled(e));if(i==="+"||i==="="){this.zoom("in"),this.markKeyDownAsHandled(e);return}else if(i==="-"){this.zoom("out"),this.markKeyDownAsHandled(e);return}else if(i==="0"&&!e.shiftKey){this.setDefaultViewport(),this.markKeyDownAsHandled(e);return}}}focusExpressionList(){let e=this.controller.getSelectedItem();e?this.controller.dispatch({type:"move-focus-to-item",id:e.id}):this.controller.dispatch({type:"focus-first-expression"})}zoom(e){var i;(i=this.controller.getGrapher())==null||i.viewportController.zoom(e)}setDefaultViewport(){var e;(e=this.controller.getGrapher())==null||e.viewportController.setDefaultViewport()}};Tt();var sW=function(){{var t=0,e=1,i=2,r=!1,o=function(){n(document),r=!0},n=function(a){r||H(a).bind("touchstart",function(s){var l=H(s.target),c=t,p=null;if(!l[0].closest("[disablescroll]"))for(;c===t&&l.length&&l[0].tagName!==void 0;){var u=getComputedStyle(l[0]).overflow,g=getComputedStyle(l[0]).overflowY;if(u!=="hidden"&&u!=="visible"&&g!=="hidden"&&g!=="hidden"){var m=l.scrollTop();m!==0&&(c=i),l.scrollTop(m+1),l.scrollTop()!==m&&(c=e|c,l.scrollTop(m))}l=H(l[0].parentElement)}if(c!==t){p=[];for(var w=s.originalEvent.touches,C=0;C<w.length;C++){var S={};for(var k in w[C])w[C].hasOwnProperty(k)&&(S[k]=w[C][k]);p.push(S)}}H(document).on("touchmove.scrollfix",function(M){if(p){var I=p[0],E=M.originalEvent.touches[0],T=E.screenY-I.screenY;(T>0&&!(c&i)||T<0&&!(c&e))&&(c=t),T&&(p=null)}c===t&&M.preventDefault()}),H(document).on("touchend.scrollfix",function(){H(document).off(".scrollfix")})})};return{limitScrollOnElement:n,limitScrollOnDocument:o}}}();var{limitScrollOnElement:NS,limitScrollOnDocument:Kme}=sW;var St=__dcg_shared_module_exports__['h'](j());Tt();var Pe=__dcg_shared_module_exports__['h'](j());Tt();var w3=__dcg_shared_module_exports__['h'](j());function lW(t){let e=t.target;return e.classList.contains("dcg-exp-action-button")||e.classList.contains("dcg-icon-duplicate")||e.classList.contains("dcg-icon-remove")||e.classList.contains("dcg-icon-lock")||e.classList.contains("dcg-icon-pencil")}var Qn=class extends w3.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,this._isFirstRender=!0,this._isDragCopy=this.props.isDragCopy()}onItemViewMounted(){this._isDragCopy||(this.model.dcgView=this),this._isFirstRender=!1}onItemViewUnmounted(){this._isDragCopy||(this.model.dcgView=void 0)}isFirstRender(){return this._isFirstRender}onMouseSelect(e){if(this.controller.isInEditListMode()&&!lW(e)){this.exitEditListMode();return}this.controller.isItemReadonly(this.id)||e.type==="dcg-tap"&&e.device==="mouse"||e.type==="dcg-tapstart"&&e.device==="touch"||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-selected-id",id:this.id}))}onDragPending(e){this.controller.isItemReadonly(this.model.id)||this.props.onDragPending(e)}exitEditListMode(){this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!0})}};var ro=__dcg_shared_module_exports__['h'](j());var Kc=__dcg_shared_module_exports__['h'](j());var Oo=class extends Kc.Class{template(){return Kc.createElement(De,{tooltip:this.props.error,sticky:this.const(!0),gravity:this.props.gravity},Kc.createElement("div",{class:()=>({"dcg-tooltipped-error":!0,"dcg-white":this.props.isWhite&&this.props.isWhite(),"dcg-small":this.props.size&&this.props.size()==="small"})},Kc.createElement("i",{class:Kc.const("dcg-icon-error"),"aria-hidden":Kc.const("true")})))}};var _o=__dcg_shared_module_exports__['h'](j());var gn=__dcg_shared_module_exports__['h'](j());var{If:BS}=gn.Components,Ir=class extends gn.Class{template(){return gn.createElement("span",{class:()=>({"dcg-do-not-blur":!0,"dcg-circular-icon":!0,"dcg-thick-outline":this.isThickOutline(),"dcg-white-icon":!!this.props.whiteIcon&&this.props.whiteIcon(),"dcg-hidden":this.isHidden(),"dcg-semi-transparent":this.props.semiTransparent&&this.props.semiTransparent(),"dcg-colored-icon":this.isColoredIcon(),"dcg-has-background-image":this.hasBackgroundImage(),[this.iconModifier()]:this.iconModifier().length>0}),style:this.bindFn(this.getIconStyle)},gn.createElement(BS,{predicate:this.bindFn(this.hasBackgroundImage)},()=>gn.createElement("span",{class:gn.const("dcg-background-image"),style:()=>({"background-image":this.props.backgroundImage&&this.props.backgroundImage(),opacity:this.props.backgroundOpacity&&this.props.backgroundOpacity()})})),gn.createElement(BS,{predicate:()=>!!this.backgroundIcon()},()=>gn.createElement("i",{class:()=>({[this.backgroundIcon()]:!0,"dcg-layered-icon":!0}),style:()=>({opacity:this.backgroundOpacity()})})),gn.createElement(BS,{predicate:()=>!!this.primaryIcon()},()=>gn.createElement("i",{class:()=>({[this.primaryIcon()]:!0,"dcg-layered-icon":!0}),style:()=>({color:this.props.foregroundColor&&this.props.foregroundColor()})})),gn.createElement(BS,{predicate:()=>this.props.iconType()==="loading"},()=>gn.createElement("span",{class:gn.const("dcg-spinner")})))}isColoredIcon(){return!this.isThickOutline()&&!this.isHidden()&&!this.hasBackgroundImage()&&this.props.iconType()!=="loading"}iconModifier(){if(!this.props.iconModifier)return"";switch(this.props.iconModifier()){case"medium":return"dcg-modifier-size-medium";case"large":return"dcg-modifier-size-large";case"small":return"dcg-modifier-size-small";case"rotated":return"dcg-modifier-rotated";case"none":return""}}getIconStyle(){let e=!this.isHidden()&&this.props.backgroundColor?Th(this.props.backgroundColor()):void 0;return e?{background:e}:{}}isHidden(){return this.props.iconType()==="hidden"}isThickOutline(){let e=this.props.iconType();return e==="folder"||e==="pause"||e==="play"||e==="fraction"||e==="action"||e==="metronome"||e==="sound"}hasBackgroundImage(){return!!this.props.backgroundImage&&!this.isHidden()&&!!this.props.backgroundImage()}primaryIcon(){let e=this.props.iconType();switch(e){case"sound":return"dcg-icon-sound-wave";case"folder":return"dcg-icon-folder";case"pause":return"dcg-icon-pause";case"play":return"dcg-icon-play";case"polygon-dashed":case"polygon-dashed-filled":return"dcg-icon-polygon-dashed";case"polygon-dotted":case"polygon-dotted-filled":return"dcg-icon-polygon-dotted";case"polygon-default":case"polygon-default-filled":return"dcg-icon-polygon-solid";case"graph-dashed":case"parametric-dashed-filled":return"dcg-icon-parametric-dashed";case"graph-dotted":case"parametric-dotted-filled":return"dcg-icon-parametric-dotted";case"graph-default":case"parametric-default-filled":return"dcg-icon-parametric-solid";case"movable-vertical":return"dcg-icon-move-vertical";case"movable-both":return"dcg-icon-move";case"movable-horizontal":return"dcg-icon-move-horizontal";case"point-open":return"dcg-icon-open";case"point-cross":return"dcg-icon-cross";case"point-default":return"dcg-icon-point";case"table-points":case"table-points-and-lines":return"dcg-icon-points";case"table-lines":return"dcg-icon-lines-solid";case"shaded-inequality":case"inequality":return"dcg-icon-shaded-inequality-dash";case"check":return"dcg-icon-check";case"none":case"background":case"hidden":case"polygon-none-filled":case"parametric-none-filled":case"loading":return"";case"fraction":return"dcg-icon-fraction";case"boxplot":return"dcg-icon-boxplot";case"dotplot-cross":return"dcg-icon-dotplot-cross";case"dotplot-default":return"dcg-icon-dotplot-default";case"dotplot-open":return"dcg-icon-dotplot-open";case"histogram":return"dcg-icon-histogram";case"unfilled-distribution":case"filled-distribution":return"dcg-icon-distribution";case"action":return"dcg-icon-chevron-right";case"metronome":return"dcg-icon-metronome-2";case"arrow-right":return"dcg-icon-arrow-right";default:return e}}backgroundOpacity(){let e=this.backgroundIcon();return e==="dcg-icon-polygon-filled"||e==="dcg-icon-parametric-filled"||e==="dcg-icon-shaded-inequality-shade2"||e==="dcg-icon-distribution-fill"||e==="dcg-icon-histogram-fill"?.5:1}backgroundIcon(){let e=this.props.iconType();return e==="filled-distribution"?"dcg-icon-distribution-fill":e==="histogram"?"dcg-icon-histogram-fill":e==="polygon-dashed-filled"||e==="polygon-dotted-filled"||e==="polygon-default-filled"||e==="polygon-none-filled"?"dcg-icon-polygon-filled":e==="parametric-dashed-filled"||e==="parametric-dotted-filled"||e==="parametric-default-filled"||e==="parametric-none-filled"?"dcg-icon-parametric-filled":e==="table-points-and-lines"?"dcg-icon-lines-solid":e==="shaded-inequality"?"dcg-icon-shaded-inequality-shade2":e==="action"?"dcg-icon-minus":""}};var KS=class extends _o.Class{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return _o.createElement("div",{class:_o.const("dcg-play-pause-icon-view")},_o.createElement(De,{gravity:this.const("s"),tooltip:()=>this.controller.s("graphing-calculator-label-slider-disabled-while-ticker-playing"),disabled:()=>!this.controller.getTickerPlaying(),sticky:this.const(!0)},_o.createElement("div",{class:()=>({"dcg-circular-icon-container":!0,"dcg-disabled":this.controller.getTickerPlaying()}),"aria-label":this.bindFn(this.getAriaLabel),role:_o.const("button"),tabindex:_o.const("0"),onTap:e=>{e.wasHandled("dragdrop")||this.toggleSliderIsPlaying()},manageFocus:this.const(Ne({controller:this.controller,location:{type:"slider-icon",id:this.model.id}}))},_o.createElement(Ir,{iconType:()=>this.getIconType(),whiteIcon:()=>!this.controller.isInEditListMode()&&this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)}))),_o.createElement("div",{class:_o.const("dcg-slider-menu-container")},_o.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-animation-properties-tooltip"),gravity:this.const("e")},_o.createElement("div",{class:()=>({"dcg-slider-menu-opener":!0,"dcg-menu-open":this.myOptionsOpen()}),tabindex:_o.const(0),"dcg-open-menu-guid":()=>this.getMenuGUID(),role:_o.const("button"),"aria-label":()=>this.myOptionsOpen()?this.controller.s("graphing-calculator-narration-hide-animation-properties"):this.controller.s("graphing-calculator-narration-show-animation-properties"),onTap:e=>{e.wasHandled("dragdrop")||e.wasLongheld()||this.toggleOptions(e)},manageFocus:this.const(Ne({controller:this.controller,location:{type:"slider-animation-properties-icon",id:this.model.id}}))},_o.createElement("i",{class:this.bindFn(this.getIcon),"aria-hidden":_o.const("true")})))))}getIcon(){return __dcg_shared_module_exports__['n'](this.model.slider.loopMode)}getIconType(){return!this.model.slider.isPlaying||q0(this.model)?"play":"pause"}getMenuGUID(){return"slider-"+this.model.guid}myOptionsOpen(){return this.controller.isItemSettingsMenuOpen(this.getMenuGUID())}toggleOptions(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"slider",model:this.model,guid:this.getMenuGUID(),focusFirstOption:e.device==="keyboard"}})}getAriaLabel(){if(!this.model.sliderExists)return"";var e=Ao(this.model);return e?this.model.slider.isPlaying?this.controller.s("graphing-calculator-narration-pause-variable-animation",{variable:e}):this.controller.s("graphing-calculator-narration-play-variable-animation",{variable:e}):""}toggleSliderIsPlaying(){if(this.model.sliderExists){var e="",i=Ao(this.model);q0(this.model)?(typeof i=="string"&&(e=this.controller.s("graphing-calculator-narration-slider-variable-restarted",{variable:i})),this.controller.dispatch({type:"play-slider-from-min",id:this.model.id})):this.model.slider.isPlaying?(typeof i=="string"&&(e=this.controller.s("graphing-calculator-narration-slider-variable-paused",{variable:i})),this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:!1})):(typeof i=="string"&&(e=this.controller.s("graphing-calculator-narration-slider-variable-playing",{variable:i})),this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:!0})),e!==""&&le(e)}}};var zl=__dcg_shared_module_exports__['h'](j());var qS=class extends zl.Class{constructor(){super(...arguments),this.isAnimating=!1,this.unmounted=!1}init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return zl.createElement("div",{class:()=>({"dcg-action-icon-view":!0,"dcg-action-icon-view-animating":this.isAnimating})},zl.createElement("div",{class:zl.const("dcg-circular-icon-container"),"aria-label":()=>this.controller.s("graphing-calculator-narration-run-action-icon"),role:zl.const("button"),tabindex:zl.const("0"),onTap:e=>{e.wasHandled("dragdrop")||this.runActionOnce()},manageFocus:this.const(Ne({controller:this.props.controller(),location:{type:"action-icon",id:this.model.id}}))},zl.createElement(Ir,{iconType:this.const("action"),whiteIcon:()=>!this.controller.isInEditListMode()&&this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)})))}willUnmount(){this.unmounted=!0}runActionOnce(){this.isAnimating=!0,this.controller.dispatch({type:"action-single-step",id:this.model.id}),setTimeout(()=>{this.isAnimating=!1,this.unmounted||this.update()},150)}};var Xb=__dcg_shared_module_exports__['h'](j());var zS=class extends Xb.Class{init(){this.model=this.props.model(),this.controller=this.props.controller()}toggleMuted(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id})}showAsTurnedOff(){return xf(this.model)}template(){return Xb.createElement("button",{class:()=>{var e;return{"dcg-unstyled-button":!0,"dcg-circular-icon-container":!0,"dcg-show-globally-muted":((e=this.controller.toneController)==null?void 0:e.isGlobalMuted())&&!this.showAsTurnedOff()}},onTap:e=>{e.wasHandled("dragdrop")||this.toggleMuted()},"aria-label":this.props.ariaLabel},Xb.createElement(Ir,{iconType:()=>this.showAsTurnedOff()?"hidden":"sound",whiteIcon:()=>!this.controller.isInEditListMode()&&this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)}))}};var{SwitchUnion:cW,If:dW}=ro.Components,pW="#6A93D2",v3="#000",C3="#fff",Qb=class extends ro.Class{init(){this.model=this.props.model(),this.controller=this.props.controller()}template(){return ro.createElement("div",{class:ro.const("dcg-expression-icon-container")},cW(this.bindFn(this.getIconMode),{error:()=>ro.createElement(Oo,{error:this.bindFn(this.getErrorMsg),isWhite:this.bindFn(this.isSelected),gravity:this.const("s")}),none:()=>ro.createElement("span",null),slider:()=>ro.createElement(KS,{controller:this.props.controller,model:this.props.model}),action:()=>ro.createElement(qS,{controller:this.props.controller,model:this.props.model}),icon:()=>ro.createElement("div",{class:ro.const("dcg-circular-icon-container"),role:ro.const("button"),tabindex:ro.const("0"),"dcg-open-menu-guid":()=>this.getMenuGUID(),"aria-label":this.bindFn(this.getIconAriaLabel),onTap:e=>{if(!e.wasHandled("dragdrop")&&!e.wasLongheld()){if(this.myOptionsOpen())return this.toggleOptions(e);if((this.controller.isInEditListMode()||e.shiftKey)&&!this.isFraction())return this.toggleOptions(e);if(this.isFraction())return this.onToggleFractionDisplay();this.toggleGraphShown()}},onLongHold:e=>{e.handle("dcg-longhold"),e.handle("dcg-tap"),!this.isFraction()&&this.toggleOptions(e)},manageFocus:this.const(Ne({controller:this.controller,location:{type:"expression-icon",id:this.model.id}}))},ro.createElement(Ir,{iconType:this.bindFn(this.getIconType),backgroundColor:this.bindFn(this.getBackgroundColor),whiteIcon:this.bindFn(this.isSelected),foregroundColor:this.bindFn(this.getForegroundColor),iconModifier:this.bindFn(this.getIconModifier),backgroundImage:this.bindFn(this.backgroundImage),backgroundOpacity:this.const(1)}),ro.createElement(dW,{predicate:()=>this.model.disableGraphInteractions},()=>ro.createElement("i",{class:ro.const("dcg-graph-interaction-disabled dcg-icon-lock")}))),tone:()=>ro.createElement(zS,{controller:this.props.controller,model:this.props.model,ariaLabel:this.bindFn(this.getIconAriaLabel)})}))}backgroundImage(){let e=this.getBackgroundColor();return e.type==="image"?`url("${e.value}")`:""}getErrorMsg(){return this.colorError()?this.controller.s("shared-calculator-error-color-not-assigned"):this.controller.unpack(this.model.error)}getMenuGUID(){return this.model.guid}myOptionsOpen(){return this.controller.isItemSettingsMenuOpen(this.getMenuGUID())}toggleOptions(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"expression",model:this.model,guid:this.getMenuGUID(),focusFirstOption:e.device==="keyboard"}})}isSelected(){return this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)}isFraction(){return this.controller.canDisplayEvaluationForItemAsFraction(this.model.id)}getIconMode(){return this.hasError()?"error":this.controller.getGraphSettings().config.graphpaper?Qw(this.model)?"icon":this.hasSlider()?"slider":this.isFraction()?"icon":this.isNonemptyAction()?"action":this.isToneExpression()&&this.controller.toneEnabled()?"tone":"none":"none"}isToneExpression(){return da(this.model)}toggleGraphShown(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id})}colorError(){return!!this.model.formula.rgb_value&&!this.model.formula.assignment}hasError(){return this.colorError()?!0:!!this.model.error&&!yl(this.model)&&this.controller.getBrailleMode()==="none"}hasSlider(){return!!this.model.sliderExists}isNonemptyAction(){return Fh(this.model)}getDisplayProps(){let{points:e,lines:i,fill:r}=this.model;return __dcg_shared_module_exports__['oc'](this.model.formula.expression_type,{points:e,lines:i,fill:r})}getBackgroundColor(){if(!this.isFraction())return mf(this.model);let e=this.isSelected();return this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id)?{type:"single-color",value:e?C3:v3}:{type:"single-color",value:""}}getForegroundColor(){if(!this.isFraction())return"";let e=this.isSelected(),i=this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id);return e!==i?C3:e?pW:v3}onToggleFractionDisplay(){this.controller.dispatch({type:"toggle-fraction-evaluation",id:this.model.id})}getIconModifier(){return fd(this.model)&&xc(this.model,"alignedAxis")==="y"?"rotated":"none"}getIconType(){if(this.isFraction())return"fraction";if(!this.model.shouldGraph)return"hidden";if(this.controller.isInEditListMode())return"none";let e=this.model.pointStyle,i=this.model.lineStyle,r=this.getDisplayProps(),o=this.model.formula;if(fd(this.model))return"boxplot";if(wc(this.model)){if(this.model.pointStyle==="POINT")return"dotplot-default";if(this.model.pointStyle==="CROSS")return"dotplot-cross";if(this.model.pointStyle==="OPEN")return"dotplot-open"}if(Op(this.model))return"histogram";if(bd(this.model))return vc(this.model)?"filled-distribution":"unfilled-distribution";if(qi(this.model)==="X")return"movable-horizontal";if(qi(this.model)==="Y")return"movable-vertical";if(qi(this.model)==="XY")return"movable-both";if(En(this.model))return e==="OPEN"?"point-open":e==="CROSS"?"point-cross":"point-default";if(pv(this.model))return"point-default";if(Df(this.model)||mv(this.model))return r.lines&&r.points?"table-points-and-lines":r.lines?"table-lines":"table-points";if(uv(this.model))return"polygon-default-filled";let n=this.getDisplayProps().fill;if(xl(this.model))return n?r.lines?i==="DASHED"?"polygon-dashed-filled":i==="DOTTED"?"polygon-dotted-filled":"polygon-default-filled":"polygon-none-filled":r.lines?i==="DASHED"?"polygon-dashed":i==="DOTTED"?"polygon-dotted":"polygon-default":"none";if(Pp(this.model))return n?r.lines?i==="DASHED"?"parametric-dashed-filled":i==="DOTTED"?"parametric-dotted-filled":"parametric-default-filled":"parametric-none-filled":r.lines?i==="DASHED"?"graph-dashed":i==="DOTTED"?"graph-dotted":"graph-default":"none";var a=o.operator,s=__dcg_shared_module_exports__['jb'][a].direction!==0,l=__dcg_shared_module_exports__['jb'][a].inclusive===!1;return o.is_shade_between||!l&&s?"shaded-inequality":l&&!s?"inequality":l&&s?"shaded-inequality":i==="DASHED"?"graph-dashed":i==="DOTTED"?"graph-dotted":"graph-default"}getIconAriaLabel(){return this.isFraction()?md(this.model)?this.controller.s("shared-calculator-narration-display-as-decimal"):this.controller.s("shared-calculator-narration-display-as-fraction"):this.myOptionsOpen()?Si(this.model,"hide-options"):this.controller.isInEditListMode()?Si(this.model,"show-options"):da(this.model)?this.model.hidden?Si(this.model,"unmute"):Si(this.model,"mute"):this.model.hidden?Si(this.model,"show"):Si(this.model,"hide")}};var zi=__dcg_shared_module_exports__['h'](j());var{If:uW,SwitchUnion:hW}=zi.Components;function gW(t,e){return __dcg_shared_module_exports__['$a'](t,e)}var pu=class extends zi.Class{init(){this.controller=this.props.controller()}template(){return zi.createElement("div",{class:zi.const("dcg-evaluation-container")},zi.createElement("div",{didMount:e=>this.containerNode=e,class:()=>({"dcg-evaluation":!0,"dcg-do-blur":!0,"dcg-hidden":this.props.controller().isInEditListMode()}),handleEvent:zi.const("true"),tabindex:()=>this.props.focusable()&&this.controller.getBrailleMode()==="none"?"0":"-1",onFocus:()=>{this.controller.getBrailleMode()==="none"&&this.evaluationNode&&this.onSelectEvaluation()},onBlur:()=>{this.controller.getBrailleMode()==="none"&&this.evaluationNode&&this.onUnselectEvaluation()},onTap:()=>{var e;return(e=this.containerNode)==null?void 0:e.focus()}},zi.createElement(tr,__dcg_shared_module_exports__['a']({latex:this.bindFn(this.getBrailleEvaluation),ariaLabel:this.const(""),brailleShouldFocus:()=>{let e=this.controller.getFocusLocation();return!e||e.type!=="braille-output"?!1:e.id===this.props.id()},onBrailleInput:()=>{},isStatic:this.const(!0),onBrailleFocusedChanged:e=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"braille-output",id:this.props.id()}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"braille-output",id:this.props.id()}})}},Br(this.controller)),zi.createElement("div",{class:zi.const("dcg-evaluation-label-container")},zi.createElement(uW,{predicate:()=>!!this.props.dependent()},()=>zi.createElement(Te,{latex:()=>__dcg_shared_module_exports__['cb'](this.props.dependent()),config:this.const({})})),zi.createElement("span",{class:zi.const("dcg-equals")},zi.createElement(Te,{latex:this.const("="),config:this.const({})}))),zi.createElement("span",{class:()=>({"dcg-text-selectable":this.getEvaluationType()!=="rgbcolor","dcg-evaluation-html":!0,"dcg-color-evaluation":this.getEvaluationType()==="rgbcolor"}),didMount:this.bindFn(this.didMountEvaluation)},hW(()=>this.getEvaluationType(),{list:()=>zi.createElement("span",{class:zi.const("dcg-evaluation-list")},()=>this.controller.s("graphing-calculator-label-evaluation-list",{count:this.props.val().length})),fraction:()=>zi.createElement(Te,{latex:()=>__dcg_shared_module_exports__['bb'](this.props.val(),this.getLabelOptions()),config:this.const({})}),undefined:()=>zi.createElement("span",null,zi.const("undefined")),scientific:()=>zi.createElement(Te,{latex:()=>`${this.getNumberLabel().mantissa}\\times10^{${this.getNumberLabel().exponent}}`,config:this.const({})}),decimal:()=>zi.createElement(Te,{latex:()=>this.getNumberLabel().value,config:this.const({})}),rgbcolor:()=>zi.createElement(Wp,{color:()=>this.getColorValue(),isEvaluation:this.const(!0),invertSwatches:()=>this.controller.invertSwatches()})})))),zi.createElement("div",{class:zi.const("dcg-clear")}))}getColorValue(){let e=this.props.id(),i=this.controller.getColorById(e);return Array.isArray(i)?{type:"color-array",value:i}:{type:"single-color",value:i}}getNumberLabel(){return gW(this.props.val(),this.getLabelOptions())}getEvaluationType(){let e=this.props.val();return typeof e=="string"?"rgbcolor":Array.isArray(e)?typeof e[0]=="string"?"rgbcolor":"list":this.getNumberLabel().type}getLabelOptions(){return this.props.controller().getEvaluationLabelOptionsForItem(this.props.id())}didMountEvaluation(e){this.evaluationNode=e}onSelectEvaluation(){let e=document.createRange();e.selectNodeContents(this.evaluationNode);let i=window.getSelection();i&&(i.removeAllRanges(),i=window.getSelection(),i&&i.addRange(e))}onUnselectEvaluation(){let e=window.getSelection();e&&e.removeAllRanges()}getBrailleEvaluation(){let e="";this.props.dependent()&&(e=__dcg_shared_module_exports__['cb'](this.props.dependent())),e+="=";let i=this.getEvaluationType();switch(i){case"list":e+=this.controller.s("graphing-calculator-label-evaluation-list",{count:this.props.val().length});break;case"fraction":e+=__dcg_shared_module_exports__['bb'](this.props.val(),this.getLabelOptions());break;case"undefined":e="undefined";break;case"scientific":e+=`${this.getNumberLabel().mantissa}\\times10^{${this.getNumberLabel().exponent}}`;break;case"decimal":e+=this.getNumberLabel().value;break;case"rgbcolor":e+=this.props.val();break;default:return i}return e}};var Fo=__dcg_shared_module_exports__['h'](j());var{Switch:mW}=Fo.Components,Zb=class extends Fo.Class{template(){return this.controller=this.props.controller(),Fo.createElement("div",{class:Fo.const("dcg-expression-warning")},Fo.createElement("i",{class:Fo.const("dcg-icon-error"),"aria-hidden":Fo.const("true")}),Fo.createElement(mW,{key:this.props.type},e=>{switch(e){case"unresolved":return Fo.createElement("span",null,()=>this.controller.s("graphing-calculator-error-equation-contains-unresolved-details"),Fo.createElement("a",{href:Fo.const("https://help.desmos.com/hc/en-us/articles/202529079-Unresolved-Detail-In-Plotted-Functions"),target:Fo.const("_blank")},()=>this.controller.s("graphing-calculator-link-learn-more")),Fo.const(")"));case"tone-out-of-range":return Fo.createElement("span",null,Fo.const(" "),()=>this.controller.s("graphing-calculator-error-tone-frequency-out-of-range",{min:Gh,max:Ah}))}}))}};var Ro=__dcg_shared_module_exports__['h'](j());var ya=__dcg_shared_module_exports__['h'](j());var{SwitchUnion:fW}=ya.Components,Lt=class extends ya.Class{init(){this.controller=this.props.controller()}template(){return ya.createElement("div",{class:this.bindFn(this.getContainerClass)},fW(()=>String(this.props.readonly()),{true:()=>ya.createElement(tr,__dcg_shared_module_exports__['a']({latex:this.bindFn(this.getStaticLatex),operatorNames:()=>this.getMQConfig().autoOperatorNames,brailleShouldFocus:this.props.isFocused,isStatic:this.const(!0),onBrailleFocusedChanged:this.props.handleFocusChanged,ariaLabel:this.bindFn(this.getBrailleLabel),dataLabelAttributeValue:this.props.dataLabelAttributeValue},Br(this.props.controller())),ya.createElement(Te,{latex:this.bindFn(this.getStaticLatex),config:this.bindFn(this.getMQConfig),getAriaLabel:this.props.ariaLabel},ya.createElement("span",{class:ya.const("dcg-math-field"),"data-dcg-label":()=>this.props.dataLabelAttributeValue?this.props.dataLabelAttributeValue():void 0,manageFocus:this.const({shouldBeFocused:()=>this.props.isFocused(),onFocusedChanged:(e,i)=>this.props.handleFocusChanged(e,i)}),tabindex:ya.const("0")}))),false:()=>ya.createElement(tr,__dcg_shared_module_exports__['a']({latex:this.props.latex,operatorNames:()=>this.getMQConfig().autoOperatorNames||"",brailleShouldFocus:this.props.isFocused,selectOnFocus:this.const(!0),onBrailleInput:this.props.handleLatexChanged,onBrailleFocusedChanged:this.props.handleFocusChanged,onBrailleKeydown:this.bindFn(this.onBrailleKeydown),hasError:this.props.hasError,placeholder:this.props.placeholder,ariaLabel:this.bindFn(this.getBrailleLabel),dataLabelAttributeValue:this.props.dataLabelAttributeValue},Br(this.props.controller())),ya.createElement(Se,{latex:this.props.latex,getAriaPostLabel:()=>{var i,r;let e=((r=(i=this.props).ariaPostLabel)==null?void 0:r.call(i))||"";return this.props.hasError()&&e===""&&(e=this.controller.s("shared-calculator-narration-math-input-error-message")),e},isFocused:this.props.isFocused,placeholder:this.props.placeholder,capExpressionSize:()=>this.controller.getCapExpressionSize(),selectOnFocus:this.const(!0),config:this.bindFn(this.getMQConfig),getAriaLabel:this.props.ariaLabel,hasError:this.props.hasError,dataLabelAttributeValue:this.props.dataLabelAttributeValue,onUserPressedKey:this.props.handlePressedKey,onUserChangedLatex:this.props.handleLatexChanged,onSelectionChanged:this.props.handleSelectionChanged,onExpressionSizeExceeded:()=>this.controller.dispatch({type:"expression-size-exceeded"}),onFocusedChanged:this.props.handleFocusChanged,needsSystemKeypad:()=>!this.controller.isKeypadEnabled()}))}))}getStaticLatex(){return this.props.latex()?this.props.latex():this.props.placeholder?this.props.placeholder():""}getContainerClass(){let e=this.props.containerClass?this.props.containerClass():{};return e["dcg-inline-math-input-view"]=!0,this.props.fullWidth&&this.props.fullWidth()&&(e["dcg-full-width-inline-math-input"]=!0),this.props.fontSize&&this.props.fontSize()==="large"&&(e["dcg-large-font-inline-math-input"]=!0),this.props.noBorder&&this.props.noBorder()&&(e["dcg-no-border-inline-math-input"]=!0),e}onBrailleKeydown(e){if(!this.props.handlePressedKey)return;let i=be(e);i&&this.props.handlePressedKey(i,e)}getMQConfig(){return this.controller.getMathquillConfig({})}getBrailleLabel(){return this.props.brailleLabel?this.props.brailleLabel():this.props.ariaLabel()}};var Ws=__dcg_shared_module_exports__['h'](j());var Wd=class extends Ws.Class{template(){return Ws.createElement(De,{tooltip:()=>this.props.controller().s("shared-calculator-label-toast-learn-more")},Ws.createElement("a",{"aria-label":()=>this.props.controller().s("shared-calculator-label-toast-learn-more"),class:Ws.const("dcg-learn-more-link"),href:this.props.href,target:Ws.const("_blank")},Ws.createElement("i",{class:Ws.const("dcg-icon-question-sign"),"aria-hidden":Ws.const("true")})))}};var{If:bW}=Ro.Components,uu=class extends Ro.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return Ro.createElement("div",{class:Ro.const("dcg-domain dcg-do-blur"),handleEvent:Ro.const("true")},Ro.createElement("div",{class:Ro.const("dcg-display-domain dcg-do-blur"),handleEvent:Ro.const("true")},Ro.createElement(Lt,{readonly:()=>this.controller.isItemReadonly(this.id),latex:()=>this.getMinLatex(),isFocused:()=>this.getFocusedInput()==="min"+this.getDomainVariableString(),placeholder:()=>__dcg_shared_module_exports__['Ya'](CP(this.model,this.getDomainVariable())).latex,ariaLabel:()=>this.controller.s("graphing-calculator-narration-domain3d-minimum",{term:this.getDomainVariableString()}),brailleLabel:()=>this.controller.raw("dmin"),handleFocusChanged:e=>this.handleFocusedChanged("min"+this.getDomainVariableString(),e),hasError:()=>!EP(this.model,this.getDomainVariable()),controller:this.props.controller,handlePressedKey:(e,i)=>this.handlePressedKey("min"+this.getDomainVariableString(),e,i),handleLatexChanged:e=>this.dispatchMinLatexIfChanged(e),dataLabelAttributeValue:this.const("domain-min")}),Ro.createElement("span",{class:Ro.const("dcg-interval-interior")},Ro.createElement(Te,{latex:()=>this.getDomainVariableDisplayLatex(),config:this.const({})})),Ro.createElement(Lt,{readonly:()=>this.controller.isItemReadonly(this.id),latex:()=>this.getMaxLatex(),isFocused:()=>this.getFocusedInput()==="max"+this.getDomainVariableString(),placeholder:()=>__dcg_shared_module_exports__['Ya'](SP(this.model,this.getDomainVariable())).latex,ariaLabel:()=>this.controller.s("graphing-calculator-narration-domain3d-maximum",{term:this.getDomainVariableString()}),brailleLabel:()=>this.controller.raw("dmax"),handleFocusChanged:e=>this.handleFocusedChanged("max"+this.getDomainVariableString(),e),hasError:()=>!DP(this.model,this.getDomainVariable()),controller:this.props.controller,handlePressedKey:(e,i)=>this.handlePressedKey("max"+this.getDomainVariableString(),e,i),handleLatexChanged:e=>this.dispatchMaxLatexIfChanged(e),dataLabelAttributeValue:this.const("domain-max")}),Ro.createElement(bW,{predicate:()=>this.getDomainVariableString()==="\\phi"},()=>Ro.createElement(Wd,{href:this.const("https://help.desmos.com/hc/en-us/articles/15824510769805"),controller:this.props.controller}))))}handlePressedKey(e,i,r){if(!this.controller.isInEditListMode()){if(i==="Esc"){this.controller.dispatch({type:"set-focus-location",location:void 0});return}if(i==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"})}let o=Se.getFocusedMathquill(),n=Xn();if(i==="Left"||i==="Right"||i==="Down"||i==="Up"){var a;o?a=Se.applyArrowKeyAndReturnIfWasAtBounds(o,i,r):n&&(n.selectionStart===0&&i==="Left"||n.selectionStart===n.value.length&&i==="Right"||i==="Up"||i==="Down")?a=!0:a=!1,a&&(r&&r.preventDefault(),i==="Left"?e==="max"+this.getDomainVariableString()&&this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.model.id,location:"min"+this.getDomainVariableString()}}):i==="Right"?e==="min"+this.getDomainVariableString()&&this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.model.id,location:"max"+this.getDomainVariableString()}}):i==="Down"?this.controller.dispatch({type:"on-special-key-pressed",key:"Down"}):i==="Up"&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.model.id}}));return}o&&(o.keystroke(i,r),e==="min"+this.getDomainVariableString()?this.dispatchMinLatexIfChanged(o.latex()):e==="max"+this.getDomainVariableString()&&this.dispatchMaxLatexIfChanged(o.latex()))}getDomainVariable(){var r,o;let e=this.props.domainIndex(),i=(o=(r=this.model.formula.domains)==null?void 0:r[e])==null?void 0:o.variable;if(!i)throw new Error("Programming Error: could not find domain variable in index "+e);return i}handleFocusedChanged(e,i){i?this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"domain-limit",id:this.id,location:e}})}dispatchMinLatexIfChanged(e){this.getMinLatex()!==e&&this.controller.dispatch({type:"set-domain-minlatex",variable:this.getDomainVariable(),id:this.id,latex:e})}dispatchMaxLatexIfChanged(e){this.getMaxLatex()!==e&&this.controller.dispatch({type:"set-domain-maxlatex",variable:this.getDomainVariable(),id:this.id,latex:e})}getFocusedInput(){let e=this.controller.getFocusLocation();if(!(!e||e.type!=="domain-limit"||e.id!==this.id))return e.location}getMinLatex(){return zP(this.model,this.getDomainVariable())}getMaxLatex(){return UP(this.model,this.getDomainVariable())}getDomainVariableString(){let e=this.getDomainVariable();return e==="theta"?e="\\theta":e==="phi"&&(e="\\phi"),e}getDomainVariableDisplayLatex(){return"\\le "+this.getDomainVariableString()+" \\le"}getMQConfig(){return{autoOperatorNames:sa({})}}};var se=__dcg_shared_module_exports__['h'](j());var{If:os,For:yW,IfElse:xW}=se.Components,ey=class extends se.Class{template(){return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,se.createElement(os,{predicate:this.bindFn(this.hasRegression)},()=>se.createElement("div",{class:se.const("dcg-regression-container")},se.createElement("div",{class:se.const("dcg-handle-event"),handleEvent:se.const("true")},se.createElement(os,{predicate:this.bindFn(this.getShouldSuggestLogMode)},()=>se.createElement("div",{class:se.const("dcg-log-mode-toggle")},xW(()=>this.areLogModeRegressionsForced(),{true:()=>se.createElement("div",{class:se.const("dcg-action-log-mode-toggle dcg-no-hover-styling")},()=>this.controller.s("graphing-calculator-button-regression-log-mode")),false:()=>se.createElement("div",null,se.createElement($e,{class:this.const("dcg-action-log-mode-toggle dcg-log-mode-checkbox"),onChange:this.bindFn(this.onTapLogMode),checked:()=>this.getIsLogModeRegression()},()=>this.controller.s("graphing-calculator-button-regression-log-mode")),se.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-regression-log-mode-help-tooltip"),gravity:this.const("e")},se.createElement("a",{"aria-label":()=>this.controller.s("graphing-calculator-label-regression-log-mode-help-tooltip"),class:se.const("dcg-log-mode-toggle-help"),target:se.const("_blank"),href:se.const("https://help.desmos.com/hc/en-us/articles/204349605")},se.createElement("i",{class:se.const("dcg-icon-question-sign"),"aria-hidden":se.const("true")}))))}))),se.createElement("div",{class:se.const("dcg-statistics"),role:se.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-heading-regression-statistics")},se.createElement("div",{class:se.const("dcg-expression-footer-title")},()=>this.controller.s("graphing-calculator-heading-regression-statistics"),se.createElement(os,{predicate:()=>this.getRegression().statistics.hasOwnProperty("RMSE")},()=>se.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-regression-what-is-rmse-tooltip"),gravity:this.const("s")},se.createElement("a",{class:se.const("dcg-expression-footer-title-help"),target:se.const("_blank"),href:se.const("https://help.desmos.com/hc/en-us/articles/202529129-What-is-RMSE-"),"aria-label":()=>this.controller.s("graphing-calculator-label-regression-what-is-rmse-tooltip")},se.createElement("i",{class:se.const("dcg-icon-question-sign"),"aria-hidden":se.const("true")})))),se.createElement(os,{predicate:()=>this.getRegression().statistics.Rsquared<0},()=>se.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-regression-why-is-negative-tooltip"),gravity:this.const("s")},se.createElement("a",{"aria-label":()=>this.controller.s("graphing-calculator-label-regression-why-is-negative-tooltip"),class:se.const("dcg-expression-footer-title-help"),target:se.const("_blank"),href:se.const("https://help.desmos.com/hc/en-us/articles/202529139-Why-am-I-seeing-a-negative-R-2-value-")},se.createElement("i",{class:se.const("dcg-icon-question-sign"),"aria-hidden":se.const("true")}))))),se.createElement("div",{class:se.const("dcg-statistics-values")},se.createElement(os,{predicate:()=>this.getRegression().statistics.hasOwnProperty("Rsquared")},()=>se.createElement("div",null,se.createElement(tr,__dcg_shared_module_exports__['a']({latex:()=>"R^2="+qc(this.getRegression(),"Rsquared"),brailleShouldFocus:()=>{let e=this.controller.getFocusLocation();return!e||e.type!=="regression-output"?!1:e.id===this.id&&e.parameter==="Rsquared"},onBrailleFocusedChanged:e=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"regression-output",id:this.id,parameter:"Rsquared"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"regression-output",id:this.id,parameter:"Rsquared"}})},ariaLabel:this.const(""),isStatic:this.const(!0)},Br(this.controller)),se.createElement(Te,{latex:()=>"R^2="+qc(this.getRegression(),"Rsquared"),config:this.const({})},se.createElement("span",{tabindex:se.const("0"),manageFocus:this.const(Ne({predicate:()=>this.controller.getBrailleMode()==="none",controller:this.controller,location:{type:"regression-output",id:this.id,parameter:"Rsquared"}}))}))))),se.createElement(os,{predicate:()=>this.getRegression().statistics.hasOwnProperty("rsquared")},()=>se.createElement("div",null,se.createElement(tr,__dcg_shared_module_exports__['a']({latex:()=>"r^2="+qc(this.getRegression(),"rsquared"),brailleShouldFocus:()=>{let e=this.controller.getFocusLocation();return!e||e.type!=="regression-output"?!1:e.id===this.id&&e.parameter==="rsquared"},onBrailleFocusedChanged:e=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"regression-output",id:this.id,parameter:"rsquared"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"regression-output",id:this.id,parameter:"rsquared"}})},ariaLabel:this.const(""),isStatic:this.const(!0)},Br(this.controller)),se.createElement(Te,{latex:()=>"r^2="+qc(this.getRegression(),"rsquared"),config:this.const({})},se.createElement("span",{tabindex:se.const("0"),manageFocus:this.const(Ne({predicate:()=>this.controller.getBrailleMode()==="none",controller:this.controller,location:{type:"regression-output",id:this.id,parameter:"rsquared"}}))}))))),se.createElement(os,{predicate:()=>this.getRegression().statistics.hasOwnProperty("r")},()=>se.createElement("div",null,se.createElement(tr,__dcg_shared_module_exports__['a']({latex:()=>"r="+qc(this.getRegression(),"r"),brailleShouldFocus:()=>{let e=this.controller.getFocusLocation();return!e||e.type!=="regression-output"?!1:e.id===this.id&&e.parameter==="r"},onBrailleFocusedChanged:e=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"regression-output",id:this.id,parameter:"r"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"regression-output",id:this.id,parameter:"r"}})},ariaLabel:this.const(""),isStatic:this.const(!0)},Br(this.controller)),se.createElement(Te,{latex:()=>"r="+qc(this.getRegression(),"r"),config:this.const({})},se.createElement("span",{class:se.const("dcg-r-value"),tabindex:se.const("0"),manageFocus:this.const(Ne({predicate:()=>this.controller.getBrailleMode()==="none",controller:this.controller,location:{type:"regression-output",id:this.id,parameter:"r"}}))}))))),se.createElement(os,{predicate:()=>this.getRegression().statistics.hasOwnProperty("RMSE")},()=>se.createElement("div",null,se.createElement(tr,__dcg_shared_module_exports__['a']({latex:()=>"\\operatorname{RMSE}="+qc(this.getRegression(),"RMSE"),brailleShouldFocus:()=>{let e=this.controller.getFocusLocation();return!e||e.type!=="regression-output"?!1:e.id===this.id&&e.parameter==="RMSE"},onBrailleFocusedChanged:e=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"regression-output",id:this.id,parameter:"RMSE"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"regression-output",id:this.id,parameter:"RMSE"}})},ariaLabel:this.const(""),isStatic:this.const(!0)},Br(this.controller)),se.createElement(Te,{latex:()=>"\\operatorname{RMSE}="+qc(this.getRegression(),"RMSE"),config:this.const({})},se.createElement("span",{tabindex:se.const("0"),manageFocus:this.const(Ne({predicate:()=>this.controller.getBrailleMode()==="none",controller:this.controller,location:{type:"regression-output",id:this.id,parameter:"RMSE"}}))}))))))),se.createElement("div",{role:se.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-heading-regression-residuals"),class:se.const("dcg-residuals")},se.createElement("div",{class:se.const("dcg-expression-footer-title")},()=>this.controller.s("graphing-calculator-heading-regression-residuals")),se.createElement(tr,__dcg_shared_module_exports__['a']({latex:this.bindFn(this.getResidualVariable),brailleShouldFocus:()=>{let e=this.controller.getFocusLocation();return!e||e.type!=="regression-output"?!1:e.id===this.id&&e.parameter===this.getResidualVariable()},onBrailleFocusedChanged:e=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"regression-output",id:this.id,parameter:this.getResidualVariable()}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"regression-output",id:this.id,parameter:this.getResidualVariable()}})},ariaLabel:this.const(""),isStatic:this.const(!0)},Br(this.controller)),se.createElement(Te,{latex:this.bindFn(this.getResidualVariable),config:this.const({})},se.createElement("span",{class:se.const("dcg-residuals-variable"),tabindex:se.const("0"),manageFocus:this.const(Ne({predicate:()=>this.controller.getBrailleMode()==="none",controller:this.controller,location:{type:"regression-output",id:this.id,parameter:this.getResidualVariable()}}))}))),se.createElement(os,{predicate:this.bindFn(this.getResidualSuggestionVisible)},()=>se.createElement("div",{class:se.const("dcg-residual-suggestion dcg-action-plot-residual dcg-btn dcg-btn-light-gray"),role:se.const("button"),onTap:this.bindFn(this.onTapResidualsSuggestion)},()=>this.controller.s("graphing-calculator-button-regression-plot-residuals")))),se.createElement(os,{predicate:()=>Object.keys(this.getRegression().parameters).length>0},()=>se.createElement("div",{class:se.const("dcg-parameters-container")},se.createElement("div",{class:se.const("dcg-expression-footer-title")},()=>this.controller.s("graphing-calculator-heading-regression-parameters"),se.createElement(os,{predicate:()=>this.isNonLinearRegression()},()=>se.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-regression-parameters-not-exact"),gravity:this.const("s")},se.createElement("a",{class:se.const("dcg-expression-footer-title-help"),target:se.const("_blank"),href:se.const("https://help.desmos.com/hc/en-us/articles/360042428612"),"aria-label":()=>this.controller.s("graphing-calculator-label-regression-parameters-not-exact")},se.createElement("i",{class:se.const("dcg-icon-question-sign"),"aria-hidden":se.const("true")}))))),se.createElement(yW,{each:()=>Object.keys(this.getRegression().parameters)},se.createElement("div",{role:se.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-heading-regression-parameters"),class:se.const("dcg-parameters")},e=>se.createElement(tr,__dcg_shared_module_exports__['a']({latex:()=>e+"="+pM(this.getRegression(),e),brailleShouldFocus:()=>{let i=this.controller.getFocusLocation();return!i||i.type!=="regression-output"?!1:i.id===this.id&&i.parameter===e},onBrailleFocusedChanged:i=>{i?this.controller.dispatch({type:"set-focus-location",location:{type:"regression-output",id:this.id,parameter:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"regression-output",id:this.id,parameter:e}})},ariaLabel:this.const(""),isStatic:this.const(!0)},Br(this.controller)),se.createElement(Te,{latex:()=>e+"="+pM(this.getRegression(),e),config:this.const({})},se.createElement("span",{class:se.const("dcg-parameter"),tabindex:se.const("0"),manageFocus:this.const(Ne({controller:this.controller,location:{type:"regression-output",id:this.id,parameter:e}}))}))))))),se.createElement("div",{class:se.const("dcg-clear")}),se.createElement(os,{predicate:()=>this.hasParameterWarning()},()=>se.createElement("div",{class:se.const("dcg-parameter-warning")},se.createElement("i",{class:se.const("dcg-icon-error"),"aria-hidden":se.const("true")}),se.const("\xA0"),()=>this.controller.s("graphing-calculator-text-regression-potentially-inaccurate-parameters"),se.const("\xA0"),se.createElement("a",{href:se.const("https://help.desmos.com/hc/en-us/articles/360042942771"),target:se.const("_blank")},()=>this.controller.s("graphing-calculator-link-learn-more")))))))}onTapResidualsSuggestion(){this.controller.dispatch({type:"plot-residuals",id:this.id})}onTapLogMode(){this.controller.dispatch({type:"toggle-logmode",id:this.id})}getRegression(){return this.model.formula.regression}hasRegression(){return!!this.model.formula.regression}isNonLinearRegression(){return!this.getRegression().isLinear}getResidualVariable(){return this.getRegression().residualVariable||""}getResidualSuggestionVisible(){return this.getRegression().residualSuggestionId!==void 0}areLogModeRegressionsForced(){return this.controller.areLogModeRegressionsForced()}getShouldSuggestLogMode(){return!!this.getRegression().shouldSuggestLogMode}hasParameterWarning(){return!!this.getRegression().parameterWarning}getIsLogModeRegression(){return!!this.model.isLogModeRegression}};function pM(t,e){return __dcg_shared_module_exports__['bb'](t.parameters[e],{digits:6,smallCutoff:1e-6,bigCutoff:1e9})}function qc(t,e){return __dcg_shared_module_exports__['bb'](t.statistics[e],{zeroCutoff:1e-15,digits:4,smallCutoff:1e-6,bigCutoff:1e9})}var hr=__dcg_shared_module_exports__['h'](j());var Tr=__dcg_shared_module_exports__['h'](j());Tt();Tt();var US=class extends Zi{constructor(){super();this.dragging=!1,this.guid=__dcg_shared_module_exports__['Xa']("dragdrop-class")}_evt2pt(i){return{x:i.changedTouches[0].pageX-this._offsetPt.x,y:i.changedTouches[0].pageY-this._offsetPt.y}}_dispatch(i,r){if(this._destroyed)return;let o=this._evt2pt(r);this.triggerEvent(i,{x:o.x,y:o.y,dx:o.x-this._startPt.x,dy:o.y-this._startPt.y,evt:r})}destroy(){H(document).off(`.${this.guid}`),this._destroyed=!0}startDrag(i,r={}){if(!this.dragging)return H(document).on(`dcg-tapmove.${this.guid}`,o=>{(o.originalEvent||o).preventDefault(),cancelAnimationFrame(this.frameThrottle),this.frameThrottle=requestAnimationFrame(()=>this.doDrag(o))}),H(document).on(`dcg-tapend.${this.guid} dcg-tapcancel.${this.guid}`,o=>this.endDrag(o)),this._offsetPt={x:0,y:0},r.origin&&(this._offsetPt={x:this._evt2pt(i).x-r.origin.x,y:this._evt2pt(i).y-r.origin.y}),this._startPt=this._evt2pt(i),this.setProperty("dragging",!0),this._dispatch("onGrab",i)}doDrag(i){this.dragging&&this._dispatch("onDrag",i)}endDrag(i){this.dragging&&(H(document).off(`.${this.guid}`),this.doDrag(i),this.setProperty("dragging",!1),this._dispatch("onDrop",i))}};var{If:wW}=Tr.Components,ty=class extends Tr.Class{template(){return Tr.createElement("div",{class:()=>({"dcg-slider-interior":!0,"dcg-disable-slider":this.shouldDisableSlider()}),didMount:this.bindFn(this.didMountRoot),onTapStart:this.bindFn(this.onStartDrag)},Tr.createElement("div",{class:Tr.const("dcg-track")},Tr.createElement("div",{class:Tr.const("dcg-ticks"),onMount:this.bindFn(this.didMountTickMarks)}),Tr.createElement("div",{class:Tr.const("dcg-graphic")})),Tr.createElement(wW,{predicate:this.bindFn(this.shouldShowZeroMarker)},()=>Tr.createElement("div",{class:Tr.const("dcg-zeroMarker"),style:()=>({left:this.getZeroMarkerPercent()+"%"})})),Tr.createElement("div",{class:()=>({"dcg-thumb":!0,"dcg-down":this.isDragging}),role:Tr.const("slider"),tabindex:Tr.const("0"),disablescroll:Tr.const("true"),style:()=>({left:this.getThumbPercent()+"%"}),onKeyDown:this.bindFn(this.onKeyDown),"aria-label":this.props.ariaLabel,"aria-valuemin":this.props.min,"aria-valuemax":this.props.max,"aria-valuenow":this.props.value,manageFocus:this.buildFocusManager()},Tr.createElement("div",{class:Tr.const("dcg-graphic")}),Tr.createElement("div",{class:Tr.const("dcg-center")})))}willUnmount(){this.dragDrop.destroy()}didMountRoot(e){this.rootNode=e,this.dragDrop=new US,this.isMounted=!0,this.dragDrop.observeEvent("onDrop",()=>{this.isDragging=!1,this.update(),this.props.onDrop&&this.props.onDrop()}),this.dragDrop.observeEvent("onGrab",()=>{this.isDragging=!0,this.update(),this.props.onGrab&&this.props.onGrab()}),this.dragDrop.observeEvent("onDrag",(i,r)=>{this.props.onDragUpdate(this.valueFromPixels(r.x))})}didMountTickMarks(e){this.tickMarksNode=e,this.renderTickMarks()}didUpdate(){this.renderTickMarks()}shouldDisableSlider(){return this.props.min()===this.props.max()}renderTickMarks(){if(this.tickMarksNode){var e=this.props.step(),i=this.props.min(),r=this.props.max(),o;if(e===void 0?o=0:o=100*e/(r-i),o<3&&(o=0),o>100&&(o=0),isNaN(o)&&(o=0),this.lastTickMarksPercent!==o){this.lastTickMarksPercent=o;var n="";if(o>0&&o<100)for(var a=o;a<100;a+=o)n+='<div class="dcg-tick" style="left:'+a+'%"></div>';this.tickMarksNode.innerHTML=n}}}shouldShowZeroMarker(){return this.props.min()<=0&&this.props.max()>=0}getZeroMarkerPercent(){var e=this.props.min(),i=this.props.max();return 100*(0-e)/(i-e)}getThumbPercent(){return 100*this.percentFromValue(this.props.value())}valueFromPixels(e){if(!this.isMounted)return 0;let i=this.props.min(),r=this.props.max(),o=this.rootNode.getBoundingClientRect().width,n=__dcg_shared_module_exports__['ub'](e/o,0,1),a=i+(r-i)*n,s=(r-i)/o;return Ti(a-s,a+s)}percentFromValue(e){let i=this.props.min(),r=this.props.max();return __dcg_shared_module_exports__['ub']((e-i)/(r-i),0,1)}pixelsFromValue(e){if(!this.isMounted)return 0;let i=this.percentFromValue(e);return this.rootNode.getBoundingClientRect().width*i}onKeyDown(e){switch(be(e)){case Jo:this.props.onUpPress&&(this.props.onUpPress(),e.preventDefault());break;case un:this.props.onDownPress&&(this.props.onDownPress(),e.preventDefault());break;case Fa:this.props.onEnterPress&&(this.props.onEnterPress(),e.preventDefault());break;case Yo:document.activeElement&&H(document.activeElement).trigger("blur");break;case Gl:this.props.onKeyboardUpdate("down"),e.preventDefault();break;case Al:this.props.onKeyboardUpdate("up"),e.preventDefault();break;case tg:this.props.onKeyboardUpdate("bigdown"),e.preventDefault();break;case eg:this.props.onKeyboardUpdate("bigup"),e.preventDefault();break;case rg:this.props.onKeyboardUpdate("min"),e.preventDefault();break;case ig:this.props.onKeyboardUpdate("max"),e.preventDefault();break}}onStartDrag(e){if(e.device==="keyboard"||!e.target)return;e.preventDefault(),Ri();let i={x:0,y:0};e.target.closest(".dcg-thumb")?i.x=this.pixelsFromValue(this.props.value()):i.x=e.changedTouches[0].clientX-this.rootNode.getBoundingClientRect().left,this.dragDrop.startDrag(e,{origin:i})}buildFocusManager(){return!this.props.onFocusedChanged||!this.props.isFocused?this.const(void 0):this.const({shouldBeFocused:this.props.isFocused,onFocusedChanged:this.props.onFocusedChanged})}};var Mr=__dcg_shared_module_exports__['h'](j());var{If:vW}=Mr.Components,iy=class extends Mr.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return Mr.createElement("div",{class:Mr.const("dcg-slider_menu dcg-do-blur"),handleEvent:Mr.const("true"),didMount:e=>this.node=e},Mr.createElement("div",{class:Mr.const("dcg-editable-mathquill-container")},Mr.createElement(vW,{predicate:()=>!this.shouldOnlyShowStep()},()=>Mr.createElement("span",null,Mr.createElement(Lt,{readonly:()=>this.controller.isItemReadonly(this.id),latex:()=>this.model.slider.hardMin?this.model.slider.min:"",isFocused:()=>this.getFocusedInput()==="min",ariaLabel:()=>this.controller.s("graphing-calculator-narration-slider-minimum"),brailleLabel:()=>this.controller.raw("sldrmin"),handleFocusChanged:(e,i)=>this.handleFocusedChanged("min",e,i),hasError:()=>!tv(this.model),controller:this.props.controller,handlePressedKey:(e,i)=>this.handlePressedKey("min",e,i),handleLatexChanged:e=>this.handleLatexChanged("min",e),dataLabelAttributeValue:this.const("slidermin")}),Mr.createElement("span",{class:Mr.const("dcg-interval-interior")},Mr.createElement(Te,{latex:this.bindFn(this.getDependentLatex),config:this.const({})},Mr.createElement("span",null))),Mr.createElement(Lt,{readonly:()=>this.controller.isItemReadonly(this.id),latex:()=>this.model.slider.hardMax?this.model.slider.max:"",isFocused:()=>this.getFocusedInput()==="max",ariaLabel:()=>this.controller.s("graphing-calculator-narration-slider-maximum"),brailleLabel:()=>this.controller.raw("sldrmax"),handleFocusChanged:(e,i)=>this.handleFocusedChanged("max",e,i),hasError:()=>!iv(this.model),controller:this.props.controller,handlePressedKey:(e,i)=>this.handlePressedKey("max",e,i),handleLatexChanged:e=>this.handleLatexChanged("max",e),dataLabelAttributeValue:this.const("slidermax")}))),Mr.createElement("span",{class:()=>({"dcg-slider-step-container":!this.shouldOnlyShowStep()})},Mr.createElement("span",{class:Mr.const("dcg-slider-step-label"),"aria-hidden":Mr.const("true")},()=>this.controller.s("graphing-calculator-label-slider-step")),Mr.createElement(Lt,{readonly:()=>this.controller.isItemReadonly(this.id),latex:()=>this.model.slider.step,isFocused:()=>this.getFocusedInput()==="step",ariaLabel:()=>this.controller.s("graphing-calculator-narration-slider-step"),brailleLabel:()=>this.controller.raw("sldrstep"),handleFocusChanged:(e,i)=>this.handleFocusedChanged("step",e,i),hasError:()=>!rv(this.model),controller:this.props.controller,handlePressedKey:(e,i)=>this.handlePressedKey("step",e,i),handleLatexChanged:e=>this.handleLatexChanged("step",e),dataLabelAttributeValue:this.const("sliderstep")}))))}handlePressedKey(e,i,r){if(!this.controller.isInEditListMode()&&!this.shouldOnlyShowStep()&&(i==="Esc"||i==="Enter")){this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.id}});return}let o=Se.getFocusedMathquill(),n=Xn();if(i==="Left"||i==="Right"||i==="Down"||i==="Up"){var a;o?a=Se.applyArrowKeyAndReturnIfWasAtBounds(o,i,r):n&&(n.selectionStart===0&&i==="Left"||n.selectionStart===n.value.length&&i==="Right"||i==="Up"||i==="Down")?a=!0:a=!1,a&&(r&&r.preventDefault(),i==="Left"&&!this.shouldOnlyShowStep()?e==="max"?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:"min"}}):e==="step"&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:"max"}}):i==="Right"&&!this.shouldOnlyShowStep()?e==="min"?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:"max"}}):e==="max"&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:"step"}}):i==="Down"?this.controller.dispatch({type:"on-special-key-pressed",key:"Down"}):i==="Up"&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}));return}o&&(o.keystroke(i,r),this.handleLatexChanged(e,o.latex()))}shouldOnlyShowStep(){return this.model.slider.loopMode==="PLAY_INDEFINITELY"}handleLatexChanged(e,i){e==="min"?this.dispatchMinLatexIfChanged(i):e==="max"?this.dispatchMaxLatexIfChanged(i):e==="step"&&this.dispatchStepLatexIfChanged(i)}handleFocusedChanged(e,i,r){i&&this.getFocusedInput()!==e?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:e}}):this.getFocusedInput()===e&&this.controller.getBrailleMode()==="none"&&(!r.relatedTarget||!this.node.contains(r.relatedTarget))&&this.controller.dispatch({type:"blur-focus-location",location:{type:"slider-limit",id:this.id,location:e}})}dispatchMinLatexIfChanged(e){this.model.slider.min!==e&&this.controller.dispatch({type:"set-slider-minlatex",id:this.id,latex:e})}dispatchMaxLatexIfChanged(e){this.model.slider.max!==e&&this.controller.dispatch({type:"set-slider-maxlatex",id:this.id,latex:e})}dispatchStepLatexIfChanged(e){this.model.slider.step!==e&&this.controller.dispatch({type:"set-slider-steplatex",id:this.id,latex:e})}getDependentLatex(){var e=Ao(this.model)||"";return" \\le "+__dcg_shared_module_exports__['cb'](e)+" \\le "}getFocusedInput(){let e=this.controller.getFocusLocation();if(!(!e||e.type!=="slider-limit"||e.id!==this.id))return e.location}getMQConfig(){return{autoOperatorNames:sa()}}};var{If:S3}=hr.Components,ry=class extends hr.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return hr.createElement("span",{class:hr.const("dcg-slider-container"),tapboundary:hr.const("true"),onKeydown:e=>{if(be(e)==="Tab"&&!e.altKey&&!e.metaKey&&!e.ctrlKey)if(e.shiftKey)if(this.isSliderMinFocused()&&this.controller.isInEditListMode()){if(e.target){let i=e.target.closest(".dcg-expressionitem");if(i){let r=Array.from(i.querySelectorAll('[tabindex="0"]')).filter(wp)[0];r==null||r.focus()}}e.preventDefault(),e.stopPropagation()}else this.isSliderThumbFocused()&&(this.controller.isItemReadonly(this.model.id)||(this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:"step"}}),e.preventDefault(),e.stopPropagation()));else!e.shiftKey&&this.isSliderStepFocused()&&(this.controller.isInEditListMode()?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-icon",id:this.id}}):this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.id}}),e.preventDefault(),e.stopPropagation())}},hr.createElement(S3,{predicate:this.bindFn(this.shouldShowSlider)},()=>hr.createElement("div",{class:hr.const("dcg-do-blur dcg-slider"),handleEvent:hr.const("true")},hr.createElement("div",{class:hr.const("dcg-minLabel dcg-template-minlabelhtml"),role:hr.const("button"),tabindex:hr.const("0"),"aria-label":this.bindFn(this.getMinAriaLabel),onTap:()=>this.onEditLimit("min")},hr.createElement(Te,{latex:()=>ev(this.model),config:this.const({})})),hr.createElement(ty,{min:()=>Ga(this.model),max:()=>ks(this.model),step:()=>Ja(this.model),value:()=>Aa(this.model),ariaLabel:()=>this.controller.getBrailleMode()==="none"?'"'+Ao(this.model)+'"':""+Ao(this.model),onGrab:this.bindFn(this.onGrab),onDrop:this.bindFn(this.onDrop),onDragUpdate:this.bindFn(this.onDragUpdate),onKeyboardUpdate:this.bindFn(this.onKeyboardUpdate),onUpPress:()=>this.controller.dispatch({type:"on-special-key-pressed",key:"Up"}),onDownPress:()=>this.controller.dispatch({type:"on-special-key-pressed",key:"Down"}),onEnterPress:()=>this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"}),isFocused:this.bindFn(this.isSliderThumbFocused),onFocusedChanged:e=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"slider-thumb",id:this.id}})}}),hr.createElement("div",{class:hr.const("dcg-maxLabel dcg-template-maxlabelhtml"),onTap:()=>this.onEditLimit("max"),role:hr.const("button"),tabindex:hr.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-narration-slider-maximum")+" "+Xo(ev(this.model))},hr.createElement(Te,{latex:()=>fP(this.model),config:this.const({})})))),hr.createElement(S3,{predicate:this.bindFn(this.shouldShowLimitInputs)},()=>hr.createElement(iy,{model:this.props.model,controller:this.props.controller})))}getMinAriaLabel(){return this.controller.isItemReadonly(this.model.id)?this.controller.s("graphing-calculator-narration-slider-minimum")+" "+Xo(ev(this.model)):this.controller.s("graphing-calculator-narration-edit-slider-variable-limits",{variable:this.controller.getBrailleMode()==="none"?'"'+Ao(this.model)+'"':""+Ao(this.model)})}onGrab(){this.dispatchIsDraggingIfChanged(!0)}onDrop(){this.controller.dispatch({type:"set-none-selected"}),this.dispatchIsPlayingIfChanged(!1),this.dispatchIsDraggingIfChanged(!1)}onKeyboardUpdate(e){this.controller.dispatch({type:"adjust-slider-by-keyboard",id:this.id,adjustment:e})}onDragUpdate(e){this.controller.dispatch({type:"adjust-slider-by-dragging-thumb",id:this.model.id,target:e})}onEditLimit(e){this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:e}})}dispatchIsPlayingIfChanged(e){this.model.slider.isPlaying!==e&&this.controller.dispatch({type:"set-slider-isplaying",id:this.id,isPlaying:e})}dispatchIsDraggingIfChanged(e){this.model.sliderDragging!==e&&this.controller.dispatch({type:"set-slider-dragging",id:this.id,dragging:e})}shouldShowLimitInputs(){if(this.controller.isInEditListMode())return!0;if(this.controller.isItemReadonly(this.model.id))return!1;if(!tv(this.model)||!iv(this.model)||!rv(this.model)||this.model.slider.loopMode==="PLAY_INDEFINITELY")return!0;let e=this.controller.getFocusLocation();return!!(e&&(e.type==="slider-limit"||e.type==="expression"||e.type==="top-level-icon"||e.type==="readonly-expression")&&e.id===this.id)}shouldShowSlider(){return!this.shouldShowLimitInputs()}isSliderThumbFocused(){let e=this.controller.getFocusLocation();return!!(e&&e.type==="slider-thumb"&&e.id===this.id)}isSliderMinFocused(){let e=this.controller.getFocusLocation();return!!(e&&e.type==="slider-limit"&&e.id===this.id&&e.location==="min")}isSliderStepFocused(){let e=this.controller.getFocusLocation();return!!(e&&e.type==="slider-limit"&&e.id===this.id&&e.location==="step")}};Tt();var ir=__dcg_shared_module_exports__['h'](j());var{For:CW,If:SW}=ir.Components,$s=class extends ir.Class{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return ir.createElement("div",{class:ir.const("dcg-create-sliders dcg-action-createslider"),handleEvent:ir.const("true"),onTap:this.bindFn(this.onCreateSlider)},ir.createElement("span",{class:ir.const("dcg-msg")},()=>this.controller.s("graphing-calculator-label-add-slider")),ir.createElement("span",{class:ir.const("btns")},ir.createElement(CW,{each:()=>this.getMissingVariables().slice(0,4)},ir.createElement("span",null,e=>ir.createElement("div",{class:ir.const("dcg-slider-btn-container"),var_name:this.const(e)},ir.createElement("div",{role:ir.const("button"),tabindex:ir.const("0"),class:()=>({"dcg-btn-slider":!0,"dcg-btn-blue":this.getMissingVariables().length===1,"dcg-btn-light-gray":this.getMissingVariables().length!==1}),didMount:i=>{i.innerHTML=__dcg_shared_module_exports__['db'](e)}})))),ir.createElement(SW,{predicate:()=>this.getMissingVariables().length>1},()=>ir.createElement("div",{class:ir.const("dcg-slider-btn-container dcg-all")},ir.createElement("div",{role:ir.const("button"),tabindex:ir.const("0"),class:ir.const("dcg-btn-slider dcg-btn-blue")},()=>this.controller.s("graphing-calculator-button-slider-add-all-variables"))))))}onCreateSlider(e){if(this.controller.dispatch({type:"set-none-selected"}),!e.target)return;var i=e.target.closest(".dcg-slider-btn-container");if(!i)return;let r=i.classList.contains("dcg-all"),o=r?this.getMissingVariables():[i.getAttribute("var_name")];if(this.model.type==="ticker"?this.controller.dispatch({type:"create-sliders-for-ticker",variables:this.getMissingVariables()}):this.controller.dispatch({type:"create-sliders-for-item",id:this.model.id,variables:o}),e.device==="keyboard"){let n=this.model.id,a=this.props.controller().getItemNodeById(n);if(!a)return;r?this.controller.dispatch({type:"move-focus-to-item",id:n}):H(a.querySelector(".dcg-btn-blue")).trigger("focus")}}getMissingVariables(){return this.model.type==="ticker"?Zm(this.model):sf(this.model)}didMount(){this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout),this.promptAlertTimeout=setTimeout(()=>{for(var e=[],i=this.getMissingVariables(),r=0;r<i.length;r++)e.push('"'+i[r]+'"');le(this.controller.s("graphing-calculator-narration-add-slider-prompt",{vars:e.join(",")})),this.promptAlertTimeout=0},2e3)}didUnmount(){this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout)}};var An=__dcg_shared_module_exports__['h'](j());var oy=class extends An.Class{template(){return An.createElement("div",{class:An.const("dcg-prompt-rename"),handleEvent:An.const("true")},()=>Pa("graphing-calculator-label-rename"),An.createElement("span",{class:An.const("dcg-btn-light-gray"),onTap:this.props.handleRename,tabindex:An.const(0),role:An.const("button")},An.createElement(Te,{latex:()=>this.props.from()+" \\to "+this.props.to(),config:this.const({})},An.createElement("span",{style:An.const("pointer-events:none")}))),An.createElement("span",{class:An.const("dcg-reference-count")},()=>Pa("graphing-calculator-label-reference-count",{count:new mo(this.props.count())})))}};var qa=__dcg_shared_module_exports__['h'](j());var Kr=__dcg_shared_module_exports__['h'](j());var{If:E3}=Kr.Components,ny=class extends Kr.Class{constructor(){super(...arguments),this.focusedValues={}}template(){return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,Kr.createElement("div",{class:Kr.const("dcg-cdf-footer-container dcg-do-blur"),tapboundary:Kr.const("true"),handleEvent:Kr.const("true")},Kr.createElement($e,{checked:()=>vc(this.model),disabled:()=>lk(this.model)||this.controller.isItemReadonly(this.model.id),onChange:e=>{this.controller.dispatch({type:"set-show-cdf",id:this.model.id,showCDF:e})}},()=>this.controller.s("graphing-calculator-button-find-cdf")),Kr.createElement(E3,{predicate:()=>vc(this.model)},()=>Kr.createElement("div",null,Kr.createElement("span",{class:Kr.const("dcg-cdf-limit-name")},()=>this.controller.s("graphing-calculator-label-cdf-minimum")),Kr.createElement(Lt,{handleFocusChanged:e=>this.handleFocusedChanged("min",e),latex:()=>bv(this.model),hasError:()=>!xv(this.model),isFocused:()=>this.isInputFocused("min"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-cdf-minimum"),placeholder:()=>tO(this.model),handlePressedKey:(e,i)=>this.handlePressedKey(e,i,"min"),controller:this.props.controller,handleLatexChanged:this.bindFn(this.updateCDFMin),readonly:()=>this.controller.isItemReadonly(this.model.id)}),Kr.createElement("span",{class:Kr.const("dcg-cdf-limit-name")},()=>this.controller.s("graphing-calculator-label-cdf-maximum")),Kr.createElement(Lt,{handleFocusChanged:e=>this.handleFocusedChanged("max",e),latex:()=>yv(this.model),hasError:()=>!wv(this.model),isFocused:()=>this.isInputFocused("max"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-cdf-maximum"),placeholder:()=>iO(this.model),handlePressedKey:(e,i)=>this.handlePressedKey(e,i,"max"),controller:this.props.controller,handleLatexChanged:this.bindFn(this.updateCDFMax),readonly:()=>this.controller.isItemReadonly(this.model.id)}),Kr.createElement(E3,{predicate:this.bindFn(this.showEvaluation)},()=>Kr.createElement("div",{class:Kr.const("dcg-cdf-evaluation-container")},Kr.createElement(pu,{val:()=>uk(this.model),controller:this.props.controller,dependent:this.const(""),id:()=>this.model.id,focusable:this.const(!0)}))))))}handlePressedKey(e,i,r){if(e==="Esc"){this.controller.dispatch({type:"set-focus-location",location:void 0});return}if(e==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var o=Se.getFocusedMathquill();o&&(o.keystroke(e,i),r==="min"&&bv(this.model)!==o.latex()&&this.updateCDFMin(o.latex()),r==="max"&&yv(this.model)!==o.latex()&&this.updateCDFMax(o.latex()))}updateCDFMax(e){this.controller.dispatch({type:"set-cdf-max",id:this.model.id,latex:e})}updateCDFMin(e){this.controller.dispatch({type:"set-cdf-min",id:this.model.id,latex:e})}showEvaluation(){return!(!wv(this.model)||!xv(this.model))}isInputFocused(e){let i=this.controller.getFocusLocation();return!i||i.type!=="cdf-limit"||i.id!==this.id?!1:i.location===e}handleFocusedChanged(e,i){i?this.controller.dispatch({type:"set-focus-location",location:{type:"cdf-limit",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"cdf-limit",id:this.id,location:e}})}};var No=__dcg_shared_module_exports__['h'](j());var{If:EW,For:D3,SwitchUnion:DW}=No.Components,zg=class extends No.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return DW(this.bindFn(this.getSuggestionType),{list:()=>No.createElement(D3,{each:this.bindFn(this.getListOfParameters)},No.createElement("div",{class:()=>({"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":this.controller.getBrailleMode()!=="none"})},e=>No.createElement("span",{class:No.const("dcg-parameter-name")},()=>this.getParamName(e)))),listWithDefault:()=>No.createElement(D3,{each:this.bindFn(this.getListOfParameters)},No.createElement("div",{class:()=>({"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":this.controller.getBrailleMode()!=="none"}),onTap:this.bindFn(this.fillInDefaults)},e=>No.createElement("span",{class:No.const("dcg-parameter-name")},()=>this.getParamName(e),No.createElement(EW,{predicate:()=>this.shouldShowDefaultValue(e)},()=>No.createElement("span",{class:No.const("dcg-default-marker")},No.const("= "),()=>this.getDefaultValue(e)))))),individual:()=>No.createElement("div",{class:()=>({"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":this.controller.getBrailleMode()!=="none"})},this.bindFn(this.getMissingRequiredParamText)),none:()=>{}})}getExtractedAndDefaultArgString(e){let{params:i,values:r,defaults:o}=e;return i.map((a,s)=>{let l=r[a],c=o[s];return l||c||""}).join(",")}fillInDefaults(){let e=Va(this.model);if(!e)return;let{symbol:i,span:r}=e,{input:o,start:n,end:a}=r,s=this.getExtractedAndDefaultArgString(e),l=`\\operatorname{${i}}\\left(${s}\\right)`,c=`${o.slice(0,n)}${l}${o.slice(a)}`;this.controller.dispatch({type:"set-item-latex",id:this.id,latex:c}),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}),this.controller.dispatch({type:"keypad/press-key",key:"Left"})}isMissingDefault(){if(!kf(this.model))return!1;let e=Va(this.model);if(!e)return!1;for(var i=0;i<e.params.length;i++)if(this.shouldShowDefaultValue(e.params[i]))return!0;return!1}getSuggestionType(){return this.getListOfParameters().length>1?this.isMissingDefault()?"listWithDefault":"list":this.missingRequiredParam()?"individual":"none"}missingRequiredParam(){let e=Va(this.model);if(e&&e.params.length===1){var i=e.params[0];if(!this.getDefaultValue(i)&&!this.getParameterExtractedValue(i))return i}}getMissingRequiredParamText(){var e=this.missingRequiredParam();return e?this.controller.s("graphing-calculator-text-enter-pareneter",{param:this.getParamName(e)}):""}getDefaultValue(e){let i=Va(this.model);if(!i||!i.params)return"";for(let r=0;r<i.params.length;r++)if(i.params[r]===e)return i.defaults[r]||"";return""}getParameterExtractedValue(e){let i=Va(this.model);return i&&i.values[e]||""}shouldShowDefaultValue(e){return!this.getParameterExtractedValue(e)&&!!this.getDefaultValue(e)}getListOfParameters(){let e=Va(this.model);return e?e.params:[]}getParamName(e){switch(e){case"mean":return this.controller.s("graphing-calculator-text-parameter-name-mean");case"stdev":return this.controller.s("graphing-calculator-text-parameter-name-stddev");case"dof":return this.controller.s("graphing-calculator-text-parameter-name-dof");case"probsuccess":return this.controller.s("graphing-calculator-text-parameter-name-probsuccess");case"trials":return this.controller.s("graphing-calculator-text-parameter-name-trials");case"data":return this.controller.s("graphing-calculator-text-parameter-name-data");case"binwidth":return this.controller.s("graphing-calculator-text-parameter-name-binwidth");case"min":return this.controller.s("graphing-calculator-text-parameter-name-min");case"max":return this.controller.s("graphing-calculator-text-parameter-name-max");case"height":return this.controller.s("graphing-calculator-text-parameter-name-height");case"offset":return this.controller.s("graphing-calculator-text-parameter-name-offset");default:return e}}};var{If:kW}=qa.Components,ay=class extends qa.Class{template(){return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,qa.createElement("div",{class:qa.const("dcg-distribution-parameters-container dcg-do-blur"),tapboundary:qa.const("true"),handleEvent:qa.const("true")},qa.createElement(zg,{model:this.props.model,controller:this.props.controller}),qa.createElement(kW,{predicate:()=>sk(this.model)},()=>qa.createElement(ny,{model:this.props.model,controller:this.props.controller})))}};var bt=__dcg_shared_module_exports__['h'](j());var{SwitchUnion:IW,If:k3}=bt.Components,Ug=class extends bt.Class{template(){return bt.createElement("div",{class:bt.const("dcg-toggle-container")},bt.createElement("div",{class:bt.const("dcg-expression-footer-title")},this.props.title,bt.createElement(k3,{predicate:()=>!!this.props.helpLink},()=>bt.createElement("a",{"aria-label":()=>this.props.controller().s("account-shell-link-help"),class:bt.const("dcg-expression-footer-title-help"),target:bt.const("_blank"),href:this.props.helpLink},bt.createElement("i",{class:bt.const("dcg-icon-question-sign"),"aria-hidden":bt.const("true")})))),bt.createElement(Ni,{staticConfig:this.bindFn(this.getSegmentedControlOptions),ariaGroupLabel:this.props.title,disabled:this.bindFn(this.isReadonly),theme:this.const("mini"),minButtonWidth:this.const(65)}))}isReadonly(){return this.props.controller().isItemReadonly(this.props.model().id)}getSegmentedControlOptions(){return this.props.options().map(e=>({key:e.name,label:()=>e.displayName,selected:()=>this.isSelected(e.name),onSelect:()=>{this.props.controller().dispatch({type:"set-visualization-prop",id:this.props.model().id,prop:this.props.vizProp(),value:e.name})}}))}isSelected(e){return xc(this.props.model(),this.props.vizProp())===e}},sy=class extends bt.Class{template(){return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,bt.createElement("div",{class:bt.const("dcg-visualization-parameters-container dcg-do-blur"),tapboundary:bt.const("true"),handleEvent:bt.const("true")},bt.createElement(zg,__dcg_shared_module_exports__['a']({},this.props)),bt.createElement("div",{class:bt.const("dcg-smaller-font")},IW(()=>this.getVisualizationType(),{boxplot:()=>bt.createElement("div",null,bt.createElement("div",{class:bt.const("dcg-expression-footer-title")},()=>this.controller.s("graphing-calculator-heading-visual-parameters-display-properties")),this.makeMQInput({prop:"axisOffset",siblingProps:["breadth"],default:"1",name:()=>this.controller.s("graphing-calculator-narration-visual-parameters-offset")}),this.makeMQInput({prop:"breadth",siblingProps:["axisOffset"],default:"1",name:()=>xc(this.model,"alignedAxis")==="y"?this.controller.s("graphing-calculator-narration-visual-parameters-width"):this.controller.s("graphing-calculator-narration-visual-parameters-height")}),bt.createElement($e,{checked:()=>!!xc(this.model,"showBoxplotOutliers"),disabled:()=>this.controller.isItemReadonly(this.model.id),onChange:this.bindFn(this.onToggleOutliers)},bt.createElement("span",{class:bt.const("dcg-parameter-name")},()=>this.controller.s("graphing-calculator-button-visual-parameters-exclude-outliers")))),dotplot:()=>bt.createElement(k3,{predicate:()=>vP(this.model)},()=>bt.createElement("div",{class:bt.const("dcg-toggles-container")},bt.createElement(Ug,__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.props),{vizProp:()=>"dotplotXMode",options:()=>[{name:"exact",displayName:this.controller.s("graphing-calculator-button-visual-parameters-exact")},{name:"bin",displayName:this.controller.s("graphing-calculator-button-visual-parameters-binned")}],title:()=>this.controller.s("graphing-calculator-heading-visual-parameters-x-values")})),bt.createElement(Ug,__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.props),{vizProp:()=>"binAlignment",options:()=>[{name:"center",displayName:this.controller.s("graphing-calculator-button-visual-parameters-center")},{name:"left",displayName:this.controller.s("graphing-calculator-button-visual-parameters-left")}],title:()=>this.controller.s("graphing-calculator-heading-visual-parameters-bin-alignment")})))),histogram:()=>bt.createElement("div",{class:bt.const("dcg-toggles-container")},bt.createElement(Ug,__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.props),{vizProp:()=>"histogramMode",options:()=>[{name:"",displayName:this.controller.s("graphing-calculator-button-visual-parameters-count")},{name:"relative",displayName:this.controller.s("graphing-calculator-button-visual-parameters-relative")},{name:"density",displayName:this.controller.s("graphing-calculator-button-visual-parameters-density")}],title:()=>this.controller.s("graphing-calculator-heading-visual-parameters-bar-heights"),helpLink:this.const("https://help.desmos.com/hc/en-us/articles/360022405991")})),bt.createElement(Ug,__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.props),{vizProp:()=>"binAlignment",options:()=>[{name:"center",displayName:this.controller.s("graphing-calculator-button-visual-parameters-center")},{name:"left",displayName:this.controller.s("graphing-calculator-button-visual-parameters-left")}],title:()=>this.controller.s("graphing-calculator-heading-visual-parameters-bin-alignment")}))),none:()=>bt.createElement("span",null)})))}makeMQInput(e){return bt.createElement("span",null,bt.createElement("span",{class:bt.const("dcg-parameter-name")},e.name,bt.const(":")),bt.createElement(Lt,{latex:()=>this.getPropLatex(e),ariaLabel:e.name,placeholder:()=>e.default,isFocused:()=>this.isInputFocused(e.prop),hasError:()=>!yP(this.model,e.prop),handleFocusChanged:i=>this.handleFocusedChanged(e.prop,i),handlePressedKey:(i,r)=>this.handlePressedKey(i,r,e.prop),handleLatexChanged:i=>this.handleLatexChanged(e.prop,i),readonly:()=>this.controller.isItemReadonly(this.model.id),controller:this.props.controller}))}handlePressedKey(e,i,r){if(e==="Esc"){this.controller.dispatch({type:"set-focus-location",location:void 0});return}if(e==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var o=Se.getFocusedMathquill();o&&(o.keystroke(e,i),this.handleLatexChanged(r,o.latex()))}isInputFocused(e){let i=this.controller.getFocusLocation();return!i||i.type!=="visualization-prop"||i.id!==this.id?!1:i.location===e}handleFocusedChanged(e,i){i?this.controller.dispatch({type:"set-focus-location",location:{type:"visualization-prop",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"visualization-prop",id:this.id,location:e}})}getPropLatex({prop:e}){let i=xc(this.model,e);return typeof i=="string"?i:""}handleLatexChanged(e,i){xc(this.model,e)!==i&&this.controller.dispatch({type:"set-visualization-prop",id:this.id,prop:e,value:i})}onToggleOutliers(){var e=xc(this.model,"showBoxplotOutliers");this.controller.dispatch({type:"set-visualization-prop",id:this.id,prop:"showBoxplotOutliers",value:!e})}getVisualizationType(){return kf(this.model)?fd(this.model)?"boxplot":wc(this.model)?"dotplot":Op(this.model)?"histogram":"none":"none"}};var yt=__dcg_shared_module_exports__['h'](j());var ly=class extends yt.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return yt.createElement("div",{class:yt.const("dcg-ttest-footer-container dcg-do-blur"),handleEvent:yt.const("true")},yt.createElement("table",null,yt.createElement("tr",null,yt.createElement("td",null,yt.createElement("div",{class:yt.const("dcg-value"),role:yt.const("textbox"),"aria-readonly":yt.const("true"),tabindex:yt.const("0"),"aria-label":()=>"Less than: "+this.getLessThan()},yt.createElement("span",{class:yt.const("dcg-operator")},yt.createElement(Te,{config:this.const({}),latex:this.const("<")})),yt.createElement("span",{class:yt.const("dcg-evaluation")},yt.createElement(Te,{config:this.const({}),latex:()=>this.getLessThan()}))))),yt.createElement("tr",null,yt.createElement("td",null,yt.createElement("div",{class:yt.const("dcg-value"),role:yt.const("textbox"),"aria-readonly":yt.const("true"),tabindex:yt.const("0"),"aria-label":()=>"Greater than: "+this.getGreaterThan()},yt.createElement("span",{class:yt.const("dcg-operator")},yt.createElement(Te,{config:this.const({}),latex:this.const(">")})),yt.createElement("span",{class:yt.const("dcg-evaluation")},yt.createElement(Te,{config:this.const({}),latex:()=>this.getGreaterThan()}))))),yt.createElement("tr",null,yt.createElement("td",null,yt.createElement("div",{class:yt.const("dcg-value"),role:yt.const("textbox"),"aria-readonly":yt.const("true"),tabindex:yt.const("0"),"aria-label":()=>"Not equal: "+this.getNotEqual()},yt.createElement("span",{class:yt.const("dcg-operator")},yt.createElement(Te,{config:this.const({}),latex:this.const("\u2260")})),yt.createElement("span",{class:yt.const("dcg-evaluation")},yt.createElement(Te,{config:this.const({}),latex:()=>this.getNotEqual()})))))))}getLessThan(){var e=vf(this.model);return e?__dcg_shared_module_exports__['vc'](e.lessThan,5):""}getGreaterThan(){var e=vf(this.model);return e?__dcg_shared_module_exports__['vc'](e.greaterThan,5):""}getNotEqual(){var e=vf(this.model);return e?__dcg_shared_module_exports__['vc'](e.notEqual,5):""}};var _e=__dcg_shared_module_exports__['h'](j());var cy=class extends _e.Class{template(){return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,_e.createElement("div",{class:_e.const("dcg-stats-footer-container dcg-do-blur"),handleEvent:_e.const("true")},_e.createElement("table",null,_e.createElement("tr",null,_e.createElement("td",null,_e.createElement("div",{class:_e.const("dcg-value"),role:_e.const("textbox"),"aria-readonly":_e.const("true"),tabindex:_e.const("0"),"aria-label":()=>"Min: "+this.getMin()},_e.createElement("span",{class:_e.const("dcg-row-header")},_e.const("Min")),_e.createElement("span",{class:_e.const("dcg-evaluation")},_e.createElement(Te,{config:this.const({}),latex:this.bindFn(this.getMin)}))))),_e.createElement("tr",null,_e.createElement("td",null,_e.createElement("div",{class:_e.const("dcg-value"),role:_e.const("textbox"),"aria-readonly":_e.const("true"),tabindex:_e.const("0"),"aria-label":()=>"Q1: "+this.getQ1()},_e.createElement("span",{class:_e.const("dcg-row-header")},_e.const("Q1")),_e.createElement("span",{class:_e.const("dcg-evaluation")},_e.createElement(Te,{config:this.const({}),latex:this.bindFn(this.getQ1)}))))),_e.createElement("tr",null,_e.createElement("td",null,_e.createElement("div",{class:_e.const("dcg-value"),role:_e.const("textbox"),"aria-readonly":_e.const("true"),tabindex:_e.const("0"),"aria-label":()=>"Median: "+this.getMedian()},_e.createElement("span",{class:_e.const("dcg-row-header")},_e.const("Median")),_e.createElement("span",{class:_e.const("dcg-evaluation")},_e.createElement(Te,{config:this.const({}),latex:this.bindFn(this.getMedian)}))))),_e.createElement("tr",null,_e.createElement("td",null,_e.createElement("div",{class:_e.const("dcg-value"),role:_e.const("textbox"),"aria-readonly":_e.const("true"),tabindex:_e.const("0"),"aria-label":()=>"Q3: "+this.getQ3()},_e.createElement("span",{class:_e.const("dcg-row-header")},_e.const("Q3")),_e.createElement("span",{class:_e.const("dcg-evaluation")},_e.createElement(Te,{config:this.const({}),latex:this.bindFn(this.getQ3)}))))),_e.createElement("tr",null,_e.createElement("td",null,_e.createElement("div",{class:_e.const("dcg-value"),role:_e.const("textbox"),"aria-readonly":_e.const("true"),tabindex:_e.const("0"),"aria-label":()=>"Max: "+this.getMax()},_e.createElement("span",{class:_e.const("dcg-row-header")},_e.const("Max")),_e.createElement("span",{class:_e.const("dcg-evaluation")},_e.createElement(Te,{config:this.const({}),latex:this.bindFn(this.getMax)})))))))}getMin(){let e=Vh(this.model);return e?__dcg_shared_module_exports__['uc'](e.min):""}getQ1(){let e=Vh(this.model);return e?__dcg_shared_module_exports__['uc'](e.q1):""}getMedian(){let e=Vh(this.model);return e?__dcg_shared_module_exports__['uc'](e.median):""}getQ3(){let e=Vh(this.model);return e?__dcg_shared_module_exports__['uc'](e.q3):""}getMax(){let e=Vh(this.model);return e?__dcg_shared_module_exports__['uc'](e.max):""}};var Gr=__dcg_shared_module_exports__['h'](j());var{If:TW}=Gr.Components,hu=class extends Gr.Class{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return Gr.createElement("div",{class:Gr.const("dcg-action-info"),handleEvent:Gr.const("true")},Gr.createElement("span",{class:Gr.const("dcg-action-label")},Gr.const("Run ")),Gr.createElement(Te,{latex:()=>this.model.clickableInfo.latex,config:this.bindFn(this.getMQConfig)}),Gr.createElement("span",{class:Gr.const("dcg-action-label")},Gr.const(" on click")),Gr.createElement(TW,{predicate:()=>!this.controller.isItemReadonly(this.model.id)},()=>Gr.createElement("span",{class:Gr.const("dcg-click-edit"),role:Gr.const("button"),tabindex:Gr.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-narration-edit-action"),onTap:this.bindFn(this.editAction)},Gr.createElement("i",{class:Gr.const("dcg-icon-pencil"),"aria-hidden":Gr.const("true")}))))}editAction(){this.model.type==="expression"?this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"expression",model:this.model,guid:this.getMenuGUID(),focusFirstOption:!1}}):this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"image",model:this.model,guid:this.getMenuGUID(),focusFirstOption:!1}}),this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:this.model.id,location:"updaterule"}})}getMenuGUID(){return this.model.guid}getMQConfig(){return{autoOperatorNames:sa({additionalOperators:["index"]}),autoCommands:pl()}}};var dt=__dcg_shared_module_exports__['h'](j());var{If:HS}=dt.Components,ns=class extends dt.Class{init(){this.controller=this.props.controller()}template(){return dt.createElement(HS,{predicate:this.bindFn(this.shouldShowOptions)},()=>dt.createElement("span",{class:()=>({"dcg-expression-edit-actions":!0,"dcg-limited-height":this.limitedHeight()}),style:()=>({background:this.controller.getBackgroundColor()}),didMount:()=>{this.controller.isInEditListMode()&&le(this.controller.s("graphing-calculator-narration-edit-list-mode-on"))},didUnmount:()=>{this.controller.isInEditListMode()||le(this.controller.s("graphing-calculator-narration-edit-list-mode-off"))}},dt.createElement(HS,{predicate:()=>!this.controller.hasBackgroundColor()},()=>dt.createElement("span",{class:dt.const("dcg-graphic"),handleEvent:dt.const("true ")})),dt.createElement(HS,{predicate:this.bindFn(this.canConvertToTable)},()=>dt.createElement(De,{tooltip:this.bindFn(this.getConvertTooltip),gravity:this.const("s")},dt.createElement("span",{class:dt.const("dcg-action-createtable dcg-exp-action-button"),handleEvent:dt.const("true"),role:dt.const("button"),tabindex:dt.const("0"),"aria-label":()=>Si(this.model(),"create_table"),onTap:this.bindFn(this.onCreateTable)},dt.createElement("i",{class:dt.const("dcg-icon-table"),"aria-hidden":dt.const("true")})))),dt.createElement(HS,{predicate:()=>this.controller.shouldShowAuthorFeatures()},()=>dt.createElement(De,{tooltip:this.bindFn(this.getReadonlyToggleLabel),gravity:this.const("s")},dt.createElement("span",{class:()=>({"dcg-action-lock":!0,"dcg-exp-action-button":!0,"dcg-selected":this.isReadonly()}),handleEvent:dt.const("true"),role:dt.const("button"),tabindex:dt.const("0"),"aria-label":this.bindFn(this.getReadonlyToggleLabel),onTap:this.bindFn(this.onToggleReadonly)},dt.createElement("i",{class:dt.const("dcg-icon-lock"),"aria-hidden":dt.const("true")})))),dt.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-duplicate-expression-tooltip"),gravity:this.const("s")},dt.createElement("span",{class:dt.const("dcg-duplicate-btn dcg-exp-action-button"),handleEvent:dt.const("true"),role:dt.const("button"),tabindex:dt.const("0"),"aria-label":()=>Si(this.model(),"duplicate"),onTap:this.bindFn(this.onDuplicateWithoutFocus)},dt.createElement("i",{class:dt.const("dcg-icon-duplicate"),"aria-hidden":dt.const("true")}))),dt.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-expression-delete-tooltip"),gravity:this.const("s")},dt.createElement("span",{class:dt.const("dcg-delete-btn dcg-exp-action-button"),handleEvent:dt.const("true"),role:dt.const("button"),tabindex:dt.const("0"),"aria-label":()=>Si(this.model(),"delete"),onTap:this.bindFn(this.onDelete)},dt.createElement("i",{class:dt.const("dcg-icon-remove"),"aria-hidden":dt.const("true")})))))}shouldShowOptions(){return this.controller.isInEditListMode()&&(this.controller.shouldShowAuthorFeatures()||!this.controller.isItemReadonly(this.props.id()))}model(){return this.controller.getItemModel(this.props.id())}getConvertTooltip(){return this.shouldInsertOnCreateTable()?this.controller.s("graphing-calculator-label-convert-to-table-tooltip"):this.controller.s("graphing-calculator-label-create-table")}canConvertToTable(){let e=this.model();return!!(e&&e.type==="expression"&&e.formula.is_tableable)}limitedHeight(){let e=this.model();return e&&(e.type==="image"||this.isSlider())}isSlider(){let e=this.model();return e&&e.type==="expression"&&e.sliderExists}generateSubscriptedTableColumns(e,i,r){var o={independent:i,dependent:r};if(i==="x")return o;var n=__dcg_shared_module_exports__['kc'](i);if(n.type!=="Identifier")return o;var a=__dcg_shared_module_exports__['kc'](r);if(a.type!=="FunctionCall"||a.args.length!==1)return o;var s=a.args[0];if(s.type!=="Identifier"||s._symbol!==i)return o;let l=a.getInputString(),c=s.getInputSpan(),p=l.substr(0,c.start),u=l.substr(c.end);return o.independent="x_{"+e+"}",o.dependent=p+o.independent+u,o}shouldInsertOnCreateTable(){let e=this.model();return!!e&&e.type==="expression"&&wl(e)}onCreateTable(){let e=this.model();if(!(!e||e.type!=="expression")){var i=e.formula;if(i.is_tableable&&i.table_info){var r=i.table_info,o=e.index,n=r.independent_variable,a=r.dependent_column;if(r.by_reference){let C=this.generateSubscriptedTableColumns(this.controller.generateTableXSubscript(),n,a);n=C.independent,a=C.dependent}var s,l=[],c=[];if(r.values)for(s=0;s<r.values.length;s++){var p=r.values[s][0];l.push(isNaN(p)?"":__dcg_shared_module_exports__['tc'](p));var u=r.values[s][1];c.push(isNaN(u)?"":__dcg_shared_module_exports__['tc'](u))}else for(s=-2;s<=2;s++)l.push(s+""),c.push("");var g={id:this.controller.generateId(),type:"table",readonly:!r.by_reference&&e.readonly,columns:[{id:this.controller.generateId(),latex:n,color:this.controller.getNextColor(),hidden:!1,values:l,points:!0,lines:!1,dragMode:"NONE",pointStyle:"POINT",lineStyle:"SOLID",colorLatex:"",lineOpacity:"",lineWidth:"",pointOpacity:"",pointSize:"",disableGraphInteractions:!1},{id:this.controller.generateId(),latex:a,color:Ds(e),hidden:!1,values:c,points:!0,lines:this.shouldInsertOnCreateTable()&&!!e.lines,dragMode:"NONE",pointStyle:"POINT",lineStyle:"SOLID",colorLatex:"",lineOpacity:"",lineWidth:"",pointOpacity:"",pointSize:"",disableGraphInteractions:!1}]},m=this.controller;this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!1}),this.shouldInsertOnCreateTable()?this.controller.dispatch({type:"replace-item-at-index",index:o,state:g,focus:!0}):this.controller.dispatch({type:"insert-item-at-index",index:o+1,state:g,folderId:e.folderId,focus:!0});var w=function(){m.dispatch({type:"undo"}),m.dispatch({type:"set-edit-list-mode",isEditListMode:!0,focusExpressionList:!1})};this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-table-created"),undoCallback:w}})}}}onDelete(e){this.controller.dispatch({type:"delete-item-and-animate-out",id:this.props.id(),setFocusAfterDelete:e.device==="keyboard"})}onDuplicateWithoutFocus(){let e=this.model();e&&(e.type==="folder"?this.controller.dispatch({type:"duplicate-folder",id:this.props.id()}):this.controller.dispatch({type:"duplicate-expression",id:this.props.id()}))}isReadonly(){return this.controller.isItemMarkedReadonly(this.props.id())}onToggleReadonly(){let e=this.model();e&&this.controller.dispatch({type:"set-item-readonly",id:this.props.id(),readonly:!e.readonly})}getReadonlyIcon(){return this.isReadonly()?"dcg-icon-lock":"dcg-icon-pencil"}getReadonlyToggleLabel(){return this.isReadonly()?this.controller.s("graphing-calculator-label-unlock-expression-tooltip"):this.controller.s("graphing-calculator-label-lock-expression-tooltip")}};var Zn=__dcg_shared_module_exports__['h'](j());var{If:MW}=Zn.Components,Hg=class extends Zn.Class{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return Zn.createElement(MW,{predicate:()=>this.controller.showExpressionZoomFitButton(this.model)},()=>Zn.createElement("div",{class:Zn.const("dcg-suggested-zoom-view dcg-do-blur"),handleEvent:Zn.const(!0)},Zn.createElement(De,{tooltip:this.bindFn(this.getZoomText),gravity:()=>"e"},Zn.createElement("i",{onTap:this.bindFn(this.onZoom),role:Zn.const("button"),tabindex:Zn.const("0"),"aria-label":this.bindFn(this.getZoomText),class:Zn.const("dcg-icon-zoom-fit")}))))}getZoomText(){return this.controller.s("graphing-calculator-text-zoom-fit")}onZoom(e){this.controller.dispatch({type:"expression-zoom-fit",id:this.model.id,focusAfterTap:e.device==="keyboard"})}};var He=__dcg_shared_module_exports__['h'](j());var oo=__dcg_shared_module_exports__['h'](j());var{If:GW}=oo.Components,{Switch:AW}=oo.Components,as=class extends oo.Class{init(){this.controller=this.props.controller(),this.model=this.props.model()}iconType(){return this.controller.shouldShowReplaceIcon()?"rename":this.controller.isItemMarkedReadonly(this.model.id)?"lock":"delete"}getAriaLabel(){switch(this.iconType()){case"none":case"lock":return;case"rename":return Si(this.model,"rename");case"delete":return Si(this.model,"delete")}}onIconTap(){this.iconType()==="delete"?this.controller.dispatch({type:"delete-item-and-animate-out",id:this.model.id,setFocusAfterDelete:!this.controller.isInEditListMode()}):this.iconType()==="rename"&&this.controller.dispatch({type:"rename-identifier-in-item",search:this.controller.getExpressionSearchStr(),replace:this.controller.getExpressionReplaceStr(),id:this.model.id})}isIconTappable(){let e=this.iconType();return e!=="none"&&e!=="lock"}template(){return oo.createElement(GW,{predicate:()=>!this.controller.isInEditListMode()},()=>oo.createElement("div",{class:()=>({"dcg-top-level-icon":!0,"dcg-tappable":this.isIconTappable()}),tabIndex:()=>this.isIconTappable()?0:-1,"aria-label":this.bindFn(this.getAriaLabel),handleEvent:this.bindFn(this.isIconTappable),onTap:this.bindFn(this.onIconTap),role:oo.const("button"),manageFocus:this.const({shouldBeFocused:()=>Up({controller:this.controller,location:{type:"top-level-icon",id:this.model.id}}),onFocusedChanged:(e,i)=>{var r;e?this.controller.dispatch({type:"set-focus-location",location:{type:"top-level-icon",id:this.model.id}}):i.relatedTarget&&!((r=i.relatedTarget)!=null&&r.closest("[data-dcg-label]"))&&this.controller.dispatch({type:"blur-focus-location",location:{type:"top-level-icon",id:this.model.id}})}})},oo.createElement(AW,{key:()=>this.iconType()},e=>{switch(e){case"delete":return oo.createElement("i",{class:oo.const("dcg-icon-remove dcg-top-level-delete"),"aria-hidden":oo.const("true")});case"lock":return oo.createElement("i",{class:oo.const("dcg-icon-lock dcg-lock-indicator"),"aria-hidden":oo.const("true")});case"rename":return oo.createElement("i",{class:oo.const("dcg-icon-replace"),"aria-hidden":oo.const("true")});case"none":return oo.createElement("span",null)}})))}};var{If:Ul,SwitchUnion:VW}=He.Components,gu=class extends Qn{didMount(){this.onItemViewMounted(),this.lastBrailleMode=this.controller.getBrailleMode()}didMountRootNode(e){this.rootNode=e}willUnmount(){this.onItemViewUnmounted()}template(){return He.createElement("div",{class:()=>({"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-mathitem":!0,"dcg-inFolder":!!this.model.folderId,"dcg-readonly":this.controller.isItemReadonly(this.id),"dcg-selected":this.controller.isItemSelected(this.id)&&!this.controller.isInEditListMode(),"dcg-dragging":!!this.controller.isItemBeingDragged(this.id),"dcg-hasSlider":this.hasSlider(),"dcg-hasEvaluation":this.controller.shouldShowEvaluationForItem(this.id),"dcg-hasRegression":this.hasRegression(),"dcg-hasDomain":this.hasDomain()||this.hasDomain3d()}),"expr-id":()=>this.model.id,didMount:this.bindFn(this.didMountRootNode)},He.createElement("div",{class:He.const("dcg-fade-container"),onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},He.createElement("div",{class:He.const("dcg-main")},He.createElement(Ul,{predicate:()=>!this.controller.isInEditListMode()&&!this.isReadonly()},()=>He.createElement(tr,__dcg_shared_module_exports__['a']({latex:()=>Cf(this.model),operatorNames:()=>this.getMQConfig().autoOperatorNames,ariaLabel:()=>this.getAriaLabel("braille"),brailleShouldFocus:()=>this.isFocused(),onBrailleInput:e=>this.handleLatexChanged(e),onBrailleFocusedChanged:(e,i)=>this.handleMQFocusedChanged(e,i),onBrailleKeydown:this.bindFn(this.handleBraillePressedKey)},Br(this.controller)),He.createElement(Se,{latex:()=>Cf(this.model),getAriaLabel:()=>this.getAriaLabel("speech"),getAriaPostLabel:this.bindFn(this.getFormulaAria),isFocused:()=>this.isFocused(),noFadeout:()=>this.controller.isItemMarkedReadonly(this.model.id),tokenController:this.props.controller,capExpressionSize:()=>this.controller.getCapExpressionSize(),config:this.bindFn(this.getMQConfig),hasError:this.const(!1),onUserPressedKey:(e,i)=>this.handlePressedKey(e,i),onUserChangedLatex:e=>this.handleLatexChanged(e),onExpressionSizeExceeded:()=>this.controller.dispatch({type:"expression-size-exceeded"}),onFocusedChanged:(e,i)=>this.handleMQFocusedChanged(e,i),onSelectionChanged:()=>{this.controller.runAfterDispatch(()=>{this.controller.dispatch({type:"render"})})},needsSystemKeypad:()=>!this.controller.isKeypadEnabled()}))),He.createElement(Ul,{predicate:()=>this.controller.isInEditListMode()||this.isReadonly()},()=>He.createElement("div",{class:He.const("dcg-edit-list-mathquill"),tabindex:()=>this.controller.getBrailleMode()==="none"?"0":"-1",onTap:()=>this.controller.isInEditListMode()?this.exitEditListMode():{},onKeydown:this.bindFn(this.handleReadonlyPressedKey),manageFocus:this.const({shouldBeFocused:()=>this.controller.getBrailleMode()!=="none"?!1:Up({controller:this.controller,location:{type:"readonly-expression",id:this.model.id}}),onFocusedChanged:(e,i)=>{this.controller.getBrailleMode()==="none"&&(e?this.controller.dispatch({type:"set-focus-location",location:{type:"readonly-expression",id:this.model.id}}):this.doesNodeBelongToSliderLimit(i.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"readonly-expression",id:this.model.id}}))}})},He.createElement(tr,__dcg_shared_module_exports__['a']({latex:()=>Cf(this.model),operatorNames:()=>this.getMQConfig().autoOperatorNames,ariaLabel:()=>this.getAriaLabel("braille"),isStatic:this.const(!0),brailleShouldFocus:()=>{let e=this.controller.getFocusLocation();return!e||e.type!=="readonly-expression"?!1:e.id===this.id},onBrailleFocusedChanged:(e,i)=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"readonly-expression",id:this.model.id}}):this.doesNodeBelongToSliderLimit(i.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"readonly-expression",id:this.model.id}})}},Br(this.controller)),He.createElement(Te,{latex:()=>Cf(this.model),config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.getAriaLabel("speech"),tokenController:this.props.controller}))))),He.createElement(as,{controller:this.props.controller,model:this.props.model}),He.createElement(Ul,{predicate:this.bindFn(this.shouldShowFooter)},()=>He.createElement("div",{class:this.getFooterClass()},VW(()=>this.getFooterType(),{none:()=>{},regression:()=>He.createElement(ey,{model:this.props.model,controller:this.props.controller}),label:()=>He.createElement($p,{model:this.props.model,controller:this.props.controller}),slider:()=>He.createElement(ry,{model:this.props.model,controller:this.props.controller}),domain:()=>He.createElement(uu,{model:this.props.model,controller:this.props.controller,domainIndex:()=>0}),domain3d:()=>He.createElement("div",null,He.createElement(Ul,{predicate:()=>!WP(this.model)},()=>He.createElement(uu,{model:this.props.model,controller:this.props.controller,domainIndex:()=>0})),He.createElement(Ul,{predicate:()=>!$P(this.model)},()=>He.createElement(uu,{model:this.props.model,controller:this.props.controller,domainIndex:()=>1}))),evaluation:()=>He.createElement(pu,{id:()=>this.props.model().id,dependent:()=>Ao(this.model)||"",val:()=>this.controller.getEvaluationValueForItem(this.id),controller:this.props.controller,focusable:this.const(!0)}),distribution:()=>He.createElement(ay,{model:this.props.model,controller:this.props.controller}),visualization:()=>He.createElement(sy,{model:this.props.model,controller:this.props.controller}),ttest:()=>He.createElement(ly,{model:this.props.model,controller:this.props.controller}),stats:()=>He.createElement(cy,{model:this.props.model,controller:this.props.controller}),warning:()=>He.createElement(Zb,{controller:this.props.controller,type:this.bindFn(this.getFooterWarningType)})}),He.createElement(Ul,{predicate:this.bindFn(this.shouldShowBrailleError)},()=>He.createElement("div",{tabindex:He.const(0),class:He.const("dcg-expression-braille-error"),role:He.const("button"),"aria-roledescription":He.const("error"),"aria-label":()=>this.controller.unpack(this.model.error)},He.createElement("i",{class:He.const("dcg-icon-error"),"aria-hidden":He.const("true")}),()=>this.controller.unpack(this.model.error))),He.createElement(Ul,{predicate:this.bindFn(this.shouldShowSliderPrompt)},()=>He.createElement($s,{model:this.props.model,controller:this.props.controller})),He.createElement(Ul,{predicate:this.bindFn(this.shouldShowRenamePrompt)},()=>He.createElement(oy,{from:this.bindFn(this.getRenameIdentifierFrom),to:this.bindFn(this.getRenameIdentifierTo),count:this.bindFn(this.getRenameCountOfChanges),handleRename:this.bindFn(this.handleRename)})))),He.createElement(Ul,{predicate:this.bindFn(this.shouldShowActionInfo)},()=>He.createElement("div",{class:this.getFooterClass()},He.createElement(hu,{model:this.props.model,controller:this.props.controller}))),He.createElement(Ul,{predicate:this.bindFn(this.shouldShowExtendTo3D)},()=>He.createElement("div",{class:this.getFooterClass("dcg-extend-to-3d"),handleEvent:He.const("true")},He.createElement($e,{onChange:e=>{this.controller.dispatch({type:"set-item-extend-to-3D",id:this.model.id,extendTo3D:e})},checked:()=>this.model.extendTo3D,class:this.const("dcg-expression-footer-checkbox")},()=>this.controller.s("graphing-calculator-label-extend-to-3d"))))),He.createElement("span",{class:He.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),handleevent:He.const("true"),tapboundary:He.const("true"),disablescroll:He.const("true"),onTapStart:this.bindFn(this.onDragPending)},He.createElement("span",{class:He.const("dcg-num")},()=>this.model.displayIndex),He.createElement("div",{class:He.const("dcg-tab-interior dcg-action-icon-mouse")},He.createElement(Qb,{model:this.props.model,controller:this.props.controller})),He.createElement(Hg,{model:this.props.model,controller:this.props.controller})),He.createElement(ns,{controller:this.props.controller,id:()=>this.model.id}))}shouldShowExtendTo3D(){return this.controller.isThreeDMode()?hv(this.model):!1}getRenameIdentifierFrom(){let e=this.controller.getSuggestedIdentifierRenameInfo(this.id);return e&&e.from||""}getRenameIdentifierTo(){let e=this.controller.getSuggestedIdentifierRenameInfo(this.id);return e&&e.to||""}getRenameCountOfChanges(){let e=this.controller.getSuggestedIdentifierRenameInfo(this.id);return e&&e.countOfChanges||0}handleRename(){this.controller.dispatch({type:"rename-identifier-global",search:this.getRenameIdentifierFrom(),replace:this.getRenameIdentifierTo()})}didUpdate(){this.lastBrailleMode=this.controller.getBrailleMode()}shouldShowFooter(){return this.shouldShowBrailleError()||this.shouldShowSliderPrompt()||this.shouldShowRenamePrompt()?!0:this.getFooterType()!=="none"}getFooterType(){return this.hasRegression()?"regression":this.shouldShowLabelView()?"label":this.hasSlider()?"slider":this.hasDomain()?"domain":this.hasDomain3d()?"domain3d":this.isTTest()?"ttest":this.isStats()?"stats":this.controller.shouldShowEvaluationForItem(this.id)?"evaluation":this.isToplevelDistribution()?"distribution":this.isVisualization()?"visualization":this.model.unresolved||K0(this.model)?"warning":"none"}getFooterWarningType(){if(this.model.unresolved)return"unresolved";if(K0(this.model))return"tone-out-of-range"}getFooterClass(e){return this.const({"dcg-expression-bottom":!0,"dcg-indent-in-folder":!0,"dcg-fadein-bottom":!this.isFirstRender(),[e||""]:!!e})}onCreateSliders(e){this.controller.dispatch({type:"create-sliders-for-item",id:this.id,variables:e})}shouldShowLabelView(){return uo("labels")&&QP(this.model)&&!this.controller.isThreeDMode()}shouldShowSliderPrompt(){return this.controller.areSlidersEnabled()?Mw(this.model).length>0:!1}shouldShowRenamePrompt(){return this.getRenameCountOfChanges()>0}shouldShowActionInfo(){return!!(this.controller.areActionsEnabled()&&this.model.clickableInfo&&this.model.clickableInfo.enabled&&this.model.clickableInfo.latex)}shouldShowBrailleError(){return this.controller.getBrailleMode()!=="none"&&this.hasError()}hasRegression(){return!!(this.model.formula&&this.model.formula.is_regression)}hasDomain(){return lv(this.model)}hasDomain3d(){return cv(this.model)}isToplevelDistribution(){return bd(this.model)}isVisualization(){return fv(this.model)}isTTest(){return ak(this.model)}isStats(){return ZP(this.model)}hasSlider(){return!!this.model.sliderExists}getLabelOptions(){return this.controller.getEvaluationLabelOptionsForItem(this.model.id)}getAriaLabel(e){if(this.shouldShowLabelView()){var i;this.model.label&&this.model.label!==""?i=this.model.label:e==="speech"?i=this.controller.s("graphing-calculator-narration-expression-label"):i=this.controller.raw("lbl");var r;return Es(this.model)?r=i:e==="speech"?r=this.controller.s("graphing-calculator-narration-expression-hidden-label",{label:i}):r=this.controller.raw("h __label__",{label:i}),r}return e==="speech"?this.controller.s("shared-calculator-narration-expression-index",{index:this.model.displayIndex}):this.controller.raw("eq__index__",{index:this.model.displayIndex})}getFormulaAria(){let e=this.model.formula,i="";if(!e||yl(this.model))return i;if(this.controller.shouldShowEvaluationForItem(this.id)){i="equals ";let r=e.zero_values&&e.zero_values.length?e.zero_values[0].val:e.constant_value;Array.isArray(r)?i+=r.length+" element list.":r!==void 0&&(i+=Vo(__dcg_shared_module_exports__['bb'](+r,this.getLabelOptions())))}else e.error&&!this.shouldShowSliderPrompt()?i=this.controller.unpack(e.error):bd(this.model)?i=this.controller.s("graphing-calculator-narration-expression-evaluation-is-distribution"):this.isTTest()&&(i=this.controller.s("graphing-calculator-narration-expression-evaluation-is-t-test"));if(this.model.shouldGraph&&(e.is_graphable||e.is_regression)){e.is_graphable&&e.is_regression?i+=" "+this.controller.s("graphing-calculator-narration-expression-evaluation-has-graph-and-regression"):e.is_regression?i+=" "+this.controller.s("graphing-calculator-narration-expression-evaluation-has-regression"):i+=" "+this.controller.s("graphing-calculator-narration-expression-evaluation-has-graph");let r=this.controller.getAudioGraph();r&&r.agNavigator.canTrace(this.model)&&(Rr?i+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-mac"):i+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-windows"))}return this.controller.toneEnabled()&&da(this.model)&&(this.model.hidden?i+=" "+this.controller.s("graphing-calculator-narration-expression-tone-muted"):i+=" "+this.controller.s("graphing-calculator-narration-expression-tone-unmuted")),i}handleBraillePressedKey(e){let i=be(e);if(i){if(i==="Esc")Ri(),this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}});else if(i==="Up"||i==="Down"||i==="Enter")this.controller.dispatch({type:"on-special-key-pressed",key:i});else if(i==="Del"||i==="Backspace"){let r=Xn();yl(this.model)&&qg(r)&&(this.controller.dispatch({type:"on-special-key-pressed",key:i==="Del"?"Delete":i}),e.preventDefault(),e.stopPropagation())}}}handleReadonlyPressedKey(e){if(this.controller.isInEditListMode())return;let i=be(e);!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&(i==="Esc"?(e.preventDefault(),e.stopPropagation(),Ri(),this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}})):(i==="Up"||i==="Down"||i==="Enter")&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"on-special-key-pressed",key:i})))}handlePressedKey(e,i){var n;var r=Se.getFocusedMathquill();if(r){if(i&&this.controller.isGraphPaperFocused()){let a=(n=this.controller.getGrapher2d())==null?void 0:n.poiController;if(!a)return;let s=a.keyboardAttentionManager;if(e==="Tab"||e==="Shift-Tab"){i.stopPropagation(),i.preventDefault(),s.focusNextObjFromKeyboard({direction:i.shiftKey?"prev":"next"});return}else if(e==="Left"||e==="Right"||e==="Up"||e==="Down"||e==="Shift-Left"||e==="Shift-Right"||e==="Shift-Up"||e==="Shift-Down"){i.stopPropagation(),i.preventDefault(),i&&a.moveGeoPointFromKeyboard(i);return}else if(e==="Enter"){i.stopPropagation(),i.preventDefault();let l=s.getKeyboardAttention();a.tapGeoPointFromKeyboard(i),this.controller.getEvaluator().notifyWhenSynced(()=>{let c=this.controller.getValidCursorContext(),p=this.model.formula.cursor_context;if(c&&c===p){let u=this.controller.getFocusLocation();if(u&&u.type==="expression"&&u.id===this.model.id&&!u.isFakeGraphFocus&&this.controller.dispatch({type:"set-focus-location",location:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},u),{isFakeGraphFocus:!0})}),l){let g=s.findTabbableObjectsForCurrentTool(l);g.currentIsTabbable&&s.updateKeyboardAttention(g.targets[g.currentTabIndex],{describe:!1})}}});return}else if(e==="Esc"){i.stopPropagation(),i.preventDefault(),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.model.id}});return}}if(e==="Esc"){Ri(),this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}});return}else if(e==="Up"||e==="Down"){var o=Se.applyArrowKeyAndReturnIfWasAtBounds(r,e,i);return o?this.controller.dispatch({type:"on-special-key-pressed",key:e}):void 0}else if(e==="Delete"||e==="Backspace"){if(yl(this.model))return this.controller.dispatch({type:"on-special-key-pressed",key:e})}else if(e==="Enter")return i&&(i.preventDefault(),i.stopPropagation()),this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});r.keystroke(e,i),this.handleLatexChanged(r.latex())}}handleLatexChanged(e){e!==this.model.latex&&this.controller.dispatch({type:"set-item-latex",id:this.id,latex:e})}doesNodeBelongToSliderLimit(e){return!e||!this.rootNode.contains(e)?!1:!!e.closest("[data-dcg-label]")}handleMQFocusedChanged(e,i){e?this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}):!this.doesNodeBelongToSliderLimit(i.relatedTarget)&&this.lastBrailleMode===this.controller.getBrailleMode()&&this.controller.dispatch({type:"blur-focus-location",location:{type:"expression",id:this.id}})}onMouseSelect(e){this.isReadonly()||e.device!=="keyboard"&&(e.type==="dcg-tap"&&e.device==="mouse"||e.type==="dcg-tapstart"&&e.device==="touch"||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}})))}isReadonly(){return this.controller.isItemReadonly(this.id)}isFocused(){let e=this.controller.getFocusLocation();return!e||e.type!=="expression"?!1:e.id===this.id}isSliderThumbFocused(){let e=this.controller.getFocusLocation();return!e||e.type!=="slider-thumb"?!1:e.id===this.id}hasError(){return!!this.model.error&&!yl(this.model)}getMQConfig(){return this.controller.getMathquillConfig({})}};function Br(t){return{sixKeyInput:()=>t.getSixKeyInput(),mode:()=>t.getBrailleMode(),capExpressionSize:()=>t.getCapExpressionSize()?{exceedsLimit:e=>e.length>bg,onExpressionSizeExceeded:()=>t.dispatch({type:"expression-size-exceeded"})}:void 0}}var js=__dcg_shared_module_exports__['h'](j());Tt();var{Textarea:LW}=js.Components,zc=class extends js.Class{template(){return js.createElement("div",{class:js.const("dcg-smart-textarea-container")},js.createElement("div",{class:js.const("dcg-displayTextarea dcg-fixed-width-element"),didMount:this.bindFn(this.didMountDisplay)}),js.createElement(LW,{class:()=>({"dcg-do-blur":!0,"dcg-fixed-width-element":!0,"dcg-smart-textarea":!0,"dcg-empty":!this.props.text()}),"aria-label":()=>{var e,i;return(i=(e=this.props).ariaLabel)==null?void 0:i.call(e)},placeholder:this.bindFn(this.getPlaceholder),readonly:()=>this.props.readonly()?!0:void 0,value:this.props.text,onInput:this.props.onInput,didMount:this.bindFn(this.didMountTextarea),onKeydown:this.bindFn(this.onKeydownEvent)}))}getDisplayTextHTML(){let e=this.props.text()||"",i=(n,a)=>e.slice(n,a).replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=0,o="";if(this.props.showLinks()){let n=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,a=null;for(;(a=n.exec(e))!==null;){let[s]=a;o+=i(r,a.index),o+=`<a rel='nofollow ugc' href='${s}' target ='_blank'>${s}</a>`,r=n.lastIndex}}return o+=i(r),o}willUnmount(){this.textareaNode=void 0}didMountDisplay(e){this.displayNode=e,H(e).on("touchend",function(i){i.preventDefault()}),H(e).on("dcg-tap dcg-tapstart",function(i){i.target.closest("a")&&i.handle()}),this.renderDisplayText()}didMountTextarea(e){this.textareaNode=e,H(e).on("dcg-tapstart",i=>{i.handle()}),H(e).on("focusin focusout",()=>this.onFocusEvent()),this.updateFocused()}didUpdate(){this.updateFocused(),this.renderDisplayText()}onFocusEvent(){if(this.textareaNode){var e=document.activeElement===this.textareaNode;this.shouldBeFocused()!==e&&this.props.onFocusChange(e)}}renderDisplayText(){if(!this.displayNode)return;let e=this.getDisplayTextHTML();this.lastDisplayTextHTML!==e&&(this.lastDisplayTextHTML=e,this.displayNode.innerHTML=e)}isFocused(){return document.activeElement===this.textareaNode}shouldBeFocused(){return this.props.shouldFocus()}updateFocused(){if(!this.textareaNode)return;let e=this.isFocused(),i=this.shouldBeFocused();if(e!==i)if(!i)this.textareaNode.blur();else{if(ka&&pc)return;this.textareaNode.focus(),this.textareaNode.selectionStart=this.textareaNode.selectionEnd=this.textareaNode.value.length}}onKeydownEvent(e){var i=this.textareaNode;if(!i)return;var r=be(e);let o=this.props.readonly(),n=this.props.readonlyAction&&this.props.readonlyAction();if(o&&n!==void 0&&n.predicate()){!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&(r===Fa||r===Id)&&(e.preventDefault(),n.action());return}r===Fa&&!e.metaKey?(e.preventDefault(),this.props.onSpecialKey("Enter")):r===Yo?Ri():r===Jo?(o||i.selectionStart===0&&i.selectionEnd===0)&&!(e.altKey||e.metaKey)&&(e.preventDefault(),this.props.onSpecialKey("Up")):r===un?(o||i.selectionStart===i.value.length&&i.selectionEnd===i.value.length)&&!(e.altKey||e.metaKey)&&(e.preventDefault(),this.props.onSpecialKey("Down")):r===es&&!(o&&n!==void 0&&n.predicate())?i.value.length===0&&(e.preventDefault(),this.props.onSpecialKey("Backspace")):r===og&&!(o&&n!==void 0&&n.predicate())&&i.value.length===0&&(e.preventDefault(),this.props.onSpecialKey("Delete")),this.props.onKeydown&&this.props.onKeydown(e)}getPlaceholder(){var e,i;if(!this.props.text())return(i=(e=this.props).placeholder)==null?void 0:i.call(e)}};var Jr=__dcg_shared_module_exports__['h'](j());var dy=class extends Qn{didMount(){this.onItemViewMounted()}willUnmount(){this.onItemViewUnmounted()}template(){return Jr.createElement("div",{class:()=>({"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-readonly":this.controller.isItemReadonly(this.id),"dcg-expressiontext":!0,"dcg-inFolder":!!this.model.folderId,"dcg-selected":!!this.controller.isItemSelected(this.id),"dcg-dragging":!!this.controller.isItemBeingDragged(this.id)}),"expr-id":()=>this.model.id,onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},Jr.createElement("div",{class:Jr.const("dcg-fade-container")},Jr.createElement("div",{class:Jr.const("dcg-main")},Jr.createElement(zc,{shouldFocus:this.bindFn(this.isFocused),text:()=>this.model.text,showLinks:()=>this.controller.areLinksEnabled(),onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey),readonly:()=>this.controller.isInEditListMode()||this.controller.isItemReadonly(this.id),readonlyAction:this.const({predicate:()=>this.controller.isInEditListMode(),action:()=>this.exitEditListMode()}),ariaLabel:()=>Si(this.model,"edit_title"),placeholder:()=>this.controller.s("graphing-calculator-text-note-placeholder")})),Jr.createElement(as,{controller:this.props.controller,model:this.props.model})),Jr.createElement("span",{class:Jr.const("dcg-tab dcg-action-drag"),handleevent:Jr.const("true"),tapboundary:Jr.const("true"),disablescroll:Jr.const("true"),onTapStart:this.bindFn(this.onDragPending)},Jr.createElement("span",{class:Jr.const("dcg-num")},()=>this.model.displayIndex),Jr.createElement("div",{class:Jr.const("dcg-tab-interior")}),Jr.createElement("i",{class:Jr.const("dcg-icon-text"),"aria-hidden":Jr.const("true")})),Jr.createElement(ns,{controller:this.props.controller,id:()=>this.model.id}))}onInput(e){this.controller.dispatch({type:"set-note-text",id:this.id,text:e})}onFocusChange(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"text",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"text",id:this.id}})}onSpecialKey(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})}isFocused(){let e=this.controller.getFocusLocation();return!(!e||e.type!=="text"||e.id!==this.id)}};var lt=__dcg_shared_module_exports__['h'](j());Tt();var gi=__dcg_shared_module_exports__['h'](j());var Bo=__dcg_shared_module_exports__['h'](j());var{SwitchUnion:PW,If:OW}=Bo.Components,py=class extends Bo.Class{init(){this.model=this.props.model(),this.controller=this.props.controller()}template(){return Bo.createElement("div",{class:Bo.const("dcg-table-icon-container")},PW(this.bindFn(this.typeOfIcon),{error:()=>Bo.createElement(Oo,{error:()=>this.controller.unpack(this.model.error),gravity:this.const("s")}),none:()=>Bo.createElement("span",null),icon:()=>Bo.createElement("div",{class:Bo.const("dcg-circular-icon-container"),role:Bo.const("button"),tabindex:Bo.const("0"),"aria-label":this.bindFn(this.getIconAriaLabel),handleevent:Bo.const("true"),"dcg-open-menu-guid":()=>this.getMenuGUID(),onTap:e=>{if(!e.wasHandled("dragdrop")&&!e.wasLongheld()){if(this.myOptionsOpen())return this.toggleOptions();if(this.controller.isInEditListMode()||e.shiftKey)return this.toggleOptions();this.toggleGraphShown()}},onLongHold:e=>{e.handle("dcg-longhold"),e.handle("dcg-tap"),this.toggleOptions()},manageFocus:this.const(Ne({controller:this.controller,location:{type:"table-icon",id:this.model.table.id,columnId:this.model.id}}))},Bo.createElement(Ir,{iconType:this.bindFn(this.getIcon),backgroundColor:this.bindFn(this.getModelColor)}),Bo.createElement(OW,{predicate:()=>this.model.disableGraphInteractions},()=>Bo.createElement("i",{class:Bo.const("dcg-graph-interaction-disabled dcg-icon-lock")})))}))}getModelColor(){return mf(this.model)}getMenuGUID(){return this.model.guid}myOptionsOpen(){return this.controller.isItemSettingsMenuOpen(this.getMenuGUID())}toggleOptions(){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"table-column",model:this.model,guid:this.getMenuGUID(),focusFirstOption:!1}})}toggleGraphShown(){this.controller.dispatch({type:"toggle-tablecolumn-hidden",tableId:this.model.table.id,columnId:this.model.id})}hasError(){return!!this.model.error}getIcon(){return this.model.shouldGraph?this.controller.isInEditListMode()?"none":this.model.points&&this.model.lines?"table-points-and-lines":this.model.points&&!this.model.lines?"table-points":!this.model.points&&this.model.lines?"table-lines":"none":"hidden"}typeOfIcon(){return this.model.latex===""||!this.controller.getGraphSettings().config.graphpaper?"none":this.model.error?"error":this.model.index===0?"none":"icon"}getIconAriaLabel(){return this.myOptionsOpen()?this.controller.s("graphing-calculator-narration-hide-options"):this.controller.isInEditListMode()?this.controller.s("graphing-calculator-narration-show-options"):this.model.shouldGraph?this.controller.s("graphing-calculator-narration-hide-table-column"):this.controller.s("graphing-calculator-narration-show-table-column")}};var{If:uy}=gi.Components,hy=class extends gi.Class{init(){this.model=this.props.model(),this.controller=this.props.controller(),this.table=this.model.table}isRightSide(){return this.lookupCellPosition().column>=this.table.columnModels.length-1}template(){return gi.createElement("div",{class:()=>({"dcg-cell":!0,"dcg-table-header":!0,"dcg-do-not-blur":!0,"dcg-left":this.model.index===0,"dcg-right":this.isRightSide(),"dcg-selected":this.shouldFocus()&&!this.table.readonly,"dcg-error":!!this.model.error,"dcg-leave-space-for-icon":this.leaveSpaceForIcon()}),index:()=>this.model.index,onTapStart:this.bindFn(this.focusThisCell)},gi.createElement("div",{class:gi.const("dcg-inner-border")}),gi.createElement(uy,{predicate:()=>!this.isRightSide()&&(!this.controller.is3dProduct()||!!this.model.error)},()=>gi.createElement(py,{model:this.props.model,controller:this.props.controller})),gi.createElement("div",{role:gi.const("columnheader")},gi.createElement(uy,{predicate:()=>!this.controller.isInEditListMode()&&!this.controller.isItemReadonly(this.table.id)},()=>gi.createElement(tr,__dcg_shared_module_exports__['a']({latex:()=>this.model.latex||"",operatorNames:()=>this.getMQConfig().autoOperatorNames,brailleShouldFocus:this.bindFn(this.shouldFocus),ariaLabel:()=>this.getAriaLabel("braille"),onBrailleInput:e=>this.handleLatexChanged(e),onBrailleFocusedChanged:this.bindFn(this.handleMQFocusedChanged),selectOnFocus:this.const(!0),onBrailleKeydown:this.bindFn(this.handleKeydownOnBrailleInput)},Br(this.props.controller())),gi.createElement(Se,{latex:()=>this.model.latex||"",isFocused:this.bindFn(this.shouldFocus),capExpressionSize:()=>this.controller.getCapExpressionSize(),noFadeout:this.const(!0),config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.getAriaLabel("speech"),getAriaPostLabel:this.bindFn(this.getAriaPostLabel),hasError:this.const(!1),onUserPressedKey:(e,i)=>this.handlePressedKey(e,i),onUserChangedLatex:e=>this.handleLatexChanged(e),onExpressionSizeExceeded:()=>this.controller.dispatch({type:"expression-size-exceeded"}),onFocusedChanged:this.bindFn(this.handleMQFocusedChanged),selectOnFocus:this.const(!0),needsSystemKeypad:()=>!this.controller.isKeypadEnabled()}))),gi.createElement(uy,{predicate:()=>this.controller.isInEditListMode()||this.controller.isItemReadonly(this.table.id)},()=>gi.createElement(tr,__dcg_shared_module_exports__['a']({latex:()=>this.model.latex||"",operatorNames:()=>this.getMQConfig().autoOperatorNames,ariaLabel:()=>this.getAriaLabel("braille"),onBrailleInput:e=>this.handleLatexChanged(e),tabindex:this.const(-1),isStatic:this.const(!0),brailleShouldFocus:this.bindFn(this.shouldFocusReadonlyCell),onBrailleFocusedChanged:this.bindFn(this.handleMQFocusedChanged)},Br(this.props.controller())),gi.createElement(Te,{latex:()=>this.model.latex||"",config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.getAriaLabel("speech")},gi.createElement("span",{class:gi.const("dcg-math-field dcg-cell-math-content"),role:gi.const("textbox"),"aria-readonly":gi.const("true"),tabindex:()=>this.controller.isInEditListMode()?-1:0,onKeyDown:this.bindFn(this.handleKeydownOnReadonlyCell),manageFocus:this.const({shouldBeFocused:this.bindFn(this.shouldFocusReadonlyCell),onFocusedChanged:this.bindFn(this.handleFocusedChanged)})})))),gi.createElement(uy,{predicate:()=>this.model.dragMode!=="NONE"&&!this.model.error},()=>gi.createElement("span",{class:gi.const("dcg-drag-icon"),"dcg-drag-mode":()=>this.model.dragMode,style:()=>({color:this.model.color})},gi.createElement("i",{class:()=>({"dcg-icon-move":this.model.dragMode==="XY","dcg-icon-move-horizontal":this.model.dragMode==="X","dcg-icon-move-vertical":this.model.dragMode==="Y"}),"aria-hidden":gi.const("true")})))),gi.createElement("div",{class:gi.const("dcg-empty-line")}),gi.createElement(uy,{predicate:()=>this.isRightSide()},()=>gi.createElement("span",{class:gi.const("dcg-fade-right")})))}leaveSpaceForIcon(){if(this.model.error||this.controller.is3dProduct())return!1;let{column:e}=this.lookupCellPosition(),i=Qm(this.table);return e>0&&e<i-1}focusThisCell(e){e.wasHandled()||(e.handle(),!this.controller.isItemReadonly(this.table.id)&&(this.shouldFocus()||this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})))}handleFocusedChanged(e,i){e?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.isNodeWithinTableCell(i.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})}lookupCellPosition(){return{row:0,column:this.model.index}}getAriaLabel(e){var i=this.lookupCellPosition();return e==="speech"?this.controller.s("graphing-calculator-narration-table-column-header",{column:i.column+1}):this.controller.raw("h__column__",{column:i.column+1})}getAriaPostLabel(){let e="",i=this.model;return i.shouldGraph&&(i.points||i.lines)&&!mV(i)&&(e=this.controller.s("graphing-calculator-narration-expression-evaluation-has-graph"),Rr?e+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-mac"):e+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-windows")),e}handlePressedKey(e,i){var r=Se.getFocusedMathquill();r&&(Se.handleKeystrokeAndDecideIfSpecialEvent(r,e,i)?this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:e}):this.handleLatexChanged(r.latex()))}handleKeydownOnBrailleInput(e){let i=be(e);if(!i)return;let r=i==="Enter"||i==="Up"||i==="Down",o=Xn(),n=o&&i==="Left"&&o.selectionStart===0||i==="Right"&&o.selectionStart===o.value.length,a=this.model.latex.length===0&&qg(o);(r||n||(i==="Del"||i==="Backspace")&&a)&&(this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:i==="Del"?"Delete":i}),e.preventDefault())}handleKeydownOnReadonlyCell(e){let i=be(e);i!=="Tab"&&(e.preventDefault(),i==="Esc"&&Ri(),i&&this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:i}))}handleLatexChanged(e){var i=this.model.latex;i!==e&&this.controller.dispatch({type:"set-tablecell-latex",tableId:this.table.id,cell:this.lookupCellPosition(),latex:e})}shouldFocus(){return!this.controller.isInEditListMode()&&__dcg_shared_module_exports__['Ra'](this.lookupCellPosition(),Cn(this.table))}shouldFocusReadonlyCell(){return __dcg_shared_module_exports__['Ra'](this.lookupCellPosition(),Cn(this.table))}isNodeWithinTableCell(e){if(!e||!e.closest(".dcg-cell"))return!1;var i=this.controller.getItemRootNodeById(this.table.id);return i?H.contains(i,e):!1}handleMQFocusedChanged(e,i){e?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.isNodeWithinTableCell(i.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})}getMQConfig(){return this.controller.getMathquillConfig({})}};var rr=__dcg_shared_module_exports__['h'](j());Tt();var{If:uM}=rr.Components,gy=class extends rr.Class{init(){this.column=this.props.column(),this.controller=this.props.controller(),this.table=this.column.table}template(){return rr.createElement("div",{class:()=>({"dcg-cell":!0,"dcg-do-not-blur":!0,"dcg-empty":this.isEmpty(),"dcg-non-editable":!!this.column.disabled,"dcg-error":!!this.hasError(),"dcg-selected":this.shouldFocus()&&!this.controller.isItemReadonly(this.table.id)}),onTapStart:this.bindFn(this.focusThisCell)},rr.createElement("div",{class:rr.const("dcg-inner-border")}),rr.createElement("div",{role:rr.const("gridcell")},rr.createElement(uM,{predicate:this.bindFn(this.hasError)},()=>rr.createElement("span",{class:rr.const("dcg-table-icon-error-container")},rr.createElement(Oo,{error:this.bindFn(this.getErrorMessage),gravity:this.const("s"),size:this.const("small")}))),rr.createElement(uM,{predicate:()=>!this.isColumnEditable()},()=>rr.createElement(tr,__dcg_shared_module_exports__['a']({latex:()=>this.getValue(),operatorNames:()=>this.getMQConfig().autoOperatorNames,brailleShouldFocus:this.bindFn(this.shouldFocusReadonlyCell),ariaLabel:()=>this.getAriaLabel("braille"),tabindex:()=>this.controller.isInEditListMode()?-1:0,isStatic:this.const(!0),onBrailleFocusedChanged:this.bindFn(this.handleFocusedChanged),onBrailleKeydown:e=>(this.handleKeydownOnReadonlyCell(e),!0)},Br(this.props.controller())),rr.createElement(Te,{getAriaLabel:()=>this.getAriaLabel("speech"),latex:()=>this.getValue(),config:this.bindFn(this.getMQConfig)},rr.createElement("span",{class:rr.const("dcg-math-field dcg-cell-math-content dcg-mathquill-input-span"),role:rr.const("textbox"),"aria-roledescription":()=>this.column.disabled?this.controller.s("graphing-calculator-narration-computed-cell-role-description"):void 0,"aria-readonly":rr.const("true"),tabindex:()=>!this.controller.isInEditListMode()&&(!this.isEmpty()||!this.column.disabled)?0:-1,onKeyDown:this.bindFn(this.handleKeydownOnReadonlyCell),manageFocus:this.const({shouldBeFocused:this.bindFn(this.shouldFocusReadonlyCell),onFocusedChanged:this.bindFn(this.handleFocusedChanged)})})))),rr.createElement(uM,{predicate:this.bindFn(this.isColumnEditable)},()=>rr.createElement(tr,__dcg_shared_module_exports__['a']({latex:()=>this.getValue(),operatorNames:()=>this.getMQConfig().autoOperatorNames,brailleShouldFocus:this.bindFn(this.shouldFocusEditableCell),ariaLabel:()=>this.getAriaLabel("braille"),onBrailleInput:e=>this.handleLatexChanged(e),onBrailleFocusedChanged:this.bindFn(this.handleFocusedChanged),onBrailleKeydown:this.bindFn(this.handleKeydownOnBrailleInput),selectOnFocus:this.const(!0)},Br(this.props.controller())),rr.createElement(Se,{latex:()=>this.getValue(),isFocused:this.bindFn(this.shouldFocusEditableCell),capExpressionSize:()=>this.controller.getCapExpressionSize(),noFadeout:this.const(!0),config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.getAriaLabel("speech"),getAriaPostLabel:this.bindFn(this.getErrorMessage),hasError:this.const(!1),onUserPressedKey:(e,i)=>this.handlePressedKey(e,i),onUserChangedLatex:e=>this.handleLatexChanged(e),onExpressionSizeExceeded:()=>this.controller.dispatch({type:"expression-size-exceeded"}),onFocusedChanged:this.bindFn(this.handleFocusedChanged),selectOnFocus:this.const(!0),needsSystemKeypad:()=>!this.controller.isKeypadEnabled()})))),rr.createElement("div",{class:rr.const("dcg-empty-line")}))}focusThisCell(e){e.wasHandled()||this.controller.isItemReadonly(this.table.id)||(e.handle(),!this.shouldFocus()&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}))}handlePressedKey(e,i){var r=Se.getFocusedMathquill();if(r){let o=Se.handleKeystrokeAndDecideIfSpecialEvent(r,e,i);e===Yo&&Ri(),o?this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:e}):this.handleLatexChanged(r.latex())}}handleKeydownOnBrailleInput(e){let i=be(e);if(!i)return;i===Yo&&Ri();let r=i==="Enter"||i==="Up"||i==="Down",o=Xn(),n=o&&i==="Left"&&o.selectionStart===0||i==="Right"&&o.selectionStart===o.value.length;(r||n||(i==="Del"||i==="Backspace")&&this.getValue().length===0)&&(this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:i==="Del"?"Delete":i}),e.preventDefault())}handleKeydownOnReadonlyCell(e){let i=be(e);i!=="Tab"&&(e.preventDefault(),i==="Esc"&&Ri(),i&&this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:i}))}handleLatexChanged(e){var i=this.getValue();i!==e&&this.controller.dispatch({type:"set-tablecell-latex",tableId:this.table.id,cell:this.lookupCellPosition(),latex:e})}shouldFocus(){return __dcg_shared_module_exports__['Ra'](this.lookupCellPosition(),Cn(this.table))}shouldFocusReadonlyCell(){return!this.controller.isInEditListMode()&&(this.controller.isItemReadonly(this.table.id)||!!this.column.disabled)&&this.shouldFocus()}shouldFocusEditableCell(){return!this.column.disabled&&this.shouldFocus()}isNodeWithinTableCell(e){if(!e||!e.closest(".dcg-cell"))return!1;var i=this.controller.getItemRootNodeById(this.table.id);return i?H.contains(i,e):!1}handleFocusedChanged(e,i){e?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.isNodeWithinTableCell(i.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})}lookupCellPosition(){return{row:this.props.rowIdx(),column:this.column.index}}getPackedError(){return this.column.packedErrors[this.props.rowIdx()-1]}hasError(){return!!this.getPackedError()}getErrorMessage(){let e=this.getPackedError();return e?this.controller.unpack(e):""}getValue(){let e=this.props.rowIdx()-1,i=this.column.index;return tw(this.table,e,i)}isEmpty(){let e=Xn();return this.getValue()===""&&qg(e)}getAriaLabel(e){var i=this.lookupCellPosition(),r=i.row,o=i.column+1;return e==="speech"?this.controller.s("graphing-calculator-narration-table-row-column",{row:r.toString(),column:o.toString()}):this.controller.raw("r__row__c__column__",{row:r.toString(),column:o.toString()})}isColumnEditable(){return!this.column.disabled&&!this.controller.isItemReadonly(this.table.id)&&!this.controller.isInEditListMode()}getMQConfig(){return this.controller.getMathquillConfig({})}};Tt();var{For:hM}=lt.Components,my=class extends Qn{didMount(){this.onItemViewMounted()}willUnmount(){this.onItemViewUnmounted()}template(){return lt.createElement("div",{class:()=>({"dcg-expressionitem":!0,"dcg-expressiontable":!0,"dcg-readonly":this.controller.isItemReadonly(this.id),"dcg-inFolder":!!this.model.folderId,"dcg-selected":!!this.controller.isItemSelected(this.id),"dcg-dragging":!!this.controller.isItemBeingDragged(this.id),"dcg-faded-h":this.shouldFadeLastColumn(),"dcg-faded-v":this.shouldFadeLastRow()}),"expr-id":()=>this.model.id,didMount:this.bindFn(this.didMountContainer),onKeydown:this.bindFn(this.onKeydown)},lt.createElement("div",{class:lt.const("dcg-fade-container dcg-disable-horizontal-scroll-to-cursor")},lt.createElement("div",{class:lt.const("dcg-main")},lt.createElement("div",{class:lt.const("dcg-table-container"),tabindex:()=>this.controller.isInEditListMode()?0:-1,"aria-label":()=>this.controller.getBrailleMode()==="none"?this.controller.s("graphing-calculator-narration-expression-index-table",{index:this.model.displayIndex}):this.controller.s("graphing-calculator-narration-expression-index-table",{index:this.model.displayIndex}),didMount:this.bindFn(this.didMountContainer),manageFocus:this.const({shouldBeFocused:this.shouldBeFocused.bind(this),onFocusedChanged:this.onFocusedChanged.bind(this)})},lt.createElement("div",{class:lt.const("dcg-table-sliding-container"),style:()=>({transform:`translateX(${this.computeScrolledX()}px)`})},lt.createElement(hM,{each:()=>this.getVisibleRows(),key:e=>this.getRowGUID(e)},lt.createElement("div",{role:lt.const("grid"),class:lt.const("dcg-tabledata")},e=>e.type==="show-more"?lt.createElement("tr",{role:lt.const("row"),class:lt.const("dcg-show-more-row")},lt.createElement("td",{colspan:this.bindFn(this.getColSpan)},this.bindFn(this.missingRowMessage),lt.createElement("div",{tabindex:lt.const(0),role:lt.const("button"),class:lt.const("dcg-show-more"),onTap:()=>this.controller.dispatch({type:"table-show-more-rows",id:this.id})},()=>this.controller.s("graphing-calculator-button-show-all-table-rows")))):e.type==="spacer-row"?lt.createElement("tr",{role:lt.const("row"),class:lt.const("dcg-blank-row")},lt.createElement("td",{colspan:this.bindFn(this.getColSpan),style:()=>({height:(e.endIdx-e.startIdx+1)*this.getRowHeight()+"px"})})):e.type==="header"?lt.createElement(hM,{each:()=>this.model.columnModels,key:i=>i.guid},lt.createElement("tr",{role:lt.const("row"),"aria-rowindex":lt.const(0),class:()=>({"dcg-row":e,"dcg-braille-row":this.controller.getBrailleMode()!=="none"})},i=>lt.createElement(hy,{controller:this.props.controller,model:this.const(i)}))):lt.createElement(hM,{each:()=>this.model.columnModels,key:i=>i.guid},lt.createElement("tr",{role:lt.const("row"),"aria-rowindex":()=>e.index,class:()=>({"dcg-row":e,"dcg-braille-row":this.controller.getBrailleMode()!=="none"})},i=>lt.createElement(gy,{controller:this.props.controller,column:this.const(i),rowIdx:()=>e.index})))))))),lt.createElement(as,{controller:this.props.controller,model:this.props.model})),lt.createElement("span",{class:lt.const("dcg-tab dcg-action-drag"),handleevent:lt.const("true"),tapboundary:lt.const("true"),disablescroll:lt.const("true"),onTapStart:this.bindFn(this.onDragPending)},lt.createElement("span",{class:lt.const("dcg-num")},()=>this.model.displayIndex),lt.createElement("div",{class:lt.const("dcg-tab-interior")}),lt.createElement(Hg,{model:this.props.model,controller:this.props.controller})),lt.createElement(ns,{controller:this.props.controller,id:()=>this.model.id}))}getRowGUID(e){switch(e.type){case"header":return"header";case"show-more":return"show-more";case"spacer-row":return`spacer-${e.startIdx}-${e.endIdx}`;case"standard-row":return`row-${e.index}`}}getColSpan(){return this.model.columnModels.length-1}getRowHeight(){return this.controller.getGraphSettings().config.projectorMode?38:33}getVisibleRows(){var m,w,C;let e=[{type:"header"}],i=ja(this.model)+1;if(i<=25){for(let S=1;S<i;S++)e.push({type:"standard-row",index:S});return e}let r=Ep(this.model);if(r!==void 0){for(let S=1;S<r.min;S++)e.push({type:"standard-row",index:S});e.push({type:"show-more"});for(let S=r.max;S<i;S++)e.push({type:"standard-row",index:S});return e}let o=jb(this.controller),n=o?o.height:0,a=H(this.node).offset(),s=(a?a.top:0)-(o?o.top:0),l=(C=(w=(m=this.node)==null?void 0:m.querySelector(".dcg-row"))==null?void 0:w.getBoundingClientRect().height)!=null?C:0,c=this.getRowHeight();if(n/c>i){for(let S=1;S<i;S++)e.push({type:"standard-row",index:S});return e}let p=(-s-l)/c,u=(n-s)/c;for(var g=1;g<i;g++){let S=Cn(this.model);if(g===i-2||S&&S.row===g)e.push({type:"standard-row",index:g});else if(g>u||g<p){let k=e[e.length-1];k&&k.type==="spacer-row"?k.endIdx=g:e.push({type:"spacer-row",startIdx:g,endIdx:g})}else e.push({type:"standard-row",index:g})}return e}missingRowMessage(){let e=Ep(this.model);return e===void 0?"":this.controller.s("graphing-calculator-text-table-more-rows",{rowCount:e.max-e.min})}didMountContainer(e){this.node=e,H(e).on("scroll",()=>e.scrollLeft=0)}getSelectedCell(){return Cn(this.model)}computeScrolledX(){if(!this.getSelectedCell()||!this.node)return 0;let e=this.node.children[0],i=this.node.querySelector(".dcg-selected");if(e===null||i===null)return 0;let r=this.node.getBoundingClientRect(),o=i.getBoundingClientRect(),n=o.left-e.getBoundingClientRect().left,a=r.width-n-o.width-80,s=Math.min(0,r.width-e.scrollWidth-30);return a=Math.max(a,s),Math.min(0,a)}shouldFadeLastRow(){return bV(this.model)&&!this.isBottomFocused()}shouldFadeLastColumn(){return!this.isRightFocused()}isBottomFocused(){let e=this.getSelectedCell();return!!e&&e.row===ja(this.model)}isRightFocused(){let e=this.getSelectedCell();return!!e&&e.column===this.model.columnModels.length-1}isReadonly(){return this.controller.isItemReadonly(this.id)}isFocused(){return!!this.getSelectedCell()}onKeydown(e){this.controller.isInEditListMode()||e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey&&(be(e)==="Up"?(e.preventDefault(),e.stopPropagation(),this.moveToFirstCellInColumn()):be(e)==="Down"?(e.preventDefault(),e.stopPropagation(),this.moveToLastCellInColumn()):be(e)==="Left"?(e.preventDefault(),e.stopPropagation(),this.moveToFirstCellInRow()):be(e)==="Right"?(e.preventDefault(),e.stopPropagation(),this.moveToLastCellInRow()):Dr(e)==="H"&&(e.preventDefault(),e.stopPropagation(),this.speakColumnHeader()))}moveToFirstCellInColumn(){let e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:0,column:e.column}}})}moveToLastCellInColumn(){let e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:ja(this.model),column:e.column}}})}moveToFirstCellInRow(){let e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:e.row,column:0}}})}moveToLastCellInRow(){let e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:e.row,column:ja(this.model)-1}}})}speakColumnHeader(){let e=this.controller.s("graphing-calculator-narration-table-no-column-header"),i=this.getSelectedCell();if(i){let r=this.model.columnModels[i.column].latex;r&&(e=hl.StaticMath(document.createElement("span")).latex(r).mathspeak())}le(e)}focusHelperOptions(){return{controller:this.controller,location:{type:"table-container",id:this.model.id}}}shouldBeFocused(){return Up(this.focusHelperOptions())}onFocusedChanged(e){if(this.controller.isInEditListMode())return fI(this.focusHelperOptions(),e)}};var li=__dcg_shared_module_exports__['h'](j());var fy=class extends Qn{didMount(){this.onItemViewMounted()}willUnmount(){this.onItemViewUnmounted()}template(){return li.createElement("div",{class:()=>({"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-readonly":this.controller.isItemReadonly(this.id),"dcg-expressionfolder":!0,"dcg-inFolder":!1,"dcg-selected":this.renderAsSelected(),"dcg-dragging":!!this.controller.isItemBeingDragged(this.id),"dcg-collapsed":!!this.model.collapsed,"dcg-hidden":!!this.model.hidden,"dcg-has-items":this.controller.getNumberOfItemsInFolder(this.id)>0,"dcg-secretFolder":this.model.secret&&!this.controller.shouldShowAuthorFeatures()}),"expr-id":()=>this.model.id,onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},li.createElement("div",{class:li.const("dcg-fade-container")},li.createElement("div",{class:li.const("dcg-main")},li.createElement("div",{role:li.const("button"),tabindex:li.const("0"),"aria-pressed":()=>this.model.collapsed,"aria-label":()=>this.model.collapsed?Si(this.model,"expand"):Si(this.model,"collapse"),class:li.const("dcg-caret-container dcg-action-toggle-folder-collapsed dcg-do-not-blur"),handleEvent:li.const("true"),onTap:this.bindFn(this.toggleCollapsed)},li.createElement("i",{class:li.const("dcg-icon-caret-down"),"aria-hidden":li.const("true")})),li.createElement(zc,{shouldFocus:this.bindFn(this.isFocused),text:()=>this.model.title,showLinks:()=>this.controller.areLinksEnabled(),onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey),ariaLabel:this.bindFn(this.getAriaLabel),readonly:()=>this.controller.isInEditListMode()||this.controller.isItemReadonly(this.id),readonlyAction:this.const({predicate:()=>this.controller.isInEditListMode(),action:()=>this.exitEditListMode()}),placeholder:()=>this.controller.s("graphing-calculator-text-folder-placeholder")}),li.createElement($e,{checked:()=>this.model.secret,class:this.const("dcg-action-toggle-secret-folder dcg-do-not-blur"),style:()=>({display:this.controller.shouldShowAuthorFeatures()?void 0:"none"}),onChange:this.bindFn(this.toggleSecret)},li.createElement("span",{class:li.const("dcg-checkbox-label")},()=>this.controller.s("graphing-calculator-button-hide-folder-from-students-2")))),li.createElement(as,{controller:this.props.controller,model:this.props.model})),li.createElement("span",{class:li.const("dcg-tab dcg-action-drag"),handleevent:li.const("true"),tapboundary:li.const("true"),disablescroll:li.const("true"),onTapStart:this.bindFn(this.onDragPending)},li.createElement("span",{class:li.const("dcg-num")},()=>this.model.displayIndex),li.createElement("div",{class:li.const("dcg-tab-interior")},li.createElement("span",{role:li.const("button"),tabindex:li.const("0"),"aria-pressed":()=>!!this.model.hidden,"aria-label":()=>this.model.hidden?Si(this.model,"show"):Si(this.model,"hide"),class:li.const("dcg-circular-icon-container dcg-expression-icon-container"),onTap:this.bindFn(this.toggleHidden)},li.createElement(Ir,{iconType:()=>this.model.hidden?"hidden":"folder",whiteIcon:()=>this.renderAsSelected()||this.controller.isItemBeingDragged(this.model.id)})))),li.createElement(ns,{controller:this.props.controller,id:()=>this.model.id}))}renderAsSelected(){return this.controller.isItemSelected(this.model.id)||this.model.collapsedChildIsSelected}toggleHidden(){this.controller.dispatch({type:"toggle-item-hidden",id:this.id})}toggleSecret(){this.controller.dispatch({type:"set-item-secret",id:this.id,isSecret:!this.model.secret})}toggleCollapsed(){this.controller.dispatch({type:"set-folder-collapsed",id:this.id,isCollapsed:!this.model.collapsed})}onInput(e){this.controller.dispatch({type:"set-folder-title",id:this.id,title:e})}onFocusChange(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"folder",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"folder",id:this.id}})}onSpecialKey(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})}isFocused(){let e=this.controller.getFocusLocation();return!(!e||e.type!=="folder"||e.id!==this.id)}getAriaLabel(){let e="",i="";switch((this.model.hidden?1:0)+(this.model.collapsed?16:0)+(this.model.secret?256:0)+(this.model.readonly?4096:0)){case 0:i=this.controller.s("graphing-calculator-narration-description-folder");break;case 1:i=this.controller.s("graphing-calculator-narration-description-hidden-folder");break;case 16:i=this.controller.s("graphing-calculator-narration-description-collapsed-folder");break;case 256:i=this.controller.s("graphing-calculator-narration-description-secret-folder");break;case 4096:i=this.controller.s("graphing-calculator-narration-description-readonly-folder");break;case 1+16:i=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-folder");break;case 1+256:i=this.controller.s("graphing-calculator-narration-description-hidden-secret-folder");break;case 1+4096:i=this.controller.s("graphing-calculator-narration-description-hidden-readonly-folder");break;case 256+16:i=this.controller.s("graphing-calculator-narration-description-collapsed-secret-folder");break;case 256+4096:i=this.controller.s("graphing-calculator-narration-description-secret-readonly-folder");break;case 16+4096:i=this.controller.s("graphing-calculator-narration-description-collapsed-readonly-folder");break;case 1+256+16:i=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-secret-folder");break;case 1+16+4096:i=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-readonly-folder");break;case 1+256+4096:i=this.controller.s("graphing-calculator-narration-description-hidden-secret-readonly-folder");break;case 16+256+4096:i=this.controller.s("graphing-calculator-narration-description-collapsed-secret-readonly-folder");break;case 1+16+256+4096:i=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-secret-readonly-folder");break}let c=this.controller.getNumberOfItemsInFolder(this.id);return c>0?e=this.controller.s("graphing-calculator-narration-folder-has-items",{folder:i,count:c}):e=i,e}};var Ae=__dcg_shared_module_exports__['h'](j());function WS(t){let e=document.createElement("a");return e.href=t,e.href}var Ko=__dcg_shared_module_exports__['h'](j());var{SwitchUnion:_W,If:FW}=Ko.Components,mu=class extends Ko.Class{init(){this.model=this.props.model(),this.controller=this.props.controller()}template(){return Ko.createElement("div",{class:Ko.const("dcg-expression-icon-container dcg-image-icon-container")},_W(this.bindFn(this.typeOfIcon),{error:()=>Ko.createElement(Oo,{error:()=>this.controller.unpack(this.model.error),isWhite:this.bindFn(this.isSelected),gravity:this.const("s")}),failed:()=>Ko.createElement("span",null),loading:()=>Ko.createElement(Ir,{iconType:this.const("loading")}),hidden:()=>this.buildIconView(),image:()=>this.buildIconView()}))}buildIconView(){return Ko.createElement("div",{class:Ko.const("dcg-circular-icon-container"),role:Ko.const("button"),tabindex:Ko.const("0"),"dcg-open-menu-guid":()=>this.getMenuGUID(),"aria-label":this.bindFn(this.getIconAriaLabel),onTap:e=>{if(!e.wasHandled("dragdrop")&&!e.wasLongheld()){if(this.myOptionsOpen())return this.toggleOptions(e);if(this.controller.isInEditListMode()||e.shiftKey)return this.toggleOptions(e);this.toggleImageShown()}},onLongHold:e=>{e.handle("dcg-longhold"),e.handle("dcg-tap"),this.toggleOptions(e)},manageFocus:this.const(Ne({controller:this.controller,location:{type:"image-icon",id:this.model.id}}))},Ko.createElement(Ir,{iconType:()=>this.typeOfIcon()==="hidden"?"hidden":"background",backgroundImage:this.bindFn(this.getBackgroundImage),backgroundOpacity:this.const(1),whiteIcon:this.bindFn(this.isSelected)}),Ko.createElement(FW,{predicate:()=>this.model.disableGraphInteractions},()=>Ko.createElement("i",{class:Ko.const("dcg-graph-interaction-disabled dcg-icon-lock")})))}isSelected(){return this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)}typeOfIcon(){return this.model.loadStatus==="loading"?"loading":this.model.loadStatus==="failed"?"failed":this.hasError()?"error":this.model.shouldGraph?"image":"hidden"}getMenuGUID(){return this.model.guid}myOptionsOpen(){return this.controller.isItemSettingsMenuOpen(this.getMenuGUID())}toggleOptions(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"image",model:this.model,guid:this.getMenuGUID(),focusFirstOption:e.device==="keyboard"}})}hasError(){return!!this.model.error&&this.controller.getBrailleMode()==="none"}getBackgroundImage(){return this.model.image_url===this.lastURL?this.lastEncodedURL:(this.lastURL=this.model.image_url,this.lastEncodedURL='url("'+WS(this.model.image_url)+'")',this.lastEncodedURL)}toggleImageShown(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id}),this.controller.dispatch({type:"set-focus-location",location:{type:"image-icon",id:this.model.id}})}getIconAriaLabel(){return this.myOptionsOpen()?Si(this.model,"hide-options"):this.controller.isInEditListMode()?Si(this.model,"show-options"):this.model.hidden?Si(this.model,"show"):Si(this.model,"hide")}};var ss=__dcg_shared_module_exports__['h'](j());Tt();var Uc=class extends ss.Class{init(){this.controller=this.props.controller()}template(){return ss.createElement("div",{class:ss.const("dcg-do-not-blur"),onTap:this.bindFn(this.newImage),handleEvent:ss.const("true"),role:ss.const("button"),tabindex:()=>this.props.readonly()?-1:0,"aria-label":this.props.ariaLabel,"aria-disabled":()=>this.props.readonly(),manageFocus:this.const(this.props.location?Ne({controller:this.controller,location:this.props.location()}):void 0)},this.children,ss.createElement("input",{type:ss.const("file"),accept:ss.const("image/*"),style:ss.const("display: none"),didMount:this.bindFn(this.didMountFileInput)}))}didMountFileInput(e){this.fileInputNode=e,H(e).on("change",()=>{this.props.onFileChange(e.files),e.value=""})}newImage(){this.props.readonly()||this.fileInputNode.click()}};var{If:by,SwitchUnion:RW}=Ae.Components,fu=class extends Ae.Class{init(){this.model=this.props.model(),this.controller=this.props.controller()}template(){return Ae.createElement(Lt,{containerClass:()=>({"dcg-image-input-mathquill":!0,"dcg-suffix-degree":this.props.name()==="angle"&&this.props.controller().getGraphSettings().degreeMode,"dcg-suffix-radian":this.props.name()==="angle"&&!this.props.controller().getGraphSettings().degreeMode}),fontSize:this.const("large"),fullWidth:this.const(!0),readonly:this.props.readonly,latex:()=>this.model[this.props.name()],isFocused:()=>this.props.focusedInput()===this.props.name(),ariaLabel:()=>this.controller.raw(this.props.name()),handleFocusChanged:this.bindFn(this.handleMQFocusedChanged),hasError:()=>NV(this.model,this.props.name()),controller:this.props.controller,handlePressedKey:this.bindFn(this.handlePressedKey),handleLatexChanged:this.bindFn(this.handleLatexChanged),noBorder:()=>!this.props.focusedInput()})}getInputs(){return["center","width","angle","height","opacity"]}handlePressedKey(e,i){let r=this.props.name();var o=Se.getFocusedMathquill();let n=this.getInputs(),a=n.indexOf(r);if(!this.controller.isInEditListMode()){if(e==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});if(e==="Esc"){Ri();return}}let s=-1;e==="Up"&&(s=a===1?4:a-2),e==="Down"&&(s=a===4?1:a+2),e==="Left"&&(s=a-1),e==="Right"&&(s=a+1);let l=e;if(s>=0&&s<n.length){let c=!1;if(o)c=Se.applyArrowKeyAndReturnIfWasAtBounds(o,l,i);else if(e==="Up"||e==="Down")c=!0;else{let p=Xn();c=p&&(e==="Left"&&p.selectionStart===0||e==="Right"&&p.selectionStart===p.value.length)}c&&(this.focusInput(n[s]),i&&i.preventDefault());return}o&&(o.keystroke(e,i),this.handleLatexChanged(o.latex()))}focusInput(e){this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.model.id,location:e}})}handleLatexChanged(e){let i=this.props.name();this.model.draggingOnGraphpaper||AV(this.model,i)!==e&&this.controller.dispatch({type:"set-image-mq-attribute",id:this.model.id,attribute:i,latex:e})}handleMQFocusedChanged(e){let i=this.props.name();e?this.props.focusedInput()!==i&&this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.model.id,location:i}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"image",id:this.model.id,location:i}})}},yy=class extends Qn{didMount(){this.onItemViewMounted()}willUnmount(){this.onItemViewUnmounted()}template(){return Ae.createElement("div",{class:()=>({"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-readonly":this.controller.isItemMarkedReadonly(this.id),"dcg-expressionimage":!0,"dcg-inFolder":!!this.model.folderId,"dcg-selected":this.controller.isItemSelected(this.id),"dcg-dragging":!!this.controller.isItemBeingDragged(this.id),"dcg-input-focused":this.getFocusedInput()&&this.getFocusedInput()!=="name"}),"expr-id":()=>this.model.id,onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},Ae.createElement("div",{class:Ae.const("dcg-fade-container")},Ae.createElement("div",{class:Ae.const("dcg-main")},RW(()=>this.model.loadStatus,{failed:()=>Ae.createElement("div",null,Ae.createElement("div",{class:Ae.const("dcg-image-failed")},()=>this.controller.s("graphing-calculator-error-failed-to-load-image")),Ae.createElement("div",{role:Ae.const("button"),tabindex:Ae.const(0),class:Ae.const("dcg-retry-loading-image"),onTap:this.bindFn(this.onRetryLoad)},()=>this.controller.s("graphing-calculator-button-load-image-retry"))),loading:()=>Ae.createElement("div",null,Ae.createElement("div",{class:Ae.const("dcg-image-loading")},()=>this.controller.s("graphing-calculator-text-loading-image")),Ae.createElement("div",{role:Ae.const("button"),tabindex:Ae.const(0),class:Ae.const("dcg-retry-loading-image"),onTap:this.bindFn(this.onRetryLoad)},()=>this.controller.s("graphing-calculator-button-load-image-retry"))),loaded:()=>Ae.createElement("div",{class:Ae.const("dcg-image-loaded")},Ae.createElement("div",{class:Ae.const("dcg-image-title-row")},Ae.createElement(zc,{shouldFocus:()=>this.getFocusedInput()==="name",text:()=>this.model.name,ariaLabel:()=>Si(this.model,"edit_title"),placeholder:()=>this.controller.s("graphing-calculator-text-image-placeholder"),showLinks:()=>this.controller.areLinksEnabled(),onInput:this.bindFn(this.onNameInput),onFocusChange:this.bindFn(this.onNameFocusChange),onSpecialKey:this.bindFn(this.onNameSpecialKey),readonly:()=>this.controller.isInEditListMode()||this.isReadonly()}),Ae.createElement(by,{predicate:()=>this.controller.areImagesEnabled()},()=>Ae.createElement(Uc,{controller:()=>this.controller,ariaLabel:()=>this.controller.s("graphing-calculator-button-change-image"),onFileChange:e=>this.insertFiles(e),location:this.const({type:"change-image-btn",id:this.id}),readonly:this.bindFn(this.isReadonly)},Ae.createElement(by,{predicate:()=>!this.isReadonly()},()=>Ae.createElement("div",{class:Ae.const("dcg-action-changeimage")},()=>this.controller.s("graphing-calculator-button-change-image")))))),Ae.createElement("div",{class:()=>({"dcg-do-blur":!0,"dcg-image-input-grid":!0}),handleEvent:Ae.const("true")},Ae.createElement("div",{class:Ae.const("dcg-image-input-name")},()=>this.controller.s("graphing-calculator-label-image-center")),Ae.createElement(fu,{name:this.const("center"),controller:()=>this.controller,model:()=>this.model,focusedInput:this.bindFn(this.getFocusedInput),readonly:this.bindFn(this.isReadonly)}),Ae.createElement("div",{class:Ae.const("dcg-image-input-name")},()=>this.controller.s("graphing-calculator-label-image-width")),Ae.createElement(fu,{name:this.const("width"),controller:()=>this.controller,model:()=>this.model,focusedInput:this.bindFn(this.getFocusedInput),readonly:this.bindFn(this.isReadonly)}),Ae.createElement("div",{class:Ae.const("dcg-image-input-name")},()=>this.controller.s("graphing-calculator-label-image-angle")),Ae.createElement(fu,{name:this.const("angle"),controller:()=>this.controller,model:()=>this.model,focusedInput:this.bindFn(this.getFocusedInput),readonly:this.bindFn(this.isReadonly)}),Ae.createElement("div",{class:Ae.const("dcg-image-input-name")},()=>this.controller.s("graphing-calculator-label-image-height")),Ae.createElement(fu,{name:this.const("height"),controller:()=>this.controller,model:()=>this.model,focusedInput:this.bindFn(this.getFocusedInput),readonly:this.bindFn(this.isReadonly)}),Ae.createElement("div",{class:Ae.const("dcg-image-input-name")},()=>this.controller.s("graphing-calculator-label-image-opacity")),Ae.createElement(fu,{name:this.const("opacity"),controller:()=>this.controller,model:()=>this.model,focusedInput:this.bindFn(this.getFocusedInput),readonly:this.bindFn(this.isReadonly)})))})),Ae.createElement("span",{class:Ae.const("dcg-fadeout")}),Ae.createElement(as,{controller:this.props.controller,model:this.props.model}),Ae.createElement(by,{predicate:this.bindFn(this.shouldShowBrailleError)},()=>Ae.createElement("div",{class:this.getFooterClass()},Ae.createElement("div",{tabindex:Ae.const(0),class:Ae.const("dcg-expression-braille-error"),"aria-roledescription":Ae.const("error"),"aria-label":()=>this.controller.unpack(this.model.error)},Ae.createElement("i",{class:Ae.const("dcg-icon-error"),"aria-hidden":Ae.const("true")}),()=>this.controller.unpack(this.model.error)))),Ae.createElement(by,{predicate:()=>cw(this.model).length>0&&this.controller.areSlidersEnabled()},()=>Ae.createElement("div",{class:this.getFooterClass()},Ae.createElement($s,{model:this.props.model,controller:this.props.controller}))),Ae.createElement(by,{predicate:this.bindFn(this.shouldShowActionInfo)},()=>Ae.createElement("div",{class:this.getFooterClass()},Ae.createElement(hu,{model:this.props.model,controller:this.props.controller})))),Ae.createElement("span",{class:Ae.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),handleevent:Ae.const("true"),tapboundary:Ae.const("true"),disablescroll:Ae.const("true"),onTapStart:this.bindFn(this.onDragPending)},Ae.createElement("span",{class:Ae.const("dcg-num")},()=>this.model.displayIndex),Ae.createElement("div",{class:Ae.const("dcg-tab-interior dcg-action-icon-mouse")},Ae.createElement(mu,{model:this.props.model,controller:this.props.controller}))),Ae.createElement(ns,{controller:this.props.controller,id:()=>this.model.id}))}isReadonly(){return this.controller.isItemReadonly(this.id)}shouldShowActionInfo(){return!!(this.model.clickableInfo&&this.model.clickableInfo.enabled&&this.model.clickableInfo.latex)}getFooterClass(){return this.isFirstRender()?this.const("dcg-expression-bottom dcg-indent-in-folder"):this.const("dcg-expression-bottom dcg-fadein-bottom dcg-indent-in-folder")}onNameInput(e){this.controller.dispatch({type:"set-image-name",id:this.id,name:e})}onNameFocusChange(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.id,location:"name"}}):this.getFocusedInput()==="name"&&this.controller.dispatch({type:"blur-focus-location",location:{type:"image",id:this.id,location:"name"}})}onNameSpecialKey(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})}getFocusedInput(){let e=this.controller.getFocusLocation();if(e&&e.type==="image"&&e.id===this.model.id)return e.location}onRetryLoad(){this.controller.dispatch({type:"image-retry-loading",id:this.id})}shouldShowBrailleError(){return this.controller.getBrailleMode()!=="none"&&!!this.model.error}insertFiles(e){this.controller.dispatch({type:"change-image",files:e,id:this.id})}onMouseSelect(e){e.type==="dcg-tap"&&e.device==="mouse"||e.type==="dcg-tapstart"&&e.device==="touch"||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-selected-id",id:this.id}))}};var xy=__dcg_shared_module_exports__['h'](j());var wy=class extends Qn{didMount(){this.onItemViewMounted()}willUnmount(){this.onItemViewUnmounted()}template(){let e="";return this.model.cachedRenderHeight&&(e="height:"+this.model.cachedRenderHeight+"px"),xy.createElement("div",{class:xy.const("dcg-do-not-blur dcg-expressionitem dcg-shell"),"expr-id":this.const(this.model.id),onTap:this.bindFn(this.onMouseSelect),style:xy.const(e)})}};var Wg=__dcg_shared_module_exports__['h'](j()),vy=class extends Wg.Class{init(){this.controller=this.props.controller()}template(){return Wg.createElement("div",{class:Wg.const("dcg-drag-container"),style:()=>({top:this.getTopPx(),left:this.getLeftPx()})},this.children)}getTopPx(){let e=this.controller.getRawDragState();if(e)return e.itemTop+"px"}getLeftPx(){let e=this.controller.getRawDragState();if(e)return e.itemLeft+"px"}};var Hl={delimiter:"",header:!1,dynamicTyping:!1,preview:0,step:void 0,encoding:"",comments:!1,complete:void 0,error:void 0,download:!1,chunk:void 0,keepEmptyRows:!1},qo={};qo.parse=NW;qo.RECORD_SEP=String.fromCharCode(30);qo.UNIT_SEP=String.fromCharCode(31);qo.BYTE_ORDER_MARK="\uFEFF";qo.BAD_DELIMITERS=["\r",`
`,'"',qo.BYTE_ORDER_MARK];qo.LocalChunkSize=1024*1024*10;qo.RemoteChunkSize=1024*1024*5;qo.DefaultDelimiter=",";qo.Parser=$S;qo.ParserHandle=I3;function NW(t,e){var i=BW(e),r=new I3(i),o=r.parse(t);return o}function I3(t){var e=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,i=this,r,o,n=!1,a,s=[],l={data:[],errors:[],meta:{}};t=gM(t),this.parse=function(S){if(a=!1,!t.delimiter){var k=m(S);k.successful?t.delimiter=k.bestDelimiter:(a=!0,t.delimiter=qo.DefaultDelimiter),l.meta.delimiter=t.delimiter}if($g(t.step)){var M=t.step;t.step=function(I){l=I,p()?c():M(c(),i)}}return t.preview&&t.header&&t.preview++,r=S,o=new $S(t),l=o.parse(r),c(),$g(t.complete)&&!n&&t.complete(l),n?{meta:{paused:!0}}:l},this.pause=function(){n=!0,o.abort(),r=r.substr(o.getCharIndex())},this.resume=function(){n=!1,o=new $S(t),o.parse(r),$g(t.complete)&&!n&&t.complete(l)},this.abort=function(){o.abort(),$g(t.complete)&&t.complete(l),r=""};function c(){return l&&a&&(C("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+qo.DefaultDelimiter+"'"),a=!1),p()&&u(),g()}function p(){return t.header&&s.length==0}function u(){if(l){for(var S=0;p()&&S<l.data.length;S++)for(var k=0;k<l.data[S].length;k++)s.push(l.data[S][k]);l.data.splice(0,1)}}function g(){if(!l||!t.header&&!t.dynamicTyping)return l;for(var S=0;S<l.data.length;S++){for(var k={},M=0;M<l.data[S].length;M++){if(t.dynamicTyping){var I=l.data[S][M];I=="true"?l.data[S][M]=!0:I=="false"?l.data[S][M]=!1:l.data[S][M]=w(I)}t.header&&(M>=s.length?(k.__parsed_extra||(k.__parsed_extra=[]),k.__parsed_extra.push(l.data[S][M])):k[s[M]]=l.data[S][M])}t.header&&(l.data[S]=k,M>s.length?C("FieldMismatch","TooManyFields","Too many fields: expected "+s.length+" fields but parsed "+M,S):M<s.length&&C("FieldMismatch","TooFewFields","Too few fields: expected "+s.length+" fields but parsed "+M,S))}return t.header&&l.meta&&(l.meta.fields=s),l}function m(S){for(var k=[",","	","|",";",qo.RECORD_SEP,qo.UNIT_SEP],M,I,E,T=0;T<k.length;T++){var A=k[T],G=0,_=0;E=void 0;for(var P=new $S({delimiter:A,preview:10}).parse(S),N=0;N<P.data.length;N++){var W=P.data[N].length;if(_+=W,typeof E=="undefined"){E=W;continue}else W>1&&(G+=Math.abs(W-E),E=W)}_/=P.data.length,(typeof I=="undefined"||G<I)&&_>1.99&&(I=G,M=A)}return t.delimiter=M,{successful:!!M,bestDelimiter:M}}function w(S){var k=e.test(S);return k?parseFloat(S):S}function C(S,k,M,I){l.errors.push({type:S,code:k,message:M,row:I})}}function $S(t){var e=/^\s*$/,i,r,o,n,a,s,l,c,p,u,g,m,w,C,S,k=!1;t=t||{},r=t.delimiter,o=t.comments,n=t.step,s=t.preview,(typeof r!="string"||r.length!=1||qo.BAD_DELIMITERS.indexOf(r)>-1)&&(r=","),o===!0?o="#":(typeof o!="string"||o.length!=1||qo.BAD_DELIMITERS.indexOf(o)>-1||o==r)&&(o=!1),this.parse=function(Z){if(typeof Z!="string")throw"Input must be a string";return ve(Z),M()},this.abort=function(){k=!0},this.getCharIndex=function(){return c};function M(){for(;c<i.length&&!(k||s>0&&S>=s);)l=='"'?T():p?A():G(),I();return E()}function I(){c++,l=i[c]}function E(){if(k&&ie("Abort","ParseAbort","Parsing was aborted by the user's step function"),p&&ie("Quotes","MissingQuotes","Unescaped or mismatched quotes"),q(),!$g(n))return oe()}function T(){R()&&!O()?p=!p:(N(),p&&O()?c++:ie("Quotes","UnexpectedQuotes","Unexpected quotes"))}function A(){(J(c)||f(c))&&u++,N()}function G(){l==r?W():J(c)?(X(),I()):f(c)?X():_()?P():N()}function _(){if(!o)return!1;var Z=c==0||f(c-1)||J(c-2);return Z&&i[c]===o}function P(){for(;!J(c)&&!f(c)&&c<i.length;)I()}function N(){g[w][C]+=l}function W(){g[w].push(""),C=g[w].length-1}function X(){q(),u++,S++,g.push([]),w=g.length-1,W()}function q(){B(),$g(n)&&(g[w]&&n(oe()),ae())}function B(){g[w].length==1&&e.test(g[w][0])&&(t.keepEmptyRows?g[w].splice(0,1):g.splice(w,1),w=g.length-1)}function J(Z){return Z<i.length-1&&(i[Z]=="\r"&&i[Z+1]==`
`||i[Z]==`
`&&i[Z+1]=="\r")}function f(Z){return i[Z]=="\r"||i[Z]==`
`}function O(){return!R()&&c<i.length-1&&i[c+1]=='"'}function R(){return!p&&re(c-1)||re(c+1)}function re(Z){typeof Z!="number"&&(Z=c);var Q=i[Z];return Z<=-1||Z>=i.length||Q==r||Q=="\r"||Q==`
`}function ie(Z,Q,fe){m.push({type:Z,code:Q,message:fe,line:u,row:w,index:c})}function ve(Z){i=Z,p=!1,c=0,S=0,u=1,ae(),g=[[""]],l=i[c]}function ae(){g=[],m=[],w=0,C=0}function oe(){return{data:g,errors:m,meta:{lines:u,delimiter:r,aborted:k,truncated:s>0&&c<i.length}}}}function BW(t){typeof t!="object"&&(t={});var e=gM(t);return(typeof e.delimiter!="string"||e.delimiter.length!=1||qo.BAD_DELIMITERS.indexOf(e.delimiter)>-1)&&(e.delimiter=Hl.delimiter),typeof e.header!="boolean"&&(e.header=Hl.header),typeof e.dynamicTyping!="boolean"&&(e.dynamicTyping=Hl.dynamicTyping),typeof e.preview!="number"&&(e.preview=Hl.preview),typeof e.step!="function"&&(e.step=Hl.step),typeof e.complete!="function"&&(e.complete=Hl.complete),typeof e.error!="function"&&(e.error=Hl.error),typeof e.encoding!="string"&&(e.encoding=Hl.encoding),typeof e.download!="boolean"&&(e.download=Hl.download),typeof e.keepEmptyRows!="boolean"&&(e.keepEmptyRows=Hl.keepEmptyRows),e}function gM(t){if(typeof t!="object")return t;var e=t instanceof Array?[]:{};for(var i in t)e[i]=gM(t[i]);return e}function $g(t){return typeof t=="function"}var{parse:T3}=qo;hd();function mM(t){var e;if(typeof t=="number")e=t+"";else if(typeof t=="string")e=t;else return!1;return e.trim().match(/^-?[0-9]*\.?[0-9]*$/)}function M3(t){let e=t.split(/\r?\n/),i=[],r=!1;if(!(e.length<2)){for(let o=0;o<e.length;o++){let n=e[o];if(!n.trim())continue;o>0&&!mM(n.replace(/,(\d{3})/g,"$1"))&&(r=!0);let a={content:n};i.push(a)}if(!r){let o=__dcg_shared_module_exports__['Aa'](i,"content").map(n=>n.replace(/,(\d{3})/g,"$1"));return mM(o[0])||(o=o.slice(1)),[{content:"\\left["+o.join(",")+"\\right]",numberList:!0}]}return i}}function G3(t){if(/^\s*$/.test(t))return;let e=T3(t,{preview:1e4}),i=e.data,r=[];if(e.errors.length&&!e.data.length){pa("PapaParse.parse returned errors.",{metaData:{input:t,output:e.errors}});return}if(!(!e.data.length||e.data.length<2)){var o=i[0].length;for(let n=0;n<o;n++)r.push([]);for(let n=0;n<e.data.length;n++)if(!(n===0&&isNaN(parseFloat(i[n][0])))){if(i[n].length<2)return;if(!(!i[n][0]&&!i[n][1]))for(let a=0;a<o;a++){let s=(i[n][a]||"").replace(/,(\d{3})/g,"$1");if(s&&isNaN(parseFloat(s)))return;r[a].push(s)}}if(!(r[0].length<2))return r}}var Vn=__dcg_shared_module_exports__['h'](j()),Cy=class extends Vn.Class{template(){return this.controller=this.props.controller(),Vn.createElement("div",{class:Vn.const("dcg-expressionitem dcg-new-expression dcg-opened")},Vn.createElement("div",{class:Vn.const("dcg-new-math-div dcg-do-not-blur dcg-action-newmath"),onTap:this.bindFn(this.newMath)},Vn.createElement("div",{class:Vn.const("dcg-new-expression-fade")})),Vn.createElement("span",{class:Vn.const("dcg-tab")},Vn.createElement("span",{class:Vn.const("dcg-num dcg-variable-index")},this.bindFn(this.getIndex)),Vn.createElement("div",{class:Vn.const("dcg-tab-interior")})))}getIndex(){return this.controller.getNextDisplayIndex()}newMath(){this.controller.dispatch({type:"new-expression-at-end"})}};var Oe=__dcg_shared_module_exports__['h'](j());Tt();var{If:Sy}=Oe.Components,Ey=class extends Oe.Class{init(){this.controller=this.props.controller()}template(){return Oe.createElement("div",{class:Oe.const("dcg-add-expression-container")},Oe.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-add-item-tooltip"),gravity:this.const("s")},Oe.createElement("span",{class:()=>({"dcg-icon-btn":!0,"dcg-add-expression-btn":!0,"dcg-action-add-expression":!0,"dcg-do-blur":!0,"dcg-active":this.controller.isAddExpressionOpen()}),handleEvent:Oe.const("true"),role:Oe.const("button"),tabindex:Oe.const("0"),"aria-haspopup":Oe.const("true"),"aria-expanded":()=>this.controller.isAddExpressionOpen(),"aria-label":()=>this.controller.s("graphing-calculator-label-add-item-tooltip"),didMount:e=>{this.toggleButtonNode=e},onTap:this.bindFn(this.toggleAddExpression),manageFocus:this.const(Ne({controller:this.controller,location:{type:"add-item-btn"}}))},Oe.createElement("i",{class:Oe.const("dcg-icon-plus"),"aria-hidden":Oe.const("true")}))),Oe.createElement(Sy,{predicate:()=>this.controller.isAddExpressionOpen()},()=>Oe.createElement("div",{class:()=>({"dcg-add-expression-dropdown":!0,"dcg-popover":!0,"dcg-bottom":!this.controller.isNarrow(),"dcg-right":this.controller.isNarrow()}),role:Oe.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-add-item-menu"),didMount:this.bindFn(this.didMountPopover),didUnmount:this.bindFn(this.didUnmountPopover)},Oe.createElement("div",{class:Oe.const("dcg-popover-interior")},Oe.createElement("div",{class:Oe.const("dcg-new-item dcg-do-not-blur dcg-action-newexpression"),role:Oe.const("button"),tabindex:Oe.const(0),"aria-label":()=>this.controller.s("graphing-calculator-narration-add-expression"),onTap:this.bindFn(this.newExpression),handleEvent:Oe.const("true"),manageFocus:this.const(Ne({controller:this.controller,location:{type:"add-expression-btn"}}))},Oe.createElement("i",{class:Oe.const("dcg-icon-new-expression dcg-expression-icon"),"aria-hidden":Oe.const("true")}),()=>this.controller.s("graphing-calculator-label-expression-lowercase")),Oe.createElement(Sy,{predicate:()=>this.controller.areNotesEnabled()},()=>Oe.createElement("div",{class:Oe.const("dcg-new-item dcg-do-not-blur dcg-action-newtext"),role:Oe.const("button"),tabindex:Oe.const(0),"aria-label":()=>this.controller.s("graphing-calculator-narration-add-note"),onTap:this.bindFn(this.newText),handleEvent:Oe.const("true"),manageFocus:this.const(Ne({controller:this.controller,location:{type:"add-note-btn"}}))},Oe.createElement("i",{class:Oe.const("dcg-icon-new-text dcg-expression-icon"),"aria-hidden":Oe.const("true")}),()=>this.controller.s("graphing-calculator-label-note-lowercase"))),Oe.createElement("div",{class:Oe.const("dcg-new-item dcg-do-not-blur dcg-action-newtable"),role:Oe.const("button"),tabindex:Oe.const(0),"aria-label":()=>this.controller.s("graphing-calculator-narration-add-table"),onTap:this.bindFn(this.newTable),handleEvent:Oe.const("true"),manageFocus:this.const(Ne({controller:this.controller,location:{type:"add-table-btn"}}))},Oe.createElement("i",{class:Oe.const("dcg-icon-new-table dcg-expression-icon"),"aria-hidden":Oe.const("true")}),()=>this.controller.s("graphing-calculator-label-table-lowercase")),Oe.createElement(Sy,{predicate:()=>this.controller.areFoldersEnabled()},()=>Oe.createElement("div",{class:Oe.const("dcg-new-item dcg-do-not-blur dcg-action-newfolder"),role:Oe.const("button"),tabindex:Oe.const(0),"aria-label":()=>this.controller.s("graphing-calculator-narration-add-folder"),onTap:this.bindFn(this.newFolder),handleEvent:Oe.const("true"),manageFocus:this.const(Ne({controller:this.controller,location:{type:"add-folder-btn"}}))},Oe.createElement("i",{class:Oe.const("dcg-icon-new-folder dcg-expression-icon"),"aria-hidden":Oe.const("true")}),()=>this.controller.s("graphing-calculator-label-folder-lowercase"))),Oe.createElement(Sy,{predicate:()=>this.controller.areImagesEnabled()},()=>Oe.createElement(Uc,{controller:()=>this.controller,ariaLabel:()=>this.controller.s("graphing-calculator-narration-add-image"),onFileChange:e=>this.insertFiles(e),location:this.const({type:"add-image-btn"}),readonly:this.const(!1)},Oe.createElement("div",{class:Oe.const("dcg-new-item dcg-action-newimage")},Oe.createElement("i",{class:Oe.const("dcg-icon-new-image dcg-expression-icon"),"aria-hidden":Oe.const("true")}),()=>this.controller.s("graphing-calculator-label-image-lowercase")))),Oe.createElement(Sy,{predicate:this.bindFn(this.showAddTicker)},()=>Oe.createElement("div",{class:Oe.const("dcg-new-item dcg-do-not-blur dcg-action-ticker"),role:Oe.const("button"),tabindex:Oe.const(0),"aria-label":()=>this.controller.s("graphing-calculator-narration-add-ticker"),onTap:this.bindFn(this.addTicker),handleEvent:Oe.const("true"),manageFocus:this.const(Ne({controller:this.controller,location:{type:"add-ticker-btn"}}))},Oe.createElement("i",{class:Oe.const("dcg-icon-metronome dcg-expression-icon"),"aria-hidden":Oe.const("true")}),()=>this.controller.s("graphing-calculator-label-ticker-lowercase")))),Oe.createElement("span",{class:Oe.const("dcg-arrow")}))))}showAddTicker(){return this.controller.areActionsEnabled()&&!this.controller.getTickerOpen()}didMountPopover(e){this.popoverNode=e,H(document).on("dcg-tapstart.add-expression-view wheel.add-expression-view",i=>{this.eventShouldClosePopover(i)&&this.controller.dispatch({type:"close-add-expression",focusIconAfterClose:i.device==="keyboard"})}),H(document).on("keydown.add-expression-view",i=>{if(be(i)==="Esc"&&this.controller.dispatch({type:"close-add-expression",focusIconAfterClose:!0}),be(i)==="Tab"&&!i.altKey&&!i.metaKey&&!i.ctrlKey){let r=this.controller.getFocusLocation();if(!r)return;let o;this.showAddTicker()?o={type:"add-ticker-btn"}:this.controller.areImagesEnabled()?o={type:"add-image-btn"}:this.controller.areFoldersEnabled()?o={type:"add-folder-btn"}:o={type:"add-table-btn"},!i.shiftKey&&r.type===o.type?(this.controller.dispatch({type:"set-focus-location",location:{type:"add-item-btn"}}),i.preventDefault(),i.stopPropagation()):i.shiftKey&&r.type==="add-item-btn"&&(this.controller.dispatch({type:"set-focus-location",location:o}),i.preventDefault(),i.stopPropagation())}}),ka&&pc&&H(e).on("dcg-tapstart",i=>i.preventDefault()),H(e.querySelector(".dcg-new-item")).on("touchstart",i=>i.preventDefault())}didUnmountPopover(){H(document).off(".add-expression-view")}toggleAddExpression(e){this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:e.device==="keyboard"})}newExpression(){this.controller.dispatch({type:"new-expression"})}newText(){this.controller.dispatch({type:"new-text"})}newFolder(){this.controller.dispatch({type:"new-folder"})}addTicker(){this.controller.dispatch({type:"open-ticker"})}newTable(){this.controller.dispatch({type:"new-table"})}insertFiles(e){this.controller.dispatch({type:"new-images",files:e})}eventShouldClosePopover(e){let i=!!this.popoverNode.contains(e.target),r=!!this.toggleButtonNode.contains(e.target);return!(i||r)}};var Be=__dcg_shared_module_exports__['h'](j());var ls=__dcg_shared_module_exports__['h'](j());var jS=class extends ls.Class{init(){this.controller=this.props.controller()}template(){return ls.createElement("span",{role:ls.const("button"),class:()=>({"dcg-constructions-count-link":!0,"dcg-icon-btn":!0,"dcg-active":this.controller.getShowConstructionsOpen(),"dcg-do-not-blur":!0}),handleEvent:ls.const("true"),tabindex:ls.const("0"),"aria-expanded":()=>this.controller.getShowConstructionsOpen(),manageFocus:this.const(Ne({controller:this.controller,location:{type:"geo-show-constructions-icon"}})),onTap:this.bindFn(this.showAllConstructions)},ls.createElement("i",{class:ls.const("dcg-icon-geometry"),"aria-label":()=>this.controller.s("graphing-calculator-narration-geometry-construction-icon-label")}),ls.createElement("span",{class:ls.const("dcg-construction-count")},()=>this.controller.getGeometryTokenCount()))}showAllConstructions(){this.controller.dispatch({type:"set-show-constructions-open",open:!this.controller.getShowConstructionsOpen(),setFocus:!1})}};var mn=__dcg_shared_module_exports__['h'](j());var jg=class extends mn.Class{init(){this.controller=this.props.controller()}template(){return mn.createElement("div",{class:()=>({"dcg-btn-flat-gray":this.props.isPillbox(),"dcg-btn-flat-gray-group":this.props.isPillbox(),"dcg-group-horizontal":this.props.isPillbox()}),style:()=>({background:this.props.isPillbox()?this.controller.getPillboxBackgroundColor():void 0})},mn.createElement(De,{tooltip:()=>this.controller.getshowKeyboardShortcutsInTooltips()?this.controller.s("graphing-calculator-label-undo-with-shortcut-tooltip"):this.controller.s("graphing-calculator-label-undo-tooltip"),gravity:this.const("s"),disabled:()=>!this.controller.canUndo(),displayBlock:this.props.isPillbox},mn.createElement("div",{class:()=>({"dcg-action-undo":!0,"dcg-icon-btn":!0,"dcg-pillbox-btn-interior":this.props.isPillbox(),"dcg-disabled":!this.controller.canUndo()}),role:mn.const("button"),tabindex:()=>this.controller.canUndo()?0:-1,"aria-label":()=>this.controller.s("graphing-calculator-narration-undo"),onTap:()=>this.controller.dispatch({type:"undo"}),"aria-disabled":()=>!this.controller.canUndo()},mn.createElement("i",{class:mn.const("dcg-icon-undo"),"aria-hidden":mn.const("true")}))),mn.createElement(De,{tooltip:()=>this.controller.getshowKeyboardShortcutsInTooltips()?this.controller.s("graphing-calculator-label-redo-with-shortcut-tooltip"):this.controller.s("graphing-calculator-label-redo-tooltip"),gravity:this.const("s"),disabled:()=>!this.controller.canRedo(),displayBlock:this.props.isPillbox},mn.createElement("div",{class:()=>({"dcg-action-redo":!0,"dcg-icon-btn":!0,"dcg-pillbox-btn-interior":this.props.isPillbox(),"dcg-disabled":!this.controller.canRedo()}),role:mn.const("button"),tabindex:()=>this.controller.canRedo()?0:-1,"aria-label":()=>this.controller.s("graphing-calculator-narration-redo"),onTap:()=>this.controller.dispatch({type:"redo"}),"aria-disabled":()=>!this.controller.canRedo()},mn.createElement("i",{class:mn.const("dcg-icon-redo"),"aria-hidden":mn.const("true")}))))}};var Wl=__dcg_shared_module_exports__['h'](j());Tt();var YS=class extends Wl.Class{init(){this.controller=this.props.controller()}toggleMuted(){var e;(e=this.controller.toneController)!=null&&e.isGlobalMuted()?this.controller.dispatch({type:"unmute-global"}):this.controller.dispatch({type:"mute-global"})}getMutedState(){return!this.controller.toneController||this.controller.toneController.isGlobalMuted()?"muted":"playing"}getAriaLabel(){switch(this.getMutedState()){case"playing":return this.controller.s("graphing-calculator-narration-mute-all");case"muted":return this.controller.s("graphing-calculator-narration-unmute-all")}}template(){return Wl.createElement(De,{gravity:this.const("s"),tooltip:this.bindFn(this.getAriaLabel)},Wl.createElement("button",{class:()=>{var e;return{"dcg-global-mute-button":!0,"dcg-unstyled-button":!0,"dcg-icon-btn":!0,"dcg-is-muted":this.getMutedState()==="muted","dcg-has-never-interacted":!((e=this.controller.toneController)!=null&&e.getHasEverInteractedWithMute())}},didMount:e=>H(e).on("tipsyshow",()=>{var i;(i=this.controller.toneController)==null||i.registerMuteInteraction(),this.update()}),onTap:()=>this.toggleMuted(),manageFocus:this.const(Ne({controller:this.controller,location:{type:"global-mute-button"}})),"aria-label":this.bindFn(this.getAriaLabel)},Wl.createElement("span",{class:Wl.const("dcg-first-time-animation")}),Wl.createElement("i",{class:Wl.const("dcg-icon-volume")})))}};var{If:$l}=Be.Components,Dy=class extends Be.Class{init(){this.controller=this.props.controller()}template(){return Be.createElement("div",{class:()=>({"dcg-expression-top-bar":!0,"dcg-expressions-scrolled":this.showShadow()}),role:Be.const("toolbar"),"aria-label":()=>this.controller.s("graphing-calculator-narration-expression-bar"),didMount:e=>{this.node=e},onTapStart:this.bindFn(this.clearSelectionOnMobile),style:()=>({background:this.controller.hasBackgroundColor()?this.controller.getPillboxBackgroundColor():void 0})},Be.createElement($l,{predicate:this.bindFn(this.showHamburger)},()=>Be.createElement("span",{class:Be.const("dcg-action-opendrawer dcg-tooltip dcg-icon-btn dcg-in-api-action-opendrawer"),handleEvent:Be.const("true"),tooltip:()=>this.controller.getshowKeyboardShortcutsInTooltips()?this.controller.s("graphing-calculator-label-open-graph-with-shortcut-tooltip"):this.controller.s("graphing-calculator-label-open-graph-tooltip"),role:Be.const("button"),tabindex:Be.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-narration-open-graph"),onTap:()=>this.controller.dispatch({type:"open-drawer"})},Be.createElement("i",{class:Be.const("dcg-icon-hamburger"),"aria-hidden":Be.const("true")}))),Be.createElement($l,{predicate:()=>!this.controller.isInEditListMode()},()=>Be.createElement(Ey,{controller:()=>this.props.controller()})),Be.createElement($l,{predicate:()=>this.controller.isGeoUIActive()&&!this.controller.isInEditListMode()},()=>Be.createElement(jS,{controller:this.props.controller})),Be.createElement($l,{predicate:this.bindFn(this.showMuteButton)},()=>Be.createElement(YS,{controller:this.props.controller})),Be.createElement($l,{predicate:this.bindFn(this.showRerandomize)},()=>Be.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-randomize-tooltip"),gravity:this.const("s")},Be.createElement("span",{class:Be.const("dcg-icon-btn"),handleEvent:Be.const("true"),role:Be.const("button"),tabindex:Be.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-label-randomize-tooltip"),onTap:()=>this.controller.dispatch({type:"re-randomize"})},Be.createElement("i",{class:Be.const("dcg-icon-randomize"),"aria-hidden":Be.const("true")})))),Be.createElement($l,{predicate:()=>this.controller.isInEditListMode()&&!this.controller.hasDefaultState()},()=>Be.createElement("span",{class:Be.const("dcg-btn-red dcg-action-clearall"),role:Be.const("button"),tabindex:Be.const("0"),onTap:()=>this.controller.dispatch({type:"clear-graph"})},()=>this.controller.s("graphing-calculator-button-clear-graph"))),Be.createElement($l,{predicate:()=>this.controller.isInEditListMode()&&this.controller.hasDefaultState()},()=>Be.createElement("span",{class:Be.const("dcg-btn-red dcg-action-reset"),role:Be.const("button"),tabindex:Be.const("0"),onTap:()=>this.controller.dispatch({type:"reset-graph"})},()=>this.controller.s("graphing-calculator-button-reset-graph"))),Be.createElement("div",{class:Be.const("dcg-center-buttons")},Be.createElement(jg,__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.props),{isPillbox:this.const(!1)}))),Be.createElement($l,{predicate:()=>!this.controller.isInEditListMode()},()=>Be.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-edit-list-tooltip"),gravity:this.const("s")},Be.createElement("span",{class:Be.const("dcg-icon-btn dcg-action-toggle-edit"),handleEvent:Be.const("true"),role:Be.const("button"),tabindex:Be.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-narration-edit-expression-list"),onTap:this.bindFn(this.toggleEditListMode),manageFocus:this.const(Ne({controller:this.controller,location:{type:"edit-list-toggle"}}))},Be.createElement("i",{class:Be.const("dcg-icon-settings"),"aria-hidden":Be.const("true")})))),Be.createElement($l,{predicate:()=>this.controller.isInEditListMode()},()=>Be.createElement("span",{class:Be.const("dcg-btn-primary dcg-action-toggle-edit dcg-do-not-blur"),handleEvent:Be.const("true"),role:Be.const("button"),tabindex:Be.const("0"),onTap:this.bindFn(this.toggleEditListMode),manageFocus:this.const(Ne({controller:this.controller,location:{type:"edit-list-toggle"}}))},()=>this.controller.s("graphing-calculator-button-done"))),Be.createElement($l,{predicate:()=>!this.controller.isInEditListMode()&&this.controller.getGraphSettings().config.graphpaper},()=>Be.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-hide-expression-list-tooltip"),gravity:this.const("s")},Be.const(" "),Be.createElement("span",{class:()=>({"dcg-resize-list-btn":!0,"dcg-action-hideexpressions":!0,"dcg-icon-btn":!0,"dcg-rotated":this.controller.isNarrow()}),role:Be.const("button"),tabindex:Be.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-label-hide-expression-list-tooltip"),onTap:e=>{this.controller.dispatch({type:"hide-expressions-list",focusShowIcon:e.device==="keyboard"})},manageFocus:this.const(Ne({controller:this.controller,location:{type:"hide-expression-list-btn"}}))},Be.createElement("i",{class:Be.const("dcg-icon-hide"),"aria-hidden":Be.const("true")})))))}showShadow(){return this.controller.getTickerOpen()||this.controller.getExpressionSearchOpen()?!1:this.props.expsScrolled()}showRerandomize(){return this.controller.isInEditListMode()?!1:this.controller.anyItemDependsOnRandomSeed()}showHamburger(){return!this.controller.getGraphSettings().config.showHamburger||this.controller.isInEditListMode()?!1:!this.controller.isNarrow()}clearSelectionOnMobile(e){e.wasHandled()||this.controller.dispatch({type:"set-none-selected"})}toggleEditListMode(e){this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!this.controller.isInEditListMode(),focusExpressionList:!1}),e.device==="keyboard"&&this.controller.dispatch({type:"set-focus-location",location:{type:"edit-list-toggle"}})}showMuteButton(){return this.controller.isInEditListMode()?!1:this.controller.toneItemsExist()}};function A3(t){let e=__dcg_shared_module_exports__['l'](_s(t));return e.graph.product="geometry-calculator",e}async function JS(t,e,i){let r=!1;t.dispatch({type:"toast/show",toast:{message:t.s("graphing-calculator-text-toast-importing-graph"),hideAfter:0,toastStyle:"cover",onHide:()=>{r=!0}}});let o=()=>{r||t.dispatch({type:"toast/show",toast:{message:t.s("graphing-calculator-text-toast-error-importing-graph"),toastStyle:"error",hideAfter:12e3}})},n=()=>{t.dispatch({type:"toast/show",toast:{message:t.s("graphing-calculator-text-toast-error-no-folders"),toastStyle:"error",hideAfter:12e3}})},a=(l,c)=>{t.dispatch({type:"set-state",state:l}),t.dispatch({type:"toast/show",toast:{message:t.s("graphing-calculator-text-toast-imported-graph"),undoCallback:()=>{t.dispatch({type:"set-state",state:c})}}})},s=(l,c,p)=>{if(r)return;let u=t.getSelectedItem();if(!u)return;let g=u.type==="folder",m=u.type!=="folder"&&!!u.folderId,w=g||m,C={},S=t.getState(),k=S.expressions.list;if(k.length===1&&!g&&!t.isGeometry()){a(l,S);return}if(t.isGeometry()&&p!=="graphing"){a(l,S);return}let M=l.expressions.list;for(let G=0;G<M.length;G++){let _=t.generateId(),P=M[G];if(P.type==="folder")if(w){n();return}else{C[P.id]=_,P.id=_;continue}P.folderId?P.folderId=C[P.folderId]:g?P.folderId=u.id:m&&(P.folderId=u.folderId),P.id=_}let I=__dcg_shared_module_exports__['l'](S),E=0;for(;E<k.length;){if(k[E].id===u.id){g&&(k[E].title=c);break}E+=1}let T=g?E+1:E,A=g?0:1;k.splice(T,A,...M),a(S,I)};try{let l=await fetch(`${e}?${new URLSearchParams(Pv)}`,{headers:{Accept:"application/json"}});if(!l.ok)throw void 0;let c=await l.json(),p=c.state,u=h3(e);t.isGeometry()&&(u==="geometry"?p=Yp(p):u==="graphing"&&(p=A3(p))),p=_s(p),i(p,(g,m)=>{g||!m||!u?o():s(m,c.title||"",u)})}catch(l){o()}}function V3(t){if(window.clipboardData&&window.clipboardData.getData)return window.clipboardData.getData("Text");if(t&&t.clipboardData&&t.clipboardData.getData)return t.clipboardData.getData("text/plain")}var Hc=__dcg_shared_module_exports__['h'](j());Tt();var{If:qW}=Hc.Components,XS=class extends Hc.Class{init(){this.guid=__dcg_shared_module_exports__['Xa']("dcg-exp-list-resize")}template(){return Hc.createElement(qW,{predicate:this.bindFn(this.isVisible)},()=>Hc.createElement("div",{class:Hc.const("dcg-exp-list-resizer"),onTapStart:this.bindFn(this.onTapStart)}))}isVisible(){return this.props.controller().expressionsAreFullWidth()?!1:this.props.controller().isListVisible()}onTapStart(e){this.initialWidth=this.props.controller().getExpListWidth(),this.initialLeft=e.changedTouches[0].clientX,H(document).on(`dcg-tapmove.${this.guid}`,i=>{if(this.initialLeft===void 0||this.initialWidth===void 0)return;let r=i.changedTouches[0].clientX-this.initialLeft+this.initialWidth;this.props.controller().dispatch({type:"resize-exp-list",expListWidth:r})}),H(document).on(`dcg-tapend.${this.guid}`,this.bindFn(this.onTapEnd)),H(document).on(`dcg-tapcancel.${this.guid}`,this.bindFn(this.onTapEnd))}onTapEnd(){H(document).off(`.${this.guid}`),this.initialLeft=void 0,this.initialWidth=void 0}};var Mt=__dcg_shared_module_exports__['h'](j());var{If:ky}=Mt.Components,QS=class extends Mt.Class{constructor(){super(...arguments),this.justGlobalReplaced=!1}init(){this.controller=this.props.controller()}template(){return Mt.createElement("div",{class:()=>({"dcg-expression-search-bar":!0,"dcg-expressions-scrolled":this.props.expsScrolled()&&!this.controller.getTickerOpen()}),role:Mt.const("search")},Mt.createElement("div",{class:Mt.const("dcg-search-row")},Mt.createElement("div",{class:Mt.const("dcg-search-mathquill-container")},Mt.createElement(Se,{hasError:this.const(!1),getAriaLabel:()=>this.controller.s("graphing-calculator-label-search-expressions"),getAriaPostLabel:()=>this.controller.getExpressionSearchStr().length===0?this.controller.raw(""):this.shouldShowReplaceError()?this.controller.s("graphing-calculator-error-expression-replacement"):this.shouldShowSearchError()?this.controller.s("graphing-calculator-error-expression-search"):this.controller.s("shared-calculator-text-search-results",{count:new mo(this.controller.getExpressionSearchCount())}),capExpressionSize:this.const(!1),onUserChangedLatex:this.bindFn(this.onSearchChange),latex:()=>this.controller.getRawExpressionSearchStr(),isFocused:this.bindFn(this.isSearchFocused),config:this.bindFn(this.getMQConfig),onFocusedChanged:this.bindFn(this.onSearchFocusChanged),noFadeout:this.const(!0),onUserPressedKey:(e,i)=>{if(e==="Esc")i&&i.preventDefault(),this.closeSearch();else if(e==="Enter")i&&i.preventDefault(),this.onEnter();else{var r=Se.getFocusedMathquill();if(!r)return;r.keystroke(e,i),this.controller.getRawExpressionSearchStr()!==r.latex()&&(this.justGlobalReplaced=!1,this.onSearchChange(r.latex()))}}}),Mt.createElement("i",{class:Mt.const("dcg-icon-search"),"aria-hidden":Mt.const("true")}),Mt.createElement(ky,{predicate:()=>this.controller.getRawExpressionSearchStr().length===0},()=>Mt.createElement("span",{class:Mt.const("dcg-search-placeholder")},()=>this.controller.s("graphing-calculator-label-search-expressions"))),Mt.createElement(ky,{predicate:()=>this.shouldShowSearchError()},()=>Mt.createElement("span",{class:Mt.const("dcg-search-replace-icon-container")},Mt.createElement(Oo,{error:()=>this.controller.s("graphing-calculator-error-expression-search"),gravity:this.const("s"),size:this.const("small")}))),Mt.createElement(ky,{predicate:()=>this.controller.isSearchReplaceValid()&&!this.justGlobalReplaced},()=>Mt.createElement("span",{class:Mt.const("dcg-search-replace-icon-container")},Mt.createElement("i",{class:Mt.const("dcg-icon-replace"),role:Mt.const("button"),tabindex:Mt.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-button-replace"),onTap:this.bindFn(this.onGlobalReplace)}))),Mt.createElement(ky,{predicate:()=>this.justGlobalReplaced},()=>Mt.createElement("span",{class:Mt.const("dcg-search-replace-icon-container")},Mt.createElement("i",{class:Mt.const("dcg-icon-check"),"aria-hidden":Mt.const("true")}))),Mt.createElement(ky,{predicate:()=>this.shouldShowReplaceError()},()=>Mt.createElement("span",{class:Mt.const("dcg-search-replace-icon-container")},Mt.createElement(Oo,{error:()=>this.controller.s("graphing-calculator-error-expression-replacement"),gravity:this.const("s"),size:this.const("small")})))),Mt.createElement("i",{onTap:()=>this.closeSearch(),tabindex:Mt.const("0"),"aria-label":()=>this.controller.s("account-shell-button-cancel"),role:Mt.const("button"),class:Mt.const("dcg-icon-remove dcg-do-not-blur")})))}onGlobalReplace(){this.justGlobalReplaced=!0,setTimeout(()=>{this.justGlobalReplaced=!1,this.update()},1500),this.controller.dispatch({type:"rename-identifier-global",search:this.controller.getExpressionSearchStr(),replace:this.controller.getExpressionReplaceStr()})}onEnter(){this.controller.isSearchReplaceValid()?this.onGlobalReplace():this.controller.dispatch({type:"update-expression-search-str",str:this.controller.getRawExpressionSearchStr()})}shouldShowSearchError(){return!this.controller.getIsExpressionSearchStrValidForReplace()&&this.controller.getExpressionReplaceStr().length>0}shouldShowReplaceError(){return!this.shouldShowSearchError()&&!this.controller.getIsExpressionReplaceStrValidForReplace()&&this.controller.getExpressionReplaceStr().length>0}closeSearch(){this.controller.dispatch({type:"close-expression-search"})}onSearchChange(e){this.controller.dispatch({type:"update-expression-search-str",str:e})}onSearchFocusChanged(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"search-expressions"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"search-expressions"}})}isSearchFocused(){let e=this.controller.getFocusLocation();return!!e&&e.type==="search-expressions"}onReplaceChange(e){this.controller.dispatch({type:"update-expression-replace-str",str:e})}onReplaceFocusChanged(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"replace-expressions"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"replace-expressions"}})}isReplaceFocused(){let e=this.controller.getFocusLocation();return!!e&&e.type==="replace-expressions"}getMQConfig(){return this.controller.getMathquillConfig({additionalOperators:["label","rename","image"]})}};var Dt=__dcg_shared_module_exports__['h'](j());var{If:L3,IfDefined:zW}=Dt.Components,ZS=class extends Dt.Class{init(){this.controller=this.props.controller()}template(){return Dt.createElement("div",{class:()=>({"dcg-ticker":!0,"dcg-expressions-scrolled":this.props.expsScrolled()})},Dt.createElement("div",{class:Dt.const("dcg-ticker-settings-container")},Dt.createElement("div",{class:Dt.const("dcg-ticker-settings-internal")},Dt.createElement("div",{class:Dt.const("dcg-editable-mathquill-container dcg-action-definition")},Dt.createElement("span",{class:Dt.const("dcg-ticker-label")},()=>this.controller.raw("Run")),Dt.createElement(Se,{hasError:()=>!!this.getHandlerErrorString(),getAriaPostLabel:()=>{let e=this.getHandlerErrorString();return e?this.controller.unpack(e):""},capExpressionSize:this.const(!1),onUserChangedLatex:e=>this.dispatchHandlerLatexIfChanged(e),latex:()=>this.getHandlerLatex(),getAriaLabel:()=>this.controller.s("graphing-calculator-narration-tick-action"),isFocused:()=>this.getFocusedInput()==="handler",config:()=>this.getMQConfig(),onFocusedChanged:e=>this.handleFocusedChanged("handler",e),selectOnFocus:this.const(!0),noFadeout:this.const(!0),onUserPressedKey:(e,i)=>{this.handlePressedKey("handler",e,i)}}),zW(()=>this.getHandlerErrorString(),e=>Dt.createElement("span",{class:Dt.const("dcg-clickable-info-error-container")},Dt.createElement(Oo,{error:()=>this.controller.unpack(e()),gravity:this.const("s"),size:this.const("small")})))),Dt.createElement("div",{class:Dt.const("dcg-editable-mathquill-container dcg-action-frequency")},Dt.createElement("span",{class:Dt.const("dcg-ticker-label")},()=>this.controller.raw("every")),Dt.createElement(Se,{hasError:()=>!!this.getMinStepErrorString(),getAriaPostLabel:()=>{let e=this.getMinStepErrorString();return e?this.controller.unpack(e):""},capExpressionSize:this.const(!1),onUserChangedLatex:e=>this.dispatchMinStepLatexIfChanged(e),latex:()=>this.getMinStepLatex(),getAriaLabel:()=>this.controller.s("graphing-calculator-label-ticker-min-step"),isFocused:()=>this.getFocusedInput()==="minstep",config:this.bindFn(this.getMQConfig),onFocusedChanged:e=>this.handleFocusedChanged("minstep",e),selectOnFocus:this.const(!0),placeholder:this.const("0"),noFadeout:this.const(!0),onUserPressedKey:(e,i)=>{this.handlePressedKey("minstep",e,i)}}),()=>this.controller.raw("ms"),Dt.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-ticker-help-tooltip"),gravity:this.const("s")},Dt.createElement("a",{"aria-label":()=>this.controller.s("graphing-calculator-label-ticker-help-tooltip"),class:Dt.const("dcg-ticker-toggle-help"),target:Dt.const("_blank"),href:Dt.const("https://help.desmos.com/hc/en-us/articles/4407725009165")},Dt.createElement("i",{class:Dt.const("dcg-icon-question-sign"),"aria-hidden":Dt.const("true")})))),Dt.createElement(L3,{predicate:this.bindFn(this.shouldShowSliderPrompt)},()=>Dt.createElement($s,{model:()=>this.props.controller().getTicker(),controller:this.props.controller}))),Dt.createElement("div",{class:()=>({"dcg-circular-icon-container":!0,"dcg-disabled":this.iconDisabled()}),"aria-label":this.bindFn(this.getIconAriaLabel),role:Dt.const("button"),tabindex:()=>this.iconDisabled()?-1:0,"aria-disabled":this.bindFn(this.iconDisabled),"aria-pressed":()=>this.controller.getTickerPlaying()&&!this.iconDisabled(),onTap:this.bindFn(this.toggleTicker),onTapStart:()=>{Ri()}},Dt.createElement(Ir,{iconType:this.const("metronome")}),Dt.createElement("div",{class:()=>({"dcg-metronome-bar":!0,"dcg-metronome-playing":this.controller.getTickerPlaying()&&!this.iconDisabled()})}),Dt.createElement(L3,{predicate:()=>!this.iconDisabled()},()=>Dt.createElement("div",{class:Dt.const("dcg-mini-play-pause")},Dt.createElement(Ir,{iconType:this.bindFn(this.getPlayIcon)}))))),Dt.createElement("i",{onTap:this.bindFn(this.closeTicker),tabindex:()=>this.controller.isInEditListMode()?0:-1,"aria-label":()=>this.controller.s("graphing-calculator-label-ticker-close"),role:Dt.const("link"),class:Dt.const("dcg-icon-remove dcg-do-not-blur")}))}iconDisabled(){return!!(this.getMinStepErrorString()||this.getHandlerErrorString()||!this.isHandlerMaybeValid())}isHandlerMaybeValid(){var i;return((i=this.controller.getTicker().formula)==null?void 0:i.handler.status)==="maybe-valid"}closeTicker(){this.controller.dispatch({type:"close-ticker"})}toggleTicker(){this.iconDisabled()||this.controller.dispatch({type:"toggle-ticker"})}getPlayIcon(){return this.controller.getTickerPlaying()?"pause":"play"}getIconAriaLabel(){return this.controller.getTickerPlaying()?this.controller.s("graphing-calculator-label-ticker-pause"):this.controller.s("graphing-calculator-label-ticker-play")}getFocusedInput(){let e=this.controller.getFocusLocation();if(!(!e||e.type!=="ticker"))return e.location}handlePressedKey(e,i,r){let o=Se.getFocusedMathquill();if(o){if(i==="Enter"&&this.shouldShowSliderPrompt()&&this.controller.dispatch({type:"create-sliders-for-ticker",variables:Zm(this.props.controller().getTicker())}),i==="Right"&&e==="handler"||i==="Left"&&e==="minstep"||i==="Down"){var n=Se.applyArrowKeyAndReturnIfWasAtBounds(o,i,r);if(!n)return;if(i==="Down")return this.controller.dispatch({type:"on-special-key-pressed",key:i});if(i==="Right"){this.handleFocusedChanged("minstep",!0);return}else if(i==="Left"){this.handleFocusedChanged("handler",!0);return}}o.keystroke(i,r),e==="handler"?this.dispatchHandlerLatexIfChanged(o.latex()):e==="minstep"&&this.dispatchMinStepLatexIfChanged(o.latex())}}handleFocusedChanged(e,i){i?this.controller.dispatch({type:"set-focus-location",location:{type:"ticker",location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"ticker",location:e}})}dispatchHandlerLatexIfChanged(e){this.getHandlerLatex()!==e&&this.controller.dispatch({type:"update-ticker-handlerlatex",latex:e})}dispatchMinStepLatexIfChanged(e){this.getMinStepLatex()!==e&&this.controller.dispatch({type:"update-ticker-minsteplatex",latex:e})}getHandlerLatex(){return this.controller.getTickerHandlerLatex()}getMinStepLatex(){return this.controller.getTickerMinStepLatex()}getMQConfig(){return this.controller.getMathquillConfig({additionalOperators:["dt"]})}getHandlerErrorString(){return this.getHandlerLatex()?tL(this.controller.getTicker()):void 0}getMinStepErrorString(){return iL(this.controller.getTicker())}shouldShowSliderPrompt(){return this.controller.areSlidersEnabled()?Zm(this.controller.getTicker()).length>0:!1}};var vo=__dcg_shared_module_exports__['h'](j());var{For:P3,If:UW}=vo.Components,eE=class extends vo.Class{init(){this.controller=this.props.controller(),this.currentlyInspectedDepth=1/0,this.cachedTokenDepths={depths:{},isInvalid:!1},this.updateCachedTokenDepthInfo()}willUpdate(){this.updateCachedTokenDepthInfo()}updateCachedTokenDepthInfo(){let e="",i=!1,r=this.controller.getFocusLocation();if(r&&r.type==="expression"){let n=this.controller.getFocusedItem();(n==null?void 0:n.type)==="expression"&&(e=n.id,i=!!n.error&&n.latex!==""||!!n.formula.variables.length)}if(this.cachedTokenDepths.focusedExpressionBeforeError==e&&i){this.cachedTokenDepths.isInvalid=!0;return}this.cachedTokenDepths={depths:this.controller.cachedGeoTokenDepths,isInvalid:!1,focusedExpressionBeforeError:i?void 0:e}}template(){return vo.createElement("div",{class:()=>({"dcg-geo-show-constructions-pane":!0,"dcg-transient-error":this.cachedTokenDepths.isInvalid,"dcg-cant-drag-item":!!this.controller.getDraggedItemId()&&!this.controller.canDraggedItemBeMovedIntoTokenPane()}),"aria-label":()=>this.controller.s("graphing-calculator-narration-geometry-token-navigator-label"),role:vo.const("region"),didUnmount:()=>this.lastFocusedIdentifier=void 0,onKeydown:this.bindFn(this.handleKeydown)},vo.createElement(UW,{predicate:()=>this.controller.getGeometryTokenCount()===0},()=>vo.createElement("div",{class:vo.const("dcg-empty-constructions")},()=>this.controller.s("graphing-calculator-text-geometry-no-constructed-objects"))),vo.createElement(P3,{each:this.bindFn(this.getObjectDepths)},vo.createElement("div",{class:vo.const("dcg-displayed-sections-container")},e=>vo.createElement("div",{class:()=>({"dcg-displayed-section-level":!0,"dcg-selected-level":parseInt(e)===this.getCurrentlyInspectedDepth(),"dcg-below-the-line":parseInt(e)>this.getCurrentlyInspectedDepth()})},vo.createElement(P3,{each:()=>this.getTokensForDepth(e),key:(i,r)=>r},vo.createElement("span",{role:vo.const("listbox"),"aria-label":()=>this.controller.s("graphing-calculator-narration-geometry-token-navigator-depth",{depth:e})},(i,r)=>vo.createElement("span",{class:()=>({"dcg-token-being-dragged-container":this.isTokenBeingDragged(e,r)}),onTapStart:o=>{let n=this.getCalcIdForDepth(e,r),a=this.controller.getItemModel(n);!a||a.type!=="expression"||this.controller.isItemInGeoFolder(a.id)&&this.props.onDragPending(o,{type:"token",calcId:n,originalIndex:a.index})}},vo.createElement(Vl,{showParentChildrenHover:this.const(!0),controller:this.props.controller,identifier:()=>this.getIdentifierForDepth(e,r),insideMQ:this.const(!1),insideGroup:this.const(!0),focusLocation:()=>({type:"geo-token",identifier:this.getIdentifierForDepth(e,r)}),putInTabOrder:()=>{if(this.lastFocusedIdentifier===void 0){let o=this.getObjectDepths();this.lastFocusedIdentifier=this.getIdentifierForDepth(o[0],0)}return this.lastFocusedIdentifier===this.getIdentifierForDepth(e,r)}}))))))))}isTokenBeingDragged(e,i){let r=this.controller.getDraggedItemId();if(!r)return!1;if(this.controller.isItemInGeoFolder(r))return r==this.getCalcIdForDepth(e,i)}getCurrentlyInspectedDepth(){return Math.min(this.currentlyInspectedDepth,this.getObjectDepths().length-1)}getIdentifierForDepth(e,i){var r=this.getTokensForDepth(e)[i];return r?r.identifier:""}getCalcIdForDepth(e,i){var r=this.getTokensForDepth(e)[i];return r?r.calcId:""}getTokensForDepth(e){let{depths:i}=this.cachedTokenDepths;var r=i[e];return r||[]}getObjectDepths(){let e=Object.keys(this.cachedTokenDepths.depths);return e.sort((i,r)=>{let o=parseInt(i),n=parseInt(r);return isFinite(o)?isFinite(n)?o-n:1:-1}),e}selectItemIfNecessary(){if(this.controller.hasAnyItemsSelected())return;let e=this.controller.getFocusLocation();if((e==null?void 0:e.type)!=="geo-token")return;let{calcId:i}=this.controller.cachedGeoTokenInfo[e.identifier];!i||!this.controller.getItemModel(i)||this.controller.dispatch({type:"set-selected-id",id:i})}handleKeydown(e){let i=this.controller.getFocusLocation(),r=be(e),o=Dr(e);if(e.ctrlKey&&e.shiftKey&&!e.altKey&&!e.metaKey&&o==="O"){e.preventDefault(),e.stopPropagation(),this.selectItemIfNecessary(),this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"multi-select-more",guid:Jp(),focusFirstOption:!0,previousFocusLocation:i}});return}if(e.altKey&&!e.ctrlKey&&!e.metaKey&&e.shiftKey&&o==="T"){if(e.preventDefault(),e.stopPropagation(),(i==null?void 0:i.type)!=="geo-token")return;let{calcId:g}=this.controller.cachedGeoTokenInfo[i.identifier];if(!g)return;let m=this.controller.getItemModel(g);if(!Sl(m))return;this.controller.convertToNamedAssignment(m),Mo(m,""),this.controller.dispatch({type:"set-none-selected"}),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:m.id}});return}if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;if(r==="Esc"){e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-show-constructions-open",open:!1,setFocus:!0});return}if(r!=="Up"&&r!=="Down"&&r!=="Left"&&r!=="Right")return;e.preventDefault(),e.stopPropagation();let n=this.getObjectDepths();if(n.length===0)return;let a="";if(i&&i.type==="geo-token")a=i.identifier;else{let g=this.getTokensForDepth(n[0])[0];if(!g)return;a=g.identifier}if(a==="")return;let s,l=-1,c=[];for(s=0;s<n.length;s++){let g=n[s];if(c=this.getTokensForDepth(g),!!c&&(l=__dcg_shared_module_exports__['Ja'](c,{identifier:a}),l!==-1))break}if(s===-1||l===-1)return;r==="Up"?s=Math.max(s-1,0):r==="Down"?s=Math.min(s+1,n.length-1):r==="Left"?l=Math.max(l-1,0):r==="Right"&&(l=Math.min(l+1,c.length-1));let p=this.getTokensForDepth(n[s]);if(!p)return;l=Math.min(l,p.length-1);let u=p[l].identifier;this.controller.dispatch({type:"set-focus-location",location:{type:"geo-token",identifier:u}}),this.lastFocusedIdentifier=u}};var Rt=__dcg_shared_module_exports__['h'](j());var cs=__dcg_shared_module_exports__['h'](j()),tE=__dcg_shared_module_exports__['h'](H3());var bM=/\{\$([a-zA-Z0-9\-]+([a-zA-Z0-9\-]+_)*[a-zA-Z0-9\-]+)\}/;function W3(t,e){let i=0,r=0,o={},n={},a=s(t);if(!/^<0>/.test(a)||!/<\/0>$/.test(a))throw new Error("Expected template string to start and end with <0> and </0>, but found "+JSON.stringify(a));return a.slice(3,-4).trim();function s(c){if(e.isConst(c))return QW(e.getConstValue(c));if(e.isNamedBinding(c)){let p=l(o,e.getBindingName(c)),u=`{$${p}}`;if(!bM.test(u))throw new Error(`Invalid <Localize> variable: ${u}.`);return e.addBinding&&e.addBinding(p,c),o[p]=!0,u}else if(c!==t&&e.isView(c)){let p=l(n,e.getViewName(c));if(!/[a-zA-Z0-9\-_]/.test(p))throw new Error(`Invalid <Localize> subview identifier: ${p}.`);return e.addView&&e.addView(p,c),n[p]=!0,`<${p}/>`}else if(e.isBinding(c)){let p=l(o,`v${i++}`),u=`{$${p}}`;return e.addBinding&&e.addBinding(p,c),o[p]=!0,u}else{let p=`${r++}`;e.addElement&&e.addElement(p,c);let u=[];return e.forEachChild(c,g=>{u.push(s(g))}),n[p]=!0,u.length>0?`<${p}>${u.join("")}</${p}>`:`<${p}/>`}}function l(c,p){let u=0,g=p;for(;c[g];)g=`${p}-${++u}`;return g}}var XW=!0;function QW(t){return XW?t:t.replace(/\{|\}/g,e=>`{"${e}"}`).replace(/(^|[\s\n]+)(\[|\]|\.)/g,(e,i,r)=>`${i}{"${r}"}`)}function ZW(t){return t.__DCGViewLocalizeBindingName}function e$(t){return typeof t=="function"&&t.__DCGViewLocalizeViewName}var $d=class extends cs.Class{init(){this.viewMap={},this.elementMap={},this.bindingMap={},this.i18n=this.props.i18n(),this.templateString=this.serializeToTemplateString(cs.createElement("div",null,this.children))}template(){return cs.createElement(cs.Components.If,{predicate:()=>this.shouldShow()},()=>cs.createElement(cs.Components.Switch,{key:()=>yM(this.translatedString())},e=>this.renderDeserializedTemplateNode(this.parseAndValidate(e))))}shouldShow(){let e=this.props.options&&this.props.options();return e&&e.hideUntranslatedView&&this.i18n.hasTranslation?this.i18n.hasTranslation(this.props.key()):!0}translatedString(){let e={};for(let i in this.bindingMap)e[i]=Xa(`{$${i}}`);return this.i18n.s(this.props.key(),e)}static variable(e,i){let r=()=>i();return r.__DCGViewLocalizeBindingName=e,r}static subview(e,i){let r=()=>i();return r.__DCGViewLocalizeViewName=e,r}parseAndValidate(e){let i=(0,tE.parse)(e),r={},o={};n(i);for(let a in this.elementMap)if(!o[a])return(0,tE.parse)(yM(this.templateString));for(let a in this.bindingMap)if(!r[a])return(0,tE.parse)(yM(this.templateString));return i;function n(a){if(Array.isArray(a)){for(let s of a)n(s);return}a.name==="token"?r[a.attrs.id]=!0:a.type!=="text"&&(o[a.name]=!0,n(a.children))}}renderDeserializedTemplateNode(e){if(Array.isArray(e))return e.map(i=>this.renderDeserializedTemplateNode(i));if(e.type==="text")return cs.const(e.content||"");if(e.name==="token"){let i=this.bindingMap[e.attrs.id];return i||(()=>"")}else if(this.elementMap[e.name]){let i=this.elementMap[e.name],r=e.children.map(o=>this.renderDeserializedTemplateNode(o));return j3(i.type,i.attrs,r)}else return this.viewMap[e.name]?this.viewMap[e.name]():j3("span",{},[])}serializeToTemplateString(e){return W3(e,{isView:e$,isConst:$3,isBinding:i=>typeof i=="function",isNamedBinding:ZW,getConstValue:i=>i(),getBindingName:i=>i.__DCGViewLocalizeBindingName,getViewName:i=>i.__DCGViewLocalizeViewName,addBinding:(i,r)=>{this.bindingMap[i]=r},addElement:(i,r)=>{this.elementMap[i]={type:r.tagName,attrs:r.attrs}},addView:(i,r)=>{if(this.viewMap[i])throw new Error(`Unexpected duplicate view ${i}.`);this.viewMap[i]=r},forEachChild:(i,r)=>{for(let o of i.children){if(!$3(o)&&typeof o!="function"&&o._isDCGView)throw new Error("Bare DCGViews are not allowed inside <Localize>. Use Localize.subview().");r(o)}}})}};function $3(t){return typeof t=="function"&&t.isDCGViewConst}function j3(t,e,i){return cs.createElement(t,e,i)}function yM(t){return`<0>${t}</0>`.replace(new RegExp(bM.source,"g"),(i,r)=>`<token id="${r}"/>`)}var{If:Y3}=Rt.Components,iE=class extends Rt.Class{template(){return Rt.createElement(Y3,{predicate:()=>this.props.controller().has3DNotice()},()=>Rt.createElement("div",{class:Rt.const("dcg-explist-3d-getting-started-container")},Rt.createElement("aside",{class:Rt.const("dcg-3d-getting-started-container")},Rt.createElement("div",{class:Rt.const("dcg-3d-getting-started")},Rt.createElement("div",{class:Rt.const("dcg-3d-background-image-left")}),Rt.createElement("div",{class:Rt.const("dcg-3d-background-image-right")}),Rt.createElement("i",{class:Rt.const("dcg-icon-remove"),role:Rt.const("button"),tabindex:Rt.const("0"),"aria-label":()=>Pa("shared-button-close-message"),onTap:e=>this.props.controller().dispatch({type:"dismiss-3d-notice",focusFirstExpression:e.device==="keyboard"})}),Rt.createElement("h2",{class:Rt.const("dcg-3d-getting-started-title")},()=>this.props.controller().s("account-shell-text-welcome-to-3d")),Rt.createElement("div",{class:Rt.const("dcg-3d-getting-started-message")},Rt.createElement($d,{i18n:this.props.controller,key:this.const("account-shell-text-3d-expression-list-notice")},Rt.const("Please share any bugs, questions, or suggestions at:"),Rt.const(" "),Rt.createElement("a",{href:Rt.const("mailto:feedback@desmos.com")},Rt.const("feedback@desmos.com")))),Rt.createElement("div",{class:Rt.const("dcg-getting-started-footer-links")},Rt.createElement(Y3,{predicate:()=>!this.props.controller().isNarrow()},()=>Rt.createElement("button",{class:Rt.const("dcg-unstyled-button dcg-getting-started-primary-btn"),onTap:()=>{var e,i;return(i=(e=this.props.controller()).showQuestModal)==null?void 0:i.call(e)}},()=>this.props.controller().s("account-shell-link-try-a-quest"))),Rt.createElement("a",{href:()=>"https://blog.desmos.com/articles/beta-3d-release/",target:Rt.const("_blank"),class:Rt.const("dcg-getting-started-secondary-btn")},()=>this.props.controller().s("account-shell-link-read-blog"),Rt.createElement("span",{class:Rt.const("dcg-sr-only")},()=>this.props.controller().s("shared-label-opens-in-new-tab"))))))))}};var Vr=__dcg_shared_module_exports__['h'](j());var J3=__dcg_shared_module_exports__['h'](j());var Ar=class extends J3.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}getFocusedInput(){let e=this.controller.getFocusLocation(),i=this.model.type==="table-column"?this.model.table.id:this.id;if(!(!e||e.type!=="expression-menu"||e.id!==i))return e.location}handleFocusedChanged(e,i){let r=this.model.type==="table-column"?this.model.table.id:this.id;e?this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:r,location:i}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"expression-menu",id:r,location:i}})}onColorSelected(e){this.model.type!=="image"&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-color",id:this.id,color:e}):this.controller.dispatch({type:"set-tablecolumn-color",color:e,tableId:this.model.table.id,columnId:this.id}))}onCustomColorSelected(e){this.model.type!=="image"&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-colorlatex",id:this.id,colorLatex:e}):this.controller.dispatch({type:"set-tablecolumn-colorlatex",tableId:this.model.table.id,columnId:this.model.id,colorLatex:e}))}getModelColor(){return this.model.type==="image"?"":Ds(this.model)}};var ei=__dcg_shared_module_exports__['h'](j());var Wc=__dcg_shared_module_exports__['h'](j()),Ui=class extends Wc.Class{template(){return Wc.createElement("div",{class:()=>({"dcg-toggle-view":!0,"dcg-toggled":this.props.toggled()}),"aria-label":()=>this.props.ariaLabel(),role:Wc.const("checkbox"),tabindex:Wc.const("0"),"aria-checked":()=>this.props.toggled(),toggled:()=>this.props.toggled(),onTap:this.bindFn(this.props.onChange)},Wc.createElement("div",{class:Wc.const("dcg-toggle-switch")}))}};var{If:xM}=ei.Components,Yg=class extends Ar{template(){return ei.createElement("div",{class:ei.const("dcg-options-menu-section")},ei.createElement("div",{class:ei.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-lines"),ei.createElement(Ui,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-lines-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleLinesVisible)})),ei.createElement(xM,{predicate:()=>this.props.isOpen()},()=>ei.createElement("div",{class:ei.const("dcg-options-menu-content")},ei.createElement("div",{class:ei.const("dcg-options-flex-container")},ei.createElement("div",{class:ei.const("dcg-options-left-side")},ei.createElement("div",{class:ei.const("dcg-iconed-mathquill-row dcg-line-opacity-row")},ei.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-opacity-tooltip"),sticky:this.const(!0),gravity:this.const("s")},ei.createElement("i",{class:ei.const("dcg-icon-opacity"),"aria-hidden":ei.const("true")})),ei.createElement(Lt,{latex:()=>this.model.lineOpacity,placeholder:this.bindFn(this.getLineOpacity),isFocused:()=>this.getFocusedInput()==="lineopacity",ariaPostLabel:()=>this.isLineOpacityValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-line-opacity"),hasError:()=>!this.isLineOpacityValid(),handleLatexChanged:this.bindFn(this.dispatchLineOpacityLatexIfChanged),dataLabelAttributeValue:this.const("line-opacity"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"lineopacity")})),ei.createElement("div",{class:ei.const("dcg-iconed-mathquill-row dcg-line-thickness-row")},ei.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-line-thickness-tooltip"),sticky:this.const(!0),gravity:this.const("s")},ei.createElement("i",{class:ei.const("dcg-icon-line-thickness"),"aria-hidden":ei.const("true")})),ei.createElement(Lt,{latex:()=>this.model.lineWidth,placeholder:this.bindFn(this.getLineWidth),isFocused:()=>this.getFocusedInput()==="linewidth",ariaPostLabel:()=>this.isLineWidthValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-label-line-thickness-tooltip"),hasError:()=>!this.isLineWidthValid(),handleLatexChanged:this.bindFn(this.dispatchLineWidthLatexIfChanged),dataLabelAttributeValue:this.const("line-width"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"linewidth")}))),ei.createElement("div",{class:ei.const("dcg-options-right-side")},ei.createElement(xM,{predicate:this.bindFn(this.shouldShowLineStyles)},()=>ei.createElement(Ni,{staticConfig:this.bindFn(this.getPointStyleOptions),ariaGroupLabel:()=>this.controller.s("graphing-calculator-heading-style"),theme:this.const("mini")})))),ei.createElement(xM,{predicate:this.props.isFirstOpenSection},()=>ei.createElement(yo,{controller:this.props.controller,colorLatex:()=>this.model.colorLatex,selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected)})))))}getLineWidth(){return this.isGeometryPolygon()?""+2:""+2.5}getLineOpacity(){return this.isGeometryPolygon()?""+.6:""+.9}isGeometryPolygon(){return this.controller.isGeometry()&&this.model.type==="expression"&&xl(this.model)}getPointStyleOptions(){return["SOLID","DASHED","DOTTED"].map(i=>({key:i,icon:()=>this.getStyleIcon(i),ariaLabel:()=>this.getStyleAria(i),selected:()=>this.model.lineStyle===i,class:()=>"dcg-line-segmented-option",onSelect:()=>{this.onLineStyleSelected(i)}}))}getStyleIcon(e){switch(e){case"SOLID":return"dcg-icon-line-solid";case"DASHED":return"dcg-icon-line-dashed";case"DOTTED":return"dcg-icon-line-dotted"}}getStyleAria(e){let i=this.controller.s;switch(e){case"SOLID":return i("graphing-calculator-narration-line-style-solid");case"DASHED":return i("graphing-calculator-narration-line-style-dashed");case"DOTTED":return i("graphing-calculator-narration-line-style-dotted")}}isLineOpacityValid(){return this.model.type==="expression"?oO(this.model):this.model.type==="table-column"?zA(this.model):!1}isLineWidthValid(){return this.model.type==="expression"?Cv(this.model):this.model.type==="table-column"?UA(this.model):!1}dispatchLineOpacityLatexIfChanged(e){this.model.lineOpacity!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-lineopacity",id:this.id,lineOpacity:e}):this.controller.dispatch({type:"set-tablecolumn-lineopacity",tableId:this.model.table.id,columnId:this.model.id,lineOpacity:e}))}shouldShowLineStyles(){return!(this.model.type==="expression"&&El(this.model))}onLineStyleSelected(e){this.model.lineStyle!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-linestyle",id:this.id,lineStyle:e}):this.controller.dispatch({type:"set-tablecolumn-linestyle",tableId:this.model.table.id,columnId:this.model.id,lineStyle:e}))}dispatchLineWidthLatexIfChanged(e){this.model.lineWidth!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-linewidth",id:this.id,lineWidth:e}):this.controller.dispatch({type:"set-tablecolumn-linewidth",tableId:this.model.table.id,columnId:this.model.id,lineWidth:e}))}toggleLinesVisible(){this.model.type==="expression"?this.controller.dispatch({type:"set-item-lines",id:this.id,lines:!this.props.isOpen()}):this.controller.dispatch({type:"set-tablecolumn-lines",tableId:this.model.table.id,columnId:this.model.id,bool:!this.props.isOpen()})}};var Iy=__dcg_shared_module_exports__['h'](j());var rE=class extends Ar{template(){return Iy.createElement("div",{class:Iy.const("dcg-options-menu-section")},Iy.createElement(yo,{controller:this.props.controller,colorLatex:()=>this.model.colorLatex,selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected),hideCustomColors:()=>this.model.type==="expression"&&dv(this.model)}))}};var Xr=__dcg_shared_module_exports__['h'](j());var{If:wM}=Xr.Components,oE=class extends Ar{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return Xr.createElement("div",{class:Xr.const("dcg-options-menu-section")},Xr.createElement("div",{class:Xr.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-fill"),Xr.createElement(wM,{predicate:()=>!this.isInequality()},()=>Xr.createElement(Ui,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-fill-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleFillVisible)}))),Xr.createElement(wM,{predicate:this.props.isOpen},()=>Xr.createElement("div",{class:Xr.const("dcg-options-menu-content")},Xr.createElement("div",{class:Xr.const("dcg-iconed-mathquill-row dcg-fill-opacity-row")},Xr.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-opacity-tooltip"),sticky:this.const(!0),gravity:this.const("s")},Xr.createElement("i",{class:Xr.const("dcg-icon-opacity"),"aria-hidden":Xr.const("true")})),Xr.createElement(Lt,{latex:()=>this.model.fillOpacity,placeholder:this.bindFn(this.getFillOpacity),isFocused:()=>this.getFocusedInput()==="opacity",ariaPostLabel:()=>ck(this.model)?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-fill-opacity"),hasError:()=>!ck(this.model),handleLatexChanged:this.bindFn(this.dispatchOpacityLatexIfChanged),dataLabelAttributeValue:this.const("fill-opacity"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"opacity")})),Xr.createElement(wM,{predicate:this.props.isFirstOpenSection},()=>Xr.createElement(yo,{controller:this.props.controller,colorLatex:()=>this.model.colorLatex,selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected)})))))}getFillOpacity(){return this.controller.isGeometry()&&xl(this.model)?""+.2:""+.4}isInequality(){return El(this.model)}toggleFillVisible(){this.controller.dispatch({type:"set-item-fill",id:this.id,fill:!this.props.isOpen()})}dispatchOpacityLatexIfChanged(e){this.model.fillOpacity!==e&&this.controller.dispatch({type:"set-item-fillopacity",id:this.id,fillOpacity:e})}};var ti=__dcg_shared_module_exports__['h'](j());var xt=__dcg_shared_module_exports__['h'](j());var{If:X3,Switch:Q3}=xt.Components,nE=class extends xt.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return xt.createElement("div",{class:xt.const("dcg-clickable-image-info-view"),role:xt.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-clickable-image-options")},xt.createElement("div",{class:xt.const("dcg-clickable-image-state-container")},xt.createElement(De,{tooltip:()=>this.tooltip("hovered"),gravity:this.const("s")},xt.createElement(Uc,{controller:()=>this.controller,ariaLabel:()=>this.tooltip("hovered"),onFileChange:e=>this.updateImage("hovered",e),readonly:()=>this.controller.isItemReadonly(this.id)},xt.createElement(Q3,{key:this.bindFn(this.hoveredStatus)},()=>xt.createElement("div",{class:xt.const("dcg-clickable-image-state"),style:()=>this.getStyleForState("hovered")})))),xt.createElement(X3,{predicate:()=>!!this.model.clickableInfo.hoveredImage},()=>xt.createElement("div",{class:xt.const("dcg-clickable-image-state-close"),onTap:()=>this.removeImageState("hovered"),ariaLabel:()=>this.controller.s("graphing-calculator-label-remove-hovered-image"),role:xt.const("button"),tabIndex:xt.const(0)},xt.createElement("i",{class:xt.const("dcg-icon-remove"),"aria-hidden":xt.const("true")}))),xt.createElement("div",{role:xt.const("heading"),"aria-level":xt.const("2"),class:xt.const("dcg-clickable-image-label")},()=>this.controller.s("graphing-calculator-label-hovered"))),xt.createElement("div",{class:xt.const("dcg-clickable-image-state-container")},xt.createElement(De,{tooltip:()=>this.tooltip("depressed"),gravity:this.const("s")},xt.createElement(Uc,{controller:()=>this.controller,ariaLabel:()=>this.tooltip("depressed"),onFileChange:e=>this.updateImage("depressed",e),readonly:()=>this.controller.isItemReadonly(this.id)},xt.createElement(Q3,{key:this.bindFn(this.depressedStatus)},()=>xt.createElement("div",{class:xt.const("dcg-clickable-image-state"),style:()=>this.getStyleForState("depressed")})))),xt.createElement(X3,{predicate:()=>!!this.model.clickableInfo.depressedImage},()=>xt.createElement("div",{class:xt.const("dcg-clickable-image-state-close"),onTap:()=>this.removeImageState("depressed"),ariaLabel:()=>this.controller.s("graphing-calculator-label-remove-depressed-image"),role:xt.const("button"),tabIndex:xt.const(0)},xt.createElement("i",{class:xt.const("dcg-icon-remove"),"aria-hidden":xt.const("true")}))),xt.createElement("div",{role:xt.const("heading"),"aria-level":xt.const("2"),class:xt.const("dcg-clickable-image-label")},()=>this.controller.s("graphing-calculator-label-depressed"))))}hoveredStatus(){return this.hoveredUploading?"loading":"background"}depressedStatus(){return this.depressedUploading?"loading":"background"}tooltip(e){return(e==="hovered"?this.model.clickableInfo.hoveredImage:this.model.clickableInfo.depressedImage)?e==="depressed"?this.controller.s("graphing-calculator-label-change-depressed-image-tooltip"):this.controller.s("graphing-calculator-label-change-hovered-image-tooltip"):e==="depressed"?this.controller.s("graphing-calculator-label-add-depressed-image-tooltip"):this.controller.s("graphing-calculator-label-add-hovered-image-tooltip")}getImageURLForState(e){let i;if(e==="hovered"){if(this.hoveredStatus()!=="background")return"";i="hoveredImage"}else{if(this.depressedStatus()!=="background")return"";i="depressedImage"}let r=this.model.clickableInfo[i];return r?`url(${r})`:`url(${this.model.image_url})`}getStyleForState(e){let i={"background-image":this.getImageURLForState(e),opacity:1};return e==="hovered"&&!this.model.clickableInfo.hoveredImage&&(i.opacity=.5),i}removeImageState(e){e==="hovered"?this.controller.dispatch({type:"set-hovered-image",id:this.model.id,url:""}):this.controller.dispatch({type:"set-depressed-image",id:this.model.id,url:""})}updateImage(e,i){if(!i||!i[0])return;let r=i[0];e==="hovered"&&(this.hoveredUploading=!0),e==="depressed"&&(this.depressedUploading=!0),this.controller.getGraphSettings().config.imageUploadCallback(r,(o,n)=>{e==="hovered"&&(this.hoveredUploading=!1),e==="depressed"&&(this.depressedUploading=!1),!o&&n&&(e==="hovered"?this.controller.dispatch({type:"set-hovered-image",id:this.model.id,url:n}):this.controller.dispatch({type:"set-depressed-image",id:this.model.id,url:n}))})}};var{If:aE,IfDefined:r$,Textarea:o$}=ti.Components,Jg=class extends Ar{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return ti.createElement("div",{class:ti.const("dcg-options-menu-section dcg-clickable-section")},ti.createElement("div",{class:ti.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-clickable"),ti.createElement(Ui,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-make-clickable"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleClickable)})),ti.createElement(aE,{predicate:this.props.isOpen},()=>ti.createElement("div",{class:ti.const("dcg-options-menu-content")},ti.createElement("div",{class:ti.const("dcg-clickable-menu-row")},ti.createElement("span",{class:ti.const("dcg-input-label")},()=>this.controller.s("graphing-calculator-label-update-on-click")),ti.createElement(Se,{latex:()=>this.model.clickableInfo.latex,placeholder:this.const(""),isFocused:()=>this.getFocusedInput()==="updaterule",capExpressionSize:()=>!!this.controller.getGraphSettings().config.capExpressionSize,selectOnFocus:this.const(!0),config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.controller.s("graphing-calculator-narration-click-action"),getAriaPostLabel:this.const(""),hasError:()=>this.hasError(),onUserChangedLatex:e=>this.dispatchUpdateRuleLatexIfChanged(e),onExpressionSizeExceeded:()=>this.controller.dispatch({type:"expression-size-exceeded"}),onFocusedChanged:e=>this.handleFocusedChanged(e,"updaterule"),dataLabelAttributeValue:this.const("click-handler"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled()}),r$(()=>this.packedError(),e=>ti.createElement("span",{class:ti.const("dcg-clickable-info-error-container")},ti.createElement(Oo,{error:()=>this.controller.unpack(e()),gravity:this.const("s"),size:this.const("small")})))),ti.createElement(aE,{predicate:this.bindFn(this.isList)},()=>ti.createElement("div",{class:ti.const("dcg-clickable-list-index-notice")},ti.createElement($d,{i18n:this.const(this.controller),key:this.const("graphing-calculator-label-list-index")},ti.const("Use"),ti.const(" "),ti.createElement("span",{class:()=>({"dcg-index-variable-marker":!0,"dcg-btn":!0,"dcg-btn-light-gray":!0,"dcg-mathquill-has-focus":this.getFocusedInput()==="updaterule","dcg-do-not-blur":!0}),onTap:this.bindFn(this.insertIndex)},ti.const("index")),ti.const(" "),ti.const("to reference the clicked index in the list.")))),ti.createElement(aE,{predicate:()=>this.model.type!=="image"},()=>ti.createElement(o$,{placeholder:()=>this.controller.s("graphing-calculator-text-add-screen-reader-label-placeholder"),value:()=>this.model.description,onInput:e=>this.controller.dispatch({type:"set-item-description",id:this.model.id,description:e})})),ti.createElement(aE,{predicate:()=>this.model.type==="image"},()=>ti.createElement("div",{class:ti.const("dcg-clickable-menu-row")},ti.createElement(nE,{controller:()=>this.controller,model:()=>this.model}))))))}insertIndex(){this.controller.dispatch({type:"keypad/type-text",text:"index"})}isList(){return this.model.formula?!!this.model.formula.is_concrete_list:!1}hasError(){return this.packedError()!==void 0}packedError(){if(this.model.formula.click_handler&&this.model.formula.click_handler.status==="error")return this.model.formula.click_handler.error}toggleClickable(){this.controller.dispatch({type:"set-clickableinfo-prop",id:this.model.id,prop:"enabled",value:!this.model.clickableInfo.enabled}),this.model.clickableInfo.enabled&&this.handleFocusedChanged(!0,"updaterule")}dispatchUpdateRuleLatexIfChanged(e){this.model.clickableInfo.latex!==e&&this.controller.dispatch({type:"set-clickableinfo-rule-latex",id:this.id,latex:e})}getMQConfig(){return this.controller.getMathquillConfig({additionalOperators:["index"]})}};var Mi=__dcg_shared_module_exports__['h'](j());var $c=__dcg_shared_module_exports__['h'](j());var Xg=class extends Ar{template(){return $c.createElement("div",{class:$c.const("dcg-iconed-mathquill-row dcg-point-opacity-row")},$c.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-opacity-tooltip"),sticky:this.const(!0),gravity:this.const("s")},$c.createElement("i",{class:$c.const("dcg-icon-opacity"),"aria-hidden":$c.const("true")})),$c.createElement(Lt,{latex:()=>this.model.pointOpacity,placeholder:this.bindFn(this.getPointOpacityPlaceholder),isFocused:()=>this.getFocusedInput()==="pointopacity",ariaPostLabel:()=>this.isPointOpacityValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-line-opacity"),hasError:()=>!this.isPointOpacityValid(),handleLatexChanged:this.bindFn(this.dispatchPointOpacityLatexIfChanged),dataLabelAttributeValue:this.const("point-opacity"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"pointopacity")}))}isPointOpacityValid(){return this.model.type==="expression"?nO(this.model):this.model.type==="table-column"?WA(this.model):!1}dispatchPointOpacityLatexIfChanged(e){this.model.pointOpacity!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-pointopacity",id:this.id,pointOpacity:e}):this.controller.dispatch({type:"set-tablecolumn-pointopacity",columnId:this.model.id,tableId:this.model.table.id,pointOpacity:e}))}getPointOpacityPlaceholder(){return this.getDragMode()==="NONE"?`${.9}`:"1"}getDragMode(){return this.model.type==="expression"?qi(this.model)||this.model.dragMode:this.model.dragMode}};var{If:sE}=Mi.Components,Qg=class extends Ar{template(){return Mi.createElement("div",{class:Mi.const("dcg-options-menu-section")},Mi.createElement("div",{class:Mi.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-points"),Mi.createElement(Ui,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-points-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.togglePointsVisible)})),Mi.createElement(sE,{predicate:this.props.isOpen},()=>Mi.createElement("div",{class:Mi.const("dcg-options-menu-content")},Mi.createElement("div",{class:Mi.const("dcg-options-flex-container")},Mi.createElement("div",{class:Mi.const("dcg-options-left-side")},Mi.createElement(Xg,__dcg_shared_module_exports__['a']({},this.props)),Mi.createElement(sE,{predicate:()=>!this.isDraggable()},()=>Mi.createElement("div",{class:Mi.const("dcg-iconed-mathquill-row")},Mi.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-point-size-tooltip"),gravity:this.const("s"),sticky:this.const(!0)},Mi.createElement("i",{class:Mi.const("dcg-icon-line-thickness"),"aria-hidden":Mi.const("true")})),Mi.createElement(Lt,{latex:()=>this.model.pointSize,placeholder:this.bindFn(this.getDefaultPointSize),isFocused:()=>this.getFocusedInput()==="pointsize",ariaPostLabel:()=>this.isPointSizeValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-point-size"),hasError:()=>!this.isPointSizeValid(),handleLatexChanged:e=>this.dispatchPointSizeLatexIfChanged(e),dataLabelAttributeValue:this.const("point-size"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"pointsize")})))),Mi.createElement("div",{class:Mi.const("dcg-options-right-side")},Mi.createElement(sE,{predicate:()=>!this.isDraggable()},()=>Mi.createElement(Ni,{staticConfig:this.bindFn(this.getPointStyleOptions),ariaGroupLabel:()=>this.controller.s("graphing-calculator-heading-style"),theme:this.const("mini")})))),Mi.createElement(sE,{predicate:this.props.isFirstOpenSection},()=>Mi.createElement(yo,{controller:this.props.controller,colorLatex:()=>this.model.colorLatex,selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected)})))))}getPointStyleOptions(){return["POINT","OPEN","CROSS"].map(i=>({key:i,icon:()=>this.getStyleIcon(i),ariaLabel:()=>this.getStyleAria(i),selected:()=>this.model.pointStyle===i,class:()=>"dcg-point-segmented-option",onSelect:()=>{this.onPointStyleSelected(i)}}))}getStyleIcon(e){switch(e){case"POINT":return"dcg-icon-point";case"OPEN":return"dcg-icon-open";case"CROSS":return"dcg-icon-cross"}}getStyleAria(e){let i=this.controller.s;switch(e){case"POINT":return i("graphing-calculator-narration-point-style-point");case"OPEN":return i("graphing-calculator-narration-point-style-open");case"CROSS":return i("graphing-calculator-narration-point-style-cross")}}isPointSizeValid(){return this.model.type==="expression"?vv(this.model):this.model.type==="table-column"?HA(this.model):!1}onPointStyleSelected(e){this.model.pointStyle!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-pointstyle",id:this.id,pointStyle:e}):this.controller.dispatch({type:"set-tablecolumn-pointstyle",columnId:this.model.id,tableId:this.model.table.id,pointStyle:e}))}dispatchPointSizeLatexIfChanged(e){this.model.pointSize!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-pointsize",id:this.id,pointSize:e}):this.controller.dispatch({type:"set-tablecolumn-pointsize",columnId:this.model.id,tableId:this.model.table.id,pointSize:e}))}isDraggable(){return this.getDragMode()!=="NONE"}togglePointsVisible(){this.model.type==="expression"&&En(this.model)?this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id}):this.model.type==="expression"?this.controller.dispatch({type:"set-item-points",id:this.id,points:!this.props.isOpen()}):this.controller.dispatch({type:"set-tablecolumn-points",columnId:this.model.id,tableId:this.model.table.id,bool:!this.props.isOpen()})}getDragMode(){return this.model.type==="expression"?qi(this.model)||this.model.dragMode:this.model.dragMode}getDefaultPointSize(){return this.model.type==="expression"&&wc(this.model)?`${14}`:`${9}`}};var Ct=__dcg_shared_module_exports__['h'](j());var en=__dcg_shared_module_exports__['h'](j());var{For:a$}=en.Components,s$=[{orientation:"default",cssClass:"dcg-label-orientation-center",description:"graphing-calculator-text-label-orientation-default"},{orientation:"above",cssClass:"dcg-label-orientation-above",description:"graphing-calculator-text-label-orientation-above"},{orientation:"above_right",cssClass:"dcg-label-orientation-above-right",description:"graphing-calculator-text-label-orientation-above-right"},{orientation:"right",cssClass:"dcg-label-orientation-right",description:"graphing-calculator-text-label-orientation-right"},{orientation:"below_right",cssClass:"dcg-label-orientation-below-right",description:"graphing-calculator-text-label-orientation-below-right"},{orientation:"below",cssClass:"dcg-label-orientation-below",description:"graphing-calculator-text-label-orientation-below"},{orientation:"below_left",cssClass:"dcg-label-orientation-below-left",description:"graphing-calculator-text-label-orientation-below-left"},{orientation:"left",cssClass:"dcg-label-orientation-left",description:"graphing-calculator-text-label-orientation-left"},{orientation:"above_left",cssClass:"dcg-label-orientation-above-left",description:"graphing-calculator-text-label-orientation-above-left"}],lE=class extends en.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return en.createElement("div",{class:en.const("dcg-label-orientation-view"),style:()=>`transform: rotate(${this.getCSSRotationValue()});`},en.createElement("span",{class:en.const("dcg-vertical-orientation-indicator")}),en.createElement(a$,{each:()=>s$,key:e=>e.orientation},en.createElement("div",{class:en.const("dcg-label-orientations"),role:en.const("radiogroup"),"aria-label":()=>this.controller.s("graphing-calculator-heading-label-orientation")},e=>en.createElement("div",{class:()=>({[e.cssClass]:!0,"dcg-orientation-option":!0,"dcg-selected":this.isSelected(e.orientation),"dcg-orientation-disabled":this.isDisabled(e.orientation)}),role:en.const("radio"),tabindex:en.const("0"),"aria-label":()=>this.controller.s(e.description),"aria-checked":()=>this.getOrientation()===e.orientation,onTap:()=>this.onTapOrientation(e.orientation)},en.createElement("i",{class:()=>({"dcg-icon-chevron-left":e.orientation!=="default"})})))))}isDisabled(e){return e!=="default"?!1:this.isPointVisible()?!0:this.model.labelOrientation==="default"}isSelected(e){return e==="default"&&e===this.model.labelOrientation?!this.isPointVisible():e===this.model.labelOrientation}isPointVisible(){return this.model.hidden?!1:En(this.model)?!this.model.hidden:this.model.points}getCSSRotationValue(){let e=sO(this.model);return`${Array.isArray(e)?0:e}rad`}getOrientation(){return this.props.model().labelOrientation}onTapOrientation(e){e===this.getOrientation()&&(e="default"),this.controller.dispatch({type:"set-item-label-orientation",id:this.id,labelOrientation:e})}};var{If:Zg}=Ct.Components,cE=class extends Ar{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return Ct.createElement("div",{class:Ct.const("dcg-options-menu-section")},Ct.createElement("div",{class:Ct.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-label"),Ct.createElement(Ui,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-label-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleLabelVisible)})),Ct.createElement(Zg,{predicate:this.props.isOpen},()=>Ct.createElement("div",{class:Ct.const("dcg-options-menu-content")},Ct.createElement("div",{class:Ct.const("dcg-options-flex-container")},Ct.createElement("div",{class:Ct.const("dcg-options-left-side")},Ct.createElement(Zg,{predicate:this.props.isFirstOpenSection},()=>Ct.createElement(Xg,__dcg_shared_module_exports__['a']({},this.props))),Ct.createElement("div",{class:Ct.const("dcg-iconed-mathquill-row dcg-label-size-row")},Ct.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-label-size-tooltip"),sticky:this.const(!0),gravity:this.const("s")},Ct.createElement("span",{class:Ct.const("dcg-font-size")},Ct.const("A"))),Ct.createElement(Lt,{latex:()=>this.model.labelSize,placeholder:()=>"1",isFocused:()=>this.getFocusedInput()==="labelsize",ariaPostLabel:()=>dk(this.model)?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-label-size"),hasError:()=>!dk(this.model),handleLatexChanged:this.bindFn(this.dispatchLabelSizeIfChanged),dataLabelAttributeValue:this.const("label-size"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"labelsize")})),Ct.createElement("div",{class:()=>({"dcg-iconed-mathquill-row":!0,"dcg-label-angle-row":!0,"dcg-suffix-degree":this.props.controller().getGraphSettings().degreeMode,"dcg-suffix-radian":!this.props.controller().getGraphSettings().degreeMode})},Ct.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-angle-tooltip"),sticky:this.const(!0)},Ct.createElement("i",{class:Ct.const("dcg-icon-angle"),"aria-hidden":Ct.const("true")})),Ct.createElement(Lt,{latex:()=>this.model.labelAngle,placeholder:()=>"0",isFocused:()=>this.getFocusedInput()==="labelangle",ariaPostLabel:()=>pk(this.model)?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-label-angle"),hasError:()=>!pk(this.model),handleLatexChanged:this.bindFn(this.dispatchLabelAngleIfChanged),dataLabelAttributeValue:this.const("label-angle"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"labelangle")}))),Ct.createElement("div",{class:Ct.const("dcg-options-right-side")},Ct.createElement(lE,{controller:()=>this.controller,model:()=>this.model}))),Ct.createElement(Zg,{predicate:this.props.isFirstOpenSection},()=>Ct.createElement(yo,{controller:this.props.controller,colorLatex:()=>this.model.colorLatex,selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected)})),Ct.createElement(Zg,{predicate:()=>this.controller.canUseAdvancedStyling()},()=>Ct.createElement("div",{class:Ct.const("dcg-label-advanced")},Ct.createElement($e,{checked:this.bindFn(this.getWhiteTextOutline),onChange:this.bindFn(this.setWhiteTextOutline),disabled:()=>this.getEditable()},()=>this.controller.s("graphing-calculator-button-label-text-outline")),Ct.createElement("div",{role:Ct.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-heading-advanced")},Ct.createElement(Zg,{predicate:()=>this.shouldShowHoverLabelCheckbox()},()=>Ct.createElement($e,{checked:this.bindFn(this.getInteractiveLabel),onChange:this.bindFn(this.setInteractiveLabel)},()=>this.controller.s("graphing-calculator-button-label-show-on-hover"))),Ct.createElement(Zg,{predicate:this.bindFn(this.shouldShowEditableLabelToggle)},()=>Ct.createElement($e,{checked:this.bindFn(this.getEditable),onChange:this.bindFn(this.setEditable)},()=>this.controller.s("graphing-calculator-button-label-editable")))))))))}getWhiteTextOutline(){return this.getEditable()?!1:!this.model.suppressTextOutline}setWhiteTextOutline(e){this.controller.dispatch({type:"set-suppress-text-outline",id:this.id,suppressTextOutline:!e})}setInteractiveLabel(e){this.controller.dispatch({type:"set-item-interactive-label",id:this.id,interactiveLabel:e})}getInteractiveLabel(){return!!this.model.interactiveLabel}setEditable(e){if(e){let i=__dcg_shared_module_exports__['ud'](this.model.label)==="latex"?"MATH":"TEXT";this.controller.dispatch({type:"set-item-editable-label-mode",id:this.id,editableLabelMode:i})}else this.controller.dispatch({type:"set-item-editable-label-mode",id:this.id,editableLabelMode:"NONE"})}getEditable(){return this.model.editableLabelMode!=="NONE"}shouldShowEditableLabelToggle(){return En(this.model)}shouldShowHoverLabelCheckbox(){return qi(this.model)==="NONE"}dispatchLabelAngleIfChanged(e){this.model.labelAngle!==e&&this.controller.dispatch({type:"set-item-labelangle",id:this.id,labelAngle:e})}dispatchLabelSizeIfChanged(e){this.model.labelSize!==e&&this.controller.dispatch({type:"set-item-labelSize",id:this.id,labelSize:e})}toggleLabelVisible(){this.controller.dispatch({type:"set-item-showlabel",id:this.id,showLabel:!this.props.isOpen()})}};var zo=__dcg_shared_module_exports__['h'](j());var{If:l$,For:c$}=zo.Components,em=class extends Ar{template(){return zo.createElement("div",{class:zo.const("dcg-options-menu-section")},zo.createElement("div",{class:zo.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-drag"),zo.createElement(Ui,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-menu-drag-enabled"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleDragEnabled)})),zo.createElement(l$,{predicate:this.props.isOpen},()=>zo.createElement("div",{class:zo.const("dcg-options-menu-content")},zo.createElement(c$,{each:()=>["X","Y","XY"]},zo.createElement("div",{class:zo.const("dcg-style-icons"),role:zo.const("radiogroup")},e=>zo.createElement("div",{class:()=>({"dcg-style-icon-container":!0,"dcg-disabled":this.isDisabled(e)}),onTap:()=>this.onDragModeSelected(e),role:zo.const("radio"),tabindex:()=>this.isDisabled(e)?-1:0,"aria-label":()=>e==="X"?this.controller.s("graphing-calculator-narration-drag-mode-x"):e==="Y"?this.controller.s("graphing-calculator-narration-drag-mode-y"):e==="XY"?this.controller.s("graphing-calculator-narration-drag-mode-xy"):this.controller.raw(""),"aria-checked":()=>this.getDragMode()===e},zo.createElement(Ir,{backgroundColor:()=>({type:"single-color",value:"#000"}),semiTransparent:()=>this.getDragMode()!==e,iconType:()=>e==="X"?"movable-horizontal":e==="Y"?"movable-vertical":"movable-both"})))))))}isDisabled(e){let i=this.controller.getEnabledDragModesForItem(this.id);return!__dcg_shared_module_exports__['za'](i,e)}onDragModeSelected(e){if(this.model.type==="expression"){if(this.isDisabled(e))return;this.controller.dispatch({type:"set-item-dragmode",id:this.id,dragMode:e})}else{let i=this.model.id,r=this.model.table.id;this.controller.dispatch({type:"set-tablecolumn-dragmode",tableId:r,columnId:i,dragMode:e})}}getDragMode(){return this.model.type==="expression"?qi(this.model)||this.model.dragMode:this.model.dragMode}toggleDragEnabled(){let e=this.getDragMode()!=="NONE"?"NONE":"XY";this.model.type==="expression"?this.controller.dispatch({type:"set-item-dragmode",id:this.id,dragMode:e}):this.onDragModeSelected(e)}};var Co=__dcg_shared_module_exports__['h'](j());var{If:p$}=Co.Components,dE=class extends Ar{template(){return Co.createElement("div",{class:Co.const("dcg-options-menu-section")},Co.createElement("div",{class:Co.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-points"),Co.createElement(Ui,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-points-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.togglePointsVisible)})),Co.createElement(p$,{predicate:()=>this.props.isOpen()},()=>Co.createElement("div",{class:Co.const("dcg-options-menu-content")},Co.createElement("div",{class:Co.const("dcg-iconed-mathquill-row dcg-line-thickness-row-3d")},Co.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-point-size-3d-tooltip"),gravity:this.const("s"),sticky:this.const(!0)},Co.createElement("i",{class:Co.const("dcg-icon-line-thickness"),"aria-hidden":Co.const("true")})),Co.createElement(Lt,{latex:()=>this.model.pointSize,placeholder:this.bindFn(this.getDefaultPointSize),isFocused:()=>this.getFocusedInput()==="pointsize",ariaPostLabel:()=>this.isPointSizeValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-point-size"),hasError:()=>!this.isPointSizeValid(),handleLatexChanged:e=>this.dispatchPointSizeLatexIfChanged(e),dataLabelAttributeValue:this.const("point-size"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"pointsize")})),Co.createElement(yo,{controller:this.props.controller,colorLatex:()=>this.model.colorLatex,selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected),hideCustomColors:()=>!1,hideColorFunctions:()=>!0}))))}togglePointsVisible(){this.controller.dispatch({type:"set-item-points",id:this.id,points:!this.props.isOpen()})}isPointSizeValid(){return this.model.type==="expression"?vv(this.model):!1}dispatchPointSizeLatexIfChanged(e){this.model.pointSize!==e&&this.model.type==="expression"&&this.controller.dispatch({type:"set-item-pointsize",id:this.id,pointSize:e})}getDefaultPointSize(){return`${3}`}};var no=__dcg_shared_module_exports__['h'](j());var{If:Z3}=no.Components,pE=class extends Ar{template(){return no.createElement("div",{class:no.const("dcg-options-menu-section")},no.createElement("div",{class:no.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-lines"),no.createElement(Ui,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-lines-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleLinesVisible)})),no.createElement(Z3,{predicate:()=>this.props.isOpen()},()=>no.createElement("div",{class:no.const("dcg-options-menu-content")},no.createElement("div",{class:no.const("dcg-iconed-mathquill-row dcg-line-thickness-row-3d")},no.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-line-thickness-3d-tooltip"),sticky:this.const(!0),gravity:this.const("s")},no.createElement("i",{class:no.const("dcg-icon-line-thickness"),"aria-hidden":no.const("true")})),no.createElement(Lt,{latex:()=>this.model.lineWidth,placeholder:()=>`${1}`,isFocused:()=>this.getFocusedInput()==="linewidth",ariaPostLabel:()=>this.isLineWidthValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-label-line-thickness-3d-tooltip"),hasError:()=>!this.isLineWidthValid(),handleLatexChanged:this.bindFn(this.dispatchLineWidthLatexIfChanged),dataLabelAttributeValue:this.const("line-width"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"linewidth")})),no.createElement(Z3,{predicate:this.props.isFirstOpenSection},()=>no.createElement(yo,{controller:this.props.controller,colorLatex:()=>this.model.colorLatex,selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected),hideCustomColors:()=>!1})))))}toggleLinesVisible(){this.controller.dispatch({type:"set-item-lines",id:this.id,lines:!this.props.isOpen()})}isLineWidthValid(){return this.model.type==="expression"?Cv(this.model):!1}dispatchLineWidthLatexIfChanged(e){this.model.lineWidth!==e&&this.model.type==="expression"&&this.controller.dispatch({type:"set-item-linewidth",id:this.id,lineWidth:e})}};var ao=__dcg_shared_module_exports__['h'](j());var{If:vM}=ao.Components,uE=class extends Ar{template(){return ao.createElement("div",{class:ao.const("dcg-options-menu-section")},ao.createElement("div",{class:ao.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-surfaces"),ao.createElement(Ui,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-surfaces-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleSurfacesVisible)})),ao.createElement(vM,{predicate:()=>this.props.isOpen()},()=>ao.createElement("div",{style:ao.const("font-size:85%; margin-top:8px")},ao.createElement(vM,{predicate:()=>!this.isTriangle3D()&&!!uo("beta3d")},()=>ao.createElement("div",null,ao.const("Resolution:"),ao.createElement(Lt,{latex:()=>this.model.resolution,placeholder:()=>this.getDefaultResolution(),isFocused:()=>this.getFocusedInput()==="resolution",ariaPostLabel:()=>this.isResolutionValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-label-resolution-tooltip"),hasError:()=>!this.isResolutionValid(),handleLatexChanged:this.bindFn(this.dispatchResolutionLatexIfChanged),dataLabelAttributeValue:this.const("resolution"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"resolution")}))),ao.createElement(vM,{predicate:this.props.isFirstOpenSection},()=>ao.createElement("div",{class:ao.const("dcg-options-menu-content"),style:ao.const("margin-top:8px")},ao.createElement(yo,{controller:this.props.controller,colorLatex:()=>this.model.colorLatex,selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected),hideCustomColors:()=>!1}))))))}toggleSurfacesVisible(){this.controller.dispatch({type:"set-item-lines",id:this.id,lines:!this.props.isOpen()})}isTriangle3D(){return uv(this.model)}dispatchResolutionLatexIfChanged(e){this.model.resolution!==e&&this.model.type==="expression"&&this.controller.dispatch({type:"set-item-resolution",id:this.id,resolution:e})}isResolutionValid(){return this.model.type==="expression"?aO(this.model):!1}getDefaultResolution(){if(this.model.type==="expression"){if(jP(this.model))return`${40}`;if(YP(this.model))return`${__dcg_shared_module_exports__['wc']}`}return`${__dcg_shared_module_exports__['xc']}`}};Tt();var ds=__dcg_shared_module_exports__['h'](j());var{If:g$}=ds.Components,jd=class extends ds.Class{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return ds.createElement(g$,{predicate:()=>this.isVisible()},()=>ds.createElement("div",{class:ds.const("dcg-options-menu-section dcg-interactivity-section dcg-section-without-title")},ds.createElement("div",{class:ds.const("dcg-options-menu-content")},ds.createElement($e,{checked:()=>ca(this.model),onChange:()=>this.toggleGraphInteractionsDisabled(),ariaLabel:()=>this.controller.s("graphing-calculator-label-disable-graph-interactions")},()=>this.controller.s("graphing-calculator-label-disable-graph-interactions")))))}isVisible(){return this.controller.shouldShowAuthorFeatures()}toggleGraphInteractionsDisabled(){this.model.type==="table-column"?this.controller.dispatch({type:"set-tablecolumn-disable-graph-interactions",tableId:this.model.table.id,columnId:this.model.id,disableGraphInteractions:!ca(this.model)}):this.controller.dispatch({type:"set-item-disable-graph-interactions",id:this.model.id,disableGraphInteractions:!ca(this.model)})}};var{For:m$,If:f$}=Vr.Components;function Ys(t,e){if(!t)return;let i=t.closest(".dcg-options-menu-container"),r=e.findEl(".dcg-container"),o=e.getOpenMenuIcon(),n=!!t.closest(".dcg-table-column-menu");if(!i||!r||!o)return;let a=e.computeMajorLayout(),s=a.list.top+a.list.height,l=a.keypad.top,c=Math.min(s,l),p=r.getBoundingClientRect(),u=o.getBoundingClientRect(),g=c+p.top-u.top,m=i.offsetHeight,w=0;m>g&&(w=+g-m);let C=n?!w:-w<m-38;i.style.marginTop=`${n&&w<0?w-34:w}px`,t.style.marginTop=`${-w}px`,t.style.display=C?"":"none"}function bu(t,e){requestAnimationFrame(()=>{let i=e.getExppanelSelector(),r=e.getOpenMenuIcon();t&&i&&r&&i.contains(r)&&H(i).on(`scroll.${t}`,()=>{H(i).off(`scroll.${t}`);let o=e.getFocusLocation(),n=e.getOpenItemMenu();o&&n&&o.type==="expression-menu"&&"model"in n&&o.id===n.model.id&&e.dispatch({type:"blur-focus-location",location:o}),e.dispatch({type:"close-item-settings-menu"})})})}function yu(t,e){let i=e.getExppanelSelector();i&&t&&H(i).off(`scroll.${t}`)}var tm=class extends Vr.Class{init(){var e;this.controller=this.props.controller(),this.guid=(e=this.controller.getOpenItemMenu())==null?void 0:e.guid}didMount(){bu(this.guid,this.controller)}willUnmount(){yu(this.guid,this.controller)}didUpdate(){Ys(this.arrowElt,this.controller)}template(){let e=this.props.model();return Vr.createElement("div",{class:()=>({"dcg-expressions-options-menu":!0,"dcg-options-menu":!0}),role:Vr.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-options-menu")},Vr.createElement(m$,{each:this.bindFn(this.getSections)},Vr.createElement("div",null,i=>{switch(i){case"points":return Vr.createElement(Qg,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("points"),isFirstOpenSection:()=>this.isFirstOpenSection("points")});case"label":return Vr.createElement(cE,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("label"),isFirstOpenSection:()=>this.isFirstOpenSection("label")});case"drag":return Vr.createElement(em,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("drag"),isFirstOpenSection:()=>this.isFirstOpenSection("drag")});case"lines":return Vr.createElement(Yg,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("lines"),isFirstOpenSection:()=>this.isFirstOpenSection("lines")});case"fill":return Vr.createElement(oE,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("fill"),isFirstOpenSection:()=>this.isFirstOpenSection("fill")});case"colors-only":return Vr.createElement(rE,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:this.const(!0),isFirstOpenSection:this.const(!0)});case"points3d":return Vr.createElement(dE,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("points3d"),isFirstOpenSection:()=>this.isFirstOpenSection("points3d")});case"lines3d":return Vr.createElement(pE,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("lines3d"),isFirstOpenSection:()=>this.isFirstOpenSection("lines3d")});case"surfaces":return Vr.createElement(uE,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("surfaces"),isFirstOpenSection:()=>this.isFirstOpenSection("surfaces")})}})),Vr.createElement(f$,{predicate:this.bindFn(this.shouldShowClickableSection)},()=>Vr.createElement(Jg,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>!!e.clickableInfo.enabled,isFirstOpenSection:this.const(!1)})),Vr.createElement(jd,{model:()=>e,controller:()=>this.props.controller()}),Vr.createElement("div",{class:Vr.const("dcg-triangle"),didMount:this.bindFn(this.didMountArrow),didUnmount:()=>this.arrowElt=void 0}))}didMountArrow(e){this.arrowElt=e,Ys(this.arrowElt,this.controller)}shouldShowClickableSection(){let e=this.props.model();return this.controller.areActionsEnabled()&&hk(e)&&!this.controller.isItemReadonly(e.id)&&(this.controller.shouldShowAuthorFeatures()||!ca(e))}shouldShowDragSection(){let e=this.props.model();return this.controller.shouldShowAuthorFeatures()||!ca(e)}getSections(){let e=this.props.model();if(this.controller.isThreeDMode()){if(hv(e))return e.extendTo3D?["surfaces"]:["lines3d"];if(ik(e))return["surfaces"];if(Pp(e)||tk(e)||ok(e)||nk(e))return["lines3d"];if(En(e)||pv(e))return["points3d"];if(Df(e)||mv(e))return["points3d","lines3d"]}return Op(e)||fd(e)||dv(e)||eO(e)||ud(e)?["colors-only"]:bd(e)?["lines"]:wc(e)?["points"]:Df(e)?["points","label","lines"]:En(e)?e.formula.move_strategy&&this.shouldShowDragSection()?["points","label","drag"]:["points","label"]:Pp(e)||xl(e)?["lines","fill"]:El(e)?Rh(e)||gv(e)||rk(e)?["lines"]:["lines","fill"]:["lines"]}isFirstOpenSection(e){return this.getSections().find(i=>this.isSectionOpen(i))===e}isSectionOpen(e){let i=this.props.model(),{points:r,lines:o,fill:n}=i,a=__dcg_shared_module_exports__['oc'](i.formula.expression_type,{points:r,lines:o,fill:n});switch(e){case"lines":return i.hidden?!1:a.lines;case"label":return Es(i);case"fill":return i.hidden?!1:El(i)?!0:a.fill;case"points":return i.hidden?!1:En(i)?!i.hidden:a.points;case"drag":return qi(i)!=="NONE";case"colors-only":return!0;case"points3d":return i.hidden?!1:a.points;case"lines3d":case"surfaces":return i.hidden?!1:a.lines}}};var wt=__dcg_shared_module_exports__['h'](j());var{For:b$,If:hE,Textarea:y$}=wt.Components,gE=class extends wt.Class{template(){return wt.createElement("div",{class:wt.const("dcg-image-aria-container")},wt.createElement(y$,{placeholder:()=>this.props.controller().s("graphing-calculator-text-add-screen-reader-label-placeholder"),value:()=>this.props.model().description,onInput:e=>this.props.controller().dispatch({type:"set-item-description",id:this.props.model().id,description:e})}))}},mE=class extends wt.Class{init(){var e;this.controller=this.props.controller(),this.model=this.props.model(),this.guid=(e=this.controller.getOpenItemMenu())==null?void 0:e.guid}didMountArrow(e){this.arrowElt=e,Ys(this.arrowElt,this.controller)}didMount(){bu(this.guid,this.controller)}willUnmount(){yu(this.guid,this.controller)}didUpdate(){Ys(this.arrowElt,this.controller)}template(){let e=this.model;return wt.createElement("div",{class:wt.const("dcg-image-options-menu dcg-options-menu")},wt.createElement("div",{class:wt.const("dcg-opacities-menu dcg-options-menu-section")},wt.createElement("div",{role:wt.const("heading"),"aria-level":wt.const("2"),class:wt.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-image-opacity")),wt.createElement(b$,{each:()=>this.controller.getImageOpacities()},wt.createElement("div",{class:wt.const("dcg-opacities-menu-flex"),role:wt.const("group"),"aria-label":()=>this.controller.s("graphing-calculator-heading-image-opacity")},i=>wt.createElement("span",{class:wt.const("dcg-opacity-option"),role:wt.const("button"),tabindex:wt.const(0),"aria-label":()=>`opacity: ${i}`,"aria-pressed":()=>this.isOpacitySelected(i),handleevent:wt.const("true"),onTap:()=>this.onSelectOpacity(i)},wt.createElement(Ir,{backgroundImage:this.bindFn(this.getBackgroundImage),iconType:()=>this.isOpacitySelected(i)?"check":"none",backgroundOpacity:()=>parseFloat(i)}))))),wt.createElement("div",{class:wt.const("dcg-styles-div dcg-options-menu-section dcg-section-without-title")},wt.createElement("div",{class:wt.const("dcg-styles-menu"),role:wt.const("group"),"aria-label":()=>this.controller.s("graphing-calculator-narration-image-styles")},wt.createElement($e,{checked:()=>!e.foreground,onChange:this.bindFn(this.onToggleForeground)},()=>this.controller.s("graphing-calculator-button-place-image-behind-graphs"))),wt.createElement(hE,{predicate:()=>this.shouldShowDraggableCheckbox()},()=>wt.createElement("div",{class:wt.const("dcg-draggable-checkbox-container")},wt.createElement($e,{checked:()=>vs(e),onChange:this.bindFn(this.onToggleDraggable)},()=>this.controller.s("graphing-calculator-button-draggable"))))),wt.createElement(hE,{predicate:()=>vs(e)},()=>wt.createElement(gE,__dcg_shared_module_exports__['a']({},this.props))),wt.createElement(hE,{predicate:this.bindFn(this.shouldShowClickable)},()=>wt.createElement(Jg,{controller:this.props.controller,model:()=>e,isOpen:()=>!!e.clickableInfo.enabled,isFirstOpenSection:this.const(!1)})),wt.createElement(hE,{predicate:()=>!!e.clickableInfo.enabled&&!vs(e)},()=>wt.createElement(gE,__dcg_shared_module_exports__['a']({},this.props))),wt.createElement(jd,{model:()=>e,controller:()=>this.props.controller()}),wt.createElement("div",{class:wt.const("dcg-triangle"),didMount:this.bindFn(this.didMountArrow),didUnmount:()=>this.arrowElt=void 0}))}onToggleDraggable(){nh(this.model)?this.controller.dispatch({type:"set-image-draggable",id:this.model.id,draggable:!this.model.draggable}):this.makeDraggable()}onToggleForeground(e){this.controller.dispatch({type:"set-image-in-foreground",id:this.model.id,foreground:!e})}onSelectOpacity(e){this.controller.dispatch({type:"set-image-opacity",id:this.model.id,opacity:e})}isOpacitySelected(e){return this.model.opacity===e}getBackgroundImage(){return this.model.image_url===this.lastURL?this.lastEncodedURL:(this.lastURL=this.model.image_url,this.lastEncodedURL='url("'+WS(this.model.image_url)+'")',this.lastEncodedURL)}shouldShowClickable(){return this.controller.shouldIgnoreGraphInteractions(this.model)?!1:this.controller.areActionsEnabled()}makeDraggable(){this.controller.dispatch({type:"convert-image-to-draggable",id:this.model.id})}shouldShowDraggableCheckbox(){if(this.controller.isThreeDMode()||this.controller.shouldIgnoreGraphInteractions(this.model))return!1;let e=nh(this.model);return e?Sv(e):PV(this.model)}};var or=__dcg_shared_module_exports__['h'](j());var So=__dcg_shared_module_exports__['h'](j());var fE=[.05,.1,.15,.2,.35,.5,.75,1,1.5,2,3.5,5,7.5,10,15,20],x$=__dcg_shared_module_exports__['Ca'](fE),w$=__dcg_shared_module_exports__['Ba'](fE),Ty=class extends So.Class{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return So.createElement("div",{class:So.const("dcg-slider-speed-container dcg-do-not-blur"),handleEvent:So.const("true")},So.createElement("span",{class:()=>({"dcg-action-slower":!0,"dcg-disabled":this.isSlowerDisabled()}),onTap:()=>this.animateSlower(),role:So.const("button"),"aria-label":()=>this.getSlowerAriaLabel(),tabindex:()=>this.isSlowerDisabled()?-1:0,"aria-disabled":()=>this.isSlowerDisabled()},So.createElement("i",{class:So.const("dcg-icon-show"),"aria-hidden":So.const("true")})),So.createElement("span",{class:So.const("dcg-variable-speed")},this.bindFn(this.computeSpeed),So.const("x")),So.createElement("span",{class:()=>({"dcg-action-faster":!0,"dcg-disabled":this.isFasterDisabled()}),onTap:()=>this.animateFaster(),role:So.const("button"),"aria-label":()=>this.getFasterAriaLabel(),tabindex:()=>this.isFasterDisabled()?-1:0,"aria-disabled":()=>this.isFasterDisabled()},So.createElement("i",{class:So.const("dcg-icon-show"),"aria-hidden":So.const("true")})))}computeSpeed(){var e=__dcg_shared_module_exports__['$c']/this.model.slider.animationPeriod;return e=Number(e.toFixed(3)),e}isSlowerDisabled(){return x$>=this.computeSpeed()}isFasterDisabled(){return w$<=this.computeSpeed()}animateSlower(){var e=this.computeSpeed(),i=__dcg_shared_module_exports__['wa'](fE,function(r){return r<e});i.length!==0&&this.setPeriodFromSpeed(__dcg_shared_module_exports__['Ba'](i))}animateFaster(){var e=this.computeSpeed(),i=__dcg_shared_module_exports__['wa'](fE,function(r){return r>e});i.length!==0&&this.setPeriodFromSpeed(__dcg_shared_module_exports__['Ca'](i))}setPeriodFromSpeed(e){var i=__dcg_shared_module_exports__['$c']/e;this.controller.dispatch({type:"set-slider-animationperiod",id:this.model.id,animationPeriod:i}),le(this.controller.s("graphing-calculator-narration-slider-animating-at-speed",{speed:e+""}))}getSlowerAriaLabel(){return this.controller.s("graphing-calculator-narration-slider-animate-slower")}getFasterAriaLabel(){return this.controller.s("graphing-calculator-narration-slider-animate-faster")}};var bE=class extends or.Class{init(){var e;this.controller=this.props.controller(),this.model=this.props.model(),this.guid=(e=this.controller.getOpenItemMenu())==null?void 0:e.guid}didMount(){bu(this.guid,this.controller)}willUnmount(){yu(this.guid,this.controller)}didMountArrow(e){this.arrowElt=e,Ys(this.arrowElt,this.controller)}didUpdate(){Ys(this.arrowElt,this.controller)}template(){let e=this.model;return or.createElement("div",{class:or.const("dcg-slider-options-view dcg-options-menu")},or.createElement("div",{class:or.const("dcg-triangle"),didMount:this.bindFn(this.didMountArrow),didUnmount:()=>this.arrowElt=void 0}),or.createElement("div",{class:or.const("dcg-slider-menu")},or.createElement("div",{role:or.const("group"),"aria-label":()=>this.controller.s("graphing-calculator-heading-slider-animation-mode")},or.createElement("div",{role:or.const("heading"),"aria-level":or.const("2"),class:or.const("dcg-title")},()=>this.controller.s("graphing-calculator-heading-slider-animation-mode")),or.createElement(Ni,{ariaGroupLabel:()=>this.controller.s("graphing-calculator-heading-slider-animation-mode"),staticConfig:this.bindFn(this.getAnimationOptions),theme:this.const("mini")}))),or.createElement("div",{class:or.const("dcg-slider-menu dcg-slider-speed-menu"),role:or.const("group"),"aria-label":()=>this.controller.s("graphing-calculator-heading-slider-speed")},or.createElement("div",{role:or.const("heading"),"aria-level":or.const("2"),class:or.const("dcg-title")},()=>this.controller.s("graphing-calculator-heading-slider-speed")),or.createElement("div",{class:or.const("dcg-slider-speed-container")},or.createElement(Ty,{model:()=>e,controller:this.props.controller}))))}getAnimationOptions(){let e=this.model;return["LOOP_FORWARD_REVERSE","LOOP_FORWARD","PLAY_ONCE","PLAY_INDEFINITELY"].map(r=>({key:r,icon:()=>__dcg_shared_module_exports__['n'](r),tooltip:()=>this.getTooltip(r),tooltipGravity:this.const("s"),selected:()=>this.isSelected(r),onSelect:()=>{this.controller.dispatch({type:"set-slider-loopmode",id:e.id,loopMode:r})}}))}getTooltip(e){let i=this.controller.s;switch(e){case"LOOP_FORWARD_REVERSE":return i("graphing-calculator-narration-slider-loop-forwards-and-backwards");case"LOOP_FORWARD":return i("graphing-calculator-narration-slider-repeat-one-direction");case"PLAY_ONCE":return i("graphing-calculator-narration-slider-play-once");case"PLAY_INDEFINITELY":return i("graphing-calculator-narration-slider-play-indefinitely")}}isSelected(e){return this.model.slider.loopMode===e}};var Ln=__dcg_shared_module_exports__['h'](j());var{For:v$}=Ln.Components,yE=class extends Ln.Class{init(){var e;this.controller=this.props.controller(),this.model=this.props.model(),this.guid=(e=this.controller.getOpenItemMenu())==null?void 0:e.guid}didMount(){bu(this.guid,this.controller)}willUnmount(){yu(this.guid,this.controller)}didMountArrow(e){this.arrowElt=e,Ys(this.arrowElt,this.controller)}didUpdate(){Ys(this.arrowElt,this.controller)}template(){let e=this.model;return Ln.createElement("div",{class:()=>({"dcg-table-column-menu":!0,"dcg-options-menu":!0}),role:Ln.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-options-menu")},Ln.createElement(v$,{each:this.bindFn(this.getSections)},Ln.createElement("div",null,i=>{switch(i){case"points":return Ln.createElement(Qg,{model:()=>e,controller:this.props.controller,isOpen:()=>this.isSectionOpen("points"),isFirstOpenSection:()=>this.isFirstOpenSection("points")});case"drag":return Ln.createElement(em,{model:()=>e,controller:this.props.controller,isOpen:()=>this.isSectionOpen("drag"),isFirstOpenSection:()=>this.isFirstOpenSection("drag")});case"lines":return Ln.createElement(Yg,{model:()=>e,controller:this.props.controller,isOpen:()=>this.isSectionOpen("lines"),isFirstOpenSection:()=>this.isFirstOpenSection("lines")})}})),Ln.createElement(jd,{model:()=>e,controller:()=>this.props.controller()}),Ln.createElement("div",{class:Ln.const("dcg-triangle"),didMount:this.bindFn(this.didMountArrow),didUnmount:()=>this.arrowElt=void 0}))}getSections(){return this.model.draggable&&!this.controller.isThreeDMode()&&!this.controller.shouldIgnoreGraphInteractions(this.model)?["points","lines","drag"]:["points","lines"]}isFirstOpenSection(e){let i=this.getSections();for(let r of i){if(r===e)return this.isSectionOpen(e);if(this.isSectionOpen(r))return!1}return!1}isSectionOpen(e){switch(e){case"drag":return this.model.dragMode!=="NONE";case"lines":return!!this.model.lines;case"points":return!!this.model.points}}};var qr=__dcg_shared_module_exports__['h'](j());var{If:C$}=qr.Components,xE=class extends qr.Class{template(){return qr.createElement(C$,{predicate:()=>this.props.controller().hasTermsNotice()},()=>qr.createElement("div",{class:qr.const("dcg-explist-terms-notice-container")},qr.createElement("div",{class:qr.const("dcg-explist-terms-notice")},qr.createElement("i",{class:qr.const("dcg-icon-remove"),role:qr.const("button"),tabindex:qr.const("0"),"aria-label":()=>this.props.controller().s("shared-button-close-message"),onTap:e=>this.props.controller().dispatch({type:"dismiss-terms-notice",focusFirstExpression:e.device==="keyboard"})}),qr.createElement("div",{role:qr.const("banner"),class:qr.const("dcg-top-banner")},()=>this.props.controller().s("frontpage-text-header-terms-update"),qr.createElement("div",null,qr.createElement("a",{class:qr.const("dcg-btn-gray-outline"),target:qr.const("_blank"),href:qr.const("https://blog.desmos.com/articles/desmos-studio-terms-update/")},()=>this.props.controller().s("shared-button-read-more")))))))}};var{If:ps,IfDefined:wE,For:S$,Switch:e5,SwitchUnion:E$}=Pe.Components,My=class extends Pe.Class{constructor(){super(...arguments),this.guid=__dcg_shared_module_exports__['Xa']("listView")}init(){this.controller=this.props.controller()}template(){return Pe.createElement("div",{didMount:this.bindFn(this.didMountContainer)},Pe.createElement("div",{class:Pe.const("dcg-exppanel-outer"),onDrop:this.bindFn(this.onDrop),style:()=>this.computeExppanelOuterStyle()},Pe.createElement(ps,{predicate:()=>this.controller.isFileDraggedOver()},()=>Pe.createElement("div",{class:Pe.const("dcg-drop-image")},Pe.createElement("span",null,()=>this.controller.s("graphing-calculator-label-drop-image-here")))),Pe.createElement("div",{class:()=>{var e;return{"dcg-exppanel-container":!0,"dcg-add-shadow":this.controller.shouldRenderList(),"dcg-global-mute-on":!!((e=this.controller.toneController)!=null&&e.isGlobalMuted())}},style:()=>({transform:this.controller.isListVisible()?void 0:this.controller.isNarrow()?"translate(0, 100%)":"translate(-100%, 0)"})},Pe.createElement(ps,{predicate:()=>this.controller.shouldRenderList()},()=>Pe.createElement(Dy,{controller:this.props.controller,expsScrolled:()=>!!this.exppanel&&this.exppanel.scrollTop>0})),Pe.createElement(ps,{predicate:()=>this.controller.getExpressionSearchOpen()},()=>Pe.createElement(QS,{controller:this.props.controller,expsScrolled:()=>!!this.exppanel&&this.exppanel.scrollTop>0})),Pe.createElement(ps,{predicate:()=>this.controller.getTickerOpen()&&!this.controller.getTicker().filteredBySearch},()=>Pe.createElement(ZS,{controller:this.props.controller,expsScrolled:()=>!!this.exppanel&&this.exppanel.scrollTop>0})),Pe.createElement(ps,{predicate:()=>this.controller.shouldRenderList()},()=>Pe.createElement("div",{class:()=>({"dcg-exppanel":!0,"dcg-disable-horizontal-scroll-to-cursor":!0,"dcg-isDragging":this.controller.isDragDropActive(),"dcg-has-background-color":this.controller.hasBackgroundColor(),"dcg-edit-list-mode":this.controller.isInEditListMode()}),style:()=>({background:this.controller.getBackgroundColor()}),onPaste:this.bindFn(this.onPaste),onTapStart:this.bindFn(this.onExppanelTapstart),didMount:this.bindFn(this.didMountExppanel)},Pe.createElement("div",{class:()=>({"dcg-expressionlist":!0,"dcg-has-footer-notice":this.controller.has3DNotice()||!!this.controller.hasTermsNotice()}),role:Pe.const("region"),"aria-label":()=>this.controller.s("shared-calculator-narration-expression-list")},Pe.createElement(ps,{predicate:()=>this.controller.getShowConstructionsOpen()},()=>Pe.createElement(eE,{controller:this.props.controller,onDragPending:(e,i)=>this.onDragPending(e,i)})),Pe.createElement(S$,{each:()=>this.controller.getAllItemModels(),key:e=>e.guid},Pe.createElement("span",{class:Pe.const("dcg-template-expressioneach")},e=>E$(()=>iP(e),{shell:()=>this.makeShellViewForModel(e),render:()=>this.makeViewForModel(e),none:()=>{}}))),Pe.createElement(Cy,{controller:()=>this.props.controller()}),Pe.createElement(e5,{key:()=>this.controller.getDraggedItemId()},e=>{if(e){let i=this.controller.getItemModel(e);return Pe.createElement(vy,{controller:this.props.controller},this.makeDragCopyViewForModel(i))}else return}),Pe.createElement(xE,{controller:this.props.controller}),Pe.createElement(iE,{controller:this.props.controller}),Pe.createElement("div",{class:Pe.const("dcg-expressions-branding"),style:()=>({opacity:this.controller.isKeypadOpen()?0:1})},Pe.createElement(ps,{predicate:()=>this.controller.canEditOnWeb()},()=>Pe.createElement("span",{role:Pe.const("link"),tabindex:Pe.const(0),class:Pe.const("dcg-edit-branding"),onTap:()=>this.controller.dispatch({type:"open-on-web"})},Pe.createElement("div",{class:Pe.const("dcg-powered-by"),"aria-label":()=>this.controller.s("graphing-calculator-narration-edit-graph-on-desmos")},()=>this.controller.s("graphing-calculator-button-edit-graph-on-desmos-logo")),Pe.createElement("i",{class:Pe.const("dcg-icon-desmos"),"aria-hidden":Pe.const("true")}))),Pe.createElement(ps,{predicate:()=>!this.controller.canEditOnWeb()},()=>Pe.createElement("span",{class:Pe.const("dcg-noedit-branding")},Pe.createElement("div",{class:Pe.const("dcg-powered-by"),"aria-label":()=>this.controller.s("graphing-calculator-narration-powered-by-desmos")},()=>this.controller.s("graphing-calculator-label-powered-by")),Pe.createElement("i",{class:Pe.const("dcg-icon-desmos"),"aria-hidden":Pe.const("true")})))))))),Pe.createElement(XS,{controller:this.props.controller})),Pe.createElement(ps,{predicate:()=>this.isOptionsViewOpen("expression")},()=>Pe.createElement(rs,__dcg_shared_module_exports__['a']({menuType:this.const("expression"),menuButtonFocusLocation:()=>{let e=this.getActiveExpressionModelForOptionsView();return e?{type:"expression-icon",id:e.id}:void 0}},this.getSharedDropdownWrapperProps()),wE(this.bindFn(this.getActiveExpressionModelForOptionsView),e=>Pe.createElement(tm,{controller:this.props.controller,model:e})))),Pe.createElement(ps,{predicate:()=>this.isOptionsViewOpen("image")},()=>Pe.createElement(rs,__dcg_shared_module_exports__['a']({menuType:this.const("image"),menuButtonFocusLocation:()=>{let e=this.getActiveImageModelForOptionsView();return e?{type:"image-icon",id:e.id}:void 0}},this.getSharedDropdownWrapperProps()),wE(this.bindFn(this.getActiveImageModelForOptionsView),e=>Pe.createElement(mE,{controller:this.props.controller,model:e})))),Pe.createElement(ps,{predicate:()=>this.isOptionsViewOpen("slider")},()=>Pe.createElement(rs,__dcg_shared_module_exports__['a']({menuType:this.const("slider"),menuButtonFocusLocation:()=>{let e=this.getActiveSliderModelForOptionsView();return e?{type:"slider-icon",id:e.id}:void 0}},this.getSharedDropdownWrapperProps()),wE(this.bindFn(this.getActiveSliderModelForOptionsView),e=>Pe.createElement(bE,{controller:this.props.controller,model:e})))),Pe.createElement(ps,{predicate:()=>this.isOptionsViewOpen("table-column")},()=>Pe.createElement(rs,__dcg_shared_module_exports__['a']({menuType:this.const("table-column"),menuButtonFocusLocation:()=>{let e=this.getActiveColumnModelForOptionsView();return e?{type:"table-icon",id:e.table.id,columnId:e.id}:void 0}},this.getSharedDropdownWrapperProps()),wE(this.bindFn(this.getActiveColumnModelForOptionsView),e=>Pe.createElement(yE,{controller:this.props.controller,model:e})))))}getSharedDropdownWrapperProps(){return{rootElSelector:this.const(".dcg-container"),openAriaAlert:this.const(this.controller.s("graphing-calculator-narration-options-menu-open")),closeAriaAlert:this.const(this.controller.s("graphing-calculator-narration-options-menu-closed")),focusOnOpen:this.bindFn(this.optionsViewFocusLocation),shouldHandleTabAndEscape:this.const(!0),controller:this.props.controller}}optionsViewFocusLocation(){let e=this.controller.getOpenItemMenu();if(!e||!("model"in e))return"none";let{model:i}=e;if(!i)return"none";let r=this.controller.getFocusLocation();if(!r||r.type!=="expression-menu"||r.id!==i.id)return"none";switch(r.location){case"start":return"first";case"end":return"last";default:return"none"}}getActiveSliderModelForOptionsView(){let e=this.controller.getOpenItemMenu();return e&&e.type==="slider"&&"model"in e?e.model:void 0}getActiveImageModelForOptionsView(){let e=this.controller.getOpenItemMenu();return e&&e.type==="image"&&"model"in e?e.model:void 0}getActiveExpressionModelForOptionsView(){let e=this.controller.getOpenItemMenu();return e&&e.type==="expression"&&"model"in e?e.model:void 0}getActiveColumnModelForOptionsView(){let e=this.controller.getOpenItemMenu();return e&&e.type==="table-column"&&"model"in e?e.model:void 0}isOptionsViewOpen(e){let i=this.controller.getOpenItemMenu();return!!i&&i.type===e}makeShellViewForModel(e){return Pe.createElement(wy,{controller:this.props.controller,model:()=>e,onDragPending:()=>{},isDragCopy:()=>!1})}computeExppanelOuterStyle(){this.getListBottomAndUpdateLastExpressionPadding();let{list:e}=this.controller.computeMajorLayout(),i=0,r=e.top;return e.top>0&&!this.controller.isListVisible()&&(r-=e.height),{position:"absolute",left:i+"px",top:r+"px",width:e.width+"px",height:e.height+"px"}}makeDragCopyViewForModel(e){return this.makeViewForModel(e,!0)}makeViewForModel(e,i=!1){var r;if(e.type==="table")r=Pe.createElement(my,{controller:this.props.controller,model:()=>e,onDragPending:o=>this.onDragPending(o,{type:"expression",calcId:e.id}),isDragCopy:()=>i});else if(e.type==="folder")r=Pe.createElement(fy,{controller:this.props.controller,model:()=>e,onDragPending:o=>this.onDragPending(o,{type:"expression",calcId:e.id}),isDragCopy:()=>i});else if(e.type==="text")r=Pe.createElement(dy,{controller:this.props.controller,model:()=>e,onDragPending:o=>this.onDragPending(o,{type:"expression",calcId:e.id}),isDragCopy:()=>i});else if(e.type==="image")r=Pe.createElement(yy,{controller:this.props.controller,model:()=>e,onDragPending:o=>this.onDragPending(o,{type:"expression",calcId:e.id}),isDragCopy:()=>i});else if(e.type==="expression")r=Pe.createElement(e5,{key:()=>i&&this.controller.shouldRenderDraggedItemAsToken()},o=>o?Pe.createElement(Vl,{showParentChildrenHover:this.const(!1),controller:this.props.controller,identifier:()=>this.controller.getDraggedIdentifier(),insideMQ:this.const(!1),insideGroup:this.const(!1),putInTabOrder:()=>!1}):Pe.createElement(gu,{controller:this.props.controller,model:()=>e,onDragPending:n=>this.onDragPending(n,{type:"expression",calcId:e.id}),isDragCopy:()=>i}));else return;return r}didUnmount(){H(document.documentElement).off("."+this.guid)}didMountContainer(e){this.node=e,H(document.documentElement).on("keydown."+this.guid,this.bindFn(this.handleKeyDown))}didMountExppanel(e){this.exppanel=e,e.onscroll=()=>this.controller.markTickRequiredNextFrame()}getListBottomAndUpdateLastExpressionPadding(){let e=this.controller.getKeypadHeight(),i=this.__listBottom||0;return this.__listBottom=e,e===0&&i!==0&&g_()&&this.padLastExpressionUntilTapEnd(i),e}padLastExpression(e){let i=this.node.querySelector(".dcg-expressionitem.dcg-new-expression");i.style.marginBottom=e+"px"}unpadLastExpression(){let e=this.node.querySelector(".dcg-expressionitem.dcg-new-expression");e.style.marginBottom="0"}padLastExpressionUntilTapEnd(e){this.padLastExpression(e),H(document).on("dcg-tap.animating-bottom",()=>{this.unpadLastExpression(),H(document).off("dcg-tap.animating-bottom")})}handleKeyDown(e){var a;if(this.controller.inAudioTraceMode())return;let i=be(e),r=Dr(e),o=this.controller.getSelectedItem();if(!o){(i===es||i===og)&&!this.controller.needsFakeKeypad()&&this.controller.hasMultipleItemsSelected()&&this.controller.dispatch({type:"delete-all-selected-items"});return}if(e.altKey&&!e.ctrlKey&&!e.metaKey&&e.shiftKey&&r==="T"&&o){if(!this.controller.isGeometry()||!Sl(o))return;e.preventDefault(),e.stopPropagation(),this.controller.convertToTokenAssignment(o);let s=this.controller.getGeometryFolder();if(s){let c=s.index+this.controller.getNumberOfItemsInFolder(s.id);Mo(o,s.id),o.index!==c&&pd(this.controller.getListModel(),o.index,c,1)}this.controller.ensureAtLeastOneVisibleItem();let l=(a=Er(o))==null?void 0:a.identifier;l&&this.controller.getShowConstructionsOpen()&&this.controller.dispatch({type:"set-focus-location",location:{type:"geo-token",identifier:l}});return}let n=this.controller.getFocusLocation();if(e.ctrlKey&&e.shiftKey&&!e.metaKey&&!e.altKey&&n!==void 0){if(r==="O"){e.preventDefault(),e.stopPropagation();let s;if(o.type==="expression")!o.sliderExists&&!Fh(o)?(s={type:"expression",model:o,guid:o.guid,focusFirstOption:!0,previousFocusLocation:n},this.controller.dispatch({type:"set-focus-location",location:{type:"expression-icon",id:o.id}})):o.sliderExists&&(s={type:"slider",model:o,guid:"slider-"+o.guid,focusFirstOption:!0,previousFocusLocation:n},this.controller.dispatch({type:"set-focus-location",location:{type:"slider-animation-properties-icon",id:o.id}}));else if(o.type==="image")s={type:"image",model:o,guid:o.guid,focusFirstOption:!0,previousFocusLocation:n},this.controller.dispatch({type:"set-focus-location",location:{type:"image-icon",id:o.id}});else if(o.type==="table"&&n.type==="table"){let l=n.location;if(!l)return;let c=o.columnModels[l.column];if(!c||c.latex===""||!this.controller.getGraphSettings().config.graphpaper||c.error||c.index===0)return;s={type:"table-column",model:c,guid:c.guid,focusFirstOption:!0,previousFocusLocation:n},this.controller.dispatch({type:"set-focus-location",location:{type:"table-icon",id:o.id,columnId:c.id}})}if(!s)return;this.controller.dispatch({type:"toggle-item-settings-menu",menu:s});return}else if(r==="D"){if(this.controller.isItemReadonly(o.id)&&!this.controller.isInEditListMode())return;e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"delete-item-and-animate-out",id:o.id,setFocusAfterDelete:!0});return}}if(this.controller.isInEditListMode()&&!e.altKey&&!e.ctrlKey&&!e.metaKey){if(i===Ps&&n!==void 0){let s=this.controller.getItemModelByIndex(0);if(!s)return;let l=(n.type==="readonly-expression"&&s.type==="expression"||n.type==="table-container"&&s.type==="table"||n.type===s.type)&&n.id===s.id,c={type:"edit-list-toggle"},p=this.controller.isFocusLocationFocused(c);e.shiftKey&&l?(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-focus-location",location:c})):!e.shiftKey&&p&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"move-focus-to-item",id:s.id,where:s.type==="table"?"container":void 0}))}else if(i===Jo||i===un){let s=this.controller.getListModel(),l=i===Jo?Ip(s,o.index):Tp(s,o.index);if(!l)return;this.controller.dispatch({type:"move-focus-to-item",id:l.id,where:l.type==="table"?"container":"start"})}return}if(!(document.activeElement&&H.contains(document.body,document.activeElement))&&!this.exppanel.contains(e.target)&&H.contains(document.documentElement,e.target))switch(i){case Jo:e.preventDefault(),this.controller.dispatch({type:"select-previous-expression"});break;case un:e.preventDefault(),this.controller.dispatch({type:"select-next-expression"});break;case Yo:e.preventDefault(),this.controller.dispatch({type:"set-none-selected"});break;case Al:e.preventDefault(),o&&(o.type==="expression"&&o.sliderExists?(this.controller.dispatch({type:"adjust-slider-by-keyboard",id:o.id,adjustment:"up"}),this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:o.id}})):this.controller.dispatch({type:"move-focus-to-item",id:o.id,where:"start"}));break;case Ps:e.preventDefault(),o&&this.controller.dispatch({type:"move-focus-to-item",id:o.id,where:"start"});break;case Gl:e.preventDefault(),o&&(o.type==="expression"&&o.sliderExists?(this.controller.dispatch({type:"adjust-slider-by-keyboard",id:o.id,adjustment:"down"}),this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:o.id}})):this.controller.dispatch({type:"move-focus-to-item",id:o.id,where:"end"}));break;case es:e.preventDefault(),o&&!this.controller.isItemReadonly(o.id)&&this.controller.dispatch({type:"upward-delete-selected-expression"});break;case og:e.preventDefault(),o&&!this.controller.isItemReadonly(o.id)&&this.controller.dispatch({type:"downward-delete-selected-expression"});break;case Fa:e.wasHandled("create-expression-with-keyboard")||(e.preventDefault(),e.handle("create-expression-with-keyboard"),o&&this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"}));break;default:if(e.metaKey||e.ctrlKey||i===$f||i===Id)return;o&&(o.type==="table"||this.controller.dispatch({type:"move-focus-to-item",id:o.id,where:"end"}))}}onDragPending(e,i){e.preventDefault(),Ri();var r={x:e.touches[0].clientX,y:e.touches[0].clientY},o={x:r.x,y:r.y},n=setTimeout(()=>{H(document).off(".dragpending"),this.onDragStart(e,i,r,o)},500);H(document).on("dcg-tapmove.dragpending",a=>{o={x:a.touches[0].clientX,y:a.touches[0].clientY},(Math.abs(o.y-r.y)>3||Math.abs(o.x-r.x)>3)&&(clearTimeout(n),H(document).off(".dragpending"),this.onDragStart(e,i,r,o))}),H(document).on("dcg-tapend.dragpending",function(){clearTimeout(n),H(document).off(".dragpending")})}onDragStart(e,i,r,o){e.touches.length===1&&(e.wasHandled("dcg-longhold")||this.controller.dispatch({type:"start-dragdrop",dragTarget:i,grabPt:r,mousePt:o}))}onExppanelTapstart(e){e.device!=="mouse"&&(e.target.closest(".dcg-expressionitem")||Ri())}onPaste(e){let i=this.controller.getGraphSettings().config;var r=V3(e);if(!r)return;var o=this.controller.getSelectedItem();if(this.controller.canLoadPastedLink(r)&&o&&o.type==="folder"&&o.title===""){e.stopPropagation(),e.preventDefault(),JS(this.controller,r,(a,s)=>s(null,a));return}if(o&&(o.type==="text"||o.type==="folder"))return;if(this.controller.canLoadPastedLink(r)){e.stopPropagation(),e.preventDefault();let a=i.pasteGraphLinkCallback?i.pasteGraphLinkCallback:(s,l)=>l(null,s);JS(this.controller,r,a);return}if(i.pasteTableData){let a=G3(r);if(a!==void 0)return e.stopPropagation(),e.preventDefault(),this.controller.dispatch({type:"paste-table",data:a})}let n=M3(r);if(n!==void 0){e.stopPropagation(),e.preventDefault();let a=[];n.length===1&&n[0].numberList?this.controller.dispatch({type:"append-number-list",latex:n[0].content}):(n.forEach(s=>{a.push({type:"expression",id:this.controller.generateId(),latex:s.content})}),this.controller.dispatch({type:"insert-several-expressions",expressions:a}));return}}onDrop(e){if(!this.controller.areImagesEnabled())return;let i=e.dataTransfer&&e.dataTransfer.files;i&&i.length&&this.controller.dispatch({type:"new-images",files:i})}};var pt=__dcg_shared_module_exports__['h'](j());var t5=__dcg_shared_module_exports__['h'](j());var CM=class CM extends t5.Class{init(){this.controller=this.props.controller(),this.dispatch=this.controller.dispatch,this.s=this.controller.s}};CM.uuid=wg();var yr=CM;var nm=__dcg_shared_module_exports__['h'](j());var jc=__dcg_shared_module_exports__['h'](j()),Gt=class extends jc.Class{template(){return jc.createElement("div",{class:()=>({"dcg-keypad-btn-container":!0,"dcg-disabled":this.isDisabled()}),style:()=>({"flex-grow":this.getColSpan()})},jc.createElement("span",{role:jc.const("button"),class:this.bindFn(this.getClasses),"dcg-command":this.props.command,"aria-label":this.bindFn(this.getAriaLabel),"aria-disabled":this.bindFn(this.isDisabled),"aria-controls":this.props.ariaControls?this.props.ariaControls:this.const(void 0),"aria-expanded":this.props.ariaExpanded?this.bindFn(this.getAriaExpanded):this.const(void 0),onTap:()=>{this.isDisabled()||this.props.onTap()}},jc.createElement("span",{class:jc.const("dcg-keypad-btn-content")},this.children)))}getClasses(){let e={"dcg-keypad-btn":!0,"dcg-keypad-btn-active":this.isActive()},i=this.props.style();switch(i){case"default":e["dcg-btn-light-on-gray"]=!0;break;case"highlight":e["dcg-btn-dark-on-gray"]=!0;break;case"popover":e["dcg-btn-light-gray"]=!0;break;case"blue":e["dcg-btn-short-blue"]=!0;break;case"tall-blue":e["dcg-btn-tall-blue"]=!0;break;default:return i}return e}isActive(){return this.props.active?this.props.active():!1}getAriaLabel(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()}getColSpan(){if(this.props.colspan)return this.props.colspan()}isDisabled(){return this.props.disabled&&this.props.disabled()}getAriaExpanded(){return this.props.ariaExpanded?this.props.ariaExpanded():void 0}};var z=__dcg_shared_module_exports__['h'](j()),{IfElse:o5,If:i5,Switch:D$}=z.Components;function Ht(t,e){return t===void 0?z.const(e):typeof t=="function"?t:z.const(t)}function im(t){return(e,i,r={},o)=>z.createElement(Gt,{command:z.const(t.command||t.typedText||t.keys[0]),ariaLabel:()=>t.ariaLabelKey?o(t.ariaLabelKey):t.typedText||t.keys[0],colspan:Ht(r.colspan,1),style:()=>r.style||"default",onTap:()=>i({type:"keypad/type-text",text:t.typedText||t.keys[0]})},o5(()=>t.keys[0]==="{"||t.keys[0]==="[",{true:()=>z.createElement("span",{class:z.const("dcg-mq-math-mode"),style:z.const("font-size: 120%")},z.const(t.keys[0]),z.const("\xA0"),z.createElement("span",{style:z.const("color: #999")},z.const(t.keys[1]))),false:()=>z.createElement("span",{class:z.const("dcg-either-or-btn")},z.createElement(Te,{config:z.const({}),latex:z.const(t.keys[0])}),z.createElement("span",{style:z.const("color: #999")},z.createElement(Te,{config:z.const({}),latex:z.const(t.keys[1])})))}))}function rm(t){return(e,i,r={},o)=>z.createElement(Gt,{command:z.const(t.command||t.typedText||t.keys[1]),ariaLabel:()=>t.ariaLabelKey?o(t.ariaLabelKey):t.typedText||t.keys[0],colspan:Ht(r.colspan,1),style:Ht(r.style,"default"),onTap:()=>i({type:"keypad/type-text",text:t.typedText||t.keys[1]})},o5(()=>t.keys[1]==="}"||t.keys[1]==="]",{true:()=>z.createElement("span",{class:z.const("dcg-mq-math-mode"),style:z.const("font-size: 120%")},z.createElement("span",{style:z.const("color: #999")},z.const(t.keys[0])),z.const("\xA0"),z.const(t.keys[1])),false:()=>z.createElement("span",null,z.createElement("span",{style:z.const("color: #999")},z.createElement(Te,{config:z.const({}),latex:z.const(t.keys[0])})),z.createElement(Te,{config:z.const({}),latex:z.const(t.keys[1])}))}))}function k$(t){return(e,i,r={},o)=>z.createElement(Gt,{command:z.const(t.command),ariaLabel:()=>t.ariaLabelKey?o(t.ariaLabelKey):e,colspan:Ht(r.colspan,1),style:()=>r.style||"default",onTap:()=>{i({type:"keypad/audio-trace",command:t.command})}},z.createElement(i5,{predicate:z.const(t.iconClass!==void 0)},()=>z.createElement("span",{class:()=>({"dcg-button-icon":!0,"dcg-icon-only":t.contentKey===void 0})},z.createElement("i",{class:z.const(t.iconClass),"aria-hidden":z.const("true")}))),z.createElement(i5,{predicate:z.const(t.contentKey!==void 0)},()=>z.createElement("span",null,()=>o(t.contentKey)||e)))}function ge(t){return(e,i,r={},o)=>z.createElement(Gt,{command:z.const(t.command||e),ariaLabel:()=>t.ariaLabelKey?o(t.ariaLabelKey):e,colspan:Ht(r.colspan,1),style:()=>r.style||"default",onTap:()=>i({type:"keypad/type-text",text:t.typedText||e})},z.createElement(Te,{config:z.const({}),latex:z.const(t.content||e)}))}function r5(t){return(e,i,r={},o)=>z.createElement(Gt,{command:z.const(t.command||e),ariaLabel:()=>t.ariaLabelKey?o(t.ariaLabelKey):e,colspan:Ht(r.colspan,1),style:()=>r.style||"default",onTap:()=>i({type:"keypad/type-text",text:t.typedText||e})},z.createElement("span",{class:z.const("dcg-mq-math-mode")},z.const(t.content||e)))}function we(t){return(e,i,r={},o)=>z.createElement(Gt,{command:z.const(e),ariaLabel:()=>t.ariaLabelKey?o(t.ariaLabelKey):e,colspan:Ht(r.colspan,1),style:()=>r.style||"default",onTap:()=>i({type:"keypad/type-text",text:e+"("})},z.createElement(D$,{key:()=>e.match(/^[a-z]{2,}$/)},n=>n?z.createElement("span",{class:z.const("dcg-mq-math-mode dcg-static-mathquill-view")},z.createElement("span",{class:z.const("dcg-mq-root-block")},z.createElement("span",{class:z.const("dcg-mq-operator-name")},()=>e))):z.createElement(Te,{config:z.const({}),latex:z.const(e)})))}function Uo(t){return(e,i,r={},o)=>z.createElement(Gt,{command:z.const(t.command),ariaLabel:()=>t.ariaLabelKey?o(t.ariaLabelKey):t.command,colspan:Ht(r.colspan,1),style:()=>r.style||"default",onTap:()=>{i({type:"keypad/custom-command",command:t.command})}},z.createElement(Te,{config:z.const({}),latex:z.const(t.content)}))}var I$={"{":r5({ariaLabelKey:"shared-calculator-narration-keypad-key-left-bracket"}),"}":r5({ariaLabelKey:"shared-calculator-narration-keypad-key-right-bracket"}),"(":ge({ariaLabelKey:"shared-calculator-narration-keypad-key-left-paren"}),")":ge({ariaLabelKey:"shared-calculator-narration-keypad-key-right-paren"}),sqrt:ge({content:"\\sqrt{}",ariaLabelKey:"shared-calculator-narration-keypad-key-sqrt"}),"/":ge({ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),division:ge({content:"\xF7",typedText:"/",command:"/",ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),obelus:ge({content:"\xF7",typedText:"\xF7",ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),"*":ge({ariaLabelKey:"shared-calculator-narration-keypad-key-times"}),multiplication:ge({content:"\xD7",typedText:"*",command:"*",ariaLabelKey:"shared-calculator-narration-keypad-key-times"}),"\xB1":ge({ariaLabelKey:"shared-calculator-narration-keypad-plus-minus"}),"-":ge({ariaLabelKey:"shared-calculator-narration-keypad-key-minus"}),"+":ge({ariaLabelKey:"shared-calculator-narration-keypad-key-plus"}),".":ge({ariaLabelKey:"shared-calculator-narration-keypad-key-decimal"}),ans:(t,e,i={},r)=>z.createElement(Gt,{command:z.const(t),ariaLabel:()=>r("shared-calculator-narration-keypad-key-ans"),colspan:Ht(i.colspan,1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/type-text",text:t})},z.const("ans")),enter:(t,e,i={},r)=>z.createElement(Gt,{command:z.const(t),ariaLabel:()=>r("shared-calculator-narration-keypad-key-enter"),colspan:Ht(i.colspan,1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/press-key",key:"Enter"})},z.createElement("i",{class:z.const("dcg-icon-arrow-enter"),"aria-hidden":z.const("true")})),shift:(t,e,i={},r)=>z.createElement(Gt,{command:z.const(t),ariaLabel:()=>r("shared-calculator-narration-keypad-key-shift"),colspan:Ht(i.colspan,1),style:()=>i.style||"default",active:Ht(i.active,!1),onTap:()=>e({type:"keypad/shift"})},z.createElement("i",{class:z.const("dcg-icon-shift"),"aria-hidden":z.const("true")})),left:(t,e,i={},r)=>z.createElement(Gt,{command:z.const(t),ariaLabel:()=>r("shared-calculator-narration-keypad-key-left-arrow"),colspan:Ht(i.colspan,1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/press-key",key:"Left"})},z.createElement("i",{class:z.const("dcg-icon-arrow-left"),"aria-hidden":z.const("true")})),right:(t,e,i={},r)=>z.createElement(Gt,{command:z.const(t),ariaLabel:()=>r("shared-calculator-narration-keypad-key-right-arrow"),colspan:Ht(i.colspan,1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/press-key",key:"Right"})},z.createElement("i",{class:z.const("dcg-icon-arrow-right"),"aria-hidden":z.const("true")})),123:(t,e,i={},r)=>z.createElement(Gt,{command:z.const(t),ariaLabel:()=>r("shared-calculator-narration-keypad-key-toggle-numbers"),colspan:Ht(i.colspan,1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/123"})},z.const("1 2 3")),ABC:(t,e,i={},r)=>z.createElement(Gt,{command:z.const(t),ariaLabel:()=>r("shared-calculator-narration-keypad-key-toggle-letters"),colspan:Ht(i.colspan,1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/abc"})},z.const("A B C")),Audio:(t,e,i={},r)=>z.createElement(Gt,{command:z.const(t),ariaLabel:()=>r("shared-calculator-narration-keypad-key-toggle-audio-trace"),colspan:Ht(i.colspan,1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"on"})},z.createElement("i",{class:z.const("dcg-icon-volume"),"aria-hidden":z.const("true")})),backspace:(t,e,i={},r)=>z.createElement(Gt,{command:z.const(t),ariaLabel:()=>r("shared-calculator-narration-keypad-key-backspace"),colspan:Ht(i.colspan,1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/press-key",key:"Backspace"})},z.createElement("i",{class:z.const("dcg-icon-delete"),"aria-hidden":z.const("true")})),pi:ge({content:"\\pi",ariaLabelKey:"shared-calculator-narration-keypad-key-pi"}),alpha:ge({content:"\\alpha",ariaLabelKey:"shared-calculator-narration-keypad-key-alpha"}),beta:ge({content:"\\beta",ariaLabelKey:"shared-calculator-narration-keypad-key-beta"}),theta:ge({content:"\\theta",ariaLabelKey:"shared-calculator-narration-keypad-key-theta"}),tau:ge({content:"\\tau",ariaLabelKey:"shared-calculator-narration-keypad-key-tau"}),phi:ge({content:"\\phi",ariaLabelKey:"shared-calculator-narration-keypad-key-phi"}),rho:ge({content:"\\rho",ariaLabelKey:"shared-calculator-narration-keypad-key-rho"}),"a^2":Uo({command:"a^2",content:"a^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"a^3":Uo({command:"a^3",content:"a^3",ariaLabelKey:"shared-calculator-narration-keypad-key-cubed"}),"x^3":Uo({command:"a^3",content:"x^3",ariaLabelKey:"shared-calculator-narration-keypad-key-cubed"}),"a^b":ge({content:"a^b",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-superscript"}),a_b:ge({content:"a_b",typedText:"_",ariaLabelKey:"shared-calculator-narration-keypad-key-subscript"}),"a/b":Uo({content:"\\frac{a}{b}",command:"a/b",ariaLabelKey:"shared-calculator-narration-keypad-key-fraction"}),"x^2":Uo({command:"a^2",content:"x^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"x^y":ge({content:"x^y",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-superscript"}),"x/y":ge({content:"\\frac{x}{y}",typedText:"/",ariaLabelKey:"shared-calculator-narration-keypad-key-fraction"}),nthroot:Uo({command:"nthroot",content:"\\sqrt[n]{}",ariaLabelKey:"shared-calculator-narration-keypad-key-nthroot"}),ythroot:Uo({command:"nthroot",content:"\\sqrt[y]{}",ariaLabelKey:"shared-calculator-narration-keypad-key-ythroot"}),sin:we({ariaLabelKey:"shared-calculator-narration-keypad-key-sin"}),cos:we({ariaLabelKey:"shared-calculator-narration-keypad-key-cos"}),tan:we({ariaLabelKey:"shared-calculator-narration-keypad-key-tan"}),tone:we({ariaLabelKey:"shared-calculator-narration-keypad-key-tone"}),sec:we({ariaLabelKey:"shared-calculator-narration-keypad-key-sec"}),csc:we({ariaLabelKey:"shared-calculator-narration-keypad-key-csc"}),cot:we({ariaLabelKey:"shared-calculator-narration-keypad-key-cot"}),sinh:we({ariaLabelKey:"shared-calculator-narration-keypad-key-sinh"}),cosh:we({ariaLabelKey:"shared-calculator-narration-keypad-key-cosh"}),tanh:we({ariaLabelKey:"shared-calculator-narration-keypad-key-tanh"}),sech:we({ariaLabelKey:"shared-calculator-narration-keypad-key-csch"}),csch:we({ariaLabelKey:"shared-calculator-narration-keypad-key-csch"}),coth:we({ariaLabelKey:"shared-calculator-narration-keypad-key-coth"}),arcsin:Uo({command:"arcsin",content:"sin^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arcsin"}),arccos:Uo({command:"arccos",content:"cos^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccos"}),arctan:Uo({command:"arctan",content:"tan^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arctan"}),arccsc:Uo({command:"arccsc",content:"csc^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccsc"}),arcsec:Uo({command:"arcsec",content:"sec^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arcsec"}),arccot:Uo({command:"arccot",content:"cot^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccot"}),"|a|":ge({typedText:"|",ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),"|x|":ge({typedText:"|",ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),ln:we({ariaLabelKey:"shared-calculator-narration-keypad-key-ln"}),midpoint:we({ariaLabelKey:"shared-calculator-narration-keypad-key-midpoint"}),segment:we({ariaLabelKey:"shared-calculator-narration-keypad-key-segment"}),line:we({ariaLabelKey:"shared-calculator-narration-keypad-key-line"}),ray:we({ariaLabelKey:"shared-calculator-narration-keypad-key-ray"}),parallel:we({ariaLabelKey:"shared-calculator-narration-keypad-key-parallel"}),perpendicular:we({ariaLabelKey:"shared-calculator-narration-keypad-key-perpendicular"}),circle:we({ariaLabelKey:"shared-calculator-narration-keypad-key-circle"}),arc:we({ariaLabelKey:"shared-calculator-narration-keypad-key-arc"}),angle:we({ariaLabelKey:"shared-calculator-narration-keypad-key-angle"}),directedangle:we({ariaLabelKey:"shared-calculator-narration-keypad-key-directed-angle"}),glider:we({ariaLabelKey:"shared-calculator-narration-keypad-key-glider"}),coterminal:we({ariaLabelKey:"shared-calculator-narration-keypad-key-coterminal"}),supplement:we({ariaLabelKey:"shared-calculator-narration-keypad-key-supplement"}),dilate:we({ariaLabelKey:"shared-calculator-narration-keypad-key-dilate"}),rotate:we({ariaLabelKey:"shared-calculator-narration-keypad-key-rotate"}),translate:we({ariaLabelKey:"shared-calculator-narration-keypad-key-translate"}),reflect:we({ariaLabelKey:"shared-calculator-narration-keypad-key-reflect"}),vertices:we({ariaLabelKey:"shared-calculator-narration-keypad-key-vertices"}),angles:we({ariaLabelKey:"shared-calculator-narration-keypad-key-angles"}),directedangles:we({ariaLabelKey:"shared-calculator-narration-keypad-key-directed-angles"}),segments:we({ariaLabelKey:"shared-calculator-narration-keypad-key-segments"}),radius:we({ariaLabelKey:"shared-calculator-narration-keypad-key-radius"}),center:we({ariaLabelKey:"shared-calculator-narration-keypad-key-center"}),intersection:we({ariaLabelKey:"shared-calculator-narration-keypad-key-intersection"}),area:we({ariaLabelKey:"shared-calculator-narration-keypad-key-area"}),perimeter:we({ariaLabelKey:"shared-calculator-narration-keypad-key-perimeter"}),log:we({ariaLabelKey:"shared-calculator-narration-keypad-key-log"}),quantile:we({ariaLabelKey:"shared-calculator-narration-keypad-key-quantile"}),quartile:we({ariaLabelKey:"shared-calculator-narration-keypad-key-quartile"}),var:we({}),varp:we({}),nCr:we({}),loga:Uo({command:"loga",content:"log_a",ariaLabelKey:"shared-calculator-narration-keypad-key-loga"}),stdev:we({ariaLabelKey:"shared-calculator-narration-keypad-key-stdev"}),mad:we({}),nPr:we({}),total:we({}),count:we({}),length:we({}),for:we({}),min:we({}),max:we({}),cov:we({ariaLabelKey:"shared-calculator-narration-keypad-key-cov"}),covp:we({ariaLabelKey:"shared-calculator-narration-keypad-key-covp"}),corr:we({ariaLabelKey:"shared-calculator-narration-keypad-key-corr"}),spearman:we({ariaLabelKey:"shared-calculator-narration-keypad-key-spearman"}),stats:we({ariaLabelKey:"shared-calculator-narration-keypad-key-stats"}),polygon:we({ariaLabelKey:"shared-calculator-narration-keypad-key-polygon"}),distance:we({ariaLabelKey:"shared-calculator-narration-keypad-key-distance"}),triangle:we({ariaLabelKey:"shared-calculator-narration-keypad-key-triangle"}),sphere:we({ariaLabelKey:"shared-calculator-narration-keypad-key-sphere"}),vector:we({ariaLabelKey:"shared-calculator-narration-keypad-key-vector"}),mean:we({ariaLabelKey:"shared-calculator-narration-keypad-key-mean"}),stdevp:we({ariaLabelKey:"shared-calculator-narration-keypad-key-stdevp"}),mod:we({}),"e^x":ge({typedText:"e^",ariaLabelKey:"shared-calculator-narration-keypad-key-exp"}),"10^n":ge({content:"\\times10^{n}",typedText:"*10^",ariaLabelKey:"shared-calculator-narration-keypad-key-10-n"}),"a^{-1}":ge({typedText:"^-1",ariaLabelKey:"shared-calculator-narration-keypad-key-reciprocal"}),sum:ge({content:"\\sum",ariaLabelKey:"shared-calculator-narration-keypad-key-sum"}),prod:ge({content:"\\prod",ariaLabelKey:"shared-calculator-narration-keypad-key-product"}),floor:we({ariaLabelKey:"shared-calculator-narration-keypad-key-floor"}),ceil:we({ariaLabelKey:"shared-calculator-narration-keypad-key-ceil"}),round:we({ariaLabelKey:"shared-calculator-narration-keypad-key-round"}),abs:we({ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),"!":ge({ariaLabelKey:"shared-calculator-narration-keypad-key-factorial"}),"n!":ge({typedText:"!",ariaLabelKey:"shared-calculator-narration-keypad-key-factorial"}),median:we({ariaLabelKey:"shared-calculator-narration-keypad-key-median"}),lcm:we({}),gcd:we({}),gcf:we({}),ddx:Uo({command:"ddx",content:"\\frac{d}{dx}"}),integral:Uo({command:"integral",content:"\\int",ariaLabelKey:"shared-calculator-narration-keypad-key-int"}),"%":ge({content:"\\%",ariaLabelKey:"shared-calculator-narration-keypad-key-percent-of"}),"->":ge({content:"\\to",ariaLabelKey:"shared-calculator-narration-keypad-key-action-to"}),with:ge({typedText:"with",content:"with",ariaLabelKey:"shared-calculator-narration-keypad-key-action-with"}),prime:ge({typedText:"'",content:"f'",ariaLabelKey:"shared-calculator-narration-keypad-key-prime"}),exp:ge({}),sign:we({}),normaldist:we({ariaLabelKey:"shared-calculator-narration-keypad-key-normaldist"}),poissondist:we({ariaLabelKey:"shared-calculator-narration-keypad-key-poissondist"}),binomialdist:we({ariaLabelKey:"shared-calculator-narration-keypad-key-binomialdist"}),uniformdist:we({ariaLabelKey:"shared-calculator-narration-keypad-key-uniformdist"}),erf:we({ariaLabelKey:"shared-calculator-narration-keypad-key-erf"}),histogram:we({ariaLabelKey:"shared-calculator-narration-keypad-key-histogram"}),boxplot:we({ariaLabelKey:"shared-calculator-narration-keypad-key-boxplot"}),dotplot:we({ariaLabelKey:"shared-calculator-narration-keypad-key-dotplot"}),tscore:we({ariaLabelKey:"shared-calculator-narration-keypad-key-tscore"}),ittest:we({ariaLabelKey:"shared-calculator-narration-keypad-key-ittest"}),ttest:we({ariaLabelKey:"shared-calculator-narration-keypad-key-ttest"}),tdist:we({ariaLabelKey:"shared-calculator-narration-keypad-key-tdist"}),pdf:we({ariaLabelKey:"shared-calculator-narration-keypad-key-pdf"}),cdf:we({ariaLabelKey:"shared-calculator-narration-keypad-key-pdf"}),random:we({ariaLabelKey:"shared-calculator-narration-keypad-key-random"}),inversecdf:we({ariaLabelKey:"shared-calculator-narration-keypad-key-inversecdf"}),hsv:we({}),rgb:we({}),sort:we({}),shuffle:we({}),unique:we({}),join:we({}),"A^-1":Uo({command:"A^-1",content:"A^{-1}",ariaLabelKey:"matrix-calculator-narration-keypad-key-inverse"}),"A^T":Uo({command:"A^T",content:"A^T",ariaLabelKey:"matrix-calculator-narration-keypad-key-transpose"}),"A^2":Uo({command:"A^2",content:"A^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"A^n":ge({content:"A^n",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-exp"}),det:we({ariaLabelKey:"matrix-calculator-narration-keypad-key-det"}),trace:we({ariaLabelKey:"matrix-calculator-narration-keypad-key-trace"}),rref:we({ariaLabelKey:"matrix-calculator-narration-keypad-key-rref"}),a:ge({}),b:ge({}),c:ge({}),d:ge({}),e:ge({}),f:ge({}),g:ge({}),h:ge({}),i:ge({}),j:ge({}),k:ge({}),l:ge({}),m:ge({}),n:ge({}),o:ge({}),p:ge({}),q:ge({}),r:ge({}),s:ge({}),t:ge({}),u:ge({}),v:ge({}),w:ge({}),x:ge({}),boldX:ge({content:"x",typedText:"x"}),y:ge({}),boldY:ge({content:"y",typedText:"y"}),z:ge({}),boldZ:ge({content:"z",typedText:"z"}),A:ge({}),B:ge({}),C:ge({}),D:ge({}),E:ge({}),F:ge({}),G:ge({}),H:ge({}),I:ge({}),J:ge({}),K:ge({}),L:ge({}),M:ge({}),N:ge({}),O:ge({}),P:ge({}),Q:ge({}),R:ge({}),S:ge({}),T:ge({}),U:ge({}),V:ge({}),W:ge({}),X:ge({}),Y:ge({}),Z:ge({}),0:ge({}),1:ge({}),2:ge({}),3:ge({}),4:ge({}),5:ge({}),6:ge({}),7:ge({}),8:ge({}),9:ge({}),",":ge({}),"=":ge({}),"[":ge({}),"]":ge({}),"{}_left":im({keys:["{","}"]}),"{}_right":rm({keys:["{","}"]}),"()_left":im({keys:["(",")"]}),"()_right":rm({keys:["(",")"]}),"[]_left":im({keys:["[","]"]}),"[]_right":rm({keys:["[","]"]}),",'_left":im({keys:[",","\u2032"]}),",'_right":rm({keys:[",","\u2032"],typedText:"'"}),'"':ge({}),"'":ge({}),"~":ge({}),":":ge({}),">":ge({}),"<":ge({}),">=":ge({content:"\\ge"}),"<=":ge({content:"\\le"}),"!%_left":im({keys:["!","{}^{%}"]}),"!%_right":rm({keys:["!","{}^{%}"],typedText:"%"}),"~:_left":im({keys:["~","{}^{:}"]}),"~:_right":rm({keys:["~","{}^{:}"],typedText:":"}),"audio-trace-off":k$({contentKey:"graphing-calculator-button-keypad-audio-trace-off",command:"off"}),"hear-graph":(t,e,i={},r)=>z.createElement(Gt,{command:z.const(t),disabled:Ht(i.disabled,!1),colspan:Ht(i.colspan,1),style:Ht(i.style,"blue"),ariaLabel:z.const(void 0),onTap:()=>{e({type:"keypad/audio-trace",command:"hear-graph"})}},z.createElement("span",{class:z.const("dcg-play-icon-container")},z.createElement("i",{class:z.const("dcg-icon-play"),"aria-hidden":z.const("true")})),z.createElement("span",null,()=>r("graphing-calculator-button-audio-trace-hear-graph"))),"stop-graph":(t,e,i={},r)=>z.createElement(Gt,{command:z.const(t),disabled:Ht(i.disabled,!1),colspan:Ht(i.colspan,1),style:Ht(i.style,"blue"),onTap:()=>{e({type:"keypad/audio-trace",command:"stop-graph"})}},z.createElement("span",{class:z.const("dcg-stop-icon-container")},z.createElement("span",{class:z.const("dcg-stop-icon")})),z.createElement("span",null,()=>r("graphing-calculator-button-audio-trace-stop-graph"))),"volume-down":(t,e,i={},r)=>z.createElement(Gt,{command:z.const(t),ariaLabel:()=>r("graphing-calculator-narration-keypad-key-volume-down"),disabled:Ht(i.disabled,!1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"volume-down"})},z.createElement("span",{class:z.const("dcg-button-icon dcg-icon-only")},z.createElement("i",{class:z.const("dcg-icon-volume-down"),"aria-hidden":z.const("true")}))),"volume-up":(t,e,i={},r)=>z.createElement(Gt,{command:z.const(t),ariaLabel:()=>r("graphing-calculator-narration-keypad-key-volume-up"),disabled:Ht(i.disabled,!1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"volume-up"})},z.createElement("span",{class:z.const("dcg-button-icon dcg-icon-only")},z.createElement("i",{class:z.const("dcg-icon-volume-up"),"aria-hidden":z.const("true")}))),"speed-down":(t,e,i={},r)=>z.createElement(Gt,{command:z.const(t),ariaLabel:()=>r("graphing-calculator-narration-keypad-key-speed-down"),disabled:Ht(i.disabled,!1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"speed-down"})},z.createElement("span",{class:z.const("dcg-button-icon dcg-icon-only")},z.createElement("i",{class:z.const("dcg-icon-hide"),"aria-hidden":z.const("true")}))),"speed-up":(t,e,i={},r)=>z.createElement(Gt,{command:z.const(t),ariaLabel:()=>r("graphing-calculator-narration-keypad-key-speed-up"),disabled:Ht(i.disabled,!1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"speed-up"})},z.createElement("span",{class:z.const("dcg-button-icon dcg-icon-only")},z.createElement("i",{class:z.const("dcg-icon-show"),"aria-hidden":z.const("true")}))),"previous-point":(t,e,i={},r)=>z.createElement(Gt,{ariaLabel:()=>r("graphing-calculator-narration-keypad-key-previous-point"),command:z.const(t),disabled:Ht(i.disabled,!1),colspan:Ht(i.colspan,1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"previous-point"})},z.createElement("span",{class:z.const("dcg-button-icon dcg-icon-only")},z.createElement("i",{class:z.const("dcg-icon-thin-arrow-left"),"aria-hidden":z.const("true")}))),"next-point":(t,e,i={},r)=>z.createElement(Gt,{ariaLabel:()=>r("graphing-calculator-narration-keypad-key-next-point"),command:z.const(t),disabled:Ht(i.disabled,!1),colspan:Ht(i.colspan,1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"next-point"})},z.createElement("span",{class:z.const("dcg-button-icon dcg-icon-only")},z.createElement("i",{class:z.const("dcg-icon-thin-arrow-right"),"aria-hidden":z.const("true")}))),"previous-poi":(t,e,i={},r)=>z.createElement(Gt,{ariaLabel:()=>r("graphing-calculator-narration-keypad-key-previous-poi"),command:z.const(t),disabled:Ht(i.disabled,!1),colspan:Ht(i.colspan,1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"previous-poi"})},z.createElement("span",{class:z.const("dcg-button-icon dcg-icon-only")},z.createElement("i",{class:z.const("dcg-icon-hide"),"aria-hidden":z.const("true")}))),"next-poi":(t,e,i={},r)=>z.createElement(Gt,{ariaLabel:()=>r("graphing-calculator-narration-keypad-key-next-poi"),command:z.const(t),disabled:Ht(i.disabled,!1),colspan:Ht(i.colspan,1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"next-poi"})},z.createElement("span",{class:z.const("dcg-button-icon dcg-icon-only")},z.createElement("i",{class:z.const("dcg-icon-show"),"aria-hidden":z.const("true")}))),"previous-curve":(t,e,i={},r)=>z.createElement(Gt,{ariaLabel:()=>r("graphing-calculator-narration-keypad-key-previous-curve"),command:z.const(t),disabled:Ht(i.disabled,!1),colspan:Ht(i.colspan,1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"previous-curve"})},z.createElement("span",{class:z.const("dcg-button-icon dcg-icon-only")},z.createElement("i",{class:z.const("dcg-icon-caret-up"),"aria-hidden":z.const("true")}))),"next-curve":(t,e,i={},r)=>z.createElement(Gt,{ariaLabel:()=>r("graphing-calculator-narration-keypad-key-next-curve"),command:z.const(t),disabled:Ht(i.disabled,!1),style:()=>i.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"next-curve"})},z.createElement("span",{class:z.const("dcg-button-icon dcg-icon-only")},z.createElement("i",{class:z.const("dcg-icon-caret-down"),"aria-hidden":z.const("true")})))};function x(t,e,i={}){let r=t.dispatch;return I$[e](e,r,i,t.s)}function Wt(t=1){return z.createElement("div",{style:z.const(`flex-grow:${t}`)})}var vE=__dcg_shared_module_exports__['h'](j());var n5=__dcg_shared_module_exports__['h'](j()),Yc=class extends n5.Class{init(){this.controller=this.props.controller()}};var kt=class extends Yc{template(){return vE.createElement("div",{class:vE.const("dcg-basic-keypad dcg-do-not-blur")},this.children)}};var om=__dcg_shared_module_exports__['h'](j()),xe=class extends om.Class{template(){return om.createElement("div",{class:om.const("dcg-keypad-row")},this.children)}};var CE=class extends yr{template(){return nm.createElement(kt,{controller:this.props.controller},nm.createElement(xe,null,x(this,"q"),x(this,"w"),x(this,"e"),x(this,"r"),x(this,"t"),x(this,"y"),x(this,"u"),x(this,"i"),x(this,"o"),x(this,"p")),nm.createElement(xe,null,x(this,"a"),x(this,"s"),x(this,"d"),x(this,"f"),x(this,"g"),x(this,"h"),x(this,"j"),x(this,"k"),x(this,"l"),x(this,"theta")),nm.createElement(xe,null,x(this,"shift",{colspan:1.364,style:"highlight"}),Wt(.136),x(this,"z"),x(this,"x"),x(this,"c"),x(this,"v"),x(this,"b"),x(this,"n"),x(this,"m"),Wt(.136),x(this,"backspace",{colspan:1.364,style:"highlight"})),nm.createElement(xe,null,x(this,"123",{colspan:1.818,style:"highlight"}),Wt(.182),x(this,"a_b"),x(this,"!%_left"),x(this,"[]_left"),x(this,"{}_left"),x(this,"~:_left"),x(this,",'_left"),Wt(.182),x(this,"enter",{colspan:1.818,style:"blue"})))}};var am=__dcg_shared_module_exports__['h'](j());var SE=class extends yr{template(){return am.createElement(kt,{controller:this.props.controller},am.createElement(xe,null,x(this,"Q"),x(this,"W"),x(this,"E"),x(this,"R"),x(this,"T"),x(this,"Y"),x(this,"U"),x(this,"I"),x(this,"O"),x(this,"P")),am.createElement(xe,null,x(this,"A"),x(this,"S"),x(this,"D"),x(this,"F"),x(this,"G"),x(this,"H"),x(this,"J"),x(this,"K"),x(this,"L"),x(this,"tau")),am.createElement(xe,null,x(this,"shift",{colspan:1.364,active:!0,style:"highlight"}),Wt(.136),x(this,"Z"),x(this,"X"),x(this,"C"),x(this,"V"),x(this,"B"),x(this,"N"),x(this,"M"),Wt(.136),x(this,"backspace",{colspan:1.364,style:"highlight"})),am.createElement(xe,null,x(this,"123",{colspan:1.818,style:"highlight"}),Wt(.182),x(this,"a^b"),x(this,"!%_right"),x(this,"[]_right"),x(this,"{}_right"),x(this,"~:_right"),x(this,",'_right"),Wt(.182),x(this,"enter",{colspan:1.818,style:"blue"})))}};var fn=__dcg_shared_module_exports__['h'](j());var EE=class extends yr{template(){return fn.createElement(kt,{controller:this.props.controller},fn.createElement(xe,null,x(this,"boldX"),x(this,"boldY"),x(this,"a^2"),x(this,"a^b"),Wt(.5),x(this,"7",{style:"highlight"}),x(this,"8",{style:"highlight"}),x(this,"9",{style:"highlight"}),x(this,"division"),Wt(.5),fn.createElement(Gt,{command:this.const("functions"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-functions"),colspan:this.const(2),style:this.const("highlight"),active:()=>this.controller.isKeypadFunctionsPopoverOpen(),onTap:()=>this.dispatch({type:"keypad/functions"}),ariaControls:this.const(`dcg-functions-popover-${yr.uuid}`),ariaExpanded:()=>this.controller.isKeypadFunctionsPopoverOpen()},this.bindFn(this.getFuncsBtnText))),fn.createElement(xe,null,x(this,"("),x(this,")"),x(this,"<"),x(this,">"),Wt(.5),x(this,"4",{style:"highlight"}),x(this,"5",{style:"highlight"}),x(this,"6",{style:"highlight"}),x(this,"multiplication"),Wt(.5),x(this,"left",{style:"highlight"}),x(this,"right",{style:"highlight"})),fn.createElement(xe,null,x(this,"|a|"),x(this,","),x(this,"<="),x(this,">="),Wt(.5),x(this,"1",{style:"highlight"}),x(this,"2",{style:"highlight"}),x(this,"3",{style:"highlight"}),x(this,"-"),Wt(1),x(this,"backspace",{colspan:1.5,style:"highlight"})),fn.createElement(xe,null,fn.createElement("div",{class:fn.const("dcg-abc-audio-container")},fn.createElement(Gt,{command:fn.const("ABC"),colspan:this.const(1),ariaLabel:()=>this.controller.s("graphing-calculator-narration-toggle-letters"),style:this.const("highlight"),onTap:()=>{this.dispatch({type:"keypad/abc"})}},()=>this.controller.getLayoutMeasurements().width<=600?this.controller.raw("ABC"):this.controller.raw("A B C")),fn.createElement(Gt,{command:fn.const("Audio"),disabled:()=>!this.controller.canAudioTrace(),ariaLabel:()=>this.controller.s("graphing-calculator-narration-toggle-audio-trace"),colspan:this.const(1),style:()=>"highlight",onTap:()=>this.dispatch({type:"keypad/audio-trace",command:"on"})},fn.createElement("i",{class:fn.const("dcg-icon-volume"),"aria-hidden":fn.const("true")}))),x(this,"sqrt"),x(this,"pi"),Wt(.5),x(this,"0",{style:"highlight"}),x(this,".",{style:"highlight"}),x(this,"="),x(this,"+"),Wt(.5),x(this,"enter",{colspan:2,style:"blue"})))}getFuncsBtnText(){return this.controller.isNarrow()?this.controller.s("graphing-calculator-button-funcs"):this.controller.s("graphing-calculator-button-functions")}};var us=__dcg_shared_module_exports__['h'](j());var DE=class extends yr{template(){return us.createElement(kt,{controller:this.props.controller},us.createElement(xe,null,x(this,"boldX"),x(this,"boldY"),x(this,"boldZ"),x(this,"a^b"),Wt(.5),x(this,"7",{style:"highlight"}),x(this,"8",{style:"highlight"}),x(this,"9",{style:"highlight"}),x(this,"division"),Wt(.5),us.createElement(Gt,{command:this.const("functions"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-functions"),colspan:this.const(2),style:this.const("highlight"),active:()=>this.controller.isKeypadFunctionsPopoverOpen(),onTap:()=>this.dispatch({type:"keypad/functions"}),ariaControls:this.const(`dcg-functions-popover-${yr.uuid}`),ariaExpanded:()=>this.controller.isKeypadFunctionsPopoverOpen()},this.bindFn(this.getFuncsBtnText))),us.createElement(xe,null,x(this,"("),x(this,")"),x(this,"<"),x(this,">"),Wt(.5),x(this,"4",{style:"highlight"}),x(this,"5",{style:"highlight"}),x(this,"6",{style:"highlight"}),x(this,"multiplication"),Wt(.5),x(this,"left",{style:"highlight"}),x(this,"right",{style:"highlight"})),us.createElement(xe,null,x(this,"|a|"),x(this,","),x(this,"<="),x(this,">="),Wt(.5),x(this,"1",{style:"highlight"}),x(this,"2",{style:"highlight"}),x(this,"3",{style:"highlight"}),x(this,"-"),Wt(1),x(this,"backspace",{colspan:1.5,style:"highlight"})),us.createElement(xe,null,us.createElement("div",{class:us.const("dcg-abc-audio-container")},us.createElement(Gt,{command:us.const("ABC"),colspan:this.const(2),ariaLabel:()=>this.controller.s("graphing-calculator-narration-toggle-letters"),style:this.const("highlight"),onTap:()=>{this.dispatch({type:"keypad/abc"})}},()=>this.controller.raw("A B C"))),x(this,"sqrt"),x(this,"pi"),Wt(.5),x(this,"0",{style:"highlight"}),x(this,".",{style:"highlight"}),x(this,"="),x(this,"+"),Wt(.5),x(this,"enter",{colspan:2,style:"blue"})))}getFuncsBtnText(){return this.controller.isNarrow()?this.controller.s("graphing-calculator-button-funcs"):this.controller.s("graphing-calculator-button-functions")}};var sm=__dcg_shared_module_exports__['h'](j());var kE=class extends yr{template(){return sm.createElement(kt,{controller:this.props.controller},sm.createElement(xe,null,x(this,"a"),x(this,"b"),x(this,"c"),x(this,"d"),x(this,"e"),x(this,"f"),x(this,"g"),x(this,"h"),x(this,"i"),x(this,"j")),sm.createElement(xe,null,x(this,"k"),x(this,"l"),x(this,"m"),x(this,"n"),x(this,"o"),x(this,"p"),x(this,"q"),x(this,"r"),x(this,"s"),x(this,"t")),sm.createElement(xe,null,x(this,"shift",{style:"highlight"}),x(this,"u"),x(this,"v"),x(this,"w"),x(this,"x"),x(this,"y"),x(this,"z"),x(this,"theta"),x(this,"backspace",{colspan:2,style:"highlight"})),sm.createElement(xe,null,x(this,"123",{colspan:2,style:"highlight"}),x(this,"a_b"),x(this,"!%_left"),x(this,"[]_left"),x(this,"{}_left"),x(this,"~:_left"),x(this,",'_left"),x(this,"enter",{colspan:2,style:"blue"})))}};var lm=__dcg_shared_module_exports__['h'](j());var IE=class extends yr{template(){return lm.createElement(kt,{controller:this.props.controller},lm.createElement(xe,null,x(this,"A"),x(this,"B"),x(this,"C"),x(this,"D"),x(this,"E"),x(this,"F"),x(this,"G"),x(this,"H"),x(this,"I"),x(this,"J")),lm.createElement(xe,null,x(this,"K"),x(this,"L"),x(this,"M"),x(this,"N"),x(this,"O"),x(this,"P"),x(this,"Q"),x(this,"R"),x(this,"S"),x(this,"T")),lm.createElement(xe,null,x(this,"shift",{style:"highlight"}),x(this,"U"),x(this,"V"),x(this,"W"),x(this,"X"),x(this,"Y"),x(this,"Z"),x(this,"tau"),x(this,"backspace",{colspan:2,style:"highlight"})),lm.createElement(xe,null,x(this,"123",{colspan:2,style:"highlight"}),x(this,"a^b"),x(this,"!%_right"),x(this,"[]_right"),x(this,"{}_right"),x(this,"~:_right"),x(this,",'_right"),x(this,"enter",{colspan:2,style:"blue"})))}};var ke=__dcg_shared_module_exports__['h'](j());var{IfElse:T$}=ke.Components,TE=460,ME=class extends yr{template(){return ke.createElement(kt,{controller:this.props.controller},ke.createElement("div",{class:ke.const("dcg-audio-keypad-container")},ke.createElement("div",{class:ke.const("dcg-audio-keypad-column dcg-playback-column")},ke.createElement(De,{tooltip:this.bindFn(this.getDisabledTooltipText),gravity:this.const("s"),sticky:this.const(!1)},ke.createElement("div",{class:ke.const("dcg-btn-playback")},T$(()=>this.controller.isAudioTracing(),{true:()=>x(this,"stop-graph",{disabled:this.bindFn(this.isAudioDisabled)}),false:()=>x(this,"hear-graph",{disabled:this.bindFn(this.isAudioDisabled)})}))),ke.createElement("div",{class:ke.const("dcg-key-nav-section-container")},ke.createElement(De,{tooltip:this.bindFn(this.getDisabledTooltipText),gravity:this.const("s"),sticky:this.const(!1)},ke.createElement("div",{class:ke.const("dcg-key-nav-section")},x(this,"volume-down",{disabled:this.bindFn(this.isVolumeDownDisabled)}),ke.createElement("div",{role:ke.const("heading"),"aria-level":ke.const("2"),class:()=>({"dcg-key-nav-section-title-container":!0,"dcg-disabled":this.isAudioDisabled()})},ke.createElement("span",{class:ke.const("dcg-key-nav-section-title")},()=>this.controller.s("graphing-calculator-label-audio-trace-volume")),ke.createElement("span",{class:ke.const("dcg-keypad-volume-value dcg-key-nav-section-value")},()=>this.getAudioTraceVolume())),x(this,"volume-up",{disabled:this.bindFn(this.isVolumeUpDisabled)})))),ke.createElement("div",{class:ke.const("dcg-key-nav-section-container")},ke.createElement(De,{tooltip:this.bindFn(this.getDisabledTooltipText),gravity:this.const("s"),sticky:this.const(!1)},ke.createElement("div",{class:ke.const("dcg-key-nav-section")},x(this,"speed-down",{disabled:this.bindFn(this.isSpeedDownDisabled)}),ke.createElement("div",{class:()=>({"dcg-key-nav-section-title-container":!0,"dcg-disabled":this.isAudioDisabled()}),role:ke.const("heading"),"aria-level":ke.const("2")},ke.createElement("span",{class:ke.const("dcg-key-nav-section-title")},()=>this.controller.s("graphing-calculator-label-audio-trace-speed")),ke.createElement("span",{class:ke.const("dcg-keypad-speed-value dcg-key-nav-section-value")},()=>this.getAudioTraceSpeed())),x(this,"speed-up",{disabled:this.bindFn(this.isSpeedUpDisabled)})))),x(this,"audio-trace-off",{style:"highlight"})),ke.createElement("div",{class:ke.const("dcg-audio-keypad-spacer")}),ke.createElement("div",{class:ke.const("dcg-audio-keypad-column dcg-navigation-column")},ke.createElement("span",{class:ke.const("dcg-key-section-title dcg-center-col"),role:ke.const("heading"),"aria-level":ke.const("2")},()=>this.controller.s("graphing-calculator-heading-audio-trace-navigation")),ke.createElement("div",{class:ke.const("dcg-key-nav-section dcg-center-col")},x(this,"previous-point",{disabled:this.bindFn(this.isPrevPointDisabled)}),ke.createElement("div",{class:ke.const("dcg-key-nav-section-title-container"),role:ke.const("heading"),"aria-level":ke.const("2")},()=>this.controller.s("graphing-calculator-label-audio-trace-point")),x(this,"next-point",{disabled:this.bindFn(this.isNextPointDisabled)})),ke.createElement("div",{class:ke.const("dcg-key-nav-section")},x(this,"previous-poi",{disabled:this.bindFn(this.isPrevPOIDisabled)}),ke.createElement("div",{class:ke.const("dcg-key-nav-section-title-container dcg-poi-section-container"),role:ke.const("heading"),"aria-level":ke.const("2")},ke.createElement($d,{i18n:this.const(this.controller),key:this.const("graphing-calculator-heading-keypad-audio-trace-point-of-interest")},ke.createElement("span",{class:ke.const("dcg-key-nav-section-value")},ke.const("Point")),ke.createElement("span",{class:ke.const("dcg-key-nav-section-title")},ke.const("of Interest")))),x(this,"next-poi",{disabled:this.bindFn(this.isNextPOIDisabled)})),ke.createElement("div",{class:ke.const("dcg-key-nav-section dcg-center-col")},x(this,"previous-curve",{disabled:this.bindFn(this.isPrevCurveDisabled)}),ke.createElement("div",{class:ke.const("dcg-key-nav-section-title-container"),role:ke.const("heading"),"aria-level":ke.const("2")},()=>this.controller.s("graphing-calculator-label-audio-trace-curve")),x(this,"next-curve",{disabled:this.bindFn(this.isNextCurveDisabled)}))),ke.createElement("div",{class:ke.const("dcg-audio-keypad-spacer")}),ke.createElement("div",{class:ke.const("dcg-audio-keypad-column dcg-screenreader-options")},ke.createElement("span",{class:ke.const("dcg-key-section-title"),role:ke.const("heading"),"aria-level":ke.const("2")},()=>this.layoutWidth()<=TE?this.controller.s("graphing-calculator-heading-audio-trace-describe"):this.controller.s("graphing-calculator-heading-audio-trace-screen-reader"),ke.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-audio-trace-need-screen-reader"),gravity:this.const("s"),sticky:this.const(!0)},ke.createElement("i",{class:ke.const("dcg-icon-question-sign"),"aria-hidden":ke.const("true")}))),ke.createElement(Gt,{command:ke.const("describe-point"),colspan:this.const(1),style:this.const("default"),onTap:()=>{this.dispatch({type:"keypad/audio-trace",command:"describe-point"})}},ke.createElement("span",null,()=>this.layoutWidth()<=TE?this.controller.s("graphing-calculator-button-keypad-describe-point-short"):this.controller.s("graphing-calculator-button-keypad-describe-point"))),ke.createElement(Gt,{command:ke.const("describe-curve"),colspan:this.const(1),style:this.const("default"),onTap:()=>{this.dispatch({type:"keypad/audio-trace",command:"describe-curve"})}},ke.createElement("span",null,()=>this.layoutWidth()<=TE?this.controller.s("graphing-calculator-button-keypad-describe-curve-short"):this.controller.s("graphing-calculator-button-keypad-describe-curve"))),ke.createElement(Gt,{command:ke.const("describe-axes"),colspan:this.const(1),style:this.const("default"),onTap:()=>{this.dispatch({type:"keypad/audio-trace",command:"describe-axes"})}},ke.createElement("span",null,()=>this.layoutWidth()<=TE?this.controller.s("graphing-calculator-label-axes"):this.controller.s("graphing-calculator-button-keypad-describe-axes"))))))}layoutWidth(){return this.controller.getLayoutMeasurements().width}isPrevPointDisabled(){let t=this.controller.getAudioGraph();return t?!t.agNavigator.canMoveToPrevPoint():!0}isNextPointDisabled(){let t=this.controller.getAudioGraph();return t?!t.agNavigator.canMoveToNextPoint():!0}isPrevPOIDisabled(){let t=this.controller.getAudioGraph();return t?!t.agNavigator.canMoveToPrevPOI():!0}isNextPOIDisabled(){let t=this.controller.getAudioGraph();return t?!t.agNavigator.canMoveToNextPOI():!0}isPrevCurveDisabled(){let t=this.controller.getAudioGraph();return t?!t.agNavigator.canMoveToPrevCurve():!0}isNextCurveDisabled(){let t=this.controller.getAudioGraph();return t?!t.agNavigator.canMoveToNextCurve():!0}isAudioDisabled(){return!this.controller.getAudio()}getAudioTraceVolume(){let t=this.controller.getAudioGraph();return!t||this.isAudioDisabled()?"0%":`${t.getAudioVolume()*100}%`}isVolumeDownDisabled(){let t=this.controller.getAudioGraph();return!t||this.isAudioDisabled()?!0:t.getAudioVolume()<=0}isVolumeUpDisabled(){let t=this.controller.getAudioGraph();return!t||this.isAudioDisabled()?!0:t.getAudioVolume()>=1}getAudioTraceSpeed(){let t=this.controller.getAudioGraph();return!t||this.isAudioDisabled()?"0":ub[t.getAudioSpeedIndex()].displayedSpeed}isSpeedDownDisabled(){let t=this.controller.getAudioGraph();return!t||this.isAudioDisabled()?!0:t.getAudioSpeedIndex()<=0}isSpeedUpDisabled(){let t=this.controller.getAudioGraph();return!t||this.isAudioDisabled()?!0:t.getAudioSpeedIndex()===ub.length-1}getDisabledTooltipText(){return this.isAudioDisabled()?this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled"):""}};var Jt=__dcg_shared_module_exports__['h'](j());var{If:GE,For:a5}=Jt.Components,AE=class extends yr{template(){return Jt.createElement("div",{class:()=>({"dcg-functions-popover":!0,"dcg-popover":!0,"dcg-top":!0,"dcg-two-column":this.shouldRenderWithTwoColumns()}),id:this.const(`dcg-functions-popover-${yr.uuid}`),role:Jt.const("group"),"aria-label":()=>this.controller.s("graphing-calculator-button-functions")},Jt.createElement("div",{class:Jt.const("dcg-popover-interior")},Jt.createElement("div",{class:Jt.const("dcg-interior-buttons")},Jt.createElement(a5,{each:this.bindFn(this.getKeypadKeys),key:t=>t.id},Jt.createElement("div",{class:Jt.const("dcg-basic-keypad dcg-do-not-blur")},t=>Jt.createElement("div",{class:Jt.const("dcg-keypad-keys-section")},Jt.createElement(GE,{predicate:()=>t.title!==void 0},()=>Jt.createElement("div",{class:Jt.const("dcg-section-heading"),role:Jt.const("heading"),"aria-level":Jt.const("2")},()=>t.title,Jt.createElement(GE,{predicate:()=>!!t.beta},()=>Jt.createElement("span",{class:Jt.const("dcg-beta-tag")},()=>this.controller.s("shared-calculator-narration-keypad-key-beta"))),Jt.createElement(GE,{predicate:()=>!!t.helpLink},()=>Jt.createElement("a",{href:()=>t.helpLink.url,target:Jt.const("_blank"),"aria-label":()=>t.helpLink.tooltip},Jt.createElement("i",{class:Jt.const("dcg-icon-question-sign"),"aria-hidden":Jt.const("true")}))))),Jt.createElement(GE,{predicate:()=>t.title===void 0},()=>Jt.createElement("div",{class:Jt.const("dcg-popover-section-separator"),role:Jt.const("separator")})),Jt.createElement(a5,{each:()=>t.keys},Jt.createElement("div",{class:Jt.const("dcg-keypad-keys-buttons")},e=>this.b(e)))))))),Jt.createElement("div",{class:Jt.const("dcg-arrow")}))}shouldRenderWithTwoColumns(){let t=this.controller.getGraphSettings().config.projectorMode?410:375;return this.controller.getLayoutMeasurements().width<t}getInverseTrigSection(){let t=this.controller.areFunctionsRestricted()?["arcsin","arccos","arctan"]:["arcsin","arccos","arctan","arccsc","arcsec","arccot"];return{id:"inversetrig",title:this.controller.s("graphing-calculator-heading-inverse-trig"),keys:t}}getGeometryTools(){let t=["midpoint","intersection","segment","line","ray","vector","parallel","perpendicular","circle","arc","angle","directedangle","polygon","glider"];return{id:"geometry-tools",title:this.controller.s("graphing-calculator-heading-geometry-tools"),keys:t}}getGeometryTransformations(){let t=["dilate","rotate","reflect","translate"];return{id:"geometry-transformations",title:this.controller.s("graphing-calculator-heading-geometry-transformations"),keys:t}}getGeometryMeasurements(){let t=["distance","length","area","perimeter","vertices","angles","directedangles","segments","radius","center","coterminal","supplement"];return{id:"geometry-measurements",title:this.controller.s("graphing-calculator-heading-geometry-measurements"),keys:t}}getCalculatorGeometryMethods(){let t=!this.controller.areFunctionsRestricted()||this.controller.areGeometryFunctionsForceEnabled(),e=this.controller.isThreeDMode()?["segment","triangle","sphere","vector"]:["polygon"],i=this.controller.isThreeDMode()?["length","distance","midpoint"]:["distance","midpoint"],r=t?i:[];return{id:"geometry",title:this.controller.s("graphing-calculator-heading-geometry"),keys:[...e,...r]}}getTrigSection(){let t=this.controller.areFunctionsRestricted()?["sin","cos","tan"]:["sin","cos","tan","csc","sec","cot"];return{id:"trig",title:this.controller.s("graphing-calculator-heading-trig"),keys:t}}getHyperbolicTrigSection(){let t=this.controller.areFunctionsRestricted()?["sinh","cosh","tanh"]:["sinh","cosh","tanh","csch","sech","coth"];return{id:"hyperbtrig",title:this.controller.s("graphing-calculator-heading-hyperbolic-trig"),keys:t}}getListFunctions(){return{id:"lists",title:this.controller.s("graphing-calculator-heading-lists"),keys:["join","sort","shuffle","unique","for"]}}getStatTests(){return{id:"stat-tests",title:this.controller.s("graphing-calculator-heading-stat-tests"),keys:["ttest","tscore","ittest"]}}getStatsSection(){let t=["mean","median","min","max","quartile","quantile","stdev","stdevp","var"];return this.controller.areFunctionsRestricted()||(t=t.concat(["mad","cov","covp"])),t=t.concat(["corr","spearman","stats","count","total"]),{id:"stats",title:this.controller.s("graphing-calculator-heading-stats"),keys:t}}getMiscSection(){return{title:this.controller.s("graphing-calculator-button-functions-menu-number-theory"),id:"misc",keys:["lcm","gcd","mod","ceil","floor","round","sign","nthroot","nPr","nCr"]}}getVisualizationsSection(){return{title:this.controller.s("graphing-calculator-heading-dist-tab-visualizations"),id:"visualizations",keys:["histogram","dotplot","boxplot"],helpLink:{url:"https://help.desmos.com/hc/en-us/articles/360022405991-Data-Visualizations",tooltip:this.controller.s("graphing-calculator-narration-dist-tab-visualizations")}}}getCalculusSection(){return{title:this.controller.s("graphing-calculator-heading-calculus"),id:"calculus",keys:["exp","ln","log","loga","ddx","prime","integral","sum","prod"]}}getDistributionsSection(){return{title:this.controller.s("graphing-calculator-heading-dist-tab-distributions"),id:"distributions",keys:["normaldist","tdist","poissondist","binomialdist","uniformdist","pdf","cdf","inversecdf","random"],helpLink:{url:"https://help.desmos.com/hc/en-us/articles/360022401451-Distributions",tooltip:this.controller.s("graphing-calculator-narration-dist-tab-distributions")}}}getColorsSection(){return{title:this.controller.s("graphing-calculator-button-functions-menu-custom-colors"),id:"colors",keys:["rgb","hsv"],helpLink:{url:"https://help.desmos.com/hc/en-us/articles/4406795899533-Custom-Colors",tooltip:this.controller.s("graphing-calculator-button-functions-menu-custom-colors")}}}getAdvancedSection(){return{title:this.controller.s("graphing-calculator-heading-functions-menu-advanced"),id:"advanced",keys:["->","with"],helpLink:{url:"https://help.desmos.com/hc/en-us/sections/4406370087053-Advanced-Features",tooltip:this.controller.s("graphing-calculator-heading-functions-menu-advanced")}}}getPolarSection(){return{title:this.controller.s("graphing-calculator-heading-functions-menu-polar"),id:"polar",keys:["rho","theta","phi"],helpLink:{url:"https://help.desmos.com/hc/en-us/articles/15824510769805",tooltip:this.controller.s("graphing-calculator-heading-functions-menu-polar")}}}getSoundSection(){return{title:this.controller.s("graphing-calculator-heading-functions-menu-sound"),beta:!0,id:"sound",keys:["tone"],helpLink:{url:"https://help.desmos.com/hc/en-us/articles/21373904717197-Tone",tooltip:this.controller.s("graphing-calculator-heading-functions-menu-sound")}}}getKeypadKeys(){let t=[this.getTrigSection(),this.getInverseTrigSection(),this.getStatsSection(),this.getListFunctions()];return this.controller.areDistributionsEnabled()&&(this.controller.isThreeDMode()||t.push(this.getVisualizationsSection()),t.push(this.getDistributionsSection()),t.push(this.getStatTests())),t.push(this.getCalculusSection()),t.push(this.getHyperbolicTrigSection()),this.controller.is3dProduct()&&t.push(this.getPolarSection()),this.controller.isGeometry()?(t.push(this.getGeometryTools()),t.push(this.getGeometryMeasurements()),t.push(this.getGeometryTransformations())):t.push(this.getCalculatorGeometryMethods()),t.push(this.getColorsSection()),this.controller.toneAllowed()&&t.push(this.getSoundSection()),t.push(this.getMiscSection()),this.controller.areActionsEnabled()&&t.push(this.getAdvancedSection()),t}b(t){return x(this,t,{style:"popover"})}};var{SwitchUnion:M$,If:SM}=pt.Components,VE=class extends yr{template(){return pt.createElement("div",{class:pt.const("dcg-keypad"),role:pt.const("region"),"aria-label":()=>this.controller.s("shared-calculator-narration-keypad")},pt.createElement("div",{class:()=>({"dcg-keys-container":!0,"dcg-smaller-functions-text":this.controller.getLayoutMeasurements().width<650,"dcg-small-ABC":this.controller.getLayoutMeasurements().width<490,"dcg-smaller-ABC":this.controller.getLayoutMeasurements().width<420,"dcg-smallest-ABC":this.controller.getLayoutMeasurements().width<380}),style:this.bindFn(this.computeStyles),didMount:this.bindFn(this.didMountContainer),"aria-hidden":()=>!this.controller.isKeypadOpen()},pt.createElement("div",{class:pt.const("dcg-keys-background dcg-do-not-blur"),style:()=>({background:this.controller.getPillboxBackgroundColor()})},pt.createElement("div",{class:pt.const("dcg-keys")},M$(()=>this.controller.getKeypadLayout(),{letters:()=>pt.createElement(CE,{controller:this.props.controller}),capitalLetters:()=>pt.createElement(SE,{controller:this.props.controller}),mainNumbers:()=>pt.createElement(EE,{controller:this.props.controller}),mainNumbers3D:()=>pt.createElement(DE,{controller:this.props.controller}),noQwertyLetters:()=>pt.createElement(kE,{controller:this.props.controller}),noQwertyCapitalLetters:()=>pt.createElement(IE,{controller:this.props.controller}),audio:()=>pt.createElement(ME,{controller:this.props.controller})}),pt.createElement(SM,{predicate:()=>this.controller.isKeypadFunctionsPopoverOpen()},()=>pt.createElement(AE,{controller:this.props.controller}))),pt.createElement(SM,{predicate:()=>this.controller.isHideKeypadButtonVisible()},()=>pt.createElement("div",{class:pt.const("dcg-minimize-keypad-container")},pt.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-hide-keypad"),gravity:this.const("n"),offset:this.const({left:6})},pt.createElement("div",{role:pt.const("button"),"aria-expanded":pt.const("true"),"aria-controls":this.const(yr.uuid),"aria-label":()=>this.controller.s("graphing-calculator-label-hide-keypad"),class:pt.const("dcg-minimize-keypad"),style:()=>({"border-bottom-color":this.controller.getPillboxBackgroundColor(),background:this.controller.getPillboxBackgroundColor()}),onTap:()=>{this.controller.dispatch({type:"keypad/set-minimized",minimized:!0})}},pt.createElement("i",{class:pt.const("dcg-icon-keyboard"),"aria-hidden":pt.const("true")}),pt.createElement("i",{class:pt.const("dcg-icon-caret-down"),"aria-hidden":pt.const("true")}))))))),pt.createElement(SM,{predicate:this.bindFn(this.isShowKeypadButtonVisible)},()=>pt.createElement("div",{class:pt.const("dcg-show-keypad-container")},pt.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-show-keypad"),gravity:this.const("n")},pt.createElement("div",{role:pt.const("button"),"aria-expanded":pt.const("false"),"aria-controls":this.const(yr.uuid),"aria-label":()=>this.controller.s("graphing-calculator-label-show-keypad"),class:pt.const("dcg-btn-flat-gray dcg-show-keypad dcg-do-not-blur"),style:()=>({background:this.controller.getPillboxBackgroundColor()}),onTap:()=>{this.controller.dispatch({type:"keypad/set-minimized",minimized:!1})}},pt.createElement("i",{class:pt.const("dcg-icon-keyboard"),"aria-hidden":pt.const("true")}),pt.createElement("i",{class:pt.const("dcg-icon-caret-up dcg-do-not-blur"),"aria-hidden":pt.const("true")}))))))}didMountContainer(t){this.containerElt=t}isShowKeypadButtonVisible(){return this.controller.getBrailleMode()!=="none"?!1:!this.controller.isKeypadOpen()&&!this.controller.isNarrow()&&!this.controller.isInEditListMode()&&(this.controller.isListVisible()||this.controller.inAudioTraceMode())}didMount(){this.updatePopoverPosition()}didUpdate(){this.updatePopoverPosition()}computeStyles(){let t={};return this.controller.isNarrow()||(t.transition="transform .3s, opacity .3s"),this.controller.isKeypadOpen()||(t.opacity="0",t.transform="translate3d(0, 255px, 0)"),t}updatePopoverPosition(){if(!this.controller.isKeypadFunctionsPopoverOpen()){this.__popoverCache=void 0;return}let t=this.controller.computeMajorLayout(),e={keypadTop:t.keypad.top,keypadWidth:t.keypad.width,keypadHeight:t.keypad.height,showToLeft:t.grapher.height<525};if(__dcg_shared_module_exports__['Ra'](e,this.__popoverCache))return;this.__popoverCache=e;let i=this.containerElt,r=i.querySelector("[dcg-command=functions]"),o=i.querySelector(".dcg-functions-popover"),n=i.querySelector(".dcg-arrow");if(e.showToLeft){o.classList.remove("dcg-top"),o.classList.add("dcg-left");var a=e.keypadHeight-(ul(r).top-ul(i).top),s=a-r.offsetHeight/2-2-10;n.style.left="auto",n.style.bottom=`${s}px`}else o.classList.remove("dcg-left"),o.classList.add("dcg-top"),n.style.left=`${o.offsetWidth-r.offsetWidth/2}px`,n.style.bottom="auto"}};var Vi=__dcg_shared_module_exports__['h'](j());var Gi=__dcg_shared_module_exports__['h'](j()),{SwitchUnion:G$}=Gi.Components,Gy=class extends Gi.Class{template(){return this.controller=this.props.controller(),G$(()=>this.controller.getBrandingMode(),{"static-edit-link":()=>Gi.createElement("div",{class:Gi.const("dcg-graphpaper-branding")},Gi.createElement("a",{href:()=>this.controller.getEditLink(),target:Gi.const("_blank")},Gi.createElement("span",{class:Gi.const("dcg-powered-by"),"aria-label":()=>this.controller.s("graphing-calculator-narration-edit-on-desmos")},()=>this.controller.s("graphing-calculator-link-edit-on-desmos")),Gi.createElement("i",{class:Gi.const("dcg-icon-desmos"),"aria-hidden":Gi.const("true")}))),"edit-link":()=>Gi.createElement("div",{class:Gi.const("dcg-graphpaper-branding")},Gi.createElement("span",{class:Gi.const("dcg-edit-branding"),onTap:()=>this.controller.dispatch({type:"open-on-web"})},Gi.createElement("span",{class:Gi.const("dcg-powered-by"),"aria-label":()=>this.controller.s("graphing-calculator-narration-edit-on-desmos")},()=>this.controller.s("graphing-calculator-link-edit-on-desmos")),Gi.createElement("i",{class:Gi.const("dcg-icon-desmos"),"aria-hidden":Gi.const("true")}))),"powered-by":()=>Gi.createElement("div",{class:Gi.const("dcg-graphpaper-branding dcg-unclickable")},Gi.createElement("span",{class:Gi.const("dcg-powered-by"),"aria-label":()=>this.controller.s("graphing-calculator-narration-powered-by-desmos")},()=>this.controller.s("graphing-calculator-label-powered-by")),Gi.createElement("i",{class:Gi.const("dcg-icon-desmos"),"aria-hidden":Gi.const("true")}))})}};var ee=__dcg_shared_module_exports__['h'](j());Tt();var tn=__dcg_shared_module_exports__['h'](j());var{If:A$}=tn.Components,Yd=class extends tn.Class{init(){this.controller=this.props.controller()}template(){return tn.createElement(De,{tooltip:this.bindFn(this.getTooltip),gravity:this.const("w")},tn.createElement("div",{class:()=>({"dcg-action-settings":!0,"dcg-pillbox-btn-interior":!0,"dcg-icon-btn":!0,"dcg-btn-flat-gray":this.isPillbox(),"dcg-settings-pillbox":this.isPillbox()}),style:()=>({background:this.isPillbox()?this.controller.getPillboxBackgroundColor():void 0}),role:tn.const("button"),tabindex:tn.const("0"),"aria-haspopup":tn.const("true"),"aria-expanded":()=>this.controller.isGraphSettingsOpen(),"aria-label":this.bindFn(this.getTooltip),onTap:this.bindFn(this.onTapSettingsButton),manageFocus:this.const(Ne({controller:this.controller,location:{type:"settings",location:"icon"}}))},tn.createElement("i",{class:tn.const("dcg-icon-wrench"),"aria-hidden":tn.const("true")}),tn.createElement(A$,{predicate:()=>this.controller.getLockViewportUserSetting()},()=>tn.createElement("i",{class:tn.const("dcg-icon-lock"),"aria-hidden":tn.const("true")}))))}getTooltip(){return this.controller.isGeometry()?this.controller.s("graphing-calculator-label-tooltip-geometry-settings"):this.controller.s("graphing-calculator-label-tooltip-graph-settings")}isPillbox(){return this.props.isPillbox&&this.props.isPillbox()}onTapSettingsButton(e){this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:e.device==="keyboard"})}};var Ai=__dcg_shared_module_exports__['h'](j());var Jd=__dcg_shared_module_exports__['h'](j());var xu=class extends Jd.Class{template(){return Jd.createElement("div",{class:Jd.const("dcg-checkbox-title dcg-lock-viewport-option")},Jd.createElement($e,{ariaLabel:()=>this.props.controller().s("graphing-calculator-label-settings-lock-viewport"),onChange:()=>{this.props.controller().dispatch({type:"toggle-lock-viewport"})},checked:()=>this.props.controller().getLockViewportUserSetting()},()=>this.props.controller().s("graphing-calculator-label-settings-lock-viewport")),Jd.createElement(Wd,{href:this.const("https://help.desmos.com/hc/en-us/articles/4405296853517#h_01FZX4DBWKD83TZVMH615XF3QA"),controller:this.props.controller}))}};var{If:LE}=Ai.Components,PE=class extends Ai.Class{init(){this.controller=this.props.controller(),this.isOpen=this.getAxisScale("x")==="logarithmic"||this.getAxisScale("y")==="logarithmic"||this.props.controller().getLockViewportUserSetting()}template(){return Ai.createElement("div",{class:Ai.const("dcg-advanced-viewport-settings-view")},Ai.createElement(LE,{predicate:()=>this.shouldShowLogScalesOption()},()=>Ai.createElement("div",null,Ai.createElement("div",{class:()=>({"dcg-advanced-toggle":!0,"dcg-margin-top":!0,"dcg-opened":this.isOpen}),onTap:this.bindFn(this.toggleOpen),tabindex:Ai.const(0),role:Ai.const("button"),"aria-pressed":()=>this.isOpen},Ai.createElement("div",{class:Ai.const("dcg-caret-container")},Ai.createElement("i",{class:Ai.const("dcg-icon-caret-down"),"aria-hidden":Ai.const("true")})),()=>this.controller.s("graphing-calculator-label-more-viewport-options")),Ai.createElement(LE,{predicate:()=>this.isOpen},()=>Ai.createElement("div",{class:Ai.const("dcg-advanced-contents")},Ai.createElement("div",{class:Ai.const("dcg-log-axes-container")},Ai.createElement("div",null,()=>this.getAxisScaleLabel("x")),Ai.createElement(Ni,{ariaGroupLabel:()=>this.getAxisScaleLabel("x"),theme:this.const("mini"),staticConfig:this.const(this.getStaticConfigForAxis("x"))}),Ai.createElement("div",null,()=>this.getAxisScaleLabel("y")),Ai.createElement(Ni,{ariaGroupLabel:()=>this.getAxisScaleLabel("y"),theme:this.const("mini"),staticConfig:this.const(this.getStaticConfigForAxis("y"))})),Ai.createElement(LE,{predicate:()=>!this.controller.getLockViewportConfigSetting()},()=>Ai.createElement(xu,__dcg_shared_module_exports__['a']({},this.props))))))),Ai.createElement(LE,{predicate:()=>!this.controller.getLockViewportConfigSetting()&&!this.shouldShowLogScalesOption()},()=>Ai.createElement(xu,__dcg_shared_module_exports__['a']({},this.props))))}toggleOpen(){this.isOpen=!this.isOpen,this.update()}getAxisScaleLabel(e){return e==="x"?this.controller.s("graphing-calculator-label-settings-x-axis")+":":this.controller.s("graphing-calculator-label-settings-y-axis")+":"}getStaticConfigForAxis(e){return[{key:"linear",label:()=>"Linear",selected:()=>this.getAxisScale(e)==="linear",onSelect:()=>this.setAxisScale({axis:e,scale:"linear"})},{key:"logarithmic",label:()=>"Logarithmic",selected:()=>this.getAxisScale(e)==="logarithmic",onSelect:()=>this.setAxisScale({axis:e,scale:"logarithmic"})}]}shouldShowLogScalesOption(){return this.controller.getGraphSettings().config.logScales&&!this.controller.isThreeDMode()}getAxisScale(e){return this.controller.getGraphSettings()[e==="x"?"xAxisScale":"yAxisScale"]}setAxisScale({axis:e,scale:i}){return this.controller.dispatch({type:"set-graph-settings",[e==="x"?"xAxisScale":"yAxisScale"]:i})}};var wu=__dcg_shared_module_exports__['h'](j());var Xd=class extends wu.Class{init(){this.controller=this.props.controller()}template(){return wu.createElement("div",{class:wu.const("dcg-options-menu-section dcg-radiangroup")},wu.createElement(Ni,{ariaGroupLabel:()=>this.controller.s("graphing-calculator-narration-settings-angle"),staticConfig:this.bindFn(this.getAngleModeOptions)}))}getAngleModeOptions(){return[{key:"radians",label:()=>this.controller.s("graphing-calculator-button-settings-radians"),selected:()=>!this.getDegreeMode(),onSelect:()=>this.setDegreeMode(!1),focusHelperOptions:{controller:this.controller,location:{type:"settings",location:"radian-mode"}}},{key:"degrees",label:()=>this.controller.s("graphing-calculator-button-settings-degrees"),selected:()=>this.getDegreeMode(),onSelect:()=>this.setDegreeMode(!0),focusHelperOptions:{controller:this.controller,location:{type:"settings",location:"degree-mode"}}}]}getDegreeMode(){return!!this.controller.getGraphSettings().degreeMode}setDegreeMode(e){this.controller.dispatch({type:"set-graph-settings",degreeMode:e})}};var Jc=__dcg_shared_module_exports__['h'](j());var cm=class extends Jc.Class{init(){this.controller=this.props.controller()}template(){return Jc.createElement("div",null,Jc.createElement("div",{class:Jc.const("dcg-displaysizegroup")},Jc.createElement(Ni,{ariaGroupLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size"),staticConfig:this.bindFn(this.getProjectorModeOptions)})),Jc.createElement($e,{onChange:this.bindFn(this.toggleInvertedColors),checked:()=>this.controller.getInvertedColors(),manageFocus:this.const(Ne({controller:this.controller,location:{type:"settings",location:"reverse-contrast"}}))},()=>this.controller.s("graphing-calculator-label-settings-reverse-contrast")))}getProjectorModeOptions(){return[{key:"default",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-default"),class:()=>"dcg-displaysize-default",selected:()=>!this.getProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!1),focusHelperOptions:{controller:this.controller,location:{type:"settings",location:"default-size"}}},{key:"large",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-large"),class:()=>"dcg-displaysize-large",selected:()=>this.getProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!0),focusHelperOptions:{controller:this.controller,location:{type:"settings",location:"large-size"}}}]}onSelectProjectorModeOption(e){this.controller.dispatch({type:"set-projector-mode",value:e})}getProjectorMode(){return!!this.controller.getGraphSettings().config.projectorMode}toggleInvertedColors(){this.controller.dispatch({type:"set-inverted-colors",value:!this.controller.getInvertedColors()})}};var{Input:s5,If:ea,IfElse:l5}=ee.Components,jl=class extends ee.Class{template(){return ee.createElement(Lt,{isFocused:()=>this.props.parent().getFocusedLimit()===this.props.limit(),latex:()=>this.props.parent().getLimitLatex(this.props.limit()),ariaLabel:this.props.ariaLabel,handleLatexChanged:e=>this.props.parent().setLimitLatex(this.props.limit(),e),handleFocusChanged:e=>this.props.parent().onFocusedChanged(this.props.limit(),e),hasError:()=>this.props.parent().isLimitInvalid(this.props.limit()),dataLabelAttributeValue:this.props.limit,controller:this.props.controller,readonly:this.const(!1),containerClass:()=>({"dcg-log-scale":this.props.axisScale()==="logarithmic"})})}},OE=class extends ee.Class{init(){this.controller=this.props.controller(),this.uuid=wg()}template(){return ee.createElement("div",{class:ee.const("dcg-settings-view-container")},ee.createElement(Yd,__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.props),{isPillbox:this.const(!0)})),ee.createElement(ea,{predicate:()=>this.controller.isGraphSettingsOpen()},()=>ee.createElement("div",{class:ee.const("dcg-settings-container dcg-left dcg-popover dcg-constrained-height-popover"),style:this.bindFn(this.getContainerStyle),didMount:this.bindFn(this.didMountContainer),didUnmount:this.bindFn(this.didUnmountContainer)},ee.createElement("div",{class:ee.const("dcg-popover-interior"),role:ee.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-graph-settings")},ee.createElement("div",{class:ee.const("dcg-visual-settings")},ee.createElement(cm,{controller:this.props.controller}),ee.createElement(ea,{predicate:()=>this.controller.getBrailleControls()},()=>ee.createElement("div",{class:ee.const("dcg-braille-container dcg-braille-mode")},ee.createElement($e,{onChange:this.bindFn(this.toggleBrailleMode),checked:()=>this.controller.getBrailleMode()!=="none"},()=>this.controller.s("shared-calculator-narration-braille-mode")),ee.createElement(ea,{predicate:()=>this.controller.getBrailleMode()!=="none"},()=>ee.createElement("div",{class:ee.const("dcg-braille-options-container")},ee.createElement("div",{class:ee.const("dcg-braille-options-buttons")},ee.createElement(Ni,{ariaGroupLabel:()=>this.controller.s("shared-calculator-narration-braille-mode"),staticConfig:this.bindFn(this.getBrailleOptions)})),ee.createElement("div",{class:ee.const("dcg-checkbox-title dcg-six-key-checkbox")},ee.createElement($e,{onChange:e=>this.controller.dispatch({type:"set-six-key-input",useSixKeyInput:e}),checked:()=>this.controller.getSixKeyInput()},()=>this.controller.s("graphing-calculator-label-settings-six-key-braille")),ee.createElement("a",{href:ee.const("https://www.desmos.com/accessibility#braille"),"aria-label":()=>this.controller.s("graphing-calculator-link-learn-more"),class:ee.const("dcg-six-key-info"),target:ee.const("_blank")},ee.createElement("i",{class:ee.const("dcg-icon-question-sign"),"aria-hidden":ee.const("true")}))),ee.createElement("div",{class:ee.const("dcg-refreshable-braille-note")},()=>this.controller.s("graphing-calculator-text-refreshable-braille-display-note")+" ",ee.createElement("a",{href:()=>"https://www.desmos.com/braille-examples?"+this.controller.getBrailleMode(),target:ee.const("_blank")},()=>this.controller.s("graphing-calculator-link-view-braille-examples")))))))),ee.createElement("div",{class:ee.const("dcg-top-section-flex dcg-grid-settings-container")},ee.createElement("div",{class:ee.const("dcg-grid-settings")},ee.createElement($e,{class:this.const("dcg-settings-grid-toggle"),onChange:this.bindFn(this.toggleGrid),checked:this.bindFn(this.getShowGrid)},()=>this.controller.s("graphing-calculator-label-settings-grid")),ee.createElement(ea,{predicate:this.bindFn(this.getShowGrid)},()=>ee.createElement("div",{class:ee.const("dcg-circle-icon-group dcg-grid-group")},ee.createElement("div",{class:()=>({"dcg-circle-icon":!0,"dcg-action-cartesian":!0,"dcg-selected":!this.getPolarMode()}),role:ee.const("button"),tabindex:ee.const("0"),"aria-pressed":()=>!this.getPolarMode(),"aria-label":()=>this.controller.s("graphing-calculator-narration-settings-cartesian-grid"),onTap:this.bindFn(this.setCartesianMode)},ee.createElement("i",{class:ee.const("dcg-icon-cartesian")})),ee.const("\xA0"),ee.createElement("div",{class:()=>({"dcg-circle-icon":!0,"dcg-action-polar":!0,"dcg-selected":this.getPolarMode()}),role:ee.const("button"),tabindex:ee.const("0"),"aria-pressed":()=>this.getPolarMode(),"aria-label":()=>this.controller.s("graphing-calculator-narration-settings-polar-grid"),onTap:this.bindFn(this.setPolarMode)},ee.createElement("i",{class:ee.const("dcg-icon-polar")})))),ee.createElement($e,{onChange:this.bindFn(this.toggleArrows),checked:()=>this.getAxisArrowMode()!=="NONE"},()=>this.controller.s("graphing-calculator-label-settings-arrows")),ee.createElement(ea,{predicate:()=>this.getAxisArrowMode()!=="NONE"},()=>ee.createElement("div",{class:ee.const("dcg-circle-icon-group dcg-arrow-group")},ee.createElement("div",{role:ee.const("button"),tabindex:ee.const("0"),class:()=>({"dcg-circle-icon":!0,"dcg-arrows":!0,"dcg-selected":this.getAxisArrowMode()==="BOTH"}),"dcg-arrows":ee.const("BOTH"),"aria-label":()=>this.controller.s("graphing-calculator-narration-settings-show-both"),"aria-pressed":()=>this.getAxisArrowMode()==="BOTH",onTap:()=>this.setAxisArrowMode("BOTH")},ee.createElement("i",{class:ee.const("dcg-icon-arrows-two"),"aria-hidden":ee.const("true")})),ee.const("\xA0"),ee.createElement("div",{role:ee.const("button"),tabindex:ee.const("0"),class:()=>({"dcg-circle-icon":!0,"dcg-arrows":!0,"dcg-selected":this.getAxisArrowMode()==="POSITIVE"}),"dcg-arrows":ee.const("POSITIVE"),"aria-label":()=>this.controller.s("graphing-calculator-narration-settings-show-positive"),"aria-pressed":()=>this.getAxisArrowMode()==="POSITIVE",onTap:()=>this.setAxisArrowMode("POSITIVE")},ee.createElement("i",{class:ee.const("dcg-icon-arrows-one"),"aria-hidden":ee.const("true")}))))),ee.createElement("div",{class:ee.const("dcg-top-checkboxes-container")},ee.createElement($e,{onChange:this.bindFn(this.toggleAxisNumbers),checked:this.bindFn(this.getAxisNumbers),small:this.const(!0)},()=>this.controller.s("graphing-calculator-label-settings-axis-numbers")),ee.createElement(ea,{predicate:()=>this.getShowGrid()&&!this.getPolarMode()},()=>ee.createElement($e,{onChange:this.bindFn(this.toggleMinorGridlines),checked:this.bindFn(this.getMinorGridlines),small:this.const(!0)},()=>this.controller.s("graphing-calculator-label-settings-minor-gridlines"))),ee.createElement(ea,{predicate:()=>this.controller.canUseAdvancedStyling()&&!this.getPolarMode()},()=>ee.createElement($e,{checked:()=>this.controller.getGraphSettings().restrictGridToFirstQuadrant,onChange:e=>this.controller.dispatch({type:"set-graph-settings",restrictGridToFirstQuadrant:e}),small:this.const(!0)},()=>this.controller.s("graphing-calculator-label-settings-one-quadrant"))),ee.createElement(ea,{predicate:this.bindFn(this.showZoomSquareButton)},()=>ee.createElement("div",{role:ee.const("button"),tabindex:ee.const("0"),class:ee.const("dcg-action-zoom-square dcg-btn-light-gray"),onTap:this.bindFn(this.zoomSquare)},()=>this.controller.s("graphing-calculator-button-settings-zoom-square"))))),ee.createElement("div",{class:ee.const("dcg-axes-settings-container")},ee.createElement(ea,{predicate:()=>!this.controller.isThreeDMode()},()=>ee.createElement("div",{class:ee.const("dcg-checkbox-title dcg-x-axis-title")},ee.createElement($e,{onChange:this.bindFn(this.toggleXAxis),checked:this.bindFn(this.getShowXAxis)},ee.createElement("span",{id:this.const(`x-axis-description-${this.uuid}`)},()=>this.controller.s("graphing-calculator-label-settings-x-axis"))),ee.createElement(ea,{predicate:this.bindFn(this.getShowXAxis)},()=>ee.createElement("div",{class:ee.const("dcg-axis-label")},ee.createElement("label",{for:this.const(`x-axis-label-${this.uuid}`)},()=>this.controller.s("graphing-calculator-button-label")),ee.createElement(s5,{class:this.const("dcg-x-axis-label"),disabled:()=>this.getShowXAxis()?void 0:!0,onInput:this.bindFn(this.onXAxisLabelInput),value:this.bindFn(this.getXAxisLabel),"aria-describedby":this.const(`x-axis-description-${this.uuid}`),id:this.const(`x-axis-label-${this.uuid}`),placeholder:()=>this.controller.s("graphing-calculator-narration-settings-x-axis-label-placeholder")}))))),ee.createElement("div",{class:ee.const("dcg-editable-mathquill-container dcg-x-axis-options")},ee.createElement(jl,{limit:this.const("xmin"),axisScale:()=>this.getAxisScale("x"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-x-axis-min"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller}),ee.createElement(Te,{config:this.const({}),latex:this.const("\\le x\\le")},ee.createElement("span",{class:ee.const("dcg-interval-interior")})),ee.createElement(jl,{limit:this.const("xmax"),axisScale:()=>this.getAxisScale("x"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-x-axis-max"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller}),ee.createElement(ea,{predicate:()=>!this.getPolarMode()&&!this.controller.isThreeDMode()},()=>l5(()=>this.getAxisScale("x")==="linear",{true:()=>ee.createElement("span",{class:ee.const("dcg-step-container")},ee.createElement("span",{class:ee.const("dcg-step-label"),"aria-hidden":ee.const("true")},()=>this.controller.s("graphing-calculator-label-settings-step")),ee.createElement(jl,{limit:this.const("xstep"),axisScale:this.const("linear"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-x-axis-step"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller})),false:()=>ee.createElement("span",{style:ee.const("display: none")})}))),ee.createElement(ea,{predicate:()=>!this.controller.isThreeDMode()},()=>ee.createElement("div",{class:ee.const("dcg-checkbox-title dcg-y-axis-title")},ee.createElement($e,{onChange:this.bindFn(this.toggleYAxis),checked:this.bindFn(this.getShowYAxis)},ee.createElement("span",{id:this.const(`y-axis-description-${this.uuid}`)},()=>this.controller.s("graphing-calculator-label-settings-y-axis"))),ee.createElement(ea,{predicate:this.bindFn(this.getShowYAxis)},()=>ee.createElement("div",{class:ee.const("dcg-axis-label")},ee.createElement("label",{for:this.const(`y-axis-label-${this.uuid}`)},()=>this.controller.s("graphing-calculator-button-label")),ee.createElement(s5,{class:this.const("dcg-y-axis-label"),onInput:this.bindFn(this.onYAxisLabelInput),value:this.bindFn(this.getYAxisLabel),"aria-describedby":this.const(`y-axis-description-${this.uuid}`),id:this.const(`y-axis-label-${this.uuid}`),placeholder:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-label-placeholder")}))))),ee.createElement("div",{class:ee.const("dcg-editable-mathquill-container dcg-y-axis-options")},ee.createElement(jl,{limit:this.const("ymin"),axisScale:()=>this.getAxisScale("y"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-min"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller}),ee.createElement(Te,{config:this.const({}),latex:this.const("\\le y\\le")},ee.createElement("span",{class:ee.const("dcg-interval-interior")})),ee.createElement(jl,{limit:this.const("ymax"),axisScale:()=>this.getAxisScale("y"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-max"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller}),ee.createElement(ea,{predicate:()=>!this.getPolarMode()&&!this.controller.isThreeDMode()},()=>l5(()=>this.getAxisScale("y")==="linear",{true:()=>ee.createElement("span",{class:ee.const("dcg-step-container")},ee.createElement("span",{class:ee.const("dcg-step-label"),"aria-hidden":ee.const("true")},()=>this.controller.s("graphing-calculator-label-settings-step")),ee.createElement(jl,{limit:this.const("ystep"),axisScale:this.const("linear"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-step"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller})),false:()=>ee.createElement("span",{style:ee.const("display: none")})}))),ee.createElement(ea,{predicate:()=>this.controller.isThreeDMode()},()=>ee.createElement("div",null,ee.createElement("div",{class:ee.const("dcg-editable-mathquill-container dcg-z-axis-options")},ee.createElement(jl,{limit:this.const("zmin"),axisScale:this.const("linear"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-z-axis-min"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller}),ee.createElement(Te,{config:this.const({}),latex:this.const("\\le z\\le")},ee.createElement("span",{class:ee.const("dcg-interval-interior")})),ee.createElement(jl,{limit:this.const("zmax"),axisScale:this.const("linear"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-z-axis-max"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller})))),ee.createElement(PE,{controller:this.props.controller})),ee.createElement(Xd,{controller:this.props.controller}),ee.createElement("div",{class:ee.const("dcg-arrow")})))))}toggleBrailleMode(){this.controller.dispatch({type:"set-braille-mode",mode:this.controller.getBrailleMode()==="none"?"nemeth":"none"})}getBrailleOptions(){return[{key:"nemeth",label:()=>this.controller.s("shared-calculator-button-braille-mode-nemeth"),selected:()=>this.controller.getBrailleMode()==="nemeth",onSelect:()=>this.setBrailleMode("nemeth")},{key:"ueb",label:()=>this.controller.s("shared-calculator-button-braille-mode-ueb"),selected:()=>this.controller.getBrailleMode()==="ueb",onSelect:()=>this.setBrailleMode("ueb")}]}setBrailleMode(e){this.controller.dispatch({type:"set-braille-mode",mode:e})}didMountContainer(e){this.node=e,H(document.documentElement).on("dcg-tapstart.settings-view wheel.settings-view",i=>{this.eventShouldClosePopover(i)&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:i.device==="keyboard"})}),H(document.documentElement).on("keydown.settings-view",i=>{let r=be(i);if(r==="Esc"&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:!0}),this.controller.isGraphSettingsOpen()&&r==="Tab"&&!i.altKey&&!i.metaKey&&!i.ctrlKey){let o=this.controller.getFocusLocation();if(!o||o.type!=="settings")return;i.shiftKey?i.shiftKey&&(o.location==="default-size"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),i.preventDefault(),i.stopPropagation()):o.location==="icon"&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"degree-mode"}}),i.preventDefault(),i.stopPropagation())):o.location==="icon"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"default-size"}}),i.preventDefault(),i.stopPropagation()):o.location==="degree-mode"&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),i.preventDefault(),i.stopPropagation())}})}didUnmountContainer(){H(document.documentElement).off(".settings-view")}didUpdate(){if(!this.controller.isGraphSettingsOpen())return;let e=this.controller.getKeypadHeight();e!==this.cachedKeypadHeight&&document.activeElement&&this.node.contains(document.activeElement)&&Ms(document.activeElement,this.node.querySelector(".dcg-popover-interior"),50),this.cachedKeypadHeight=e}eventShouldClosePopover(e){let i=e.target,r=this.node.contains(i),o=!!i.closest(".dcg-action-settings"),n=this.isMathquillFocused()&&!!i.closest(".dcg-keypad"),a=!!i.closest(".dcg-action-undo")||!!i.closest(".dcg-action-redo");return!(r||o||n||a)}isMathquillFocused(){return this.getFocusedLimit()!==void 0}getLimitLatex(e){return this.controller.getSettingsViewModel().limitLatex[e]||""}setLimitLatex(e,i){i!==this.controller.getSettingsViewModel().limitLatex[e]&&this.controller.dispatch({type:"set-axis-limit-latex",limit:e,latex:i})}getFocusedLimit(){let e=this.controller.getFocusLocation();if(e&&e.type==="settings")return e.location}getInvalidLimits(){let e=!!this.controller.getGraphSettings().degreeMode,i=wi(this.getLimitLatex("xmin"),e),r=wi(this.getLimitLatex("xmax"),e),o=wi(this.getLimitLatex("ymin"),e),n=wi(this.getLimitLatex("ymax"),e),a=this.getLimitLatex("xstep")===""?0:wi(this.getLimitLatex("xstep"),e),s=this.getLimitLatex("ystep")===""?0:wi(this.getLimitLatex("ystep"),e),l={},c=new er(i,r,o,n);return isFinite(i)&&isFinite(r)?(l.xmin=!c.isXValid(this.controller.getGraphSettings().xAxisScale),l.xmax=l.xmin):(l.xmin=!isFinite(i),l.xmax=!isFinite(r)),isFinite(o)&&isFinite(n)?(l.ymin=!c.isYValid(this.controller.getGraphSettings().yAxisScale),l.ymax=l.ymin):(l.ymin=!isFinite(o),l.ymax=!isFinite(n)),l.xstep=!Uh(a),l.ystep=!Uh(s),l}isLimitInvalid(e){return this.getInvalidLimits()[e]}onFocusedChanged(e,i){i?this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"settings",location:e}})}onXAxisLabelInput(e){this.controller.dispatch({type:"set-graph-settings",xAxisLabel:e})}onYAxisLabelInput(e){this.controller.dispatch({type:"set-graph-settings",yAxisLabel:e})}getXAxisLabel(){return this.controller.getGraphSettings().xAxisLabel}getYAxisLabel(){return this.controller.getGraphSettings().yAxisLabel}getShowXAxis(){return!!this.controller.getGraphSettings().showXAxis}toggleXAxis(){this.controller.dispatch({type:"set-graph-settings",showXAxis:!this.getShowXAxis()})}getShowYAxis(){return!!this.controller.getGraphSettings().showYAxis}toggleYAxis(){this.controller.dispatch({type:"set-graph-settings",showYAxis:!this.getShowYAxis()})}getAxisNumbers(){return!!this.controller.getGraphSettings().xAxisNumbers}toggleAxisNumbers(){let e=this.getAxisNumbers();this.controller.dispatch({type:"set-graph-settings",xAxisNumbers:!e,yAxisNumbers:!e,polarNumbers:!e})}getMinorGridlines(){return this.controller.getGraphSettings().xAxisMinorSubdivisions===0}toggleMinorGridlines(){let e=this.getMinorGridlines()?1:0;this.controller.dispatch({type:"set-graph-settings",yAxisMinorSubdivisions:e,xAxisMinorSubdivisions:e})}getPolarMode(){return!!this.controller.getGraphSettings().polarMode}setPolarMode(){this.controller.dispatch({type:"set-polar-mode",polarMode:!0})}setCartesianMode(){this.controller.dispatch({type:"set-polar-mode",polarMode:!1})}getAxisScale(e){return this.controller.getGraphSettings()[e==="x"?"xAxisScale":"yAxisScale"]}getAxisArrowMode(){return this.controller.getGraphSettings().xAxisArrowMode}setAxisArrowMode(e){this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:e,yAxisArrowMode:e})}getShowGrid(){return this.controller.getGraphSettings().showGrid}toggleGrid(){this.controller.dispatch({type:"set-graph-settings",showGrid:!this.getShowGrid()})}toggleArrows(){let e=this.getAxisArrowMode()==="NONE"?"BOTH":"NONE";this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:e,yAxisArrowMode:e})}showZoomSquareButton(){let e=this.controller.getAxisScaleSettings();return!this.controller.isThreeDMode()&&e.xAxisScale===e.yAxisScale&&!this.controller.getGraphSettings().squareAxes}getContainerStyle(){return this.controller.getKeypadHeight()?"bottom: 0":""}zoomSquare(){this.controller.dispatch({type:"zoom",direction:"square"})}};var Qt=__dcg_shared_module_exports__['h'](j());Tt();var Ve=__dcg_shared_module_exports__['h'](j());var{abs:KTe,PI:qTe}=Math;var{sin:zTe,cos:UTe}=Math;var O$=new URLSearchParams(window.location.search),c5=(t,e)=>{let i=O$.get(t);return i===null?e:Number(i)},_$=c5("scrollZoomRecenterAggressiveness",.2),ZTe=c5("buttonZoomRecenterAggressiveness",.1);Tt();var{abs:vMe,min:CMe,acos:SMe,hypot:EMe,PI:DMe}=Math;var kMe=5*Math.PI/180;function d5(t,e=.01*(t.xmax-t.xmin)){return e*=2,Math.abs(t.xmin+t.xmax)<=e&&Math.abs(t.ymin+t.ymax)<=e&&Math.abs(t.zmin+t.zmax)<=e}var{If:Qd}=Ve.Components,Zd=class extends Ve.Class{template(){return Ve.createElement(Lt,{isFocused:()=>this.props.parent().getFocusedLimit()===this.props.limit(),latex:()=>this.props.parent().getLimitLatex(this.props.limit()),ariaLabel:this.props.ariaLabel,handleLatexChanged:e=>this.props.parent().setLimitLatex(this.props.limit(),e),handleFocusChanged:e=>this.props.parent().onFocusedChanged(this.props.limit(),e),hasError:()=>this.props.parent().isLimitInvalid(this.props.limit()),dataLabelAttributeValue:this.props.limit,controller:this.props.controller,readonly:this.const(!1)})}},_E=class extends Ve.Class{init(){this.controller=this.props.controller(),this.isOpen=this.mustBeOpen()}willUpdate(){this.mustBeOpen()&&(this.isOpen=!0)}mustBeOpen(){var i;let e=(i=this.controller.getGrapher3d())==null?void 0:i.viewportController.getViewport();return e?e.xmin!==e.ymin||e.xmin!==e.zmin||e.xmax!==e.ymax||e.xmax!==e.zmax:!1}template(){return Ve.createElement("div",{class:Ve.const("dcg-three-d-domain dcg-advanced-viewport-settings-view dcg-options-menu-section")},Ve.createElement("div",{class:Ve.const("dcg-options-menu-section-title dcg-flex-container")},Ve.createElement("div",null,()=>this.controller.s("graphing-calculator-label-edit-graph-bounds")),Ve.createElement("div",null,Ve.createElement(Qd,{predicate:this.bindFn(this.showRecenterButton)},()=>Ve.createElement("div",{role:Ve.const("button"),tabindex:Ve.const("0"),class:Ve.const("dcg-action-zoom-recenter dcg-btn-light-gray"),onTap:this.bindFn(this.zoomRecenter)},()=>this.controller.s("graphing-calculator-label-recenter"))))),Ve.createElement("div",{class:Ve.const("dcg-three-d-domain-toggle-container")},Ve.createElement("div",{class:()=>({"dcg-advanced-toggle":!0,"dcg-opened":this.isOpen,"dcg-disabled":this.mustBeOpen()}),onTap:this.bindFn(this.toggleOpen),tabindex:()=>this.mustBeOpen()?-1:0,"aria-disabled":()=>this.mustBeOpen(),role:Ve.const("button"),"aria-pressed":()=>this.isOpen,"aria-expanded":()=>this.isOpen,"aria-label":()=>this.controller.s("graphing-calculator-label-edit-graph-bounds")},Ve.createElement("div",{class:Ve.const("dcg-caret-container")},Ve.createElement("i",{class:Ve.const("dcg-icon-caret-down"),"aria-hidden":Ve.const("true")})),Ve.createElement(Qd,{predicate:()=>this.isOpen},()=>Ve.createElement("span",{class:Ve.const("dcg-axis-label")},Ve.createElement(Te,{config:this.const({}),latex:this.const("x")}),Ve.const("-axis:"))),Ve.createElement(Qd,{predicate:()=>!this.isOpen},()=>Ve.createElement("span",{class:Ve.const("dcg-axis-label")},()=>this.controller.s("graphing-calculator-label-settings-all-axes")))),Ve.createElement("div",{class:Ve.const("dcg-editable-mathquill-container dcg-x-axis-options")},Ve.createElement(Zd,{limit:this.const("xmin"),ariaLabel:()=>this.isOpen?this.controller.s("graphing-calculator-narration-settings-x-axis-min"):this.controller.s("graphing-calculator-narration-settings-all-axes-min"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller}),Ve.createElement(Qd,{predicate:()=>this.isOpen},()=>Ve.createElement(Te,{config:this.const({}),latex:this.const("\\le x\\le")},Ve.createElement("span",{class:Ve.const("dcg-interval-interior")}))),Ve.createElement(Qd,{predicate:()=>!this.isOpen},()=>Ve.createElement("span",{class:Ve.const("dcg-axis-label-to")},()=>this.controller.s("shared-label-to"))),Ve.createElement(Zd,{limit:this.const("xmax"),ariaLabel:()=>this.isOpen?this.controller.s("graphing-calculator-narration-settings-x-axis-max"):this.controller.s("graphing-calculator-narration-settings-all-axes-max"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller}))),Ve.createElement(Qd,{predicate:()=>this.isOpen},()=>Ve.createElement("div",{class:Ve.const("dcg-advanced-contents")},Ve.createElement("div",{class:Ve.const("dcg-editable-mathquill-container dcg-y-axis-options")},Ve.createElement("span",{class:Ve.const("dcg-axis-label")},Ve.createElement(Te,{config:this.const({}),latex:this.const("y")}),Ve.const("-axis:")),Ve.createElement(Zd,{limit:this.const("ymin"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-min"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller}),Ve.createElement(Te,{config:this.const({}),latex:this.const("\\le y\\le")},Ve.createElement("span",{class:Ve.const("dcg-interval-interior")})),Ve.createElement(Zd,{limit:this.const("ymax"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-max"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller})),Ve.createElement("div",null,Ve.createElement("div",{class:Ve.const("dcg-editable-mathquill-container dcg-z-axis-options")},Ve.createElement("span",{class:Ve.const("dcg-axis-label")},Ve.createElement(Te,{config:this.const({}),latex:this.const("z")}),Ve.const("-axis:")),Ve.createElement(Zd,{limit:this.const("zmin"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-z-axis-min"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller}),Ve.createElement(Te,{config:this.const({}),latex:this.const("\\le z\\le")},Ve.createElement("span",{class:Ve.const("dcg-interval-interior")})),Ve.createElement(Zd,{limit:this.const("zmax"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-z-axis-max"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller}))),Ve.createElement(Qd,{predicate:this.bindFn(this.showZoomSquareButton)},()=>Ve.createElement("div",null,Ve.createElement("div",{role:Ve.const("button"),tabindex:Ve.const("0"),class:Ve.const("dcg-action-zoom-square-3d dcg-btn-primary"),onTap:this.bindFn(this.zoomSquare)},()=>this.controller.s("graphing-calculator-button-settings-zoom-square")))))),Ve.createElement(Qd,{predicate:()=>!this.controller.getLockViewportConfigSetting()},()=>Ve.createElement($e,{ariaLabel:()=>this.props.controller().s("graphing-calculator-label-disable-zoom"),onChange:()=>{this.props.controller().dispatch({type:"toggle-lock-viewport"})},checked:()=>this.props.controller().getLockViewportUserSetting()},()=>this.props.controller().s("graphing-calculator-label-disable-zoom"))))}showRecenterButton(){var i;let e=(i=this.controller.getGrapher3d())==null?void 0:i.webglLayer.domain();return!!e&&!d5(e,0)}zoomRecenter(e){this.controller.dispatch({type:"zoom",direction:"recenter"}),e.device==="keyboard"&&this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"xmin"}})}getFocusedLimit(){let e=this.controller.getFocusLocation();if(e&&e.type==="settings")return e.location}getLimitLatex(e){return this.controller.getSettingsViewModel().limitLatex[e]||""}setLimitLatex(e,i){i!==this.controller.getSettingsViewModel().limitLatex[e]&&this.controller.dispatch({type:"set-axis-limit-latex",limit:e,latex:i,updateYZAlso:!this.isOpen&&(e==="xmin"||e==="xmax")})}getInvalidLimits(){let e=!!this.controller.getGraphSettings().degreeMode,i=wi(this.getLimitLatex("xmin"),e),r=wi(this.getLimitLatex("xmax"),e),o=wi(this.getLimitLatex("ymin"),e),n=wi(this.getLimitLatex("ymax"),e),a=wi(this.getLimitLatex("zmin"),e),s=wi(this.getLimitLatex("zmax"),e),l={},c=new er(i,r,o,n,a,s);return isFinite(i)&&isFinite(r)?(l.xmin=!c.isXValid(this.controller.getGraphSettings().xAxisScale),l.xmax=l.xmin):(l.xmin=!isFinite(i),l.xmax=!isFinite(r)),isFinite(o)&&isFinite(n)?(l.ymin=!c.isYValid(this.controller.getGraphSettings().yAxisScale),l.ymax=l.ymin):(l.ymin=!isFinite(o),l.ymax=!isFinite(n)),isFinite(a)&&isFinite(s)?(l.zmin=!c.isZValid(),l.zmax=l.zmin):(l.zmin=!isFinite(a),l.zmax=!isFinite(s)),l}isLimitInvalid(e){return this.getInvalidLimits()[e]}onFocusedChanged(e,i){i?this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"settings",location:e}})}toggleOpen(){this.mustBeOpen()||(this.isOpen=!this.isOpen,this.update())}showZoomSquareButton(){return!this.controller.getGraphSettings().squareAxes}zoomSquare(e){this.controller.dispatch({type:"zoom",direction:"square"}),e.device==="keyboard"&&this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"zmax"}})}};var nr=__dcg_shared_module_exports__['h'](j());var{If:p5}=nr.Components,dm=class extends nr.Class{init(){this.controller=this.props.controller()}template(){return nr.createElement(p5,{predicate:this.bindFn(this.shouldShowBrailleSection)},()=>nr.createElement("div",{class:nr.const("dcg-options-menu-section")},nr.createElement("div",{class:nr.const("dcg-options-menu-section-title")},()=>this.controller.s("shared-calculator-narration-braille-mode"),nr.createElement(Ui,{ariaLabel:()=>this.controller.s("shared-calculator-narration-braille-mode"),onChange:this.bindFn(this.toggleBrailleMode),toggled:()=>this.controller.getBrailleMode()!=="none"})),nr.createElement(p5,{predicate:()=>this.controller.getBrailleMode()!=="none"},()=>nr.createElement("div",{class:nr.const("dcg-braille-options-container")},nr.createElement("div",{class:nr.const("dcg-braille-options-buttons")},nr.createElement(Ni,{ariaGroupLabel:()=>this.controller.s("shared-calculator-narration-braille-mode"),staticConfig:this.bindFn(this.getBrailleOptions)})),nr.createElement("div",{class:nr.const("dcg-checkbox-title dcg-six-key-checkbox")},nr.createElement($e,{onChange:e=>this.controller.dispatch({type:"set-six-key-input",useSixKeyInput:e}),checked:()=>this.controller.getSixKeyInput()},()=>this.controller.s("graphing-calculator-label-settings-six-key-braille")),nr.createElement(Wd,{href:this.const("https://www.desmos.com/accessibility#braille"),controller:this.props.controller})),nr.createElement("div",{class:nr.const("dcg-refreshable-braille-note")},()=>this.controller.s("graphing-calculator-text-refreshable-braille-display-note")+" ",nr.createElement("a",{href:()=>"https://www.desmos.com/braille-examples?"+this.controller.getBrailleMode(),class:nr.const("dcg-blue-link"),target:nr.const("_blank")},()=>this.controller.s("graphing-calculator-link-view-braille-examples")))))))}shouldShowBrailleSection(){return this.controller.getBrailleControls()&&this.controller.getGraphSettings().config.expressions}toggleBrailleMode(){this.controller.dispatch({type:"set-braille-mode",mode:this.controller.getBrailleMode()==="none"?"nemeth":"none"})}getBrailleOptions(){return[{key:"nemeth",label:()=>this.controller.s("shared-calculator-button-braille-mode-nemeth"),selected:()=>this.controller.getBrailleMode()==="nemeth",onSelect:()=>this.setBrailleMode("nemeth")},{key:"ueb",label:()=>this.controller.s("shared-calculator-button-braille-mode-ueb"),selected:()=>this.controller.getBrailleMode()==="ueb",onSelect:()=>this.setBrailleMode("ueb")}]}setBrailleMode(e){this.controller.dispatch({type:"set-braille-mode",mode:e})}};var xa=__dcg_shared_module_exports__['h'](j());var{If:F$}=xa.Components,FE=class extends xa.Class{init(){this.controller=this.props.controller()}template(){return xa.createElement("div",{class:xa.const("dcg-options-menu-section")},xa.createElement("div",{class:xa.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-label-display-properties")),xa.createElement($e,{onChange:this.bindFn(this.toggleInvertedColors),checked:()=>this.controller.getInvertedColors(),manageFocus:this.const(Ne({controller:this.controller,location:{type:"settings",location:"reverse-contrast"}}))},()=>this.controller.s("graphing-calculator-label-settings-reverse-contrast")),xa.createElement(F$,{predicate:()=>!!uo("beta3d")},()=>xa.createElement($e,{onChange:()=>{this.controller.dispatch({type:"set-graph-settings",showBox3D:!this.controller.getGraphSettings().showBox3D})},checked:()=>!!this.controller.getGraphSettings().showBox3D},()=>this.controller.raw("Clip to box"))),xa.createElement($e,{class:()=>"dcg-translucent-surfaces-checkbox",onChange:this.bindFn(this.toggleTranslucentSurfaces),checked:()=>this.controller.getTranslucentSurfaces(),ariaLabel:()=>this.controller.s("graphing-calculator-label-settings-translucent-surfaces"),manageFocus:this.const(Ne({controller:this.controller,location:{type:"settings",location:"translucent-surfaces"}}))},()=>this.controller.s("graphing-calculator-label-settings-translucent-surfaces")))}toggleTranslucentSurfaces(){this.controller.dispatch({type:"set-translucent-surfaces",value:!this.controller.getTranslucentSurfaces()})}toggleInvertedColors(){this.controller.dispatch({type:"set-inverted-colors",value:!this.controller.getInvertedColors()})}};var{If:u5}=Qt.Components,RE=class extends Qt.Class{init(){this.controller=this.props.controller()}template(){return Qt.createElement("div",{class:Qt.const("dcg-settings-view-container dcg-settings-view-3d-container")},Qt.createElement("div",{class:Qt.const("dcg-3d-settings-flex-container")},Qt.createElement(Yd,__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.props),{isPillbox:this.const(!0)}))),Qt.createElement(u5,{predicate:()=>this.controller.isGraphSettingsOpen()},()=>Qt.createElement("div",{class:Qt.const("dcg-settings-container dcg-left dcg-popover dcg-constrained-height-popover"),style:this.bindFn(this.getContainerStyle),didMount:this.bindFn(this.didMountContainer),didUnmount:this.bindFn(this.didUnmountContainer)},Qt.createElement("div",{class:Qt.const("dcg-popover-interior dcg-generic-options-menu"),role:Qt.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-graph-settings")},Qt.createElement(FE,{controller:this.props.controller}),Qt.createElement(_E,{controller:this.props.controller}),Qt.createElement("div",{class:Qt.const("dcg-options-menu-section")},Qt.createElement("div",{class:Qt.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-label-axes"),Qt.createElement(Ui,{ariaLabel:()=>this.controller.s("graphing-calculator-label-axes"),onChange:()=>{this.controller.dispatch({type:"set-graph-settings",showAxis3D:!this.controller.getGraphSettings().showAxis3D})},toggled:()=>!!this.controller.getGraphSettings().showAxis3D})),Qt.createElement(u5,{predicate:()=>this.controller.getGraphSettings().showAxis3D},()=>Qt.createElement("div",{class:Qt.const("dcg-show-axis-labels-section")},Qt.createElement("div",null,Qt.createElement($e,{onChange:()=>{this.controller.dispatch({type:"set-graph-settings",showPlane3D:!this.controller.getGraphSettings().showPlane3D})},checked:()=>!!this.controller.getGraphSettings().showPlane3D},()=>this.controller.s("graphing-calculator-label-settings-domain-plane"))),Qt.createElement("div",null,Qt.createElement($e,{onChange:()=>{this.controller.dispatch({type:"set-graph-settings",showNumbers3D:!this.controller.getGraphSettings().showNumbers3D})},checked:()=>!!this.controller.getGraphSettings().showNumbers3D},()=>this.controller.s("graphing-calculator-label-settings-numbers-3d"))),Qt.createElement("div",null,Qt.createElement($e,{onChange:()=>{this.controller.dispatch({type:"set-graph-settings",showAxisLabels3D:!this.controller.getGraphSettings().showAxisLabels3D})},checked:()=>!!this.controller.getGraphSettings().showAxisLabels3D},()=>this.controller.s("graphing-calculator-label-settings-axis-labels-3d")))))),Qt.createElement(dm,{controller:this.props.controller}),Qt.createElement(Xd,{controller:this.props.controller}),Qt.createElement("div",{class:Qt.const("dcg-arrow")})))))}didMountContainer(e){this.node=e,H(document.documentElement).on("dcg-tapstart.settings-view wheel.settings-view",i=>{this.eventShouldClosePopover(i)&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:i.device==="keyboard"})}),H(document.documentElement).on("keydown.settings-view",i=>{let r=be(i);if(r==="Esc"&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:!0}),this.controller.isGraphSettingsOpen()&&r==="Tab"&&!i.altKey&&!i.metaKey&&!i.ctrlKey){let o=this.controller.getFocusLocation();if(!o||o.type!=="settings")return;i.shiftKey?i.shiftKey&&(o.location==="reverse-contrast"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),i.preventDefault(),i.stopPropagation()):o.location==="icon"&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"degree-mode"}}),i.preventDefault(),i.stopPropagation())):o.location==="icon"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"reverse-contrast"}}),i.preventDefault(),i.stopPropagation()):o.location==="degree-mode"&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),i.preventDefault(),i.stopPropagation())}})}didUnmountContainer(){H(document.documentElement).off(".settings-view")}didUpdate(){if(!this.controller.isGraphSettingsOpen())return;let e=this.controller.getKeypadHeight();e!==this.cachedKeypadHeight&&document.activeElement&&this.node.contains(document.activeElement)&&Ms(document.activeElement,this.node.querySelector(".dcg-popover-interior"),50),this.cachedKeypadHeight=e}eventShouldClosePopover(e){let i=e.target,r=this.node.contains(i),o=!!i.closest(".dcg-action-settings"),n=this.isMathquillFocused()&&i.closest(".dcg-keypad"),a=!!i.closest(".dcg-action-undo")||!!i.closest(".dcg-action-redo");return!(r||o||n||a)}isMathquillFocused(){let e=this.controller.getFocusLocation();return(e==null?void 0:e.type)==="settings"}getContainerStyle(){return this.controller.getKeypadHeight()?"bottom: 0":""}};var xr=__dcg_shared_module_exports__['h'](j());var NE=class extends xr.Class{init(){this.controller=this.props.controller()}template(){return xr.createElement("div",{class:xr.const("dcg-zoom-container")},xr.createElement("div",{class:xr.const("dcg-zoominout-pillbox dcg-btn-flat-gray dcg-btn-flat-gray-group dcg-group-vertical"),style:()=>({background:this.controller.getPillboxBackgroundColor()}),role:xr.const("group"),"aria-label":()=>this.controller.s("graphing-calculator-narration-zoom-options-label")},xr.createElement(De,{tooltip:this.bindFn(this.getZoomInLabel),displayBlock:this.const(!0),gravity:this.const("w")},xr.createElement("div",{class:xr.const("dcg-action-zoomin dcg-pillbox-btn-interior"),role:xr.const("button"),tabindex:xr.const("0"),"aria-label":this.bindFn(this.getZoomInLabel),onTap:this.bindFn(this.zoomIn),manageFocus:this.const(Ne({controller:this.controller,location:{type:"zoom-in-btn"}}))},xr.createElement("i",{class:xr.const("dcg-icon-plus"),"aria-hidden":xr.const("true")}))),xr.createElement(De,{tooltip:this.bindFn(this.getZoomOutLabel),displayBlock:this.const(!0),gravity:this.const("w")},xr.createElement("div",{class:xr.const("dcg-action-zoomout dcg-pillbox-btn-interior"),role:xr.const("button"),tabindex:xr.const("0"),"aria-label":this.bindFn(this.getZoomOutLabel),onTap:this.bindFn(this.zoomOut)},xr.createElement("i",{class:xr.const("dcg-icon-minus"),"aria-hidden":xr.const("true")})))))}zoomIn(){this.controller.dispatch({type:"zoom",direction:"in"})}zoomOut(){this.controller.dispatch({type:"zoom",direction:"out"})}getZoomInLabel(){return this.controller.s("graphing-calculator-label-tooltip-zoom-in")}getZoomOutLabel(){return this.controller.s("graphing-calculator-label-tooltip-zoom-out")}};var wa=__dcg_shared_module_exports__['h'](j());var Ay=class extends wa.Class{init(){this.controller=this.props.controller()}template(){return wa.createElement("div",{class:wa.const("dcg-reset-container")},wa.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-tooltip-reset"),gravity:this.props.tooltipGravity},wa.createElement("div",{class:wa.const("dcg-reset-pillbox dcg-action-reset dcg-btn-flat-gray dcg-pillbox-btn-interior"),role:wa.const("button"),tabindex:wa.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-reset"),onTap:this.bindFn(this.reset),style:()=>({background:this.controller.getPillboxBackgroundColor()})},wa.createElement("i",{class:wa.const("dcg-icon-reset"),"aria-hidden":wa.const("true")}))))}reset(){this.controller.dispatch({type:"reset-graph"})}};var Js=__dcg_shared_module_exports__['h'](j());var BE=class extends Js.Class{init(){this.controller=this.props.controller()}template(){return Js.createElement(De,{tooltip:this.bindFn(this.getZoomRestoreLabel),gravity:this.const("w")},Js.createElement("div",{class:()=>({"dcg-btn-flat-gray":!0,"dcg-pillbox-btn-interior":!0,"dcg-action-zoomrestore":!0}),role:Js.const("button"),tabindex:Js.const("0"),"aria-label":this.bindFn(this.getZoomRestoreLabel),onTap:this.bindFn(this.setDefaultViewport),style:()=>({background:this.controller.getPillboxBackgroundColor()}),manageFocus:this.const(Ne({controller:this.controller,location:{type:"zoom-restore-btn"}}))},Js.createElement("i",{class:Js.const("dcg-icon-home"),"aria-hidden":Js.const("true")})))}setDefaultViewport(){this.controller.dispatch({type:"zoom",direction:"default"}),this.controller.dispatch({type:"set-focus-location",location:{type:"zoom-in-btn"}})}getZoomRestoreLabel(){return this.controller.s("graphing-calculator-label-tooltip-viewport-default")}};var rn=__dcg_shared_module_exports__['h'](j());var Vy=class extends rn.Class{init(){this.controller=this.props.controller()}template(){return rn.createElement("div",{class:()=>({"dcg-3d-orientation-pillbox":!0,"dcg-btn-flat-gray":!0,"dcg-btn-flat-gray-group":!0,"dcg-group-horizontal":this.props.layout()==="horizontal","dcg-group-vertical":this.props.layout()==="vertical"}),style:()=>({background:this.controller.getPillboxBackgroundColor()}),role:rn.const("group"),"aria-label":()=>this.controller.s("graphing-calculator-narration-3d-orientation-options-label")},rn.createElement(De,{disabled:this.bindFn(this.isDefaultOrientation),tooltip:this.bindFn(this.getDefaultOrientationLabel),gravity:this.bindFn(this.getTooltipGravity),displayBlock:this.const(!0)},rn.createElement("div",{class:()=>({"dcg-action-defaultorientation":!0,"dcg-pillbox-btn-interior":!0,"dcg-disabled":this.isDefaultOrientation()}),role:rn.const("button"),"aria-disabled":this.bindFn(this.isDefaultOrientation),tabindex:()=>this.isDefaultOrientation()?-1:0,"aria-label":this.bindFn(this.getDefaultOrientationLabel),onTap:this.bindFn(this.rotateToDefaultOrientation)},rn.createElement("i",{class:rn.const("dcg-icon-3d-cube"),"aria-hidden":rn.const("true")}))),rn.createElement(De,{tooltip:this.bindFn(this.getXYOrientationLabel),gravity:this.bindFn(this.getTooltipGravity),disabled:this.bindFn(this.isXYPlaneOrientation),displayBlock:this.const(!0)},rn.createElement("div",{class:()=>({"dcg-action-xyorientation":!0,"dcg-pillbox-btn-interior":!0,"dcg-disabled":this.isXYPlaneOrientation()}),role:rn.const("button"),"aria-disabled":this.bindFn(this.isXYPlaneOrientation),tabindex:()=>this.isXYPlaneOrientation()?-1:0,"aria-label":this.bindFn(this.getXYOrientationLabel),onTap:this.bindFn(this.rotateToXyOrientation)},rn.createElement("i",{class:rn.const("dcg-icon-xy-plane"),"aria-hidden":rn.const("true")}))))}getTooltipGravity(){return this.props.layout()==="horizontal"?"s":"w"}rotateToDefaultOrientation(){this.controller.dispatch({type:"zoom",direction:"default3dOrientation"})}rotateToXyOrientation(){this.controller.dispatch({type:"zoom",direction:"xy3dOrientation"})}isDefaultOrientation(){var i;let e=(i=this.controller.getGrapher3d())==null?void 0:i.controls;return!!(e!=null&&e.isDefaultOrientation())}isXYPlaneOrientation(){var i;let e=(i=this.controller.getGrapher3d())==null?void 0:i.controls;return!!(e!=null&&e.isXYPlaneOrientation())}getDefaultOrientationLabel(){return this.controller.s("graphing-calculator-label-tooltip-zoom-default-orientation")}getXYOrientationLabel(){return this.controller.s("graphing-calculator-label-tooltip-zoom-xy-orientation")}};var{Each:R$,If:Ly}=Vi.Components,KE=class extends Vi.Class{init(){this.controller=this.props.controller()}template(){return Vi.createElement("div",null,Vi.createElement(Ly,{predicate:this.bindFn(this.shouldShowLeftPillboxes)},()=>Vi.createElement("div",{class:()=>({"dcg-left-pillboxes":!0,"dcg-geometry-toolbar-present":this.controller.shouldShowGeoToolbar()})},Vi.createElement(Ly,{predicate:this.bindFn(this.shouldShowUndoRedo)},()=>Vi.createElement(jg,{controller:this.props.controller,isPillbox:this.const(!0)})),Vi.createElement(Ly,{predicate:this.bindFn(this.shouldShowGeoReset)},()=>Vi.createElement(Ay,{controller:this.props.controller,tooltipGravity:this.const("s")})))),Vi.createElement("div",{class:()=>({"dcg-pillbox-container":!0,"dcg-geometry-toolbar-present":this.controller.shouldShowGeoToolbar()}),role:()=>this.controller.isGeoUIActive()?void 0:"region","aria-label":()=>this.controller.isGeoUIActive()?void 0:this.controller.s("graphing-calculator-narration-graph-settings-controls")},Vi.createElement("div",{class:Vi.const("dcg-overgraph-pillbox-elements"),style:this.bindFn(this.getContainerStyle)},Vi.createElement(Ly,{predicate:()=>this.shouldShowOrientationPillbox()&&!this.onSmallScreen()},()=>Vi.createElement("div",{class:Vi.const("dcg-left-pillbox-elements")},Vi.createElement(Vy,{controller:this.props.controller,layout:this.const("horizontal")}))),Vi.createElement(Ly,{predicate:()=>this.getRightPillboxElements().length>0},()=>Vi.createElement("div",{class:Vi.const("dcg-right-pillbox-elements")},R$(()=>this.getRightPillboxElements(),{item:e=>{switch(e){case"settings2d":return Vi.createElement(OE,{controller:this.props.controller});case"settings3d":return Vi.createElement(RE,{controller:this.props.controller});case"settings-geo":return Vi.createElement(Yd,__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.props),{isPillbox:this.const(!0)}));case"reset":return Vi.createElement(Ay,{controller:this.props.controller,tooltipGravity:this.const("w")});case"zoom-in-out":return Vi.createElement(NE,{controller:this.props.controller});case"orientation":return Vi.createElement(Vy,{layout:this.const("vertical"),controller:this.props.controller});case"zoom-home":return Vi.createElement(BE,{controller:this.props.controller})}}}))))),Vi.createElement(Gy,{controller:()=>this.props.controller()}))}shouldShowLeftPillboxes(){return this.shouldShowGeoReset()||this.shouldShowUndoRedo()}shouldShowGeoReset(){return this.controller.isGeometry()&&this.shouldShowResetButton()&&!this.controller.isListEnabled()}shouldShowUndoRedo(){return this.controller.isGeometry()&&!this.controller.isListEnabled()&&!this.controller.getGeoToolbarSuppressedByAuthor()}getRightPillboxElements(){let e=[];return this.shouldShowGraphSettings()&&e.push("settings2d"),this.shouldShow3DGraphSettings()&&e.push("settings3d"),this.shouldShowGeometrySettings()&&e.push("settings-geo"),this.shouldShowResetButton()&&!this.shouldShowGeoReset()&&e.push("reset"),this.shouldShowZoomInOutButtons()&&e.push("zoom-in-out"),this.shouldShowOrientationPillbox()&&this.onSmallScreen()&&e.push("orientation"),this.shouldShowZoomHomeButton()&&e.push("zoom-home"),e}shouldShowOrientationPillbox(){return this.controller.is3dProduct()}getContainerStyle(){let e=this.controller.isKeypadOpen()?this.controller.getKeypadHeight():0;return this.controller.isGraphSettingsOpen()?`bottom: ${e}px;`:"bottom: auto"}shouldShow3DGraphSettings(){return this.controller.getGraphSettings().config.settingsMenu&&this.controller.is3dProduct()}shouldShowGraphSettings(){return this.controller.getGraphSettings().config.settingsMenu&&!this.controller.isGeometry()&&!this.controller.is3dProduct()}shouldShowGeometrySettings(){return this.controller.getGraphSettings().config.settingsMenu?this.controller.isGeometry():!1}zoomEnabled(){return this.controller.getGraphSettings().config.zoomButtons&&!this.isViewportLocked()}onSmallScreen(){let e=this.controller.getLayoutMeasurements();return e.width<450||e.height<450}shouldShowZoomInOutButtons(){return this.onSmallScreen()?!1:this.zoomEnabled()}shouldShowZoomHomeButton(){return this.zoomEnabled()&&!this.controller.isDefaultViewportRestored()}isViewportLocked(){return this.controller.getGraphSettings().config.lockViewport||this.controller.getGraphSettings().userLockedViewport}shouldShowResetButton(){return this.controller.getGraphSettings().config.showResetButtonOnGraphpaper&&this.controller.hasDefaultState()}};var Xt=__dcg_shared_module_exports__['h'](j());var $t=__dcg_shared_module_exports__['h'](j());var qE=__dcg_shared_module_exports__['h'](j());function g5(t,e,i){t.save();for(let r of i)switch(r.type){case"point":{let o;!r.color||r.color==="dark"?o=tC({isPoint:!0,color:e.point,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1}):r.color==="light"?o=__dcg_shared_module_exports__['ld'](e.point,.7):o=r.color;let n;switch(r.size){case"small":n=5;break;case"large":n=10;break;case"medium":default:n=5;break}r.hollow?(t.lineWidth=2,t.strokeStyle=o,t.beginPath(),t.arc(r.x,r.y,n-1,0,2*Math.PI),t.stroke()):(t.fillStyle=o,t.beginPath(),t.arc(r.x,r.y,n,0,2*Math.PI),t.fill())}break;case"circle":{let o;!r.color||r.color==="dark"?o=Kf({isPoint:!1,color:e.circle,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1}):r.color==="light"?o=__dcg_shared_module_exports__['ld'](e.circle,.7):o=r.color;let n;switch(r.lineWidth){case"small":n=2;break;case"large":n=7;break;case"medium":default:n=4;break}t.lineWidth=n,t.strokeStyle=o,t.beginPath(),t.arc(r.x,r.y,r.radius,0,2*Math.PI),t.stroke()}break;case"arc":{let o;!r.color||r.color==="dark"?o=Kf({isPoint:!1,color:e.circle,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1}):r.color==="light"?o=__dcg_shared_module_exports__['ld'](e.circle,.7):o=r.color;let n;switch(r.lineWidth){case"small":n=2;break;case"large":n=7;break;case"medium":default:n=4;break}t.lineWidth=n,t.strokeStyle=o,t.beginPath(),t.arc(r.x,r.y,r.radius,r.startAngle,r.endAngle),t.stroke()}break;case"stroked-path":{let o;!r.color||r.color==="dark"?o=Kf({isPoint:!1,color:e.line,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1}):r.color==="light"?o=__dcg_shared_module_exports__['ld'](e.line,.7):o=r.color;let n=r.path,a;switch(r.lineWidth){case"small":a=1;break;case"large":a=5;break;case"medium":default:a=3;break}t.lineCap="round",t.lineJoin="round",t.strokeStyle=o,t.lineWidth=a,t.beginPath(),t.moveTo(n[0],n[1]);for(let s=2;s<n.length;s+=2)t.lineTo(n[s],n[s+1]);if(r.arrow){let s=[],l=n.length-1;B$(s,n[l-3],n[l-2],n[l-1],n[l],a/2+9.5);for(let c=0;c<s.length;c+=2)t.lineTo(s[c],s[c+1])}t.stroke()}break;case"filled-polygon":{let o;r.color?o=r.color:o=tC({isPoint:!1,color:e.polygon,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1,isTransparentObject:!0});let n=r.path;t.fillStyle=o,t.beginPath(),t.moveTo(n[0],n[1]);for(let a=2;a<n.length;a+=2)t.lineTo(n[a],n[a+1]);t.fill()}break;case"angle":{let o=Kf({isPoint:!1,color:e.angle,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1,isTransparentObject:!0}),n=tC({isPoint:!1,color:e.angle,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1,isTransparentObject:!0});N$(t,{type:"angle-indicator",lineWidth:4,strokeStyle:o,fillStyle:n,isRightAngle:!1,x:r.x,y:r.y,isDirected:r.isDirected,radius:r.radius,startAngle:r.startAngle,deltaAngle:r.deltaAngle})}break;default:return r}t.restore()}function N$(t,e){t.beginPath(),h5(t,e),t.lineTo(e.x,e.y),t.lineTo(e.x+e.radius*Math.cos(e.startAngle),e.y+e.radius*Math.sin(e.startAngle)),e.isDirected||(t.fillStyle=e.fillStyle,t.fill()),t.strokeStyle=e.strokeStyle,t.lineWidth=e.lineWidth,t.beginPath(),h5(t,e),t.stroke()}function h5(t,e){let i=e.startAngle+e.deltaAngle;if(e.isRightAngle){let r=e.radius*Math.cos(e.startAngle),o=e.radius*Math.cos(i),n=e.radius*Math.sin(e.startAngle),a=e.radius*Math.sin(i);t.moveTo(e.x+r,e.y+n),t.lineTo(e.x+r+o,e.y+n+a),t.lineTo(e.x+o,e.y+a)}else t.arc(e.x,e.y,e.radius,e.startAngle,i)}function B$(t,e,i,r,o,n=12){let a=Math.atan2(o-i,r-e),s=r-n*Math.cos(a-Math.PI/9),l=o-n*Math.sin(a-Math.PI/9),c=r-n*Math.cos(a+Math.PI/9),p=o-n*Math.sin(a+Math.PI/9),u=r-(n-2)*Math.cos(a-Math.PI/18),g=o-(n-2)*Math.sin(a-Math.PI/18),m=r-(n-2)*Math.cos(a+Math.PI/18),w=o-(n-2)*Math.sin(a+Math.PI/18);t.push(s,l,c,p,r,o,u,g,m,w,r,o)}var vu=class extends qE.Class{template(){return qE.createElement("canvas",{didMount:this.bindFn(this.didMountCanvas),width:()=>this.props.width(),height:()=>this.props.height(),style:()=>({width:this.props.width()/2+"px",height:this.props.height()/2+"px"})})}didMountCanvas(e){this.canvas=e,this.redraw()}didUpdate(){this.redraw()}redraw(){let e=this.props.instructions()||[],i=this.props.model().getNonObjectsState().ui.colors;if(__dcg_shared_module_exports__['Ra'](e,this.lastInstructions)&&__dcg_shared_module_exports__['Ra'](i,this.lastColors))return;this.lastInstructions=e,this.lastColors=i;let r=this.canvas.getContext("2d");r.clearRect(0,0,r.canvas.width,r.canvas.height),g5(r,i,e)}};var ta=__dcg_shared_module_exports__['h'](j());var{For:K$}=ta.Components;function EM(t,e){switch(e){case"selection":return t.s("graphing-calculator-label-geometry-tools-dropdown-menu-selection");case"point":return t.s("graphing-calculator-label-geometry-tools-dropdown-menu-point");case"line":return t.s("graphing-calculator-label-geometry-tools-dropdown-menu-line");case"circle":return t.s("graphing-calculator-label-geometry-tools-dropdown-menu-circle");case"angle":return t.s("graphing-calculator-label-geometry-tools-dropdown-menu-angle");case"polygon":return t.s("graphing-calculator-label-geometry-tools-dropdown-menu-polygon");case"transformation":return t.s("graphing-calculator-label-geometry-tools-dropdown-menu-transformation")}}var zE=class extends ta.Class{init(){this.controller=this.props.controller(),this.geoModel=this.controller.getGeoModel()}getTools(){let e=this.controller.getOpenItemMenu();return!e||e.type!=="geo-tool-dropdown"||e.group!==this.props.group()?[]:e.tools}getAriaLabel(){let e=this.props.group();return EM(this.controller,e)}template(){return ta.createElement("div",{class:()=>({"dcg-options-menu":!0,"dcg-select-tools-dropdown":!0,"dcg-shift-menu-left":this.getTools()[0]==="angle"}),role:ta.const("menu"),"aria-label":this.bindFn(this.getAriaLabel),onKeyDown:this.bindFn(this.handleKeyPress),"dcg-geo-tool-group":this.bindFn(this.props.group)},ta.createElement(K$,{each:()=>this.getTools()},ta.createElement("div",{class:ta.const("dcg-options-menu-section")},e=>ta.createElement("button",{role:ta.const("menuitemradio"),"aria-disabled":()=>!this.isToolEnabled(e),"aria-description":()=>this.isToolEnabled(e)?void 0:this.controller.s("graphing-calculator-narration-geometry-tool-disabled",{tool:e}),"aria-checked":()=>this.controller.getActiveTool()===e,onTap:i=>{this.isToolEnabled(e)&&this.chooseTool({tool:e,fromKeyboard:i.device==="keyboard"})},"dcg-geo-tool":this.const(e),class:()=>({"dcg-dropdown-tool":!0,"dcg-selected-tool":this.controller.getActiveTool()===e,"dcg-disabled":!this.isToolEnabled(e),"dcg-will-be-hidden-or-disabled":this.controller.toolWillBeHiddenOrDisabled(e)}),manageFocus:this.const(Ne({controller:this.controller,location:{type:"geo-basic-tool-menu-item",tool:e}}))},ta.createElement(vu,{model:()=>this.geoModel,width:this.const(100),height:this.const(100),instructions:()=>this.geoModel.getIconInstructionsForTool(e)}),ta.createElement("span",null,()=>this.geoModel.getDisplayNameForTool(e))))))}isToolEnabled(e){return this.controller.isGeoToolEnabled(e)}chooseTool(e){this.props.controller().dispatch({type:"select-geo-tool",tool:e.tool,focusGraphPaper:!!e.fromKeyboard})}handleKeyPress(e){let i=this.props.guid();if(!i)return;let r=be(e);if(r!=="Up"&&r!=="Down"&&r!=="Esc")return;let o=this.getTools(),n=this.controller.getFocusLocation();if(r==="Esc"){let c=this.props.group();(n==null?void 0:n.type)==="geo-basic-tool-menu-item"&&this.focusMenuIcon(),c&&this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"geo-tool-dropdown",guid:i,tools:o,group:c,focusFirstOption:!1}}),e.stopPropagation(),e.preventDefault();return}if((n==null?void 0:n.type)!=="geo-basic-tool-menu-item")return;let a=r==="Down"?1:-1,l=(o.indexOf(n.tool)+a)%o.length;l<0&&(l=o.length+l),l>=0&&(this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool-menu-item",tool:o[l]}}),e.preventDefault(),e.stopPropagation())}focusMenuIcon(){let e=this.props.group();if(!e)return;let i=this.controller.getGeoToolbarItemsForGroup(e),r=i==null?void 0:i.current;if(r)return this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:r}})}};var{If:m5,For:q$,Switch:z$}=$t.Components,DM=class extends $t.Class{getAriaLabel(){let e=this.props.controller(),i=EM(e,this.props.group());if(i)return e.s("graphing-calculator-label-geometry-tools-open-dropdown-menu-transformation",{item:i})}template(){return $t.createElement("span",{style:$t.const("position:relative;"),class:$t.const("dcg-tool-dropdown"),role:$t.const("button"),tabindex:$t.const("-1"),"aria-label":this.bindFn(this.getAriaLabel),"aria-expanded":this.props.ariaExpanded,onTap:this.bindFn(this.handleOnTap)},$t.createElement("span",{class:$t.const("dcg-dropdown-icon")},$t.createElement("i",{class:$t.const("dcg-icon-caret-down")})))}handleOnTap(e){e.handle(),this.props.openDropDown()}},UE=class extends $t.Class{init(){this.controller=this.props.controller(),this.geoModel=this.controller.getGeoModel()}getGroups(){return this.controller.getGeoToolbarGroupKeys()}template(){return $t.createElement("div",{role:$t.const("toolbar"),"aria-label":()=>this.controller.s("graphing-calculator-label-geometry-tools"),class:$t.const("dcg-geo-basic-tools dcg-animate-in-after-initial-load"),onKeydown:e=>this.handleToolbarKeydown(e)},$t.createElement(q$,{each:()=>this.getGroups()},$t.createElement("div",{class:$t.const("dcg-geo-basic-tools-row")},e=>$t.createElement("div",{class:$t.const("dcg-tool-button-container")},$t.createElement("button",{class:()=>({"dcg-split-btn":!!this.getGroup(e).dropdown,"dcg-selected":this.isGroupSelected(this.getGroup(e)),"dcg-disabled":!this.isGroupEnabled(this.getGroup(e)),"dcg-will-be-hidden-or-disabled":this.controller.toolWillBeHiddenOrDisabled(this.getGroup(e).current)}),"dcg-geo-tool":()=>this.getGroup(e).current,"dcg-geo-tool-group":()=>e,tabindex:()=>this.isGroupSelected(this.getGroup(e))?0:-1,"aria-label":()=>this.geoModel.getDisplayNameForTool(this.getGroup(e).current),"aria-disabled":()=>!this.isGroupEnabled(this.getGroup(e)),"aria-haspopup":()=>!!this.getGroup(e).dropdown,"aria-pressed":()=>this.isGroupSelected(this.getGroup(e)),onTap:i=>this.handleTap(i,this.getGroup(e)),onLongHold:()=>this.openMenuFromLongHold(this.getGroup(e)),"dcg-open-menu-guid":()=>this.getGuid(this.getGroup(e)),manageFocus:()=>Ne({controller:this.controller,location:{type:"geo-basic-tool",tool:this.getGroup(e).current}}),"aria-controls":()=>this.getGuid(this.getGroup(e)),"aria-expanded":()=>this.getGroup(e).dropdown?this.isGroupDropdownOpen(this.getGroup(e)):void 0},$t.createElement("span",{class:()=>({"dcg-basic-tool-btn":!0,"dcg-icon":!0})},$t.createElement(vu,{model:()=>this.geoModel,width:this.const(100),height:this.const(100),instructions:()=>this.geoModel.getIconInstructionsForTool(this.getGroup(e).current)})),$t.createElement(m5,{predicate:()=>!!this.getGroup(e).dropdown},()=>$t.createElement(DM,{group:()=>e,controller:this.props.controller,ariaExpanded:()=>this.isGroupDropdownOpen(this.getGroup(e)),openDropDown:()=>this.openDropdownMenu(this.getGroup(e))}))),$t.createElement(m5,{predicate:()=>this.isGroupDropdownOpen(this.getGroup(e))},()=>$t.createElement(rs,{controller:this.props.controller,shouldHandleTabAndEscape:this.const(!1),menuType:this.const("geo-tool-dropdown"),menuButtonFocusLocation:this.const({type:"geo-basic-tool",tool:this.getGroup(e).current}),rootElSelector:this.const(".dcg-geometry-toolbar-view")},$t.createElement(zE,{controller:this.props.controller,group:()=>e,guid:()=>this.getGuid(this.getGroup(e))})))))),$t.createElement(z$,{key:()=>this.controller.getGeometryGettingStartedMessageState()},e=>{switch(e){case"hidden":return $t.createElement("span",null);case"construct":case"pick-a-tool":return $t.createElement("div",{class:()=>({"dcg-3d-getting-started-pointer":!0,"dcg-3d-getting-started-has-tool":this.controller.getGeometryGettingStartedMessageState()!=="pick-a-tool"})},this.bindFn(this.getPointerMessage),$t.createElement("span",{class:$t.const("dcg-curved-icon-container")},$t.createElement("i",{class:$t.const("dcg-icon-curved-arrow")})))}}))}isGroupSelected(e){return this.selectedTool()===e.current}isGroupEnabled(e){return this.controller.isGeoToolEnabled(e.current)}getGroup(e){let i=this.controller.getGeoToolbarItemsForGroup(e);if(!i)throw new Error("Programing error: "+e+" not found");return i}getPointerMessage(){return this.controller.getGeometryGettingStartedMessageState()==="pick-a-tool"?this.controller.s("geometry-label-pick-tool-instruction"):this.controller.s("geometry-label-construct-instruction")}getFocusedOrActiveTool(){let e=this.controller.getAllVisibleGeoToolbarItems(),i=this.controller.getFocusLocation();if(!i)return;let r;return i.type==="geo-basic-tool"||i.type==="geo-basic-tool-menu-item"?r=i.tool:r=this.controller.getActiveTool(),e.find(o=>{var n,a;return o.current===r||o.dropdown&&((a=(n=o.dropdown)==null?void 0:n.indexOf)==null?void 0:a.call(n,r))>-1})}handleToolbarKeydown(e){var l,c,p,u,g;let i=be(e);if(i!=="Up"&&i!=="Down"&&i!=="Left"&&i!=="Right"&&i!=="Home"&&i!=="End"||(e.preventDefault(),e.stopPropagation(),!this.controller.getFocusLocation()))return;let o=this.controller.getAllVisibleGeoToolbarItems(),n=this.getFocusedOrActiveTool();if(!n)return;let a=o.findIndex(m=>m.group===n.group),s;if(i==="Home")s=(l=o[0])==null?void 0:l.current;else if(i==="End")s=(c=o[o.length-1])==null?void 0:c.current;else if(i==="Left"||i==="Right"){let m=i==="Left"?-1:1,w=Math.max(0,Math.min(o.length-1,a+m));s=(p=o[w])==null?void 0:p.current;let C=((u=o[w].dropdown)!=null?u:[]).length>1;if(((g=this.controller.getOpenItemMenu())==null?void 0:g.type)==="geo-tool-dropdown"){if(C)return this.openDropdownMenu(o[w],!0);if(s)this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"geo-tool-dropdown",guid:this.getGuid(n),tools:[],group:n.group}});else return}}else(i==="Up"||i==="Down")&&this.openDropdownMenu(n);s&&this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:s}})}selectedTool(){let e=this.controller.getActiveTool();return e==="expression-edit"?"selection":e}openDropdownMenu(e,i){e.dropdown&&(this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"geo-tool-dropdown",guid:this.getGuid(e),tools:e.dropdown,group:e.group,focusFirstOption:i}}),this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool-menu-item",tool:e.current}}))}getGuid(e){return e.dropdown?"geo-dropdown-"+e.dropdown[0]:""}openMenuFromLongHold(e){this.controller.dispatch({type:"select-geo-tool",tool:e.current}),this.openDropdownMenu(e)}handleTap(e,i){e.wasLongheld()||e.wasHandled()||(this.controller.dispatch({type:"select-geo-tool",tool:i.current,focusGraphPaper:e.device==="keyboard"}),e.shiftKey?this.openDropdownMenu(i):e.device!=="keyboard"&&this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:i.current}}))}isGroupDropdownOpen(e){let i=this.controller.getOpenItemMenu();return(i==null?void 0:i.type)==="geo-tool-dropdown"&&i.group===e.group}};var Li=__dcg_shared_module_exports__['h'](j());var{Each:U$,SwitchUnion:H$,If:W$}=Li.Components,HE=class extends Li.Class{init(){this.controller=this.props.controller()}template(){return Li.createElement("div",{role:Li.const("toolbar"),"aria-label":()=>this.controller.s("graphing-calculator-label-geometry-tools"),class:Li.const("dcg-geo-basic-tools dcg-animate-in-after-initial-load dcg-complex-tool-instruction-view")},Li.createElement(vg,{ariaLabel:()=>this.controller.s("account-shell-button-mygraphs-cancel"),controller:this.props.controller,message:()=>this.getTransformationName(this.controller.getActiveTool()),onBack:this.bindFn(this.onCancel)}),U$(()=>this.getInputIndexes(),{item:e=>Li.createElement(kM,{activeStep:this.bindFn(this.getInputIndex),controller:this.props.controller,toolSpec:()=>this.getToolSpec(),stepIdx:()=>e})}))}onCancel(){this.controller.dispatch({type:"select-geo-tool",tool:"selection"}),this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:"selection"}})}getTransformationName(e){switch(e){case"dilate":return this.controller.s("graphing-calculator-text-geometry-tool-dilate-display-name");case"reflect":return this.controller.s("graphing-calculator-text-geometry-tool-reflect-display-name");case"rotate":return this.controller.s("graphing-calculator-text-geometry-tool-rotate-display-name");case"translate":return this.controller.s("graphing-calculator-text-geometry-tool-translate-display-name");case"parallel":return this.controller.s("graphing-calculator-text-geometry-tool-parallel-display-name");case"perpendicular":return this.controller.s("graphing-calculator-text-geometry-tool-perpendicular-display-name");case"compass":return this.controller.s("graphing-calculator-text-geometry-tool-compass-display-name");default:return this.controller.s("shared-calculator-narration-item-unknown")}}getInputIndex(){return this.controller.getGeoModel().getNonObjectsState().ui.currentTool.inputIndex}getInputIndexes(){return this.getToolSpec().inputs.map((e,i)=>i)}getToolSpec(){return this.controller.getGeoModel().getCurrentTool().getSpec()}},kM=class extends Li.Class{init(){this.controller=this.props.controller()}template(){return H$(()=>this.getInputType(),{completed:()=>Li.createElement("span",{class:Li.const("dcg-step-completed")},Li.createElement("i",{class:Li.const("dcg-icon-check"),"aria-hidden":Li.const("true")})),upcoming:()=>Li.createElement("span",{class:Li.const("dcg-step-upcoming")},Li.createElement("span",null)),active:()=>Li.createElement("span",{class:Li.const("dcg-active-step")},Li.createElement("span",{class:Li.const("dcg-step-active-icon")},Li.createElement("span",null,()=>this.props.stepIdx()+1)),this.bindFn(this.getActiveString),Li.createElement(W$,{predicate:this.bindFn(this.isNumberInputStep)},()=>Li.createElement("span",{class:Li.const("dcg-input-flex-container"),didMount:this.bindFn(this.didMountNumberInput)},Li.createElement(Lt,{containerClass:()=>({"dcg-suffix-degree":this.getNumberUnits()==="\xB0","dcg-suffix-radian":this.getNumberUnits()==="rad"}),readonly:()=>!1,latex:()=>this.getNumberInputLatex(),ariaLabel:this.bindFn(this.getActiveString),isFocused:()=>this.isNumberInputFocused(),handleFocusChanged:(e,i)=>this.handleFocusedChanged(e,i),hasError:this.bindFn(this.doesNumberInputHaveError),controller:this.props.controller,handlePressedKey:(e,i)=>{this.handlePressedKey(e,i)},handleLatexChanged:e=>{this.handleLatexChanged(e)},handleSelectionChanged:e=>{this.handleLatexChanged(e.latex,!0)},dataLabelAttributeValue:this.const("transformation-number")}),Li.createElement("span",{class:()=>({"dcg-action-submit":!0,"dcg-disabled":this.isSubmitNumberDisabled(),"dcg-btn-blue":!0}),role:Li.const("button"),tabindex:()=>this.isSubmitNumberDisabled()?-1:0,"aria-disabled":this.bindFn(this.isSubmitNumberDisabled),onTap:e=>this.submitNumberInput({device:e.device})},()=>this.controller.s("shared-calculator-button-go")))))})}getNumberUnits(){return this.controller.getActiveTool()==="rotate"?this.controller.isDegreeMode()?"\xB0":"rad":""}didMountNumberInput(){this.controller.dispatch({type:"set-focus-location",location:{type:"new-transformation-number"}})}isNumberInputFocused(){let e=this.controller.getFocusLocation();return!!(e&&e.type==="new-transformation-number")}doesNumberInputHaveError(){var l;if(!this.getNumberInputLatex()||this.getNumberInputLatex()===((l=this.getStep().numberInputInfo)==null?void 0:l.defaultLatex))return!1;let i=this.props.toolSpec().outputs[0].id,{idMap:r}=this.controller.getGeoModel().getNonObjectsState().ui.currentTool,o=r[i];if(!o)return!0;let n=bh(this.controller.getListModel()).filter(c=>{var p;if(c.type==="expression")return o===((p=Er(c))==null?void 0:p.latex)}),a=n[0];if(!a||n.length===0||n.length>1||a.error)return!0;let s=a.formula.typed_constant_value;if(!s)return!0;if(__dcg_shared_module_exports__['fa'](s.valueType,__dcg_shared_module_exports__['Q'])){let c=__dcg_shared_module_exports__['aa'](s.valueType)?s.value:[s.value];for(let p of c){let[[u,g],[m,w]]=p;if(isNaN(u)||isNaN(g)||isNaN(m)||isNaN(w))return!0}return!1}return!0}handlePressedKey(e,i){let r=Se.getFocusedMathquill();if(e==="Enter"){this.submitNumberInput({device:"keyboard"});return}r&&(r.keystroke(e,i),this.handleLatexChanged(r.latex()))}getNumberInputLatex(){return this.controller.getGeoModel().getCurrentTool().getNumberInputLatex()}isSubmitNumberDisabled(){return!!(this.doesNumberInputHaveError()||!this.getNumberInputLatex())}submitNumberInput(e){var s,l;if(this.isSubmitNumberDisabled())return;let i=this.controller.getGeoModel(),r=this.controller.getActiveTool(),o=i.getCurrentTool(),n=(s=o.getSpec)==null?void 0:s.call(o),a=o.tryCommitResults();a.committed&&(this.controller.dispatch(__dcg_shared_module_exports__['a']({type:"commit-geo-objects"},a)),(l=this.controller.get2dPOIController())==null||l.speakGeoReleaseAction(r,n,a.committed),e.device==="keyboard"&&this.controller.dispatch({type:"set-focus-location",location:{type:"graph-paper"}}))}handleLatexChanged(e,i){(this.getNumberInputLatex()!==e||i)&&(this.controller.getGeoModel().getCurrentTool().onNumberInput(e),this.controller.getGeoModel().onPreviewChange())}handleFocusedChanged(e,i){e&&!this.isNumberInputFocused()?this.controller.dispatch({type:"set-focus-location",location:{type:"new-transformation-number"}}):this.isNumberInputFocused()&&this.controller.dispatch({type:"blur-focus-location",location:{type:"new-transformation-number"}})}getActiveString(){let e=this.props.controller(),i=this.getStep().hint;return i?e.s(i):e.s("shared-calculator-narration-item-unknown")}isNumberInputStep(){return!!this.getStep().numberInputInfo}getStep(){return this.props.toolSpec().inputs[this.props.stepIdx()]}getInputType(){let e=this.props.activeStep(),i=this.props.stepIdx();return i<e?"completed":i>e?"upcoming":"active"}};var{SwitchUnion:$$,If:f5}=Xt.Components,WE=class extends Xt.Class{constructor(){super(...arguments),this.afterInitialLoad=!1}init(){this.controller=this.props.controller()}template(){return Xt.createElement("div",{class:()=>({"dcg-geometry-toolbar-view":!0,"dcg-after-initial-load":this.afterInitialLoad}),style:()=>({left:`${this.controller.computeMajorLayout().grapher.left}px`}),onTapStart:this.bindFn(this.onTapStart)},Xt.createElement("div",{class:Xt.const("dcg-header-left dcg-do-blur")},Xt.createElement(f5,{predicate:this.bindFn(this.showHamburger)},()=>Xt.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-tooltip-open-graph"),gravity:this.const("s")},Xt.createElement("div",{role:Xt.const("button"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-open-graph"),tabindex:Xt.const("0"),class:Xt.const("dcg-action-opendrawer dcg-icon-btn dcg-in-api-action-opendrawer"),onTap:()=>this.controller.dispatch({type:"open-drawer"})},Xt.createElement("i",{class:Xt.const("dcg-icon-hamburger"),"aria-hidden":Xt.const("true")})))),Xt.createElement(f5,{predicate:this.bindFn(this.showOpenExpressionsButton)},()=>Xt.createElement("div",{class:Xt.const("dcg-show-expressions-tab dcg-icon-btn"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-show-list"),role:Xt.const("button"),tabindex:Xt.const("0"),onTap:e=>{this.controller.dispatch({type:"show-expressions-list",focusHideIcon:e.device==="keyboard"})},manageFocus:this.const(Ne({controller:this.controller,location:{type:"show-expression-list-btn"}}))},Xt.createElement("i",{class:Xt.const("dcg-icon-show"),"aria-hidden":Xt.const("true")})))),Xt.createElement("div",{class:Xt.const("dcg-flex-spacer")}),$$(this.bindFn(this.getViewToShow),{tools:()=>Xt.createElement(UE,{controller:this.props.controller}),selectedItems:()=>Xt.createElement(YC,{controller:this.props.controller}),recentlyUsedComplexTool:()=>Xt.createElement("div",{class:Xt.const("dcg-complex-tool-success dcg-animate-in-after-initial-load"),role:Xt.const("toolbar")},Xt.createElement("i",{class:Xt.const("dcg-icon-check")}),()=>this.controller.s("account-shell-label-success")),complexToolInstructions:()=>Xt.createElement(HE,{controller:this.props.controller})}),Xt.createElement("div",{class:Xt.const("dcg-flex-spacer")}))}showHamburger(){return this.controller.getGraphSettings().config.showHamburger?!this.controller.isListEnabled()||!this.controller.isListVisible()||this.controller.isNarrow():!1}showOpenExpressionsButton(){return this.controller.isListEnabled()&&!this.controller.isListVisible()&&!this.controller.isNarrow()}willUpdate(){this.afterInitialLoad||this.getViewToShow()==="selectedItems"&&(this.afterInitialLoad=!0)}onTapStart(e){e.target.classList.contains("dcg-do-blur")&&this.controller.dispatch({type:"set-none-selected"})}getViewToShow(){let e=this.controller.getActiveTool();return __dcg_shared_module_exports__['$b'](e)||dM(e)?this.controller.getComplexToolWasRecentlyUsed()?"recentlyUsedComplexTool":"complexToolInstructions":this.controller.shouldShowMultiSelectHeader()?"selectedItems":"tools"}};var Pt=__dcg_shared_module_exports__['h'](j());var{If:Py}=Pt.Components,IM=class extends Pt.Class{init(){this.controller=this.props.controller()}template(){return Pt.createElement("span",{class:Pt.const("dcg-toast")},Pt.createElement("i",{class:Pt.const("dcg-icon-error"),"aria-hidden":Pt.const("true")}),Pt.createElement(Py,{predicate:()=>!this.showUndo()},()=>Pt.createElement("i",{class:Pt.const("dcg-icon-remove"),onTap:()=>this.controller.dispatch({type:"toast/close"}),role:Pt.const("link"),tabindex:Pt.const(0),"aria-label":Pt.const("Dismiss Notice")})),Pt.createElement("span",{class:Pt.const("dcg-msg"),"aria-atomic":()=>this.shouldLiveUpdateAria(),"aria-live":()=>this.shouldLiveUpdateAria()?"assertive":""},()=>this.controller.toastData.message),Pt.createElement(Py,{predicate:this.bindFn(this.showUndo)},()=>Pt.createElement("a",{role:Pt.const("link"),tabindex:Pt.const(0),class:Pt.const("dcg-undo"),onTap:()=>this.controller.dispatch({type:"toast/undo"})},()=>this.controller.s("shared-calculator-label-toast-undo"))),Pt.createElement(Py,{predicate:this.bindFn(this.showLearnMore)},()=>Pt.createElement("a",{role:Pt.const("link"),tabindex:Pt.const(0),target:Pt.const("_blank"),onTap:()=>this.controller.dispatch({type:"toast/learn-more"})},()=>this.controller.s("shared-calculator-label-toast-learn-more"))),Pt.createElement(Py,{predicate:()=>!!this.controller.toastData.link},()=>Pt.createElement("a",{role:Pt.const("link"),tabindex:Pt.const(0),target:Pt.const("_blank"),href:()=>{var e;return((e=this.controller.toastData.link)==null?void 0:e.url)||""}},()=>{var e;return((e=this.controller.toastData.link)==null?void 0:e.text)||""})))}showUndo(){return!!this.controller.toastData.undoCallback}showLearnMore(){return!!this.controller.toastData.learnMoreCallback}shouldUpdate(){return!!this.controller.toastData.message}shouldLiveUpdateAria(){return!this.controller.toastData.noAria}},$E=class extends Pt.Class{template(){return Pt.createElement("div",{class:()=>({"dcg-toast-view":!0,"dcg-visible":!!this.props.controller().toastData.message,"dcg-below-geo-toolbar":this.isGeometryInCalculator()}),"toast-style":()=>this.props.controller().toastData.toastStyle},Pt.createElement(Py,{predicate:()=>!!this.props.controller().toastData.message},()=>Pt.createElement("div",{class:Pt.const("dcg-toast-wrapper")},Pt.createElement("div",{class:Pt.const("dcg-toast-cover")}),Pt.createElement(IM,__dcg_shared_module_exports__['a']({},this.props)))))}isGeometryInCalculator(){var i;let e=this.props.controller();return(i=e.isGeometry)==null?void 0:i.call(e)}};Tt();function TM(t){let e="drag dragend dragenter dragover dragleave drop";H(t).on(e,i=>{i.preventDefault(),i.stopPropagation()})}var jt=__dcg_shared_module_exports__['h'](j());Tt();var so=__dcg_shared_module_exports__['h'](j());var Nt=__dcg_shared_module_exports__['h'](j());var mi=__dcg_shared_module_exports__['h'](j());Tt();var MM=class{constructor(){this.handlers=[],H(document).on("keydown.delegator",e=>this.handleEvent(e))}push(e){let i=__dcg_shared_module_exports__['Xa']("delegator_");return this.handlers.push({token:i,handler:e}),()=>this.handlers=__dcg_shared_module_exports__['wa'](this.handlers,r=>r.token!=i)}handleEvent(e){if(!e.isDefaultPrevented()&&this.handlers.length){let i=!1,r=()=>i=!0;for(let{handler:o}of this.handlers.slice().reverse())if(o(e,r),i)return}}},jE=new MM;var{If:b5}=mi.Components,YE=class extends mi.Class{init(){this.i18n=this.props.i18n(),this.isMounted=!1}template(){return mi.createElement("div",{class:()=>({"dcg-shared-modal-container":!0,[this.props.class?this.props.class():""]:!!this.props.class}),didMount:this.bindFn(this.didMount),didUnmount:this.bindFn(this.didUnmount)},mi.createElement("div",{class:()=>({"dcg-shared-modal-cover":!0,"dcg-shared-has-close-button":this.showX(),"dcg-shared-modal-fullscreen":this.props.size()==="fullscreen","dcg-shared-modal-wide":this.props.size()==="wide","dcg-shared-modal-medium":this.props.size()==="medium","dcg-shared-modal-narrow":this.props.size()==="narrow"})},mi.createElement("div",{class:mi.const("dcg-shared-modal-background"),onTap:this.props.onClose}),mi.createElement("div",{class:mi.const("dcg-shared-modal-transition-container")},mi.createElement("div",{class:mi.const("dcg-shared-modal"),role:mi.const("dialog"),"aria-modal":mi.const("true"),"aria-label":()=>{let e="";return this.props.ariaLabel?e=this.props.ariaLabel():this.props.title&&(e=this.props.title()),e}},mi.createElement(b5,{predicate:()=>this.showX()},()=>mi.createElement("div",{class:mi.const("dcg-shared-close-cross-container")},mi.createElement(De,{tooltip:()=>this.i18n.s("shared-button-close-dialog")},mi.createElement("div",{role:mi.const("button"),tabindex:mi.const("0"),"aria-label":()=>this.i18n.s("shared-button-close-dialog"),class:mi.const("dcg-shared-close-cross"),onTap:this.props.onClose},mi.createElement("i",{class:mi.const("dcg-icon-remove"),"aria-hidden":mi.const("true")}))))),mi.createElement("div",{class:mi.const("dcg-shared-modal-contents-wrapper")},mi.createElement(b5,{predicate:()=>!!this.props.title&&!!this.props.title()},()=>mi.createElement("h1",{class:()=>({"dcg-shared-modal-title":!0,"dcg-shared-left-align-title":this.leftAlignTitle()})},()=>this.props.title())),mi.createElement("div",{class:mi.const("dcg-shared-modal-scrollable-content")},this.children))))))}showX(){return!!this.props.showX&&this.props.showX()}leftAlignTitle(){return!!this.props.leftAlignTitle&&this.props.leftAlignTitle()}didMount(){var s,l;if(this.isMounted)return;this.isMounted=!0;let e=this.findRootNode();function i(){let c=e.querySelector(".dcg-shared-close-cross");c&&c.focus()}function r(){let c=e.querySelector(".dcg-shared-modal-scrollable-content");c&&(c.tabIndex>=0||(c.tabIndex=0),c.focus())}let o=e.querySelector(".dcg-shared-modal-scrollable-content"),n=(l=(s=this.props).setFocus)==null?void 0:l.call(s);n==="close"?this.showX()?i():o&&r():n==="content"&&r();let a=$_(e);this.unsub=jE.push((c,p)=>{be(c)==Yo&&(this.onClose(),p());let u=c.altKey||c.shiftKey||c.metaKey||c.ctrlKey;this.props.onArrowKey&&be(c)===Gl&&!u&&this.props.onArrowKey("Left"),this.props.onArrowKey&&be(c)===Al&&!u&&this.props.onArrowKey("Right"),a(c)})}onClose(){this.props.onClose&&this.props.onClose()}didUnmount(){this.isMounted&&(this.isMounted=!1,this.unsub())}};var{If:JE,Each:y5}=Nt.Components,XE=class extends Nt.Class{init(){this.controller=this.props.controller()}template(){return Nt.createElement(JE,{predicate:this.props.visible},()=>Nt.createElement(YE,{size:this.const("medium"),onClose:this.props.onClose,i18n:this.const(this.controller),class:this.const("dcg-custom-toolbar-settings-modal")},Nt.createElement("div",{class:Nt.const("dcg-btn-blue dcg-done-btn"),"aria-role":Nt.const("button"),tabindex:Nt.const(0),didMount:e=>e.focus(),onTap:this.props.onClose},()=>this.controller.s("graphing-calculator-button-done")),Nt.createElement("h1",{class:Nt.const("dcg-shared-left-align-title")},()=>this.controller.s("shared-calculator-text-customize-toolbar")),y5(this.bindFn(this.getToolGroups),{key:e=>e.group,item:e=>Nt.createElement("div",null,Nt.createElement("div",{class:Nt.const("dcg-configuration-heading-row dcg-configuration-grid-row")},Nt.createElement("div",{class:Nt.const("dcg-first-column")},()=>e.group,Nt.const(" Tools")),Nt.createElement("div",{class:Nt.const("dcg-second-column")},Nt.const("Disabled when:"))),y5(()=>e.dropdown||[e.current],{item:i=>Nt.createElement("div",{class:Nt.const("dcg-configuration-grid-row"),"dcg-geo-tool":this.const(i)},Nt.createElement("div",{class:Nt.const("dcg-first-column")},Nt.createElement($e,{disabled:()=>!this.isToolCustomizable(i),checked:()=>this.getToolInfo(i).visible,onChange:r=>{this.controller.dispatch({type:"set-geometry-custom-toolbar-setting",tool:i,value:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.getToolInfo(i)),{visible:r})})}},()=>i)),Nt.createElement("div",{class:()=>({"dcg-disabled":!this.getToolInfo(i).visible||!this.isToolCustomizable(i),"dcg-mathquill-condition-container":!0,"dcg-second-column":!0})},Nt.createElement(JE,{predicate:()=>!!this.getToolLatexError(i)&&this.getToolInfo(i).visible},()=>Nt.createElement("div",{class:Nt.const("dcg-latex-error-container")},Nt.createElement(Oo,{error:()=>this.getToolLatexError(i)||"",gravity:this.const("s")}))),Nt.createElement(JE,{predicate:()=>this.isToolCustomizable(i)&&this.getToolInfo(i).visible},()=>Nt.createElement(tr,__dcg_shared_module_exports__['a']({latex:()=>this.getToolLatex(i),operatorNames:this.bindFn(this.autoOperatorNames),ariaLabel:()=>this.getToolAria(i),brailleShouldFocus:()=>this.focusedLatexTool===i,onBrailleInput:r=>{this.controller.dispatch({type:"set-geometry-custom-toolbar-setting",tool:i,value:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.getToolInfo(i)),{disabledLatex:r})})},onBrailleFocusedChanged:r=>{this.focusedLatexTool===i&&!r?this.focusedLatexTool=void 0:r&&(this.focusedLatexTool=i)},onBrailleKeydown:()=>{}},Br(this.controller)),Nt.createElement(Se,{latex:()=>this.getToolLatex(i),getAriaLabel:()=>this.getToolAria(i),noFadeout:this.const(!0),getAriaPostLabel:()=>this.getToolLatexError(i)||"",isFocused:()=>this.focusedLatexTool===i,tokenController:this.props.controller,capExpressionSize:()=>this.controller.getCapExpressionSize(),config:()=>this.controller.getMathquillConfig({}),hasError:()=>!!this.getToolLatexError(i),onUserChangedLatex:r=>{this.controller.dispatch({type:"set-geometry-custom-toolbar-setting",tool:i,value:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},this.getToolInfo(i)),{disabledLatex:r})})},onExpressionSizeExceeded:()=>this.controller.dispatch({type:"expression-size-exceeded"}),onFocusedChanged:r=>{this.focusedLatexTool===i&&!r?this.focusedLatexTool=void 0:r&&(this.focusedLatexTool=i)},onSelectionChanged:()=>{this.controller.runAfterDispatch(()=>{this.controller.dispatch({type:"render"})})},needsSystemKeypad:()=>!this.controller.isKeypadEnabled()}))),Nt.createElement(JE,{predicate:()=>!this.getToolInfo(i).visible},()=>Nt.createElement("div",{class:Nt.const("dcg-disabled-condition-wrapper")},Nt.createElement(tr,__dcg_shared_module_exports__['a']({latex:()=>this.getToolLatex(i),operatorNames:this.bindFn(this.autoOperatorNames),ariaLabel:()=>this.getToolAria(i),isStatic:this.const(!0),brailleShouldFocus:this.const(!1),onBrailleFocusedChanged:()=>{}},Br(this.controller)),Nt.createElement(Te,{latex:()=>this.getToolLatex(i),config:()=>this.controller.getMathquillConfig({}),getAriaLabel:()=>this.getToolAria(i)}))))))}))})))}getToolAria(e){return this.controller.s("shared-calculator-narration-disable-tool",{tool:e})}autoOperatorNames(){return this.props.controller().getMathquillConfig({}).autoOperatorNames}getToolLatex(e){return this.getToolInfo(e).disabledLatex||""}isToolCustomizable(e){return e!=="selection"&&e!=="box-selection"}getToolGroups(){let e={group:"transformation",current:"translate",dropdown:Ig};return[...E0(),e]}getToolLatexError(e){let i=this.controller.getGeometryToolbarModel(),r=gL(i,e);if(r)return this.controller.unpack(r)}getToolInfo(e){let i=this.controller.getGeometryToolbarModel();return __dcg_shared_module_exports__['a']({tool:e},i.toolbarState[e])}};var{If:x5}=so.Components,QE=class extends so.Class{init(){this.controller=this.props.controller()}template(){return so.createElement(x5,{predicate:()=>this.shouldShowAuthorFeaturesSection()},()=>so.createElement("div",{class:so.const("dcg-options-menu-section dcg-author-mode-section")},so.createElement("div",{class:so.const("dcg-options-menu-section-title")},()=>this.controller.s("shared-calculator-narration-author-mode"),so.createElement(Ui,{ariaLabel:()=>this.controller.s("shared-calculator-narration-author-mode"),toggled:this.bindFn(this.isAuthorMode),onChange:()=>{this.controller.dispatch({type:"set-author-mode",enabled:!this.isAuthorMode()})}})),so.createElement(x5,{predicate:()=>this.isAuthorMode()},()=>so.createElement("div",{class:so.const("dcg-author-features-container")},so.createElement("div",{class:so.const("dcg-toolbar-customization")},so.createElement("span",null,so.const("Geometry Tools:")),so.createElement(Ni,{theme:this.const("mini"),ariaGroupLabel:()=>this.controller.s("graphing-calculator-narration-configure-toolbar"),staticConfig:this.bindFn(this.getConfigurationOptions)})),so.createElement(XE,{controller:this.props.controller,onClose:()=>{this.customGeometryToolsSettingsModal=!1,this.controller.dispatch({type:"render"})},visible:()=>this.customGeometryToolsSettingsModal})))))}getToolbar(){return this.controller.getGeometryToolbarModel().toolbar}setToolbar(e){e==="custom"&&(this.customGeometryToolsSettingsModal=!0),this.controller.dispatch({type:"set-geometry-toolbar",toolbar:e})}getConfigurationOptions(){return[{key:"all",label:()=>this.controller.raw("All"),selected:()=>this.getToolbar()==="all",onSelect:()=>this.setToolbar("all")},{key:"none",label:()=>this.controller.raw("None"),selected:()=>this.getToolbar()==="none",onSelect:()=>this.setToolbar("none")},{key:"custom",label:()=>this.controller.raw("Custom"),selected:()=>this.getToolbar()==="custom",onSelect:()=>this.setToolbar("custom")}]}shouldShowAuthorFeaturesSection(){return this.controller.authorFeaturesAvailable()}isAuthorMode(){return this.controller.shouldShowAuthorFeatures()}};var{If:ZE}=jt.Components,Oy=class extends jt.Class{init(){this.controller=this.props.controller()}template(){return jt.createElement("div",{class:()=>({"dcg-geometry-settings-container":!0,"dcg-popover":!0,"dcg-left":!0,"dcg-constrained-height-popover":!0,"dcg-generic-options-menu":!0,"dcg-no-geometry-header":!this.controller.shouldShowGeoToolbar()}),style:this.bindFn(this.getContainerStyle),didMount:this.bindFn(this.didMountContainer),didUnmount:this.bindFn(this.didUnmountContainer)},jt.createElement("div",{class:jt.const("dcg-popover-interior"),role:jt.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-geometry-settings")},jt.createElement("div",{class:jt.const("dcg-options-menu-section")},jt.createElement(cm,{controller:this.props.controller}),jt.createElement(ZE,{predicate:()=>!this.controller.getLockViewportConfigSetting()},()=>jt.createElement(xu,{controller:this.props.controller})),jt.createElement(ZE,{predicate:()=>this.controller.getHiddenGeoItemCount()>0},()=>jt.createElement($e,{onChange:this.bindFn(this.toggleGhostMode),checked:()=>this.controller.getGhostMode(),manageFocus:this.const(Ne({controller:this.controller,location:{type:"settings",location:"hidden-objects"}}))},()=>this.controller.s("graphing-calculator-label-settings-hidden-objects",{count:this.controller.getHiddenGeoItemCount()})))),jt.createElement("div",{class:jt.const("dcg-options-menu-section")},jt.createElement("div",{class:jt.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-label-settings-grid"),jt.createElement(Ui,{ariaLabel:()=>this.controller.s("graphing-calculator-label-settings-grid"),toggled:this.bindFn(this.getShowGrid),onChange:this.bindFn(this.toggleGrid)})),jt.createElement(ZE,{predicate:this.bindFn(this.getShowGrid)},()=>jt.createElement($e,{onChange:this.bindFn(this.toggleMinorGridlines),checked:this.bindFn(this.getMinorGridlines)},()=>this.controller.s("graphing-calculator-label-settings-minor-gridlines")))),jt.createElement("div",{class:jt.const("dcg-options-menu-section")},jt.createElement("div",{class:jt.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-label-axes"),jt.createElement(Ui,{ariaLabel:()=>this.controller.s("graphing-calculator-label-axes"),toggled:this.bindFn(this.getShowAxes),onChange:this.bindFn(this.toggleAxes)})),jt.createElement(ZE,{predicate:this.bindFn(this.getShowAxes)},()=>jt.createElement("div",null,jt.createElement($e,{onChange:this.bindFn(this.toggleAxisNumbers),checked:this.bindFn(this.getAxisNumbers)},()=>this.controller.s("graphing-calculator-label-settings-axis-numbers")),jt.createElement("div",null,jt.createElement($e,{onChange:this.bindFn(this.toggleArrows),checked:()=>this.getAxisArrowMode()!=="NONE"},()=>this.controller.s("graphing-calculator-label-settings-arrows")))))),jt.createElement(dm,{controller:this.props.controller}),jt.createElement(QE,{controller:this.props.controller}),jt.createElement(Xd,{controller:this.props.controller}),jt.createElement("div",{class:jt.const("dcg-arrow")})))}toggleGhostMode(){this.controller.dispatch({type:"set-ghost-mode",value:!this.controller.getGhostMode()})}didMountContainer(e){this.node=e,H(document.documentElement).on("dcg-tapstart.geometry-settings-view wheel.geometry-settings-view",i=>{this.eventShouldClosePopover(i)&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:i.device==="keyboard"})}),this.unsub=jE.push(i=>{let r=be(i);if(r==="Esc"&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:!0}),this.controller.isGraphSettingsOpen()&&r==="Tab"&&!i.altKey&&!i.metaKey&&!i.ctrlKey){let o=this.controller.getFocusLocation();if(!o||o.type!=="settings")return;i.shiftKey?i.shiftKey&&(o.location==="default-size"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),i.preventDefault(),i.stopPropagation()):o.location==="icon"&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"degree-mode"}}),i.preventDefault(),i.stopPropagation())):o.location==="icon"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"default-size"}}),i.preventDefault(),i.stopPropagation()):o.location==="degree-mode"&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),i.preventDefault(),i.stopPropagation())}})}didUnmountContainer(){H(document.documentElement).off(".geometry-settings-view"),this.unsub()}didUpdate(){if(!this.controller.isGraphSettingsOpen())return;let e=this.controller.getKeypadHeight();e!==this.cachedKeypadHeight&&document.activeElement&&this.node.contains(document.activeElement)&&Ms(document.activeElement,this.node.querySelector(".dcg-popover-interior"),50),this.cachedKeypadHeight=e}eventShouldClosePopover(e){let i=e.target,r=this.node.contains(i),o=!!i.closest(".dcg-action-settings"),n=this.isMathquillFocused()&&!!i.closest(".dcg-keypad"),a=!!i.closest(".dcg-action-undo")||!!i.closest(".dcg-action-redo");return!(r||o||n||a)}isMathquillFocused(){return this.getFocusedLimit()!==void 0}getFocusedLimit(){let e=this.controller.getFocusLocation();if(e&&e.type==="settings")return e.location}getShowXAxis(){return!!this.controller.getGraphSettings().showXAxis}toggleAxes(){this.controller.dispatch({type:"set-graph-settings",showXAxis:!this.getShowXAxis(),showYAxis:!this.getShowXAxis()})}getShowAxes(){return!!this.controller.getGraphSettings().showXAxis}getAxisNumbers(){return!!this.controller.getGraphSettings().xAxisNumbers}toggleAxisNumbers(){let e=this.getAxisNumbers();this.controller.dispatch({type:"set-graph-settings",xAxisNumbers:!e,yAxisNumbers:!e,polarNumbers:!e})}getMinorGridlines(){return this.controller.getGraphSettings().xAxisMinorSubdivisions===0}toggleMinorGridlines(){let e=this.getMinorGridlines()?1:0;this.controller.dispatch({type:"set-graph-settings",yAxisMinorSubdivisions:e,xAxisMinorSubdivisions:e})}getAxisArrowMode(){return this.controller.getGraphSettings().xAxisArrowMode}getShowGrid(){return this.controller.getGraphSettings().showGrid}toggleGrid(){this.controller.dispatch({type:"set-graph-settings",showGrid:!this.getShowGrid()})}toggleArrows(){let e=this.getAxisArrowMode()==="NONE"?"BOTH":"NONE";this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:e,yAxisArrowMode:e})}getContainerStyle(){return this.controller.getKeypadHeight()?"bottom: 0":""}};var{If:Cu}=St.Components,_y=class extends St.Class{init(){this.controller=this.props.controller()}settings(){return this.controller.getGraphSettings()}template(){return St.createElement("div",{class:St.const("dcg-calculator-api-container"),style:St.const("width: 100%; height: 100%; position: relative;")},St.createElement("div",{class:()=>({"dcg-container":!0,"dcg-fullscreen":!this.controller.isListVisible(),"dcg-narrow":this.controller.isNarrow(),"dcg-PROJECTOR-MODE":this.settings().config.projectorMode,"dcg-inverted-colors":!!this.settings().config.invertedColors,"dcg-inverted-swatches":this.controller.invertSwatches(),"dcg-EDIT-LIST-MODE":this.controller.isInEditListMode(),"dcg-no-graphpaper":!this.settings().config.graphpaper,"dcg-no-branding":!this.settings().config.branding,"dcg-no-expression-topbar":!this.settings().config.expressionsTopbar,"dcg-default-border":!!this.settings().config.border,"dcg-no-hyperlinks":!this.settings().config.links,"dcg-has-background-color":this.controller.hasBackgroundColor(),"dcg-is-interactive":this.settings().config.expressions||!(this.settings().config.lockViewport||this.settings().userLockedViewport)}),style:()=>({"font-size":this.settings().config.fontSize+"px",background:this.getContainerBackgroundColor(),color:this.controller.getTextColor()}),role:St.const("application"),"aria-label":()=>this.controller.isGeometry()?this.controller.s("graphing-calculator-narration-main-desmos-geometry"):this.controller.s("graphing-calculator-narration-main-desmos-graphing-calculator"),"x-ms-format-detection":St.const("none"),didMount:this.bindFn(this.didMountRoot)},St.createElement(Cu,{predicate:()=>this.controller.getGraphSettings().config.expressions},()=>St.createElement(My,{controller:this.props.controller})),St.createElement(Cu,{predicate:()=>this.controller.isListEnabled()&&!this.controller.isListVisible()&&(!this.controller.isGeometry()||this.controller.isNarrow())},()=>St.createElement("div",{class:()=>({"dcg-overgraph-icon-container":!0,"dcg-bottom-right":this.controller.isNarrow()})},St.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-tooltip-show-list"),gravity:()=>this.controller.isNarrow()?"n":"s"},St.createElement("div",{class:()=>({"dcg-show-expressions-tab":!0,"dcg-overgraph-icon":!0,"dcg-rotated":this.controller.isNarrow()}),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-show-list"),role:St.const("button"),tabindex:St.const("0"),onTap:e=>{this.controller.dispatch({type:"show-expressions-list",focusHideIcon:e.device==="keyboard"})},manageFocus:this.const(Ne({controller:this.controller,location:{type:"show-expression-list-btn"}}))},St.createElement("i",{class:St.const("dcg-icon-show"),"aria-hidden":St.const("true")}))))),St.createElement(Cu,{predicate:this.bindFn(this.showHamburger)},()=>St.createElement("div",{class:St.const("dcg-overgraph-icon-container")},St.createElement(De,{tooltip:()=>this.controller.s("graphing-calculator-label-tooltip-open-graph"),gravity:this.const("s")},St.createElement("div",{role:St.const("button"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-open-graph"),class:St.const("dcg-action-opendrawer dcg-in-api-action-opendrawer dcg-overgraph-icon"),onTap:()=>this.controller.dispatch({type:"open-drawer"})},St.createElement("i",{class:St.const("dcg-icon-hamburger"),"aria-hidden":St.const("true")}))))),St.createElement(KE,{controller:this.props.controller}),St.createElement(Cu,{predicate:()=>this.controller.isGeoUIActive()&&this.controller.getGraphSettings().config.settingsMenu&&this.controller.isGraphSettingsOpen()},()=>St.createElement(Oy,{controller:this.props.controller})),St.createElement(Cu,{predicate:()=>this.controller.shouldShowGeoToolbar()},()=>St.createElement(WE,{controller:this.props.controller})),St.createElement($E,{controller:this.props.controller}),St.createElement("div",{class:St.const("dcg-grapher dcg-grapher-2d"),style:()=>({visibility:this.controller.isThreeDMode()?"hidden":"visible","pointer-events":this.controller.isThreeDMode()?"none":"auto"})}),St.createElement(Cu,{predicate:()=>this.controller.is3dProduct()},()=>St.createElement("div",{class:St.const("dcg-grapher dcg-grapher-3d"),style:()=>({visibility:this.controller.isThreeDMode()?"visible":"hidden","pointer-events":this.controller.isThreeDMode()?"auto":"none"})})),St.createElement(Cu,{predicate:()=>this.controller.getGraphSettings().config.keypad},()=>St.createElement(VE,{controller:this.props.controller}))))}showHamburger(){return!this.controller.getGraphSettings().config.showHamburger||this.controller.isGeometry()?!1:this.controller.isNarrow()}getContainerBackgroundColor(){return this.controller.hasTransparentBackground()?"none":this.controller.getBackgroundColor()}didMountRoot(e){lg(e),this.controller.getGraphSettings().config.disableScrollFix||NS(e),this.setupFileDragDrop(e)}setupFileDragDrop(e){TM(e);let i=new Set,r=this;function o(){i=new Set,H(e).off(".filedraggedover"),r.controller.dispatch({type:"file-is-not-dragged-over"})}H(e).on("dragenter",n=>{this.controller.areImagesEnabled()&&(n.target.closest(".dcg-3d-getting-started-container")||(i.size===0&&H(e).on("dcg-tapstart.filedraggedover",o),i=i.add(n.target),this.controller.dispatch({type:"file-is-dragged-over"})))}).on("dragleave",n=>{i.delete(n.target),i.size===0&&o()}).on("drop",o)}};var eD=class extends Zi{constructor(i){super();this.workerPool=i,this.guid=__dcg_shared_module_exports__['Xa']("worker-pool-connection"),this.worker=i.allocateWorker(),this.worker.__connections[this.guid]=this}destroy(){this.sendMessage({type:"destroy"}),delete this.worker.__connections[this.guid]}killWorker(){this.worker.__isFake||this.workerPool.killWorker(this.worker)}onWorkerKilled(){}onResponse(i){}sendMessage(i){this.worker.__isFake?this.worker.postMessage(i):this.worker.postMessage({connectionId:this.guid,originalMessage:i})}};function w5(t){var e={},i=new __dcg_shared_module_exports__['zd'](r);function r(o,n){t({type:o,payload:n})}return e.postMessage=function(o){setTimeout(function(){i.processChangeSet(o)},0)},e}Wv();var Fy="";try{Fy=_f(window.location.search,"workerThrottle"),Fy==null&&(Fy=_f(window.top.location.search,"workerThrottle"))}catch(t){}var v5=parseInt(Fy,10),GM=0;function C5(t){return v5?function(e){GM=Math.max(Date.now(),GM)+v5,setTimeout(t,GM-Date.now(),e)}:t}var pm=class extends Zi{constructor(i=1/0){super();this.workers=[],this.maxWorkers=i}allowedToSpawnWorker(){return!!__dcg_worker_source_exports__['createWorker']&&this.workers.length<this.maxWorkers}killWorker(i){var r=__dcg_shared_module_exports__['Ka'](this.workers,i);r!==-1&&(i.terminate(),this.workers=__dcg_shared_module_exports__['Ia'](this.workers,i),__dcg_shared_module_exports__['Da'](__dcg_shared_module_exports__['Pa'](i.__connections)).forEach(function(o){o&&o.onWorkerKilled&&o.onWorkerKilled()}))}spawnWorker(){if(!__dcg_worker_source_exports__['createWorker'])return null;try{var i=__dcg_worker_source_exports__['createWorker']();return i.__connections={},i.__isFake=!1,i.onerror=function(r){__dcg_shared_module_exports__['td'].log(r)},i.addEventListener("message",C5(function(r){var o=r.data;if(!(o&&o.log)&&o&&o.connectionId){var n=i.__connections[o.connectionId];n&&n.onResponse(o.originalMessage)}})),this.workers.push(i),i}catch(r){return null}}spawnFakeWorker(){var i=w5(C5(function(r){var o=__dcg_shared_module_exports__['Pa'](i.__connections)[0];o&&o.onResponse(r)}));return i.__isFake=!0,i.__connections={},i}findLeastUsedWorker(){var i=function(o){return __dcg_shared_module_exports__['Ga'](o.__connections)},r=__dcg_shared_module_exports__['Ea'](this.workers,i)[0];return r}allocateWorker(){var i=null;return this.allowedToSpawnWorker()&&(i=this.spawnWorker()),i||(i=this.findLeastUsedWorker()),i||(i=this.spawnFakeWorker()),i}};var j$=4e3,ep=class{constructor(e){this.__ticksEnabled=!0;this.listeners={processChangeSet(e){var i={},r={};for(var o in e.graphChanges){var n=e.graphChanges[o];n===void 0?r[o]=!0:(__dcg_shared_module_exports__['Ub'](n),i[o]=n)}var a={};for(var o in e.intersectionChanges)r[o]||(a[o]=e.intersectionChanges[o]);var s=!!this.changeSet;this.onEvaluatorResults({evaluationStates:e.statusChanges,graphData:{addedGraphs:i,removedGraphs:r,intersections:a},renderSlowly:!!e.isCompleteState,timingData:e.timingData,eventUpdates:e.eventUpdates});let l=e.syncId;for(;this.syncRequests.length&&l!==void 0&&this.syncRequests[0].id<=l;)this.syncRequests.shift().callback();this.markJobFinished(),s&&this._processChangeSet()}};this.__state={},this.changeSet=null,this.cumulativeChangeSet={},this.syncId=1,this.syncRequests=[],e||(e=new pm),this.workerPool=e,this.createWorkerPoolConnection()}privateGetWorkerPool(){return this.workerPool}privateGetWorkerPoolConnection(){return this.workerPoolConnection}createWorkerPoolConnection(){this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){}),this.workerPoolConnection=new eD(this.workerPool),this.markJobFinished(),this.workerPoolConnection.onResponse=e=>{this.shouldIgnoreWorkerMessage(e)?e.type==="processChangeSet"&&(this.markJobFinished(),this._processChangeSet()):this.listeners[e.type].call(this,e.payload)},this.workerPoolConnection.onWorkerKilled=()=>{var e=this.hasJobInWorker();this.createWorkerPoolConnection(),e?(this.changeSet=__dcg_shared_module_exports__['l'](this.cumulativeChangeSet),this.__state.changed=!0,this.__state.droppedMessage=!0):(this.changeSet=__dcg_shared_module_exports__['l'](this.cumulativeChangeSet),this.__state.changed=!1),this.processChangeSet()}}destroy(){this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){},this.workerPoolConnection.destroy())}shouldIgnoreWorkerMessage(e){return this.__suspendUntilSyncId?!e||!e.payload?!0:!(e.payload.syncId>=this.__suspendUntilSyncId):!1}suspend(){(!this.changeSet||!this.changeSet.syncId)&&(this.syncId++,this.applyToChangeSets(e=>{e.syncId=this.syncId})),this.__suspendUntilSyncId=this.changeSet.syncId}markJobFinished(){this.__state.droppedMessage=!1,this.__jobStartTime=-1,this.__suspendUntilSyncId=void 0}startJobTimer(){this.__jobStartTime=new Date().getTime()}hasJobInWorker(){return this.__jobStartTime!==-1}getJobElapsedTime(){return this.hasJobInWorker()?new Date().getTime()-this.__jobStartTime:NaN}setTicksEnabled(e){this.__ticksEnabled=e}tick(){this.__ticksEnabled&&this._processChangeSet()}processChangeSet(){this.__processChangeSetRequested=!0}_processChangeSet(){if(this._syncEvaluatorConfig(),!this.__processChangeSetRequested)return;let e=this.getJobElapsedTime()>=j$;if(this.__state.droppedMessage&&e){this.workerPoolConnection.killWorker();return}if(this.__state.changed&&this.changeSet)if(this.changeSet.syncId||(this.syncId++,this.changeSet.syncId=this.syncId),this.hasJobInWorker())this.changeSet.isCompleteState&&e&&this.workerPoolConnection.killWorker();else{let i=this.changeSet;this.changeSet=null,this.__state.changed=!1,this.startJobTimer(),this.workerPoolConnection.sendMessage(i),this.__processChangeSetRequested=!1}}notifyWhenSynced(e){if(this._syncEvaluatorConfig(),!this.hasJobInWorker()&&!this.changeSet){setTimeout(e,0);return}this.syncId++,this.syncRequests.push({id:this.syncId,callback:e}),this.applyToChangeSets(i=>{i.syncId=this.syncId})}applyToChangeSets(e){this.__state.changed=!0,this.changeSet||(this.changeSet={}),this.cumulativeChangeSet||(this.cumulativeChangeSet={}),e(this.changeSet),e(this.cumulativeChangeSet),this.processChangeSet()}clearStatementsAndStartCompleteState(){this.hasJobInWorker()&&this.suspend(),this.applyToChangeSets(function(e){e.isCompleteState=!0,delete e.statements})}markUndoRedoState(){this.applyToChangeSets(function(e){e.isUndoRedoState=!0})}addStatement(e){this.applyToChangeSets(function(i){i.statements||(i.statements={}),i.statements[e.id]=__dcg_shared_module_exports__['l'](e)})}removeStatement(e){this.applyToChangeSets(function(i){i.statements||(i.statements={}),i.removes||(i.removes={}),delete i.statements[e],i.removes[e]=!0})}addActionStepEvent(e){this.applyToChangeSets(function(i){i.events||(i.events=[]),i.events.push({type:"step",expressionId:e})})}addClockTickEvent(e,i){this.applyToChangeSets(function(r){r.events||(r.events=[]),r.events.push({type:"clock-tick",id:e,isFirstTick:i})})}addClickEvent(e,i){this.applyToChangeSets(function(r){r.events||(r.events=[]),i===void 0&&(i=0),r.events.push({type:"click",expressionId:e,indexVar:i})})}_syncEvaluatorConfig(){if(this.readEvaluatorConfig){var e=this.readEvaluatorConfig();for(let i in e)this._applyIfChanged(e,i)}}_applyIfChanged(e,i){let r=this.cumulativeChangeSet&&this.cumulativeChangeSet[i],o=e[i];__dcg_shared_module_exports__['Ra'](r,o)||this.applyToChangeSets(function(n){n[i]=o})}};function Yl(t){return t==="es-ES"?(__dcg_shared_module_exports__['td'].warn("{language: 'es-ES'} has been deprecated. Proceeding with {language: 'es'}"),"es"):t}var iD=class{constructor(){this.seen=new Set;this.samples=[];this.button=document.createElement("button");this.isRecording=!1;this.reset(),this.button.addEventListener("click",()=>{if(this.isRecording){this.isRecording=!1;let e=this.reportAsCalcState();console.log("Profiler result (also set on window.profilerResult):"),console.log(e),window.profilerResult=e;let i=JSON.stringify(e);X$(i)}else this.reset(),this.isRecording=!0;this.updateButtonText()})}updateButtonText(){this.button.innerText=this.isRecording?"\u25FC\uFE0F":"\u{1F534}"}add(e,i){this.seen.has(e)||this.samples.push(i)}reset(){this.seen=new Set,this.samples=[],this.isRecording=!1,this.updateButtonText()}reportAsCalcState(){let e={};for(let r of this.samples)for(let o in r)e[o]||(e[o]=[]),e[o].push(r[o]);return Y$(window.location.href,e)}},S5=[__dcg_shared_module_exports__['nd'].RED,__dcg_shared_module_exports__['nd'].BLUE,__dcg_shared_module_exports__['nd'].GREEN,__dcg_shared_module_exports__['nd'].PURPLE,__dcg_shared_module_exports__['nd'].ORANGE,__dcg_shared_module_exports__['nd'].BLACK];function Y$(t,e){let i=[];for(let o in e){let n=e[o].map(__dcg_shared_module_exports__['uc']);i.push({latex:J$(o),values:n,color:S5[i.length%S5.length]})}return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},Od),{expressions:{list:[{id:"1",type:"text",text:t},{id:"2",type:"table",columns:i}]}})}function J$(t){if(t.length===1)return t;let e=t.replace(/[^a-zA-Z0-9_]/g,"").replace(/^[0-9]/,"").replace(/__+/g,"_");return`${e[0]}_{${e.slice(1)}}`}async function X$(t){if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(t);else{let e=document.createElement("textarea");e.value=t,e.style.position="absolute",e.style.left="-999999px",document.body.prepend(e),e.select();try{document.execCommand("copy")}catch(i){console.error(i)}finally{e.remove()}}}ad();var Q$=0,Ry=class{constructor(e,i,r,o){e||(e=document.createElement("div"));let n=document.createElement("div");n.className="dcg-dom-change-wrapper",n.style.width="100%",n.style.height="100%",e.appendChild(n),this.__id=Q$++;let a=new Ec;this.graphSettings=a;for(let m in r)a.config.setProperty(m,r[m]);let s=new du(a);this.controller=s,o&&s.dispatch({type:"ui/container-resized",size:o}),this.rootElt=n,this.view=um.mountToNode(_y,this.rootElt,{controller:um.const(s)});let l=new ep(i);this.controller.setEvaluator(l),this.controller.setRootElt(this.rootElt);let c=this.controller.findEl(".dcg-grapher-2d"),p=new nu(c,a,this.controller,l);this.controller.setGrapher2d(p),this.grapher=p,this.controller.initStateStack(),l.readEvaluatorConfig=()=>({product:a.config.product,beta3d:!!uo("beta3d"),evaluationMode:s.isGeometry()?"geometry":this.controller.isThreeDMode()?"graphing_3d":"graphing",globalRandomSeed:a.randomSeed,degreeMode:a.degreeMode,viewState:s.getViewState(),selectedIds:s.getPropagatedSelectedIds(),restrictedFunctions:a.config.restrictedFunctions,forceEnableGeometryFunctions:a.config.forceEnableGeometryFunctions,distributions:a.config.distributions,pointsOfInterest:a.config.pointsOfInterest,plotSingleVariableImplicitEquations:a.config.plotSingleVariableImplicitEquations,plotImplicits:a.config.plotImplicits,plotInequalities:a.config.plotInequalities,sliders:a.config.sliders,actions:!!a.config.actions,substitutions:!!a.config.substitutions,intervalComprehensions:!!a.config.intervalComprehensions,dimensions:s.getGrapherDimensions(),logInternalErrors:!!vn().logInternalErrors}),l.onEvaluatorResults=m=>{this.controller.dispatch({type:"on-evaluator-changes",changes:m.evaluationStates,timingData:m.timingData,graphData:m.graphData,eventUpdates:m.eventUpdates}),this.controller.requestRedrawGraph()},this.unsubFunc=this.controller.subscribeToChanges(()=>{this.controller.doesDOMHaveSize()&&(this.view.update(),this.grapher=this.controller.isThreeDMode()?this.controller.getGrapher3d()||this.controller.getGrapher2d():this.controller.getGrapher2d(),this.grapher.update());var m=!1;g()&&(m=!0),m&&this.controller.doesDOMHaveSize()&&(this.view.update(),this.grapher.update())});let u=new Zi;u.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=u;let g=()=>{var m=!1,w=s.computeMajorLayout(),C={left:w.grapher.left,right:w.grapher.left+w.grapher.width,width:w.grapher.width,top:w.grapher.top,bottom:w.grapher.top+w.grapher.height,height:w.grapher.height},S=this.grapher.getCurrentViewport(),k={top:S.ymax,bottom:S.ymin,left:S.xmin,right:S.xmax,width:S.xmax-S.xmin,height:S.ymax-S.ymin};__dcg_shared_module_exports__['Ra'](k,u.mathCoordinates)||(u.setProperty("mathCoordinates",k),m=!0);var M=C.height>0&&C.width>0;return M&&!__dcg_shared_module_exports__['Ra'](C,u.pixelCoordinates)&&(u.setProperty("pixelCoordinates",C),m=!0),m};H(this.rootElt).on("keydown.calculator-"+this.__id,m=>{this.grapher instanceof nu&&this.grapher.audioGraph.handleKeydown(m),this.instanceHotkeys.handleKeydown(m)}),H(document.documentElement).on("dcg-tapstart.calculator-"+this.__id,m=>{var E;let w=m.target,C=!!this.rootElt.contains(w),S=m.wasHandled("create-expression-with-keyboard"),k=!!w.closest(".dcg-api-shared-keypad-root"),M=!!w.classList.contains("dcg-shell");!C&&!k&&!M&&!S&&s.dispatch({type:"set-none-selected"});let I=(E=this.controller.getGrapher2d())==null?void 0:E.traceLayer;if(!m.wasHandled("do-not-clear-poi-labels")&&I&&(I.clearOpenedPOI(),this.controller.requestRedrawGraph()),s.isInEditListMode()){let T=!w.closest(".dcg-exppanel")&&!w.closest(".dcg-options-menu")&&!w.closest(".dcg-expression-top-bar")&&!w.closest(".dcg-keypad");(!C||T)&&s.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!1})}}),this.evaluator=l,this.controller.dispatch({type:"set-blank",degreeMode:!!r.degreeMode}),a.config.expressionsCollapsed&&this.setOptions({expressionsCollapsed:!0}),a.config.capExpressionSize&&this.setOptions({capExpressionSize:!0}),a.config.hasOwnProperty("pointsOfInterest")&&this.setOptions({pointsOfInterest:a.config.pointsOfInterest}),a.config.hasOwnProperty("backgroundColor")&&this.setOptions({backgroundColor:a.config.backgroundColor}),a.config.hasOwnProperty("textColor")&&this.setOptions({textColor:a.config.textColor}),a.config.observe("language",()=>{let m=this.controller.getState();this.controller.dispatch({type:"set-state",state:m})}),a.config.observe("forceLogModeRegressions",()=>{a.config.forceLogModeRegressions&&this.controller.setAllRegressionsToLogMode()}),this.instanceHotkeys=new Jb(s)}initializeGrapher3d(e){let i=this.controller.findEl(".dcg-grapher-3d"),r=new e(i,this.controller.getGraphSettings(),this.controller,this.controller.getEvaluator());this.controller.setGrapher3d(r),this.grapher=r,this.controller.dispatch({type:"set-blank"}),this.controller.clearUndoRedoHistory()}setOption(e,i){this.controller.getGraphSettings().config.setProperty(e,i)}setOptions(e){let i,r=this.controller.getGraphSettings().config,o=__dcg_shared_module_exports__['a']({},e);e.hasOwnProperty("backgroundColor")&&(__dcg_shared_module_exports__['kd'](e.backgroundColor)||(__dcg_shared_module_exports__['td'].warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"),delete o.backgroundColor)),e.hasOwnProperty("textColor")&&(__dcg_shared_module_exports__['kd'](e.textColor)||(__dcg_shared_module_exports__['td'].warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete o.textColor)),e.hasOwnProperty("menus")&&(__dcg_shared_module_exports__['td'].warn("Deprecated option: menus. Setting settingsMenu and expressionsTopbar instead."),e.hasOwnProperty("settingsMenu")||(o.settingsMenu=!!e.menus),e.hasOwnProperty("expressionsTopbar")||(o.expressionsTopbar=!!e.menus),delete o.menus),e.hasOwnProperty("solutions")&&(__dcg_shared_module_exports__['td'].warn("Deprecated option: solutions. Setting pointsOfInterest instead."),e.hasOwnProperty("pointsOfInterest")||(o.pointsOfInterest=!!e.solutions),delete o.solutions),e.hasOwnProperty("administerSecretFolders")&&(__dcg_shared_module_exports__['td'].warn("Deprecated option: administerSecretFolders. Setting authorFeatures instead."),e.hasOwnProperty("authorFeatures")||(o.authorFeatures=!!e.administerSecretFolders),delete o.administerSecretFolders),e.hasOwnProperty("singleVariableSolutions")&&(__dcg_shared_module_exports__['td'].warn("Deprecated option: singleVariableSolutions has been removed."),delete o.singleVariableSolutions),e.graphpaper===!1&&(e.expressionsCollapsed&&(o.expressionsCollapsed=!1,__dcg_shared_module_exports__['td'].warn("Cannot set graphpaper: false with expressionsCollapsed: true. Proceeding with expressionsCollapsed: false.")),r.expressionsCollapsed&&(o.expressionsCollapsed=!1,__dcg_shared_module_exports__['td'].warn("Disabling the graphpaper with the expressions list collapsed is not supported.Setting expressionsCollapsed: false.")),e.zoomButtons&&(o.zoomButtons=!1,__dcg_shared_module_exports__['td'].warn("Cannot set graphpaper: false with zoomButtons: true. Proceeding with zoomButtons: false.")),e.showResetButtonOnGraphpaper&&(o.showResetButtonOnGraphpaper=!1,__dcg_shared_module_exports__['td'].warn("Cannot set graphpaper: false with showResetButtonOnGraphpaper: true. Proceeding with showResetButtonOnGraphpaper: false.")),r.zoomButtons&&(o.zoomButtons=!1,__dcg_shared_module_exports__['td'].warn("Disabling the graphpaper with the zoomButtons visible is not supported. Setting zoomButtons: false.")),r.showResetButtonOnGraphpaper&&(o.showResetButtonOnGraphpaper=!1,__dcg_shared_module_exports__['td'].warn("Disabling the graphpaper with the reset button visible is not supported. Setting showResetButtonOnGraphpaper: false."))),r.graphpaper===!1&&(e.expressionsCollapsed||e.zoomButtons||e.showResetButtonOnGraphpaper)&&(o.graphpaper=!0,__dcg_shared_module_exports__['td'].warn("Must have visible graphpaper to proceed. Setting graphpaper: true.")),e.lockViewport&&e.zoomButtons&&(o.zoomButtons=!1,__dcg_shared_module_exports__['td'].warn("Cannot set zoomButtons: true and lockViewport: true. Proceeding with zoomButtons: false.")),r.lockViewport&&e.zoomButtons&&(o.lockViewport=!1,__dcg_shared_module_exports__['td'].warn("Cannot set zoomButtons: true while the viewport is locked. Setting lockViewport: false.")),r.zoomButtons&&e.lockViewport&&(o.zoomButtons=!1,__dcg_shared_module_exports__['td'].warn("Cannot lock the viewport without hiding the zoom buttons. Setting zoomButtons: false."));function n(p){let{notes:u,folders:g,images:m}=p;return u===!1||g===!1||m===!1}let a=n(e),s=n(__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},r),e)),l=r.pasteGraphLink,c=e.pasteGraphLink;a?(c||l)&&(o.pasteGraphLink=!1,__dcg_shared_module_exports__['td'].warn("Cannot disable creating note, folder, or image expressions without disabling graph link pasting. Setting pasteGraphLink: false.")):c&&s&&(o.notes=!0,o.folders=!0,o.images=!0,__dcg_shared_module_exports__['td'].warn("Cannot enable graph link pasting while the creation of notes, folders, or images is disable. Setting notes: true, folders: true, images: true.")),e.language&&(o.language=Yl(e.language)),e.logScales&&this.controller.isGeometry()&&(__dcg_shared_module_exports__['td'].warn("Cannot set logScales: true in the geometry calculator"),delete o.logScales);for(i in o)if(o.hasOwnProperty(i))switch(i){case"expressionsCollapsed":this.setOption("expressionsCollapsed",!!o.expressionsCollapsed),o.expressionsCollapsed?this.controller.dispatch({type:"hide-expressions-list",focusShowIcon:!1}):this.controller.dispatch({type:"show-expressions-list",focusHideIcon:!1});break;case"qwertyKeyboard":this.setOption("qwertyKeyboard",!!o.qwertyKeyboard),this.controller.isLetterKeypadOpen()&&this.controller.dispatch({type:"keypad/abc"});break;case"degreeMode":this.setOption("degreeMode",!!o.degreeMode),this.controller.dispatch({type:"set-graph-settings",degreeMode:!!o.degreeMode});break;case"actions":{let u=o[i];if(u===void 0||u===this.controller.getGraphSettings().config.actions)break;this.setOption(i,u),this.setState(this.getState(),{allowUndo:!0});break}case"substitutions":{let u=o[i];if(u===void 0||u===this.controller.getGraphSettings().config.substitutions)break;this.setOption(i,u),this.setState(this.getState(),{allowUndo:!0});break}case"intervalComprehensions":{let u=o[i];if(u===void 0||u===this.controller.getGraphSettings().config.intervalComprehensions)break;this.setOption(i,u),this.setState(this.getState(),{allowUndo:!0});break}case"product":case"beta3d":{__dcg_shared_module_exports__['td'].warn(`Cannot update '${i}' setting.`);break}case"logScales":{let u=o[i];u!==void 0&&(u===!1&&this.controller.dispatch({type:"set-graph-settings",xAxisScale:"linear",yAxisScale:"linear"}),this.setOption(i,u));break}case"graphDescription":{let u=o[i];typeof u=="string"||typeof u=="undefined"?this.setOption(i,u):__dcg_shared_module_exports__['td'].warn("Invalid graphDescription. graphDescription must be of type string or undefined.");break}case"keypad":case"graphpaper":case"expressions":case"settingsMenu":case"zoomButtons":case"showResetButtonOnGraphpaper":case"expressionsTopbar":case"pointsOfInterest":case"trace":case"border":case"lockViewport":case"authorFeatures":case"authorMode":case"advancedStyling":case"images":case"imageUploadCallback":case"folders":case"notes":case"sliders":case"links":case"restrictedFunctions":case"forceEnableGeometryFunctions":case"distributions":case"pasteGraphLink":case"pasteTableData":case"clearIntoDegreeMode":case"autosize":case"plotSingleVariableImplicitEquations":case"plotImplicits":case"plotInequalities":case"colors":case"branding":case"disableScrollFix":case"invertedColors":case"fontSize":case"projectorMode":case"ghostMode":case"language":case"onlyTraceSelected":case"disableMouseInteractions":case"nativeOnscreenKeypad":case"functionDefinition":case"plaidMode":case"wireframe":case"pasteGraphLinkCallback":case"editOnWeb":case"crossOriginSaveTest":case"backgroundColor":case"textColor":case"enableTabindex":case"audioTraceReverseExpressions":case"showHamburger":case"decimalToFraction":case"capExpressionSize":case"transparentBackground":case"pauseWhenOffscreen":case"hideGeoUI":case"brailleMode":case"sixKeyInput":case"brailleControls":case"zoomFit":case"forceLogModeRegressions":case"cacheRenderedSvgs":case"audio":case"showKeyboardShortcutsInTooltips":case"tone":case"translucentSurfaces":{let u=o[i];u!==void 0&&this.setOption(i,u);break}default:return i}}setViewport(e){let i=new er(e[0],e[1],e[2],e[3]);this.grapher.viewportController.setViewport(i),this.controller.dispatch({type:"commit-user-requested-viewport",viewport:i})}resize(e){e&&this.controller.dispatch({type:"ui/container-resized",size:e})}destroy(){H(document.documentElement).off(".calculator-"+this.__id),H(this.rootElt).off(".calculator-"+this.__id),this.unsubFunc(),this.graphSettings.unobserveAll(),this.evaluator&&this.evaluator.destroy(),this.grapher&&this.grapher.remove(),um.unmountFromNode(this.rootElt),this.rootElt.remove()}tick(e,i){i||(this.controller.handleTick(e),this.controller.updateRenderShellsAfterDispatch()),this.evaluator.tick(),this.grapher&&this.grapher.tick(e)}getState(e){return this.controller.getState(e)}setBlank(e){this.controller.dispatch({type:"set-blank",opts:e||{}})}setState(e,i){this.controller.dispatch({type:"set-state",state:e,opts:i||{}})}};function Z$(){let t=document.createElement("div");Rn(t,{zIndex:"99999",position:"absolute",left:"0px",top:"0px",background:"#FFF"}),document.body.append(t);let e=document.createElement("div");e.innerText="waiting...",e.style.display="inline-block";let i=new iD;t.appendChild(i.button),t.appendChild(e);var r=window,o=[],n=[];r.Calc.controller.onEvaluatorChangesSpy=function(){o.push(Date.now())};let a=new WeakSet;r.__dcgKnownPrograms=a;let s=0;if(r.Calc.controller.isThreeDMode()){let l=r.Calc.controller.grapher3d.webglLayer;l.debugOnlyMeasureGPUTiming=!0,l.onRenderSpy=function(){let c=l.debugGetPrograms(),p=c.reduce((g,m)=>g+m.usedTimes,0),u=0;for(let g of c)a.has(g)||(u+=1,s+=1,a.add(g));n.push({ts:Date.now(),programCount:c.length,programUses:p,newProgramCount:u,frame:l.lastRenderInfo})},l.debugOnlyTrackBufferUploads()}setInterval(function(){for(var l=Date.now();l-o[0]>1e3;)o.shift();for(;n.length&&l-n[0].ts>1e3;)n.shift();let c=n.length,p=n.slice(-100);if(i.isRecording)for(let G of p){let{startTimeCPU:_,durationCPU:P,endTimeGPU:N}=G.frame;N&&i.add(_,{t0:_,tcpu:P,tgpu0:N[0]-_,tgpu1:N[1]-_})}let u=Xc(p.map(G=>G.frame.durationCPU),2),g=[],m=[];for(let{frame:G}of p)G.endTimeGPU&&(g.push((G.endTimeGPU[0]+G.endTimeGPU[1])/2-G.startTimeCPU),m.push((G.endTimeGPU[0]-G.startTimeCPU)/2));let w=Xc(g,2),C=Xc(m,0),S=Xc(p.map(G=>G.programUses)),k=Xc(p.map(G=>G.programCount)),M=Xc(p.map(G=>G.newProgramCount)),I=Xc(p.map(G=>G.frame.triangles/1e3)),E=Xc(p.map(G=>G.frame.bufferUploads,0)),T=Xc(p.map(G=>G.frame.bufferUploadItems/1e3,1)),A=r.Calc.controller.isThreeDMode()?[`compute: <span dcg-fps-metric="computeFPS">${o.length}</span> fps`,`3d render: <span dcg-fps-metric="fps">${c}</span> fps`,`Redraw (CPU): <span dcg-fps-metric="redraw">${u}</span> ms`,`Redraw (CPU+GPU): <span dcg-fps-metric="cpu-gpu-redraw">${w}</span> \xB1<span dcg-fps-metric="cpu-gpu-redraw-error">${C}</span>ms`,`triangles: <span dcg-fps-metric="triangles">${I}</span>K/fr`,`buffers: <span dcg-fps-metric="uploadsPerFrame">${E}</span> uploads/fr, <span dcg-fps-metric="itemsPerFrame">${T}</span>K items/fr`,`programs: <span dcg-fps-metric="programsPerFrame">${S} uses/fr, <span dcg-fps-metric="programsCurrentPerFrame">${k} current/fr, <span dcg-fps-metric="programsNewPerFrame">${M}</span> new/fr, <span dcg-fps-metric="programsTotal">${s}</span> total`].join(" | "):`${o.length} fps`;e.innerHTML=A},100)}function Xc(t,e=1){let i=0;for(let o of t)i+=o;return(i/t.length).toFixed(e)}function ej(){let t=document.createElement("div");Rn(t,{zIndex:"99999",position:"absolute",left:"0px",top:"0px",background:"#FFF"}),t.innerText="waiting...",document.body.append(t);var e=window,i=[],r=0;e.Calc.controller.onEvaluatorChangesSpy=function(s,l){let{timeInWorker:c}=l;i[r%100]=c,r+=1};function o(){let s=0;for(let c of i)s+=c;let l=s/i.length;t.innerText=l.toFixed(1)+" ms"}let n;function a(){cancelAnimationFrame(n),n=requestAnimationFrame(a),o()}a()}var tj=!!vn().simulationFPS;tj&&(Ny=setInterval(function(){var t=window.Calc;t&&(clearInterval(Ny),Z$())},1));var Ny,ij=!!vn().timeInWorker;ij&&(Ny=setInterval(function(){var e=window.Calc;e&&(clearInterval(Ny),setTimeout(ej,1e3))},1));var Ny;function rj(t){Vx?setTimeout(t,25):requestAnimationFrame(t)}var E5=1,hm={},By=!1;function k5(){By=!0,rj(oj)}var D5={};function oj(){D5.rafSPY&&D5.rafSPY(),By=!1;for(let t in hm)hm[t].detectAndEnqueueEvent(),By=!0;if(By){k5();for(let t in hm)hm[t].dispatchQueuedEvent()}}var Su=class{constructor(e,i){this.elt=e;this.cb=i;this.destroyed=!1;this.lastOffscreen=!1;this.id=E5.toString(),this.appliedScale={x:1,y:1},E5++}stopWatching(){delete hm[this.id]}startWatching(){this.checkForChanges(),hm[this.id]=this,By||k5()}resetAppliedScalingAndGetBoundingClientRect(){var e=this.elt.getBoundingClientRect(),i={x:e.width/this.elt.offsetWidth,y:e.height/this.elt.offsetHeight};if(i.x===this.appliedScale.x&&i.y===this.appliedScale.y)return e;let r=this.elt.querySelector(".dcg-dom-change-wrapper");return r&&(this.appliedScale=i,Rn(r,{transform:"scale("+1/this.appliedScale.x+","+1/this.appliedScale.y+")",width:100*this.appliedScale.x+"%",height:100*this.appliedScale.y+"%",transformOrigin:"0 0"})),e}detectAndEnqueueEvent(){if(this.destroyed)return;let e=!0;if(!(document.body&&document.body.contains(this.elt)))this.lastSize&&(this.lastSize=void 0,this.queuedEvent={type:"removed",target:this.elt,isOffscreen:!0});else{let r=this.resetAppliedScalingAndGetBoundingClientRect();e=r.top>window.innerHeight||r.bottom<0||r.left>window.innerWidth||r.right<0,this.lastSize?(r.width!==this.lastSize.width||r.height!==this.lastSize.height||window.devicePixelRatio!==this.lastSize.pixelRatio)&&(this.lastSize.width=r.width,this.lastSize.height=r.height,this.lastSize.pixelRatio=window.devicePixelRatio,this.queuedEvent={type:"resized",target:this.elt,size:__dcg_shared_module_exports__['a']({},this.lastSize),isOffscreen:e}):(this.lastSize={width:r.width,height:r.height,pixelRatio:window.devicePixelRatio},this.queuedEvent={type:"added",target:this.elt,size:__dcg_shared_module_exports__['a']({},this.lastSize),isOffscreen:e})}e!==this.lastOffscreen&&(this.lastOffscreen=e,this.queuedEvent||(this.queuedEvent={type:"offscreen-noop",target:this.elt,isOffscreen:e}))}dispatchQueuedEvent(){let e=this.queuedEvent;e&&(this.queuedEvent=void 0,this.cb(e))}checkForChanges(){this.detectAndEnqueueEvent(),this.dispatchQueuedEvent()}destroy(){this.stopWatching();for(var e in this)this.hasOwnProperty(e)&&delete this[e];this.destroyed=!0}};function I5(t){var e=t.mode,i=t.width,r=t.height,o=t.currentBounds,n=t.graphpaperAspectRatio,a=t.mathAspectRatio,s=t.mathBounds,l=i/r,c={x:o.left+o.width/2,y:o.bottom+o.height/2};if(s.left===void 0!=(s.right===void 0)||s.bottom===void 0!=(s.top===void 0))return __dcg_shared_module_exports__['td'].warn('asyncScreenshot: cannot specify "left" bound without "right" or "bottom" bound without "top". Got: '+s),o;var p=s.left!==void 0&&s.right!==void 0,u=s.bottom!==void 0&&s.top!==void 0,g=p&&u,m,w,C,S,k,M,I,E,T,A;switch(e){case"stretch":return g?s:p?{left:s.left,right:s.right,bottom:o.bottom,top:o.top}:u?{left:o.left,right:o.right,bottom:s.bottom,top:s.top}:o;case"contain":return g?(S=s.right-s.left,k=s.top-s.bottom,M={x:s.left+S/2,y:s.bottom+k/2},C=S/k,l>C?(w=k/r,m=w*a,{left:M.x-m*i/2,right:M.x+m*i/2,bottom:s.bottom,top:s.top}):(m=S/i,w=m/a,{left:s.left,right:s.right,bottom:M.y-w*r/2,top:M.y+w*r/2})):p?(I=s.right-s.left,E=s.left+I/2,C=I/o.height,l>C?(w=o.height/r,m=w*a,{left:E-m*i/2,right:E+m*i/2,bottom:o.bottom,top:o.top}):(m=I/i,w=m/a,{left:s.left,right:s.right,bottom:c.y-w*r/2,top:c.y+w*r/2})):u?(T=s.top-s.bottom,A=s.bottom+T/2,C=o.width/T,l>C?(w=T/r,m=w*a,{left:c.x-m*i/2,right:c.x+m*i/2,bottom:s.bottom,top:s.top}):(m=o.width/i,w=m/a,{left:o.left,right:o.right,bottom:A-w*r/2,top:A+w*r/2})):l>n?(w=o.height/r,m=w*a,{left:c.x-m*i/2,right:c.x+m*i/2,bottom:o.bottom,top:o.top}):(m=o.width/i,w=m/a,{left:o.left,right:o.right,bottom:c.y-w*r/2,top:c.y+w*r/2});case"preserveX":return g?(S=s.right-s.left,k=s.top-s.bottom,M={x:s.left+S/2,y:s.bottom+k/2},C=S/k,m=S/i,w=m/a,{left:s.left,right:s.right,bottom:M.y-w*r/2,top:M.y+w*r/2}):u?(T=s.top-s.bottom,A=s.bottom+T/2,C=o.width/T,m=o.width/i,w=m/a,{left:o.left,right:o.right,bottom:A-w*r/2,top:A+w*r/2}):p?(I=s.right-s.left,m=I/i,w=m/a,{left:s.left,right:s.right,bottom:c.y-w*r/2,top:c.y+w*r/2}):(I=o.right-o.left,m=I/i,w=m/a,{left:o.left,right:o.right,bottom:c.y-w*r/2,top:c.y+w*r/2});case"preserveY":return g?(S=s.right-s.left,k=s.top-s.bottom,M={x:s.left+S/2,y:s.bottom+k/2},C=S/k,w=k/r,m=w*a,{left:M.x-m*i/2,right:M.x+m*i/2,bottom:s.bottom,top:s.top}):p?(I=s.right-s.left,E=s.left+I/2,C=I/o.height,w=o.height/r,m=w*a,{left:E-m*i/2,right:E+m*i/2,bottom:o.bottom,top:o.top}):u?(T=s.top-s.bottom,w=T/r,m=w*a,{left:c.x-m*i/2,right:c.x+m*i/2,bottom:s.bottom,top:s.top}):(T=o.top-o.bottom,w=T/r,m=w*a,{left:c.x-m*i/2,right:c.x+m*i/2,bottom:o.bottom,top:o.top});default:return o}}var rD=class{constructor(e){this.mq=e,this.id=e.id,this.data=e.data}simulateUserChangedLatex(){Se.simulateUserChangedLatex(this.mq)}simulateKeypress(e){Se.simulateKeypress(this.mq,e)}config(e){return this.mq.config(e),this}latex(e){return e===void 0?this.mq.latex():(this.mq.latex(e),this.simulateUserChangedLatex(),this)}reflow(){this.mq.reflow()}el(){return this.mq.el()}getAriaLabel(){return this.mq.getAriaLabel()}setAriaLabel(e){return this.mq.setAriaLabel(e)}html(){return this.mq.html()}mathspeak(){return this.mq.mathspeak()}text(){return this.mq.text()}selection(){return this.mq.selection()}select(){return this.mq.select(),this}moveToRightEnd(){return this.mq.moveToRightEnd(),this}moveToLeftEnd(){return this.mq.moveToLeftEnd(),this}cmd(e){return this.mq.cmd(e),this.simulateUserChangedLatex(),this}write(e){return this.mq.write(e),this.simulateUserChangedLatex(),this}keystroke(e){return this.simulateKeypress(e),this}typedText(e){return this.mq.typedText(e),this.simulateUserChangedLatex(),this}clearSelection(){return this.mq.clearSelection(),this}getAriaPostLabel(){return this.mq.getAriaPostLabel()}setAriaPostLabel(e,i){return this.mq.setAriaPostLabel(e,i),this}blur(){return this.mq.blur(),this}focus(){return this.mq.focus(),this}revert(){return this.mq.revert()}ignoreNextMousedown(e){return this.mq.ignoreNextMousedown(e),this}clickAt(e,i,r){return this.mq.clickAt(e,i,r),this}};Wv();var T5=_f(location.search,"nworkers"),M5=4;T5&&(M5=parseInt(T5,10));var gm=new pm(M5);var AM={keypad:!0,graphpaper:!0,expressions:!0,settingsMenu:!0,zoomButtons:!0,showResetButtonOnGraphpaper:!1,expressionsTopbar:!0,capExpressionSize:!1,pointsOfInterest:!0,trace:!0,border:!0,lockViewport:!1,expressionsCollapsed:!1,authorFeatures:!1,authorMode:!0,advancedStyling:!1,images:!0,imageUploadCallback:Bv,folders:!0,notes:!0,sliders:!0,links:!0,qwertyKeyboard:!0,restrictedFunctions:!1,forceEnableGeometryFunctions:!1,pasteGraphLink:!1,pasteTableData:!0,degreeMode:!1,clearIntoDegreeMode:!1,autosize:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,colors:{RED:Rw,BLUE:Nw,GREEN:Bw,ORANGE:qw,PURPLE:Kw,BLACK:zw},invertedColors:!1,functionDefinition:!0,projectorMode:!1,decimalToFraction:!0,fontSize:16,language:"en",backgroundColor:"#fff",textColor:"#000",distributions:!0,brailleMode:"none",sixKeyInput:!1,brailleControls:!0,graphDescription:void 0,zoomFit:!0,forceLogModeRegressions:!1,actions:"auto",audio:!0,logScales:!0,translucentSurfaces:!1,showKeyboardShortcutsInTooltips:!1,tone:!0},G5=Object.keys(AM),A5={product:"graphing",showHamburger:!1,disableScrollFix:!1,branding:!0,onlyTraceSelected:!1,disableMouseInteractions:!1,nativeOnscreenKeypad:!1,plaidMode:!1,wireframe:!1,pasteGraphLinkCallback:void 0,editOnWeb:!1,crossOriginSaveTest:!1,enableTabindex:!0,audioTraceReverseExpressions:!1,transparentBackground:!1,pauseWhenOffscreen:!1,hideGeoUI:!1,substitutions:!0,intervalComprehensions:!1,beta3d:!1,cacheRenderedSvgs:!1,ghostMode:!1},nj={solutions:!0,menus:!0,singleVariableSolutions:!0,clickableObjects:!1,administerSecretFolders:!1},oD=__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},AM),A5);function V5(t){return!!(AM.hasOwnProperty(t)||A5.hasOwnProperty(t)||nj.hasOwnProperty(t))}function nD(t){var e=__dcg_shared_module_exports__['l'](oD);for(var i in t)e.hasOwnProperty(i)&&(e[i]=t[i]);return __dcg_shared_module_exports__['kd'](e.backgroundColor)||(e.backgroundColor=oD.backgroundColor,__dcg_shared_module_exports__['td'].warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)")),__dcg_shared_module_exports__['kd'](e.textColor)||(e.textColor=oD.textColor,__dcg_shared_module_exports__['td'].warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)")),e.actions!==!0&&e.actions!==!1&&e.actions!=="auto"&&(e.actions=oD.actions,__dcg_shared_module_exports__['td'].warn("Invalid actions setting. Must be true, false, or 'auto'.")),t.zoomButtons===void 0&&(!e.graphpaper||e.lockViewport)&&(e.zoomButtons=!1),t.images===void 0&&(e.graphpaper||(e.images=!1)),t.hasOwnProperty("menus")&&(__dcg_shared_module_exports__['td'].warn("As of API version 0.4, the 'menus' option is deprecated and has been split into 'settingsMenu' (boolean) and 'expressionsTopbar' (boolean)."),t.hasOwnProperty("settingsMenu")||(e.settingsMenu=!!t.menus),t.hasOwnProperty("expressionsTopbar")||(e.expressionsTopbar=!!t.menus)),t.hasOwnProperty("solutions")&&(__dcg_shared_module_exports__['td'].warn("As of API v1.0, the 'solutions' option is deprecated and has been replaced with 'pointsOfInterest' (boolean)."),t.hasOwnProperty("pointsOfInterest")||(e.pointsOfInterest=!!t.solutions)),t.hasOwnProperty("singleVariableSolutions")&&__dcg_shared_module_exports__['td'].warn("As of API v1.0, the 'singleVariableSolutions' has been removed. The calculator no longer displays solutions to single variable equations."),t.hasOwnProperty("clickableObjects")&&(__dcg_shared_module_exports__['td'].warn("As of API v1.7, the 'clickableObjects' option is deprecated and has been replaced with 'actions'."),t.clickableObjects===!0&&!t.hasOwnProperty("actions")&&(e.actions=!0)),t.hasOwnProperty("administerSecretFolders")&&(__dcg_shared_module_exports__['td'].warn("As of API v1.8, the 'administerSecretFolders' option is deprecated and has been subsumed under 'authorFeatures'."),t.administerSecretFolders===!0&&!t.hasOwnProperty("authorFeatures")&&(e.authorFeatures=!0)),e.graphpaper||(e.expressionsCollapsed&&(e.expressionsCollapsed=!1,__dcg_shared_module_exports__['td'].warn("Desmos API initialized with bad options. graphpaper: false and expressionsCollapsed: true are incompatible. Proceeding with expressionsCollapsed: false.")),e.zoomButtons&&(e.zoomButtons=!1,__dcg_shared_module_exports__['td'].warn("Desmos API initialized with bad options. graphpaper: false and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")),e.showResetButtonOnGraphpaper&&(e.showResetButtonOnGraphpaper=!1,__dcg_shared_module_exports__['td'].warn("Desmos API initialized with bad options. graphpaper: false and showResetButtonOnGraphpaper: true are incompatible. Proceeding with showResetButtonOnGraphpaper: false."))),e.lockViewport&&e.zoomButtons&&(e.zoomButtons=!1,__dcg_shared_module_exports__['td'].warn("Desmos API initialized with bad options. lockViewport: true and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")),(e.notes===!1||e.folders===!1||e.images===!1)&&e.pasteGraphLink===!0&&(e.pasteGraphLink=!1,__dcg_shared_module_exports__['td'].warn("Desmos API initialized with bad options. pasteGraphLink: true is incompatible with disabling the creation of note, folder, or image expressions. Proceeding with pasteGraphLink: false.")),e.language&&(e.language=Yl(e.language)),e}function L5(t,e){var i={},r={};for(var o in t)V5(o)?i[o]=t[o]:BO(o)?r[o]=t[o]:e||__dcg_shared_module_exports__['td'].warn("Unrecognized setting: "+o+". Ignoring.");return{configOptions:i,settingsOptions:r}}function P5(t,e){var i={};return e.hasOwnProperty("x")&&(i.x=t.mapX(e.x)),e.hasOwnProperty("y")&&(i.y=t.mapY(e.y)),i}var _5=[],VM=!1,O5=new Map;function aj(t){let e=O5.get(t);return e||(e=new t,O5.set(t,e)),e}function F5(t){if(!t||VM)return;let e;for(;(e=_5.shift())&&e.api._destroyed;);if(!e)return;let i=e;VM=!0;let{options:r,mathBounds:o,state:n,callback:a}=i;var s=aj(t);s.setState(n),s.setMathBounds(o),["majorAxisOpacity","minorAxisOpacity","axisLineOffset","axisLineWidth","labelSize","graphLineWidth","pointLineWidth"].forEach(m=>{m==="axisLineWidth"?s._calc.grapher.settings.setProperty(m,i.api._calc.grapher.settings[m]):s._calc.grapher.settings[m]=i.api._calc.grapher.settings[m]});var c=s._calc.evaluator,p=()=>{s._calc.grapher.asyncScreenshot(r,m=>{VM=!1,F5(t),a(m)})},u=i.api._calc.controller,g=Cc(function(){u.areAnyImagesLoading()||(_p(g),c.notifyWhenSynced(p))})}var Eu=class extends Zi{constructor(i,r,o){super();this._destroyed=!1;this.isOffscreen=!1;var n=L5(r||{},!0),a=nD(n.configOptions),s=n.settingsOptions;this._calc=new Ry(i,gm,a),this.controller=this._calc.controller,this.controller.onEventsEmitted=l=>{let c=this.controller.getSelectedItem();this.setProperty("isAnyExpressionSelected",!!c),this.setProperty("selectedExpressionId",c?c.id:void 0),this.setProperty("expressionAnalysis",this.controller.getExpressionAnalysis());var p=Se.getFocusedMathquill();this.setProperty("focusedMathQuill",p?new rD(p):void 0);for(var u in l){if(!l.hasOwnProperty(u))continue;let g=l[u];g&&this.triggerEvent(u,g)}},this._calc.graphpaperBounds.observeAndSync("mathCoordinates",this._syncGraphpaperBounds.bind(this)),this._calc.graphpaperBounds.observeAndSync("pixelCoordinates",this._syncGraphpaperBounds.bind(this)),this.colors=this.controller.getColors(),this._initGraphSettings(),this.updateSettings(s),this._sharedClockBusToken=Cc(l=>this.withControllerInAPIMode(()=>{var c=this._calc.grapher.settings.config.pauseWhenOffscreen&&this.isOffscreen;this._calc.tick(l,c)})),this.domChangeDetector=new Su(i,l=>this.withControllerInAPIMode(()=>{switch(this.isOffscreen=l.isOffscreen,l.type){case"offscreen-noop":break;case"added":this._calc.resize(l.size);break;case"removed":break;case"resized":this._calc.resize(l.size);break}})),a.autosize?this.domChangeDetector.startWatching():this.domChangeDetector.checkForChanges(),typeof o=="function"&&o(this)}destroy(){this.controller.onEventsEmitted=function(){},this._calc.destroy(),_p(this._sharedClockBusToken),this.domChangeDetector.destroy();function i(a){__dcg_shared_module_exports__['td'].warn("You've destroyed this API instance. You can no longer call ."+a+"()")}for(var r={},o=this;o;)Object.getOwnPropertyNames(o).forEach(s=>r[s]=!0),o=Object.getPrototypeOf(o);for(var n in r)typeof this[n]=="function"?this[n]=i.bind(this,n):this.hasOwnProperty(n)&&delete this[n];this.destroy=function(){},this._destroyed=!0}withHistoryReplacement(i){try{this.controller.pushWithHistoryReplacement(),i()}finally{this.controller.popWithHistoryReplacement()}}withControllerInAPIMode(i){try{return this.controller.pushAPIMethodCall(),i()}finally{this.controller.popAPIMethodCall()}}_syncGraphpaperBounds(){return this.withControllerInAPIMode(()=>{this.controller.runAfterDispatch(()=>{this.setProperty("graphpaperBounds",{mathCoordinates:this._calc.graphpaperBounds.mathCoordinates,pixelCoordinates:this._calc.graphpaperBounds.pixelCoordinates})})})}_initGraphSettings(){return this.withControllerInAPIMode(()=>{var i=new Zi;this.settings=this.graphSettings=i,NO.forEach(r=>{this._calc.grapher.settings.observeAndSync(r,()=>{this.controller.runAfterDispatch(()=>{i.setProperty(r,this._calc.grapher.settings[r])})})}),G5.forEach(r=>{this._calc.grapher.settings.config.observeAndSync(r,()=>{this.controller.runAfterDispatch(()=>{i.setProperty(r,this._calc.grapher.settings.config[r])})})})})}updateSettings(i){return this.withControllerInAPIMode(()=>{var r=L5(i,!1),o=r.configOptions,n=r.settingsOptions;__dcg_shared_module_exports__['Sa'](o)||this._calc.setOptions(o),__dcg_shared_module_exports__['Sa'](n)||this.controller.dispatch(__dcg_shared_module_exports__['a']({type:"set-graph-settings"},this.controller.getGraphSettings().validateSettings(n))),this.notifyControllerOfAPICall()})}setGraphSettings(i){return this.withControllerInAPIMode(()=>{__dcg_shared_module_exports__['td'].warn("As of API v0.8 the 'setGraphSettings' method is deprecated and has been renamed 'updateSettings.'"),this.updateSettings(i),this.setGraphSettings=this.updateSettings,this.notifyControllerOfAPICall()})}setDefaultState(i){return this.withControllerInAPIMode(()=>{this._calc.grapher.settings.setProperty("defaultState",i),this.notifyControllerOfAPICall()})}mathToPixels(i){return this.withControllerInAPIMode(()=>{var r=__dcg_shared_module_exports__['Dc'].fromRects(this.graphpaperBounds.mathCoordinates,this.graphpaperBounds.pixelCoordinates,{xAxisScale:this._calc.grapher.settings.xAxisScale,yAxisScale:this._calc.grapher.settings.yAxisScale});return P5(r,i)})}pixelsToMath(i){return this.withControllerInAPIMode(()=>{var r=__dcg_shared_module_exports__['Dc'].fromRects(this.graphpaperBounds.mathCoordinates,this.graphpaperBounds.pixelCoordinates,{xAxisScale:this._calc.grapher.settings.xAxisScale,yAxisScale:this._calc.grapher.settings.yAxisScale}).inverse();return P5(r,i)})}notifyControllerOfAPICall(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"render"})})}setExpression(i){return this.withControllerInAPIMode(()=>{var r=this.controller,o=r.getItemModel(i.id),n=o&&o.type,a=Fv(i,n,this.controller);if(a)if(n)this.controller.dispatch({type:"set-expression-properties-from-api",id:a.id,properties:a});else{if(a.type==="image")return;this.controller.dispatch({type:"add-item-to-end-from-api",state:a})}})}setExpressions(i){return this.withControllerInAPIMode(()=>{i.forEach(this.setExpression.bind(this))})}removeExpression(i){return this.withControllerInAPIMode(()=>{var r=i.id.toString();this.controller.dispatch({type:"remove-item-by-id",id:r})})}removeExpressions(i){return this.withControllerInAPIMode(()=>{i.forEach(this.removeExpression.bind(this))})}removeSelected(){return this.withControllerInAPIMode(()=>{var i=this.controller.getSelectedItem();if(!i)return;let{id:r}=i;return this.controller.dispatch({type:"remove-item-by-id",id:r}),r})}setMathBounds(i){return this.withControllerInAPIMode(()=>{i&&i.left<i.right&&i.bottom<i.top?(this._calc.setViewport([i.left,i.right,i.bottom,i.top]),this._calc.controller.unmarkLastChangedAxis(),this._calc.controller.markSquareAxesAfterUserEditedViewport()):__dcg_shared_module_exports__['td'].warn("Invalid bounds argument. Expected a bounds object with bounds.bottom < bounds.top, and bounds.left < bounds.right. Got "+JSON.stringify(i)),this.notifyControllerOfAPICall()})}setViewport(i){return this.withControllerInAPIMode(()=>{i.length==4&&i[1]>i[0]&&i[3]>i[2]?(this._calc.setViewport(i),this._calc.controller.markSquareAxesAfterUserEditedViewport()):__dcg_shared_module_exports__['td'].warn("Invalid viewport.  Expected [xmin, xmax, ymin, ymax].  Got "+i),this.notifyControllerOfAPICall()})}resize(){return this.withControllerInAPIMode(()=>{this.domChangeDetector.checkForChanges()})}getState(i){return this.withControllerInAPIMode(()=>this.controller.getState(i))}getExpressions(){return this.withControllerInAPIMode(()=>{var i=this.getState({stripDefaults:!1}).expressions.list;return i.map(_v)})}setBlank(i){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"set-blank",opts:i||{}})})}setState(i,r){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"set-state",state:i,opts:r||{}})})}undo(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"undo"})})}redo(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"redo"})})}clearHistory(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"clear-undoredo-history"})})}newRandomSeed(){return this.withControllerInAPIMode(()=>{this.updateSettings({randomSeed:Ol()})})}screenshot(i){return this.withControllerInAPIMode(()=>(i||(i={}),i=this._validateBrailleScreenshotOptions(i),this._calc.grapher.screenshot(i)))}_getMathAspectRatio(){return this.withControllerInAPIMode(()=>{var i=this.graphpaperBounds.mathCoordinates,r=this._calc.grapher.getProjection().pixelCoordinates,o=r.right-r.left,n=r.bottom-r.top,a=i.width/o,s=i.height/n;return a/s})}isProjectionUniform(){return this.withControllerInAPIMode(()=>!!this._calc.grapher.getProjection().settings.squareAxes)}_validateBrailleScreenshotOptions(i){return this.withControllerInAPIMode(()=>{i=__dcg_shared_module_exports__['l'](i);var r=i.braille;if(r){let o=r.embosserModel;if(!o)return __dcg_shared_module_exports__['td'].warn("Screenshot braille options requires an embosser model to be specified. "),__dcg_shared_module_exports__['td'].warn("Continuing with non-braille screenshot."),delete i.braille,i;if(o==="etc"&&(r.embosserModel="etc11"),o==="vpmax"&&(r.embosserModel="vpmax11"),r.embosserModel!=="etc8"&&r.embosserModel!=="etc11"&&r.embosserModel!=="vpmax8"&&r.embosserModel!=="vpmax11")return __dcg_shared_module_exports__['td'].warn('Unknown screenshot braille embosser model. Valid models are "etc" and "vpmax".'),__dcg_shared_module_exports__['td'].warn("Continuing with non-braille screenshot."),delete i.braille,i;r.brailleMode!=="nemeth"&&r.brailleMode!=="ueb"&&(__dcg_shared_module_exports__['td'].warn("Screenshot options braille.brailleMode must be nemeth or ueb. Proceeding with nemeth."),r.brailleMode="nemeth"),i.width&&(__dcg_shared_module_exports__['td'].warn("Screenshot width option is ignored when exporting Braille."),delete i.width),i.height&&(__dcg_shared_module_exports__['td'].warn("Screenshot height option is ignored when exporting Braille."),delete i.height),i.targetPixelRatio&&(__dcg_shared_module_exports__['td'].warn("Screenshot targetPixelRatio option is ignored when exporting Braille."),delete i.targetPixelRatio),i.preserveAxisNumbers&&(__dcg_shared_module_exports__['td'].warn("Screenshot preserveAxisNumbers option is ignored when exporting Braille."),delete i.preserveAxisNumbers)}return i})}_validateAsyncScreenshotOpts(i){return this.withControllerInAPIMode(()=>{i=__dcg_shared_module_exports__['l'](i);let r=i.mode||"contain",o=i.width||i.height||this.graphpaperBounds.pixelCoordinates.width,n=i.height||i.width||this.graphpaperBounds.pixelCoordinates.height,a=i.targetPixelRatio||1;a<1&&(a=1);let s=i.preserveAxisNumbers;i.hasOwnProperty("format")||(i.svg?(i.format="svg",delete i.svg):i.format="png");let l=i.mathBounds||{},c=this._getMathAspectRatio(),p=this.graphpaperBounds.pixelCoordinates.width/this.graphpaperBounds.pixelCoordinates.height,u=I5({mode:r,width:o,height:n,currentBounds:this.graphpaperBounds.mathCoordinates,graphpaperAspectRatio:p,mathAspectRatio:c,mathBounds:l});return{opts:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},i),{width:o,height:n,targetPixelRatio:a,preserveAxisNumbers:s}),mathBounds:u}})}asyncScreenshot(i,r){if(!arguments.length){__dcg_shared_module_exports__['td'].warn("asyncScreenshot expects a callback");return}if(arguments.length===1)if(typeof i!="function"){__dcg_shared_module_exports__['td'].warn("asyncScreenshot expects a callback");return}else r=i,i={};return this.withControllerInAPIMode(()=>{i||(i={}),i=this._validateBrailleScreenshotOptions(i);let{opts:o,mathBounds:n}=this._validateAsyncScreenshotOpts(i);_5.push({api:this,options:o,mathBounds:n,state:this.getState(),callback:r}),F5(this.constructor)})}setOptions(i){return this.withControllerInAPIMode(()=>{var r=this._calc.setOptions(i);return this.notifyControllerOfAPICall(),r})}focusFirstExpression(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"focus-first-expression"})})}openKeypad(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"keypad/set-minimized",minimized:!1})})}HelperExpression(i){return this.withControllerInAPIMode(()=>{var r=i&&i.latex||"",o=new Zi;return o.latex=r,this.controller.dispatch({type:"add-helper-expression",state:{type:"helper-expression",id:this.controller.generateId(),latex:r,proxy:o}}),o})}};var mm=class extends Eu{constructor(e,i,r){super(e,__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},i),{product:"graphing"}),r)}};var aD=class{constructor(e,i){var r=new Ec;for(var o in i)r.config.setProperty(o,i[o]);this.controller=new du(r);var n=new ep(e);this.controller.setEvaluator(n),n.readEvaluatorConfig=()=>({product:this.controller.getGraphSettings().config.product,beta3d:i.beta3d,evaluationMode:this.controller.isGeometry()?"geometry":"graphing",globalRandomSeed:r.randomSeed,degreeMode:r.degreeMode,restrictedFunctions:r.config.restrictedFunctions,distributions:r.config.distributions,pointsOfInterest:r.config.pointsOfInterest,plotSingleVariableImplicitEquations:r.config.plotSingleVariableImplicitEquations,plotImplicits:r.config.plotImplicits,plotInequalities:r.config.plotInequalities,sliders:r.config.sliders,actions:r.config.actions}),n.onEvaluatorResults=s=>{this.controller.dispatch({type:"on-evaluator-changes",changes:s.evaluationStates,timingData:s.timingData,eventUpdates:s.eventUpdates})};var a=new Zi;a.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=a,this.evaluator=n,this.setBlank()}setBlank(e){this.controller.dispatch({type:"set-blank",opts:e})}tick(){this.evaluator.tick()}destroy(){this.evaluator.destroy()}};var fm=class{constructor(e){this._calc=new aD(gm,nD(__dcg_shared_module_exports__['a']({},e))),this.controller=this._calc.controller,this._sharedClockBusToken=Cc(()=>{this._calc.tick()})}destroy(){this._calc.destroy(),_p(this._sharedClockBusToken);function e(n){__dcg_shared_module_exports__['td'].warn("You've destroyed this API instance. You can no longer call ."+n+"()")}for(var i={},r=this;r;)Object.getOwnPropertyNames(r).forEach(a=>i[a]=!0),r=Object.getPrototypeOf(r);for(var o in i)typeof this[o]=="function"?this[o]=e.bind(this,o):this.hasOwnProperty(o)&&delete this[o];this.destroy=function(){}}setExpression(e){var i=this.controller,r=i.getItemModel(e.id),o=r&&r.type,n=Fv(e,o,this.controller);if(n)if(o)this.controller.dispatch({type:"set-expression-properties-from-api",id:n.id,properties:n});else{if(n.type==="image")return;this.controller.dispatch({type:"add-item-to-end-from-api",state:n})}}setExpressions(e){e.forEach(this.setExpression.bind(this))}removeExpression(e){var i=e.id.toString();this.controller.dispatch({type:"remove-item-by-id",id:i})}removeExpressions(e){e.forEach(this.removeExpression.bind(this))}getState(e){return this.controller.getState(e)}getExpressions(){var e=this.getState({stripDefaults:!1}).expressions.list;return e.map(_v)}setBlank(e){this.controller.dispatch({type:"set-blank",opts:e||{}})}setState(e,i){this.controller.dispatch({type:"set-state",state:e,opts:i||{}})}HelperExpression(e){var i=e&&e.latex||"",r=new Zi;return r.latex=i,this.controller.dispatch({type:"add-helper-expression",state:{type:"helper-expression",id:this.controller.generateId(),latex:i,proxy:r}}),r}resize(){}};var Sm=__dcg_shared_module_exports__['h'](j());var Du=class{constructor(e){if(this.rootElt=e,this.eventModel=new Zi,!e)throw new Error("must pass an HTMLElement to the API")}setupDomChangeDetector(e){this.autoSize=e,NS(this.rootElt),this.domChangeDetector=new Su(this.rootElt,i=>{switch(i.type){case"added":this.view=this.onCreateView(),this.onResizeView(i.size);break;case"removed":this.onDestroyView(),this.view=void 0;break;case"resized":this.onResizeView(i.size);break}}),this.autoSize!==!1?this.domChangeDetector.startWatching():this.domChangeDetector.checkForChanges()}detach(){__dcg_shared_module_exports__['td'].warn(".detach() is deprecated. It should no longer be necessary")}destroy(){this.view&&this.onDestroyView(),this.domChangeDetector.destroy();function e(n){__dcg_shared_module_exports__['td'].warn("You've destroyed this API instance. You can no longer call ."+n+"()")}for(var i={},r=this;r;)Object.getOwnPropertyNames(r).forEach(a=>i[a]=!0),r=Object.getPrototypeOf(r);for(var o in i)typeof this[o]=="function"?this[o]=e.bind(this,o):this.hasOwnProperty(o)&&delete this[o];this.destroy=function(){}}resize(){this.domChangeDetector.checkForChanges()}updateView(){this.view&&document.body&&document.body.contains(this.rootElt)&&this.view.update()}triggerEvent(e,i){this.eventModel.triggerEvent(e,i)}observeEvent(e,i){this.eventModel.observeEvent(e,i)}unobserveEvent(e){this.eventModel.unobserveEvent(e)}};var Ky=class{constructor({evaluationMode:e,additionalFunctions:i,functionDefinition:r,replaceRoundWithReciprocal:o,workerPool:n}){this._evaluations={};this._nextObjectId=0;this.store=new Hs({expressions:{1:{id:"1",latex:"",braille:"",type:"latex",displayAsFraction:!1}},order:["1"],settings:{degreeMode:!1},ui:{focus:void 0}});this.evaluationMode=e,this.additionalFunctions=i,this.functionDefinition=r,this.replaceRoundWithReciprocal=o,this.workerPool=n,this._setupEvaluator(),this.clear(),this._sharedClockBusToken=Cc(()=>{this._evaluator.tick()})}isSingleExpression(){return this.evaluationMode==="singleExpressionScientific"||this.evaluationMode==="singleExpressionFourFunction"}destroy(){_p(this._sharedClockBusToken)}generateObjectId(){return(this._nextObjectId++).toString()}updateNextObjectId(){let e=this.store.getState().order;this._nextObjectId=0;let i=/^[0-9]+$/;for(let r of e)if(i.test(r)){let o=parseInt(r,10);o>=this._nextObjectId&&(this._nextObjectId=o+1)}}clearShouldDebounceUndoRedo(){this._shouldDebounceUndoRedo=!1}markShouldDebounceUndoRedo(){this._shouldDebounceUndoRedo=!0}getShouldDebounceUndoRedo(){return this._shouldDebounceUndoRedo}clearCachedBrailleValues(){for(let e of this.getExpressionOrder())this.store.set(["expressions",e,"braille"],"")}getState(){return this.store.getState()}getPersistedState(){let{expressions:e,order:i,settings:r}=this.getState();return{expressions:{list:i.map(o=>{var n=e[o];return{id:n.id,latex:n.latex,displayAsFraction:n.displayAsFraction}})},settings:r}}setState(e){this.store.set(e),this._updateIndexes(),this.updateNextObjectId()}setStateFromAPI(e){let i=[],r={};e.expressions.list.forEach(o=>{i.push(o.id),r[o.id]={id:o.id,latex:o.latex,braille:"",type:"latex",displayAsFraction:!!o.displayAsFraction}}),this.setState({expressions:r,order:i,settings:e.settings,ui:{focus:void 0}})}canClear(){if(this.getNumberOfExpressions()>1)return!0;let e=this.getExpressionOrder()[0];return this.getExpressionLatex(e)!==""}clear(){this.setState({expressions:{1:{id:"1",type:"latex",latex:"",braille:"",displayAsFraction:!1}},ui:{focus:void 0},order:["1"],settings:this.getState().settings})}getExpressionOrder(){return this.store.getState().order}getNumberOfExpressions(){return this.getExpressionOrder().length}getExpressionById(e){return this.getState().expressions[e]}getExpressionIndex(e){return this._indexes[e]}_getExpressionByIndex(e){let i=this.getExpressionOrder()[e];return this.getExpressionById(i)}_updateIndexes(){this._indexes={};let e=0;for(let i of this.getExpressionOrder())this._indexes[i]=e,e+=1;this._evaluate()}_usesAnsById(e){return this.getExpressionById(e).latex.indexOf("\\operatorname{ans}")!==-1}_getPreviousExpById(e){let i=this.getExpressionIndex(e);return this._getExpressionByIndex(i-1)}createBlankAfterId(e){if(this.isSingleExpression()||!this.getExpressionById(e).latex)return;let i=this.getExpressionIndex(e),r=this.generateObjectId();this.store.shallowMutate("order",o=>{o.splice(i+1,0,r)}),this.store.shallowMutate("expressions",o=>{o[r]={id:r,latex:"",braille:"",type:"latex",displayAsFraction:!1}}),this._updateIndexes(),this.setFocusedById(r,!0)}conditionallyCopyPrevious(e){let i=this._getPreviousExpById(e),r=this.getExpressionById(e);i!=null&&r.latex===""&&this._usesAnsById(i.id)&&this.setLatexById(e,i.latex)}backspaceAtFrontOfId(e){if(this.getExpressionById(e).latex!==""||this.getNumberOfExpressions()===1)return;let r=this.getExpressionIndex(e);this.store.shallowMutate("order",o=>{o.splice(r,1)}),this.store.shallowMutate("expressions",o=>{delete o[e]}),this._updateIndexes(),this._setFocusedByIndex(Math.max(r-1,0),!0)}setLatexById(e,i){this.store.set(["expressions",e,"latex"],i),this.store.set(["expressions",e,"braille"],""),i===""&&this.setFractionEvaluation(e,!1),this._evaluate()}setLatexAndBrailleById(e,i,r){this.store.set(["expressions",e,"latex"],i),this.store.set(["expressions",e,"braille"],r),i===""&&this.setFractionEvaluation(e,!1),this._evaluate()}setFractionEvaluation(e,i){this.store.set(["expressions",e,"displayAsFraction"],i)}setLatexOfFocusedExpression(e){let i=this.getFocusedExpressionId();i&&this.setLatexById(i,e)}isExpressionFocused(e){return this.getFocusedExpressionId()===e}getExpressionLatex(e){return this.getExpressionById(e).latex}getExpressionError(e){let i=this._evaluations[e];return i?i.error:""}getExpressionValue(e){let i=this._evaluations[e];if(i)return i.value}getExpressionAns(e){let i=this._evaluations[e];if(i)return i.ans}getExpressionAnsId(e){let i=this._evaluations[e];if(i)return i.ansId}shouldShowEvaluationForExpression(e){let i=this._evaluations[e];return i?i.showEvaluation:!1}isRationalizableConstant(e){let i=this._evaluations[e];return i?i.isRationalizableConstant:!1}canDisplayEvaluationAsFraction(e){let i=this.getExpressionValue(e);return i?__dcg_shared_module_exports__['_a'](i):!1}_setFocusedByIndex(e,i){let r=this._getExpressionByIndex(e),o=this.store.getState().ui.focus,n=i?{type:"latex-expression",id:r.id}:void 0;if(!__dcg_shared_module_exports__['Ra'](o,n)){if(o){let a=o.id;this.store.deepMutate("expressions",s=>{var l=s[a];l&&(l.braille="")})}!i&&this.getFocusedExpressionId()!==r.id||this.store.shallowMutate("ui",a=>{a.focus=n})}}setFocusedById(e,i){let r=this.getExpressionIndex(e);this._setFocusedByIndex(r,i)}focusPrevById(e){let i=this.getExpressionIndex(e)-1;i>=0&&this._setFocusedByIndex(i,!0)}focusNextById(e){let i=this.getExpressionIndex(e)+1;i<this.getNumberOfExpressions()?this._setFocusedByIndex(i,!0):this.createAtEnd()}getFocusedExpression(){let e=this.getFocusedExpressionId();if(e)return this.getExpressionById(e)}getFocusedExpressionId(){let e=this.getState().ui.focus;return e&&e.id}clearFocusedExpression(){let e=this.getFocusedExpression();e&&this.setLatexById(e.id,"")}shouldShowClear(){if(this.getNumberOfExpressions()===1)return!1;let e=this.getFocusedExpression();return!!e&&!!e.latex}getLastExpression(){return this._getExpressionByIndex(this.getNumberOfExpressions()-1)}isLastExpressionEmpty(){return!!this.getLastExpression().latex}createAtEnd(){this.createBlankAfterId(this.getLastExpression().id)}focusLastExpression(){this._setFocusedByIndex(this.getNumberOfExpressions()-1,!0)}focusFirstExpression(){this._setFocusedByIndex(0,!0)}getDegreeMode(){return this.getState().settings.degreeMode}setDegreeMode(e){this.store.set(["settings","degreeMode"],!!e),this._evaluate()}_cleanupLatex(e){return e=__dcg_shared_module_exports__['fb'](e),e.substr(e.length-1)==="="&&(e=e.substr(0,e.length-1)),e}_evaluate(){this._evaluator.clearStatementsAndStartCompleteState(),this.getExpressionOrder().forEach(e=>this._evaluator.addStatement({id:e,index:this.getExpressionIndex(e),latex:this._cleanupLatex(this.getExpressionLatex(e)),shouldGraph:!1,type:"statement"}))}_setupEvaluator(){this._evaluator=new ep(this.workerPool),this._evaluator.readEvaluatorConfig=()=>({degreeMode:this.getDegreeMode(),evaluationMode:this.evaluationMode,additionalFunctions:this.additionalFunctions,functionDefinition:this.functionDefinition,replaceRoundWithReciprocal:this.replaceRoundWithReciprocal,actions:!1}),this._evaluator.onEvaluatorResults=e=>{let i=e.evaluationStates;this._evaluations={};for(let n in i){let a=i[n];if(!this.getExpressionById(n))continue;let l=a.constant_value;l===void 0&&a.zero_values&&a.zero_values.length&&(l=a.zero_values[0].val);let c=a.hasOwnProperty("constant_value")&&__dcg_shared_module_exports__['_a'](a.constant_value),p=!a.is_evaluable&&c,u=!!a.is_evaluable||p||Array.isArray(l);this._evaluations[n]={error:a.error,ans:void 0,ansId:void 0,value:l,showEvaluation:u,isRationalizableConstant:p}}let r,o;for(let n of this.getExpressionOrder()){let a=this._evaluations[n];if(r&&a){let s=r.value;typeof s=="number"?(a.ans=s,a.ansId=o):Array.isArray(s)&&(a.ans="[...]")}r=a,o=n}typeof this.onEvaluationUpdate=="function"&&this.onEvaluationUpdate()}}reloadState(){this.setState(this.getState())}getFunctionDefinition(){return!!this.functionDefinition}enableFunctionDefinition(){this.functionDefinition=!0,this.reloadState()}disableFunctionDefinition(){this.functionDefinition=!1,this.reloadState()}getReplaceRoundWithReciprocal(){return!!this.replaceRoundWithReciprocal}enableReplaceRoundWithReciprocal(){this.replaceRoundWithReciprocal=!0,this.reloadState()}disableReplaceRoundWithReciprocal(){this.replaceRoundWithReciprocal=!1,this.reloadState()}};hd();var qy=class{constructor(e,i){this.keyboardMode="main";this.fontSize=16;this.invertedColors=!1;this.backgroundColor="";this.textColor="";this.projectorMode=!1;this.capExpressionSize=!1;this.decimalToFraction=!0;this.settingsMenu=!0;this.settingsMenuOpen=!1;this.language="en";this.brailleMode="none";this.sixKeyInput=!1;this.brailleControls=!0;this.brailleExpressionDownload=!0;this.replaceCommaWith10Exp=!1;this.typingAsteriskWritesTimesSymbol=!1;this.stateStack=new Bc;this.dispatcher=new Hd;this.s=Dl(()=>this.language);this.dispatch=e=>{bf("dispatch",{type:e.type}),this.dispatcher.dispatch(e);let i;for(;i=this._queuedCallbacks.shift();)i()};this._queuedCallbacks=[];this.stateStack=new Bc,this.dispatcher=new Hd,this.options=e,this.model=new Ky({evaluationMode:this.options.evaluationMode,additionalFunctions:this.options.additionalFunctions,functionDefinition:this.options.functionDefinition,replaceRoundWithReciprocal:this.options.replaceRoundWithReciprocal,workerPool:i.workerPool}),this.model=this.model,this.model.setDegreeMode(e.degreeMode),this.setLanguage(e.language),this.setBrailleMode(e.brailleMode),this.setSixKeyInput(e.sixKeyInput),this.setBrailleControls(e.brailleControls),this.setBrailleExpressionDownload(e.brailleExpressionDownload),this.setReplaceCommaWith10Exp(e.replaceCommaWith10Exp),this.setReplaceRoundWithReciprocal(e.replaceRoundWithReciprocal),this.setTypingAsteriskWritesTimesSymbol(e.typingAsteriskWritesTimesSymbol),this.setProjectorMode(e.projectorMode),this.setCapExpressionSize(e.capExpressionSize),this.setDecimalToFraction(e.decimalToFraction),this.invertedColors=e.invertedColors,this.backgroundColor=e.backgroundColor,this.textColor=e.textColor,this.settingsMenu=e.settingsMenu,this.model.onEvaluationUpdate=()=>this.dispatch({type:"render"}),this.settingsProxy=i.settingsProxy,this.syncPublicSettings(),this.hookUpDispatcher(),this.containerSize={width:0,height:0}}runAfterDispatch(e){this._queuedCallbacks.push(e)}enqueueEvent(e){this.runAfterDispatch(()=>{this.onEventEmitted&&this.onEventEmitted(e)})}getFunctionDefinition(){return this.options.functionDefinition}getSettingsMenu(){return this.settingsMenu}getBrailleMode(){return this.brailleMode}renderAsBraille(){return this.brailleMode!=="none"}setBrailleMode(e){this.brailleMode=e}getSixKeyInput(){return this.sixKeyInput}setSixKeyInput(e){this.sixKeyInput=e}getBrailleControls(){return this.brailleControls}setBrailleControls(e){this.brailleControls=e}getBrailleExpressionDownload(){return this.brailleExpressionDownload}setBrailleExpressionDownload(e){this.brailleExpressionDownload=e}getRestrictedEditing(){return this.options.restrictedEditing}getKeyboardMode(){return this.keyboardMode}getFontSize(){return this.fontSize}getInvertedColors(){return this.invertedColors}hasBackgroundColor(){return this.getBackgroundColor()!=="#ffffff"}getBackgroundColor(){let e=__dcg_shared_module_exports__['jd'](this.backgroundColor||"#fff");return this.getInvertedColors()&&e!=="#ffffff"?__dcg_shared_module_exports__['md'](e):e}getTextColor(){let e=__dcg_shared_module_exports__['jd'](this.textColor||"#000");return this.getInvertedColors()&&e!=="#000000"?__dcg_shared_module_exports__['md'](e):e}getAdditionalFunctions(){return this.options.additionalFunctions}getTypingSlashWritesDivisionSymbol(){return this.options.typingSlashWritesDivisionSymbol}setTypingAsteriskWritesTimesSymbol(e){this.typingAsteriskWritesTimesSymbol=e}getTypingAsteriskWritesTimesSymbol(){return this.typingAsteriskWritesTimesSymbol}setProjectorMode(e){this.projectorMode=e}isProjectorMode(){return this.projectorMode}getReplaceCommaWith10Exp(){return this.replaceCommaWith10Exp}setReplaceCommaWith10Exp(e){this.replaceCommaWith10Exp=e}getReplaceRoundWithReciprocal(){return this.model.getReplaceRoundWithReciprocal()}setReplaceRoundWithReciprocal(e){e?this.model.enableReplaceRoundWithReciprocal():this.model.disableReplaceRoundWithReciprocal()}setCapExpressionSize(e){this.capExpressionSize=e}getCapExpressionSize(){return this.capExpressionSize}setDecimalToFraction(e){this.decimalToFraction=e}setLanguage(e){e!=="en"&&!Ov(e)?__dcg_shared_module_exports__['td'].warn(`Translation for '${e}' isn't currently available. Using '${this.language}' instead.`):this.language=e}getLanguage(){return this.language}getDecimalToFraction(){return this.decimalToFraction}isScientificCalc(){let e=this.options.evaluationMode;return e==="scientific"||e==="singleExpressionScientific"}isFourFunctionCalc(){return this.options.evaluationMode==="fourFunction"||this.options.evaluationMode==="singleExpressionFourFunction"}getAllowLinks(){return this.options.links}canUndo(){return this.stateStack.canUndo()}canRedo(){return this.stateStack.canRedo()}undo(e){if(!this.canUndo())return;this.stateStack.undo();let i=this.stateStack.getState();if(!e.restoreFocus){let r={focus:void 0};i=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},i),{ui:r})}this.model.setState(i),this.enqueueEvent("change")}redo(e){if(!this.canRedo())return;this.stateStack.redo();let i=this.stateStack.getState();if(!e.restoreFocus){let r={focus:void 0};i=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},i),{ui:r})}this.model.setState(i),this.enqueueEvent("change")}clearHistory(){this.stateStack.clear()}canBackspace(){let e=this.model.getFocusedExpression();return e&&(e.latex.length>0||this.model.getNumberOfExpressions()>1)}focusLastExpression(){this.model.focusLastExpression()}shouldRender(){return this.containerSize.width>0&&this.containerSize.height>0}canClear(){return this.model.canClear()}shouldShowClear(){return this.model.shouldShowClear()}enableSettingsMenu(){this.settingsMenu=!0}disableSettingsMenu(){this.closeSettingsMenu(),this.settingsMenu=!1}closeSettingsMenu(){this.settingsMenuOpen=!1}toggleSettingsMenu(){this.settingsMenuOpen=!this.settingsMenuOpen}isSettingsMenuOpen(){return this.settingsMenuOpen}isLastExpressionEmpty(){return this.model.isLastExpressionEmpty()}createAtEnd(){this.model.createAtEnd()}clearFocusedExpression(){this.model.clearFocusedExpression()}setLatexById(e,i){this.model.setLatexById(e,i)}setLatexAndBrailleById(e,i,r){this.model.setLatexAndBrailleById(e,i,r)}setLatexOfFocusedExpression(e){this.model.setLatexOfFocusedExpression(e)}toggleFractionEvaluationById(e){this.model.setFractionEvaluation(e,!this.model.getExpressionById(e).displayAsFraction)}conditionallyCopyPrevious(e){this.model.conditionallyCopyPrevious(e)}createBlankAfterId(e){this.model.createBlankAfterId(e)}backspaceAtFrontOfId(e){this.model.backspaceAtFrontOfId(e)}areStatesDifferentEnoughForUndoRedo(e,i){let r={focus:void 0};return __dcg_shared_module_exports__['Ra'](__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},e),{ui:r}),__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},i),{ui:r}))}commitUndoRedoDebounced(){let e=this.model.getState(),i=this.stateStack.getState();if(this.areStatesDifferentEnoughForUndoRedo(e,i))return;let r=new Date().getTime();r-this._lastDebouncedTime<1e3?this.stateStack.replaceState(e):this.stateStack.addState(e),this._lastDebouncedTime=r,this.enqueueEvent("change")}commitUndoRedoSynchronously(){let e=this.model.getState(),i=this.stateStack.getState();this.areStatesDifferentEnoughForUndoRedo(e,i)||(this._lastDebouncedTime=0,this.stateStack.addState(e),this.enqueueEvent("change"))}updateKeyboardMode(e){this.keyboardMode=e}getFocusedMathquill(){if(this.model.getFocusedExpressionId())return Se.getFocusedMathquill()}ensureMathquillIsFocusedAndReturnFocusedMathquill(){let e=this.getFocusedMathquill();return e||(this.isLastExpressionEmpty()&&!this.model.isSingleExpression()?this.createAtEnd():this.focusLastExpression(),this.onEventEmitted&&this.onEventEmitted("render"),this.getFocusedMathquill())}typeIntoFocusedMathquill(e){e=e.replace(/\r|\n/g,"");let i=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();i&&Se.canAcceptText(i,this.getCapExpressionSize(),e)&&(i.typedText(e),this.setLatexOfFocusedExpression(i.latex()),this.model.markShouldDebounceUndoRedo())}pressKeyInFocusedMathquill(e,i){if(this.getBrailleMode()!=="none")return;let r=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();r&&(e==="Up"||e==="Down"||e==="Left"||e==="Right"?Se.applyArrowKeyAndReturnIfWasAtBounds(r,e,i)&&this.moveFocusInDirection(e):e==="Enter"?(i&&(i.preventDefault(),i.stopPropagation()),this.handleEnter()):e==="Backspace"?this.attemptToMoveFocusWithBackspace()||(r.keystroke(e,i),this.setLatexOfFocusedExpression(r.latex())):e==="Delete"?(r.keystroke(e,i),this.setLatexOfFocusedExpression(r.latex())):(r.keystroke(e,i),this.setLatexOfFocusedExpression(r.latex())))}moveFocusInDirection(e){let i=this.model.getFocusedExpressionId();i&&(e==="Up"?this.model.focusPrevById(i):e==="Down"&&this.model.focusNextById(i))}handleEnter(){if(this.model.isSingleExpression())return;let e=this.model.getFocusedExpressionId();e&&(this.conditionallyCopyPrevious(e),this.createBlankAfterId(e))}attemptToMoveFocusWithBackspace(){let e=this.model.getFocusedExpression();if(!e)return!1;let{latex:i,id:r}=e;return i===""?(this.backspaceAtFrontOfId(r),!0):!1}executeCommandInFocusedMathquill(e){let i=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();i&&(Ng(i,e,{capExpressionSize:this.getCapExpressionSize()}),this.setLatexOfFocusedExpression(i.latex()))}syncPublicSettings(){this.settingsProxy.setProperty("language",this.language),this.settingsProxy.setProperty("fontSize",this.fontSize),this.settingsProxy.setProperty("degreeMode",this.model.getDegreeMode()),this.settingsProxy.setProperty("invertedColors",this.invertedColors),this.settingsProxy.setProperty("backgroundColor",this.backgroundColor),this.settingsProxy.setProperty("textColor",this.textColor),this.settingsProxy.setProperty("brailleMode",this.brailleMode),this.settingsProxy.setProperty("sixKeyInput",this.sixKeyInput),this.settingsProxy.setProperty("brailleControls",this.brailleControls),this.settingsProxy.setProperty("brailleExpressionDownload",this.brailleExpressionDownload),this.settingsProxy.setProperty("projectorMode",this.projectorMode),this.settingsProxy.setProperty("capExpressionSize",this.capExpressionSize),this.settingsProxy.setProperty("decimalToFraction",this.decimalToFraction),this.settingsProxy.setProperty("qwertyKeyboard",this.options.qwertyKeyboard),this.settingsProxy.setProperty("links",this.options.links),this.settingsProxy.setProperty("settingsMenu",this.settingsMenu),this.settingsProxy.setProperty("functionDefinition",this.model.getFunctionDefinition()),this.settingsProxy.setProperty("replaceCommaWith10Exp",this.replaceCommaWith10Exp),this.settingsProxy.setProperty("replaceRoundWithReciprocal",this.model.getReplaceRoundWithReciprocal()),this.settingsProxy.setProperty("typingAsteriskWritesTimesSymbol",this.typingAsteriskWritesTimesSymbol)}hookUpDispatcher(){this.dispatcher.register(e=>{this.enqueueEvent("render");let i=!1,r=this.getRestrictedEditing();switch(e.type){case"update-options":{this.options=__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},this.options),e.options);break}case"keypad/shift":{let s;switch(this.keyboardMode){case"qwerty":s="capitalQwerty";break;case"capitalQwerty":s="qwerty";break;case"letters":s="capitalLetters";break;case"capitalLetters":s="letters";break;default:s="qwerty"}this.updateKeyboardMode(s)}break;case"undo":r||(this.undo({restoreFocus:e.source==="keyboard-shortcut"}),i=!0);break;case"redo":r||(this.redo({restoreFocus:e.source==="keyboard-shortcut"}),i=!0);break;case"clear-history":this.clearHistory();break;case"set-state-from-api":e.opts.allowUndo||this.clearHistory(),this.model.setStateFromAPI(e.state);break;case"main":this.updateKeyboardMode("main");break;case"ABC":this.options.qwertyKeyboard?this.updateKeyboardMode("qwerty"):this.updateKeyboardMode("letters");break;case"functions":this.updateKeyboardMode("functions");break;case"degrees":this.model.setDegreeMode(!this.model.getDegreeMode());break;case"update-degree-mode":this.model.setDegreeMode(!!e.mode);break;case"update-font-size":var o=e.size;if(typeof o!="number"&&(o=parseInt(o,10)),isNaN(o))return;this.fontSize=o;break;case"update-inverted-colors":this.invertedColors=!!e.mode;break;case"update-background-color":this.backgroundColor=e.color;break;case"update-text-color":this.textColor=e.color;break;case"update-projector-mode":this.setProjectorMode(!!e.mode);break;case"update-cap-expression-size":this.setCapExpressionSize(!!e.mode);break;case"update-decimal-to-fraction":this.setDecimalToFraction(!!e.mode);break;case"update-language":this.setLanguage(e.language);break;case"set-blank":e.opts.allowUndo||this.clearHistory(),this.model.clear(),this.focusLastExpression();break;case"clear":this.model.clearFocusedExpression();break;case"set-braille-mode":let n=e.mode;n!=="nemeth"&&n!=="ueb"&&n!=="none"?__dcg_shared_module_exports__['td'].warn(`Valid Braille modes are 'nemeth', 'none', and 'ueb'. You passed '${n}'.`):(this.model.clearCachedBrailleValues(),this.setBrailleMode(e.mode));break;case"set-six-key-input":this.setSixKeyInput(!!e.mode);break;case"set-braille-controls":this.setBrailleControls(!!e.value);break;case"set-braille-expression-download":this.setBrailleExpressionDownload(!!e.mode);break;case"set-replace-comma-with-10-exp":this.setReplaceCommaWith10Exp(!!e.replace);break;case"set-replace-round-with-reciprocal":this.setReplaceRoundWithReciprocal(!!e.replace);break;case"set-typing-asterisk-writes-times-symbol":this.setTypingAsteriskWritesTimesSymbol(!!e.mode);break;case"update-latex":this.model.markShouldDebounceUndoRedo(),this.setLatexById(e.id,e.latex);break;case"update-latex-from-braille":this.model.markShouldDebounceUndoRedo(),this.setLatexAndBrailleById(e.id,e.latex,e.braille);break;case"focusin":this.model.setFocusedById(e.id,!0);break;case"focusout":this.model.setFocusedById(e.id,!1);break;case"focus-first-expression":this.model.focusFirstExpression();break;case"focus-prev-expression":this.moveFocusInDirection("Up");break;case"focus-next-expression":this.moveFocusInDirection("Down");break;case"focus-last-expression":this.model.focusLastExpression();break;case"insert-blank-expression":this.handleEnter();break;case"backspace-from-braille":this.attemptToMoveFocusWithBackspace();break;case"keypad/type-text":this.typeIntoFocusedMathquill(e.text);break;case"keypad/press-key":this.pressKeyInFocusedMathquill(e.key,e.evt);break;case"keypad/custom-command":this.executeCommandInFocusedMathquill(e.command);break;case"keypad/123":case"keypad/abc":case"keypad/audio-trace":break;case"enable-settings-menu":this.enableSettingsMenu();break;case"disable-settings-menu":this.disableSettingsMenu();break;case"toggle-settings-menu":this.toggleSettingsMenu();break;case"close-settings-menu":this.closeSettingsMenu();break;case"render":break;case"ui/container-resized":this.containerSize=e.size;break;case"toggle-fraction-evaluation":this.toggleFractionEvaluationById(e.id);break;default:return e}this.runAfterDispatch(()=>this.syncPublicSettings()),i||(this.model.getShouldDebounceUndoRedo()?(this.commitUndoRedoDebounced(),this.model.clearShouldDebounceUndoRedo()):this.commitUndoRedoSynchronously())})}getMathquillConfig(){let e=this.getAdditionalFunctions(),i=this.isFourFunctionCalc()&&(!e||e.indexOf("fraction")===-1);return{typingAsteriskWritesTimesSymbol:this.getTypingAsteriskWritesTimesSymbol(),typingSlashWritesDivisionSymbol:this.getTypingSlashWritesDivisionSymbol(),disableCopyPaste:this.getRestrictedEditing(),autoCommands:pl({disallowFrac:i}),autoOperatorNames:sa()}}};var Bt=__dcg_shared_module_exports__['h'](j());var R5=__dcg_shared_module_exports__['h'](j()),Ot=class extends R5.Class{init(){this.controller=this.props.controller(),this.model=this.controller.model,this.dispatch=this.controller.dispatch,this.s=this.controller.s}};var ar=__dcg_shared_module_exports__['h'](j());var ku=__dcg_shared_module_exports__['h'](j());var za=class extends Yc{template(){return ku.createElement("div",{class:ku.const("dcg-keypad-control-bar dcg-do-not-blur"),role:ku.const("group"),"aria-label":()=>this.controller.s("shared-calculator-narration-keypad-controlbar")},ku.createElement("div",{class:ku.const("dcg-keypad-control-bar-contents")},this.children))}};var bm=__dcg_shared_module_exports__['h'](j()),fi=class extends bm.Class{template(){return bm.createElement("div",{class:()=>({"dcg-keypad-control-btn":!0,"dcg-disabled":this.isDisabled(),"dcg-selected":!this.isDisabled()&&this.isSelected(),"dcg-selectable-btn":!this.isDisabled()&&this.isSelectable(),"dcg-narrow-control-btn":this.props.narrowButton&&this.props.narrowButton()}),didMount:this.bindFn(this.didMount),role:bm.const("button"),"aria-disabled":()=>this.isDisabled()||void 0,"aria-label":()=>this.getAriaLabel(),"dcg-command":this.props.command,onTap:this.bindFn(this.handleTap),"aria-pressed":()=>!this.hasPopup()&&!this.isDisabled()&&this.isSelectable()?this.isSelected():void 0,"aria-expanded":()=>this.hasPopup()&&!this.isDisabled()?this.isSelected():void 0,tabindex:this.bindFn(this.getTabIndex)},this.children)}getTabIndex(){if(!this.isDisabled())return this.props.ignoreInTabOrder&&this.props.ignoreInTabOrder()?-1:0}handleTap(e){this.isDisabled()||this.props.onTap(e)}getAriaLabel(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()}hasPopup(){return this.props.ariaPopup?this.props.ariaPopup():!1}isDisabled(){return this.props.disabled?this.props.disabled():!1}isSelected(){return this.props.selected?this.props.selected():!1}isSelectable(){return this.props.selectable?this.props.selectable():!1}didMount(e){this.props.didMount&&this.props.didMount(e)}};var hs=__dcg_shared_module_exports__['h'](j());var zt=__dcg_shared_module_exports__['h'](j());Tt();var Jl=__dcg_shared_module_exports__['h'](j());function sj(){if(!jG)return!1;let t=navigator.userAgent.match(/Version\/(\d+)/);return!t||!t[1]?!1:parseFloat(t[1])<11}function N5(){return!YG&&!sj()&&typeof document.createElement("a").download!="undefined"}function B5(){return N5()||navigator.msSaveBlob!==void 0}var zy=class extends Jl.Class{init(){this.supportsDirectDownload=N5()}template(){return Jl.createElement("a",{role:Jl.const("button"),tabindex:()=>this.props.enabled()?0:-1,"aria-disabled":()=>!this.props.enabled(),class:()=>({"dcg-download-button":!0,"dcg-disabled":!this.props.enabled(),"dcg-braille-equations":this.props.isBraille,"dcg-svg-button":this.props.isSvg}),didMount:this.bindFn(this.didMountDownload),didUnmount:this.bindFn(this.didUnmountDownload),didUpdate:this.bindFn(this.didUpdate),download:()=>this.supportsDirectDownload?this.props.filename():void 0,onTap:e=>{if(this.supportsDirectDownload||!navigator.msSaveOrOpenBlob)return;let i=this.props.data();i&&(navigator.msSaveOrOpenBlob(i,this.props.filename()),e.preventDefault())}},Jl.createElement("i",{class:Jl.const("dcg-icon-download"),"aria-hidden":Jl.const("true")}),Jl.createElement("span",null,()=>this.props.text()))}didMountDownload(e){this.downloadLink=e,this.didUpdate()}didUnmountDownload(){this.revokeBlobURL()}didUpdate(){this.updateDownloadURL(),this.cachedObjectURL&&(this.downloadLink.href=this.cachedObjectURL)}updateDownloadURL(){if(this.revokeBlobURL(),!this.supportsDirectDownload)return;let e=this.props.data();e&&(this.cachedObjectURL=URL.createObjectURL(e))}revokeBlobURL(){this.cachedObjectURL&&URL.revokeObjectURL(this.cachedObjectURL)}};function sD(t,e,i=!1){if(i&&(t=t.replace(/ /g,"\\ ")),e==="none")return t;let r=e==="nemeth"?_c(t):Fc(t);return r.isError?"":hn.toBrailleAscii(r.value)}function K5(t,e){if(e==="none")return"";let i=[];i.push(sD("Expression List",e,!0)),i.push(""),i.push("");for(let r of t.getExpressionOrder()){let o=lj(t.getExpressionIndex(r)+1,e),n=t.getExpressionLatex(r),a=t.getExpressionValue(r);a!==void 0&&(n+=`=${a}`),i.push(`${o}  ${sD(n,e,!1)}`)}return i.join(`
`)}function lj(t,e){let i=""+t;return e==="nemeth"?`${sD(i,e,!1)}_4`:e==="ueb"?sD(`${i}.`,e,!1):""}var{If:lD}=zt.Components,cD=class extends Ot{template(){return zt.createElement("div",{class:()=>({"dcg-settings-dropdown":!0,"dcg-popover":!0,"dcg-has-background-color":this.controller.hasBackgroundColor(),"dcg-point-left":this.controller.containerSize.height<=420}),role:zt.const("region"),"aria-label":zt.const("Settings Menu"),didMount:this.bindFn(this.didMountSettingsDropdown),didUnmount:this.bindFn(this.didUnmountSettingsDropdown)},zt.createElement("div",{class:zt.const("dcg-popover-interior"),style:()=>({background:this.controller.getBackgroundColor()})},zt.createElement("div",{class:()=>({"dcg-settings-menu-option":!0,"dcg-displaysize-container":!0})},zt.createElement(Ni,{ariaGroupLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size"),staticConfig:this.bindFn(this.getProjectorModeOptions)})),zt.createElement($e,{onChange:this.bindFn(this.onToggleInvertedColors),checked:()=>this.controller.getInvertedColors(),class:this.const("dcg-settings-menu-option dcg-do-not-blur dcg-reverse-contrast")},zt.createElement("span",{class:zt.const("dcg-checkbox-label")},()=>this.controller.s("basic-calculator-label-reverse-contrast"))),zt.createElement(lD,{predicate:()=>this.controller.getBrailleControls()},()=>zt.createElement("div",null,zt.createElement($e,{onChange:this.bindFn(this.onToggleBrailleMode),checked:()=>this.controller.renderAsBraille(),class:this.const("dcg-settings-menu-option dcg-do-not-blur dcg-braille-mode")},zt.createElement("span",{class:zt.const("dcg-checkbox-label")},()=>this.controller.s("shared-calculator-narration-braille-mode"))),zt.createElement(lD,{predicate:()=>this.controller.renderAsBraille()},()=>zt.createElement("div",{class:()=>({"dcg-settings-menu-option":!0,"dcg-braille-container":!0})},zt.createElement(Ni,{ariaGroupLabel:()=>this.controller.s("shared-calculator-narration-braille-mode"),staticConfig:this.bindFn(this.getBrailleOptions)}),zt.createElement("div",{class:zt.const("dcg-braille-options-container")},zt.createElement($e,{onChange:()=>this.onToggleSixKeyInput(),checked:()=>this.controller.getSixKeyInput(),class:this.const("dcg-settings-menu-option dcg-do-not-blur dcg-six-key-checkbox")},zt.createElement("span",{class:zt.const("dcg-checkbox-label")},()=>this.controller.s("basic-calculator-label-six-key-input"))),zt.createElement("a",{href:zt.const("https://www.desmos.com/accessibility#braille"),class:zt.const("dcg-six-key-info"),target:zt.const("_blank")},zt.createElement("i",{class:zt.const("dcg-icon-question-sign"),"aria-hidden":zt.const("true")})),zt.createElement(lD,{predicate:()=>!XD&&B5()&&this.controller.getBrailleExpressionDownload()},()=>zt.createElement(zy,{data:()=>{let e=K5(this.model,this.controller.getBrailleMode());return new Blob([e],{type:"text/plain"})},enabled:this.const(!0),filename:this.const("desmos-equations.brl"),text:()=>this.controller.s("basic-calculator-link-download-braille-equations"),isBraille:this.const(!0)}))))))),zt.createElement(lD,{predicate:()=>!!this.getVersionNumber()},()=>zt.createElement("div",{class:zt.const("dcg-version-number")},zt.const("Version: "),()=>this.getVersionNumber()))))}getBrailleOptions(){return[{key:"nemeth",label:()=>this.controller.s("shared-calculator-button-braille-mode-nemeth"),selected:()=>this.isNemeth(),onSelect:()=>this.setBrailleMode("nemeth")},{key:"ueb",label:()=>this.controller.s("shared-calculator-button-braille-mode-ueb"),selected:()=>!this.isNemeth(),onSelect:()=>this.setBrailleMode("ueb")}]}setBrailleMode(e){this.controller.dispatch({type:"set-braille-mode",mode:e})}getProjectorModeOptions(){return[{key:"default",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-default"),class:()=>"dcg-displaysize-default",selected:()=>!this.getProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!1)},{key:"large",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-large"),class:()=>"dcg-displaysize-large",selected:()=>this.getProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!0)}]}onSelectProjectorModeOption(e){this.controller.dispatch({type:"update-projector-mode",mode:e})}getVersionNumber(){let e=window;if(e&&e.AppBridge)return e.AppBridge.versionNumber}didUnmountSettingsDropdown(){H(document).off(".dcg-settings-view")}didMountSettingsDropdown(e){this.settingsGroupNode=e,H(document).on("dcg-tapstart.dcg-settings-view",i=>{i.target.closest(".dcg-basic-settings-container")||this.controller.dispatch({type:"close-settings-menu"})}),H(document).on("keydown.dcg-settings-view",i=>{if(be(i)==="Esc"&&(this.controller.dispatch({type:"close-settings-menu"}),this.controller.dispatch({type:"focus-last-expression"})),be(i)==="Tab"&&!i.altKey&&!i.metaKey&&!i.ctrlKey){let r=document.activeElement,o=this.props.settingsButtonNode(),n=[...this.settingsGroupNode.querySelectorAll(".dcg-settings-menu-option")].slice(-1)[0];!i.shiftKey&&r===n?(o.focus(),i.preventDefault(),i.stopPropagation()):i.shiftKey&&r===o&&(n.focus(),i.preventDefault(),i.stopPropagation())}})}onToggleBrailleMode(){this.controller.dispatch({type:"set-braille-mode",mode:this.controller.renderAsBraille()?"none":"nemeth"})}isNemeth(){return this.controller.getBrailleMode()==="nemeth"}isUEB(){return this.controller.getBrailleMode()==="ueb"}isLatex(){return this.controller.getBrailleMode()==="none"}onToggleSixKeyInput(){let e=!this.controller.getSixKeyInput();this.controller.dispatch({type:"set-six-key-input",mode:e})}onToggleInvertedColors(){let e=!this.controller.getInvertedColors();this.controller.dispatch({type:"update-inverted-colors",mode:e})}getProjectorMode(){return this.controller.isProjectorMode()}};var{If:dj}=hs.Components,ym=class extends Ot{template(){let t=this.props.controller();return hs.createElement("div",{class:hs.const("dcg-basic-settings-container")},hs.createElement(fi,{didMount:e=>this.settingsButtonNode=e,command:this.const("settings"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-settings"),onTap:this.bindFn(this.onToggleSettingsMenu),selected:()=>this.controller.isSettingsMenuOpen(),ariaPopup:this.const(!0)},hs.createElement("i",{class:hs.const("dcg-icon-wrench"),"aria-hidden":hs.const("true")})),hs.createElement(dj,{predicate:()=>this.controller.isSettingsMenuOpen()},()=>hs.createElement(cD,{controller:this.props.controller,settingsButtonNode:()=>this.settingsButtonNode})))}onToggleSettingsMenu(){this.controller.dispatch({type:"toggle-settings-menu"})}};var{If:Uy,IfElse:pj}=ar.Components,dD=class extends Ot{template(){let t=this.props.controller();return ar.createElement(za,{controller:this.props.controller},ar.createElement(Uy,{predicate:()=>!this.controller.getRestrictedEditing()},()=>ar.createElement(fi,{command:this.const("undo"),disabled:()=>!t.canUndo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-undo"),onTap:e=>t.dispatch({type:"undo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},ar.createElement("i",{class:ar.const("dcg-icon-undo"),"aria-hidden":ar.const("true")}))),ar.createElement(Uy,{predicate:()=>!this.controller.getRestrictedEditing()},()=>ar.createElement(fi,{command:this.const("redo"),disabled:()=>!t.canRedo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-redo"),onTap:e=>t.dispatch({type:"redo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},ar.createElement("i",{class:ar.const("dcg-icon-redo"),"aria-hidden":ar.const("true")}))),pj(()=>t.shouldShowClear(),{true:()=>ar.createElement(fi,{command:this.const("clear"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-clear"),onTap:()=>t.dispatch({type:"clear"})},()=>t.s("basic-calculator-button-controlbar-clear")),false:()=>ar.createElement(fi,{command:this.const("clearall"),disabled:()=>!t.canClear(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-clear-all"),onTap:()=>t.dispatch({type:"set-blank",opts:{allowUndo:!0}})},()=>t.s("basic-calculator-button-controlbar-clear-all"))}),ar.createElement(Uy,{predicate:()=>this.controller.getRestrictedEditing()},()=>ar.createElement("div",{class:ar.const("dcg-spacer-2")})),ar.createElement(Uy,{predicate:()=>t.getBrailleMode()==="none"},()=>ar.createElement(fi,{command:this.const("backspace"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-backspace"),disabled:()=>!t.canBackspace(),onTap:()=>t.dispatch({type:"keypad/press-key",key:"Backspace"})},ar.createElement("i",{class:ar.const("dcg-icon-delete"),"aria-hidden":ar.const("true")}))),ar.createElement(Uy,{predicate:()=>this.props.controller().getSettingsMenu()},()=>ar.createElement(ym,{controller:this.props.controller})))}onToggleSettingsMenu(){this.controller.dispatch({type:"toggle-settings-menu"})}};var Lr=__dcg_shared_module_exports__['h'](j());var{If:pD}=Lr.Components,uD=class extends Ot{template(){let t=this.props.controller();return Lr.createElement(za,{controller:this.props.controller},Lr.createElement(pD,{predicate:()=>!this.controller.getRestrictedEditing()},()=>Lr.createElement(fi,{command:this.const("undo"),disabled:()=>!t.canUndo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-undo"),onTap:e=>t.dispatch({type:"undo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},Lr.createElement("i",{class:Lr.const("dcg-icon-undo"),"aria-hidden":Lr.const("true")}))),Lr.createElement(pD,{predicate:()=>!this.controller.getRestrictedEditing()},()=>Lr.createElement(fi,{command:this.const("redo"),disabled:()=>!t.canRedo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-redo"),onTap:e=>t.dispatch({type:"redo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},Lr.createElement("i",{class:Lr.const("dcg-icon-redo"),"aria-hidden":Lr.const("true")}))),Lr.createElement(fi,{command:this.const("clear"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-clear"),onTap:()=>t.dispatch({type:"clear"})},()=>t.s("basic-calculator-button-controlbar-clear")),Lr.createElement(pD,{predicate:()=>this.controller.getRestrictedEditing()},()=>Lr.createElement("div",{class:Lr.const("dcg-spacer-2")})),Lr.createElement(pD,{predicate:()=>t.getBrailleMode()==="none"},()=>Lr.createElement(fi,{command:this.const("backspace"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-backspace"),disabled:()=>!t.canBackspace(),onTap:()=>t.dispatch({type:"keypad/press-key",key:"Backspace"})},Lr.createElement("i",{class:Lr.const("dcg-icon-delete"),"aria-hidden":Lr.const("true")}))))}};var zr=__dcg_shared_module_exports__['h'](j());var Xs=__dcg_shared_module_exports__['h'](j());var Iu=class extends Yc{template(){return Xs.createElement("div",{class:()=>({"dcg-keypad-control-toggle":!0,"dcg-toggled":this.props.toggled()}),role:Xs.const("button"),tabindex:Xs.const("0"),"aria-label":this.bindFn(this.getAriaLabel),onTap:this.bindFn(this.handleTap)},Xs.createElement("div",{class:Xs.const("dcg-ctrl-toggle-option")},this.props.defaultOption),Xs.createElement("div",{class:Xs.const("dcg-ctrl-toggle-option")},this.props.toggledOption),Xs.createElement("div",{class:Xs.const("dcg-ctrl-toggle-cover"),style:()=>({background:__dcg_shared_module_exports__['ld'](this.controller.getBackgroundColor(),-.1)})}))}getAriaLabel(){let e={toggled:this.props.toggledAriaLabel(),default:this.props.defaultAriaLabel()};return this.props.toggled()?this.controller.s("shared-calculator-narration-control-toggle-switch-to-default",e):this.controller.s("shared-calculator-narration-control-toggle-switch-to-toggled",e)}handleTap(){this.props.toggled()?le(this.props.defaultAriaLabel()):le(this.props.toggledAriaLabel()),this.props.onTap(this.props.command())}};var{If:LM,IfElse:uj}=zr.Components,hD=class extends Ot{template(){let t=this.props.controller();return zr.createElement(za,{controller:this.props.controller},zr.createElement(fi,{command:this.const("main"),selected:()=>t.getKeyboardMode()==="main",disabled:()=>this.controller.renderAsBraille(),ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:()=>t.dispatch({type:"main"}),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-main")},()=>t.s("basic-calculator-button-controlbar-main")),zr.createElement(fi,{command:this.const("ABC"),selected:()=>["qwerty","capitalQwerty","letters"].indexOf(t.getKeyboardMode())!==-1,disabled:()=>this.controller.renderAsBraille(),ignoreInTabOrder:this.const(!0),selectable:this.const(!0),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-abc"),onTap:()=>t.dispatch({type:"ABC"})},()=>t.s("basic-calculator-button-controlbar-abc")),zr.createElement(fi,{command:this.const("functions"),selected:()=>["functions","restrictedFunctions"].indexOf(t.getKeyboardMode())!==-1,ariaLabel:()=>t.s("basic-calculator-narration-controlbar-functions"),disabled:()=>this.controller.renderAsBraille(),ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:()=>t.dispatch({type:"functions"})},()=>t.s("basic-calculator-button-controlbar-func")),zr.createElement(Iu,{command:this.const("degrees"),toggled:()=>this.model.getDegreeMode(),defaultOption:()=>t.s("basic-calculator-label-controlbar-rad"),toggledOption:()=>t.s("basic-calculator-label-controlbar-deg"),defaultAriaLabel:()=>t.s("basic-calculator-narration-controlbar-radians"),toggledAriaLabel:()=>t.s("basic-calculator-narration-controlbar-degrees"),onTap:()=>t.dispatch({type:"degrees"}),controller:this.props.controller}),zr.createElement(LM,{predicate:()=>!this.controller.getRestrictedEditing()},()=>zr.createElement(fi,{command:this.const("undo"),disabled:()=>!t.canUndo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-undo"),onTap:e=>t.dispatch({type:"undo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},zr.createElement("i",{class:zr.const("dcg-icon-undo"),"aria-hidden":zr.const("true")}))),zr.createElement(LM,{predicate:()=>!this.controller.getRestrictedEditing()},()=>zr.createElement(fi,{command:this.const("redo"),disabled:()=>!t.canRedo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-redo"),onTap:e=>t.dispatch({type:"redo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},zr.createElement("i",{class:zr.const("dcg-icon-redo"),"aria-hidden":zr.const("true")}))),uj(()=>t.shouldShowClear(),{true:()=>zr.createElement(fi,{command:this.const("clear"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-clear"),onTap:()=>t.dispatch({type:"clear"})},()=>t.s("basic-calculator-button-controlbar-clear")),false:()=>zr.createElement(fi,{command:this.const("clearall"),disabled:()=>!t.canClear(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-clear-all"),onTap:()=>t.dispatch({type:"set-blank",opts:{allowUndo:!0}})},()=>t.s("basic-calculator-button-controlbar-clear-all"))}),zr.createElement(LM,{predicate:()=>this.props.controller().getSettingsMenu()},()=>zr.createElement(ym,{controller:this.props.controller})))}};var wr=__dcg_shared_module_exports__['h'](j());var{If:q5}=wr.Components,gD=class extends Ot{template(){let t=this.props.controller();return wr.createElement(za,{controller:this.props.controller},wr.createElement(Iu,{command:this.const("degrees"),toggled:()=>this.model.getDegreeMode(),defaultOption:()=>t.s("basic-calculator-label-controlbar-rad"),toggledOption:()=>t.s("basic-calculator-label-controlbar-deg"),defaultAriaLabel:()=>t.s("basic-calculator-narration-controlbar-radians"),toggledAriaLabel:()=>t.s("basic-calculator-narration-controlbar-degrees"),onTap:()=>t.dispatch({type:"degrees"}),controller:this.props.controller}),wr.createElement("div",{class:wr.const("dcg-spacer")}),wr.createElement(q5,{predicate:()=>!this.controller.getRestrictedEditing()},()=>wr.createElement(fi,{command:this.const("undo"),disabled:()=>!t.canUndo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-undo"),onTap:e=>t.dispatch({type:"undo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},wr.createElement("i",{class:wr.const("dcg-icon-undo"),"aria-hidden":wr.const("true")}))),wr.createElement(q5,{predicate:()=>!this.controller.getRestrictedEditing()},()=>wr.createElement(fi,{command:this.const("redo"),disabled:()=>!t.canRedo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-redo"),onTap:e=>t.dispatch({type:"redo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},wr.createElement("i",{class:wr.const("dcg-icon-redo"),"aria-hidden":wr.const("true")}))),wr.createElement("div",{class:wr.const("dcg-spacer")}),wr.createElement(fi,{narrowButton:this.const(!0),command:this.const("clear"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-clear"),onTap:()=>t.dispatch({type:"clear"})},()=>t.s("basic-calculator-button-controlbar-clear")),wr.createElement(fi,{narrowButton:this.const(!0),command:this.const("backspace"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-backspace"),onTap:()=>t.dispatch({type:"keypad/press-key",key:"Backspace"})},wr.createElement("i",{class:wr.const("dcg-icon-delete"),"aria-hidden":wr.const("true")})))}};var Xl=__dcg_shared_module_exports__['h'](j());var Hy=class extends Ot{template(){return Xl.createElement("div",{role:Xl.const("region"),"aria-label":()=>this.s("shared-calculator-narration-keypad")},Xl.createElement(kt,{controller:this.props.controller},Xl.createElement(xe,null,x(this,"(",{colspan:this.parenColspan()}),x(this,")",{colspan:this.parenColspan()}),this.makeAdditionalFunctionKey(0),this.makeAdditionalFunctionKey(1),x(this,"division")),Xl.createElement(xe,null,x(this,"7",{style:"highlight"}),x(this,"8",{style:"highlight"}),x(this,"9",{style:"highlight"}),x(this,"multiplication")),Xl.createElement(xe,null,x(this,"4",{style:"highlight"}),x(this,"5",{style:"highlight"}),x(this,"6",{style:"highlight"}),x(this,"-")),Xl.createElement(xe,null,x(this,"1",{style:"highlight"}),x(this,"2",{style:"highlight"}),x(this,"3",{style:"highlight"}),x(this,"+")),Xl.createElement(xe,null,x(this,"0",{style:"highlight"}),x(this,".",{style:"highlight"}),x(this,"ans"),x(this,"enter",{style:"blue"}))))}parenColspan(){return this.controller.getAdditionalFunctions().length>1?.5:1}makeAdditionalFunctionKey(e){let i=this.controller.getAdditionalFunctions()[e];return i==="exponent"?x(this,"a^b"):i==="percent"?x(this,"%"):i==="sqrt"?x(this,"sqrt"):i==="fraction"?x(this,"a/b"):void 0}};var Ql=__dcg_shared_module_exports__['h'](j());var Wy=class extends Ot{template(){return Ql.createElement("div",{role:Ql.const("region"),"aria-label":()=>this.s("shared-calculator-narration-keypad")},Ql.createElement(kt,{controller:this.props.controller},Ql.createElement(xe,null,x(this,"(",{colspan:this.parenColspan()}),x(this,")",{colspan:this.parenColspan()}),this.makeAdditionalFunctionKey(1)),Ql.createElement(xe,null,x(this,"7",{style:"highlight"}),x(this,"8",{style:"highlight"}),x(this,"9",{style:"highlight"}),x(this,"division")),Ql.createElement(xe,null,x(this,"4",{style:"highlight"}),x(this,"5",{style:"highlight"}),x(this,"6",{style:"highlight"}),x(this,"multiplication")),Ql.createElement(xe,null,x(this,"1",{style:"highlight"}),x(this,"2",{style:"highlight"}),x(this,"3",{style:"highlight"}),x(this,"-")),Ql.createElement(xe,null,x(this,"0",{style:"highlight"}),x(this,".",{style:"highlight",colspan:this.dotColspan()}),this.makeAdditionalFunctionKey(0),x(this,"+"))))}parenColspan(){return this.controller.getAdditionalFunctions().length===2?1.5:2}dotColspan(){return this.controller.getAdditionalFunctions().length?1:2}makeAdditionalFunctionKey(e){let i=this.controller.getAdditionalFunctions()[e];return i==="exponent"?x(this,"a^b"):i==="percent"?x(this,"%"):i==="sqrt"?x(this,"sqrt"):void 0}};var on=__dcg_shared_module_exports__['h'](j());var $y=class extends Ot{template(){return on.createElement(kt,{controller:this.props.controller},on.createElement(xe,null,x(this,"("),x(this,")"),x(this,"x^2"),x(this,"sqrt"),on.createElement("div",{class:on.const("dcg-partition-placeholder")}),x(this,"x^3"),x(this,"x^y"),x(this,"ythroot")),on.createElement(xe,null,x(this,"7",{style:"highlight"}),x(this,"8",{style:"highlight"}),x(this,"9",{style:"highlight"}),x(this,"division"),on.createElement("div",{class:on.const("dcg-partition-placeholder")}),x(this,"pi"),x(this,"e^x"),x(this,"!")),on.createElement(xe,null,x(this,"4",{style:"highlight"}),x(this,"5",{style:"highlight"}),x(this,"6",{style:"highlight"}),x(this,"multiplication"),on.createElement("div",{class:on.const("dcg-partition-placeholder")}),x(this,"log"),x(this,"ln"),x(this,"|x|")),on.createElement(xe,null,x(this,"1",{style:"highlight"}),x(this,"2",{style:"highlight"}),x(this,"3",{style:"highlight"}),x(this,"-"),on.createElement("div",{class:on.const("dcg-partition-placeholder")}),x(this,"sin"),x(this,"cos"),x(this,"tan")),on.createElement(xe,null,x(this,"0",{style:"highlight"}),x(this,".",{style:"highlight"}),x(this,"x/y"),x(this,"+"),on.createElement("div",{class:on.const("dcg-partition-placeholder")}),x(this,"arcsin"),x(this,"arccos"),x(this,"arctan")))}};var gs=__dcg_shared_module_exports__['h'](j());var vr=__dcg_shared_module_exports__['h'](j());var{IfElse:hj}=vr.Components,jy=class extends Ot{template(){return vr.createElement(kt,{controller:this.props.controller},vr.createElement(xe,null,x(this,"a^2"),x(this,"a^b"),x(this,"|a|"),vr.createElement("div",{class:vr.const("dcg-partition-placeholder")}),x(this,"7",{style:"highlight"}),x(this,"8",{style:"highlight"}),x(this,"9",{style:"highlight"}),x(this,"division"),vr.createElement("div",{class:vr.const("dcg-partition-placeholder")}),x(this,"%"),x(this,"a/b")),vr.createElement(xe,null,x(this,"sqrt"),x(this,"nthroot"),x(this,"pi"),vr.createElement("div",{class:vr.const("dcg-partition-placeholder")}),x(this,"4",{style:"highlight"}),x(this,"5",{style:"highlight"}),x(this,"6",{style:"highlight"}),x(this,"multiplication"),vr.createElement("div",{class:vr.const("dcg-partition-placeholder")}),x(this,"left",{style:"highlight"}),x(this,"right",{style:"highlight"})),vr.createElement(xe,null,x(this,"sin"),x(this,"cos"),x(this,"tan"),vr.createElement("div",{class:vr.const("dcg-partition-placeholder")}),x(this,"1",{style:"highlight"}),x(this,"2",{style:"highlight"}),x(this,"3",{style:"highlight"}),x(this,"-"),vr.createElement("div",{class:vr.const("dcg-partition-placeholder")}),Wt(.5),x(this,"backspace",{style:"highlight",colspan:1.5})),vr.createElement(xe,null,x(this,"("),x(this,")"),hj(()=>this.controller.getReplaceCommaWith10Exp(),{true:()=>x(this,"10^n"),false:()=>x(this,",")}),vr.createElement("div",{class:vr.const("dcg-partition-placeholder")}),x(this,"0",{style:"highlight"}),x(this,".",{style:"highlight"}),x(this,"ans"),x(this,"+"),vr.createElement("div",{class:vr.const("dcg-partition-placeholder")}),x(this,"enter",{style:"blue",colspan:2})))}};var Qs=__dcg_shared_module_exports__['h'](j());var Yy=class extends Ot{template(){return Qs.createElement(kt,{controller:this.props.controller},Qs.createElement(xe,null,x(this,"q"),x(this,"w"),x(this,"e"),x(this,"r"),x(this,"t"),x(this,"y"),x(this,"u"),x(this,"i"),x(this,"o"),x(this,"p")),Qs.createElement(xe,null,Qs.createElement("div",{class:Qs.const("dcg-half-width-placeholder")}),x(this,"a"),x(this,"s"),x(this,"d"),x(this,"f"),x(this,"g"),x(this,"h"),x(this,"j"),x(this,"k"),x(this,"l"),Qs.createElement("div",{class:Qs.const("dcg-half-width-placeholder")})),Qs.createElement(xe,null,x(this,"=",{style:"highlight"}),x(this,"z"),x(this,"x"),x(this,"c"),x(this,"v"),x(this,"b"),x(this,"n"),x(this,"m"),x(this,","),x(this,"backspace",{style:"highlight"})),Qs.createElement(xe,null,x(this,"shift",{style:"highlight",colspan:1.5}),x(this,"("),x(this,")"),x(this,"["),x(this,"]"),x(this,"!"),x(this,"'"),x(this,"pi"),x(this,"enter",{style:"blue",colspan:1.5})))}};var xm=__dcg_shared_module_exports__['h'](j());var Jy=class extends Ot{template(){return xm.createElement(kt,{controller:this.props.controller},xm.createElement(xe,null,x(this,"a"),x(this,"b"),x(this,"c"),x(this,"d"),x(this,"e"),x(this,"f"),x(this,"g"),x(this,"h"),x(this,"i"),x(this,"j")),xm.createElement(xe,null,x(this,"k"),x(this,"l"),x(this,"m"),x(this,"n"),x(this,"o"),x(this,"p"),x(this,"q"),x(this,"r"),x(this,"s"),x(this,"t")),xm.createElement(xe,null,x(this,"=",{style:"highlight"}),x(this,","),x(this,"u"),x(this,"v"),x(this,"w"),x(this,"x"),x(this,"y"),x(this,"z"),x(this,"pi"),x(this,"backspace",{style:"highlight"})),xm.createElement(xe,null,x(this,"shift",{style:"highlight",colspan:2}),x(this,"("),x(this,")"),x(this,"["),x(this,"]"),x(this,"!"),x(this,"'"),x(this,"enter",{style:"blue",colspan:2})))}};var Zs=__dcg_shared_module_exports__['h'](j());var Xy=class extends Ot{template(){return Zs.createElement(kt,{controller:this.props.controller},Zs.createElement(xe,null,x(this,"Q"),x(this,"W"),x(this,"E"),x(this,"R"),x(this,"T"),x(this,"Y"),x(this,"U"),x(this,"I"),x(this,"O"),x(this,"P")),Zs.createElement(xe,null,Zs.createElement("div",{class:Zs.const("dcg-half-width-placeholder")}),x(this,"A"),x(this,"S"),x(this,"D"),x(this,"F"),x(this,"G"),x(this,"H"),x(this,"J"),x(this,"K"),x(this,"L"),Zs.createElement("div",{class:Zs.const("dcg-half-width-placeholder")})),Zs.createElement(xe,null,x(this,"=",{style:"highlight"}),x(this,"Z"),x(this,"X"),x(this,"C"),x(this,"V"),x(this,"B"),x(this,"N"),x(this,"M"),x(this,","),x(this,"backspace",{style:"highlight"})),Zs.createElement(xe,null,x(this,"shift",{style:"highlight",colspan:1.5}),x(this,"("),x(this,")"),x(this,"["),x(this,"]"),x(this,"!"),x(this,"'"),x(this,"pi"),x(this,"enter",{style:"blue",colspan:1.5})))}};var wm=__dcg_shared_module_exports__['h'](j());var Qy=class extends Ot{template(){return wm.createElement(kt,{controller:this.props.controller},wm.createElement(xe,null,x(this,"A"),x(this,"B"),x(this,"C"),x(this,"D"),x(this,"E"),x(this,"F"),x(this,"G"),x(this,"H"),x(this,"I"),x(this,"J")),wm.createElement(xe,null,x(this,"K"),x(this,"L"),x(this,"M"),x(this,"N"),x(this,"O"),x(this,"P"),x(this,"Q"),x(this,"R"),x(this,"S"),x(this,"T")),wm.createElement(xe,null,x(this,"=",{style:"highlight"}),x(this,","),x(this,"U"),x(this,"V"),x(this,"W"),x(this,"X"),x(this,"Y"),x(this,"Z"),x(this,"pi"),x(this,"backspace",{style:"highlight"})),wm.createElement(xe,null,x(this,"shift",{style:"highlight",colspan:2}),x(this,"("),x(this,")"),x(this,"["),x(this,"]"),x(this,"!"),x(this,"'"),x(this,"enter",{style:"blue",colspan:2})))}};var Ho=__dcg_shared_module_exports__['h'](j());var{IfElse:gj}=Ho.Components,Zy=class extends Ot{template(){return Ho.createElement("div",{class:Ho.const("dcg-sci-func-keypad")},Ho.createElement(kt,{controller:this.props.controller},Ho.createElement(xe,null,x(this,"sin"),x(this,"cos"),x(this,"tan"),Ho.createElement("div",{class:Ho.const("dcg-partition-placeholder")}),x(this,"a^b"),x(this,"sqrt"),x(this,"nthroot")),Ho.createElement(xe,null,x(this,"arcsin"),x(this,"arccos"),x(this,"arctan"),Ho.createElement("div",{class:Ho.const("dcg-partition-placeholder")}),x(this,"e^x"),x(this,"abs"),gj(()=>this.controller.getReplaceRoundWithReciprocal(),{true:()=>x(this,"a^{-1}"),false:()=>x(this,"round")})),Ho.createElement(xe,null,x(this,"mean"),x(this,"stdev"),x(this,"stdevp"),Ho.createElement("div",{class:Ho.const("dcg-partition-placeholder")}),x(this,"ln"),x(this,"log"),x(this,"backspace",{style:"highlight"})),Ho.createElement(xe,null,x(this,"nPr"),x(this,"nCr"),x(this,"!"),Ho.createElement("div",{class:Ho.const("dcg-partition-placeholder")}),x(this,"e"),x(this,"pi"),x(this,"enter",{style:"blue"}))))}};var{SwitchUnion:mj}=gs.Components,ex=class extends Ot{template(){return gs.createElement("div",{role:gs.const("region"),"aria-label":()=>this.s("shared-calculator-narration-keypad")},mj(()=>this.controller.getKeyboardMode(),{qwerty:()=>gs.createElement(Yy,{controller:this.props.controller}),letters:()=>gs.createElement(Jy,{controller:this.props.controller}),capitalQwerty:()=>gs.createElement(Xy,{controller:this.props.controller}),capitalLetters:()=>gs.createElement(Qy,{controller:this.props.controller}),functions:()=>gs.createElement(Zy,{controller:this.props.controller}),main:()=>gs.createElement(jy,{controller:this.props.controller})}))}};var Ki=__dcg_shared_module_exports__['h'](j());var ia=__dcg_shared_module_exports__['h'](j());var{For:fj}=ia.Components,vm=class extends ia.Class{template(){return ia.createElement("tr",null,ia.createElement(fj,{each:()=>this.getBrailleAscii(this.props.latex()),key:e=>e.key},ia.createElement("td",null,e=>ia.createElement("span",{class:ia.const("dcg-key-press")},()=>e.char))),ia.createElement("td",{class:ia.const("dcg-braille-font")},()=>this.getBrailleUnicode(this.props.latex())),ia.createElement("td",null,ia.createElement(Te,{config:this.const({}),latex:()=>this.props.latex()})))}getBrailleAscii(e){let i=hn.toExpandedBrailleAscii(this.getBrailleUnicode(e)),r=[];for(let o=0;o<i.length;o++)r.push({char:i[o],key:o+")"+i[o]});return r}getBrailleUnicode(e){let i;return this.props.brailleMode()==="nemeth"?i=_c(e):this.props.brailleMode()==="ueb"&&(i=Fc(e)),i&&i.value?i.value:""}};var Tu=class extends Ot{template(){return Ki.createElement("div",{class:()=>({"dcg-braille-io-keypad-container":!0,"dcg-has-background-color":this.controller.hasBackgroundColor()})},Ki.createElement("div",{class:Ki.const("dcg-braille-io-keypad")},Ki.createElement("div",{class:Ki.const("dcg-braille-description")},Ki.createElement("div",{class:Ki.const("dcg-braille-title")},()=>this.controller.s("basic-calculator-text-braille-mode-is-on",{mode:this.brailleType()})),Ki.createElement("div",{class:Ki.const("dcg-braille-info-text")},()=>this.controller.s("basic-calculator-text-how-to-type-braille")),Ki.createElement("div",{class:Ki.const("dcg-btn-primary"),role:Ki.const("button"),tabindex:Ki.const(0),onTap:()=>this.controller.dispatch({type:"set-braille-mode",mode:"none"})},()=>this.controller.s("basic-calculator-button-turn-braille-mode-off",{mode:this.brailleType()}))),Ki.createElement("div",{class:Ki.const("dcg-braille-examples-table-container")},Ki.createElement("table",{class:Ki.const("dcg-braille-examples-table")},Ki.createElement("tr",null,Ki.createElement("th",null,()=>this.controller.s("basic-calculator-heading-braille-table-type-this")),Ki.createElement("th",null,()=>this.brailleType()),Ki.createElement("th",null,()=>this.controller.s("basic-calculator-heading-braille-table-typeset"))),Ki.createElement(vm,{brailleMode:()=>this.controller.getBrailleMode(),latex:this.const("2+2")}),Ki.createElement(vm,{brailleMode:()=>this.controller.getBrailleMode(),latex:this.const("\\frac{1}{2}")}),Ki.createElement(vm,{brailleMode:()=>this.controller.getBrailleMode(),latex:this.const("\\sqrt{4}")})),Ki.createElement("div",{class:Ki.const("dcg-more-examples-link")},Ki.createElement("a",{href:()=>"https://www.desmos.com/braille-examples?"+this.controller.getBrailleMode(),target:Ki.const("_blank")},()=>this.controller.s("basic-calculator-link-view-braille-examples"))))))}brailleType(){return this.controller.getBrailleMode()==="nemeth"?"Nemeth":this.controller.getBrailleMode()==="ueb"?"UEB":""}};var bn=__dcg_shared_module_exports__['h'](j());var ot=__dcg_shared_module_exports__['h'](j());var{If:Qc,Input:bj,Textarea:yj}=ot.Components,tx=class extends Ot{constructor(){super(...arguments),this.lastBrailleModeDuringFocusChange="none"}getAriaLabel(){let e=this.getIndex()+1+"";return this.s("shared-calculator-narration-expression-index",{index:e})}didUpdate(){this.renderAnsValue()}didMountMQ(e){this.mq=e}getExp(){return this.model.getExpressionById(this.props.id())}getAns(){return this.model.getExpressionAns(this.props.id())}getAnsId(){return this.model.getExpressionAnsId(this.props.id())}getLatex(){return this.getExp().latex}getValue(){return this.model.getExpressionValue(this.props.id())}getBraille(){let e=this.getExp().braille;if(e!=="")return e;{let i=Bg(this.getLatex(),this.controller.getBrailleMode());return i.isError?"":hn.toExpandedBrailleAscii(i.value)}}getIndex(){return this.model.getExpressionIndex(this.props.id())}getShowEvaluation(){return this.model.shouldShowEvaluationForExpression(this.props.id())}isFractionEvaluation(){return this.getExp().displayAsFraction}canDisplayEvaluationAsFraction(){return this.controller.getDecimalToFraction()&&this.model.canDisplayEvaluationAsFraction(this.props.id())}shouldDisplayEvaluationAsFraction(){return this.canDisplayEvaluationAsFraction()&&this.getExp().displayAsFraction}toggleFractionEvaluation(){this.dispatch({type:"toggle-fraction-evaluation",id:this.props.id()})}getFractionDisplayAriaLabel(){return this.shouldDisplayEvaluationAsFraction()?this.controller.s("basic-calculator-narration-convert-to-decimal"):this.controller.s("basic-calculator-narration-convert-to-fraction")}getError(){let e=this.model.getExpressionError(this.props.id());return e&&this.getLatex().length>0?xd(e,this.controller.getLanguage()):""}showError(){return!!this.getError()}getFractionMessage(){return this.shouldDisplayEvaluationAsFraction()?this.s("basic-calculator-label-convert-to-decimal"):this.s("basic-calculator-label-convert-to-fraction")}getIsFocused(){return!this.controller.isSettingsMenuOpen()&&this.model.isExpressionFocused(this.props.id())}onFocusedChanged(e){let i=this.controller.getBrailleMode(),r=i!==this.lastBrailleModeDuringFocusChange;this.lastBrailleModeDuringFocusChange=i,!(!this.getExp()||r)&&(e?this.dispatch({type:"focusin",id:this.props.id()}):this.dispatch({type:"focusout",id:this.props.id()}))}onMQReflow(){this.renderedAnsData=void 0,this.renderAnsValue()}renderAnsValue(){if(!this.mq)return;let e=this.getAns(),i=!1,r=this.getAnsId();if(r){let o=this.model.getExpressionById(r);i=o&&o.displayAsFraction}this.renderedAnsData&&this.renderedAnsData.value==e&&this.renderedAnsData.displayAsFraction===i||(this.renderedAnsData={value:e,displayAsFraction:i},this.mq.querySelectorAll(".dcg-mq-ans").forEach(o=>{let n=o,a;typeof e=="number"?a=__dcg_shared_module_exports__['ab'](e,{digits:this.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:i}):typeof e=="string"&&(a=e),a?(n.classList.remove("dcg-invalid"),n.innerHTML=a):(n.classList.add("dcg-invalid"),n.innerHTML='<i class="dcg-icon-error" aria-hidden="true"></i>')}))}getEvaluationLatex(){let e=this.getValue();if(e===void 0&&(e=NaN),this.model.isRationalizableConstant(this.props.id())&&!this.shouldDisplayEvaluationAsFraction())return"";let i;if(Array.isArray(e))i=`\\mathrm{${e.length}\\ element\\ list}`;else{var r=__dcg_shared_module_exports__['bb'](e,{digits:this.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:this.shouldDisplayEvaluationAsFraction()});return r==="undefined"?"=\\mathrm{undefined}":"="+r}return i}getEvaluationBraille(){let e=this.getEvaluationLatex(),i=Bg(e,this.controller.getBrailleMode());return i.isError?"":hn.toExpandedBrailleAscii(i.value)}didMountBrailleInput(e){this.brailleInputNode=e}didUnmountBrailleInput(){this.brailleInputNode=void 0}handleBrailleFocus(e){let i=e.target;i&&setTimeout(()=>{i.setSelectionRange(0,0)})}handleBrailleKeydown(e){!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&(be(e)===Jo?(this.forceModelFocus(),this.dispatch({type:"focus-prev-expression"}),e.preventDefault()):be(e)===un?(this.forceModelFocus(),this.dispatch({type:"focus-next-expression"}),e.preventDefault()):be(e)===Fa?(this.forceModelFocus(),this.dispatch({type:"insert-blank-expression"}),e.preventDefault()):be(e)===es&&document.activeElement===this.brailleInputNode&&this.getBraille()===""&&(this.dispatch({type:"backspace-from-braille"}),e.preventDefault()))}forceModelFocus(){document.activeElement!==this.brailleInputNode&&this.onFocusedChanged(!0)}focusBrailleInput(){this.brailleInputNode&&document.activeElement!==this.brailleInputNode&&this.brailleInputNode.focus()}getPostLabel(){if(this.showError())return this.getError();if(this.getShowEvaluation()){let e=this.getValue();return e===void 0&&(e=NaN),Array.isArray(e)?`${e.length} element list`:"equals "+Vo(__dcg_shared_module_exports__['bb'](e,{digits:this.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:this.shouldDisplayEvaluationAsFraction()}))}return""}onBrailleInput(e){this.controller.isSettingsMenuOpen()&&this.controller.dispatch({type:"close-settings-menu"});let i=_S(hn.coerceToSixDotCells(e),this.controller.getBrailleMode()),r=i.isError?"":i.value;(!this.controller.getCapExpressionSize()||fg(r)<=bg)&&this.controller.dispatch({type:"update-latex-from-braille",latex:r,braille:e,id:this.props.id()})}getIndexSubscript(){return`_{${this.getIndex()+1}}`}getEvaluationDigits(){return this.controller.isScientificCalc()?10:7}onMountContainer(e){this.containerNode=e}onTapContainer(e){e.target===this.containerNode&&!this.getShowEvaluation()&&!this.showError()&&this.forceModelFocus()}template(){return ot.createElement("div",{class:()=>({"dcg-basic-expression":!0,"dcg-focused":this.getIsFocused(),"dcg-braille-io":this.controller.renderAsBraille()}),onTap:this.bindFn(this.onTapContainer),onMount:this.bindFn(this.onMountContainer)},ot.createElement(Qc,{predicate:()=>this.controller.renderAsBraille()},()=>ot.createElement("div",{class:ot.const("dcg-braille-input")},ot.createElement(cu,{ariaLabel:()=>{let e=Bg(`eq${this.getIndexSubscript()}`,this.controller.getBrailleMode());return e.isError?"":hn.toExpandedBrailleAscii(e.value)},didMount:this.bindFn(this.didMountBrailleInput),didUnmount:this.bindFn(this.didUnmountBrailleInput),onFocusedChanged:this.bindFn(this.onFocusedChanged),shouldFocus:this.bindFn(this.getIsFocused),onKeydown:this.bindFn(this.handleBrailleKeydown),onInput:this.bindFn(this.onBrailleInput),sixKeyInput:()=>this.controller.getSixKeyInput(),value:()=>this.getBraille(),isStatic:this.const(!1)}))),ot.createElement(Qc,{predicate:()=>this.controller.renderAsBraille()},()=>ot.createElement("div",{class:ot.const("dcg-braille-evaluation-container")},ot.createElement(Qc,{predicate:()=>this.getShowEvaluation()},()=>ot.createElement("div",{class:ot.const("dcg-braille-evaluation")},ot.createElement(bj,{readonly:this.const("true"),class:this.const("dcg-braille-evaluation-inner"),value:()=>this.getEvaluationBraille(),onFocus:this.bindFn(this.handleBrailleFocus),onKeydown:this.bindFn(this.handleBrailleKeydown),onInput:()=>{}}))),ot.createElement(Qc,{predicate:()=>this.showError()},()=>ot.createElement("div",{class:ot.const("dcg-braille-error")},ot.createElement("div",{class:ot.const("dcg-basic-expression-error")},ot.createElement("i",{class:ot.const("dcg-icon-error"),"aria-hidden":ot.const("true")})),ot.createElement(yj,{readonly:this.const("true"),class:this.const("dcg-braille-error-inner"),value:()=>this.getError(),onFocus:this.bindFn(this.handleBrailleFocus),onKeydown:this.bindFn(this.handleBrailleKeydown),onInput:()=>{}}))))),ot.createElement(Qc,{predicate:()=>this.controller.renderAsBraille()},()=>ot.createElement("div",{class:ot.const("dcg-exp-mathquill-container"),didMount:this.bindFn(this.didMountMQ),onTap:this.bindFn(this.forceModelFocus)},ot.createElement(Te,{latex:()=>this.getLatex(),config:this.const({}),onReflow:this.bindFn(this.onMQReflow)}))),ot.createElement(Qc,{predicate:()=>!this.controller.renderAsBraille()},()=>ot.createElement("div",{class:ot.const("dcg-exp-mathquill-container"),didMount:this.bindFn(this.didMountMQ)},ot.createElement(Se,{latex:()=>this.getLatex(),onReflow:this.bindFn(this.onMQReflow),isFocused:this.bindFn(this.getIsFocused),capExpressionSize:()=>this.controller.getCapExpressionSize(),config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.getAriaLabel(),getAriaPostLabel:()=>this.getPostLabel(),hasError:()=>!1,onUserPressedKey:(e,i)=>{this.controller.isSettingsMenuOpen()&&this.controller.dispatch({type:"close-settings-menu"}),this.dispatch({type:"keypad/press-key",key:e,evt:i})},onUserTypedText:e=>this.dispatch({type:"keypad/type-text",text:e}),onUserChangedLatex:e=>{this.dispatch({type:"update-latex",id:this.props.id(),latex:e})},onFocusedChanged:this.bindFn(this.onFocusedChanged),disableSpace:()=>this.controller.getRestrictedEditing()}))),ot.createElement("div",{class:ot.const("dcg-exp-output-container")},ot.createElement(Qc,{predicate:()=>this.showError()&&!this.controller.renderAsBraille()},()=>ot.createElement(De,{tooltip:this.bindFn(this.getError),gravity:this.const("w"),sticky:this.const(!0)},ot.createElement("div",{class:ot.const("dcg-basic-expression-error")},ot.createElement("i",{class:ot.const("dcg-icon-error"),"aria-hidden":ot.const("true")})))),ot.createElement(Qc,{predicate:()=>this.getShowEvaluation()},()=>ot.createElement("div",{class:()=>({"dcg-basic-expression-value":!0,"dcg-basic-evaluation-gray":Array.isArray(this.getValue())})},ot.createElement(Te,{config:this.const({}),latex:()=>this.getEvaluationLatex()}),ot.createElement(Qc,{predicate:this.bindFn(this.canDisplayEvaluationAsFraction)},()=>ot.createElement(De,{tooltip:this.bindFn(this.getFractionMessage),gravity:this.const("s")},ot.createElement("span",{role:ot.const("button"),tabindex:ot.const("0"),"aria-label":this.bindFn(this.getFractionDisplayAriaLabel),class:()=>({"dcg-basic-fraction-toggle":!0,"dcg-selected":this.isFractionEvaluation()}),onTap:this.bindFn(this.toggleFractionEvaluation)},ot.createElement("i",{class:ot.const("dcg-icon-fraction"),"aria-hidden":ot.const("true")}))))))))}getMQConfig(){return this.controller.getMathquillConfig()}};Tt();var{For:xj,If:wj}=bn.Components,ix=class extends Ot{constructor(){super(...arguments),this.didShowAnswerHint=!1,this.didHideAnswerHint=!1}template(){return bn.createElement("div",{class:bn.const("dcg-basic-list-container"),role:bn.const("region"),"aria-label":()=>this.controller.s("shared-calculator-narration-expression-list"),didMount:this.bindFn(this.didMountContainer)},bn.createElement("div",{class:bn.const("dcg-basic-list-placeholder"),didMount:this.bindFn(this.didMountPlaceholder)},bn.createElement(wj,{predicate:this.bindFn(this.showAnswerHint)},()=>bn.createElement("div",{class:bn.const("dcg-answer-hint")},()=>this.controller.s("basic-calculator-label-answer-hint"),bn.createElement("i",{class:bn.const("dcg-icon-curved-arrow")})))),bn.createElement(xj,{each:()=>this.model.getExpressionOrder()},bn.createElement("div",{class:()=>({"dcg-basic-list":!0,"dcg-projector-mode":this.controller.isProjectorMode()})},e=>bn.createElement(tx,{controller:this.props.controller,id:this.const(e)}))))}didMountPlaceholder(e){H(e).on("dcg-tap",Ri)}showAnswerHint(){if(this.didHideAnswerHint)return!1;let e=this.model.getExpressionOrder()[0];return this.model.shouldShowEvaluationForExpression(e)||this.didShowAnswerHint?(this.didShowAnswerHint=!0,this.model.getNumberOfExpressions()>1||this.model.getExpressionLatex(e)===""?(this.didHideAnswerHint=!0,!1):!0):!1}didUpdate(){if(!this.container)return;let e=this.container.querySelector(".dcg-focused");e&&Ms(e,this.container,50)}didMountContainer(e){this.container=e}};var{If:rx,IfElse:mD}=Bt.Components,ox=class extends Ot{template(){return Bt.createElement(rx,{predicate:()=>this.controller.shouldRender()},()=>Bt.createElement("div",{class:Bt.const("dcg-calculator-api-container"),style:Bt.const("width: 100%; height: 100%; position: relative;")},Bt.createElement("div",{class:()=>({"dcg-calc-basic-main-wrapper":!0,"dcg-narrow":this.controller.containerSize.width<570,"dcg-short":this.controller.containerSize.height<=540,"dcg-scientific-calculator":this.controller.isScientificCalc(),"dcg-four-function-calculator":this.controller.isFourFunctionCalc(),"dcg-container":!0}),onKeydown:this.bindFn(this.handleRootKeydown),didMount:this.bindFn(this.didMountRoot),"x-ms-format-detection":Bt.const("none")},Bt.createElement("div",{role:Bt.const("application"),"aria-label":()=>this.controller.isScientificCalc()?this.controller.s("basic-calculator-narration-calc-description-scientific"):this.controller.isFourFunctionCalc()?this.controller.s("basic-calculator-narration-calc-description-fourfunction"):"",class:()=>({"dcg-calc-basic-main":!0,"dcg-inverted-colors":this.controller.getInvertedColors(),"dcg-projector-mode":this.controller.isProjectorMode(),"dcg-ipad":ka,"dcg-has-background-color":this.controller.hasBackgroundColor(),"dcg-no-hyperlinks":!this.controller.getAllowLinks()}),style:()=>({"font-size":`${this.controller.getFontSize()}px`,background:this.controller.getBackgroundColor(),color:this.controller.getTextColor(),filter:this.controller.getInvertedColors()?"invert(100%)":"none"})},Bt.createElement(ix,{controller:this.props.controller}),Bt.createElement(rx,{predicate:()=>this.controller.isScientificCalc()&&this.model.isSingleExpression()},()=>Bt.createElement("div",null,Bt.createElement(gD,{controller:this.props.controller}),Bt.createElement("div",{class:Bt.const("dcg-basic-keypad-container")},mD(()=>this.controller.renderAsBraille(),{true:()=>Bt.createElement(Tu,{controller:this.props.controller}),false:()=>Bt.createElement($y,{controller:this.props.controller})})))),Bt.createElement(rx,{predicate:()=>this.controller.isScientificCalc()&&!this.model.isSingleExpression()},()=>Bt.createElement("div",null,Bt.createElement(hD,{controller:this.props.controller}),Bt.createElement("div",{class:Bt.const("dcg-basic-keypad-container")},mD(()=>this.controller.renderAsBraille(),{true:()=>Bt.createElement(Tu,{controller:this.props.controller}),false:()=>Bt.createElement(ex,{controller:this.props.controller})})))),Bt.createElement(rx,{predicate:()=>this.controller.isFourFunctionCalc()&&this.model.isSingleExpression()},()=>Bt.createElement("div",null,Bt.createElement(uD,{controller:this.props.controller}),Bt.createElement("div",{class:Bt.const("dcg-basic-keypad-container")},mD(()=>this.controller.renderAsBraille(),{true:()=>Bt.createElement(Tu,{controller:this.props.controller}),false:()=>Bt.createElement(Wy,{controller:this.props.controller})})))),Bt.createElement(rx,{predicate:()=>this.controller.isFourFunctionCalc()&&!this.model.isSingleExpression()},()=>Bt.createElement("div",null,Bt.createElement(dD,{controller:this.props.controller}),Bt.createElement("div",{class:Bt.const("dcg-basic-keypad-container")},mD(()=>this.controller.renderAsBraille(),{true:()=>Bt.createElement(Tu,{controller:this.props.controller}),false:()=>Bt.createElement(Hy,{controller:this.props.controller})}))))))))}didMountRoot(e){lg(e)}handleRootKeydown(e){let i=Dr(e),r=this.controller.model;if(Hf(e))return this.dispatch({type:"undo",source:"keyboard-shortcut"}),!1;if(Wf(e))return this.dispatch({type:"redo",source:"keyboard-shortcut"}),!1;if(e.altKey!==Rr&&e.metaKey===Rr&&!e.ctrlKey&&e.shiftKey&&i==="A"&&this.controller.getDecimalToFraction()){let o=r.getFocusedExpression();o&&r.canDisplayEvaluationAsFraction(o.id)&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"toggle-fraction-evaluation",id:o.id}),this.controller.runAfterDispatch(()=>{r.getFocusedExpression().displayAsFraction?le(this.controller.s("shared-calculator-narration-show-as-fraction")):le(this.controller.s("shared-calculator-narration-show-as-decimal"))}))}else if(!e.metaKey&&!e.shiftKey){if(!e.ctrlKey&&!e.altKey&&be(e)===es){if(!document.activeElement||qp(document.activeElement))return!1}else if(e.ctrlKey===Rr&&e.altKey===!Rr){if(i==="N")return this.controller.getBrailleControls()?(this.dispatch({type:"set-braille-mode",mode:"nemeth"}),le(this.controller.s("shared-calculator-narration-hotkey-braille-mode-nemeth")),!1):void 0;if(i==="U")return this.controller.getBrailleControls()?(this.dispatch({type:"set-braille-mode",mode:"ueb"}),le(this.controller.s("shared-calculator-narration-hotkey-braille-mode-ueb")),!1):void 0;if(i==="Q"||i==="X")return this.controller.getBrailleControls()?(this.dispatch({type:"set-braille-mode",mode:"none"}),le(this.controller.s("shared-calculator-narration-hotkey-braille-mode-off")),!1):void 0;if(i==="6"){if(!this.controller.getBrailleControls())return;let o=!this.controller.getSixKeyInput();return this.dispatch({type:"set-six-key-input",mode:o}),le(o?this.controller.s("basic-calculator-narration-hotkey-six-key-input-on"):this.controller.s("basic-calculator-narration-hotkey-six-key-input-off")),!1}else if(i==="D")return this.controller.isScientificCalc()?(e.preventDefault(),this.controller.dispatch({type:"degrees"}),le(r.getDegreeMode()?this.controller.s("basic-calculator-narration-controlbar-degrees"):this.controller.s("basic-calculator-narration-controlbar-radians")),!1):void 0}}return!0}};var Cm=class extends Du{constructor(i){super(i)}init(i){i=__dcg_shared_module_exports__['l'](i),i.backgroundColor&&!__dcg_shared_module_exports__['kd'](i.backgroundColor)&&(__dcg_shared_module_exports__['td'].warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"),delete i.backgroundColor),i.textColor&&!__dcg_shared_module_exports__['kd'](i.textColor)&&(__dcg_shared_module_exports__['td'].warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete i.textColor);let r=__dcg_shared_module_exports__['a']({language:"en",qwertyKeyboard:!0,links:!0,degreeMode:!1,settingsMenu:!0,invertedColors:!1,backgroundColor:"#fff",textColor:"#000",brailleMode:"none",sixKeyInput:!1,brailleControls:!0,brailleExpressionDownload:!0,projectorMode:!1,capExpressionSize:!1,functionDefinition:!0,autosize:!0,evaluationMode:"scientific",restrictedEditing:!1,additionalFunctions:["sqrt"],typingSlashWritesDivisionSymbol:!1,typingAsteriskWritesTimesSymbol:!1,decimalToFraction:!0,replaceCommaWith10Exp:!1,replaceRoundWithReciprocal:!1},i);this.settings=new Zi;let o={workerPool:gm,settingsProxy:this.settings};this.controller=new qy(r,o),this.controller.onEventEmitted=n=>{n==="render"&&this.updateView(),this.triggerEvent(n,void 0)},this.setupDomChangeDetector(r.autosize)}onCreateView(){return Sm.mountToNode(ox,this.rootElt,{controller:Sm.const(this.controller)})}setState(i,r){r||(r={}),this.controller.dispatch({type:"set-state-from-api",state:i,opts:{allowUndo:!!r.allowUndo}})}getState(){return __dcg_shared_module_exports__['l'](this.controller.model.getPersistedState())}undo(){this.controller.dispatch({type:"undo",source:"api"})}redo(){this.controller.dispatch({type:"redo",source:"api"})}clearHistory(){this.controller.dispatch({type:"clear-history"})}setBlank(i){i||(i={}),this.controller.dispatch({type:"set-blank",opts:{allowUndo:!!i.allowUndo}})}updateSettings(i){if(i!=null)for(let r in i)switch(r){case"fontSize":let o=i[r];if(o===void 0)continue;this.controller.dispatch({type:"update-font-size",size:o});break;case"invertedColors":let n=i[r];if(n===void 0)continue;this.controller.dispatch({type:"update-inverted-colors",mode:n});break;case"backgroundColor":let a=i[r];if(a===void 0||!__dcg_shared_module_exports__['kd'](a)){__dcg_shared_module_exports__['td'].warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)");continue}this.controller.dispatch({type:"update-background-color",color:a});break;case"textColor":let s=i[r];if(s===void 0||!__dcg_shared_module_exports__['kd'](s)){__dcg_shared_module_exports__['td'].warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)");continue}this.controller.dispatch({type:"update-text-color",color:s});break;case"degreeMode":let l=i[r];if(l===void 0)continue;this.controller.dispatch({type:"update-degree-mode",mode:l});break;case"brailleMode":let c=i[r];this.controller.dispatch({type:"set-braille-mode",mode:c});break;case"sixKeyInput":let p=i[r];if(p===void 0)continue;this.controller.dispatch({type:"set-six-key-input",mode:p});break;case"brailleControls":{let I=i[r];if(I===void 0)continue;this.controller.dispatch({type:"set-braille-controls",value:I});break}case"brailleExpressionDownload":let u=i[r];if(u===void 0)continue;this.controller.dispatch({type:"set-braille-expression-download",mode:u});break;case"projectorMode":let g=i[r];if(g===void 0)continue;this.controller.dispatch({type:"update-projector-mode",mode:g});break;case"capExpressionSize":let m=i[r];if(m===void 0)continue;this.controller.dispatch({type:"update-cap-expression-size",mode:m});break;case"language":let w=i[r];if(w===void 0)continue;this.controller.dispatch({type:"update-language",language:Yl(w)});break;case"settingsMenu":i.settingsMenu?this.controller.dispatch({type:"enable-settings-menu"}):this.controller.dispatch({type:"disable-settings-menu"});break;case"qwertyKeyboard":{this.controller.dispatch({type:"update-options",options:{qwertyKeyboard:!!i.qwertyKeyboard}});let I=this.controller.getKeyboardMode();(I==="qwerty"||I==="letters")&&this.controller.dispatch({type:"ABC"})}break;case"functionDefinition":i.functionDefinition?this.controller.model.enableFunctionDefinition():this.controller.model.disableFunctionDefinition();break;case"links":this.controller.dispatch({type:"update-options",options:{links:!!i.links}});break;case"decimalToFraction":let C=i[r];if(C===void 0)continue;this.controller.dispatch({type:"update-decimal-to-fraction",mode:C});break;case"replaceCommaWith10Exp":let S=i[r];if(S===void 0)continue;this.controller.dispatch({type:"set-replace-comma-with-10-exp",replace:S});break;case"replaceRoundWithReciprocal":let k=i[r];if(k===void 0)continue;this.controller.dispatch({type:"set-replace-round-with-reciprocal",replace:k});break;case"restrictedEditing":{this.controller.dispatch({type:"update-options",options:{restrictedEditing:!!i.restrictedEditing}});break}case"typingAsteriskWritesTimesSymbol":let M=i[r];if(M===void 0)continue;this.controller.dispatch({type:"set-typing-asterisk-writes-times-symbol",mode:M});break}}focusFirstExpression(){this.controller.dispatch({type:"focus-first-expression"})}onResizeView(i){this.controller.dispatch({type:"ui/container-resized",size:i})}onDestroyView(){Sm.unmountFromNode(this.rootElt)}destroy(){this.controller.model.destroy(),super.destroy()}};var Em=class extends Cm{constructor(e,i){super(e),this.init(vj(i||{}))}};function vj(t){if(t=__dcg_shared_module_exports__['l'](t),t.hasOwnProperty("typingSlashWritesDivisionSymbol")||(t.typingSlashWritesDivisionSymbol=!0),t.hasOwnProperty("typingAsteriskWritesTimesSymbol")||(t.typingAsteriskWritesTimesSymbol=!0),t.exponentButtonForSquareRoot&&(__dcg_shared_module_exports__['td'].warn(`As of API version 1.0, the 'exponentButtonForSquareRoot' option is deprecated.Use 'additionalFunctions: "exponent"' instead.`),t.additionalFunctions=["exponent"]),t.additionalFunctions){var e=t.additionalFunctions;typeof e=="string"&&(e=[e]),e.length>2&&(__dcg_shared_module_exports__['td'].warn("additionalFunctions can only take up to 2 new functions. Using the first two."),e=e.slice(0,2));let r=!0;for(var i=0;i<e.length;i++)["sqrt","exponent","percent","fraction"].indexOf(e[i])===-1&&(__dcg_shared_module_exports__['td'].warn("Unrecognized value: '"+e[i]+`' for 'additionalFunction'. Valid values are 'sqrt', 'percent', 'exponent', or 'fraction'. Using default ("sqrt")`),r=!1);t.additionalFunctions=r?e:["sqrt"]}return(!t.additionalFunctions||!t.additionalFunctions.length)&&(t.additionalFunctions=["sqrt"]),t.singleExpression?t.evaluationMode="singleExpressionFourFunction":t.evaluationMode="fourFunction",delete t.singleExpression,t.hasOwnProperty("decimalToFraction")||(t.decimalToFraction=!1),t.language&&(t.language=Yl(t.language)),t}var Dm=class extends Cm{constructor(e,i){super(e),this.init(Cj(i||{}))}};function Cj(t){return t=__dcg_shared_module_exports__['l'](t),t.singleExpression?t.evaluationMode="singleExpressionScientific":t.evaluationMode="scientific",delete t.singleExpression,t.language&&(t.language=Yl(t.language)),t}var Im=__dcg_shared_module_exports__['h'](j());var nx=class{constructor(e){this.keypadType="scientific";this.projectorMode="none";this.scientificKeyboardMode="main";this.dispatcher=new Hd;this.s=Dl(()=>"en");this.dispatch=e=>{this.dispatcher.dispatch(e);let i;for(;i=this._queuedCallbacks.shift();)i()};this._queuedCallbacks=[];var i,r;this.keypadType=(i=e==null?void 0:e.keypadType)!=null?i:"scientific",this.projectorMode=(r=e==null?void 0:e.projectorMode)!=null?r:"none",this.dispatcher=new Hd,this.hookUpDispatcher()}getBackgroundColor(){return"does-not-matter"}runAfterDispatch(e){this._queuedCallbacks.push(e)}enqueueEvent(e){this.runAfterDispatch(()=>{this.onEventEmitted&&this.onEventEmitted(e)})}getKeypadType(){return this.keypadType}getProjectorMode(){return this.projectorMode}getScientificKeyboardMode(){return this.scientificKeyboardMode}updateKeyboardMode(e){this.scientificKeyboardMode=e}typeIntoFocusedMathquill(e){e=e.replace(/\r|\n/g,"");let i=this.activeMQ;i&&(i.typedText(e),Se.simulateUserChangedLatex(i))}pressKeyInFocusedMathquill(e,i){let r=this.activeMQ;if(r){if(e==="Enter"){i&&(i.preventDefault(),i.stopPropagation()),this.enqueueEvent("enter");return}r.keystroke(e,i)}}executeCommandInFocusedMathquill(e){let i=this.activeMQ;i&&Ng(i,e,{capExpressionSize:!1})}hookUpDispatcher(){this.dispatcher.register(e=>{switch(this.enqueueEvent("render"),e.type){case"hide-keypad":this.enqueueEvent("hide-keypad");break;case"set-active-mq":this.activeMQ=e.mq;break;case"set-keypad-type":this.keypadType=e.keypadType;break;case"keypad/shift":this.updateKeyboardMode(this.scientificKeyboardMode==="capitalQwerty"?"qwerty":"capitalQwerty");break;case"main":this.updateKeyboardMode("main");break;case"ABC":this.updateKeyboardMode("qwerty");break;case"functions":this.updateKeyboardMode("functions");break;case"keypad/type-text":this.typeIntoFocusedMathquill(e.text);break;case"keypad/press-key":this.pressKeyInFocusedMathquill(e.key,e.evt);break;case"keypad/custom-command":this.executeCommandInFocusedMathquill(e.command);break;case"keypad/123":case"keypad/abc":case"keypad/audio-trace":break;default:return e}})}};var Pr=__dcg_shared_module_exports__['h'](j());var z5=__dcg_shared_module_exports__['h'](j()),Wo=class extends z5.Class{init(){this.controller=this.props.controller(),this.dispatch=this.controller.dispatch,this.s=this.controller.s}};var Ur=__dcg_shared_module_exports__['h'](j());var fD=class extends Wo{template(){return Ur.createElement(kt,{controller:this.props.controller},Ur.createElement(xe,null,x(this,"a^2"),x(this,"a^b"),x(this,"|a|"),x(this,"a/b"),Ur.createElement("div",{class:Ur.const("dcg-partition-placeholder")}),x(this,"7",{style:"highlight"}),x(this,"8",{style:"highlight"}),x(this,"9",{style:"highlight"}),x(this,"/"),Ur.createElement("div",{class:Ur.const("dcg-partition-placeholder")}),x(this,"x"),x(this,"y")),Ur.createElement(xe,null,x(this,"("),x(this,")"),x(this,"<"),x(this,">"),Ur.createElement("div",{class:Ur.const("dcg-partition-placeholder")}),x(this,"4",{style:"highlight"}),x(this,"5",{style:"highlight"}),x(this,"6",{style:"highlight"}),x(this,"*"),Ur.createElement("div",{class:Ur.const("dcg-partition-placeholder")}),x(this,"left",{style:"highlight"}),x(this,"right",{style:"highlight"})),Ur.createElement(xe,null,x(this,"sqrt"),x(this,","),x(this,"<="),x(this,">="),Ur.createElement("div",{class:Ur.const("dcg-partition-placeholder")}),x(this,"1",{style:"highlight"}),x(this,"2",{style:"highlight"}),x(this,"3",{style:"highlight"}),x(this,"-"),Ur.createElement("div",{class:Ur.const("dcg-partition-placeholder")}),Wt(.5),x(this,"backspace",{style:"highlight",colspan:1.5})),Ur.createElement(xe,null,x(this,"nthroot"),x(this,"pi"),x(this,"%"),x(this,"a_b"),Ur.createElement("div",{class:Ur.const("dcg-partition-placeholder")}),x(this,"0",{style:"highlight"}),x(this,".",{style:"highlight"}),x(this,"="),x(this,"+"),Ur.createElement("div",{class:Ur.const("dcg-partition-placeholder")}),x(this,"enter",{colspan:2,style:"blue"})))}};var el=__dcg_shared_module_exports__['h'](j());var bD=class extends Wo{template(){return el.createElement(kt,{controller:this.props.controller},el.createElement(xe,null,x(this,"q"),x(this,"w"),x(this,"e"),x(this,"r"),x(this,"t"),x(this,"y"),x(this,"u"),x(this,"i"),x(this,"o"),x(this,"p")),el.createElement(xe,null,el.createElement("div",{class:el.const("dcg-half-width-placeholder")}),x(this,"a"),x(this,"s"),x(this,"d"),x(this,"f"),x(this,"g"),x(this,"h"),x(this,"j"),x(this,"k"),x(this,"l"),el.createElement("div",{class:el.const("dcg-half-width-placeholder")})),el.createElement(xe,null,x(this,"shift",{style:"highlight"}),x(this,"z"),x(this,"x"),x(this,"c"),x(this,"v"),x(this,"b"),x(this,"n"),x(this,"m"),x(this,":"),x(this,"backspace",{style:"highlight"})),el.createElement(xe,null,x(this,"~"),x(this,"{"),x(this,"}"),x(this,"["),x(this,"]"),x(this,"\xB1"),x(this,"'"),x(this,"obelus"),x(this,"enter",{style:"blue"})))}};var tl=__dcg_shared_module_exports__['h'](j());var yD=class extends Wo{template(){return tl.createElement(kt,{controller:this.props.controller},tl.createElement(xe,null,x(this,"Q"),x(this,"W"),x(this,"E"),x(this,"R"),x(this,"T"),x(this,"Y"),x(this,"U"),x(this,"I"),x(this,"O"),x(this,"P")),tl.createElement(xe,null,tl.createElement("div",{class:tl.const("dcg-half-width-placeholder")}),x(this,"A"),x(this,"S"),x(this,"D"),x(this,"F"),x(this,"G"),x(this,"H"),x(this,"J"),x(this,"K"),x(this,"L"),tl.createElement("div",{class:tl.const("dcg-half-width-placeholder")})),tl.createElement(xe,null,x(this,"shift",{style:"highlight"}),x(this,"Z"),x(this,"X"),x(this,"C"),x(this,"V"),x(this,"B"),x(this,"N"),x(this,"M"),x(this,","),x(this,"backspace",{style:"highlight"})),tl.createElement(xe,null,x(this,"="),x(this,"("),x(this,")"),x(this,"["),x(this,"]"),x(this,"\xB1"),x(this,"'"),x(this,"obelus"),x(this,"enter",{style:"blue"})))}};var ra=__dcg_shared_module_exports__['h'](j());var xD=class extends Wo{template(){return ra.createElement(kt,{controller:this.props.controller},ra.createElement(xe,null,x(this,"sin"),x(this,"cos"),x(this,"tan"),ra.createElement("div",{class:ra.const("dcg-partition-placeholder")}),x(this,"ln"),x(this,"log"),x(this,"backspace",{style:"highlight"})),ra.createElement(xe,null,x(this,"arcsin"),x(this,"arccos"),x(this,"arctan"),ra.createElement("div",{class:ra.const("dcg-partition-placeholder")}),x(this,"e^x"),x(this,"abs"),x(this,"round")),ra.createElement(xe,null,x(this,"mean"),x(this,"stdev"),x(this,"stdevp"),ra.createElement("div",{class:ra.const("dcg-partition-placeholder")}),x(this,"a^b"),x(this,"sqrt"),x(this,"nthroot")),ra.createElement(xe,null,x(this,"nPr"),x(this,"nCr"),x(this,"!"),ra.createElement("div",{class:ra.const("dcg-partition-placeholder")}),x(this,"e"),x(this,"%"),x(this,"enter",{style:"blue"})))}};var Pn=__dcg_shared_module_exports__['h'](j());var wD=class extends Wo{template(){return Pn.createElement(kt,{controller:this.props.controller},Pn.createElement(xe,null,x(this,"1",{style:"highlight"}),x(this,"2",{style:"highlight"}),x(this,"3",{style:"highlight"}),x(this,"4",{style:"highlight"}),x(this,"5",{style:"highlight"}),x(this,"6",{style:"highlight"}),x(this,"7",{style:"highlight"}),x(this,"8",{style:"highlight"}),x(this,"9",{style:"highlight"}),x(this,"0",{style:"highlight"}),Pn.createElement("div",{class:Pn.const("dcg-partition-placeholder")}),x(this,"left",{style:"highlight"}),x(this,"right",{style:"highlight"}),Pn.createElement("div",{class:Pn.const("dcg-inline-hide-keypad-button"),"dcg-command":Pn.const("hide-keypad"),onTap:()=>this.props.controller().dispatch({type:"hide-keypad"})},Pn.createElement("div",{class:Pn.const("dcg-inline-hide-keypad-button-inner")},Pn.createElement("i",{class:Pn.const("dcg-icon-hide"),"aria-hidden":Pn.const("true")})))),Pn.createElement(xe,null,Wt(2),x(this,"."),x(this,"="),x(this,"+"),x(this,"-"),x(this,"multiplication"),x(this,"obelus"),Wt(3),x(this,"backspace",{style:"highlight",colspan:1.5}),Wt(1)),Pn.createElement(xe,null,Wt(2),x(this,"a/b"),x(this,","),x(this,"("),x(this,")"),x(this,"<"),x(this,">"),Wt(2.5),x(this,"enter",{colspan:2,style:"blue"}),Wt(1)))}};var ms=__dcg_shared_module_exports__['h'](j());var vD=class extends Wo{template(){let t=this.props.controller();return ms.createElement(za,{controller:this.props.controller},ms.createElement(fi,{command:this.const("main"),selected:()=>t.getScientificKeyboardMode()==="main",ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:()=>t.dispatch({type:"main"})},()=>t.s("basic-calculator-button-controlbar-main")),ms.createElement(fi,{command:this.const("ABC"),selected:()=>["qwerty","capitalQwerty"].indexOf(t.getScientificKeyboardMode())!==-1,ignoreInTabOrder:this.const(!0),selectable:this.const(!0),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-abc"),onTap:()=>t.dispatch({type:"ABC"})},()=>t.s("basic-calculator-button-controlbar-abc")),ms.createElement(fi,{command:this.const("functions"),selected:()=>["functions","restrictedFunctions"].indexOf(t.getScientificKeyboardMode())!==-1,ariaLabel:()=>t.s("basic-calculator-narration-controlbar-functions"),ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:()=>t.dispatch({type:"functions"})},()=>t.s("shared-calculator-button-controlbar-functions")),ms.createElement("div",{class:ms.const("dcg-hide-keypad-button"),"dcg-command":ms.const("hide-keypad"),onTap:()=>t.dispatch({type:"hide-keypad"})},ms.createElement("i",{class:ms.const("dcg-icon-hide"),"aria-hidden":ms.const("true")})))}};var{Switch:Sj,SwitchUnion:Ej}=Pr.Components,CD=class extends Wo{template(){return Pr.createElement("div",{class:Pr.const("dcg-calculator-api-container"),style:()=>"width: 100%; height: 100%; position: relative;"},Pr.createElement("div",{class:Pr.const("dcg-do-not-blur dcg-container dcg-api-shared-keypad-root"),didMount:this.bindFn(this.didMountRoot)},this.children))}didMountRoot(e){lg(e)}},PM=class extends Wo{template(){return Pr.createElement(CD,__dcg_shared_module_exports__['a']({},this.props),Pr.createElement("div",{class:()=>({"dcg-fourfunction-keypad-container":!0,"dcg-projector-mode":this.props.controller().getProjectorMode()!=="none","dcg-classroom-large-projector-mode":this.props.controller().getProjectorMode()==="large"}),role:Pr.const("region"),"aria-label":()=>this.s("shared-calculator-narration-keypad")},Pr.createElement(wD,{controller:this.props.controller})))}},OM=class extends Wo{template(){return Pr.createElement(CD,__dcg_shared_module_exports__['a']({},this.props),Pr.createElement("div",{class:()=>({"dcg-scientific-keypad-container":!0,"dcg-projector-mode":this.props.controller().getProjectorMode()!=="none","dcg-classroom-large-projector-mode":this.props.controller().getProjectorMode()==="large"})},Pr.createElement(vD,{controller:this.props.controller}),Pr.createElement("div",{role:Pr.const("group"),"aria-label":()=>this.s("shared-calculator-narration-keypad")},Pr.createElement(Sj,{key:()=>this.controller.getScientificKeyboardMode()},e=>{switch(e){case"qwerty":return Pr.createElement(bD,{controller:this.props.controller});case"capitalQwerty":return Pr.createElement(yD,{controller:this.props.controller});case"functions":return Pr.createElement(xD,{controller:this.props.controller});default:return Pr.createElement(fD,{controller:this.props.controller})}}))))}},SD=class extends Wo{template(){return Ej(()=>this.controller.getKeypadType(),{fourfunction:()=>Pr.createElement(PM,__dcg_shared_module_exports__['a']({},this.props)),scientific:()=>Pr.createElement(OM,__dcg_shared_module_exports__['a']({},this.props))})}};var km=class extends Du{constructor(i,r){super(i);this.init(r)}init(i){this.controller=new nx(i),this.controller.onEventEmitted=r=>{r==="render"&&this.updateView(),this.triggerEvent(r,void 0)},this.setupDomChangeDetector(!0)}setActiveMathquill(i){this.controller.dispatch({type:"set-active-mq",mq:i})}setKeypadType(i){this.controller.dispatch({type:"set-keypad-type",keypadType:i})}onCreateView(){return Im.mountToNode(SD,this.rootElt,{controller:Im.const(this.controller)})}onResizeView(i){}onDestroyView(){Im.unmountFromNode(this.rootElt)}destroy(){super.destroy()}};var Tm=class extends Eu{constructor(e,i,r){super(e,__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['a']({},i),{product:"geometry-calculator"}),r),this.setState(kg),this.clearHistory()}};var Dj=__dcg_shared_module_exports__['h'](j());ad();var ax;typeof Desmos!="undefined"?ax=Desmos:(ax={},window.Desmos=ax);var kj={SMALL:"0.85",MEDIUM:"1",LARGE:"1.35"};function _M(...t){return new mm(...t)}_M.prototype=mm.prototype;function U5(...t){return new Tm(...t)}U5.prototype=Tm.prototype;function FM(...t){return new fm(...t)}FM.prototype=fm.prototype;function H5(...t){return new Em(...t)}H5.prototype=Em.prototype;function W5(...t){return new Dm(...t)}W5.prototype=Dm.prototype;function $5(...t){return new km(...t)}$5.prototype=km.prototype;var DD={version:mO,Colors:{RED:Rw,BLUE:Nw,GREEN:Bw,ORANGE:qw,PURPLE:Kw,BLACK:zw},imageFileToDataURL:Bv,supportedLanguages:["en"].concat(typeof desmosLocaleData=="object"?Object.keys(desmosLocaleData):[]),Styles:__dcg_shared_module_exports__['a'](__dcg_shared_module_exports__['a']({},Gk),Mk),ColumnModes:Af,DragModes:Ak,AxisArrowModes:__dcg_shared_module_exports__['Xc'],FontSizes:Rv,LabelSizes:kj,LabelOrientations:Vk,GraphingCalculator:_M,Calculator:_M,FourFunctionCalculator:H5,ScientificCalculator:W5,Abraham:Kl,Private:{Abraham:Kl,Mathtools:WI,Graphtools:{ScalePair:__dcg_shared_module_exports__['Dc'],getClippingGraphType:__dcg_shared_module_exports__['Pc'],mapSegmentToCanvas:__dcg_shared_module_exports__['Jc'],computeDrawingCommandsForDOMLabel:Ev,drawCommandsToCtx:Dv},MathquillConfig:{getAutoCommands:pl,getAutoOperators:sa},Parser:__dcg_shared_module_exports__['sd'],extractSliderValueFromLatex:ff,__compareBranches:{getSliderMin:Ga,getSliderMax:ks,valueTypes:__dcg_shared_module_exports__['Y'],migrateGeoStateToCalcState:Yp},GeometryBeta:U5,migrateGeoStateToCalcState:Yp,HeadlessGraphingCalculator:FM,maybeNotifyUserChangedLatex:Se.simulateUserChangedLatex,Fragile:{DCGView:Dj,PromptSliderView:$s,Checkbox:$e,SegmentedControl:Ni,MathquillView:Se,InlineMathInputView:Lt,StaticMathquillView:Te,Tooltip:De,ExpressionOptionsMenuView:tm,ExpressionView:gu,ImageIconView:mu,evaluateLatex:wi,Keys:oi,getQueryParams:vn,getReconciledExpressionProps:__dcg_shared_module_exports__['oc'],List:{moveItemsTo:pd,removeItemById:Ch},currentLanguage:Mf}},TestInternal:{subscribeToSharedClockBus:t=>Cc(t),getCalcConfigAll:()=>SA(),fetchLanguage:t=>LO(t)},MathQuill:hl,PillowKeypad:$5,HeadlessGraphingCalculator:FM};function RM(t){var e=ax.enabledFeatures;return!e||e[t]}function kD(t){DD[t]=function(){throw new Error("The Desmos "+t+" is not enabled for this API key.")}}RM("GraphingCalculator")||(kD("GraphingCalculator"),kD("Calculator"));RM("FourFunctionCalculator")||kD("FourFunctionCalculator");RM("ScientificCalculator")||kD("ScientificCalculator");for(ED in DD)DD.hasOwnProperty(ED)&&(ax[ED]=DD[ED]);var ED;Tt();typeof Desmos=="undefined"&&(Desmos={});function j5(){Desmos.$=H,Desmos.$.noConflict(!0)}typeof Desmos=="undefined"&&(Desmos={});j5();
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */
/*!!
 *  Canvas 2 Svg v1.0.19
 *  A low level canvas to SVG converter. Uses a mock canvas context to build an SVG document.
 *
 *  Licensed under the MIT license:
 *  http://www.opensource.org/licenses/mit-license.php
 *
 *  Author:
 *  Kerry Liu
 *
 *  Copyright (c) 2014 Gliffy Inc.
 *
 *  Modifications by Desmos:
 *  - wrapped in AMD pattern
 *  - added ctx.ellipse() method
 *  - fixed image opacity bug
 *  - added ability to add classNames to exported svg elements
 *  - added ability to add named groups
 *  - removed dominant-basline attribute. Editors appear to ignore it. Must solve baseline issues using transformations
 */
})();
  })();
})(typeof window !== undefined ? window : this || {});

})();